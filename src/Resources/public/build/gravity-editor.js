(function(){var p={env:{NODE_ENV:"production"}};var g=typeof window!=="undefined"?window:typeof self!=="undefined"?self:typeof globalThis!=="undefined"?globalThis:this;if(g)g.process=p})();var Mp=Object.defineProperty;var Lf=xt=>{throw TypeError(xt)};var Lp=(xt,Et,yt)=>Et in xt?Mp(xt,Et,{enumerable:!0,configurable:!0,writable:!0,value:yt}):xt[Et]=yt;var oe=(xt,Et,yt)=>Lp(xt,typeof Et!="symbol"?Et+"":Et,yt),$f=(xt,Et,yt)=>Et.has(xt)||Lf("Cannot "+yt);var pe=(xt,Et,yt)=>($f(xt,Et,"read from private field"),yt?yt.call(xt):Et.get(xt)),qe=(xt,Et,yt)=>Et.has(xt)?Lf("Cannot add the same private member more than once"):Et instanceof WeakSet?Et.add(xt):Et.set(xt,yt),$e=(xt,Et,yt,pn)=>($f(xt,Et,"write to private field"),pn?pn.call(xt,yt):Et.set(xt,yt),yt);(function(){"use strict";var yt,pn,Ft,gr,Kr,Oo,To,wi,ki,Zr,Ii,So,Eo,Xr,Ri,vo,_o,Jr,ei,ti,Co,wo,ko,br,yr,Io,Ro,Vn,Mn,Do,No,Po,Mo,Lo,$o,mn,Di,Bo,Ni,tr,Fo,ri,nr,oi,Ar,qo,Qo,jo,Ho,Tr,Uo,gn,Mi,Li,nc,$i,Go,zo,Bi,xr,Fi,qi,Rt,Vo,Wo,Qi,Yo,Kt,Ln,si,ji,ai,li,Er,Hi,Ko,Zo,Ui,Xo,bn,rr,Gi,ui,zi,Jo,nn,an,yn,Vi,vr,es,Wi,ts,_r,ns,Yi,rs,ss,as,ls,us,ci,cs,ds;function _mergeNamespaces(o,e){for(var s=0;s<e.length;s++){const a=e[s];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in o)){const u=Object.getOwnPropertyDescriptor(a,l);u&&Object.defineProperty(o,l,u.get?u:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function getAugmentedNamespace(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var e=o.default;if(typeof e=="function"){var s=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(o).forEach(function(a){var l=Object.getOwnPropertyDescriptor(o,a);Object.defineProperty(s,a,l.get?l:{enumerable:!0,get:function(){return o[a]}})}),s}var react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var o=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function y(G){return G===null||typeof G!="object"?null:(G=g&&G[g]||G["@@iterator"],typeof G=="function"?G:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,E={};function v(G,K,q){this.props=G,this.context=K,this.refs=E,this.updater=q||A}v.prototype.isReactComponent={},v.prototype.setState=function(G,K){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,K,"setState")},v.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function _(){}_.prototype=v.prototype;function w(G,K,q){this.props=G,this.context=K,this.refs=E,this.updater=q||A}var R=w.prototype=new _;R.constructor=w,T(R,v.prototype),R.isPureReactComponent=!0;var k=Array.isArray,I=Object.prototype.hasOwnProperty,P={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function L(G,K,q){var te,Z={},ce=null,be=null;if(K!=null)for(te in K.ref!==void 0&&(be=K.ref),K.key!==void 0&&(ce=""+K.key),K)I.call(K,te)&&!N.hasOwnProperty(te)&&(Z[te]=K[te]);var Ee=arguments.length-2;if(Ee===1)Z.children=q;else if(1<Ee){for(var Se=Array(Ee),ke=0;ke<Ee;ke++)Se[ke]=arguments[ke+2];Z.children=Se}if(G&&G.defaultProps)for(te in Ee=G.defaultProps,Ee)Z[te]===void 0&&(Z[te]=Ee[te]);return{$$typeof:o,type:G,key:ce,ref:be,props:Z,_owner:P.current}}function Q(G,K){return{$$typeof:o,type:G.type,key:K,ref:G.ref,props:G.props,_owner:G._owner}}function j(G){return typeof G=="object"&&G!==null&&G.$$typeof===o}function F(G){var K={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(q){return K[q]})}var V=/\/+/g;function J(G,K){return typeof G=="object"&&G!==null&&G.key!=null?F(""+G.key):K.toString(36)}function z(G,K,q,te,Z){var ce=typeof G;(ce==="undefined"||ce==="boolean")&&(G=null);var be=!1;if(G===null)be=!0;else switch(ce){case"string":case"number":be=!0;break;case"object":switch(G.$$typeof){case o:case e:be=!0}}if(be)return be=G,Z=Z(be),G=te===""?"."+J(be,0):te,k(Z)?(q="",G!=null&&(q=G.replace(V,"$&/")+"/"),z(Z,K,q,"",function(ke){return ke})):Z!=null&&(j(Z)&&(Z=Q(Z,q+(!Z.key||be&&be.key===Z.key?"":(""+Z.key).replace(V,"$&/")+"/")+G)),K.push(Z)),1;if(be=0,te=te===""?".":te+":",k(G))for(var Ee=0;Ee<G.length;Ee++){ce=G[Ee];var Se=te+J(ce,Ee);be+=z(ce,K,q,Se,Z)}else if(Se=y(G),typeof Se=="function")for(G=Se.call(G),Ee=0;!(ce=G.next()).done;)ce=ce.value,Se=te+J(ce,Ee++),be+=z(ce,K,q,Se,Z);else if(ce==="object")throw K=String(G),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return be}function Y(G,K,q){if(G==null)return G;var te=[],Z=0;return z(G,te,"","",function(ce){return K.call(q,ce,Z++)}),te}function fe(G){if(G._status===-1){var K=G._result;K=K(),K.then(function(q){(G._status===0||G._status===-1)&&(G._status=1,G._result=q)},function(q){(G._status===0||G._status===-1)&&(G._status=2,G._result=q)}),G._status===-1&&(G._status=0,G._result=K)}if(G._status===1)return G._result.default;throw G._result}var de={current:null},X={transition:null},he={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:X,ReactCurrentOwner:P};function ue(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:Y,forEach:function(G,K,q){Y(G,function(){K.apply(this,arguments)},q)},count:function(G){var K=0;return Y(G,function(){K++}),K},toArray:function(G){return Y(G,function(K){return K})||[]},only:function(G){if(!j(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},react_production_min.Component=v,react_production_min.Fragment=s,react_production_min.Profiler=l,react_production_min.PureComponent=w,react_production_min.StrictMode=a,react_production_min.Suspense=h,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,react_production_min.act=ue,react_production_min.cloneElement=function(G,K,q){if(G==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+G+".");var te=T({},G.props),Z=G.key,ce=G.ref,be=G._owner;if(K!=null){if(K.ref!==void 0&&(ce=K.ref,be=P.current),K.key!==void 0&&(Z=""+K.key),G.type&&G.type.defaultProps)var Ee=G.type.defaultProps;for(Se in K)I.call(K,Se)&&!N.hasOwnProperty(Se)&&(te[Se]=K[Se]===void 0&&Ee!==void 0?Ee[Se]:K[Se])}var Se=arguments.length-2;if(Se===1)te.children=q;else if(1<Se){Ee=Array(Se);for(var ke=0;ke<Se;ke++)Ee[ke]=arguments[ke+2];te.children=Ee}return{$$typeof:o,type:G.type,key:Z,ref:ce,props:te,_owner:be}},react_production_min.createContext=function(G){return G={$$typeof:c,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},G.Provider={$$typeof:u,_context:G},G.Consumer=G},react_production_min.createElement=L,react_production_min.createFactory=function(G){var K=L.bind(null,G);return K.type=G,K},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(G){return{$$typeof:d,render:G}},react_production_min.isValidElement=j,react_production_min.lazy=function(G){return{$$typeof:m,_payload:{_status:-1,_result:G},_init:fe}},react_production_min.memo=function(G,K){return{$$typeof:p,type:G,compare:K===void 0?null:K}},react_production_min.startTransition=function(G){var K=X.transition;X.transition={};try{G()}finally{X.transition=K}},react_production_min.unstable_act=ue,react_production_min.useCallback=function(G,K){return de.current.useCallback(G,K)},react_production_min.useContext=function(G){return de.current.useContext(G)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(G){return de.current.useDeferredValue(G)},react_production_min.useEffect=function(G,K){return de.current.useEffect(G,K)},react_production_min.useId=function(){return de.current.useId()},react_production_min.useImperativeHandle=function(G,K,q){return de.current.useImperativeHandle(G,K,q)},react_production_min.useInsertionEffect=function(G,K){return de.current.useInsertionEffect(G,K)},react_production_min.useLayoutEffect=function(G,K){return de.current.useLayoutEffect(G,K)},react_production_min.useMemo=function(G,K){return de.current.useMemo(G,K)},react_production_min.useReducer=function(G,K,q){return de.current.useReducer(G,K,q)},react_production_min.useRef=function(G){return de.current.useRef(G)},react_production_min.useState=function(G){return de.current.useState(G)},react_production_min.useSyncExternalStore=function(G,K,q){return de.current.useSyncExternalStore(G,K,q)},react_production_min.useTransition=function(){return de.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs$1(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(o){function e(X,he){var ue=X.length;X.push(he);e:for(;0<ue;){var G=ue-1>>>1,K=X[G];if(0<l(K,he))X[G]=he,X[ue]=K,ue=G;else break e}}function s(X){return X.length===0?null:X[0]}function a(X){if(X.length===0)return null;var he=X[0],ue=X.pop();if(ue!==he){X[0]=ue;e:for(var G=0,K=X.length,q=K>>>1;G<q;){var te=2*(G+1)-1,Z=X[te],ce=te+1,be=X[ce];if(0>l(Z,ue))ce<K&&0>l(be,Z)?(X[G]=be,X[ce]=ue,G=ce):(X[G]=Z,X[te]=ue,G=te);else if(ce<K&&0>l(be,ue))X[G]=be,X[ce]=ue,G=ce;else break e}}return he}function l(X,he){var ue=X.sortIndex-he.sortIndex;return ue!==0?ue:X.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;o.unstable_now=function(){return u.now()}}else{var c=Date,d=c.now();o.unstable_now=function(){return c.now()-d}}var h=[],p=[],m=1,g=null,y=3,A=!1,T=!1,E=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(X){for(var he=s(p);he!==null;){if(he.callback===null)a(p);else if(he.startTime<=X)a(p),he.sortIndex=he.expirationTime,e(h,he);else break;he=s(p)}}function k(X){if(E=!1,R(X),!T)if(s(h)!==null)T=!0,fe(I);else{var he=s(p);he!==null&&de(k,he.startTime-X)}}function I(X,he){T=!1,E&&(E=!1,_(L),L=-1),A=!0;var ue=y;try{for(R(he),g=s(h);g!==null&&(!(g.expirationTime>he)||X&&!F());){var G=g.callback;if(typeof G=="function"){g.callback=null,y=g.priorityLevel;var K=G(g.expirationTime<=he);he=o.unstable_now(),typeof K=="function"?g.callback=K:g===s(h)&&a(h),R(he)}else a(h);g=s(h)}if(g!==null)var q=!0;else{var te=s(p);te!==null&&de(k,te.startTime-he),q=!1}return q}finally{g=null,y=ue,A=!1}}var P=!1,N=null,L=-1,Q=5,j=-1;function F(){return!(o.unstable_now()-j<Q)}function V(){if(N!==null){var X=o.unstable_now();j=X;var he=!0;try{he=N(!0,X)}finally{he?J():(P=!1,N=null)}}else P=!1}var J;if(typeof w=="function")J=function(){w(V)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Y=z.port2;z.port1.onmessage=V,J=function(){Y.postMessage(null)}}else J=function(){v(V,0)};function fe(X){N=X,P||(P=!0,J())}function de(X,he){L=v(function(){X(o.unstable_now())},he)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(X){X.callback=null},o.unstable_continueExecution=function(){T||A||(T=!0,fe(I))},o.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<X?Math.floor(1e3/X):5},o.unstable_getCurrentPriorityLevel=function(){return y},o.unstable_getFirstCallbackNode=function(){return s(h)},o.unstable_next=function(X){switch(y){case 1:case 2:case 3:var he=3;break;default:he=y}var ue=y;y=he;try{return X()}finally{y=ue}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(X,he){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ue=y;y=X;try{return he()}finally{y=ue}},o.unstable_scheduleCallback=function(X,he,ue){var G=o.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?G+ue:G):ue=G,X){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ue+K,X={id:m++,callback:he,priorityLevel:X,startTime:ue,expirationTime:K,sortIndex:-1},ue>G?(X.sortIndex=ue,e(p,X),s(h)===null&&X===s(p)&&(E?(_(L),L=-1):E=!0,de(k,ue-G))):(X.sortIndex=K,e(h,X),T||A||(T=!0,fe(I))),X},o.unstable_shouldYield=F,o.unstable_wrapCallback=function(X){var he=y;return function(){var ue=y;y=he;try{return X.apply(this,arguments)}finally{y=ue}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var o=requireReact(),e=requireScheduler();function s(O){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+O,D=1;D<arguments.length;D++)x+="&args[]="+encodeURIComponent(arguments[D]);return"Minified React error #"+O+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,l={};function u(O,x){c(O,x),c(O+"Capture",x)}function c(O,x){for(l[O]=x,O=0;O<x.length;O++)a.add(x[O])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function y(O){return h.call(g,O)?!0:h.call(m,O)?!1:p.test(O)?g[O]=!0:(m[O]=!0,!1)}function A(O,x,D,M){if(D!==null&&D.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return M?!1:D!==null?!D.acceptsBooleans:(O=O.toLowerCase().slice(0,5),O!=="data-"&&O!=="aria-");default:return!1}}function T(O,x,D,M){if(x===null||typeof x>"u"||A(O,x,D,M))return!0;if(M)return!1;if(D!==null)switch(D.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function E(O,x,D,M,B,U,se){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=M,this.attributeNamespace=B,this.mustUseProperty=D,this.propertyName=O,this.type=x,this.sanitizeURL=U,this.removeEmptyString=se}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(O){v[O]=new E(O,0,!1,O,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(O){var x=O[0];v[x]=new E(x,1,!1,O[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(O){v[O]=new E(O,2,!1,O.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(O){v[O]=new E(O,2,!1,O,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(O){v[O]=new E(O,3,!1,O.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(O){v[O]=new E(O,3,!0,O,null,!1,!1)}),["capture","download"].forEach(function(O){v[O]=new E(O,4,!1,O,null,!1,!1)}),["cols","rows","size","span"].forEach(function(O){v[O]=new E(O,6,!1,O,null,!1,!1)}),["rowSpan","start"].forEach(function(O){v[O]=new E(O,5,!1,O.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function w(O){return O[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(O){var x=O.replace(_,w);v[x]=new E(x,1,!1,O,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(O){var x=O.replace(_,w);v[x]=new E(x,1,!1,O,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(O){var x=O.replace(_,w);v[x]=new E(x,1,!1,O,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(O){v[O]=new E(O,1,!1,O.toLowerCase(),null,!1,!1)}),v.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(O){v[O]=new E(O,1,!1,O.toLowerCase(),null,!0,!0)});function R(O,x,D,M){var B=v.hasOwnProperty(x)?v[x]:null;(B!==null?B.type!==0:M||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(T(x,D,B,M)&&(D=null),M||B===null?y(x)&&(D===null?O.removeAttribute(x):O.setAttribute(x,""+D)):B.mustUseProperty?O[B.propertyName]=D===null?B.type===3?!1:"":D:(x=B.attributeName,M=B.attributeNamespace,D===null?O.removeAttribute(x):(B=B.type,D=B===3||B===4&&D===!0?"":""+D,M?O.setAttributeNS(M,x,D):O.setAttribute(x,D))))}var k=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),P=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),F=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),X=Symbol.iterator;function he(O){return O===null||typeof O!="object"?null:(O=X&&O[X]||O["@@iterator"],typeof O=="function"?O:null)}var ue=Object.assign,G;function K(O){if(G===void 0)try{throw Error()}catch(D){var x=D.stack.trim().match(/\n( *(at )?)/);G=x&&x[1]||""}return`
`+G+O}var q=!1;function te(O,x){if(!O||q)return"";q=!0;var D=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(Me){var M=Me}Reflect.construct(O,[],x)}else{try{x.call()}catch(Me){M=Me}O.call(x.prototype)}else{try{throw Error()}catch(Me){M=Me}O()}}catch(Me){if(Me&&M&&typeof Me.stack=="string"){for(var B=Me.stack.split(`
`),U=M.stack.split(`
`),se=B.length-1,Oe=U.length-1;1<=se&&0<=Oe&&B[se]!==U[Oe];)Oe--;for(;1<=se&&0<=Oe;se--,Oe--)if(B[se]!==U[Oe]){if(se!==1||Oe!==1)do if(se--,Oe--,0>Oe||B[se]!==U[Oe]){var ve=`
`+B[se].replace(" at new "," at ");return O.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",O.displayName)),ve}while(1<=se&&0<=Oe);break}}}finally{q=!1,Error.prepareStackTrace=D}return(O=O?O.displayName||O.name:"")?K(O):""}function Z(O){switch(O.tag){case 5:return K(O.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return O=te(O.type,!1),O;case 11:return O=te(O.type.render,!1),O;case 1:return O=te(O.type,!0),O;default:return""}}function ce(O){if(O==null)return null;if(typeof O=="function")return O.displayName||O.name||null;if(typeof O=="string")return O;switch(O){case N:return"Fragment";case P:return"Portal";case Q:return"Profiler";case L:return"StrictMode";case J:return"Suspense";case z:return"SuspenseList"}if(typeof O=="object")switch(O.$$typeof){case F:return(O.displayName||"Context")+".Consumer";case j:return(O._context.displayName||"Context")+".Provider";case V:var x=O.render;return O=O.displayName,O||(O=x.displayName||x.name||"",O=O!==""?"ForwardRef("+O+")":"ForwardRef"),O;case Y:return x=O.displayName||null,x!==null?x:ce(O.type)||"Memo";case fe:x=O._payload,O=O._init;try{return ce(O(x))}catch{}}return null}function be(O){var x=O.type;switch(O.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return O=x.render,O=O.displayName||O.name||"",x.displayName||(O!==""?"ForwardRef("+O+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(x);case 8:return x===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function Ee(O){switch(typeof O){case"boolean":case"number":case"string":case"undefined":return O;case"object":return O;default:return""}}function Se(O){var x=O.type;return(O=O.nodeName)&&O.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function ke(O){var x=Se(O)?"checked":"value",D=Object.getOwnPropertyDescriptor(O.constructor.prototype,x),M=""+O[x];if(!O.hasOwnProperty(x)&&typeof D<"u"&&typeof D.get=="function"&&typeof D.set=="function"){var B=D.get,U=D.set;return Object.defineProperty(O,x,{configurable:!0,get:function(){return B.call(this)},set:function(se){M=""+se,U.call(this,se)}}),Object.defineProperty(O,x,{enumerable:D.enumerable}),{getValue:function(){return M},setValue:function(se){M=""+se},stopTracking:function(){O._valueTracker=null,delete O[x]}}}}function Ae(O){O._valueTracker||(O._valueTracker=ke(O))}function Te(O){if(!O)return!1;var x=O._valueTracker;if(!x)return!0;var D=x.getValue(),M="";return O&&(M=Se(O)?O.checked?"true":"false":O.value),O=M,O!==D?(x.setValue(O),!0):!1}function xe(O){if(O=O||(typeof document<"u"?document:void 0),typeof O>"u")return null;try{return O.activeElement||O.body}catch{return O.body}}function Pe(O,x){var D=x.checked;return ue({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:D??O._wrapperState.initialChecked})}function Le(O,x){var D=x.defaultValue==null?"":x.defaultValue,M=x.checked!=null?x.checked:x.defaultChecked;D=Ee(x.value!=null?x.value:D),O._wrapperState={initialChecked:M,initialValue:D,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function Ue(O,x){x=x.checked,x!=null&&R(O,"checked",x,!1)}function Be(O,x){Ue(O,x);var D=Ee(x.value),M=x.type;if(D!=null)M==="number"?(D===0&&O.value===""||O.value!=D)&&(O.value=""+D):O.value!==""+D&&(O.value=""+D);else if(M==="submit"||M==="reset"){O.removeAttribute("value");return}x.hasOwnProperty("value")?We(O,x.type,D):x.hasOwnProperty("defaultValue")&&We(O,x.type,Ee(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(O.defaultChecked=!!x.defaultChecked)}function Ze(O,x,D){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var M=x.type;if(!(M!=="submit"&&M!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+O._wrapperState.initialValue,D||x===O.value||(O.value=x),O.defaultValue=x}D=O.name,D!==""&&(O.name=""),O.defaultChecked=!!O._wrapperState.initialChecked,D!==""&&(O.name=D)}function We(O,x,D){(x!=="number"||xe(O.ownerDocument)!==O)&&(D==null?O.defaultValue=""+O._wrapperState.initialValue:O.defaultValue!==""+D&&(O.defaultValue=""+D))}var Ge=Array.isArray;function Ye(O,x,D,M){if(O=O.options,x){x={};for(var B=0;B<D.length;B++)x["$"+D[B]]=!0;for(D=0;D<O.length;D++)B=x.hasOwnProperty("$"+O[D].value),O[D].selected!==B&&(O[D].selected=B),B&&M&&(O[D].defaultSelected=!0)}else{for(D=""+Ee(D),x=null,B=0;B<O.length;B++){if(O[B].value===D){O[B].selected=!0,M&&(O[B].defaultSelected=!0);return}x!==null||O[B].disabled||(x=O[B])}x!==null&&(x.selected=!0)}}function Ve(O,x){if(x.dangerouslySetInnerHTML!=null)throw Error(s(91));return ue({},x,{value:void 0,defaultValue:void 0,children:""+O._wrapperState.initialValue})}function He(O,x){var D=x.value;if(D==null){if(D=x.children,x=x.defaultValue,D!=null){if(x!=null)throw Error(s(92));if(Ge(D)){if(1<D.length)throw Error(s(93));D=D[0]}x=D}x==null&&(x=""),D=x}O._wrapperState={initialValue:Ee(D)}}function at(O,x){var D=Ee(x.value),M=Ee(x.defaultValue);D!=null&&(D=""+D,D!==O.value&&(O.value=D),x.defaultValue==null&&O.defaultValue!==D&&(O.defaultValue=D)),M!=null&&(O.defaultValue=""+M)}function dt(O){var x=O.textContent;x===O._wrapperState.initialValue&&x!==""&&x!==null&&(O.value=x)}function bt(O){switch(O){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ct(O,x){return O==null||O==="http://www.w3.org/1999/xhtml"?bt(x):O==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":O}var ht,pt=(function(O){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,D,M,B){MSApp.execUnsafeLocalFunction(function(){return O(x,D,M,B)})}:O})(function(O,x){if(O.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in O)O.innerHTML=x;else{for(ht=ht||document.createElement("div"),ht.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=ht.firstChild;O.firstChild;)O.removeChild(O.firstChild);for(;x.firstChild;)O.appendChild(x.firstChild)}});function ae(O,x){if(x){var D=O.firstChild;if(D&&D===O.lastChild&&D.nodeType===3){D.nodeValue=x;return}}O.textContent=x}var H={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W=["Webkit","ms","Moz","O"];Object.keys(H).forEach(function(O){W.forEach(function(x){x=x+O.charAt(0).toUpperCase()+O.substring(1),H[x]=H[O]})});function me(O,x,D){return x==null||typeof x=="boolean"||x===""?"":D||typeof x!="number"||x===0||H.hasOwnProperty(O)&&H[O]?(""+x).trim():x+"px"}function _e(O,x){O=O.style;for(var D in x)if(x.hasOwnProperty(D)){var M=D.indexOf("--")===0,B=me(D,x[D],M);D==="float"&&(D="cssFloat"),M?O.setProperty(D,B):O[D]=B}}var De=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(O,x){if(x){if(De[O]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(s(137,O));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(s(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(s(61))}if(x.style!=null&&typeof x.style!="object")throw Error(s(62))}}function we(O,x){if(O.indexOf("-")===-1)return typeof x.is=="string";switch(O){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var et=null;function ot(O){return O=O.target||O.srcElement||window,O.correspondingUseElement&&(O=O.correspondingUseElement),O.nodeType===3?O.parentNode:O}var st=null,Ke=null,zt=null;function An(O){if(O=Ns(O)){if(typeof st!="function")throw Error(s(280));var x=O.stateNode;x&&(x=xa(x),st(O.stateNode,O.type,x))}}function Mt(O){Ke?zt?zt.push(O):zt=[O]:Ke=O}function On(){if(Ke){var O=Ke,x=zt;if(zt=Ke=null,An(O),x)for(O=0;O<x.length;O++)An(x[O])}}function $n(O,x){return O(x)}function Bn(){}var Vt=!1;function Cr(O,x,D){if(Vt)return O(x,D);Vt=!0;try{return $n(O,x,D)}finally{Vt=!1,(Ke!==null||zt!==null)&&(Bn(),On())}}function Cn(O,x){var D=O.stateNode;if(D===null)return null;var M=xa(D);if(M===null)return null;D=M[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(O=O.type,M=!(O==="button"||O==="input"||O==="select"||O==="textarea")),O=!M;break e;default:O=!1}if(O)return null;if(D&&typeof D!="function")throw Error(s(231,x,typeof D));return D}var Yn=!1;if(d)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{Yn=!1}function di(O,x,D,M,B,U,se,Oe,ve){var Me=Array.prototype.slice.call(arguments,3);try{x.apply(D,Me)}catch(Qe){this.onError(Qe)}}var wn=!1,mt=null,$t=!1,xn=null,fi={onError:function(O){wn=!0,mt=O}};function kr(O,x,D,M,B,U,se,Oe,ve){wn=!1,mt=null,di.apply(fi,arguments)}function Js(O,x,D,M,B,U,se,Oe,ve){if(kr.apply(this,arguments),wn){if(wn){var Me=mt;wn=!1,mt=null}else throw Error(s(198));$t||($t=!0,xn=Me)}}function Fn(O){var x=O,D=O;if(O.alternate)for(;x.return;)x=x.return;else{O=x;do x=O,(x.flags&4098)!==0&&(D=x.return),O=x.return;while(O)}return x.tag===3?D:null}function fs(O){if(O.tag===13){var x=O.memoizedState;if(x===null&&(O=O.alternate,O!==null&&(x=O.memoizedState)),x!==null)return x.dehydrated}return null}function ea(O){if(Fn(O)!==O)throw Error(s(188))}function hs(O){var x=O.alternate;if(!x){if(x=Fn(O),x===null)throw Error(s(188));return x!==O?null:O}for(var D=O,M=x;;){var B=D.return;if(B===null)break;var U=B.alternate;if(U===null){if(M=B.return,M!==null){D=M;continue}break}if(B.child===U.child){for(U=B.child;U;){if(U===D)return ea(B),O;if(U===M)return ea(B),x;U=U.sibling}throw Error(s(188))}if(D.return!==M.return)D=B,M=U;else{for(var se=!1,Oe=B.child;Oe;){if(Oe===D){se=!0,D=B,M=U;break}if(Oe===M){se=!0,M=B,D=U;break}Oe=Oe.sibling}if(!se){for(Oe=U.child;Oe;){if(Oe===D){se=!0,D=U,M=B;break}if(Oe===M){se=!0,M=U,D=B;break}Oe=Oe.sibling}if(!se)throw Error(s(189))}}if(D.alternate!==M)throw Error(s(190))}if(D.tag!==3)throw Error(s(188));return D.stateNode.current===D?O:x}function ir(O){return O=hs(O),O!==null?hi(O):null}function hi(O){if(O.tag===5||O.tag===6)return O;for(O=O.child;O!==null;){var x=hi(O);if(x!==null)return x;O=O.sibling}return null}var ta=e.unstable_scheduleCallback,ps=e.unstable_cancelCallback,jf=e.unstable_shouldYield,Hf=e.unstable_requestPaint,Nt=e.unstable_now,Uf=e.unstable_getCurrentPriorityLevel,dl=e.unstable_ImmediatePriority,rc=e.unstable_UserBlockingPriority,na=e.unstable_NormalPriority,Gf=e.unstable_LowPriority,oc=e.unstable_IdlePriority,ra=null,Kn=null;function zf(O){if(Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(ra,O,void 0,(O.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:Yf,Vf=Math.log,Wf=Math.LN2;function Yf(O){return O>>>=0,O===0?32:31-(Vf(O)/Wf|0)|0}var ia=64,oa=4194304;function ms(O){switch(O&-O){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return O&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return O&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return O}}function sa(O,x){var D=O.pendingLanes;if(D===0)return 0;var M=0,B=O.suspendedLanes,U=O.pingedLanes,se=D&268435455;if(se!==0){var Oe=se&~B;Oe!==0?M=ms(Oe):(U&=se,U!==0&&(M=ms(U)))}else se=D&~B,se!==0?M=ms(se):U!==0&&(M=ms(U));if(M===0)return 0;if(x!==0&&x!==M&&(x&B)===0&&(B=M&-M,U=x&-x,B>=U||B===16&&(U&4194240)!==0))return x;if((M&4)!==0&&(M|=D&16),x=O.entangledLanes,x!==0)for(O=O.entanglements,x&=M;0<x;)D=31-qn(x),B=1<<D,M|=O[D],x&=~B;return M}function Kf(O,x){switch(O){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zf(O,x){for(var D=O.suspendedLanes,M=O.pingedLanes,B=O.expirationTimes,U=O.pendingLanes;0<U;){var se=31-qn(U),Oe=1<<se,ve=B[se];ve===-1?((Oe&D)===0||(Oe&M)!==0)&&(B[se]=Kf(Oe,x)):ve<=x&&(O.expiredLanes|=Oe),U&=~Oe}}function fl(O){return O=O.pendingLanes&-1073741825,O!==0?O:O&1073741824?1073741824:0}function lc(){var O=ia;return ia<<=1,(ia&4194240)===0&&(ia=64),O}function hl(O){for(var x=[],D=0;31>D;D++)x.push(O);return x}function gs(O,x,D){O.pendingLanes|=x,x!==536870912&&(O.suspendedLanes=0,O.pingedLanes=0),O=O.eventTimes,x=31-qn(x),O[x]=D}function Xf(O,x){var D=O.pendingLanes&~x;O.pendingLanes=x,O.suspendedLanes=0,O.pingedLanes=0,O.expiredLanes&=x,O.mutableReadLanes&=x,O.entangledLanes&=x,x=O.entanglements;var M=O.eventTimes;for(O=O.expirationTimes;0<D;){var B=31-qn(D),U=1<<B;x[B]=0,M[B]=-1,O[B]=-1,D&=~U}}function pl(O,x){var D=O.entangledLanes|=x;for(O=O.entanglements;D;){var M=31-qn(D),B=1<<M;B&x|O[M]&x&&(O[M]|=x),D&=~B}}var Tt=0;function uc(O){return O&=-O,1<O?4<O?(O&268435455)!==0?16:536870912:4:1}var cc,ml,dc,fc,hc,bl=!1,aa=[],Ir=null,Rr=null,Dr=null,bs=new Map,ys=new Map,Nr=[],Jf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pc(O,x){switch(O){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":bs.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":ys.delete(x.pointerId)}}function As(O,x,D,M,B,U){return O===null||O.nativeEvent!==U?(O={blockedOn:x,domEventName:D,eventSystemFlags:M,nativeEvent:U,targetContainers:[B]},x!==null&&(x=Ns(x),x!==null&&ml(x)),O):(O.eventSystemFlags|=M,x=O.targetContainers,B!==null&&x.indexOf(B)===-1&&x.push(B),O)}function eh(O,x,D,M,B){switch(x){case"focusin":return Ir=As(Ir,O,x,D,M,B),!0;case"dragenter":return Rr=As(Rr,O,x,D,M,B),!0;case"mouseover":return Dr=As(Dr,O,x,D,M,B),!0;case"pointerover":var U=B.pointerId;return bs.set(U,As(bs.get(U)||null,O,x,D,M,B)),!0;case"gotpointercapture":return U=B.pointerId,ys.set(U,As(ys.get(U)||null,O,x,D,M,B)),!0}return!1}function mc(O){var x=mi(O.target);if(x!==null){var D=Fn(x);if(D!==null){if(x=D.tag,x===13){if(x=fs(D),x!==null){O.blockedOn=x,hc(O.priority,function(){dc(D)});return}}else if(x===3&&D.stateNode.current.memoizedState.isDehydrated){O.blockedOn=D.tag===3?D.stateNode.containerInfo:null;return}}}O.blockedOn=null}function la(O){if(O.blockedOn!==null)return!1;for(var x=O.targetContainers;0<x.length;){var D=Al(O.domEventName,O.eventSystemFlags,x[0],O.nativeEvent);if(D===null){D=O.nativeEvent;var M=new D.constructor(D.type,D);et=M,D.target.dispatchEvent(M),et=null}else return x=Ns(D),x!==null&&ml(x),O.blockedOn=D,!1;x.shift()}return!0}function gc(O,x,D){la(O)&&D.delete(x)}function th(){bl=!1,Ir!==null&&la(Ir)&&(Ir=null),Rr!==null&&la(Rr)&&(Rr=null),Dr!==null&&la(Dr)&&(Dr=null),bs.forEach(gc),ys.forEach(gc)}function Os(O,x){O.blockedOn===x&&(O.blockedOn=null,bl||(bl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,th)))}function Ts(O){function x(B){return Os(B,O)}if(0<aa.length){Os(aa[0],O);for(var D=1;D<aa.length;D++){var M=aa[D];M.blockedOn===O&&(M.blockedOn=null)}}for(Ir!==null&&Os(Ir,O),Rr!==null&&Os(Rr,O),Dr!==null&&Os(Dr,O),bs.forEach(x),ys.forEach(x),D=0;D<Nr.length;D++)M=Nr[D],M.blockedOn===O&&(M.blockedOn=null);for(;0<Nr.length&&(D=Nr[0],D.blockedOn===null);)mc(D),D.blockedOn===null&&Nr.shift()}var Ki=k.ReactCurrentBatchConfig,ua=!0;function nh(O,x,D,M){var B=Tt,U=Ki.transition;Ki.transition=null;try{Tt=1,yl(O,x,D,M)}finally{Tt=B,Ki.transition=U}}function rh(O,x,D,M){var B=Tt,U=Ki.transition;Ki.transition=null;try{Tt=4,yl(O,x,D,M)}finally{Tt=B,Ki.transition=U}}function yl(O,x,D,M){if(ua){var B=Al(O,x,D,M);if(B===null)$l(O,x,M,ca,D),pc(O,M);else if(eh(B,O,x,D,M))M.stopPropagation();else if(pc(O,M),x&4&&-1<Jf.indexOf(O)){for(;B!==null;){var U=Ns(B);if(U!==null&&cc(U),U=Al(O,x,D,M),U===null&&$l(O,x,M,ca,D),U===B)break;B=U}B!==null&&M.stopPropagation()}else $l(O,x,M,null,D)}}var ca=null;function Al(O,x,D,M){if(ca=null,O=ot(M),O=mi(O),O!==null)if(x=Fn(O),x===null)O=null;else if(D=x.tag,D===13){if(O=fs(x),O!==null)return O;O=null}else if(D===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;O=null}else x!==O&&(O=null);return ca=O,null}function bc(O){switch(O){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uf()){case dl:return 1;case rc:return 4;case na:case Gf:return 16;case oc:return 536870912;default:return 16}default:return 16}}var Mr=null,Ol=null,da=null;function yc(){if(da)return da;var O,x=Ol,D=x.length,M,B="value"in Mr?Mr.value:Mr.textContent,U=B.length;for(O=0;O<D&&x[O]===B[O];O++);var se=D-O;for(M=1;M<=se&&x[D-M]===B[U-M];M++);return da=B.slice(O,1<M?1-M:void 0)}function fa(O){var x=O.keyCode;return"charCode"in O?(O=O.charCode,O===0&&x===13&&(O=13)):O=x,O===10&&(O=13),32<=O||O===13?O:0}function ha(){return!0}function Ac(){return!1}function Sn(O){function x(D,M,B,U,se){this._reactName=D,this._targetInst=B,this.type=M,this.nativeEvent=U,this.target=se,this.currentTarget=null;for(var Oe in O)O.hasOwnProperty(Oe)&&(D=O[Oe],this[Oe]=D?D(U):U[Oe]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?ha:Ac,this.isPropagationStopped=Ac,this}return ue(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var D=this.nativeEvent;D&&(D.preventDefault?D.preventDefault():typeof D.returnValue!="unknown"&&(D.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var D=this.nativeEvent;D&&(D.stopPropagation?D.stopPropagation():typeof D.cancelBubble!="unknown"&&(D.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),x}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(O){return O.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tl=Sn(Zi),xs=ue({},Zi,{view:0,detail:0}),ih=Sn(xs),xl,Sl,Ss,pa=ue({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vl,button:0,buttons:0,relatedTarget:function(O){return O.relatedTarget===void 0?O.fromElement===O.srcElement?O.toElement:O.fromElement:O.relatedTarget},movementX:function(O){return"movementX"in O?O.movementX:(O!==Ss&&(Ss&&O.type==="mousemove"?(xl=O.screenX-Ss.screenX,Sl=O.screenY-Ss.screenY):Sl=xl=0,Ss=O),xl)},movementY:function(O){return"movementY"in O?O.movementY:Sl}}),Oc=Sn(pa),oh=ue({},pa,{dataTransfer:0}),sh=Sn(oh),ah=ue({},xs,{relatedTarget:0}),El=Sn(ah),lh=ue({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),uh=Sn(lh),ch=ue({},Zi,{clipboardData:function(O){return"clipboardData"in O?O.clipboardData:window.clipboardData}}),dh=Sn(ch),fh=ue({},Zi,{data:0}),Tc=Sn(fh),hh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ph={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gh(O){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(O):(O=mh[O])?!!x[O]:!1}function vl(){return gh}var bh=ue({},xs,{key:function(O){if(O.key){var x=hh[O.key]||O.key;if(x!=="Unidentified")return x}return O.type==="keypress"?(O=fa(O),O===13?"Enter":String.fromCharCode(O)):O.type==="keydown"||O.type==="keyup"?ph[O.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vl,charCode:function(O){return O.type==="keypress"?fa(O):0},keyCode:function(O){return O.type==="keydown"||O.type==="keyup"?O.keyCode:0},which:function(O){return O.type==="keypress"?fa(O):O.type==="keydown"||O.type==="keyup"?O.keyCode:0}}),yh=Sn(bh),Ah=ue({},pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xc=Sn(Ah),Oh=ue({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vl}),Th=Sn(Oh),xh=ue({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sh=Sn(xh),Eh=ue({},pa,{deltaX:function(O){return"deltaX"in O?O.deltaX:"wheelDeltaX"in O?-O.wheelDeltaX:0},deltaY:function(O){return"deltaY"in O?O.deltaY:"wheelDeltaY"in O?-O.wheelDeltaY:"wheelDelta"in O?-O.wheelDelta:0},deltaZ:0,deltaMode:0}),vh=Sn(Eh),_h=[9,13,27,32],_l=d&&"CompositionEvent"in window,Es=null;d&&"documentMode"in document&&(Es=document.documentMode);var Ch=d&&"TextEvent"in window&&!Es,Ec=d&&(!_l||Es&&8<Es&&11>=Es),vc=" ",_c=!1;function Cc(O,x){switch(O){case"keyup":return _h.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wc(O){return O=O.detail,typeof O=="object"&&"data"in O?O.data:null}var Ji=!1;function wh(O,x){switch(O){case"compositionend":return wc(x);case"keypress":return x.which!==32?null:(_c=!0,vc);case"textInput":return O=x.data,O===vc&&_c?null:O;default:return null}}function kh(O,x){if(Ji)return O==="compositionend"||!_l&&Cc(O,x)?(O=yc(),da=Ol=Mr=null,Ji=!1,O):null;switch(O){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return Ec&&x.locale!=="ko"?null:x.data;default:return null}}var Ih={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kc(O){var x=O&&O.nodeName&&O.nodeName.toLowerCase();return x==="input"?!!Ih[O.type]:x==="textarea"}function Ic(O,x,D,M){Mt(M),x=Aa(x,"onChange"),0<x.length&&(D=new Tl("onChange","change",null,D,M),O.push({event:D,listeners:x}))}var vs=null,_s=null;function Rh(O){Wc(O,0)}function ma(O){var x=io(O);if(Te(x))return O}function Dh(O,x){if(O==="change")return x}var Rc=!1;if(d){var Cl;if(d){var wl="oninput"in document;if(!wl){var Dc=document.createElement("div");Dc.setAttribute("oninput","return;"),wl=typeof Dc.oninput=="function"}Cl=wl}else Cl=!1;Rc=Cl&&(!document.documentMode||9<document.documentMode)}function Nc(){vs&&(vs.detachEvent("onpropertychange",Pc),_s=vs=null)}function Pc(O){if(O.propertyName==="value"&&ma(_s)){var x=[];Ic(x,_s,O,ot(O)),Cr(Rh,x)}}function Nh(O,x,D){O==="focusin"?(Nc(),vs=x,_s=D,vs.attachEvent("onpropertychange",Pc)):O==="focusout"&&Nc()}function Ph(O){if(O==="selectionchange"||O==="keyup"||O==="keydown")return ma(_s)}function Mh(O,x){if(O==="click")return ma(x)}function Lh(O,x){if(O==="input"||O==="change")return ma(x)}function $h(O,x){return O===x&&(O!==0||1/O===1/x)||O!==O&&x!==x}var Qn=typeof Object.is=="function"?Object.is:$h;function Cs(O,x){if(Qn(O,x))return!0;if(typeof O!="object"||O===null||typeof x!="object"||x===null)return!1;var D=Object.keys(O),M=Object.keys(x);if(D.length!==M.length)return!1;for(M=0;M<D.length;M++){var B=D[M];if(!h.call(x,B)||!Qn(O[B],x[B]))return!1}return!0}function Mc(O){for(;O&&O.firstChild;)O=O.firstChild;return O}function Lc(O,x){var D=Mc(O);O=0;for(var M;D;){if(D.nodeType===3){if(M=O+D.textContent.length,O<=x&&M>=x)return{node:D,offset:x-O};O=M}e:{for(;D;){if(D.nextSibling){D=D.nextSibling;break e}D=D.parentNode}D=void 0}D=Mc(D)}}function $c(O,x){return O&&x?O===x?!0:O&&O.nodeType===3?!1:x&&x.nodeType===3?$c(O,x.parentNode):"contains"in O?O.contains(x):O.compareDocumentPosition?!!(O.compareDocumentPosition(x)&16):!1:!1}function Bc(){for(var O=window,x=xe();x instanceof O.HTMLIFrameElement;){try{var D=typeof x.contentWindow.location.href=="string"}catch{D=!1}if(D)O=x.contentWindow;else break;x=xe(O.document)}return x}function kl(O){var x=O&&O.nodeName&&O.nodeName.toLowerCase();return x&&(x==="input"&&(O.type==="text"||O.type==="search"||O.type==="tel"||O.type==="url"||O.type==="password")||x==="textarea"||O.contentEditable==="true")}function Bh(O){var x=Bc(),D=O.focusedElem,M=O.selectionRange;if(x!==D&&D&&D.ownerDocument&&$c(D.ownerDocument.documentElement,D)){if(M!==null&&kl(D)){if(x=M.start,O=M.end,O===void 0&&(O=x),"selectionStart"in D)D.selectionStart=x,D.selectionEnd=Math.min(O,D.value.length);else if(O=(x=D.ownerDocument||document)&&x.defaultView||window,O.getSelection){O=O.getSelection();var B=D.textContent.length,U=Math.min(M.start,B);M=M.end===void 0?U:Math.min(M.end,B),!O.extend&&U>M&&(B=M,M=U,U=B),B=Lc(D,U);var se=Lc(D,M);B&&se&&(O.rangeCount!==1||O.anchorNode!==B.node||O.anchorOffset!==B.offset||O.focusNode!==se.node||O.focusOffset!==se.offset)&&(x=x.createRange(),x.setStart(B.node,B.offset),O.removeAllRanges(),U>M?(O.addRange(x),O.extend(se.node,se.offset)):(x.setEnd(se.node,se.offset),O.addRange(x)))}}for(x=[],O=D;O=O.parentNode;)O.nodeType===1&&x.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<x.length;D++)O=x[D],O.element.scrollLeft=O.left,O.element.scrollTop=O.top}}var Fh=d&&"documentMode"in document&&11>=document.documentMode,eo=null,Il=null,ws=null,Rl=!1;function Fc(O,x,D){var M=D.window===D?D.document:D.nodeType===9?D:D.ownerDocument;Rl||eo==null||eo!==xe(M)||(M=eo,"selectionStart"in M&&kl(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),ws&&Cs(ws,M)||(ws=M,M=Aa(Il,"onSelect"),0<M.length&&(x=new Tl("onSelect","select",null,x,D),O.push({event:x,listeners:M}),x.target=eo)))}function ga(O,x){var D={};return D[O.toLowerCase()]=x.toLowerCase(),D["Webkit"+O]="webkit"+x,D["Moz"+O]="moz"+x,D}var to={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionend:ga("Transition","TransitionEnd")},Dl={},qc={};d&&(qc=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function ba(O){if(Dl[O])return Dl[O];if(!to[O])return O;var x=to[O],D;for(D in x)if(x.hasOwnProperty(D)&&D in qc)return Dl[O]=x[D];return O}var Qc=ba("animationend"),jc=ba("animationiteration"),Hc=ba("animationstart"),Uc=ba("transitionend"),Gc=new Map,zc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(O,x){Gc.set(O,x),u(x,[O])}for(var Nl=0;Nl<zc.length;Nl++){var Pl=zc[Nl],qh=Pl.toLowerCase(),Qh=Pl[0].toUpperCase()+Pl.slice(1);Lr(qh,"on"+Qh)}Lr(Qc,"onAnimationEnd"),Lr(jc,"onAnimationIteration"),Lr(Hc,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Uc,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jh=new Set("cancel close invalid load scroll toggle".split(" ").concat(ks));function Vc(O,x,D){var M=O.type||"unknown-event";O.currentTarget=D,Js(M,x,void 0,O),O.currentTarget=null}function Wc(O,x){x=(x&4)!==0;for(var D=0;D<O.length;D++){var M=O[D],B=M.event;M=M.listeners;e:{var U=void 0;if(x)for(var se=M.length-1;0<=se;se--){var Oe=M[se],ve=Oe.instance,Me=Oe.currentTarget;if(Oe=Oe.listener,ve!==U&&B.isPropagationStopped())break e;Vc(B,Oe,Me),U=ve}else for(se=0;se<M.length;se++){if(Oe=M[se],ve=Oe.instance,Me=Oe.currentTarget,Oe=Oe.listener,ve!==U&&B.isPropagationStopped())break e;Vc(B,Oe,Me),U=ve}}}if($t)throw O=xn,$t=!1,xn=null,O}function vt(O,x){var D=x[Hl];D===void 0&&(D=x[Hl]=new Set);var M=O+"__bubble";D.has(M)||(Yc(x,O,2,!1),D.add(M))}function Ml(O,x,D){var M=0;x&&(M|=4),Yc(D,O,M,x)}var ya="_reactListening"+Math.random().toString(36).slice(2);function Is(O){if(!O[ya]){O[ya]=!0,a.forEach(function(D){D!=="selectionchange"&&(jh.has(D)||Ml(D,!1,O),Ml(D,!0,O))});var x=O.nodeType===9?O:O.ownerDocument;x===null||x[ya]||(x[ya]=!0,Ml("selectionchange",!1,x))}}function Yc(O,x,D,M){switch(bc(x)){case 1:var B=nh;break;case 4:B=rh;break;default:B=yl}D=B.bind(null,x,D,O),B=void 0,!Yn||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(B=!0),M?B!==void 0?O.addEventListener(x,D,{capture:!0,passive:B}):O.addEventListener(x,D,!0):B!==void 0?O.addEventListener(x,D,{passive:B}):O.addEventListener(x,D,!1)}function $l(O,x,D,M,B){var U=M;if((x&1)===0&&(x&2)===0&&M!==null)e:for(;;){if(M===null)return;var se=M.tag;if(se===3||se===4){var Oe=M.stateNode.containerInfo;if(Oe===B||Oe.nodeType===8&&Oe.parentNode===B)break;if(se===4)for(se=M.return;se!==null;){var ve=se.tag;if((ve===3||ve===4)&&(ve=se.stateNode.containerInfo,ve===B||ve.nodeType===8&&ve.parentNode===B))return;se=se.return}for(;Oe!==null;){if(se=mi(Oe),se===null)return;if(ve=se.tag,ve===5||ve===6){M=U=se;continue e}Oe=Oe.parentNode}}M=M.return}Cr(function(){var Me=U,Qe=ot(D),je=[];e:{var Fe=Gc.get(O);if(Fe!==void 0){var Xe=Tl,tt=O;switch(O){case"keypress":if(fa(D)===0)break e;case"keydown":case"keyup":Xe=yh;break;case"focusin":tt="focus",Xe=El;break;case"focusout":tt="blur",Xe=El;break;case"beforeblur":case"afterblur":Xe=El;break;case"click":if(D.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xe=Oc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xe=sh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xe=Th;break;case Qc:case jc:case Hc:Xe=uh;break;case Uc:Xe=Sh;break;case"scroll":Xe=ih;break;case"wheel":Xe=vh;break;case"copy":case"cut":case"paste":Xe=dh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xe=xc}var nt=(x&4)!==0,Pt=!nt&&O==="scroll",Ie=nt?Fe!==null?Fe+"Capture":null:Fe;nt=[];for(var Ce=Me,Ne;Ce!==null;){Ne=Ce;var ze=Ne.stateNode;if(Ne.tag===5&&ze!==null&&(Ne=ze,Ie!==null&&(ze=Cn(Ce,Ie),ze!=null&&nt.push(Rs(Ce,ze,Ne)))),Pt)break;Ce=Ce.return}0<nt.length&&(Fe=new Xe(Fe,tt,null,D,Qe),je.push({event:Fe,listeners:nt}))}}if((x&7)===0){e:{if(Fe=O==="mouseover"||O==="pointerover",Xe=O==="mouseout"||O==="pointerout",Fe&&D!==et&&(tt=D.relatedTarget||D.fromElement)&&(mi(tt)||tt[sr]))break e;if((Xe||Fe)&&(Fe=Qe.window===Qe?Qe:(Fe=Qe.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,Xe?(tt=D.relatedTarget||D.toElement,Xe=Me,tt=tt?mi(tt):null,tt!==null&&(Pt=Fn(tt),tt!==Pt||tt.tag!==5&&tt.tag!==6)&&(tt=null)):(Xe=null,tt=Me),Xe!==tt)){if(nt=Oc,ze="onMouseLeave",Ie="onMouseEnter",Ce="mouse",(O==="pointerout"||O==="pointerover")&&(nt=xc,ze="onPointerLeave",Ie="onPointerEnter",Ce="pointer"),Pt=Xe==null?Fe:io(Xe),Ne=tt==null?Fe:io(tt),Fe=new nt(ze,Ce+"leave",Xe,D,Qe),Fe.target=Pt,Fe.relatedTarget=Ne,ze=null,mi(Qe)===Me&&(nt=new nt(Ie,Ce+"enter",tt,D,Qe),nt.target=Ne,nt.relatedTarget=Pt,ze=nt),Pt=ze,Xe&&tt)t:{for(nt=Xe,Ie=tt,Ce=0,Ne=nt;Ne;Ne=no(Ne))Ce++;for(Ne=0,ze=Ie;ze;ze=no(ze))Ne++;for(;0<Ce-Ne;)nt=no(nt),Ce--;for(;0<Ne-Ce;)Ie=no(Ie),Ne--;for(;Ce--;){if(nt===Ie||Ie!==null&&nt===Ie.alternate)break t;nt=no(nt),Ie=no(Ie)}nt=null}else nt=null;Xe!==null&&Kc(je,Fe,Xe,nt,!1),tt!==null&&Pt!==null&&Kc(je,Pt,tt,nt,!0)}}e:{if(Fe=Me?io(Me):window,Xe=Fe.nodeName&&Fe.nodeName.toLowerCase(),Xe==="select"||Xe==="input"&&Fe.type==="file")var rt=Dh;else if(kc(Fe))if(Rc)rt=Lh;else{rt=Ph;var ut=Nh}else(Xe=Fe.nodeName)&&Xe.toLowerCase()==="input"&&(Fe.type==="checkbox"||Fe.type==="radio")&&(rt=Mh);if(rt&&(rt=rt(O,Me))){Ic(je,rt,D,Qe);break e}ut&&ut(O,Fe,Me),O==="focusout"&&(ut=Fe._wrapperState)&&ut.controlled&&Fe.type==="number"&&We(Fe,"number",Fe.value)}switch(ut=Me?io(Me):window,O){case"focusin":(kc(ut)||ut.contentEditable==="true")&&(eo=ut,Il=Me,ws=null);break;case"focusout":ws=Il=eo=null;break;case"mousedown":Rl=!0;break;case"contextmenu":case"mouseup":case"dragend":Rl=!1,Fc(je,D,Qe);break;case"selectionchange":if(Fh)break;case"keydown":case"keyup":Fc(je,D,Qe)}var ct;if(_l)e:{switch(O){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else Ji?Cc(O,D)&&(ft="onCompositionEnd"):O==="keydown"&&D.keyCode===229&&(ft="onCompositionStart");ft&&(Ec&&D.locale!=="ko"&&(Ji||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Ji&&(ct=yc()):(Mr=Qe,Ol="value"in Mr?Mr.value:Mr.textContent,Ji=!0)),ut=Aa(Me,ft),0<ut.length&&(ft=new Tc(ft,O,null,D,Qe),je.push({event:ft,listeners:ut}),ct?ft.data=ct:(ct=wc(D),ct!==null&&(ft.data=ct)))),(ct=Ch?wh(O,D):kh(O,D))&&(Me=Aa(Me,"onBeforeInput"),0<Me.length&&(Qe=new Tc("onBeforeInput","beforeinput",null,D,Qe),je.push({event:Qe,listeners:Me}),Qe.data=ct))}Wc(je,x)})}function Rs(O,x,D){return{instance:O,listener:x,currentTarget:D}}function Aa(O,x){for(var D=x+"Capture",M=[];O!==null;){var B=O,U=B.stateNode;B.tag===5&&U!==null&&(B=U,U=Cn(O,D),U!=null&&M.unshift(Rs(O,U,B)),U=Cn(O,x),U!=null&&M.push(Rs(O,U,B))),O=O.return}return M}function no(O){if(O===null)return null;do O=O.return;while(O&&O.tag!==5);return O||null}function Kc(O,x,D,M,B){for(var U=x._reactName,se=[];D!==null&&D!==M;){var Oe=D,ve=Oe.alternate,Me=Oe.stateNode;if(ve!==null&&ve===M)break;Oe.tag===5&&Me!==null&&(Oe=Me,B?(ve=Cn(D,U),ve!=null&&se.unshift(Rs(D,ve,Oe))):B||(ve=Cn(D,U),ve!=null&&se.push(Rs(D,ve,Oe)))),D=D.return}se.length!==0&&O.push({event:x,listeners:se})}var Hh=/\r\n?/g,Uh=/\u0000|\uFFFD/g;function Zc(O){return(typeof O=="string"?O:""+O).replace(Hh,`
`).replace(Uh,"")}function Oa(O,x,D){if(x=Zc(x),Zc(O)!==x&&D)throw Error(s(425))}function Ta(){}var Bl=null,Fl=null;function ql(O,x){return O==="textarea"||O==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var Ql=typeof setTimeout=="function"?setTimeout:void 0,Gh=typeof clearTimeout=="function"?clearTimeout:void 0,Xc=typeof Promise=="function"?Promise:void 0,zh=typeof queueMicrotask=="function"?queueMicrotask:typeof Xc<"u"?function(O){return Xc.resolve(null).then(O).catch(Vh)}:Ql;function Vh(O){setTimeout(function(){throw O})}function jl(O,x){var D=x,M=0;do{var B=D.nextSibling;if(O.removeChild(D),B&&B.nodeType===8)if(D=B.data,D==="/$"){if(M===0){O.removeChild(B),Ts(x);return}M--}else D!=="$"&&D!=="$?"&&D!=="$!"||M++;D=B}while(D);Ts(x)}function $r(O){for(;O!=null;O=O.nextSibling){var x=O.nodeType;if(x===1||x===3)break;if(x===8){if(x=O.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return O}function Jc(O){O=O.previousSibling;for(var x=0;O;){if(O.nodeType===8){var D=O.data;if(D==="$"||D==="$!"||D==="$?"){if(x===0)return O;x--}else D==="/$"&&x++}O=O.previousSibling}return null}var ro=Math.random().toString(36).slice(2),Zn="__reactFiber$"+ro,Ds="__reactProps$"+ro,sr="__reactContainer$"+ro,Hl="__reactEvents$"+ro,Wh="__reactListeners$"+ro,Yh="__reactHandles$"+ro;function mi(O){var x=O[Zn];if(x)return x;for(var D=O.parentNode;D;){if(x=D[sr]||D[Zn]){if(D=x.alternate,x.child!==null||D!==null&&D.child!==null)for(O=Jc(O);O!==null;){if(D=O[Zn])return D;O=Jc(O)}return x}O=D,D=O.parentNode}return null}function Ns(O){return O=O[Zn]||O[sr],!O||O.tag!==5&&O.tag!==6&&O.tag!==13&&O.tag!==3?null:O}function io(O){if(O.tag===5||O.tag===6)return O.stateNode;throw Error(s(33))}function xa(O){return O[Ds]||null}var Ul=[],oo=-1;function Br(O){return{current:O}}function _t(O){0>oo||(O.current=Ul[oo],Ul[oo]=null,oo--)}function St(O,x){oo++,Ul[oo]=O.current,O.current=x}var Fr={},Zt=Br(Fr),ln=Br(!1),gi=Fr;function so(O,x){var D=O.type.contextTypes;if(!D)return Fr;var M=O.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===x)return M.__reactInternalMemoizedMaskedChildContext;var B={},U;for(U in D)B[U]=x[U];return M&&(O=O.stateNode,O.__reactInternalMemoizedUnmaskedChildContext=x,O.__reactInternalMemoizedMaskedChildContext=B),B}function un(O){return O=O.childContextTypes,O!=null}function Sa(){_t(ln),_t(Zt)}function ed(O,x,D){if(Zt.current!==Fr)throw Error(s(168));St(Zt,x),St(ln,D)}function td(O,x,D){var M=O.stateNode;if(x=x.childContextTypes,typeof M.getChildContext!="function")return D;M=M.getChildContext();for(var B in M)if(!(B in x))throw Error(s(108,be(O)||"Unknown",B));return ue({},D,M)}function Ea(O){return O=(O=O.stateNode)&&O.__reactInternalMemoizedMergedChildContext||Fr,gi=Zt.current,St(Zt,O),St(ln,ln.current),!0}function nd(O,x,D){var M=O.stateNode;if(!M)throw Error(s(169));D?(O=td(O,x,gi),M.__reactInternalMemoizedMergedChildContext=O,_t(ln),_t(Zt),St(Zt,O)):_t(ln),St(ln,D)}var ar=null,va=!1,Gl=!1;function rd(O){ar===null?ar=[O]:ar.push(O)}function Kh(O){va=!0,rd(O)}function qr(){if(!Gl&&ar!==null){Gl=!0;var O=0,x=Tt;try{var D=ar;for(Tt=1;O<D.length;O++){var M=D[O];do M=M(!0);while(M!==null)}ar=null,va=!1}catch(B){throw ar!==null&&(ar=ar.slice(O+1)),ta(dl,qr),B}finally{Tt=x,Gl=!1}}return null}var ao=[],lo=0,Ca=null,wa=0,kn=[],In=0,bi=null,lr=1,ur="";function yi(O,x){ao[lo++]=wa,ao[lo++]=Ca,Ca=O,wa=x}function od(O,x,D){kn[In++]=lr,kn[In++]=ur,kn[In++]=bi,bi=O;var M=lr;O=ur;var B=32-qn(M)-1;M&=~(1<<B),D+=1;var U=32-qn(x)+B;if(30<U){var se=B-B%5;U=(M&(1<<se)-1).toString(32),M>>=se,B-=se,lr=1<<32-qn(x)+B|D<<B|M,ur=U+O}else lr=1<<U|D<<B|M,ur=O}function zl(O){O.return!==null&&(yi(O,1),od(O,1,0))}function Vl(O){for(;O===Ca;)Ca=ao[--lo],ao[lo]=null,wa=ao[--lo],ao[lo]=null;for(;O===bi;)bi=kn[--In],kn[In]=null,ur=kn[--In],kn[In]=null,lr=kn[--In],kn[In]=null}var En=null,vn=null,wt=!1,jn=null;function sd(O,x){var D=Pn(5,null,null,0);D.elementType="DELETED",D.stateNode=x,D.return=O,x=O.deletions,x===null?(O.deletions=[D],O.flags|=16):x.push(D)}function ad(O,x){switch(O.tag){case 5:var D=O.type;return x=x.nodeType!==1||D.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(O.stateNode=x,En=O,vn=$r(x.firstChild),!0):!1;case 6:return x=O.pendingProps===""||x.nodeType!==3?null:x,x!==null?(O.stateNode=x,En=O,vn=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(D=bi!==null?{id:lr,overflow:ur}:null,O.memoizedState={dehydrated:x,treeContext:D,retryLane:1073741824},D=Pn(18,null,null,0),D.stateNode=x,D.return=O,O.child=D,En=O,vn=null,!0):!1;default:return!1}}function Wl(O){return(O.mode&1)!==0&&(O.flags&128)===0}function Yl(O){if(wt){var x=vn;if(x){var D=x;if(!ad(O,x)){if(Wl(O))throw Error(s(418));x=$r(D.nextSibling);var M=En;x&&ad(O,x)?sd(M,D):(O.flags=O.flags&-4097|2,wt=!1,En=O)}}else{if(Wl(O))throw Error(s(418));O.flags=O.flags&-4097|2,wt=!1,En=O}}}function ld(O){for(O=O.return;O!==null&&O.tag!==5&&O.tag!==3&&O.tag!==13;)O=O.return;En=O}function ka(O){if(O!==En)return!1;if(!wt)return ld(O),wt=!0,!1;var x;if((x=O.tag!==3)&&!(x=O.tag!==5)&&(x=O.type,x=x!=="head"&&x!=="body"&&!ql(O.type,O.memoizedProps)),x&&(x=vn)){if(Wl(O))throw ud(),Error(s(418));for(;x;)sd(O,x),x=$r(x.nextSibling)}if(ld(O),O.tag===13){if(O=O.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(s(317));e:{for(O=O.nextSibling,x=0;O;){if(O.nodeType===8){var D=O.data;if(D==="/$"){if(x===0){vn=$r(O.nextSibling);break e}x--}else D!=="$"&&D!=="$!"&&D!=="$?"||x++}O=O.nextSibling}vn=null}}else vn=En?$r(O.stateNode.nextSibling):null;return!0}function ud(){for(var O=vn;O;)O=$r(O.nextSibling)}function uo(){vn=En=null,wt=!1}function Kl(O){jn===null?jn=[O]:jn.push(O)}var Zh=k.ReactCurrentBatchConfig;function Ps(O,x,D){if(O=D.ref,O!==null&&typeof O!="function"&&typeof O!="object"){if(D._owner){if(D=D._owner,D){if(D.tag!==1)throw Error(s(309));var M=D.stateNode}if(!M)throw Error(s(147,O));var B=M,U=""+O;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===U?x.ref:(x=function(se){var Oe=B.refs;se===null?delete Oe[U]:Oe[U]=se},x._stringRef=U,x)}if(typeof O!="string")throw Error(s(284));if(!D._owner)throw Error(s(290,O))}return O}function Ia(O,x){throw O=Object.prototype.toString.call(x),Error(s(31,O==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":O))}function cd(O){var x=O._init;return x(O._payload)}function fd(O){function x(Ie,Ce){if(O){var Ne=Ie.deletions;Ne===null?(Ie.deletions=[Ce],Ie.flags|=16):Ne.push(Ce)}}function D(Ie,Ce){if(!O)return null;for(;Ce!==null;)x(Ie,Ce),Ce=Ce.sibling;return null}function M(Ie,Ce){for(Ie=new Map;Ce!==null;)Ce.key!==null?Ie.set(Ce.key,Ce):Ie.set(Ce.index,Ce),Ce=Ce.sibling;return Ie}function B(Ie,Ce){return Ie=Wr(Ie,Ce),Ie.index=0,Ie.sibling=null,Ie}function U(Ie,Ce,Ne){return Ie.index=Ne,O?(Ne=Ie.alternate,Ne!==null?(Ne=Ne.index,Ne<Ce?(Ie.flags|=2,Ce):Ne):(Ie.flags|=2,Ce)):(Ie.flags|=1048576,Ce)}function se(Ie){return O&&Ie.alternate===null&&(Ie.flags|=2),Ie}function Oe(Ie,Ce,Ne,ze){return Ce===null||Ce.tag!==6?(Ce=zu(Ne,Ie.mode,ze),Ce.return=Ie,Ce):(Ce=B(Ce,Ne),Ce.return=Ie,Ce)}function ve(Ie,Ce,Ne,ze){var rt=Ne.type;return rt===N?Qe(Ie,Ce,Ne.props.children,ze,Ne.key):Ce!==null&&(Ce.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===fe&&cd(rt)===Ce.type)?(ze=B(Ce,Ne.props),ze.ref=Ps(Ie,Ce,Ne),ze.return=Ie,ze):(ze=tl(Ne.type,Ne.key,Ne.props,null,Ie.mode,ze),ze.ref=Ps(Ie,Ce,Ne),ze.return=Ie,ze)}function Me(Ie,Ce,Ne,ze){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Ne.containerInfo||Ce.stateNode.implementation!==Ne.implementation?(Ce=Vu(Ne,Ie.mode,ze),Ce.return=Ie,Ce):(Ce=B(Ce,Ne.children||[]),Ce.return=Ie,Ce)}function Qe(Ie,Ce,Ne,ze,rt){return Ce===null||Ce.tag!==7?(Ce=Ci(Ne,Ie.mode,ze,rt),Ce.return=Ie,Ce):(Ce=B(Ce,Ne),Ce.return=Ie,Ce)}function je(Ie,Ce,Ne){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=zu(""+Ce,Ie.mode,Ne),Ce.return=Ie,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case I:return Ne=tl(Ce.type,Ce.key,Ce.props,null,Ie.mode,Ne),Ne.ref=Ps(Ie,null,Ce),Ne.return=Ie,Ne;case P:return Ce=Vu(Ce,Ie.mode,Ne),Ce.return=Ie,Ce;case fe:var ze=Ce._init;return je(Ie,ze(Ce._payload),Ne)}if(Ge(Ce)||he(Ce))return Ce=Ci(Ce,Ie.mode,Ne,null),Ce.return=Ie,Ce;Ia(Ie,Ce)}return null}function Fe(Ie,Ce,Ne,ze){var rt=Ce!==null?Ce.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return rt!==null?null:Oe(Ie,Ce,""+Ne,ze);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case I:return Ne.key===rt?ve(Ie,Ce,Ne,ze):null;case P:return Ne.key===rt?Me(Ie,Ce,Ne,ze):null;case fe:return rt=Ne._init,Fe(Ie,Ce,rt(Ne._payload),ze)}if(Ge(Ne)||he(Ne))return rt!==null?null:Qe(Ie,Ce,Ne,ze,null);Ia(Ie,Ne)}return null}function Xe(Ie,Ce,Ne,ze,rt){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return Ie=Ie.get(Ne)||null,Oe(Ce,Ie,""+ze,rt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case I:return Ie=Ie.get(ze.key===null?Ne:ze.key)||null,ve(Ce,Ie,ze,rt);case P:return Ie=Ie.get(ze.key===null?Ne:ze.key)||null,Me(Ce,Ie,ze,rt);case fe:var ut=ze._init;return Xe(Ie,Ce,Ne,ut(ze._payload),rt)}if(Ge(ze)||he(ze))return Ie=Ie.get(Ne)||null,Qe(Ce,Ie,ze,rt,null);Ia(Ce,ze)}return null}function tt(Ie,Ce,Ne,ze){for(var rt=null,ut=null,ct=Ce,ft=Ce=0,Ut=null;ct!==null&&ft<Ne.length;ft++){ct.index>ft?(Ut=ct,ct=null):Ut=ct.sibling;var Ot=Fe(Ie,ct,Ne[ft],ze);if(Ot===null){ct===null&&(ct=Ut);break}O&&ct&&Ot.alternate===null&&x(Ie,ct),Ce=U(Ot,Ce,ft),ut===null?rt=Ot:ut.sibling=Ot,ut=Ot,ct=Ut}if(ft===Ne.length)return D(Ie,ct),wt&&yi(Ie,ft),rt;if(ct===null){for(;ft<Ne.length;ft++)ct=je(Ie,Ne[ft],ze),ct!==null&&(Ce=U(ct,Ce,ft),ut===null?rt=ct:ut.sibling=ct,ut=ct);return wt&&yi(Ie,ft),rt}for(ct=M(Ie,ct);ft<Ne.length;ft++)Ut=Xe(ct,Ie,ft,Ne[ft],ze),Ut!==null&&(O&&Ut.alternate!==null&&ct.delete(Ut.key===null?ft:Ut.key),Ce=U(Ut,Ce,ft),ut===null?rt=Ut:ut.sibling=Ut,ut=Ut);return O&&ct.forEach(function(Yr){return x(Ie,Yr)}),wt&&yi(Ie,ft),rt}function nt(Ie,Ce,Ne,ze){var rt=he(Ne);if(typeof rt!="function")throw Error(s(150));if(Ne=rt.call(Ne),Ne==null)throw Error(s(151));for(var ut=rt=null,ct=Ce,ft=Ce=0,Ut=null,Ot=Ne.next();ct!==null&&!Ot.done;ft++,Ot=Ne.next()){ct.index>ft?(Ut=ct,ct=null):Ut=ct.sibling;var Yr=Fe(Ie,ct,Ot.value,ze);if(Yr===null){ct===null&&(ct=Ut);break}O&&ct&&Yr.alternate===null&&x(Ie,ct),Ce=U(Yr,Ce,ft),ut===null?rt=Yr:ut.sibling=Yr,ut=Yr,ct=Ut}if(Ot.done)return D(Ie,ct),wt&&yi(Ie,ft),rt;if(ct===null){for(;!Ot.done;ft++,Ot=Ne.next())Ot=je(Ie,Ot.value,ze),Ot!==null&&(Ce=U(Ot,Ce,ft),ut===null?rt=Ot:ut.sibling=Ot,ut=Ot);return wt&&yi(Ie,ft),rt}for(ct=M(Ie,ct);!Ot.done;ft++,Ot=Ne.next())Ot=Xe(ct,Ie,ft,Ot.value,ze),Ot!==null&&(O&&Ot.alternate!==null&&ct.delete(Ot.key===null?ft:Ot.key),Ce=U(Ot,Ce,ft),ut===null?rt=Ot:ut.sibling=Ot,ut=Ot);return O&&ct.forEach(function(Pp){return x(Ie,Pp)}),wt&&yi(Ie,ft),rt}function Pt(Ie,Ce,Ne,ze){if(typeof Ne=="object"&&Ne!==null&&Ne.type===N&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case I:e:{for(var rt=Ne.key,ut=Ce;ut!==null;){if(ut.key===rt){if(rt=Ne.type,rt===N){if(ut.tag===7){D(Ie,ut.sibling),Ce=B(ut,Ne.props.children),Ce.return=Ie,Ie=Ce;break e}}else if(ut.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===fe&&cd(rt)===ut.type){D(Ie,ut.sibling),Ce=B(ut,Ne.props),Ce.ref=Ps(Ie,ut,Ne),Ce.return=Ie,Ie=Ce;break e}D(Ie,ut);break}else x(Ie,ut);ut=ut.sibling}Ne.type===N?(Ce=Ci(Ne.props.children,Ie.mode,ze,Ne.key),Ce.return=Ie,Ie=Ce):(ze=tl(Ne.type,Ne.key,Ne.props,null,Ie.mode,ze),ze.ref=Ps(Ie,Ce,Ne),ze.return=Ie,Ie=ze)}return se(Ie);case P:e:{for(ut=Ne.key;Ce!==null;){if(Ce.key===ut)if(Ce.tag===4&&Ce.stateNode.containerInfo===Ne.containerInfo&&Ce.stateNode.implementation===Ne.implementation){D(Ie,Ce.sibling),Ce=B(Ce,Ne.children||[]),Ce.return=Ie,Ie=Ce;break e}else{D(Ie,Ce);break}else x(Ie,Ce);Ce=Ce.sibling}Ce=Vu(Ne,Ie.mode,ze),Ce.return=Ie,Ie=Ce}return se(Ie);case fe:return ut=Ne._init,Pt(Ie,Ce,ut(Ne._payload),ze)}if(Ge(Ne))return tt(Ie,Ce,Ne,ze);if(he(Ne))return nt(Ie,Ce,Ne,ze);Ia(Ie,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"?(Ne=""+Ne,Ce!==null&&Ce.tag===6?(D(Ie,Ce.sibling),Ce=B(Ce,Ne),Ce.return=Ie,Ie=Ce):(D(Ie,Ce),Ce=zu(Ne,Ie.mode,ze),Ce.return=Ie,Ie=Ce),se(Ie)):D(Ie,Ce)}return Pt}var co=fd(!0),hd=fd(!1),Ra=Br(null),Da=null,fo=null,Zl=null;function Xl(){Zl=fo=Da=null}function Jl(O){var x=Ra.current;_t(Ra),O._currentValue=x}function eu(O,x,D){for(;O!==null;){var M=O.alternate;if((O.childLanes&x)!==x?(O.childLanes|=x,M!==null&&(M.childLanes|=x)):M!==null&&(M.childLanes&x)!==x&&(M.childLanes|=x),O===D)break;O=O.return}}function ho(O,x){Da=O,Zl=fo=null,O=O.dependencies,O!==null&&O.firstContext!==null&&((O.lanes&x)!==0&&(dn=!0),O.firstContext=null)}function Rn(O){var x=O._currentValue;if(Zl!==O)if(O={context:O,memoizedValue:x,next:null},fo===null){if(Da===null)throw Error(s(308));fo=O,Da.dependencies={lanes:0,firstContext:O}}else fo=fo.next=O;return x}var Ai=null;function tu(O){Ai===null?Ai=[O]:Ai.push(O)}function pd(O,x,D,M){var B=x.interleaved;return B===null?(D.next=D,tu(x)):(D.next=B.next,B.next=D),x.interleaved=D,cr(O,M)}function cr(O,x){O.lanes|=x;var D=O.alternate;for(D!==null&&(D.lanes|=x),D=O,O=O.return;O!==null;)O.childLanes|=x,D=O.alternate,D!==null&&(D.childLanes|=x),D=O,O=O.return;return D.tag===3?D.stateNode:null}var Qr=!1;function iu(O){O.updateQueue={baseState:O.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function md(O,x){O=O.updateQueue,x.updateQueue===O&&(x.updateQueue={baseState:O.baseState,firstBaseUpdate:O.firstBaseUpdate,lastBaseUpdate:O.lastBaseUpdate,shared:O.shared,effects:O.effects})}function dr(O,x){return{eventTime:O,lane:x,tag:0,payload:null,callback:null,next:null}}function jr(O,x,D){var M=O.updateQueue;if(M===null)return null;if(M=M.shared,(At&2)!==0){var B=M.pending;return B===null?x.next=x:(x.next=B.next,B.next=x),M.pending=x,cr(O,D)}return B=M.interleaved,B===null?(x.next=x,tu(M)):(x.next=B.next,B.next=x),M.interleaved=x,cr(O,D)}function Na(O,x,D){if(x=x.updateQueue,x!==null&&(x=x.shared,(D&4194240)!==0)){var M=x.lanes;M&=O.pendingLanes,D|=M,x.lanes=D,pl(O,D)}}function gd(O,x){var D=O.updateQueue,M=O.alternate;if(M!==null&&(M=M.updateQueue,D===M)){var B=null,U=null;if(D=D.firstBaseUpdate,D!==null){do{var se={eventTime:D.eventTime,lane:D.lane,tag:D.tag,payload:D.payload,callback:D.callback,next:null};U===null?B=U=se:U=U.next=se,D=D.next}while(D!==null);U===null?B=U=x:U=U.next=x}else B=U=x;D={baseState:M.baseState,firstBaseUpdate:B,lastBaseUpdate:U,shared:M.shared,effects:M.effects},O.updateQueue=D;return}O=D.lastBaseUpdate,O===null?D.firstBaseUpdate=x:O.next=x,D.lastBaseUpdate=x}function Pa(O,x,D,M){var B=O.updateQueue;Qr=!1;var U=B.firstBaseUpdate,se=B.lastBaseUpdate,Oe=B.shared.pending;if(Oe!==null){B.shared.pending=null;var ve=Oe,Me=ve.next;ve.next=null,se===null?U=Me:se.next=Me,se=ve;var Qe=O.alternate;Qe!==null&&(Qe=Qe.updateQueue,Oe=Qe.lastBaseUpdate,Oe!==se&&(Oe===null?Qe.firstBaseUpdate=Me:Oe.next=Me,Qe.lastBaseUpdate=ve))}if(U!==null){var je=B.baseState;se=0,Qe=Me=ve=null,Oe=U;do{var Fe=Oe.lane,Xe=Oe.eventTime;if((M&Fe)===Fe){Qe!==null&&(Qe=Qe.next={eventTime:Xe,lane:0,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null});e:{var tt=O,nt=Oe;switch(Fe=x,Xe=D,nt.tag){case 1:if(tt=nt.payload,typeof tt=="function"){je=tt.call(Xe,je,Fe);break e}je=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=nt.payload,Fe=typeof tt=="function"?tt.call(Xe,je,Fe):tt,Fe==null)break e;je=ue({},je,Fe);break e;case 2:Qr=!0}}Oe.callback!==null&&Oe.lane!==0&&(O.flags|=64,Fe=B.effects,Fe===null?B.effects=[Oe]:Fe.push(Oe))}else Xe={eventTime:Xe,lane:Fe,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null},Qe===null?(Me=Qe=Xe,ve=je):Qe=Qe.next=Xe,se|=Fe;if(Oe=Oe.next,Oe===null){if(Oe=B.shared.pending,Oe===null)break;Fe=Oe,Oe=Fe.next,Fe.next=null,B.lastBaseUpdate=Fe,B.shared.pending=null}}while(!0);if(Qe===null&&(ve=je),B.baseState=ve,B.firstBaseUpdate=Me,B.lastBaseUpdate=Qe,x=B.shared.interleaved,x!==null){B=x;do se|=B.lane,B=B.next;while(B!==x)}else U===null&&(B.shared.lanes=0);Si|=se,O.lanes=se,O.memoizedState=je}}function bd(O,x,D){if(O=x.effects,x.effects=null,O!==null)for(x=0;x<O.length;x++){var M=O[x],B=M.callback;if(B!==null){if(M.callback=null,M=D,typeof B!="function")throw Error(s(191,B));B.call(M)}}}var Ms={},Xn=Br(Ms),Ls=Br(Ms),$s=Br(Ms);function Oi(O){if(O===Ms)throw Error(s(174));return O}function ou(O,x){switch(St($s,x),St(Ls,O),St(Xn,Ms),O=x.nodeType,O){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:Ct(null,"");break;default:O=O===8?x.parentNode:x,x=O.namespaceURI||null,O=O.tagName,x=Ct(x,O)}_t(Xn),St(Xn,x)}function po(){_t(Xn),_t(Ls),_t($s)}function yd(O){Oi($s.current);var x=Oi(Xn.current),D=Ct(x,O.type);x!==D&&(St(Ls,O),St(Xn,D))}function su(O){Ls.current===O&&(_t(Xn),_t(Ls))}var kt=Br(0);function Ma(O){for(var x=O;x!==null;){if(x.tag===13){var D=x.memoizedState;if(D!==null&&(D=D.dehydrated,D===null||D.data==="$?"||D.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===O)break;for(;x.sibling===null;){if(x.return===null||x.return===O)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var au=[];function lu(){for(var O=0;O<au.length;O++)au[O]._workInProgressVersionPrimary=null;au.length=0}var La=k.ReactCurrentDispatcher,uu=k.ReactCurrentBatchConfig,Ti=0,It=null,qt=null,jt=null,$a=!1,Bs=!1,Fs=0,Xh=0;function Xt(){throw Error(s(321))}function cu(O,x){if(x===null)return!1;for(var D=0;D<x.length&&D<O.length;D++)if(!Qn(O[D],x[D]))return!1;return!0}function du(O,x,D,M,B,U){if(Ti=U,It=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,La.current=O===null||O.memoizedState===null?np:rp,O=D(M,B),Bs){U=0;do{if(Bs=!1,Fs=0,25<=U)throw Error(s(301));U+=1,jt=qt=null,x.updateQueue=null,La.current=ip,O=D(M,B)}while(Bs)}if(La.current=qa,x=qt!==null&&qt.next!==null,Ti=0,jt=qt=It=null,$a=!1,x)throw Error(s(300));return O}function fu(){var O=Fs!==0;return Fs=0,O}function Jn(){var O={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?It.memoizedState=jt=O:jt=jt.next=O,jt}function Dn(){if(qt===null){var O=It.alternate;O=O!==null?O.memoizedState:null}else O=qt.next;var x=jt===null?It.memoizedState:jt.next;if(x!==null)jt=x,qt=O;else{if(O===null)throw Error(s(310));qt=O,O={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},jt===null?It.memoizedState=jt=O:jt=jt.next=O}return jt}function qs(O,x){return typeof x=="function"?x(O):x}function hu(O){var x=Dn(),D=x.queue;if(D===null)throw Error(s(311));D.lastRenderedReducer=O;var M=qt,B=M.baseQueue,U=D.pending;if(U!==null){if(B!==null){var se=B.next;B.next=U.next,U.next=se}M.baseQueue=B=U,D.pending=null}if(B!==null){U=B.next,M=M.baseState;var Oe=se=null,ve=null,Me=U;do{var Qe=Me.lane;if((Ti&Qe)===Qe)ve!==null&&(ve=ve.next={lane:0,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null}),M=Me.hasEagerState?Me.eagerState:O(M,Me.action);else{var je={lane:Qe,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null};ve===null?(Oe=ve=je,se=M):ve=ve.next=je,It.lanes|=Qe,Si|=Qe}Me=Me.next}while(Me!==null&&Me!==U);ve===null?se=M:ve.next=Oe,Qn(M,x.memoizedState)||(dn=!0),x.memoizedState=M,x.baseState=se,x.baseQueue=ve,D.lastRenderedState=M}if(O=D.interleaved,O!==null){B=O;do U=B.lane,It.lanes|=U,Si|=U,B=B.next;while(B!==O)}else B===null&&(D.lanes=0);return[x.memoizedState,D.dispatch]}function pu(O){var x=Dn(),D=x.queue;if(D===null)throw Error(s(311));D.lastRenderedReducer=O;var M=D.dispatch,B=D.pending,U=x.memoizedState;if(B!==null){D.pending=null;var se=B=B.next;do U=O(U,se.action),se=se.next;while(se!==B);Qn(U,x.memoizedState)||(dn=!0),x.memoizedState=U,x.baseQueue===null&&(x.baseState=U),D.lastRenderedState=U}return[U,M]}function Ad(){}function Od(O,x){var D=It,M=Dn(),B=x(),U=!Qn(M.memoizedState,B);if(U&&(M.memoizedState=B,dn=!0),M=M.queue,gu(Sd.bind(null,D,M,O),[O]),M.getSnapshot!==x||U||jt!==null&&jt.memoizedState.tag&1){if(D.flags|=2048,Qs(9,xd.bind(null,D,M,B,x),void 0,null),Ht===null)throw Error(s(349));(Ti&30)!==0||Td(D,x,B)}return B}function Td(O,x,D){O.flags|=16384,O={getSnapshot:x,value:D},x=It.updateQueue,x===null?(x={lastEffect:null,stores:null},It.updateQueue=x,x.stores=[O]):(D=x.stores,D===null?x.stores=[O]:D.push(O))}function xd(O,x,D,M){x.value=D,x.getSnapshot=M,Ed(x)&&vd(O)}function Sd(O,x,D){return D(function(){Ed(x)&&vd(O)})}function Ed(O){var x=O.getSnapshot;O=O.value;try{var D=x();return!Qn(O,D)}catch{return!0}}function vd(O){var x=cr(O,1);x!==null&&zn(x,O,1,-1)}function _d(O){var x=Jn();return typeof O=="function"&&(O=O()),x.memoizedState=x.baseState=O,O={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:O},x.queue=O,O=O.dispatch=tp.bind(null,It,O),[x.memoizedState,O]}function Qs(O,x,D,M){return O={tag:O,create:x,destroy:D,deps:M,next:null},x=It.updateQueue,x===null?(x={lastEffect:null,stores:null},It.updateQueue=x,x.lastEffect=O.next=O):(D=x.lastEffect,D===null?x.lastEffect=O.next=O:(M=D.next,D.next=O,O.next=M,x.lastEffect=O)),O}function Cd(){return Dn().memoizedState}function Ba(O,x,D,M){var B=Jn();It.flags|=O,B.memoizedState=Qs(1|x,D,void 0,M===void 0?null:M)}function Fa(O,x,D,M){var B=Dn();M=M===void 0?null:M;var U=void 0;if(qt!==null){var se=qt.memoizedState;if(U=se.destroy,M!==null&&cu(M,se.deps)){B.memoizedState=Qs(x,D,U,M);return}}It.flags|=O,B.memoizedState=Qs(1|x,D,U,M)}function wd(O,x){return Ba(8390656,8,O,x)}function gu(O,x){return Fa(2048,8,O,x)}function kd(O,x){return Fa(4,2,O,x)}function Id(O,x){return Fa(4,4,O,x)}function Rd(O,x){if(typeof x=="function")return O=O(),x(O),function(){x(null)};if(x!=null)return O=O(),x.current=O,function(){x.current=null}}function Dd(O,x,D){return D=D!=null?D.concat([O]):null,Fa(4,4,Rd.bind(null,x,O),D)}function bu(){}function Nd(O,x){var D=Dn();x=x===void 0?null:x;var M=D.memoizedState;return M!==null&&x!==null&&cu(x,M[1])?M[0]:(D.memoizedState=[O,x],O)}function Pd(O,x){var D=Dn();x=x===void 0?null:x;var M=D.memoizedState;return M!==null&&x!==null&&cu(x,M[1])?M[0]:(O=O(),D.memoizedState=[O,x],O)}function Md(O,x,D){return(Ti&21)===0?(O.baseState&&(O.baseState=!1,dn=!0),O.memoizedState=D):(Qn(D,x)||(D=lc(),It.lanes|=D,Si|=D,O.baseState=!0),x)}function Jh(O,x){var D=Tt;Tt=D!==0&&4>D?D:4,O(!0);var M=uu.transition;uu.transition={};try{O(!1),x()}finally{Tt=D,uu.transition=M}}function Ld(){return Dn().memoizedState}function ep(O,x,D){var M=zr(O);if(D={lane:M,action:D,hasEagerState:!1,eagerState:null,next:null},$d(O))Bd(x,D);else if(D=pd(O,x,D,M),D!==null){var B=sn();zn(D,O,M,B),Fd(D,x,M)}}function tp(O,x,D){var M=zr(O),B={lane:M,action:D,hasEagerState:!1,eagerState:null,next:null};if($d(O))Bd(x,B);else{var U=O.alternate;if(O.lanes===0&&(U===null||U.lanes===0)&&(U=x.lastRenderedReducer,U!==null))try{var se=x.lastRenderedState,Oe=U(se,D);if(B.hasEagerState=!0,B.eagerState=Oe,Qn(Oe,se)){var ve=x.interleaved;ve===null?(B.next=B,tu(x)):(B.next=ve.next,ve.next=B),x.interleaved=B;return}}catch{}finally{}D=pd(O,x,B,M),D!==null&&(B=sn(),zn(D,O,M,B),Fd(D,x,M))}}function $d(O){var x=O.alternate;return O===It||x!==null&&x===It}function Bd(O,x){Bs=$a=!0;var D=O.pending;D===null?x.next=x:(x.next=D.next,D.next=x),O.pending=x}function Fd(O,x,D){if((D&4194240)!==0){var M=x.lanes;M&=O.pendingLanes,D|=M,x.lanes=D,pl(O,D)}}var qa={readContext:Rn,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},np={readContext:Rn,useCallback:function(O,x){return Jn().memoizedState=[O,x===void 0?null:x],O},useContext:Rn,useEffect:wd,useImperativeHandle:function(O,x,D){return D=D!=null?D.concat([O]):null,Ba(4194308,4,Rd.bind(null,x,O),D)},useLayoutEffect:function(O,x){return Ba(4194308,4,O,x)},useInsertionEffect:function(O,x){return Ba(4,2,O,x)},useMemo:function(O,x){var D=Jn();return x=x===void 0?null:x,O=O(),D.memoizedState=[O,x],O},useReducer:function(O,x,D){var M=Jn();return x=D!==void 0?D(x):x,M.memoizedState=M.baseState=x,O={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:O,lastRenderedState:x},M.queue=O,O=O.dispatch=ep.bind(null,It,O),[M.memoizedState,O]},useRef:function(O){var x=Jn();return O={current:O},x.memoizedState=O},useState:_d,useDebugValue:bu,useDeferredValue:function(O){return Jn().memoizedState=O},useTransition:function(){var O=_d(!1),x=O[0];return O=Jh.bind(null,O[1]),Jn().memoizedState=O,[x,O]},useMutableSource:function(){},useSyncExternalStore:function(O,x,D){var M=It,B=Jn();if(wt){if(D===void 0)throw Error(s(407));D=D()}else{if(D=x(),Ht===null)throw Error(s(349));(Ti&30)!==0||Td(M,x,D)}B.memoizedState=D;var U={value:D,getSnapshot:x};return B.queue=U,wd(Sd.bind(null,M,U,O),[O]),M.flags|=2048,Qs(9,xd.bind(null,M,U,D,x),void 0,null),D},useId:function(){var O=Jn(),x=Ht.identifierPrefix;if(wt){var D=ur,M=lr;D=(M&~(1<<32-qn(M)-1)).toString(32)+D,x=":"+x+"R"+D,D=Fs++,0<D&&(x+="H"+D.toString(32)),x+=":"}else D=Xh++,x=":"+x+"r"+D.toString(32)+":";return O.memoizedState=x},unstable_isNewReconciler:!1},rp={readContext:Rn,useCallback:Nd,useContext:Rn,useEffect:gu,useImperativeHandle:Dd,useInsertionEffect:kd,useLayoutEffect:Id,useMemo:Pd,useReducer:hu,useRef:Cd,useState:function(){return hu(qs)},useDebugValue:bu,useDeferredValue:function(O){var x=Dn();return Md(x,qt.memoizedState,O)},useTransition:function(){var O=hu(qs)[0],x=Dn().memoizedState;return[O,x]},useMutableSource:Ad,useSyncExternalStore:Od,useId:Ld,unstable_isNewReconciler:!1},ip={readContext:Rn,useCallback:Nd,useContext:Rn,useEffect:gu,useImperativeHandle:Dd,useInsertionEffect:kd,useLayoutEffect:Id,useMemo:Pd,useReducer:pu,useRef:Cd,useState:function(){return pu(qs)},useDebugValue:bu,useDeferredValue:function(O){var x=Dn();return qt===null?x.memoizedState=O:Md(x,qt.memoizedState,O)},useTransition:function(){var O=pu(qs)[0],x=Dn().memoizedState;return[O,x]},useMutableSource:Ad,useSyncExternalStore:Od,useId:Ld,unstable_isNewReconciler:!1};function Hn(O,x){if(O&&O.defaultProps){x=ue({},x),O=O.defaultProps;for(var D in O)x[D]===void 0&&(x[D]=O[D]);return x}return x}function yu(O,x,D,M){x=O.memoizedState,D=D(M,x),D=D==null?x:ue({},x,D),O.memoizedState=D,O.lanes===0&&(O.updateQueue.baseState=D)}var Qa={isMounted:function(O){return(O=O._reactInternals)?Fn(O)===O:!1},enqueueSetState:function(O,x,D){O=O._reactInternals;var M=sn(),B=zr(O),U=dr(M,B);U.payload=x,D!=null&&(U.callback=D),x=jr(O,U,B),x!==null&&(zn(x,O,B,M),Na(x,O,B))},enqueueReplaceState:function(O,x,D){O=O._reactInternals;var M=sn(),B=zr(O),U=dr(M,B);U.tag=1,U.payload=x,D!=null&&(U.callback=D),x=jr(O,U,B),x!==null&&(zn(x,O,B,M),Na(x,O,B))},enqueueForceUpdate:function(O,x){O=O._reactInternals;var D=sn(),M=zr(O),B=dr(D,M);B.tag=2,x!=null&&(B.callback=x),x=jr(O,B,M),x!==null&&(zn(x,O,M,D),Na(x,O,M))}};function qd(O,x,D,M,B,U,se){return O=O.stateNode,typeof O.shouldComponentUpdate=="function"?O.shouldComponentUpdate(M,U,se):x.prototype&&x.prototype.isPureReactComponent?!Cs(D,M)||!Cs(B,U):!0}function Qd(O,x,D){var M=!1,B=Fr,U=x.contextType;return typeof U=="object"&&U!==null?U=Rn(U):(B=un(x)?gi:Zt.current,M=x.contextTypes,U=(M=M!=null)?so(O,B):Fr),x=new x(D,U),O.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Qa,O.stateNode=x,x._reactInternals=O,M&&(O=O.stateNode,O.__reactInternalMemoizedUnmaskedChildContext=B,O.__reactInternalMemoizedMaskedChildContext=U),x}function jd(O,x,D,M){O=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(D,M),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(D,M),x.state!==O&&Qa.enqueueReplaceState(x,x.state,null)}function Au(O,x,D,M){var B=O.stateNode;B.props=D,B.state=O.memoizedState,B.refs={},iu(O);var U=x.contextType;typeof U=="object"&&U!==null?B.context=Rn(U):(U=un(x)?gi:Zt.current,B.context=so(O,U)),B.state=O.memoizedState,U=x.getDerivedStateFromProps,typeof U=="function"&&(yu(O,x,U,D),B.state=O.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(x=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),x!==B.state&&Qa.enqueueReplaceState(B,B.state,null),Pa(O,D,B,M),B.state=O.memoizedState),typeof B.componentDidMount=="function"&&(O.flags|=4194308)}function mo(O,x){try{var D="",M=x;do D+=Z(M),M=M.return;while(M);var B=D}catch(U){B=`
Error generating stack: `+U.message+`
`+U.stack}return{value:O,source:x,stack:B,digest:null}}function Ou(O,x,D){return{value:O,source:null,stack:D??null,digest:x??null}}function Tu(O,x){try{console.error(x.value)}catch(D){setTimeout(function(){throw D})}}var op=typeof WeakMap=="function"?WeakMap:Map;function Hd(O,x,D){D=dr(-1,D),D.tag=3,D.payload={element:null};var M=x.value;return D.callback=function(){Wa||(Wa=!0,Bu=M),Tu(O,x)},D}function Ud(O,x,D){D=dr(-1,D),D.tag=3;var M=O.type.getDerivedStateFromError;if(typeof M=="function"){var B=x.value;D.payload=function(){return M(B)},D.callback=function(){Tu(O,x)}}var U=O.stateNode;return U!==null&&typeof U.componentDidCatch=="function"&&(D.callback=function(){Tu(O,x),typeof M!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var se=x.stack;this.componentDidCatch(x.value,{componentStack:se!==null?se:""})}),D}function Gd(O,x,D){var M=O.pingCache;if(M===null){M=O.pingCache=new op;var B=new Set;M.set(x,B)}else B=M.get(x),B===void 0&&(B=new Set,M.set(x,B));B.has(D)||(B.add(D),O=xp.bind(null,O,x,D),x.then(O,O))}function zd(O){do{var x;if((x=O.tag===13)&&(x=O.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return O;O=O.return}while(O!==null);return null}function Vd(O,x,D,M,B){return(O.mode&1)===0?(O===x?O.flags|=65536:(O.flags|=128,D.flags|=131072,D.flags&=-52805,D.tag===1&&(D.alternate===null?D.tag=17:(x=dr(-1,1),x.tag=2,jr(D,x,1))),D.lanes|=1),O):(O.flags|=65536,O.lanes=B,O)}var lp=k.ReactCurrentOwner,dn=!1;function rn(O,x,D,M){x.child=O===null?hd(x,null,D,M):co(x,O.child,D,M)}function Wd(O,x,D,M,B){D=D.render;var U=x.ref;return ho(x,B),M=du(O,x,D,M,U,B),D=fu(),O!==null&&!dn?(x.updateQueue=O.updateQueue,x.flags&=-2053,O.lanes&=~B,fr(O,x,B)):(wt&&D&&zl(x),x.flags|=1,rn(O,x,M,B),x.child)}function Yd(O,x,D,M,B){if(O===null){var U=D.type;return typeof U=="function"&&!Gu(U)&&U.defaultProps===void 0&&D.compare===null&&D.defaultProps===void 0?(x.tag=15,x.type=U,Kd(O,x,U,M,B)):(O=tl(D.type,null,M,x,x.mode,B),O.ref=x.ref,O.return=x,x.child=O)}if(U=O.child,(O.lanes&B)===0){var se=U.memoizedProps;if(D=D.compare,D=D!==null?D:Cs,D(se,M)&&O.ref===x.ref)return fr(O,x,B)}return x.flags|=1,O=Wr(U,M),O.ref=x.ref,O.return=x,x.child=O}function Kd(O,x,D,M,B){if(O!==null){var U=O.memoizedProps;if(Cs(U,M)&&O.ref===x.ref)if(dn=!1,x.pendingProps=M=U,(O.lanes&B)!==0)(O.flags&131072)!==0&&(dn=!0);else return x.lanes=O.lanes,fr(O,x,B)}return xu(O,x,D,M,B)}function Zd(O,x,D){var M=x.pendingProps,B=M.children,U=O!==null?O.memoizedState:null;if(M.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(bo,_n),_n|=D;else{if((D&1073741824)===0)return O=U!==null?U.baseLanes|D:D,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:O,cachePool:null,transitions:null},x.updateQueue=null,St(bo,_n),_n|=O,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},M=U!==null?U.baseLanes:D,St(bo,_n),_n|=M}else U!==null?(M=U.baseLanes|D,x.memoizedState=null):M=D,St(bo,_n),_n|=M;return rn(O,x,B,D),x.child}function Xd(O,x){var D=x.ref;(O===null&&D!==null||O!==null&&O.ref!==D)&&(x.flags|=512,x.flags|=2097152)}function xu(O,x,D,M,B){var U=un(D)?gi:Zt.current;return U=so(x,U),ho(x,B),D=du(O,x,D,M,U,B),M=fu(),O!==null&&!dn?(x.updateQueue=O.updateQueue,x.flags&=-2053,O.lanes&=~B,fr(O,x,B)):(wt&&M&&zl(x),x.flags|=1,rn(O,x,D,B),x.child)}function Jd(O,x,D,M,B){if(un(D)){var U=!0;Ea(x)}else U=!1;if(ho(x,B),x.stateNode===null)Ha(O,x),Qd(x,D,M),Au(x,D,M,B),M=!0;else if(O===null){var se=x.stateNode,Oe=x.memoizedProps;se.props=Oe;var ve=se.context,Me=D.contextType;typeof Me=="object"&&Me!==null?Me=Rn(Me):(Me=un(D)?gi:Zt.current,Me=so(x,Me));var Qe=D.getDerivedStateFromProps,je=typeof Qe=="function"||typeof se.getSnapshotBeforeUpdate=="function";je||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(Oe!==M||ve!==Me)&&jd(x,se,M,Me),Qr=!1;var Fe=x.memoizedState;se.state=Fe,Pa(x,M,se,B),ve=x.memoizedState,Oe!==M||Fe!==ve||ln.current||Qr?(typeof Qe=="function"&&(yu(x,D,Qe,M),ve=x.memoizedState),(Oe=Qr||qd(x,D,Oe,M,Fe,ve,Me))?(je||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(x.flags|=4194308)):(typeof se.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=M,x.memoizedState=ve),se.props=M,se.state=ve,se.context=Me,M=Oe):(typeof se.componentDidMount=="function"&&(x.flags|=4194308),M=!1)}else{se=x.stateNode,md(O,x),Oe=x.memoizedProps,Me=x.type===x.elementType?Oe:Hn(x.type,Oe),se.props=Me,je=x.pendingProps,Fe=se.context,ve=D.contextType,typeof ve=="object"&&ve!==null?ve=Rn(ve):(ve=un(D)?gi:Zt.current,ve=so(x,ve));var Xe=D.getDerivedStateFromProps;(Qe=typeof Xe=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(Oe!==je||Fe!==ve)&&jd(x,se,M,ve),Qr=!1,Fe=x.memoizedState,se.state=Fe,Pa(x,M,se,B);var tt=x.memoizedState;Oe!==je||Fe!==tt||ln.current||Qr?(typeof Xe=="function"&&(yu(x,D,Xe,M),tt=x.memoizedState),(Me=Qr||qd(x,D,Me,M,Fe,tt,ve)||!1)?(Qe||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(M,tt,ve),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(M,tt,ve)),typeof se.componentDidUpdate=="function"&&(x.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof se.componentDidUpdate!="function"||Oe===O.memoizedProps&&Fe===O.memoizedState||(x.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Oe===O.memoizedProps&&Fe===O.memoizedState||(x.flags|=1024),x.memoizedProps=M,x.memoizedState=tt),se.props=M,se.state=tt,se.context=ve,M=Me):(typeof se.componentDidUpdate!="function"||Oe===O.memoizedProps&&Fe===O.memoizedState||(x.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Oe===O.memoizedProps&&Fe===O.memoizedState||(x.flags|=1024),M=!1)}return Su(O,x,D,M,U,B)}function Su(O,x,D,M,B,U){Xd(O,x);var se=(x.flags&128)!==0;if(!M&&!se)return B&&nd(x,D,!1),fr(O,x,U);M=x.stateNode,lp.current=x;var Oe=se&&typeof D.getDerivedStateFromError!="function"?null:M.render();return x.flags|=1,O!==null&&se?(x.child=co(x,O.child,null,U),x.child=co(x,null,Oe,U)):rn(O,x,Oe,U),x.memoizedState=M.state,B&&nd(x,D,!0),x.child}function ef(O){var x=O.stateNode;x.pendingContext?ed(O,x.pendingContext,x.pendingContext!==x.context):x.context&&ed(O,x.context,!1),ou(O,x.containerInfo)}function tf(O,x,D,M,B){return uo(),Kl(B),x.flags|=256,rn(O,x,D,M),x.child}var Eu={dehydrated:null,treeContext:null,retryLane:0};function vu(O){return{baseLanes:O,cachePool:null,transitions:null}}function nf(O,x,D){var M=x.pendingProps,B=kt.current,U=!1,se=(x.flags&128)!==0,Oe;if((Oe=se)||(Oe=O!==null&&O.memoizedState===null?!1:(B&2)!==0),Oe?(U=!0,x.flags&=-129):(O===null||O.memoizedState!==null)&&(B|=1),St(kt,B&1),O===null)return Yl(x),O=x.memoizedState,O!==null&&(O=O.dehydrated,O!==null)?((x.mode&1)===0?x.lanes=1:O.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(se=M.children,O=M.fallback,U?(M=x.mode,U=x.child,se={mode:"hidden",children:se},(M&1)===0&&U!==null?(U.childLanes=0,U.pendingProps=se):U=nl(se,M,0,null),O=Ci(O,M,D,null),U.return=x,O.return=x,U.sibling=O,x.child=U,x.child.memoizedState=vu(D),x.memoizedState=Eu,O):_u(x,se));if(B=O.memoizedState,B!==null&&(Oe=B.dehydrated,Oe!==null))return up(O,x,se,M,Oe,B,D);if(U){U=M.fallback,se=x.mode,B=O.child,Oe=B.sibling;var ve={mode:"hidden",children:M.children};return(se&1)===0&&x.child!==B?(M=x.child,M.childLanes=0,M.pendingProps=ve,x.deletions=null):(M=Wr(B,ve),M.subtreeFlags=B.subtreeFlags&14680064),Oe!==null?U=Wr(Oe,U):(U=Ci(U,se,D,null),U.flags|=2),U.return=x,M.return=x,M.sibling=U,x.child=M,M=U,U=x.child,se=O.child.memoizedState,se=se===null?vu(D):{baseLanes:se.baseLanes|D,cachePool:null,transitions:se.transitions},U.memoizedState=se,U.childLanes=O.childLanes&~D,x.memoizedState=Eu,M}return U=O.child,O=U.sibling,M=Wr(U,{mode:"visible",children:M.children}),(x.mode&1)===0&&(M.lanes=D),M.return=x,M.sibling=null,O!==null&&(D=x.deletions,D===null?(x.deletions=[O],x.flags|=16):D.push(O)),x.child=M,x.memoizedState=null,M}function _u(O,x){return x=nl({mode:"visible",children:x},O.mode,0,null),x.return=O,O.child=x}function ja(O,x,D,M){return M!==null&&Kl(M),co(x,O.child,null,D),O=_u(x,x.pendingProps.children),O.flags|=2,x.memoizedState=null,O}function up(O,x,D,M,B,U,se){if(D)return x.flags&256?(x.flags&=-257,M=Ou(Error(s(422))),ja(O,x,se,M)):x.memoizedState!==null?(x.child=O.child,x.flags|=128,null):(U=M.fallback,B=x.mode,M=nl({mode:"visible",children:M.children},B,0,null),U=Ci(U,B,se,null),U.flags|=2,M.return=x,U.return=x,M.sibling=U,x.child=M,(x.mode&1)!==0&&co(x,O.child,null,se),x.child.memoizedState=vu(se),x.memoizedState=Eu,U);if((x.mode&1)===0)return ja(O,x,se,null);if(B.data==="$!"){if(M=B.nextSibling&&B.nextSibling.dataset,M)var Oe=M.dgst;return M=Oe,U=Error(s(419)),M=Ou(U,M,void 0),ja(O,x,se,M)}if(Oe=(se&O.childLanes)!==0,dn||Oe){if(M=Ht,M!==null){switch(se&-se){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}B=(B&(M.suspendedLanes|se))!==0?0:B,B!==0&&B!==U.retryLane&&(U.retryLane=B,cr(O,B),zn(M,O,B,-1))}return Uu(),M=Ou(Error(s(421))),ja(O,x,se,M)}return B.data==="$?"?(x.flags|=128,x.child=O.child,x=Sp.bind(null,O),B._reactRetry=x,null):(O=U.treeContext,vn=$r(B.nextSibling),En=x,wt=!0,jn=null,O!==null&&(kn[In++]=lr,kn[In++]=ur,kn[In++]=bi,lr=O.id,ur=O.overflow,bi=x),x=_u(x,M.children),x.flags|=4096,x)}function rf(O,x,D){O.lanes|=x;var M=O.alternate;M!==null&&(M.lanes|=x),eu(O.return,x,D)}function Cu(O,x,D,M,B){var U=O.memoizedState;U===null?O.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:M,tail:D,tailMode:B}:(U.isBackwards=x,U.rendering=null,U.renderingStartTime=0,U.last=M,U.tail=D,U.tailMode=B)}function of(O,x,D){var M=x.pendingProps,B=M.revealOrder,U=M.tail;if(rn(O,x,M.children,D),M=kt.current,(M&2)!==0)M=M&1|2,x.flags|=128;else{if(O!==null&&(O.flags&128)!==0)e:for(O=x.child;O!==null;){if(O.tag===13)O.memoizedState!==null&&rf(O,D,x);else if(O.tag===19)rf(O,D,x);else if(O.child!==null){O.child.return=O,O=O.child;continue}if(O===x)break e;for(;O.sibling===null;){if(O.return===null||O.return===x)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}M&=1}if(St(kt,M),(x.mode&1)===0)x.memoizedState=null;else switch(B){case"forwards":for(D=x.child,B=null;D!==null;)O=D.alternate,O!==null&&Ma(O)===null&&(B=D),D=D.sibling;D=B,D===null?(B=x.child,x.child=null):(B=D.sibling,D.sibling=null),Cu(x,!1,B,D,U);break;case"backwards":for(D=null,B=x.child,x.child=null;B!==null;){if(O=B.alternate,O!==null&&Ma(O)===null){x.child=B;break}O=B.sibling,B.sibling=D,D=B,B=O}Cu(x,!0,D,null,U);break;case"together":Cu(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function Ha(O,x){(x.mode&1)===0&&O!==null&&(O.alternate=null,x.alternate=null,x.flags|=2)}function fr(O,x,D){if(O!==null&&(x.dependencies=O.dependencies),Si|=x.lanes,(D&x.childLanes)===0)return null;if(O!==null&&x.child!==O.child)throw Error(s(153));if(x.child!==null){for(O=x.child,D=Wr(O,O.pendingProps),x.child=D,D.return=x;O.sibling!==null;)O=O.sibling,D=D.sibling=Wr(O,O.pendingProps),D.return=x;D.sibling=null}return x.child}function cp(O,x,D){switch(x.tag){case 3:ef(x),uo();break;case 5:yd(x);break;case 1:un(x.type)&&Ea(x);break;case 4:ou(x,x.stateNode.containerInfo);break;case 10:var M=x.type._context,B=x.memoizedProps.value;St(Ra,M._currentValue),M._currentValue=B;break;case 13:if(M=x.memoizedState,M!==null)return M.dehydrated!==null?(St(kt,kt.current&1),x.flags|=128,null):(D&x.child.childLanes)!==0?nf(O,x,D):(St(kt,kt.current&1),O=fr(O,x,D),O!==null?O.sibling:null);St(kt,kt.current&1);break;case 19:if(M=(D&x.childLanes)!==0,(O.flags&128)!==0){if(M)return of(O,x,D);x.flags|=128}if(B=x.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),St(kt,kt.current),M)break;return null;case 22:case 23:return x.lanes=0,Zd(O,x,D)}return fr(O,x,D)}var sf,wu,lf,uf;sf=function(O,x){for(var D=x.child;D!==null;){if(D.tag===5||D.tag===6)O.appendChild(D.stateNode);else if(D.tag!==4&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===x)break;for(;D.sibling===null;){if(D.return===null||D.return===x)return;D=D.return}D.sibling.return=D.return,D=D.sibling}},wu=function(){},lf=function(O,x,D,M){var B=O.memoizedProps;if(B!==M){O=x.stateNode,Oi(Xn.current);var U=null;switch(D){case"input":B=Pe(O,B),M=Pe(O,M),U=[];break;case"select":B=ue({},B,{value:void 0}),M=ue({},M,{value:void 0}),U=[];break;case"textarea":B=Ve(O,B),M=Ve(O,M),U=[];break;default:typeof B.onClick!="function"&&typeof M.onClick=="function"&&(O.onclick=Ta)}ye(D,M);var se;D=null;for(Me in B)if(!M.hasOwnProperty(Me)&&B.hasOwnProperty(Me)&&B[Me]!=null)if(Me==="style"){var Oe=B[Me];for(se in Oe)Oe.hasOwnProperty(se)&&(D||(D={}),D[se]="")}else Me!=="dangerouslySetInnerHTML"&&Me!=="children"&&Me!=="suppressContentEditableWarning"&&Me!=="suppressHydrationWarning"&&Me!=="autoFocus"&&(l.hasOwnProperty(Me)?U||(U=[]):(U=U||[]).push(Me,null));for(Me in M){var ve=M[Me];if(Oe=B!=null?B[Me]:void 0,M.hasOwnProperty(Me)&&ve!==Oe&&(ve!=null||Oe!=null))if(Me==="style")if(Oe){for(se in Oe)!Oe.hasOwnProperty(se)||ve&&ve.hasOwnProperty(se)||(D||(D={}),D[se]="");for(se in ve)ve.hasOwnProperty(se)&&Oe[se]!==ve[se]&&(D||(D={}),D[se]=ve[se])}else D||(U||(U=[]),U.push(Me,D)),D=ve;else Me==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,Oe=Oe?Oe.__html:void 0,ve!=null&&Oe!==ve&&(U=U||[]).push(Me,ve)):Me==="children"?typeof ve!="string"&&typeof ve!="number"||(U=U||[]).push(Me,""+ve):Me!=="suppressContentEditableWarning"&&Me!=="suppressHydrationWarning"&&(l.hasOwnProperty(Me)?(ve!=null&&Me==="onScroll"&&vt("scroll",O),U||Oe===ve||(U=[])):(U=U||[]).push(Me,ve))}D&&(U=U||[]).push("style",D);var Me=U;(x.updateQueue=Me)&&(x.flags|=4)}},uf=function(O,x,D,M){D!==M&&(x.flags|=4)};function js(O,x){if(!wt)switch(O.tailMode){case"hidden":x=O.tail;for(var D=null;x!==null;)x.alternate!==null&&(D=x),x=x.sibling;D===null?O.tail=null:D.sibling=null;break;case"collapsed":D=O.tail;for(var M=null;D!==null;)D.alternate!==null&&(M=D),D=D.sibling;M===null?x||O.tail===null?O.tail=null:O.tail.sibling=null:M.sibling=null}}function Jt(O){var x=O.alternate!==null&&O.alternate.child===O.child,D=0,M=0;if(x)for(var B=O.child;B!==null;)D|=B.lanes|B.childLanes,M|=B.subtreeFlags&14680064,M|=B.flags&14680064,B.return=O,B=B.sibling;else for(B=O.child;B!==null;)D|=B.lanes|B.childLanes,M|=B.subtreeFlags,M|=B.flags,B.return=O,B=B.sibling;return O.subtreeFlags|=M,O.childLanes=D,x}function dp(O,x,D){var M=x.pendingProps;switch(Vl(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(x),null;case 1:return un(x.type)&&Sa(),Jt(x),null;case 3:return M=x.stateNode,po(),_t(ln),_t(Zt),lu(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(O===null||O.child===null)&&(ka(x)?x.flags|=4:O===null||O.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,jn!==null&&(Qu(jn),jn=null))),wu(O,x),Jt(x),null;case 5:su(x);var B=Oi($s.current);if(D=x.type,O!==null&&x.stateNode!=null)lf(O,x,D,M,B),O.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!M){if(x.stateNode===null)throw Error(s(166));return Jt(x),null}if(O=Oi(Xn.current),ka(x)){M=x.stateNode,D=x.type;var U=x.memoizedProps;switch(M[Zn]=x,M[Ds]=U,O=(x.mode&1)!==0,D){case"dialog":vt("cancel",M),vt("close",M);break;case"iframe":case"object":case"embed":vt("load",M);break;case"video":case"audio":for(B=0;B<ks.length;B++)vt(ks[B],M);break;case"source":vt("error",M);break;case"img":case"image":case"link":vt("error",M),vt("load",M);break;case"details":vt("toggle",M);break;case"input":Le(M,U),vt("invalid",M);break;case"select":M._wrapperState={wasMultiple:!!U.multiple},vt("invalid",M);break;case"textarea":He(M,U),vt("invalid",M)}ye(D,U),B=null;for(var se in U)if(U.hasOwnProperty(se)){var Oe=U[se];se==="children"?typeof Oe=="string"?M.textContent!==Oe&&(U.suppressHydrationWarning!==!0&&Oa(M.textContent,Oe,O),B=["children",Oe]):typeof Oe=="number"&&M.textContent!==""+Oe&&(U.suppressHydrationWarning!==!0&&Oa(M.textContent,Oe,O),B=["children",""+Oe]):l.hasOwnProperty(se)&&Oe!=null&&se==="onScroll"&&vt("scroll",M)}switch(D){case"input":Ae(M),Ze(M,U,!0);break;case"textarea":Ae(M),dt(M);break;case"select":case"option":break;default:typeof U.onClick=="function"&&(M.onclick=Ta)}M=B,x.updateQueue=M,M!==null&&(x.flags|=4)}else{se=B.nodeType===9?B:B.ownerDocument,O==="http://www.w3.org/1999/xhtml"&&(O=bt(D)),O==="http://www.w3.org/1999/xhtml"?D==="script"?(O=se.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild)):typeof M.is=="string"?O=se.createElement(D,{is:M.is}):(O=se.createElement(D),D==="select"&&(se=O,M.multiple?se.multiple=!0:M.size&&(se.size=M.size))):O=se.createElementNS(O,D),O[Zn]=x,O[Ds]=M,sf(O,x,!1,!1),x.stateNode=O;e:{switch(se=we(D,M),D){case"dialog":vt("cancel",O),vt("close",O),B=M;break;case"iframe":case"object":case"embed":vt("load",O),B=M;break;case"video":case"audio":for(B=0;B<ks.length;B++)vt(ks[B],O);B=M;break;case"source":vt("error",O),B=M;break;case"img":case"image":case"link":vt("error",O),vt("load",O),B=M;break;case"details":vt("toggle",O),B=M;break;case"input":Le(O,M),B=Pe(O,M),vt("invalid",O);break;case"option":B=M;break;case"select":O._wrapperState={wasMultiple:!!M.multiple},B=ue({},M,{value:void 0}),vt("invalid",O);break;case"textarea":He(O,M),B=Ve(O,M),vt("invalid",O);break;default:B=M}ye(D,B),Oe=B;for(U in Oe)if(Oe.hasOwnProperty(U)){var ve=Oe[U];U==="style"?_e(O,ve):U==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,ve!=null&&pt(O,ve)):U==="children"?typeof ve=="string"?(D!=="textarea"||ve!=="")&&ae(O,ve):typeof ve=="number"&&ae(O,""+ve):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(l.hasOwnProperty(U)?ve!=null&&U==="onScroll"&&vt("scroll",O):ve!=null&&R(O,U,ve,se))}switch(D){case"input":Ae(O),Ze(O,M,!1);break;case"textarea":Ae(O),dt(O);break;case"option":M.value!=null&&O.setAttribute("value",""+Ee(M.value));break;case"select":O.multiple=!!M.multiple,U=M.value,U!=null?Ye(O,!!M.multiple,U,!1):M.defaultValue!=null&&Ye(O,!!M.multiple,M.defaultValue,!0);break;default:typeof B.onClick=="function"&&(O.onclick=Ta)}switch(D){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}}M&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return Jt(x),null;case 6:if(O&&x.stateNode!=null)uf(O,x,O.memoizedProps,M);else{if(typeof M!="string"&&x.stateNode===null)throw Error(s(166));if(D=Oi($s.current),Oi(Xn.current),ka(x)){if(M=x.stateNode,D=x.memoizedProps,M[Zn]=x,(U=M.nodeValue!==D)&&(O=En,O!==null))switch(O.tag){case 3:Oa(M.nodeValue,D,(O.mode&1)!==0);break;case 5:O.memoizedProps.suppressHydrationWarning!==!0&&Oa(M.nodeValue,D,(O.mode&1)!==0)}U&&(x.flags|=4)}else M=(D.nodeType===9?D:D.ownerDocument).createTextNode(M),M[Zn]=x,x.stateNode=M}return Jt(x),null;case 13:if(_t(kt),M=x.memoizedState,O===null||O.memoizedState!==null&&O.memoizedState.dehydrated!==null){if(wt&&vn!==null&&(x.mode&1)!==0&&(x.flags&128)===0)ud(),uo(),x.flags|=98560,U=!1;else if(U=ka(x),M!==null&&M.dehydrated!==null){if(O===null){if(!U)throw Error(s(318));if(U=x.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(s(317));U[Zn]=x}else uo(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;Jt(x),U=!1}else jn!==null&&(Qu(jn),jn=null),U=!0;if(!U)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=D,x):(M=M!==null,M!==(O!==null&&O.memoizedState!==null)&&M&&(x.child.flags|=8192,(x.mode&1)!==0&&(O===null||(kt.current&1)!==0?Qt===0&&(Qt=3):Uu())),x.updateQueue!==null&&(x.flags|=4),Jt(x),null);case 4:return po(),wu(O,x),O===null&&Is(x.stateNode.containerInfo),Jt(x),null;case 10:return Jl(x.type._context),Jt(x),null;case 17:return un(x.type)&&Sa(),Jt(x),null;case 19:if(_t(kt),U=x.memoizedState,U===null)return Jt(x),null;if(M=(x.flags&128)!==0,se=U.rendering,se===null)if(M)js(U,!1);else{if(Qt!==0||O!==null&&(O.flags&128)!==0)for(O=x.child;O!==null;){if(se=Ma(O),se!==null){for(x.flags|=128,js(U,!1),M=se.updateQueue,M!==null&&(x.updateQueue=M,x.flags|=4),x.subtreeFlags=0,M=D,D=x.child;D!==null;)U=D,O=M,U.flags&=14680066,se=U.alternate,se===null?(U.childLanes=0,U.lanes=O,U.child=null,U.subtreeFlags=0,U.memoizedProps=null,U.memoizedState=null,U.updateQueue=null,U.dependencies=null,U.stateNode=null):(U.childLanes=se.childLanes,U.lanes=se.lanes,U.child=se.child,U.subtreeFlags=0,U.deletions=null,U.memoizedProps=se.memoizedProps,U.memoizedState=se.memoizedState,U.updateQueue=se.updateQueue,U.type=se.type,O=se.dependencies,U.dependencies=O===null?null:{lanes:O.lanes,firstContext:O.firstContext}),D=D.sibling;return St(kt,kt.current&1|2),x.child}O=O.sibling}U.tail!==null&&Nt()>yo&&(x.flags|=128,M=!0,js(U,!1),x.lanes=4194304)}else{if(!M)if(O=Ma(se),O!==null){if(x.flags|=128,M=!0,D=O.updateQueue,D!==null&&(x.updateQueue=D,x.flags|=4),js(U,!0),U.tail===null&&U.tailMode==="hidden"&&!se.alternate&&!wt)return Jt(x),null}else 2*Nt()-U.renderingStartTime>yo&&D!==1073741824&&(x.flags|=128,M=!0,js(U,!1),x.lanes=4194304);U.isBackwards?(se.sibling=x.child,x.child=se):(D=U.last,D!==null?D.sibling=se:x.child=se,U.last=se)}return U.tail!==null?(x=U.tail,U.rendering=x,U.tail=x.sibling,U.renderingStartTime=Nt(),x.sibling=null,D=kt.current,St(kt,M?D&1|2:D&1),x):(Jt(x),null);case 22:case 23:return Hu(),M=x.memoizedState!==null,O!==null&&O.memoizedState!==null!==M&&(x.flags|=8192),M&&(x.mode&1)!==0?(_n&1073741824)!==0&&(Jt(x),x.subtreeFlags&6&&(x.flags|=8192)):Jt(x),null;case 24:return null;case 25:return null}throw Error(s(156,x.tag))}function fp(O,x){switch(Vl(x),x.tag){case 1:return un(x.type)&&Sa(),O=x.flags,O&65536?(x.flags=O&-65537|128,x):null;case 3:return po(),_t(ln),_t(Zt),lu(),O=x.flags,(O&65536)!==0&&(O&128)===0?(x.flags=O&-65537|128,x):null;case 5:return su(x),null;case 13:if(_t(kt),O=x.memoizedState,O!==null&&O.dehydrated!==null){if(x.alternate===null)throw Error(s(340));uo()}return O=x.flags,O&65536?(x.flags=O&-65537|128,x):null;case 19:return _t(kt),null;case 4:return po(),null;case 10:return Jl(x.type._context),null;case 22:case 23:return Hu(),null;case 24:return null;default:return null}}var Ua=!1,tn=!1,hp=typeof WeakSet=="function"?WeakSet:Set,Je=null;function go(O,x){var D=O.ref;if(D!==null)if(typeof D=="function")try{D(null)}catch(M){Dt(O,x,M)}else D.current=null}function ku(O,x,D){try{D()}catch(M){Dt(O,x,M)}}var cf=!1;function pp(O,x){if(Bl=ua,O=Bc(),kl(O)){if("selectionStart"in O)var D={start:O.selectionStart,end:O.selectionEnd};else e:{D=(D=O.ownerDocument)&&D.defaultView||window;var M=D.getSelection&&D.getSelection();if(M&&M.rangeCount!==0){D=M.anchorNode;var B=M.anchorOffset,U=M.focusNode;M=M.focusOffset;try{D.nodeType,U.nodeType}catch{D=null;break e}var se=0,Oe=-1,ve=-1,Me=0,Qe=0,je=O,Fe=null;t:for(;;){for(var Xe;je!==D||B!==0&&je.nodeType!==3||(Oe=se+B),je!==U||M!==0&&je.nodeType!==3||(ve=se+M),je.nodeType===3&&(se+=je.nodeValue.length),(Xe=je.firstChild)!==null;)Fe=je,je=Xe;for(;;){if(je===O)break t;if(Fe===D&&++Me===B&&(Oe=se),Fe===U&&++Qe===M&&(ve=se),(Xe=je.nextSibling)!==null)break;je=Fe,Fe=je.parentNode}je=Xe}D=Oe===-1||ve===-1?null:{start:Oe,end:ve}}else D=null}D=D||{start:0,end:0}}else D=null;for(Fl={focusedElem:O,selectionRange:D},ua=!1,Je=x;Je!==null;)if(x=Je,O=x.child,(x.subtreeFlags&1028)!==0&&O!==null)O.return=x,Je=O;else for(;Je!==null;){x=Je;try{var tt=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(tt!==null){var nt=tt.memoizedProps,Pt=tt.memoizedState,Ie=x.stateNode,Ce=Ie.getSnapshotBeforeUpdate(x.elementType===x.type?nt:Hn(x.type,nt),Pt);Ie.__reactInternalSnapshotBeforeUpdate=Ce}break;case 3:var Ne=x.stateNode.containerInfo;Ne.nodeType===1?Ne.textContent="":Ne.nodeType===9&&Ne.documentElement&&Ne.removeChild(Ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(ze){Dt(x,x.return,ze)}if(O=x.sibling,O!==null){O.return=x.return,Je=O;break}Je=x.return}return tt=cf,cf=!1,tt}function Hs(O,x,D){var M=x.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var B=M=M.next;do{if((B.tag&O)===O){var U=B.destroy;B.destroy=void 0,U!==void 0&&ku(x,D,U)}B=B.next}while(B!==M)}}function Ga(O,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var D=x=x.next;do{if((D.tag&O)===O){var M=D.create;D.destroy=M()}D=D.next}while(D!==x)}}function Iu(O){var x=O.ref;if(x!==null){var D=O.stateNode;switch(O.tag){case 5:O=D;break;default:O=D}typeof x=="function"?x(O):x.current=O}}function df(O){var x=O.alternate;x!==null&&(O.alternate=null,df(x)),O.child=null,O.deletions=null,O.sibling=null,O.tag===5&&(x=O.stateNode,x!==null&&(delete x[Zn],delete x[Ds],delete x[Hl],delete x[Wh],delete x[Yh])),O.stateNode=null,O.return=null,O.dependencies=null,O.memoizedProps=null,O.memoizedState=null,O.pendingProps=null,O.stateNode=null,O.updateQueue=null}function ff(O){return O.tag===5||O.tag===3||O.tag===4}function hf(O){e:for(;;){for(;O.sibling===null;){if(O.return===null||ff(O.return))return null;O=O.return}for(O.sibling.return=O.return,O=O.sibling;O.tag!==5&&O.tag!==6&&O.tag!==18;){if(O.flags&2||O.child===null||O.tag===4)continue e;O.child.return=O,O=O.child}if(!(O.flags&2))return O.stateNode}}function Ru(O,x,D){var M=O.tag;if(M===5||M===6)O=O.stateNode,x?D.nodeType===8?D.parentNode.insertBefore(O,x):D.insertBefore(O,x):(D.nodeType===8?(x=D.parentNode,x.insertBefore(O,D)):(x=D,x.appendChild(O)),D=D._reactRootContainer,D!=null||x.onclick!==null||(x.onclick=Ta));else if(M!==4&&(O=O.child,O!==null))for(Ru(O,x,D),O=O.sibling;O!==null;)Ru(O,x,D),O=O.sibling}function Du(O,x,D){var M=O.tag;if(M===5||M===6)O=O.stateNode,x?D.insertBefore(O,x):D.appendChild(O);else if(M!==4&&(O=O.child,O!==null))for(Du(O,x,D),O=O.sibling;O!==null;)Du(O,x,D),O=O.sibling}var Wt=null,Un=!1;function Hr(O,x,D){for(D=D.child;D!==null;)pf(O,x,D),D=D.sibling}function pf(O,x,D){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(ra,D)}catch{}switch(D.tag){case 5:tn||go(D,x);case 6:var M=Wt,B=Un;Wt=null,Hr(O,x,D),Wt=M,Un=B,Wt!==null&&(Un?(O=Wt,D=D.stateNode,O.nodeType===8?O.parentNode.removeChild(D):O.removeChild(D)):Wt.removeChild(D.stateNode));break;case 18:Wt!==null&&(Un?(O=Wt,D=D.stateNode,O.nodeType===8?jl(O.parentNode,D):O.nodeType===1&&jl(O,D),Ts(O)):jl(Wt,D.stateNode));break;case 4:M=Wt,B=Un,Wt=D.stateNode.containerInfo,Un=!0,Hr(O,x,D),Wt=M,Un=B;break;case 0:case 11:case 14:case 15:if(!tn&&(M=D.updateQueue,M!==null&&(M=M.lastEffect,M!==null))){B=M=M.next;do{var U=B,se=U.destroy;U=U.tag,se!==void 0&&((U&2)!==0||(U&4)!==0)&&ku(D,x,se),B=B.next}while(B!==M)}Hr(O,x,D);break;case 1:if(!tn&&(go(D,x),M=D.stateNode,typeof M.componentWillUnmount=="function"))try{M.props=D.memoizedProps,M.state=D.memoizedState,M.componentWillUnmount()}catch(Oe){Dt(D,x,Oe)}Hr(O,x,D);break;case 21:Hr(O,x,D);break;case 22:D.mode&1?(tn=(M=tn)||D.memoizedState!==null,Hr(O,x,D),tn=M):Hr(O,x,D);break;default:Hr(O,x,D)}}function mf(O){var x=O.updateQueue;if(x!==null){O.updateQueue=null;var D=O.stateNode;D===null&&(D=O.stateNode=new hp),x.forEach(function(M){var B=Ep.bind(null,O,M);D.has(M)||(D.add(M),M.then(B,B))})}}function Gn(O,x){var D=x.deletions;if(D!==null)for(var M=0;M<D.length;M++){var B=D[M];try{var U=O,se=x,Oe=se;e:for(;Oe!==null;){switch(Oe.tag){case 5:Wt=Oe.stateNode,Un=!1;break e;case 3:Wt=Oe.stateNode.containerInfo,Un=!0;break e;case 4:Wt=Oe.stateNode.containerInfo,Un=!0;break e}Oe=Oe.return}if(Wt===null)throw Error(s(160));pf(U,se,B),Wt=null,Un=!1;var ve=B.alternate;ve!==null&&(ve.return=null),B.return=null}catch(Me){Dt(B,x,Me)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)gf(x,O),x=x.sibling}function gf(O,x){var D=O.alternate,M=O.flags;switch(O.tag){case 0:case 11:case 14:case 15:if(Gn(x,O),er(O),M&4){try{Hs(3,O,O.return),Ga(3,O)}catch(nt){Dt(O,O.return,nt)}try{Hs(5,O,O.return)}catch(nt){Dt(O,O.return,nt)}}break;case 1:Gn(x,O),er(O),M&512&&D!==null&&go(D,D.return);break;case 5:if(Gn(x,O),er(O),M&512&&D!==null&&go(D,D.return),O.flags&32){var B=O.stateNode;try{ae(B,"")}catch(nt){Dt(O,O.return,nt)}}if(M&4&&(B=O.stateNode,B!=null)){var U=O.memoizedProps,se=D!==null?D.memoizedProps:U,Oe=O.type,ve=O.updateQueue;if(O.updateQueue=null,ve!==null)try{Oe==="input"&&U.type==="radio"&&U.name!=null&&Ue(B,U),we(Oe,se);var Me=we(Oe,U);for(se=0;se<ve.length;se+=2){var Qe=ve[se],je=ve[se+1];Qe==="style"?_e(B,je):Qe==="dangerouslySetInnerHTML"?pt(B,je):Qe==="children"?ae(B,je):R(B,Qe,je,Me)}switch(Oe){case"input":Be(B,U);break;case"textarea":at(B,U);break;case"select":var Fe=B._wrapperState.wasMultiple;B._wrapperState.wasMultiple=!!U.multiple;var Xe=U.value;Xe!=null?Ye(B,!!U.multiple,Xe,!1):Fe!==!!U.multiple&&(U.defaultValue!=null?Ye(B,!!U.multiple,U.defaultValue,!0):Ye(B,!!U.multiple,U.multiple?[]:"",!1))}B[Ds]=U}catch(nt){Dt(O,O.return,nt)}}break;case 6:if(Gn(x,O),er(O),M&4){if(O.stateNode===null)throw Error(s(162));B=O.stateNode,U=O.memoizedProps;try{B.nodeValue=U}catch(nt){Dt(O,O.return,nt)}}break;case 3:if(Gn(x,O),er(O),M&4&&D!==null&&D.memoizedState.isDehydrated)try{Ts(x.containerInfo)}catch(nt){Dt(O,O.return,nt)}break;case 4:Gn(x,O),er(O);break;case 13:Gn(x,O),er(O),B=O.child,B.flags&8192&&(U=B.memoizedState!==null,B.stateNode.isHidden=U,!U||B.alternate!==null&&B.alternate.memoizedState!==null||($u=Nt())),M&4&&mf(O);break;case 22:if(Qe=D!==null&&D.memoizedState!==null,O.mode&1?(tn=(Me=tn)||Qe,Gn(x,O),tn=Me):Gn(x,O),er(O),M&8192){if(Me=O.memoizedState!==null,(O.stateNode.isHidden=Me)&&!Qe&&(O.mode&1)!==0)for(Je=O,Qe=O.child;Qe!==null;){for(je=Je=Qe;Je!==null;){switch(Fe=Je,Xe=Fe.child,Fe.tag){case 0:case 11:case 14:case 15:Hs(4,Fe,Fe.return);break;case 1:go(Fe,Fe.return);var tt=Fe.stateNode;if(typeof tt.componentWillUnmount=="function"){M=Fe,D=Fe.return;try{x=M,tt.props=x.memoizedProps,tt.state=x.memoizedState,tt.componentWillUnmount()}catch(nt){Dt(M,D,nt)}}break;case 5:go(Fe,Fe.return);break;case 22:if(Fe.memoizedState!==null){Af(je);continue}}Xe!==null?(Xe.return=Fe,Je=Xe):Af(je)}Qe=Qe.sibling}e:for(Qe=null,je=O;;){if(je.tag===5){if(Qe===null){Qe=je;try{B=je.stateNode,Me?(U=B.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none"):(Oe=je.stateNode,ve=je.memoizedProps.style,se=ve!=null&&ve.hasOwnProperty("display")?ve.display:null,Oe.style.display=me("display",se))}catch(nt){Dt(O,O.return,nt)}}}else if(je.tag===6){if(Qe===null)try{je.stateNode.nodeValue=Me?"":je.memoizedProps}catch(nt){Dt(O,O.return,nt)}}else if((je.tag!==22&&je.tag!==23||je.memoizedState===null||je===O)&&je.child!==null){je.child.return=je,je=je.child;continue}if(je===O)break e;for(;je.sibling===null;){if(je.return===null||je.return===O)break e;Qe===je&&(Qe=null),je=je.return}Qe===je&&(Qe=null),je.sibling.return=je.return,je=je.sibling}}break;case 19:Gn(x,O),er(O),M&4&&mf(O);break;case 21:break;default:Gn(x,O),er(O)}}function er(O){var x=O.flags;if(x&2){try{e:{for(var D=O.return;D!==null;){if(ff(D)){var M=D;break e}D=D.return}throw Error(s(160))}switch(M.tag){case 5:var B=M.stateNode;M.flags&32&&(ae(B,""),M.flags&=-33);var U=hf(O);Du(O,U,B);break;case 3:case 4:var se=M.stateNode.containerInfo,Oe=hf(O);Ru(O,Oe,se);break;default:throw Error(s(161))}}catch(ve){Dt(O,O.return,ve)}O.flags&=-3}x&4096&&(O.flags&=-4097)}function gp(O,x,D){Je=O,bf(O)}function bf(O,x,D){for(var M=(O.mode&1)!==0;Je!==null;){var B=Je,U=B.child;if(B.tag===22&&M){var se=B.memoizedState!==null||Ua;if(!se){var Oe=B.alternate,ve=Oe!==null&&Oe.memoizedState!==null||tn;Oe=Ua;var Me=tn;if(Ua=se,(tn=ve)&&!Me)for(Je=B;Je!==null;)se=Je,ve=se.child,se.tag===22&&se.memoizedState!==null?Of(B):ve!==null?(ve.return=se,Je=ve):Of(B);for(;U!==null;)Je=U,bf(U),U=U.sibling;Je=B,Ua=Oe,tn=Me}yf(O)}else(B.subtreeFlags&8772)!==0&&U!==null?(U.return=B,Je=U):yf(O)}}function yf(O){for(;Je!==null;){var x=Je;if((x.flags&8772)!==0){var D=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:tn||Ga(5,x);break;case 1:var M=x.stateNode;if(x.flags&4&&!tn)if(D===null)M.componentDidMount();else{var B=x.elementType===x.type?D.memoizedProps:Hn(x.type,D.memoizedProps);M.componentDidUpdate(B,D.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var U=x.updateQueue;U!==null&&bd(x,U,M);break;case 3:var se=x.updateQueue;if(se!==null){if(D=null,x.child!==null)switch(x.child.tag){case 5:D=x.child.stateNode;break;case 1:D=x.child.stateNode}bd(x,se,D)}break;case 5:var Oe=x.stateNode;if(D===null&&x.flags&4){D=Oe;var ve=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":ve.autoFocus&&D.focus();break;case"img":ve.src&&(D.src=ve.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var Me=x.alternate;if(Me!==null){var Qe=Me.memoizedState;if(Qe!==null){var je=Qe.dehydrated;je!==null&&Ts(je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}tn||x.flags&512&&Iu(x)}catch(Fe){Dt(x,x.return,Fe)}}if(x===O){Je=null;break}if(D=x.sibling,D!==null){D.return=x.return,Je=D;break}Je=x.return}}function Af(O){for(;Je!==null;){var x=Je;if(x===O){Je=null;break}var D=x.sibling;if(D!==null){D.return=x.return,Je=D;break}Je=x.return}}function Of(O){for(;Je!==null;){var x=Je;try{switch(x.tag){case 0:case 11:case 15:var D=x.return;try{Ga(4,x)}catch(ve){Dt(x,D,ve)}break;case 1:var M=x.stateNode;if(typeof M.componentDidMount=="function"){var B=x.return;try{M.componentDidMount()}catch(ve){Dt(x,B,ve)}}var U=x.return;try{Iu(x)}catch(ve){Dt(x,U,ve)}break;case 5:var se=x.return;try{Iu(x)}catch(ve){Dt(x,se,ve)}}}catch(ve){Dt(x,x.return,ve)}if(x===O){Je=null;break}var Oe=x.sibling;if(Oe!==null){Oe.return=x.return,Je=Oe;break}Je=x.return}}var bp=Math.ceil,za=k.ReactCurrentDispatcher,Pu=k.ReactCurrentOwner,Nn=k.ReactCurrentBatchConfig,At=0,Ht=null,Bt=null,Yt=0,_n=0,bo=Br(0),Qt=0,Us=null,Si=0,Va=0,Lu=0,Gs=null,fn=null,$u=0,yo=1/0,mr=null,Wa=!1,Bu=null,Ur=null,Ya=!1,Gr=null,Ka=0,zs=0,Fu=null,Za=-1,Xa=0;function sn(){return(At&6)!==0?Nt():Za!==-1?Za:Za=Nt()}function zr(O){return(O.mode&1)===0?1:(At&2)!==0&&Yt!==0?Yt&-Yt:Zh.transition!==null?(Xa===0&&(Xa=lc()),Xa):(O=Tt,O!==0||(O=window.event,O=O===void 0?16:bc(O.type)),O)}function zn(O,x,D,M){if(50<zs)throw zs=0,Fu=null,Error(s(185));gs(O,D,M),((At&2)===0||O!==Ht)&&(O===Ht&&((At&2)===0&&(Va|=D),Qt===4&&Vr(O,Yt)),hn(O,M),D===1&&At===0&&(x.mode&1)===0&&(yo=Nt()+500,va&&qr()))}function hn(O,x){var D=O.callbackNode;Zf(O,x);var M=sa(O,O===Ht?Yt:0);if(M===0)D!==null&&ps(D),O.callbackNode=null,O.callbackPriority=0;else if(x=M&-M,O.callbackPriority!==x){if(D!=null&&ps(D),x===1)O.tag===0?Kh(xf.bind(null,O)):rd(xf.bind(null,O)),zh(function(){(At&6)===0&&qr()}),D=null;else{switch(uc(M)){case 1:D=dl;break;case 4:D=rc;break;case 16:D=na;break;case 536870912:D=oc;break;default:D=na}D=If(D,Tf.bind(null,O))}O.callbackPriority=x,O.callbackNode=D}}function Tf(O,x){if(Za=-1,Xa=0,(At&6)!==0)throw Error(s(327));var D=O.callbackNode;if(Ao()&&O.callbackNode!==D)return null;var M=sa(O,O===Ht?Yt:0);if(M===0)return null;if((M&30)!==0||(M&O.expiredLanes)!==0||x)x=Ja(O,M);else{x=M;var B=At;At|=2;var U=Ef();(Ht!==O||Yt!==x)&&(mr=null,yo=Nt()+500,vi(O,x));do try{Op();break}catch(Oe){Sf(O,Oe)}while(!0);Xl(),za.current=U,At=B,Bt!==null?x=0:(Ht=null,Yt=0,x=Qt)}if(x!==0){if(x===2&&(B=fl(O),B!==0&&(M=B,x=qu(O,B))),x===1)throw D=Us,vi(O,0),Vr(O,M),hn(O,Nt()),D;if(x===6)Vr(O,M);else{if(B=O.current.alternate,(M&30)===0&&!yp(B)&&(x=Ja(O,M),x===2&&(U=fl(O),U!==0&&(M=U,x=qu(O,U))),x===1))throw D=Us,vi(O,0),Vr(O,M),hn(O,Nt()),D;switch(O.finishedWork=B,O.finishedLanes=M,x){case 0:case 1:throw Error(s(345));case 2:_i(O,fn,mr);break;case 3:if(Vr(O,M),(M&130023424)===M&&(x=$u+500-Nt(),10<x)){if(sa(O,0)!==0)break;if(B=O.suspendedLanes,(B&M)!==M){sn(),O.pingedLanes|=O.suspendedLanes&B;break}O.timeoutHandle=Ql(_i.bind(null,O,fn,mr),x);break}_i(O,fn,mr);break;case 4:if(Vr(O,M),(M&4194240)===M)break;for(x=O.eventTimes,B=-1;0<M;){var se=31-qn(M);U=1<<se,se=x[se],se>B&&(B=se),M&=~U}if(M=B,M=Nt()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*bp(M/1960))-M,10<M){O.timeoutHandle=Ql(_i.bind(null,O,fn,mr),M);break}_i(O,fn,mr);break;case 5:_i(O,fn,mr);break;default:throw Error(s(329))}}}return hn(O,Nt()),O.callbackNode===D?Tf.bind(null,O):null}function qu(O,x){var D=Gs;return O.current.memoizedState.isDehydrated&&(vi(O,x).flags|=256),O=Ja(O,x),O!==2&&(x=fn,fn=D,x!==null&&Qu(x)),O}function Qu(O){fn===null?fn=O:fn.push.apply(fn,O)}function yp(O){for(var x=O;;){if(x.flags&16384){var D=x.updateQueue;if(D!==null&&(D=D.stores,D!==null))for(var M=0;M<D.length;M++){var B=D[M],U=B.getSnapshot;B=B.value;try{if(!Qn(U(),B))return!1}catch{return!1}}}if(D=x.child,x.subtreeFlags&16384&&D!==null)D.return=x,x=D;else{if(x===O)break;for(;x.sibling===null;){if(x.return===null||x.return===O)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Vr(O,x){for(x&=~Lu,x&=~Va,O.suspendedLanes|=x,O.pingedLanes&=~x,O=O.expirationTimes;0<x;){var D=31-qn(x),M=1<<D;O[D]=-1,x&=~M}}function xf(O){if((At&6)!==0)throw Error(s(327));Ao();var x=sa(O,0);if((x&1)===0)return hn(O,Nt()),null;var D=Ja(O,x);if(O.tag!==0&&D===2){var M=fl(O);M!==0&&(x=M,D=qu(O,M))}if(D===1)throw D=Us,vi(O,0),Vr(O,x),hn(O,Nt()),D;if(D===6)throw Error(s(345));return O.finishedWork=O.current.alternate,O.finishedLanes=x,_i(O,fn,mr),hn(O,Nt()),null}function ju(O,x){var D=At;At|=1;try{return O(x)}finally{At=D,At===0&&(yo=Nt()+500,va&&qr())}}function Ei(O){Gr!==null&&Gr.tag===0&&(At&6)===0&&Ao();var x=At;At|=1;var D=Nn.transition,M=Tt;try{if(Nn.transition=null,Tt=1,O)return O()}finally{Tt=M,Nn.transition=D,At=x,(At&6)===0&&qr()}}function Hu(){_n=bo.current,_t(bo)}function vi(O,x){O.finishedWork=null,O.finishedLanes=0;var D=O.timeoutHandle;if(D!==-1&&(O.timeoutHandle=-1,Gh(D)),Bt!==null)for(D=Bt.return;D!==null;){var M=D;switch(Vl(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Sa();break;case 3:po(),_t(ln),_t(Zt),lu();break;case 5:su(M);break;case 4:po();break;case 13:_t(kt);break;case 19:_t(kt);break;case 10:Jl(M.type._context);break;case 22:case 23:Hu()}D=D.return}if(Ht=O,Bt=O=Wr(O.current,null),Yt=_n=x,Qt=0,Us=null,Lu=Va=Si=0,fn=Gs=null,Ai!==null){for(x=0;x<Ai.length;x++)if(D=Ai[x],M=D.interleaved,M!==null){D.interleaved=null;var B=M.next,U=D.pending;if(U!==null){var se=U.next;U.next=B,M.next=se}D.pending=M}Ai=null}return O}function Sf(O,x){do{var D=Bt;try{if(Xl(),La.current=qa,$a){for(var M=It.memoizedState;M!==null;){var B=M.queue;B!==null&&(B.pending=null),M=M.next}$a=!1}if(Ti=0,jt=qt=It=null,Bs=!1,Fs=0,Pu.current=null,D===null||D.return===null){Qt=1,Us=x,Bt=null;break}e:{var U=O,se=D.return,Oe=D,ve=x;if(x=Yt,Oe.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Me=ve,Qe=Oe,je=Qe.tag;if((Qe.mode&1)===0&&(je===0||je===11||je===15)){var Fe=Qe.alternate;Fe?(Qe.updateQueue=Fe.updateQueue,Qe.memoizedState=Fe.memoizedState,Qe.lanes=Fe.lanes):(Qe.updateQueue=null,Qe.memoizedState=null)}var Xe=zd(se);if(Xe!==null){Xe.flags&=-257,Vd(Xe,se,Oe,U,x),Xe.mode&1&&Gd(U,Me,x),x=Xe,ve=Me;var tt=x.updateQueue;if(tt===null){var nt=new Set;nt.add(ve),x.updateQueue=nt}else tt.add(ve);break e}else{if((x&1)===0){Gd(U,Me,x),Uu();break e}ve=Error(s(426))}}else if(wt&&Oe.mode&1){var Pt=zd(se);if(Pt!==null){(Pt.flags&65536)===0&&(Pt.flags|=256),Vd(Pt,se,Oe,U,x),Kl(mo(ve,Oe));break e}}U=ve=mo(ve,Oe),Qt!==4&&(Qt=2),Gs===null?Gs=[U]:Gs.push(U),U=se;do{switch(U.tag){case 3:U.flags|=65536,x&=-x,U.lanes|=x;var Ie=Hd(U,ve,x);gd(U,Ie);break e;case 1:Oe=ve;var Ce=U.type,Ne=U.stateNode;if((U.flags&128)===0&&(typeof Ce.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(Ur===null||!Ur.has(Ne)))){U.flags|=65536,x&=-x,U.lanes|=x;var ze=Ud(U,Oe,x);gd(U,ze);break e}}U=U.return}while(U!==null)}_f(D)}catch(rt){x=rt,Bt===D&&D!==null&&(Bt=D=D.return);continue}break}while(!0)}function Ef(){var O=za.current;return za.current=qa,O===null?qa:O}function Uu(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),Ht===null||(Si&268435455)===0&&(Va&268435455)===0||Vr(Ht,Yt)}function Ja(O,x){var D=At;At|=2;var M=Ef();(Ht!==O||Yt!==x)&&(mr=null,vi(O,x));do try{Ap();break}catch(B){Sf(O,B)}while(!0);if(Xl(),At=D,za.current=M,Bt!==null)throw Error(s(261));return Ht=null,Yt=0,Qt}function Ap(){for(;Bt!==null;)vf(Bt)}function Op(){for(;Bt!==null&&!jf();)vf(Bt)}function vf(O){var x=kf(O.alternate,O,_n);O.memoizedProps=O.pendingProps,x===null?_f(O):Bt=x,Pu.current=null}function _f(O){var x=O;do{var D=x.alternate;if(O=x.return,(x.flags&32768)===0){if(D=dp(D,x,_n),D!==null){Bt=D;return}}else{if(D=fp(D,x),D!==null){D.flags&=32767,Bt=D;return}if(O!==null)O.flags|=32768,O.subtreeFlags=0,O.deletions=null;else{Qt=6,Bt=null;return}}if(x=x.sibling,x!==null){Bt=x;return}Bt=x=O}while(x!==null);Qt===0&&(Qt=5)}function _i(O,x,D){var M=Tt,B=Nn.transition;try{Nn.transition=null,Tt=1,Tp(O,x,D,M)}finally{Nn.transition=B,Tt=M}return null}function Tp(O,x,D,M){do Ao();while(Gr!==null);if((At&6)!==0)throw Error(s(327));D=O.finishedWork;var B=O.finishedLanes;if(D===null)return null;if(O.finishedWork=null,O.finishedLanes=0,D===O.current)throw Error(s(177));O.callbackNode=null,O.callbackPriority=0;var U=D.lanes|D.childLanes;if(Xf(O,U),O===Ht&&(Bt=Ht=null,Yt=0),(D.subtreeFlags&2064)===0&&(D.flags&2064)===0||Ya||(Ya=!0,If(na,function(){return Ao(),null})),U=(D.flags&15990)!==0,(D.subtreeFlags&15990)!==0||U){U=Nn.transition,Nn.transition=null;var se=Tt;Tt=1;var Oe=At;At|=4,Pu.current=null,pp(O,D),gf(D,O),Bh(Fl),ua=!!Bl,Fl=Bl=null,O.current=D,gp(D),Hf(),At=Oe,Tt=se,Nn.transition=U}else O.current=D;if(Ya&&(Ya=!1,Gr=O,Ka=B),U=O.pendingLanes,U===0&&(Ur=null),zf(D.stateNode),hn(O,Nt()),x!==null)for(M=O.onRecoverableError,D=0;D<x.length;D++)B=x[D],M(B.value,{componentStack:B.stack,digest:B.digest});if(Wa)throw Wa=!1,O=Bu,Bu=null,O;return(Ka&1)!==0&&O.tag!==0&&Ao(),U=O.pendingLanes,(U&1)!==0?O===Fu?zs++:(zs=0,Fu=O):zs=0,qr(),null}function Ao(){if(Gr!==null){var O=uc(Ka),x=Nn.transition,D=Tt;try{if(Nn.transition=null,Tt=16>O?16:O,Gr===null)var M=!1;else{if(O=Gr,Gr=null,Ka=0,(At&6)!==0)throw Error(s(331));var B=At;for(At|=4,Je=O.current;Je!==null;){var U=Je,se=U.child;if((Je.flags&16)!==0){var Oe=U.deletions;if(Oe!==null){for(var ve=0;ve<Oe.length;ve++){var Me=Oe[ve];for(Je=Me;Je!==null;){var Qe=Je;switch(Qe.tag){case 0:case 11:case 15:Hs(8,Qe,U)}var je=Qe.child;if(je!==null)je.return=Qe,Je=je;else for(;Je!==null;){Qe=Je;var Fe=Qe.sibling,Xe=Qe.return;if(df(Qe),Qe===Me){Je=null;break}if(Fe!==null){Fe.return=Xe,Je=Fe;break}Je=Xe}}}var tt=U.alternate;if(tt!==null){var nt=tt.child;if(nt!==null){tt.child=null;do{var Pt=nt.sibling;nt.sibling=null,nt=Pt}while(nt!==null)}}Je=U}}if((U.subtreeFlags&2064)!==0&&se!==null)se.return=U,Je=se;else e:for(;Je!==null;){if(U=Je,(U.flags&2048)!==0)switch(U.tag){case 0:case 11:case 15:Hs(9,U,U.return)}var Ie=U.sibling;if(Ie!==null){Ie.return=U.return,Je=Ie;break e}Je=U.return}}var Ce=O.current;for(Je=Ce;Je!==null;){se=Je;var Ne=se.child;if((se.subtreeFlags&2064)!==0&&Ne!==null)Ne.return=se,Je=Ne;else e:for(se=Ce;Je!==null;){if(Oe=Je,(Oe.flags&2048)!==0)try{switch(Oe.tag){case 0:case 11:case 15:Ga(9,Oe)}}catch(rt){Dt(Oe,Oe.return,rt)}if(Oe===se){Je=null;break e}var ze=Oe.sibling;if(ze!==null){ze.return=Oe.return,Je=ze;break e}Je=Oe.return}}if(At=B,qr(),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(ra,O)}catch{}M=!0}return M}finally{Tt=D,Nn.transition=x}}return!1}function Cf(O,x,D){x=mo(D,x),x=Hd(O,x,1),O=jr(O,x,1),x=sn(),O!==null&&(gs(O,1,x),hn(O,x))}function Dt(O,x,D){if(O.tag===3)Cf(O,O,D);else for(;x!==null;){if(x.tag===3){Cf(x,O,D);break}else if(x.tag===1){var M=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Ur===null||!Ur.has(M))){O=mo(D,O),O=Ud(x,O,1),x=jr(x,O,1),O=sn(),x!==null&&(gs(x,1,O),hn(x,O));break}}x=x.return}}function xp(O,x,D){var M=O.pingCache;M!==null&&M.delete(x),x=sn(),O.pingedLanes|=O.suspendedLanes&D,Ht===O&&(Yt&D)===D&&(Qt===4||Qt===3&&(Yt&130023424)===Yt&&500>Nt()-$u?vi(O,0):Lu|=D),hn(O,x)}function wf(O,x){x===0&&((O.mode&1)===0?x=1:(x=oa,oa<<=1,(oa&130023424)===0&&(oa=4194304)));var D=sn();O=cr(O,x),O!==null&&(gs(O,x,D),hn(O,D))}function Sp(O){var x=O.memoizedState,D=0;x!==null&&(D=x.retryLane),wf(O,D)}function Ep(O,x){var D=0;switch(O.tag){case 13:var M=O.stateNode,B=O.memoizedState;B!==null&&(D=B.retryLane);break;case 19:M=O.stateNode;break;default:throw Error(s(314))}M!==null&&M.delete(x),wf(O,D)}var kf;kf=function(O,x,D){if(O!==null)if(O.memoizedProps!==x.pendingProps||ln.current)dn=!0;else{if((O.lanes&D)===0&&(x.flags&128)===0)return dn=!1,cp(O,x,D);dn=(O.flags&131072)!==0}else dn=!1,wt&&(x.flags&1048576)!==0&&od(x,wa,x.index);switch(x.lanes=0,x.tag){case 2:var M=x.type;Ha(O,x),O=x.pendingProps;var B=so(x,Zt.current);ho(x,D),B=du(null,x,M,O,B,D);var U=fu();return x.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,un(M)?(U=!0,Ea(x)):U=!1,x.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,iu(x),B.updater=Qa,x.stateNode=B,B._reactInternals=x,Au(x,M,O,D),x=Su(null,x,M,!0,U,D)):(x.tag=0,wt&&U&&zl(x),rn(null,x,B,D),x=x.child),x;case 16:M=x.elementType;e:{switch(Ha(O,x),O=x.pendingProps,B=M._init,M=B(M._payload),x.type=M,B=x.tag=_p(M),O=Hn(M,O),B){case 0:x=xu(null,x,M,O,D);break e;case 1:x=Jd(null,x,M,O,D);break e;case 11:x=Wd(null,x,M,O,D);break e;case 14:x=Yd(null,x,M,Hn(M.type,O),D);break e}throw Error(s(306,M,""))}return x;case 0:return M=x.type,B=x.pendingProps,B=x.elementType===M?B:Hn(M,B),xu(O,x,M,B,D);case 1:return M=x.type,B=x.pendingProps,B=x.elementType===M?B:Hn(M,B),Jd(O,x,M,B,D);case 3:e:{if(ef(x),O===null)throw Error(s(387));M=x.pendingProps,U=x.memoizedState,B=U.element,md(O,x),Pa(x,M,null,D);var se=x.memoizedState;if(M=se.element,U.isDehydrated)if(U={element:M,isDehydrated:!1,cache:se.cache,pendingSuspenseBoundaries:se.pendingSuspenseBoundaries,transitions:se.transitions},x.updateQueue.baseState=U,x.memoizedState=U,x.flags&256){B=mo(Error(s(423)),x),x=tf(O,x,M,D,B);break e}else if(M!==B){B=mo(Error(s(424)),x),x=tf(O,x,M,D,B);break e}else for(vn=$r(x.stateNode.containerInfo.firstChild),En=x,wt=!0,jn=null,D=hd(x,null,M,D),x.child=D;D;)D.flags=D.flags&-3|4096,D=D.sibling;else{if(uo(),M===B){x=fr(O,x,D);break e}rn(O,x,M,D)}x=x.child}return x;case 5:return yd(x),O===null&&Yl(x),M=x.type,B=x.pendingProps,U=O!==null?O.memoizedProps:null,se=B.children,ql(M,B)?se=null:U!==null&&ql(M,U)&&(x.flags|=32),Xd(O,x),rn(O,x,se,D),x.child;case 6:return O===null&&Yl(x),null;case 13:return nf(O,x,D);case 4:return ou(x,x.stateNode.containerInfo),M=x.pendingProps,O===null?x.child=co(x,null,M,D):rn(O,x,M,D),x.child;case 11:return M=x.type,B=x.pendingProps,B=x.elementType===M?B:Hn(M,B),Wd(O,x,M,B,D);case 7:return rn(O,x,x.pendingProps,D),x.child;case 8:return rn(O,x,x.pendingProps.children,D),x.child;case 12:return rn(O,x,x.pendingProps.children,D),x.child;case 10:e:{if(M=x.type._context,B=x.pendingProps,U=x.memoizedProps,se=B.value,St(Ra,M._currentValue),M._currentValue=se,U!==null)if(Qn(U.value,se)){if(U.children===B.children&&!ln.current){x=fr(O,x,D);break e}}else for(U=x.child,U!==null&&(U.return=x);U!==null;){var Oe=U.dependencies;if(Oe!==null){se=U.child;for(var ve=Oe.firstContext;ve!==null;){if(ve.context===M){if(U.tag===1){ve=dr(-1,D&-D),ve.tag=2;var Me=U.updateQueue;if(Me!==null){Me=Me.shared;var Qe=Me.pending;Qe===null?ve.next=ve:(ve.next=Qe.next,Qe.next=ve),Me.pending=ve}}U.lanes|=D,ve=U.alternate,ve!==null&&(ve.lanes|=D),eu(U.return,D,x),Oe.lanes|=D;break}ve=ve.next}}else if(U.tag===10)se=U.type===x.type?null:U.child;else if(U.tag===18){if(se=U.return,se===null)throw Error(s(341));se.lanes|=D,Oe=se.alternate,Oe!==null&&(Oe.lanes|=D),eu(se,D,x),se=U.sibling}else se=U.child;if(se!==null)se.return=U;else for(se=U;se!==null;){if(se===x){se=null;break}if(U=se.sibling,U!==null){U.return=se.return,se=U;break}se=se.return}U=se}rn(O,x,B.children,D),x=x.child}return x;case 9:return B=x.type,M=x.pendingProps.children,ho(x,D),B=Rn(B),M=M(B),x.flags|=1,rn(O,x,M,D),x.child;case 14:return M=x.type,B=Hn(M,x.pendingProps),B=Hn(M.type,B),Yd(O,x,M,B,D);case 15:return Kd(O,x,x.type,x.pendingProps,D);case 17:return M=x.type,B=x.pendingProps,B=x.elementType===M?B:Hn(M,B),Ha(O,x),x.tag=1,un(M)?(O=!0,Ea(x)):O=!1,ho(x,D),Qd(x,M,B),Au(x,M,B,D),Su(null,x,M,!0,O,D);case 19:return of(O,x,D);case 22:return Zd(O,x,D)}throw Error(s(156,x.tag))};function If(O,x){return ta(O,x)}function vp(O,x,D,M){this.tag=O,this.key=D,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(O,x,D,M){return new vp(O,x,D,M)}function Gu(O){return O=O.prototype,!(!O||!O.isReactComponent)}function _p(O){if(typeof O=="function")return Gu(O)?1:0;if(O!=null){if(O=O.$$typeof,O===V)return 11;if(O===Y)return 14}return 2}function Wr(O,x){var D=O.alternate;return D===null?(D=Pn(O.tag,x,O.key,O.mode),D.elementType=O.elementType,D.type=O.type,D.stateNode=O.stateNode,D.alternate=O,O.alternate=D):(D.pendingProps=x,D.type=O.type,D.flags=0,D.subtreeFlags=0,D.deletions=null),D.flags=O.flags&14680064,D.childLanes=O.childLanes,D.lanes=O.lanes,D.child=O.child,D.memoizedProps=O.memoizedProps,D.memoizedState=O.memoizedState,D.updateQueue=O.updateQueue,x=O.dependencies,D.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},D.sibling=O.sibling,D.index=O.index,D.ref=O.ref,D}function tl(O,x,D,M,B,U){var se=2;if(M=O,typeof O=="function")Gu(O)&&(se=1);else if(typeof O=="string")se=5;else e:switch(O){case N:return Ci(D.children,B,U,x);case L:se=8,B|=8;break;case Q:return O=Pn(12,D,x,B|2),O.elementType=Q,O.lanes=U,O;case J:return O=Pn(13,D,x,B),O.elementType=J,O.lanes=U,O;case z:return O=Pn(19,D,x,B),O.elementType=z,O.lanes=U,O;case de:return nl(D,B,U,x);default:if(typeof O=="object"&&O!==null)switch(O.$$typeof){case j:se=10;break e;case F:se=9;break e;case V:se=11;break e;case Y:se=14;break e;case fe:se=16,M=null;break e}throw Error(s(130,O==null?O:typeof O,""))}return x=Pn(se,D,x,B),x.elementType=O,x.type=M,x.lanes=U,x}function Ci(O,x,D,M){return O=Pn(7,O,M,x),O.lanes=D,O}function nl(O,x,D,M){return O=Pn(22,O,M,x),O.elementType=de,O.lanes=D,O.stateNode={isHidden:!1},O}function zu(O,x,D){return O=Pn(6,O,null,x),O.lanes=D,O}function Vu(O,x,D){return x=Pn(4,O.children!==null?O.children:[],O.key,x),x.lanes=D,x.stateNode={containerInfo:O.containerInfo,pendingChildren:null,implementation:O.implementation},x}function Cp(O,x,D,M,B){this.tag=x,this.containerInfo=O,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hl(0),this.expirationTimes=hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hl(0),this.identifierPrefix=M,this.onRecoverableError=B,this.mutableSourceEagerHydrationData=null}function Wu(O,x,D,M,B,U,se,Oe,ve){return O=new Cp(O,x,D,Oe,ve),x===1?(x=1,U===!0&&(x|=8)):x=0,U=Pn(3,null,null,x),O.current=U,U.stateNode=O,U.memoizedState={element:M,isDehydrated:D,cache:null,transitions:null,pendingSuspenseBoundaries:null},iu(U),O}function kp(O,x,D){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:M==null?null:""+M,children:O,containerInfo:x,implementation:D}}function Rf(O){if(!O)return Fr;O=O._reactInternals;e:{if(Fn(O)!==O||O.tag!==1)throw Error(s(170));var x=O;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(un(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(s(171))}if(O.tag===1){var D=O.type;if(un(D))return td(O,D,x)}return x}function Df(O,x,D,M,B,U,se,Oe,ve){return O=Wu(D,M,!0,O,B,U,se,Oe,ve),O.context=Rf(null),D=O.current,M=sn(),B=zr(D),U=dr(M,B),U.callback=x??null,jr(D,U,B),O.current.lanes=B,gs(O,B,M),hn(O,M),O}function rl(O,x,D,M){var B=x.current,U=sn(),se=zr(B);return D=Rf(D),x.context===null?x.context=D:x.pendingContext=D,x=dr(U,se),x.payload={element:O},M=M===void 0?null:M,M!==null&&(x.callback=M),O=jr(B,x,se),O!==null&&(zn(O,B,se,U),Na(O,B,se)),se}function il(O){if(O=O.current,!O.child)return null;switch(O.child.tag){case 5:return O.child.stateNode;default:return O.child.stateNode}}function Nf(O,x){if(O=O.memoizedState,O!==null&&O.dehydrated!==null){var D=O.retryLane;O.retryLane=D!==0&&D<x?D:x}}function Yu(O,x){Nf(O,x),(O=O.alternate)&&Nf(O,x)}function Ip(){return null}var Pf=typeof reportError=="function"?reportError:function(O){console.error(O)};function Ku(O){this._internalRoot=O}ol.prototype.render=Ku.prototype.render=function(O){var x=this._internalRoot;if(x===null)throw Error(s(409));rl(O,x,null,null)},ol.prototype.unmount=Ku.prototype.unmount=function(){var O=this._internalRoot;if(O!==null){this._internalRoot=null;var x=O.containerInfo;Ei(function(){rl(null,O,null,null)}),x[sr]=null}};function ol(O){this._internalRoot=O}ol.prototype.unstable_scheduleHydration=function(O){if(O){var x=fc();O={blockedOn:null,target:O,priority:x};for(var D=0;D<Nr.length&&x!==0&&x<Nr[D].priority;D++);Nr.splice(D,0,O),D===0&&mc(O)}};function Zu(O){return!(!O||O.nodeType!==1&&O.nodeType!==9&&O.nodeType!==11)}function sl(O){return!(!O||O.nodeType!==1&&O.nodeType!==9&&O.nodeType!==11&&(O.nodeType!==8||O.nodeValue!==" react-mount-point-unstable "))}function Mf(){}function Rp(O,x,D,M,B){if(B){if(typeof M=="function"){var U=M;M=function(){var Me=il(se);U.call(Me)}}var se=Df(x,M,O,0,null,!1,!1,"",Mf);return O._reactRootContainer=se,O[sr]=se.current,Is(O.nodeType===8?O.parentNode:O),Ei(),se}for(;B=O.lastChild;)O.removeChild(B);if(typeof M=="function"){var Oe=M;M=function(){var Me=il(ve);Oe.call(Me)}}var ve=Wu(O,0,!1,null,null,!1,!1,"",Mf);return O._reactRootContainer=ve,O[sr]=ve.current,Is(O.nodeType===8?O.parentNode:O),Ei(function(){rl(x,ve,D,M)}),ve}function al(O,x,D,M,B){var U=D._reactRootContainer;if(U){var se=U;if(typeof B=="function"){var Oe=B;B=function(){var ve=il(se);Oe.call(ve)}}rl(x,se,O,B)}else se=Rp(D,x,O,B,M);return il(se)}cc=function(O){switch(O.tag){case 3:var x=O.stateNode;if(x.current.memoizedState.isDehydrated){var D=ms(x.pendingLanes);D!==0&&(pl(x,D|1),hn(x,Nt()),(At&6)===0&&(yo=Nt()+500,qr()))}break;case 13:Ei(function(){var M=cr(O,1);if(M!==null){var B=sn();zn(M,O,1,B)}}),Yu(O,1)}},ml=function(O){if(O.tag===13){var x=cr(O,134217728);if(x!==null){var D=sn();zn(x,O,134217728,D)}Yu(O,134217728)}},dc=function(O){if(O.tag===13){var x=zr(O),D=cr(O,x);if(D!==null){var M=sn();zn(D,O,x,M)}Yu(O,x)}},fc=function(){return Tt},hc=function(O,x){var D=Tt;try{return Tt=O,x()}finally{Tt=D}},st=function(O,x,D){switch(x){case"input":if(Be(O,D),x=D.name,D.type==="radio"&&x!=null){for(D=O;D.parentNode;)D=D.parentNode;for(D=D.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<D.length;x++){var M=D[x];if(M!==O&&M.form===O.form){var B=xa(M);if(!B)throw Error(s(90));Te(M),Be(M,B)}}}break;case"textarea":at(O,D);break;case"select":x=D.value,x!=null&&Ye(O,!!D.multiple,x,!1)}},$n=ju,Bn=Ei;var Dp={usingClientEntryPoint:!1,Events:[Ns,io,xa,Mt,On,ju]},Vs={findFiberByHostInstance:mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Np={bundleType:Vs.bundleType,version:Vs.version,rendererPackageName:Vs.rendererPackageName,rendererConfig:Vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(O){return O=ir(O),O===null?null:O.stateNode},findFiberByHostInstance:Vs.findFiberByHostInstance||Ip,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{ra=ul.inject(Np),Kn=ul}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dp,reactDom_production_min.createPortal=function(O,x){var D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zu(x))throw Error(s(200));return kp(O,x,null,D)},reactDom_production_min.createRoot=function(O,x){if(!Zu(O))throw Error(s(299));var D=!1,M="",B=Pf;return x!=null&&(x.unstable_strictMode===!0&&(D=!0),x.identifierPrefix!==void 0&&(M=x.identifierPrefix),x.onRecoverableError!==void 0&&(B=x.onRecoverableError)),x=Wu(O,1,!1,null,null,D,!1,M,B),O[sr]=x.current,Is(O.nodeType===8?O.parentNode:O),new Ku(x)},reactDom_production_min.findDOMNode=function(O){if(O==null)return null;if(O.nodeType===1)return O;var x=O._reactInternals;if(x===void 0)throw typeof O.render=="function"?Error(s(188)):(O=Object.keys(O).join(","),Error(s(268,O)));return O=ir(x),O=O===null?null:O.stateNode,O},reactDom_production_min.flushSync=function(O){return Ei(O)},reactDom_production_min.hydrate=function(O,x,D){if(!sl(x))throw Error(s(200));return al(null,O,x,!0,D)},reactDom_production_min.hydrateRoot=function(O,x,D){if(!Zu(O))throw Error(s(405));var M=D!=null&&D.hydratedSources||null,B=!1,U="",se=Pf;if(D!=null&&(D.unstable_strictMode===!0&&(B=!0),D.identifierPrefix!==void 0&&(U=D.identifierPrefix),D.onRecoverableError!==void 0&&(se=D.onRecoverableError)),x=Df(x,null,O,1,D??null,B,!1,U,se),O[sr]=x.current,Is(O),M)for(O=0;O<M.length;O++)D=M[O],B=D._getVersion,B=B(D._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[D,B]:x.mutableSourceEagerHydrationData.push(D,B);return new ol(x)},reactDom_production_min.render=function(O,x,D){if(!sl(x))throw Error(s(200));return al(null,O,x,!1,D)},reactDom_production_min.unmountComponentAtNode=function(O){if(!sl(O))throw Error(s(40));return O._reactRootContainer?(Ei(function(){al(null,null,O,!1,function(){O._reactRootContainer=null,O[sr]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=ju,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(O,x,D,M){if(!sl(D))throw Error(s(200));if(O==null||O._reactInternals===void 0)throw Error(s(38));return al(O,x,D,!1,M)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var o=requireReactDom();return client.createRoot=o.createRoot,client.hydrateRoot=o.hydrateRoot,client}var clientExports=requireClient(),Lang$2;(function(o){o.Ru="ru",o.En="en"})(Lang$2||(Lang$2={}));let subs$1=[];const config$2={lang:Lang$2.En,fallbackLang:Lang$2.En},configure$1=o=>{Object.assign(config$2,o),subs$1.forEach(e=>{e(config$2)})},subscribeConfigure$1=o=>(subs$1.push(o),()=>{subs$1=subs$1.filter(e=>e!==o)}),getConfig$2=()=>config$2;function r(o){function e(l,u,c,d){var h=u?s+l+o.e+u:s+l,p=h;if(c){var m=" "+p+o.m;for(var g in c)if(c.hasOwnProperty(g)){var y=c[g];y===!0?p+=m+g:y&&(p+=m+g+a+y)}}if(d!==void 0)for(var A=0,T=(d=Array.isArray(d)?d:[d]).length;A<T;A++){var E=d[A];if(E&&typeof E.valueOf()=="string")for(var v=E.valueOf().split(" "),_=0;_<v.length;_++){var w=v[_];w!==h&&(p+=" "+w)}}return p}var s=o.n||"",a=o.v||o.m;return function(l,u){return function(c,d,h){return typeof c=="string"?typeof d=="string"||Array.isArray(d)?e(l,c,void 0,d):e(l,c,d,h):e(l,u,c,d)}}}var n=r({e:"-",m:"_"});const NAMESPACE$1="g-";r({e:"__",m:"_"});const block$5=r({n:NAMESPACE$1,e:"__",m:"_"});function modsClassName(o){return o.split(/\s(.*)/)[1]}var Platform;(function(o){o.IOS="ios",o.ANDROID="android",o.BROWSER="browser"})(Platform||(Platform={}));const b$1w=block$5("root");b$1w({mobile:!0}).split(/\s+/)[1];const initialValue={mobile:!1,platform:Platform.BROWSER,useHistory:()=>({action:"",replace(){},push(){},goBack(){}}),useLocation:()=>({pathname:"",search:"",hash:""})},MobileContext=reactExports.createContext(initialValue);var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var o=requireReact(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(d,h,p){var m,g={},y=null,A=null;p!==void 0&&(y=""+p),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(A=h.ref);for(m in h)a.call(h,m)&&!u.hasOwnProperty(m)&&(g[m]=h[m]);if(d&&d.defaultProps)for(m in h=d.defaultProps,h)g[m]===void 0&&(g[m]=h[m]);return{$$typeof:e,type:d,key:y,ref:A,props:g,_owner:l.current}}return reactJsxRuntime_production_min.Fragment=s,reactJsxRuntime_production_min.jsx=c,reactJsxRuntime_production_min.jsxs=c,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime();function useMobile(){return reactExports.useContext(MobileContext).mobile}function getComponentName(o){return o.displayName||o.name||"Component"}function withMobile(o){var s;const e=getComponentName(o);return s=class extends reactExports.Component{render(){return jsxRuntimeExports.jsx(o,{...this.props,mobile:this.context.mobile,platform:this.context.platform,useHistory:this.context.useHistory,useLocation:this.context.useLocation})}},oe(s,"displayName",`withMobile(${e})`),oe(s,"contextType",MobileContext),s}const ThemeContext=reactExports.createContext(void 0);ThemeContext.displayName="ThemeContext";const KeyCode={BACKSPACE:"Backspace",ENTER:"Enter",TAB:"Tab",SPACEBAR:" ",SPACEBAR_OLD:"Spacebar",ESCAPE:"Escape",ARROW_UP:"ArrowUp",ARROW_DOWN:"ArrowDown",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",HOME:"Home",END:"End"};function createOnKeyDownHandler(o){return e=>{o&&[KeyCode.ENTER,KeyCode.SPACEBAR,KeyCode.SPACEBAR_OLD].includes(e.key)&&(e.preventDefault(),o(e))}}function useActionHandlers(o){return{onKeyDown:reactExports.useMemo(()=>createOnKeyDownHandler(o),[o])}}function useControlledState(o,e,s){const[a,l]=reactExports.useState(o??e),u=reactExports.useRef(o!==void 0),c=o!==void 0;reactExports.useEffect(()=>{const p=u.current;p!==c&&console.error(`[useControlledState] A component changed from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}.`),u.current=c},[c]);let d=c?o:a;const h=reactExports.useCallback((p,...m)=>{Object.is(d,p)||s==null||s(p,...m),c||(d=p,l(p))},[c,s,d]);return[d,h]}const DEFAULT_THEME="system",DEFAULT_LIGHT_THEME="light",DEFAULT_DARK_THEME="dark",ROOT_CLASSNAME="root",DEFAULT_DIRECTION="ltr";function useThemeContext(){const o=reactExports.useContext(ThemeContext);if(o===void 0)throw new Error("useTheme* hooks must be used within ThemeProvider");return o}function useFileInput({onUpdate:o,onChange:e}){const s=reactExports.useRef(null),a=reactExports.useCallback(c=>{e==null||e(c),o==null||o(Array.from(c.target.files||[])),c.target.value=""},[e,o]),l=reactExports.useCallback(()=>{var c;(c=s.current)==null||c.click()},[]);return reactExports.useMemo(()=>({controlProps:{ref:s,type:"file",tabIndex:-1,style:{opacity:0,position:"absolute",width:1,height:1},onChange:a,"aria-hidden":!0},triggerProps:{onClick:l}}),[a,l])}class SyntheticFocusEvent{constructor(e,s,a={}){oe(this,"nativeEvent");oe(this,"target");oe(this,"currentTarget");oe(this,"relatedTarget");oe(this,"bubbles");oe(this,"cancelable");oe(this,"defaultPrevented");oe(this,"eventPhase");oe(this,"isTrusted");oe(this,"timeStamp");oe(this,"type");this.nativeEvent=s,this.target=a.target??s.target,this.currentTarget=a.currentTarget??s.currentTarget,this.relatedTarget=s.relatedTarget,this.bubbles=s.bubbles,this.cancelable=s.cancelable,this.defaultPrevented=s.defaultPrevented,this.eventPhase=s.eventPhase,this.isTrusted=s.isTrusted,this.timeStamp=s.timeStamp,this.type=e}isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}}function useSyntheticBlurEvent(o){const e=reactExports.useRef({isFocused:!1,observer:null});return reactExports.useEffect(()=>{const a=e.current;return()=>{a.observer&&(a.observer.disconnect(),a.observer=null)}},[]),reactExports.useCallback(a=>{const l=a.target;if(l instanceof HTMLButtonElement||l instanceof HTMLInputElement||l instanceof HTMLTextAreaElement||l instanceof HTMLSelectElement){e.current.isFocused=!0;const u=d=>{e.current.isFocused=!1,l.disabled&&(o==null||o(new SyntheticFocusEvent("blur",d))),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};l.addEventListener("focusout",u,{once:!0});const c=new MutationObserver(()=>{if(e.current.isFocused&&l.disabled){c.disconnect(),e.current.observer=null;const d=l===document.activeElement?null:document.activeElement;l.dispatchEvent(new FocusEvent("blur",{relatedTarget:d})),l.dispatchEvent(new FocusEvent("focusout",{relatedTarget:d,bubbles:!0}))}});c.observe(l,{attributes:!0,attributeFilter:["disabled"]}),e.current.observer=c}},[o])}function useFocusWithin(o){const{onFocusWithin:e,onBlurWithin:s,onFocusWithinChange:a,isDisabled:l}=o,u=reactExports.useRef(!1),c=reactExports.useCallback(m=>{!u.current&&document.activeElement===m.target&&(u.current=!0,e&&e(m),a&&a(!0))},[e,a]),d=reactExports.useCallback(m=>{u.current&&(u.current=!1,s&&s(m),a&&a(!1))},[s,a]),{onBlur:h,onFocus:p}=useFocusEvents({onFocus:c,onBlur:d,isDisabled:l});return l?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:p,onBlur:h}}}function useFocusEvents({onFocus:o,onBlur:e,isDisabled:s}){const a=reactExports.useRef(!1),l=reactExports.useRef(null);reactExports.useEffect(()=>{if(s)return;const h=function(){a.current=!1},p=function(m){if(!a.current&&l.current){const g=new FocusEvent("blur",{...m,relatedTarget:m.target,bubbles:!1,cancelable:!1});e(new SyntheticFocusEvent("blur",g,{target:l.current,currentTarget:l.current})),l.current=null}};return window.addEventListener("focus",h,{capture:!0}),window.addEventListener("focusin",p),()=>{window.removeEventListener("focus",h,{capture:!0}),window.removeEventListener("focusin",p)}},[s,e]);const u=reactExports.useCallback(h=>{document.activeElement!==h.target&&(h.relatedTarget===null||h.relatedTarget===document.body||h.relatedTarget===document)&&(e(h),l.current=null)},[e]),c=useSyntheticBlurEvent(e),d=reactExports.useCallback(h=>{a.current=!0,l.current=h.target,c(h),o(h)},[c,o]);return{onBlur:u,onFocus:d}}function setRef(o,e){typeof o=="function"?o(e):o&&(o.current=e)}function mergeRefs(...o){return function(s){for(const a of o)setRef(a,s)}}function useForkRef(...o){return reactExports.useMemo(()=>o.every(e=>e==null)?null:mergeRefs(...o),o)}const useIntersection=({element:o,options:e,onIntersect:s})=>{reactExports.useEffect(()=>{const a=new IntersectionObserver(([l])=>{l.isIntersecting&&(s==null||s())},e);return o&&a.observe(o),()=>o===null?void 0:a.unobserve(o)},[o,e,s])},useLayoutEffect=typeof window>"u"?()=>{}:reactExports.useLayoutEffect;function moveBack(o,e,s=1,a){const l=(o.length+e-s%o.length)%o.length;return a&&a(o[l])?moveBack(o,l,1,a):l}function moveForward(o,e,s=1,a){const l=(e+s)%o.length;return a&&a(o[l])?moveForward(o,l,1,a):l}function useListNavigation({items:o,skip:e,pageSize:s,processHomeKey:a=!0,processEndKey:l=!0,anchorRef:u,disabled:c=!1,initialValue:d=-1,onAnchorKeyDown:h}){const[p,m]=reactExports.useState(d),g=reactExports.useCallback(()=>{m(d)},[d]);return reactExports.useEffect(()=>{o&&g()},[o,g]),useLayoutEffect(()=>{if(c||!o.some(E=>!(e!=null&&e(E))))return;const A=u==null?void 0:u.current;if(!A)return;const T=E=>{if((h==null?void 0:h(p,E))!==!1)switch(E.key){case KeyCode.ARROW_DOWN:{E.preventDefault(),m(_=>moveForward(o,_,1,e));break}case KeyCode.ARROW_UP:{E.preventDefault(),m(_=>moveBack(o,_,1,e));break}case KeyCode.PAGE_DOWN:{if(!s)return;E.preventDefault(),m(_=>moveForward(o,_,s,e));break}case KeyCode.PAGE_UP:{if(!s)return;E.preventDefault(),m(_=>moveBack(o,_,s,e));break}case KeyCode.HOME:{if(!a)return;E.preventDefault(),m(_=>moveBack(o,_,_,e));break}case KeyCode.END:{if(!l)return;E.preventDefault(),m(_=>moveBack(o,_,_+1,e));break}}};return A.addEventListener("keydown",T),()=>{A.removeEventListener("keydown",T)}},[p,u,c,o,h,s,l,a,e]),{activeItemIndex:p,setActiveItemIndex:m,reset:g}}const PortalContext$1=reactExports.createContext({current:null});PortalContext$1.displayName="PortalContext";function usePortalContainer(){const o=reactExports.useContext(PortalContext$1);let e=null;return typeof window=="object"&&(e=window.document.body),o.current??e}function useResizeObserver({ref:o,onResize:e,box:s}){reactExports.useEffect(()=>{const a=o==null?void 0:o.current;if(!a)return;if(typeof window.ResizeObserver>"u"){const u=()=>{e({})};return window.addEventListener("resize",u,!1),()=>{window.removeEventListener("resize",u,!1)}}const l=new ResizeObserver(u=>{u.length&&e({observer:l})});return l.observe(a,{box:s}),()=>{l.disconnect()}},[o,e,s])}const useOpenState=o=>{const{onOpenChange:e,onClose:s}=o,a=reactExports.useCallback(d=>{e==null||e(d),d===!1&&s&&s()},[e,s]),[l,u]=useControlledState(o.open,o.defaultOpen??!1,a),c=reactExports.useCallback(d=>{u(typeof d=="boolean"?d:!l)},[l,u]);return{open:l,toggleOpen:c}},useSelect=({defaultOpen:o,onClose:e,onOpenChange:s,open:a,value:l,defaultValue:u=[],multiple:c,onUpdate:d,disabled:h})=>{const[p,m]=useControlledState(l,u,d),[g,y]=reactExports.useState(),{toggleOpen:A,...T}=useOpenState({defaultOpen:o,onClose:e,onOpenChange:s,open:a}),E=reactExports.useCallback(k=>{h||m(k)},[m,h]),v=reactExports.useCallback(k=>{if(!p.includes(k.value)){const I=[k.value];E(I)}A(!1)},[p,E,A]),_=reactExports.useCallback(k=>{const P=p.includes(k.value)?p.filter(N=>N!==k.value):[...p,k.value];E(P)},[p,E]),w=reactExports.useCallback(k=>{c?_(k):v(k)},[c,v,_]),R=reactExports.useCallback(()=>{E([])},[E]);return{value:p,activeIndex:g,setValue:E,handleSelection:w,handleClearValue:R,toggleOpen:A,setActiveIndex:y,...T}};function useTimeout(o,e){reactExports.useEffect(()=>{if(typeof e!="number")return;const s=setTimeout(()=>{o()},e);return()=>{clearTimeout(s)}},[o,e])}const b$1v=block$5("color-text"),colorText=({color:o},e)=>b$1v({color:o},e),a11yHiddenSvgProps={"aria-hidden":!0};function isSpriteData(o){return typeof o=="object"}function isSvgrData(o){return typeof o=="function"&&(!o.prototype||!o.prototype.render)}function isComponentSvgData(o){return(typeof o=="object"||typeof o=="function")&&"defaultProps"in o}function isStringSvgData(o){return typeof o=="string"}function prepareStringData(o){return o.replace(/<svg[^>]*>/,e=>e.replace(/(width|height)=(["']?)\d+\2/g,"").replace(/(\s){2,}\b/g,"$1").replace(/(\s)+>/g,">"))}function getStringViewBox(o){const e=o.match(/viewBox=(["']?)([\d\s,-]+)\1/);return e?e[2]:void 0}const b$1u=block$5("icon"),Icon=reactExports.forwardRef(({data:o,width:e,height:s,size:a,className:l,style:u,color:c,fill:d="currentColor",stroke:h="none",qa:p},m)=>{let g,y;a&&(g=a,y=a),e&&(g=e),s&&(y=s);let A;if(isSpriteData(o))({viewBox:A}=o);else if(isStringSvgData(o))A=getStringViewBox(o);else if(isComponentSvgData(o))({viewBox:A}=o.defaultProps);else if(isSvgrData(o)){const w=o({});w&&({viewBox:A}=w.props)}if(A&&(!g||!y)){const w=A.split(/\s+|\s*,\s*/);g||(g=w[2]),y||(y=w[3])}const T=(u==null?void 0:u.color)!==void 0,E=c&&!T?colorText({color:c},b$1u(null,l)):b$1u(null,l),v={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:g,height:y,className:E,style:u,fill:d,stroke:h,"data-qa":p,...a11yHiddenSvgProps};if(isStringSvgData(o)){const w=prepareStringData(o);return jsxRuntimeExports.jsx("svg",{...v,ref:m,dangerouslySetInnerHTML:{__html:w}})}if(isSpriteData(o)){const w=Icon.prefix+(o.url||`#${o.id}`);return jsxRuntimeExports.jsx("svg",{...v,viewBox:A,ref:m,children:jsxRuntimeExports.jsx("use",{href:w,xlinkHref:w})})}const _=o;return _.defaultProps&&(_.defaultProps.width=_.defaultProps.height=void 0),jsxRuntimeExports.jsx("svg",{...v,ref:m,children:jsxRuntimeExports.jsx(_,{width:void 0,height:void 0})})});Icon.displayName="Icon",Icon.prefix="";function isOfType(o){return function(s){if(!reactExports.isValidElement(s))return!1;const{type:a}=s;if(a===o)return!0;if(typeof o=="string"||typeof a=="string")return!1;const l=a.displayName;return!!(l&&l===o.displayName)}}let nextUniqueId=1;function getUniqId(){return`${NAMESPACE$1}uniq-${nextUniqueId++}`}const isSvg=isOfType("svg"),isIcon=isOfType(Icon);function useUniqIdFallback(){const o=React.useRef();return o.current===void 0&&(o.current=getUniqId()),o.current}function useIdNative(){return`${NAMESPACE$1}${React.useId()}`}const useUniqId=typeof React.useId=="function"?useIdNative:useUniqIdFallback,CSS_SIZE_EXCEPTION={"0.5":"half"},DEFAULT_LAYOUT_THEME={breakpoints:{xs:0,s:576,m:768,l:1080,xl:1200,xxl:1400,xxxl:1920},spaceBaseSize:4,components:{container:{gutters:3,media:{l:{gutters:5}}}}},LayoutContext=reactExports.createContext({theme:DEFAULT_LAYOUT_THEME,activeMediaQuery:"s",fixBreakpoints:!1}),mockMediaQueryList={media:"",matches:!1,onchange:()=>{},addListener:()=>{},removeListener:()=>{},addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:o=>!0},makeCurrentActiveMediaExpressions=o=>({xs:`(max-width: ${o.s-1}px)`,s:`(min-width: ${o.s}px) and (max-width: ${o.m-1}px)`,m:`(min-width: ${o.m}px) and (max-width: ${o.l-1}px)`,l:`(min-width: ${o.l}px) and (max-width: ${o.xl-1}px)`,xl:`(min-width: ${o.xl}px) and (max-width: ${o.xxl-1}px)`,xxl:`(min-width: ${o.xxl}px) and (max-width: ${o.xxxl-1}px)`,xxxl:`(min-width: ${o.xxxl}px)`}),safeMatchMedia=o=>typeof window>"u"||typeof window.matchMedia!="function"?mockMediaQueryList:window.matchMedia(o);class Queries{constructor(e,s){oe(this,"fix");oe(this,"queryListsDecl",[]);const a=makeCurrentActiveMediaExpressions(e);this.fix=s,this.queryListsDecl=[["xs",safeMatchMedia(a.xs)],["s",safeMatchMedia(a.s)],["m",safeMatchMedia(a.m)],["l",safeMatchMedia(a.l)],["xl",safeMatchMedia(a.xl)],["xxl",safeMatchMedia(a.xxl)],["xxxl",safeMatchMedia(a.xxxl)]]}getCurrentActiveMedia(){var s;const e=(s=this.queryListsDecl.find(([a,l])=>l.matches))==null?void 0:s[0];if(e){if(e==="xs"&&!this.fix)return"s"}else return this.fix?"xs":"s";return e}addListeners(e){this.queryListsDecl.forEach(([s,a])=>a.addEventListener("change",e))}removeListeners(e){this.queryListsDecl.forEach(([s,a])=>a.removeEventListener("change",e))}}const useCurrentActiveMediaQuery=(o,e,s)=>{const[a,l]=reactExports.useState(s??(e?"xs":"s"));return useLayoutEffect(()=>{const u=new Queries(o,e),c=()=>{l(u.getCurrentActiveMedia())};return u.addListeners(c),c(),()=>{u.removeListeners(c)}},[o,e]),a};var _listCacheClear,hasRequired_listCacheClear;function require_listCacheClear(){if(hasRequired_listCacheClear)return _listCacheClear;hasRequired_listCacheClear=1;function o(){this.__data__=[],this.size=0}return _listCacheClear=o,_listCacheClear}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;function o(e,s){return e===s||e!==e&&s!==s}return eq_1=o,eq_1}var _assocIndexOf,hasRequired_assocIndexOf;function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var o=requireEq();function e(s,a){for(var l=s.length;l--;)if(o(s[l][0],a))return l;return-1}return _assocIndexOf=e,_assocIndexOf}var _listCacheDelete,hasRequired_listCacheDelete;function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var o=require_assocIndexOf(),e=Array.prototype,s=e.splice;function a(l){var u=this.__data__,c=o(u,l);if(c<0)return!1;var d=u.length-1;return c==d?u.pop():s.call(u,c,1),--this.size,!0}return _listCacheDelete=a,_listCacheDelete}var _listCacheGet,hasRequired_listCacheGet;function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var o=require_assocIndexOf();function e(s){var a=this.__data__,l=o(a,s);return l<0?void 0:a[l][1]}return _listCacheGet=e,_listCacheGet}var _listCacheHas,hasRequired_listCacheHas;function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var o=require_assocIndexOf();function e(s){return o(this.__data__,s)>-1}return _listCacheHas=e,_listCacheHas}var _listCacheSet,hasRequired_listCacheSet;function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var o=require_assocIndexOf();function e(s,a){var l=this.__data__,u=o(l,s);return u<0?(++this.size,l.push([s,a])):l[u][1]=a,this}return _listCacheSet=e,_listCacheSet}var _ListCache,hasRequired_ListCache;function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var o=require_listCacheClear(),e=require_listCacheDelete(),s=require_listCacheGet(),a=require_listCacheHas(),l=require_listCacheSet();function u(c){var d=-1,h=c==null?0:c.length;for(this.clear();++d<h;){var p=c[d];this.set(p[0],p[1])}}return u.prototype.clear=o,u.prototype.delete=e,u.prototype.get=s,u.prototype.has=a,u.prototype.set=l,_ListCache=u,_ListCache}var _stackClear,hasRequired_stackClear;function require_stackClear(){if(hasRequired_stackClear)return _stackClear;hasRequired_stackClear=1;var o=require_ListCache();function e(){this.__data__=new o,this.size=0}return _stackClear=e,_stackClear}var _stackDelete,hasRequired_stackDelete;function require_stackDelete(){if(hasRequired_stackDelete)return _stackDelete;hasRequired_stackDelete=1;function o(e){var s=this.__data__,a=s.delete(e);return this.size=s.size,a}return _stackDelete=o,_stackDelete}var _stackGet,hasRequired_stackGet;function require_stackGet(){if(hasRequired_stackGet)return _stackGet;hasRequired_stackGet=1;function o(e){return this.__data__.get(e)}return _stackGet=o,_stackGet}var _stackHas,hasRequired_stackHas;function require_stackHas(){if(hasRequired_stackHas)return _stackHas;hasRequired_stackHas=1;function o(e){return this.__data__.has(e)}return _stackHas=o,_stackHas}var _freeGlobal,hasRequired_freeGlobal;function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var o=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;return _freeGlobal=o,_freeGlobal}var _root,hasRequired_root;function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var o=require_freeGlobal(),e=typeof self=="object"&&self&&self.Object===Object&&self,s=o||e||Function("return this")();return _root=s,_root}var _Symbol,hasRequired_Symbol;function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var o=require_root(),e=o.Symbol;return _Symbol=e,_Symbol}var _getRawTag,hasRequired_getRawTag;function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var o=require_Symbol(),e=Object.prototype,s=e.hasOwnProperty,a=e.toString,l=o?o.toStringTag:void 0;function u(c){var d=s.call(c,l),h=c[l];try{c[l]=void 0;var p=!0}catch{}var m=a.call(c);return p&&(d?c[l]=h:delete c[l]),m}return _getRawTag=u,_getRawTag}var _objectToString,hasRequired_objectToString;function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var o=Object.prototype,e=o.toString;function s(a){return e.call(a)}return _objectToString=s,_objectToString}var _baseGetTag,hasRequired_baseGetTag;function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var o=require_Symbol(),e=require_getRawTag(),s=require_objectToString(),a="[object Null]",l="[object Undefined]",u=o?o.toStringTag:void 0;function c(d){return d==null?d===void 0?l:a:u&&u in Object(d)?e(d):s(d)}return _baseGetTag=c,_baseGetTag}var isObject_1,hasRequiredIsObject;function requireIsObject(){if(hasRequiredIsObject)return isObject_1;hasRequiredIsObject=1;function o(e){var s=typeof e;return e!=null&&(s=="object"||s=="function")}return isObject_1=o,isObject_1}var isFunction_1,hasRequiredIsFunction;function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1;var o=require_baseGetTag(),e=requireIsObject(),s="[object AsyncFunction]",a="[object Function]",l="[object GeneratorFunction]",u="[object Proxy]";function c(d){if(!e(d))return!1;var h=o(d);return h==a||h==l||h==s||h==u}return isFunction_1=c,isFunction_1}var _coreJsData,hasRequired_coreJsData;function require_coreJsData(){if(hasRequired_coreJsData)return _coreJsData;hasRequired_coreJsData=1;var o=require_root(),e=o["__core-js_shared__"];return _coreJsData=e,_coreJsData}var _isMasked,hasRequired_isMasked;function require_isMasked(){if(hasRequired_isMasked)return _isMasked;hasRequired_isMasked=1;var o=require_coreJsData(),e=(function(){var a=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function s(a){return!!e&&e in a}return _isMasked=s,_isMasked}var _toSource,hasRequired_toSource;function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var o=Function.prototype,e=o.toString;function s(a){if(a!=null){try{return e.call(a)}catch{}try{return a+""}catch{}}return""}return _toSource=s,_toSource}var _baseIsNative,hasRequired_baseIsNative;function require_baseIsNative(){if(hasRequired_baseIsNative)return _baseIsNative;hasRequired_baseIsNative=1;var o=requireIsFunction(),e=require_isMasked(),s=requireIsObject(),a=require_toSource(),l=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,c=Function.prototype,d=Object.prototype,h=c.toString,p=d.hasOwnProperty,m=RegExp("^"+h.call(p).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function g(y){if(!s(y)||e(y))return!1;var A=o(y)?m:u;return A.test(a(y))}return _baseIsNative=g,_baseIsNative}var _getValue,hasRequired_getValue;function require_getValue(){if(hasRequired_getValue)return _getValue;hasRequired_getValue=1;function o(e,s){return e==null?void 0:e[s]}return _getValue=o,_getValue}var _getNative,hasRequired_getNative;function require_getNative(){if(hasRequired_getNative)return _getNative;hasRequired_getNative=1;var o=require_baseIsNative(),e=require_getValue();function s(a,l){var u=e(a,l);return o(u)?u:void 0}return _getNative=s,_getNative}var _Map,hasRequired_Map;function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var o=require_getNative(),e=require_root(),s=o(e,"Map");return _Map=s,_Map}var _nativeCreate,hasRequired_nativeCreate;function require_nativeCreate(){if(hasRequired_nativeCreate)return _nativeCreate;hasRequired_nativeCreate=1;var o=require_getNative(),e=o(Object,"create");return _nativeCreate=e,_nativeCreate}var _hashClear,hasRequired_hashClear;function require_hashClear(){if(hasRequired_hashClear)return _hashClear;hasRequired_hashClear=1;var o=require_nativeCreate();function e(){this.__data__=o?o(null):{},this.size=0}return _hashClear=e,_hashClear}var _hashDelete,hasRequired_hashDelete;function require_hashDelete(){if(hasRequired_hashDelete)return _hashDelete;hasRequired_hashDelete=1;function o(e){var s=this.has(e)&&delete this.__data__[e];return this.size-=s?1:0,s}return _hashDelete=o,_hashDelete}var _hashGet,hasRequired_hashGet;function require_hashGet(){if(hasRequired_hashGet)return _hashGet;hasRequired_hashGet=1;var o=require_nativeCreate(),e="__lodash_hash_undefined__",s=Object.prototype,a=s.hasOwnProperty;function l(u){var c=this.__data__;if(o){var d=c[u];return d===e?void 0:d}return a.call(c,u)?c[u]:void 0}return _hashGet=l,_hashGet}var _hashHas,hasRequired_hashHas;function require_hashHas(){if(hasRequired_hashHas)return _hashHas;hasRequired_hashHas=1;var o=require_nativeCreate(),e=Object.prototype,s=e.hasOwnProperty;function a(l){var u=this.__data__;return o?u[l]!==void 0:s.call(u,l)}return _hashHas=a,_hashHas}var _hashSet,hasRequired_hashSet;function require_hashSet(){if(hasRequired_hashSet)return _hashSet;hasRequired_hashSet=1;var o=require_nativeCreate(),e="__lodash_hash_undefined__";function s(a,l){var u=this.__data__;return this.size+=this.has(a)?0:1,u[a]=o&&l===void 0?e:l,this}return _hashSet=s,_hashSet}var _Hash,hasRequired_Hash;function require_Hash(){if(hasRequired_Hash)return _Hash;hasRequired_Hash=1;var o=require_hashClear(),e=require_hashDelete(),s=require_hashGet(),a=require_hashHas(),l=require_hashSet();function u(c){var d=-1,h=c==null?0:c.length;for(this.clear();++d<h;){var p=c[d];this.set(p[0],p[1])}}return u.prototype.clear=o,u.prototype.delete=e,u.prototype.get=s,u.prototype.has=a,u.prototype.set=l,_Hash=u,_Hash}var _mapCacheClear,hasRequired_mapCacheClear;function require_mapCacheClear(){if(hasRequired_mapCacheClear)return _mapCacheClear;hasRequired_mapCacheClear=1;var o=require_Hash(),e=require_ListCache(),s=require_Map();function a(){this.size=0,this.__data__={hash:new o,map:new(s||e),string:new o}}return _mapCacheClear=a,_mapCacheClear}var _isKeyable,hasRequired_isKeyable;function require_isKeyable(){if(hasRequired_isKeyable)return _isKeyable;hasRequired_isKeyable=1;function o(e){var s=typeof e;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?e!=="__proto__":e===null}return _isKeyable=o,_isKeyable}var _getMapData,hasRequired_getMapData;function require_getMapData(){if(hasRequired_getMapData)return _getMapData;hasRequired_getMapData=1;var o=require_isKeyable();function e(s,a){var l=s.__data__;return o(a)?l[typeof a=="string"?"string":"hash"]:l.map}return _getMapData=e,_getMapData}var _mapCacheDelete,hasRequired_mapCacheDelete;function require_mapCacheDelete(){if(hasRequired_mapCacheDelete)return _mapCacheDelete;hasRequired_mapCacheDelete=1;var o=require_getMapData();function e(s){var a=o(this,s).delete(s);return this.size-=a?1:0,a}return _mapCacheDelete=e,_mapCacheDelete}var _mapCacheGet,hasRequired_mapCacheGet;function require_mapCacheGet(){if(hasRequired_mapCacheGet)return _mapCacheGet;hasRequired_mapCacheGet=1;var o=require_getMapData();function e(s){return o(this,s).get(s)}return _mapCacheGet=e,_mapCacheGet}var _mapCacheHas,hasRequired_mapCacheHas;function require_mapCacheHas(){if(hasRequired_mapCacheHas)return _mapCacheHas;hasRequired_mapCacheHas=1;var o=require_getMapData();function e(s){return o(this,s).has(s)}return _mapCacheHas=e,_mapCacheHas}var _mapCacheSet,hasRequired_mapCacheSet;function require_mapCacheSet(){if(hasRequired_mapCacheSet)return _mapCacheSet;hasRequired_mapCacheSet=1;var o=require_getMapData();function e(s,a){var l=o(this,s),u=l.size;return l.set(s,a),this.size+=l.size==u?0:1,this}return _mapCacheSet=e,_mapCacheSet}var _MapCache,hasRequired_MapCache;function require_MapCache(){if(hasRequired_MapCache)return _MapCache;hasRequired_MapCache=1;var o=require_mapCacheClear(),e=require_mapCacheDelete(),s=require_mapCacheGet(),a=require_mapCacheHas(),l=require_mapCacheSet();function u(c){var d=-1,h=c==null?0:c.length;for(this.clear();++d<h;){var p=c[d];this.set(p[0],p[1])}}return u.prototype.clear=o,u.prototype.delete=e,u.prototype.get=s,u.prototype.has=a,u.prototype.set=l,_MapCache=u,_MapCache}var _stackSet,hasRequired_stackSet;function require_stackSet(){if(hasRequired_stackSet)return _stackSet;hasRequired_stackSet=1;var o=require_ListCache(),e=require_Map(),s=require_MapCache(),a=200;function l(u,c){var d=this.__data__;if(d instanceof o){var h=d.__data__;if(!e||h.length<a-1)return h.push([u,c]),this.size=++d.size,this;d=this.__data__=new s(h)}return d.set(u,c),this.size=d.size,this}return _stackSet=l,_stackSet}var _Stack,hasRequired_Stack;function require_Stack(){if(hasRequired_Stack)return _Stack;hasRequired_Stack=1;var o=require_ListCache(),e=require_stackClear(),s=require_stackDelete(),a=require_stackGet(),l=require_stackHas(),u=require_stackSet();function c(d){var h=this.__data__=new o(d);this.size=h.size}return c.prototype.clear=e,c.prototype.delete=s,c.prototype.get=a,c.prototype.has=l,c.prototype.set=u,_Stack=c,_Stack}var _defineProperty,hasRequired_defineProperty;function require_defineProperty(){if(hasRequired_defineProperty)return _defineProperty;hasRequired_defineProperty=1;var o=require_getNative(),e=(function(){try{var s=o(Object,"defineProperty");return s({},"",{}),s}catch{}})();return _defineProperty=e,_defineProperty}var _baseAssignValue,hasRequired_baseAssignValue;function require_baseAssignValue(){if(hasRequired_baseAssignValue)return _baseAssignValue;hasRequired_baseAssignValue=1;var o=require_defineProperty();function e(s,a,l){a=="__proto__"&&o?o(s,a,{configurable:!0,enumerable:!0,value:l,writable:!0}):s[a]=l}return _baseAssignValue=e,_baseAssignValue}var _assignMergeValue,hasRequired_assignMergeValue;function require_assignMergeValue(){if(hasRequired_assignMergeValue)return _assignMergeValue;hasRequired_assignMergeValue=1;var o=require_baseAssignValue(),e=requireEq();function s(a,l,u){(u!==void 0&&!e(a[l],u)||u===void 0&&!(l in a))&&o(a,l,u)}return _assignMergeValue=s,_assignMergeValue}var _createBaseFor,hasRequired_createBaseFor;function require_createBaseFor(){if(hasRequired_createBaseFor)return _createBaseFor;hasRequired_createBaseFor=1;function o(e){return function(s,a,l){for(var u=-1,c=Object(s),d=l(s),h=d.length;h--;){var p=d[e?h:++u];if(a(c[p],p,c)===!1)break}return s}}return _createBaseFor=o,_createBaseFor}var _baseFor,hasRequired_baseFor;function require_baseFor(){if(hasRequired_baseFor)return _baseFor;hasRequired_baseFor=1;var o=require_createBaseFor(),e=o();return _baseFor=e,_baseFor}var _cloneBuffer={exports:{}};_cloneBuffer.exports;var hasRequired_cloneBuffer;function require_cloneBuffer(){return hasRequired_cloneBuffer||(hasRequired_cloneBuffer=1,(function(o,e){var s=require_root(),a=e&&!e.nodeType&&e,l=a&&!0&&o&&!o.nodeType&&o,u=l&&l.exports===a,c=u?s.Buffer:void 0,d=c?c.allocUnsafe:void 0;function h(p,m){if(m)return p.slice();var g=p.length,y=d?d(g):new p.constructor(g);return p.copy(y),y}o.exports=h})(_cloneBuffer,_cloneBuffer.exports)),_cloneBuffer.exports}var _Uint8Array,hasRequired_Uint8Array;function require_Uint8Array(){if(hasRequired_Uint8Array)return _Uint8Array;hasRequired_Uint8Array=1;var o=require_root(),e=o.Uint8Array;return _Uint8Array=e,_Uint8Array}var _cloneArrayBuffer,hasRequired_cloneArrayBuffer;function require_cloneArrayBuffer(){if(hasRequired_cloneArrayBuffer)return _cloneArrayBuffer;hasRequired_cloneArrayBuffer=1;var o=require_Uint8Array();function e(s){var a=new s.constructor(s.byteLength);return new o(a).set(new o(s)),a}return _cloneArrayBuffer=e,_cloneArrayBuffer}var _cloneTypedArray,hasRequired_cloneTypedArray;function require_cloneTypedArray(){if(hasRequired_cloneTypedArray)return _cloneTypedArray;hasRequired_cloneTypedArray=1;var o=require_cloneArrayBuffer();function e(s,a){var l=a?o(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.length)}return _cloneTypedArray=e,_cloneTypedArray}var _copyArray,hasRequired_copyArray;function require_copyArray(){if(hasRequired_copyArray)return _copyArray;hasRequired_copyArray=1;function o(e,s){var a=-1,l=e.length;for(s||(s=Array(l));++a<l;)s[a]=e[a];return s}return _copyArray=o,_copyArray}var _baseCreate,hasRequired_baseCreate;function require_baseCreate(){if(hasRequired_baseCreate)return _baseCreate;hasRequired_baseCreate=1;var o=requireIsObject(),e=Object.create,s=(function(){function a(){}return function(l){if(!o(l))return{};if(e)return e(l);a.prototype=l;var u=new a;return a.prototype=void 0,u}})();return _baseCreate=s,_baseCreate}var _overArg,hasRequired_overArg;function require_overArg(){if(hasRequired_overArg)return _overArg;hasRequired_overArg=1;function o(e,s){return function(a){return e(s(a))}}return _overArg=o,_overArg}var _getPrototype,hasRequired_getPrototype;function require_getPrototype(){if(hasRequired_getPrototype)return _getPrototype;hasRequired_getPrototype=1;var o=require_overArg(),e=o(Object.getPrototypeOf,Object);return _getPrototype=e,_getPrototype}var _isPrototype,hasRequired_isPrototype;function require_isPrototype(){if(hasRequired_isPrototype)return _isPrototype;hasRequired_isPrototype=1;var o=Object.prototype;function e(s){var a=s&&s.constructor,l=typeof a=="function"&&a.prototype||o;return s===l}return _isPrototype=e,_isPrototype}var _initCloneObject,hasRequired_initCloneObject;function require_initCloneObject(){if(hasRequired_initCloneObject)return _initCloneObject;hasRequired_initCloneObject=1;var o=require_baseCreate(),e=require_getPrototype(),s=require_isPrototype();function a(l){return typeof l.constructor=="function"&&!s(l)?o(e(l)):{}}return _initCloneObject=a,_initCloneObject}var isObjectLike_1,hasRequiredIsObjectLike;function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;hasRequiredIsObjectLike=1;function o(e){return e!=null&&typeof e=="object"}return isObjectLike_1=o,isObjectLike_1}var _baseIsArguments,hasRequired_baseIsArguments;function require_baseIsArguments(){if(hasRequired_baseIsArguments)return _baseIsArguments;hasRequired_baseIsArguments=1;var o=require_baseGetTag(),e=requireIsObjectLike(),s="[object Arguments]";function a(l){return e(l)&&o(l)==s}return _baseIsArguments=a,_baseIsArguments}var isArguments_1,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments_1;hasRequiredIsArguments=1;var o=require_baseIsArguments(),e=requireIsObjectLike(),s=Object.prototype,a=s.hasOwnProperty,l=s.propertyIsEnumerable,u=o((function(){return arguments})())?o:function(c){return e(c)&&a.call(c,"callee")&&!l.call(c,"callee")};return isArguments_1=u,isArguments_1}var isArray_1,hasRequiredIsArray;function requireIsArray(){if(hasRequiredIsArray)return isArray_1;hasRequiredIsArray=1;var o=Array.isArray;return isArray_1=o,isArray_1}var isLength_1,hasRequiredIsLength;function requireIsLength(){if(hasRequiredIsLength)return isLength_1;hasRequiredIsLength=1;var o=9007199254740991;function e(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=o}return isLength_1=e,isLength_1}var isArrayLike_1,hasRequiredIsArrayLike;function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike_1;hasRequiredIsArrayLike=1;var o=requireIsFunction(),e=requireIsLength();function s(a){return a!=null&&e(a.length)&&!o(a)}return isArrayLike_1=s,isArrayLike_1}var isArrayLikeObject_1,hasRequiredIsArrayLikeObject;function requireIsArrayLikeObject(){if(hasRequiredIsArrayLikeObject)return isArrayLikeObject_1;hasRequiredIsArrayLikeObject=1;var o=requireIsArrayLike(),e=requireIsObjectLike();function s(a){return e(a)&&o(a)}return isArrayLikeObject_1=s,isArrayLikeObject_1}var isBuffer={exports:{}},stubFalse_1,hasRequiredStubFalse;function requireStubFalse(){if(hasRequiredStubFalse)return stubFalse_1;hasRequiredStubFalse=1;function o(){return!1}return stubFalse_1=o,stubFalse_1}isBuffer.exports;var hasRequiredIsBuffer;function requireIsBuffer(){return hasRequiredIsBuffer||(hasRequiredIsBuffer=1,(function(o,e){var s=require_root(),a=requireStubFalse(),l=e&&!e.nodeType&&e,u=l&&!0&&o&&!o.nodeType&&o,c=u&&u.exports===l,d=c?s.Buffer:void 0,h=d?d.isBuffer:void 0,p=h||a;o.exports=p})(isBuffer,isBuffer.exports)),isBuffer.exports}var isPlainObject_1,hasRequiredIsPlainObject$1;function requireIsPlainObject$1(){if(hasRequiredIsPlainObject$1)return isPlainObject_1;hasRequiredIsPlainObject$1=1;var o=require_baseGetTag(),e=require_getPrototype(),s=requireIsObjectLike(),a="[object Object]",l=Function.prototype,u=Object.prototype,c=l.toString,d=u.hasOwnProperty,h=c.call(Object);function p(m){if(!s(m)||o(m)!=a)return!1;var g=e(m);if(g===null)return!0;var y=d.call(g,"constructor")&&g.constructor;return typeof y=="function"&&y instanceof y&&c.call(y)==h}return isPlainObject_1=p,isPlainObject_1}var _baseIsTypedArray,hasRequired_baseIsTypedArray;function require_baseIsTypedArray(){if(hasRequired_baseIsTypedArray)return _baseIsTypedArray;hasRequired_baseIsTypedArray=1;var o=require_baseGetTag(),e=requireIsLength(),s=requireIsObjectLike(),a="[object Arguments]",l="[object Array]",u="[object Boolean]",c="[object Date]",d="[object Error]",h="[object Function]",p="[object Map]",m="[object Number]",g="[object Object]",y="[object RegExp]",A="[object Set]",T="[object String]",E="[object WeakMap]",v="[object ArrayBuffer]",_="[object DataView]",w="[object Float32Array]",R="[object Float64Array]",k="[object Int8Array]",I="[object Int16Array]",P="[object Int32Array]",N="[object Uint8Array]",L="[object Uint8ClampedArray]",Q="[object Uint16Array]",j="[object Uint32Array]",F={};F[w]=F[R]=F[k]=F[I]=F[P]=F[N]=F[L]=F[Q]=F[j]=!0,F[a]=F[l]=F[v]=F[u]=F[_]=F[c]=F[d]=F[h]=F[p]=F[m]=F[g]=F[y]=F[A]=F[T]=F[E]=!1;function V(J){return s(J)&&e(J.length)&&!!F[o(J)]}return _baseIsTypedArray=V,_baseIsTypedArray}var _baseUnary,hasRequired_baseUnary;function require_baseUnary(){if(hasRequired_baseUnary)return _baseUnary;hasRequired_baseUnary=1;function o(e){return function(s){return e(s)}}return _baseUnary=o,_baseUnary}var _nodeUtil={exports:{}};_nodeUtil.exports;var hasRequired_nodeUtil;function require_nodeUtil(){return hasRequired_nodeUtil||(hasRequired_nodeUtil=1,(function(o,e){var s=require_freeGlobal(),a=e&&!e.nodeType&&e,l=a&&!0&&o&&!o.nodeType&&o,u=l&&l.exports===a,c=u&&s.process,d=(function(){try{var h=l&&l.require&&l.require("util").types;return h||c&&c.binding&&c.binding("util")}catch{}})();o.exports=d})(_nodeUtil,_nodeUtil.exports)),_nodeUtil.exports}var isTypedArray_1,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray_1;hasRequiredIsTypedArray=1;var o=require_baseIsTypedArray(),e=require_baseUnary(),s=require_nodeUtil(),a=s&&s.isTypedArray,l=a?e(a):o;return isTypedArray_1=l,isTypedArray_1}var _safeGet,hasRequired_safeGet;function require_safeGet(){if(hasRequired_safeGet)return _safeGet;hasRequired_safeGet=1;function o(e,s){if(!(s==="constructor"&&typeof e[s]=="function")&&s!="__proto__")return e[s]}return _safeGet=o,_safeGet}var _assignValue,hasRequired_assignValue;function require_assignValue(){if(hasRequired_assignValue)return _assignValue;hasRequired_assignValue=1;var o=require_baseAssignValue(),e=requireEq(),s=Object.prototype,a=s.hasOwnProperty;function l(u,c,d){var h=u[c];(!(a.call(u,c)&&e(h,d))||d===void 0&&!(c in u))&&o(u,c,d)}return _assignValue=l,_assignValue}var _copyObject,hasRequired_copyObject;function require_copyObject(){if(hasRequired_copyObject)return _copyObject;hasRequired_copyObject=1;var o=require_assignValue(),e=require_baseAssignValue();function s(a,l,u,c){var d=!u;u||(u={});for(var h=-1,p=l.length;++h<p;){var m=l[h],g=c?c(u[m],a[m],m,u,a):void 0;g===void 0&&(g=a[m]),d?e(u,m,g):o(u,m,g)}return u}return _copyObject=s,_copyObject}var _baseTimes,hasRequired_baseTimes;function require_baseTimes(){if(hasRequired_baseTimes)return _baseTimes;hasRequired_baseTimes=1;function o(e,s){for(var a=-1,l=Array(e);++a<e;)l[a]=s(a);return l}return _baseTimes=o,_baseTimes}var _isIndex,hasRequired_isIndex;function require_isIndex(){if(hasRequired_isIndex)return _isIndex;hasRequired_isIndex=1;var o=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function s(a,l){var u=typeof a;return l=l??o,!!l&&(u=="number"||u!="symbol"&&e.test(a))&&a>-1&&a%1==0&&a<l}return _isIndex=s,_isIndex}var _arrayLikeKeys,hasRequired_arrayLikeKeys;function require_arrayLikeKeys(){if(hasRequired_arrayLikeKeys)return _arrayLikeKeys;hasRequired_arrayLikeKeys=1;var o=require_baseTimes(),e=requireIsArguments(),s=requireIsArray(),a=requireIsBuffer(),l=require_isIndex(),u=requireIsTypedArray(),c=Object.prototype,d=c.hasOwnProperty;function h(p,m){var g=s(p),y=!g&&e(p),A=!g&&!y&&a(p),T=!g&&!y&&!A&&u(p),E=g||y||A||T,v=E?o(p.length,String):[],_=v.length;for(var w in p)(m||d.call(p,w))&&!(E&&(w=="length"||A&&(w=="offset"||w=="parent")||T&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||l(w,_)))&&v.push(w);return v}return _arrayLikeKeys=h,_arrayLikeKeys}var _nativeKeysIn,hasRequired_nativeKeysIn;function require_nativeKeysIn(){if(hasRequired_nativeKeysIn)return _nativeKeysIn;hasRequired_nativeKeysIn=1;function o(e){var s=[];if(e!=null)for(var a in Object(e))s.push(a);return s}return _nativeKeysIn=o,_nativeKeysIn}var _baseKeysIn,hasRequired_baseKeysIn;function require_baseKeysIn(){if(hasRequired_baseKeysIn)return _baseKeysIn;hasRequired_baseKeysIn=1;var o=requireIsObject(),e=require_isPrototype(),s=require_nativeKeysIn(),a=Object.prototype,l=a.hasOwnProperty;function u(c){if(!o(c))return s(c);var d=e(c),h=[];for(var p in c)p=="constructor"&&(d||!l.call(c,p))||h.push(p);return h}return _baseKeysIn=u,_baseKeysIn}var keysIn_1,hasRequiredKeysIn;function requireKeysIn(){if(hasRequiredKeysIn)return keysIn_1;hasRequiredKeysIn=1;var o=require_arrayLikeKeys(),e=require_baseKeysIn(),s=requireIsArrayLike();function a(l){return s(l)?o(l,!0):e(l)}return keysIn_1=a,keysIn_1}var toPlainObject_1,hasRequiredToPlainObject;function requireToPlainObject(){if(hasRequiredToPlainObject)return toPlainObject_1;hasRequiredToPlainObject=1;var o=require_copyObject(),e=requireKeysIn();function s(a){return o(a,e(a))}return toPlainObject_1=s,toPlainObject_1}var _baseMergeDeep,hasRequired_baseMergeDeep;function require_baseMergeDeep(){if(hasRequired_baseMergeDeep)return _baseMergeDeep;hasRequired_baseMergeDeep=1;var o=require_assignMergeValue(),e=require_cloneBuffer(),s=require_cloneTypedArray(),a=require_copyArray(),l=require_initCloneObject(),u=requireIsArguments(),c=requireIsArray(),d=requireIsArrayLikeObject(),h=requireIsBuffer(),p=requireIsFunction(),m=requireIsObject(),g=requireIsPlainObject$1(),y=requireIsTypedArray(),A=require_safeGet(),T=requireToPlainObject();function E(v,_,w,R,k,I,P){var N=A(v,w),L=A(_,w),Q=P.get(L);if(Q){o(v,w,Q);return}var j=I?I(N,L,w+"",v,_,P):void 0,F=j===void 0;if(F){var V=c(L),J=!V&&h(L),z=!V&&!J&&y(L);j=L,V||J||z?c(N)?j=N:d(N)?j=a(N):J?(F=!1,j=e(L,!0)):z?(F=!1,j=s(L,!0)):j=[]:g(L)||u(L)?(j=N,u(N)?j=T(N):(!m(N)||p(N))&&(j=l(L))):F=!1}F&&(P.set(L,j),k(j,L,R,I,P),P.delete(L)),o(v,w,j)}return _baseMergeDeep=E,_baseMergeDeep}var _baseMerge,hasRequired_baseMerge;function require_baseMerge(){if(hasRequired_baseMerge)return _baseMerge;hasRequired_baseMerge=1;var o=require_Stack(),e=require_assignMergeValue(),s=require_baseFor(),a=require_baseMergeDeep(),l=requireIsObject(),u=requireKeysIn(),c=require_safeGet();function d(h,p,m,g,y){h!==p&&s(p,function(A,T){if(y||(y=new o),l(A))a(h,p,T,m,d,g,y);else{var E=g?g(c(h,T),A,T+"",h,p,y):void 0;E===void 0&&(E=A),e(h,T,E)}},u)}return _baseMerge=d,_baseMerge}var identity_1,hasRequiredIdentity$1;function requireIdentity$1(){if(hasRequiredIdentity$1)return identity_1;hasRequiredIdentity$1=1;function o(e){return e}return identity_1=o,identity_1}var _apply,hasRequired_apply;function require_apply(){if(hasRequired_apply)return _apply;hasRequired_apply=1;function o(e,s,a){switch(a.length){case 0:return e.call(s);case 1:return e.call(s,a[0]);case 2:return e.call(s,a[0],a[1]);case 3:return e.call(s,a[0],a[1],a[2])}return e.apply(s,a)}return _apply=o,_apply}var _overRest,hasRequired_overRest;function require_overRest(){if(hasRequired_overRest)return _overRest;hasRequired_overRest=1;var o=require_apply(),e=Math.max;function s(a,l,u){return l=e(l===void 0?a.length-1:l,0),function(){for(var c=arguments,d=-1,h=e(c.length-l,0),p=Array(h);++d<h;)p[d]=c[l+d];d=-1;for(var m=Array(l+1);++d<l;)m[d]=c[d];return m[l]=u(p),o(a,this,m)}}return _overRest=s,_overRest}var constant_1,hasRequiredConstant;function requireConstant(){if(hasRequiredConstant)return constant_1;hasRequiredConstant=1;function o(e){return function(){return e}}return constant_1=o,constant_1}var _baseSetToString,hasRequired_baseSetToString;function require_baseSetToString(){if(hasRequired_baseSetToString)return _baseSetToString;hasRequired_baseSetToString=1;var o=requireConstant(),e=require_defineProperty(),s=requireIdentity$1(),a=e?function(l,u){return e(l,"toString",{configurable:!0,enumerable:!1,value:o(u),writable:!0})}:s;return _baseSetToString=a,_baseSetToString}var _shortOut,hasRequired_shortOut;function require_shortOut(){if(hasRequired_shortOut)return _shortOut;hasRequired_shortOut=1;var o=800,e=16,s=Date.now;function a(l){var u=0,c=0;return function(){var d=s(),h=e-(d-c);if(c=d,h>0){if(++u>=o)return arguments[0]}else u=0;return l.apply(void 0,arguments)}}return _shortOut=a,_shortOut}var _setToString,hasRequired_setToString;function require_setToString(){if(hasRequired_setToString)return _setToString;hasRequired_setToString=1;var o=require_baseSetToString(),e=require_shortOut(),s=e(o);return _setToString=s,_setToString}var _baseRest,hasRequired_baseRest;function require_baseRest(){if(hasRequired_baseRest)return _baseRest;hasRequired_baseRest=1;var o=requireIdentity$1(),e=require_overRest(),s=require_setToString();function a(l,u){return s(e(l,u,o),l+"")}return _baseRest=a,_baseRest}var _isIterateeCall,hasRequired_isIterateeCall;function require_isIterateeCall(){if(hasRequired_isIterateeCall)return _isIterateeCall;hasRequired_isIterateeCall=1;var o=requireEq(),e=requireIsArrayLike(),s=require_isIndex(),a=requireIsObject();function l(u,c,d){if(!a(d))return!1;var h=typeof c;return(h=="number"?e(d)&&s(c,d.length):h=="string"&&c in d)?o(d[c],u):!1}return _isIterateeCall=l,_isIterateeCall}var _createAssigner,hasRequired_createAssigner;function require_createAssigner(){if(hasRequired_createAssigner)return _createAssigner;hasRequired_createAssigner=1;var o=require_baseRest(),e=require_isIterateeCall();function s(a){return o(function(l,u){var c=-1,d=u.length,h=d>1?u[d-1]:void 0,p=d>2?u[2]:void 0;for(h=a.length>3&&typeof h=="function"?(d--,h):void 0,p&&e(u[0],u[1],p)&&(h=d<3?void 0:h,d=1),l=Object(l);++c<d;){var m=u[c];m&&a(l,m,c,h)}return l})}return _createAssigner=s,_createAssigner}var merge_1,hasRequiredMerge;function requireMerge(){if(hasRequiredMerge)return merge_1;hasRequiredMerge=1;var o=require_baseMerge(),e=require_createAssigner(),s=e(function(a,l,u){o(a,l,u)});return merge_1=s,merge_1}var mergeExports=requireMerge();const merge$1=getDefaultExportFromCjs$1(mergeExports);function overrideLayoutTheme({theme:o,override:e}){return merge$1(o,e)}function PrivateLayoutProvider({children:o,config:e,initialMediaQuery:s,fixBreakpoints:a=!1}){const l=reactExports.useContext(LayoutContext),u=reactExports.useMemo(()=>overrideLayoutTheme({theme:l.theme,override:e}),[e,l.theme]),c=useCurrentActiveMediaQuery(u.breakpoints,a,s),d=reactExports.useMemo(()=>({activeMediaQuery:c,theme:u,fixBreakpoints:a}),[c,u,a]);return jsxRuntimeExports.jsx(LayoutContext.Provider,{value:d,children:o})}const ThemeSettingsContext=reactExports.createContext(void 0);ThemeSettingsContext.displayName="ThemeSettingsContext";const b$1t=block$5(ROOT_CLASSNAME),rootClassName=b$1t();function updateBodyClassName({theme:o,className:e,prevClassName:s}){const a=document.body;a&&(a.classList.contains(rootClassName)||a.classList.add(rootClassName),s&&s.split(" ").forEach(u=>{u&&a.classList.remove(u)}),e&&e.split(" ").forEach(u=>{u&&!a.classList.contains(u)&&a.classList.add(u)}),[...a.classList].forEach(l=>{l.startsWith(modsClassName(b$1t({theme:!0})))&&a.classList.remove(l)}),a.classList.add(modsClassName(b$1t({theme:o}))))}function updateBodyDirection(o){const e=document.body;e&&(o===DEFAULT_DIRECTION?e.removeAttribute("dir"):e.setAttribute("dir",o))}const supportsMatchMedia=typeof window<"u"&&typeof window.matchMedia=="function",getDarkMediaMatch=()=>window.matchMedia("(prefers-color-scheme: dark)");function getSystemTheme(){return supportsMatchMedia&&getDarkMediaMatch().matches?"dark":"light"}var shim={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var o=requireReact();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var s=typeof Object.is=="function"?Object.is:e,a=o.useState,l=o.useEffect,u=o.useLayoutEffect,c=o.useDebugValue;function d(g,y){var A=y(),T=a({inst:{value:A,getSnapshot:y}}),E=T[0].inst,v=T[1];return u(function(){E.value=A,E.getSnapshot=y,h(E)&&v({inst:E})},[g,A,y]),l(function(){return h(E)&&v({inst:E}),g(function(){h(E)&&v({inst:E})})},[g]),c(A),A}function h(g){var y=g.getSnapshot;g=g.value;try{var A=y();return!s(g,A)}catch{return!0}}function p(g,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return useSyncExternalStoreShim_production.useSyncExternalStore=o.useSyncExternalStore!==void 0?o.useSyncExternalStore:m,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}var shimExports=requireShim();const defaultLangOptions={lang:"en",fallbackLang:"en"},LangContext=reactExports.createContext(void 0);function useLang(){const o=shimExports.useSyncExternalStore(subscribeConfigure$1,getConfig$2,getConfig$2);return reactExports.useContext(LangContext)||o}function addListener(o,e){const s=typeof o.addEventListener!="function";return s?o.addListener(e):o.addEventListener("change",e),()=>{s?o.removeListener(e):o.removeEventListener("change",e)}}function useSystemTheme(){const[o,e]=reactExports.useState(getSystemTheme());return reactExports.useEffect(()=>{if(!supportsMatchMedia)return;function s(u){e(u.matches?"dark":"light")}const a=getDarkMediaMatch(),l=addListener(a,s);return()=>l()},[]),o}const b$1s=block$5(ROOT_CLASSNAME);function ThemeProvider({theme:o,systemLightTheme:e,systemDarkTheme:s,direction:a,scoped:l=!1,rootClassName:u="",children:c,layout:d,lang:h,fallbackLang:p}){const m=reactExports.useContext(ThemeContext),g=reactExports.useContext(ThemeSettingsContext),y=reactExports.useContext(LangContext),T=m!==void 0||l,E=(m==null?void 0:m.theme)??DEFAULT_THEME,v=o??E,_=e??(g==null?void 0:g.systemLightTheme)??DEFAULT_LIGHT_THEME,w=s??(g==null?void 0:g.systemDarkTheme)??DEFAULT_DARK_THEME,R=(m==null?void 0:m.direction)??DEFAULT_DIRECTION,k=a??R,I=useSystemTheme()==="light"?_:w,P=v==="system"?I:v,N=reactExports.useRef("");useLayoutEffect(()=>{T||(updateBodyClassName({theme:P,className:u,prevClassName:N.current}),updateBodyDirection(k),N.current=u)},[T,P,k,u]);const L=reactExports.useMemo(()=>({theme:v,themeValue:P,direction:k,scoped:T}),[v,P,k,T]),Q=reactExports.useMemo(()=>({systemLightTheme:_,systemDarkTheme:w}),[_,w]),j=h||p?{...defaultLangOptions,...y,...h?{lang:h}:void 0,...p?{fallbackLang:p}:void 0}:y;return jsxRuntimeExports.jsx(PrivateLayoutProvider,{...d,children:jsxRuntimeExports.jsx(ThemeContext.Provider,{value:L,children:jsxRuntimeExports.jsx(ThemeSettingsContext.Provider,{value:Q,children:jsxRuntimeExports.jsx(LangContext.Provider,{value:j,children:T?jsxRuntimeExports.jsx("div",{className:b$1s({theme:P},u),dir:k,children:c}):c})})})})}ThemeProvider.displayName="ThemeProvider";function useDirection(){return useThemeContext().direction}function _extends(){return _extends=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)({}).hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends.apply(null,arguments)}function _objectWithoutPropertiesLoose(o,e){if(o==null)return{};var s={};for(var a in o)if({}.hasOwnProperty.call(o,a)){if(e.indexOf(a)!==-1)continue;s[a]=o[a]}return s}function _setPrototypeOf(o,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},_setPrototypeOf(o,e)}function _inheritsLoose(o,e){o.prototype=Object.create(e.prototype),o.prototype.constructor=o,_setPrototypeOf(o,e)}function hasClass$1(o,e){return o.classList?!!e&&o.classList.contains(e):(" "+(o.className.baseVal||o.className)+" ").indexOf(" "+e+" ")!==-1}function addClass$1(o,e){o.classList?o.classList.add(e):hasClass$1(o,e)||(typeof o.className=="string"?o.className=o.className+" "+e:o.setAttribute("class",(o.className&&o.className.baseVal||"")+" "+e))}function replaceClassName(o,e){return o.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass$2(o,e){o.classList?o.classList.remove(e):typeof o.className=="string"?o.className=replaceClassName(o.className,e):o.setAttribute("class",replaceClassName(o.className&&o.className.baseVal||"",e))}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs$1(reactDomExports),config$1={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function(e){return e.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=(function(o){_inheritsLoose(e,o);function e(a,l){var u;u=o.call(this,a,l)||this;var c=l,d=c&&!c.isMounting?a.enter:a.appear,h;return u.appearStatus=null,a.in?d?(h=EXITED,u.appearStatus=ENTERING):h=ENTERED:a.unmountOnExit||a.mountOnEnter?h=UNMOUNTED:h=EXITED,u.state={status:h},u.nextCallback=null,u}e.getDerivedStateFromProps=function(l,u){var c=l.in;return c&&u.status===UNMOUNTED?{status:EXITED}:null};var s=e.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(l){var u=null;if(l!==this.props){var c=this.state.status;this.props.in?c!==ENTERING&&c!==ENTERED&&(u=ENTERING):(c===ENTERING||c===ENTERED)&&(u=EXITING)}this.updateStatus(!1,u)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var l=this.props.timeout,u,c,d;return u=c=d=l,l!=null&&typeof l!="number"&&(u=l.exit,c=l.enter,d=l.appear!==void 0?l.appear:c),{exit:u,enter:c,appear:d}},s.updateStatus=function(l,u){if(l===void 0&&(l=!1),u!==null)if(this.cancelNextCallback(),u===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var c=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);c&&forceReflow(c)}this.performEnter(l)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},s.performEnter=function(l){var u=this,c=this.props.enter,d=this.context?this.context.isMounting:l,h=this.props.nodeRef?[d]:[ReactDOM.findDOMNode(this),d],p=h[0],m=h[1],g=this.getTimeouts(),y=d?g.appear:g.enter;if(!l&&!c||config$1.disabled){this.safeSetState({status:ENTERED},function(){u.props.onEntered(p)});return}this.props.onEnter(p,m),this.safeSetState({status:ENTERING},function(){u.props.onEntering(p,m),u.onTransitionEnd(y,function(){u.safeSetState({status:ENTERED},function(){u.props.onEntered(p,m)})})})},s.performExit=function(){var l=this,u=this.props.exit,c=this.getTimeouts(),d=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!u||config$1.disabled){this.safeSetState({status:EXITED},function(){l.props.onExited(d)});return}this.props.onExit(d),this.safeSetState({status:EXITING},function(){l.props.onExiting(d),l.onTransitionEnd(c.exit,function(){l.safeSetState({status:EXITED},function(){l.props.onExited(d)})})})},s.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(l,u){u=this.setNextCallback(u),this.setState(l,u)},s.setNextCallback=function(l){var u=this,c=!0;return this.nextCallback=function(d){c&&(c=!1,u.nextCallback=null,l(d))},this.nextCallback.cancel=function(){c=!1},this.nextCallback},s.onTransitionEnd=function(l,u){this.setNextCallback(u);var c=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),d=l==null&&!this.props.addEndListener;if(!c||d){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[c,this.nextCallback],p=h[0],m=h[1];this.props.addEndListener(p,m)}l!=null&&setTimeout(this.nextCallback,l)},s.render=function(){var l=this.state.status;if(l===UNMOUNTED)return null;var u=this.props,c=u.children;u.in,u.mountOnEnter,u.unmountOnExit,u.appear,u.enter,u.exit,u.timeout,u.addEndListener,u.onEnter,u.onEntering,u.onEntered,u.onExit,u.onExiting,u.onExited,u.nodeRef;var d=_objectWithoutPropertiesLoose(u,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof c=="function"?c(l,d):React.cloneElement(React.Children.only(c),d))},e})(React.Component);Transition.contextType=TransitionGroupContext,Transition.propTypes={};function noop$a(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$a,onEntering:noop$a,onEntered:noop$a,onExit:noop$a,onExiting:noop$a,onExited:noop$a},Transition.UNMOUNTED=UNMOUNTED,Transition.EXITED=EXITED,Transition.ENTERING=ENTERING,Transition.ENTERED=ENTERED,Transition.EXITING=EXITING;var _addClass=function(e,s){return e&&s&&s.split(" ").forEach(function(a){return addClass$1(e,a)})},removeClass$1=function(e,s){return e&&s&&s.split(" ").forEach(function(a){return removeClass$2(e,a)})},CSSTransition=(function(o){_inheritsLoose(e,o);function e(){for(var a,l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a=o.call.apply(o,[this].concat(u))||this,a.appliedClasses={appear:{},enter:{},exit:{}},a.onEnter=function(d,h){var p=a.resolveArguments(d,h),m=p[0],g=p[1];a.removeClasses(m,"exit"),a.addClass(m,g?"appear":"enter","base"),a.props.onEnter&&a.props.onEnter(d,h)},a.onEntering=function(d,h){var p=a.resolveArguments(d,h),m=p[0],g=p[1],y=g?"appear":"enter";a.addClass(m,y,"active"),a.props.onEntering&&a.props.onEntering(d,h)},a.onEntered=function(d,h){var p=a.resolveArguments(d,h),m=p[0],g=p[1],y=g?"appear":"enter";a.removeClasses(m,y),a.addClass(m,y,"done"),a.props.onEntered&&a.props.onEntered(d,h)},a.onExit=function(d){var h=a.resolveArguments(d),p=h[0];a.removeClasses(p,"appear"),a.removeClasses(p,"enter"),a.addClass(p,"exit","base"),a.props.onExit&&a.props.onExit(d)},a.onExiting=function(d){var h=a.resolveArguments(d),p=h[0];a.addClass(p,"exit","active"),a.props.onExiting&&a.props.onExiting(d)},a.onExited=function(d){var h=a.resolveArguments(d),p=h[0];a.removeClasses(p,"exit"),a.addClass(p,"exit","done"),a.props.onExited&&a.props.onExited(d)},a.resolveArguments=function(d,h){return a.props.nodeRef?[a.props.nodeRef.current,d]:[d,h]},a.getClassNames=function(d){var h=a.props.classNames,p=typeof h=="string",m=p&&h?h+"-":"",g=p?""+m+d:h[d],y=p?g+"-active":h[d+"Active"],A=p?g+"-done":h[d+"Done"];return{baseClassName:g,activeClassName:y,doneClassName:A}},a}var s=e.prototype;return s.addClass=function(l,u,c){var d=this.getClassNames(u)[c+"ClassName"],h=this.getClassNames("enter"),p=h.doneClassName;u==="appear"&&c==="done"&&p&&(d+=" "+p),c==="active"&&l&&forceReflow(l),d&&(this.appliedClasses[u][c]=d,_addClass(l,d))},s.removeClasses=function(l,u){var c=this.appliedClasses[u],d=c.base,h=c.active,p=c.done;this.appliedClasses[u]={},d&&removeClass$1(l,d),h&&removeClass$1(l,h),p&&removeClass$1(l,p)},s.render=function(){var l=this.props;l.classNames;var u=_objectWithoutPropertiesLoose(l,["classNames"]);return React.createElement(Transition,_extends({},u,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e})(React.Component);CSSTransition.defaultProps={classNames:""},CSSTransition.propTypes={};function _assertThisInitialized(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function getChildMapping(o,e){var s=function(u){return e&&reactExports.isValidElement(u)?e(u):u},a=Object.create(null);return o&&reactExports.Children.map(o,function(l){return l}).forEach(function(l){a[l.key]=s(l)}),a}function mergeChildMappings(o,e){o=o||{},e=e||{};function s(m){return m in e?e[m]:o[m]}var a=Object.create(null),l=[];for(var u in o)u in e?l.length&&(a[u]=l,l=[]):l.push(u);var c,d={};for(var h in e){if(a[h])for(c=0;c<a[h].length;c++){var p=a[h][c];d[a[h][c]]=s(p)}d[h]=s(h)}for(c=0;c<l.length;c++)d[l[c]]=s(l[c]);return d}function getProp$1(o,e,s){return s[e]!=null?s[e]:o.props[e]}function getInitialChildMapping(o,e){return getChildMapping(o.children,function(s){return reactExports.cloneElement(s,{onExited:e.bind(null,s),in:!0,appear:getProp$1(s,"appear",o),enter:getProp$1(s,"enter",o),exit:getProp$1(s,"exit",o)})})}function getNextChildMapping(o,e,s){var a=getChildMapping(o.children),l=mergeChildMappings(e,a);return Object.keys(l).forEach(function(u){var c=l[u];if(reactExports.isValidElement(c)){var d=u in e,h=u in a,p=e[u],m=reactExports.isValidElement(p)&&!p.props.in;h&&(!d||m)?l[u]=reactExports.cloneElement(c,{onExited:s.bind(null,c),in:!0,exit:getProp$1(c,"exit",o),enter:getProp$1(c,"enter",o)}):!h&&d&&!m?l[u]=reactExports.cloneElement(c,{in:!1}):h&&d&&reactExports.isValidElement(p)&&(l[u]=reactExports.cloneElement(c,{onExited:s.bind(null,c),in:p.props.in,exit:getProp$1(c,"exit",o),enter:getProp$1(c,"enter",o)}))}}),l}var values$1=Object.values||function(o){return Object.keys(o).map(function(e){return o[e]})},defaultProps$1={component:"div",childFactory:function(e){return e}},TransitionGroup=(function(o){_inheritsLoose(e,o);function e(a,l){var u;u=o.call(this,a,l)||this;var c=u.handleExited.bind(_assertThisInitialized(u));return u.state={contextValue:{isMounting:!0},handleExited:c,firstRender:!0},u}var s=e.prototype;return s.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},s.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(l,u){var c=u.children,d=u.handleExited,h=u.firstRender;return{children:h?getInitialChildMapping(l,d):getNextChildMapping(l,c,d),firstRender:!1}},s.handleExited=function(l,u){var c=getChildMapping(this.props.children);l.key in c||(l.props.onExited&&l.props.onExited(u),this.mounted&&this.setState(function(d){var h=_extends({},d.children);return delete h[l.key],{children:h}}))},s.render=function(){var l=this.props,u=l.component,c=l.childFactory,d=_objectWithoutPropertiesLoose(l,["component","childFactory"]),h=this.state.contextValue,p=values$1(this.state.children).map(c);return delete d.appear,delete d.enter,delete d.exit,u===null?React.createElement(TransitionGroupContext.Provider,{value:h},p):React.createElement(TransitionGroupContext.Provider,{value:h},React.createElement(u,d,p))},e})(React.Component);TransitionGroup.propTypes={},TransitionGroup.defaultProps=defaultProps$1;function getCSSTransitionClassNames(o){return{appear:modsClassName(o({appear:!0})),appearActive:modsClassName(o({appear:"active"})),appearDone:modsClassName(o({appear:"done"})),enter:modsClassName(o({enter:!0})),enterActive:modsClassName(o({enter:"active"})),enterDone:modsClassName(o({enter:"done"})),exit:modsClassName(o({exit:!0})),exitActive:modsClassName(o({exit:"active"})),exitDone:modsClassName(o({exit:"done"}))}}const ArrowChevronRight=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 7.25a.75.75 0 0 0 0 1.5h5.69l-2.72 2.72a.75.75 0 1 0 1.06 1.06l4-4a.75.75 0 0 0 0-1.06l-4-4a.75.75 0 0 0-1.06 1.06l2.72 2.72zm7.47 4.22a.75.75 0 1 0 1.06 1.06l4-4a.75.75 0 0 0 0-1.06l-4-4a.75.75 0 1 0-1.06 1.06L12.94 8z",clipRule:"evenodd"})),ArrowDown=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 1.25a.75.75 0 0 1 .75.75v10.19l2.72-2.72a.75.75 0 1 1 1.06 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2A.75.75 0 0 1 8 1.25",clipRule:"evenodd"})),ArrowLeft=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.75 8a.75.75 0 0 1-.75.75H3.81l2.72 2.72a.75.75 0 1 1-1.06 1.06l-4-4a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 1.06L3.81 7.25H14a.75.75 0 0 1 .75.75",clipRule:"evenodd"})),ArrowRight=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.25 8A.75.75 0 0 1 2 7.25h10.19L9.47 4.53a.75.75 0 0 1 1.06-1.06l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 1 1-1.06-1.06l2.72-2.72H2A.75.75 0 0 1 1.25 8",clipRule:"evenodd"})),ArrowUp=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 14.75a.75.75 0 0 1-.75-.75V3.81L4.53 6.53a.75.75 0 0 1-1.06-1.06l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1-1.06 1.06L8.75 3.81V14a.75.75 0 0 1-.75.75",clipRule:"evenodd"})),ArrowUpRightFromSquare=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10 1.5A.75.75 0 0 0 10 3h1.94L6.97 7.97a.75.75 0 0 0 1.06 1.06L13 4.06V6a.75.75 0 0 0 1.5 0V2.25a.75.75 0 0 0-.75-.75zM7.5 3.25a.75.75 0 0 0-.75-.75H4.5a3 3 0 0 0-3 3v6a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3V9.25a.75.75 0 0 0-1.5 0v2.25a1.5 1.5 0 0 1-1.5 1.5h-6A1.5 1.5 0 0 1 3 11.5v-6A1.5 1.5 0 0 1 4.5 4h2.25a.75.75 0 0 0 .75-.75",clipRule:"evenodd"})),ArrowUturnCcwLeft=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.47 4.72a.75.75 0 0 0 0 1.06l3 3a.75.75 0 0 0 1.06-1.06L4.81 6H9a3.25 3.25 0 0 1 0 6.5H8A.75.75 0 0 0 8 14h1a4.75 4.75 0 1 0 0-9.5H4.81l1.72-1.72a.75.75 0 0 0-1.06-1.06z",clipRule:"evenodd"})),ArrowUturnCwLeft=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.47 11.28a.75.75 0 0 1 0-1.06l3-3a.75.75 0 0 1 1.06 1.06L4.81 10H9a3.25 3.25 0 0 0 0-6.5H8A.75.75 0 0 1 8 2h1a4.75 4.75 0 1 1 0 9.5H4.81l1.72 1.72a.75.75 0 1 1-1.06 1.06z",clipRule:"evenodd"})),ArrowUturnCwRight=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.53 4.72a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 1 1-1.06-1.06L11.19 6H7a3.25 3.25 0 0 0 0 6.5h1A.75.75 0 0 1 8 14H7a4.75 4.75 0 1 1 0-9.5h4.19L9.47 2.78a.75.75 0 0 1 1.06-1.06z",clipRule:"evenodd"})),ArrowsRotateRight=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 1.5a6.5 6.5 0 0 0-6.445 5.649.75.75 0 1 0 1.488.194A5.001 5.001 0 0 1 11.57 4.5h-1.32a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-1.5 0v1.06A6.48 6.48 0 0 0 8 1.5m-5.25 13a.75.75 0 0 1-.75-.75v-3a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5H4.43a5.001 5.001 0 0 0 8.528-2.843.75.75 0 1 1 1.487.194A6.501 6.501 0 0 1 3.5 12.691v1.059a.75.75 0 0 1-.75.75",clipRule:"evenodd"})),Bold$1=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.25 2.25A.75.75 0 0 0 3.5 3v10c0 .414.336.75.75.75H9.5a3.25 3.25 0 0 0 1.477-6.146A3.25 3.25 0 0 0 8.5 2.25zm3.5 5a1.75 1.75 0 1 0 0-3.5h-2v3.5zm-2 1.5v3.5h3a1.75 1.75 0 1 0 0-3.5z",clipRule:"evenodd"})),BroomMotion=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"M10.037 1.026a.75.75 0 0 1 .921.527l1.303 4.766c1.425.5 2.443 1.896 2.215 3.51-.238 1.675-.608 2.956-.922 3.826-.157.435-.3.767-.408.994a7 7 0 0 1-.128.264l-.04.072-.011.022-.004.007-.002.003-.001.002a.75.75 0 0 1-.764.368L3.49 14.053c-.866-.133-1.088-1.236-.43-1.73l.31-.24c.794-.643 2.066-1.844 2.911-3.49.774-1.506 2.406-2.872 4.34-2.585l-1.11-4.06a.75.75 0 0 1 .527-.922m.372 6.468c-1.06-.162-2.183.594-2.795 1.785-.782 1.523-1.867 2.695-2.724 3.471l4.152.636 1.312-1.61a.434.434 0 0 1 .766.34l-.238 1.551.991.152c.077-.175.171-.399.27-.674.283-.78.625-1.96.847-3.526.132-.929-.553-1.815-1.58-1.973zm-7.534.787a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5m-1.125-3a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5m3.64-2a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5"}),reactExports.createElement("path",{fillRule:"evenodd",d:"M10.037 1.027a.75.75 0 0 1 .921.526l1.303 4.767c1.425.499 2.444 1.895 2.215 3.51-.238 1.674-.608 2.954-.922 3.825-.158.434-.3.767-.408.995a7 7 0 0 1-.128.263l-.04.072-.011.021-.004.008-.002.003h-.001a.75.75 0 0 1-.764.369L3.49 14.053c-.866-.133-1.088-1.236-.43-1.73l.31-.24c.794-.642 2.066-1.844 2.911-3.49.774-1.506 2.406-2.872 4.34-2.585l-1.11-4.06a.75.75 0 0 1 .527-.921m.372 6.466c-1.06-.162-2.183.596-2.795 1.786-.782 1.523-1.867 2.695-2.724 3.471l4.152.636 1.312-1.61a.434.434 0 0 1 .766.34l-.238 1.551.991.152c.077-.174.171-.399.27-.673.283-.78.625-1.962.847-3.528.132-.929-.553-1.814-1.58-1.971z",clipRule:"evenodd"}),reactExports.createElement("path",{d:"M2.875 8.281a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5m-1.125-3a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5m3.64-2a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5"}))),Check=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.488 3.43a.75.75 0 0 1 .081 1.058l-6 7a.75.75 0 0 1-1.1.042l-3.5-3.5A.75.75 0 0 1 4.03 6.97l2.928 2.927 5.473-6.385a.75.75 0 0 1 1.057-.081",clipRule:"evenodd"})),ChevronDown=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.97 5.47a.75.75 0 0 1 1.06 0L8 9.44l3.97-3.97a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 0 1 0-1.06",clipRule:"evenodd"})),ChevronLeft=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.53 2.97a.75.75 0 0 1 0 1.06L6.56 8l3.97 3.97a.75.75 0 1 1-1.06 1.06l-4.5-4.5a.75.75 0 0 1 0-1.06l4.5-4.5a.75.75 0 0 1 1.06 0",clipRule:"evenodd"})),ChevronRight=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.47 13.03a.75.75 0 0 1 0-1.06L9.44 8 5.47 4.03a.75.75 0 0 1 1.06-1.06l4.5 4.5a.75.75 0 0 1 0 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0",clipRule:"evenodd"})),ChevronUp=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.03 10.53a.75.75 0 0 1-1.06 0L8 6.56l-3.97 3.97a.75.75 0 1 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06",clipRule:"evenodd"})),ChevronsExpandUpRight=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.754 2.004a.75.75 0 0 0 0 1.5h4.75v4.742a.75.75 0 0 0 1.5 0V2.754a.75.75 0 0 0-.75-.75zm.492 11.992a.75.75 0 0 0 0-1.5h-4.75V7.754a.75.75 0 0 0-1.5 0v5.492a.75.75 0 0 0 .75.75z",clipRule:"evenodd"})),CircleCheck=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.5 8a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0m-3.9-1.55a.75.75 0 1 0-1.2-.9L7.419 8.858 6.03 7.47a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.13-.08z",clipRule:"evenodd"})),CircleInfo=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 13.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14m1-9.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-.25 3a.75.75 0 0 0-1.5 0V11a.75.75 0 0 0 1.5 0z",clipRule:"evenodd"})),CircleQuestion=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 13.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14M6.44 4.54c.43-.354.994-.565 1.56-.565 1.217 0 2.34.82 2.34 2.14 0 .377-.078.745-.298 1.1-.208.339-.513.614-.875.867-.217.153-.325.257-.379.328-.038.052-.038.07-.038.089a.75.75 0 0 1-1.5 0c0-.794.544-1.286 1.057-1.645.28-.196.4-.332.458-.426a.54.54 0 0 0 .075-.312c0-.3-.244-.641-.84-.641a1 1 0 0 0-.608.223c-.167.138-.231.287-.231.418a.75.75 0 0 1-1.5 0c0-.674.345-1.22.78-1.577M8 12a1 1 0 1 0 0-2 1 1 0 0 0 0 2",clipRule:"evenodd"})),Code$1=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.218 3.216a.75.75 0 0 0-1.436-.431l-3 10a.75.75 0 0 0 1.436.43zM4.53 4.97a.75.75 0 0 1 0 1.06L2.56 8l1.97 1.97a.75.75 0 0 1-1.06 1.06l-2.5-2.5a.75.75 0 0 1 0-1.06l2.5-2.5a.75.75 0 0 1 1.06 0m6.94 6.06a.75.75 0 0 1 0-1.06L13.44 8l-1.97-1.97a.75.75 0 0 1 1.06-1.06l2.5 2.5a.75.75 0 0 1 0 1.06l-2.5 2.5a.75.75 0 0 1-1.06 0",clipRule:"evenodd"})),Copy=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 2.5H8A1.5 1.5 0 0 0 6.5 4v1H8a3 3 0 0 1 3 3v1.5h1A1.5 1.5 0 0 0 13.5 8V4A1.5 1.5 0 0 0 12 2.5M11 11h1a3 3 0 0 0 3-3V4a3 3 0 0 0-3-3H8a3 3 0 0 0-3 3v1H4a3 3 0 0 0-3 3v4a3 3 0 0 0 3 3h4a3 3 0 0 0 3-3zM4 6.5h4A1.5 1.5 0 0 1 9.5 8v4A1.5 1.5 0 0 1 8 13.5H4A1.5 1.5 0 0 1 2.5 12V8A1.5 1.5 0 0 1 4 6.5",clipRule:"evenodd"})),CopyCheck=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"m8 9.076.085-.107a.751.751 0 1 0-1.171-.937L5.438 9.877 5.03 9.47a.747.747 0 0 0-1.06 0 .75.75 0 0 0 0 1.06l.407.408.593.592a.75.75 0 0 0 1.116-.061l.522-.654h.001z"}),reactExports.createElement("path",{fillRule:"evenodd",d:"M12 11a3 3 0 0 0 3-3V4a3 3 0 0 0-3-3H8a3 3 0 0 0-3 3v1H4a3 3 0 0 0-3 3v4a3 3 0 0 0 3 3h4a3 3 0 0 0 3-3v-1zM4 6.5A1.5 1.5 0 0 0 2.5 8v4A1.5 1.5 0 0 0 4 13.5h4A1.5 1.5 0 0 0 9.5 12V8A1.5 1.5 0 0 0 8 6.5zM13.5 4A1.5 1.5 0 0 0 12 2.5H8A1.5 1.5 0 0 0 6.5 4v1H8a3 3 0 0 1 3 3v1.5h1A1.5 1.5 0 0 0 13.5 8z",clipRule:"evenodd"}))),CopyXmark=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.5 12c0 .414-.168.79-.44 1.06A1.5 1.5 0 0 1 8 13.5H4a1.5 1.5 0 0 1-1.06-.44A1.5 1.5 0 0 1 2.5 12V8c0-.414.168-.79.44-1.06A1.5 1.5 0 0 1 4 6.5h4c.414 0 .79.168 1.06.44.272.27.44.646.44 1.06zm-1.47-1.03L7.06 10l.97-.97a.75.75 0 0 0-1.06-1.06L6 8.94l-.97-.97a.75.75 0 0 0-1.06 1.06l.97.97-.97.97a.75.75 0 0 0 1.06 1.06l.97-.97.97.97a.75.75 0 0 0 1.06-1.06M6.5 5H8a3 3 0 0 1 3 3v1.5h1A1.5 1.5 0 0 0 13.5 8V4A1.5 1.5 0 0 0 12 2.5H8A1.5 1.5 0 0 0 6.5 4zM5 4a3 3 0 0 1 3-3h4a3 3 0 0 1 3 3v4a3 3 0 0 1-3 3h-1v1a3 3 0 0 1-3 3H4a3 3 0 0 1-3-3V8a3 3 0 0 1 3-3h1z",clipRule:"evenodd"})),Ellipsis=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M9.5 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m5 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0",clipRule:"evenodd"})),Eye=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.87 8.515 1.641 8l.229-.515a6.708 6.708 0 0 1 12.26 0l.228.515-.229.515a6.708 6.708 0 0 1-12.259 0M.5 6.876l-.26.585a1.33 1.33 0 0 0 0 1.079l.26.584a8.208 8.208 0 0 0 15 0l.26-.584a1.33 1.33 0 0 0 0-1.08l-.26-.584a8.208 8.208 0 0 0-15 0M9.5 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0M11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0",clipRule:"evenodd"})),FaceSmile=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.5 8a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0M6.67 9.665a.75.75 0 0 0-1.34.67c.403.809 1.452 1.415 2.67 1.415s2.267-.606 2.67-1.415a.75.75 0 1 0-1.34-.67c-.097.191-.548.585-1.33.585s-1.233-.394-1.33-.585M10 8a.75.75 0 0 1-.75-.75v-1a.75.75 0 0 1 1.5 0v1A.75.75 0 0 1 10 8m-4.75-.75a.75.75 0 0 0 1.5 0v-1a.75.75 0 0 0-1.5 0z",clipRule:"evenodd"})),FileCode=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5 13.5h6a1.5 1.5 0 0 0 1.5-1.5V7.243a1.5 1.5 0 0 0-.44-1.061L8.819 2.939a1.5 1.5 0 0 0-1.06-.439H5A1.5 1.5 0 0 0 3.5 4v8A1.5 1.5 0 0 0 5 13.5m9-6.257a3 3 0 0 0-.879-2.122L9.88 1.88A3 3 0 0 0 7.757 1H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3zM8.72 10.53a.75.75 0 0 1 0-1.06l.97-.97-.97-.97a.75.75 0 0 1 1.06-1.06l1.5 1.5a.75.75 0 0 1 0 1.06l-1.5 1.5a.75.75 0 0 1-1.06 0m-1.44-3a.75.75 0 0 0-1.06-1.06l-1.5 1.5a.75.75 0 0 0 0 1.06l1.5 1.5a.75.75 0 1 0 1.06-1.06l-.97-.97z",clipRule:"evenodd"})),Font=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 2.25c-.618 0-1.169.39-1.373.974l-3.335 9.528a.75.75 0 0 0 1.416.496L5.845 10h4.31l1.137 3.248a.75.75 0 0 0 1.416-.496L9.373 3.224A1.455 1.455 0 0 0 8 2.25M9.63 8.5 8 3.842 6.37 8.5z",clipRule:"evenodd"})),FontCursor=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10 2.25a.75.75 0 0 1 .75-.75c.576 0 1.102.217 1.5.573a2.24 2.24 0 0 1 1.5-.573.75.75 0 0 1 0 1.5.75.75 0 0 0-.75.75v8.75c0 .414.336.75.75.75a.75.75 0 0 1 0 1.5 2.24 2.24 0 0 1-1.5-.573 2.24 2.24 0 0 1-1.5.573.75.75 0 0 1 0-1.5.75.75 0 0 0 .75-.75V3.75a.75.75 0 0 0-.75-.75.75.75 0 0 1-.75-.75M5.75 3c-.618 0-1.168.39-1.374.972L1.543 12a.75.75 0 1 0 1.414.5L3.84 10h3.822l.882 2.5a.75.75 0 1 0 1.414-.5L7.124 3.972A1.46 1.46 0 0 0 5.75 3m1.381 5.5L5.75 4.587 4.369 8.5z",clipRule:"evenodd"})),Gear=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.199 2H8.8a.2.2 0 0 1 .2.2c0 1.808 1.958 2.939 3.524 2.034a.2.2 0 0 1 .271.073l.802 1.388a.2.2 0 0 1-.073.272c-1.566.904-1.566 3.164 0 4.069a.2.2 0 0 1 .073.271l-.802 1.388a.2.2 0 0 1-.271.073C10.958 10.863 9 11.993 9 13.8a.2.2 0 0 1-.199.2H7.2a.2.2 0 0 1-.2-.2c0-1.808-1.958-2.938-3.524-2.034a.2.2 0 0 1-.272-.073l-.8-1.388a.2.2 0 0 1 .072-.271c1.566-.905 1.566-3.165 0-4.07a.2.2 0 0 1-.073-.27l.801-1.389a.2.2 0 0 1 .272-.072C5.042 5.138 7 4.007 7 2.199c0-.11.089-.199.199-.199M5.5 2.2c0-.94.76-1.7 1.699-1.7H8.8c.94 0 1.7.76 1.7 1.7a.85.85 0 0 0 1.274.735 1.7 1.7 0 0 1 2.32.622l.802 1.388c.469.813.19 1.851-.622 2.32a.85.85 0 0 0 0 1.472 1.7 1.7 0 0 1 .622 2.32l-.802 1.388a1.7 1.7 0 0 1-2.32.622.85.85 0 0 0-1.274.735c0 .939-.76 1.7-1.699 1.7H7.2a1.7 1.7 0 0 1-1.699-1.7.85.85 0 0 0-1.274-.735 1.7 1.7 0 0 1-2.32-.622l-.802-1.388a1.7 1.7 0 0 1 .622-2.32.85.85 0 0 0 0-1.471 1.7 1.7 0 0 1-.622-2.32l.801-1.389a1.7 1.7 0 0 1 2.32-.622A.85.85 0 0 0 5.5 2.2m4 5.8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0M11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0",clipRule:"evenodd"})),Grip=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7 3a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0M5.5 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m5 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m0-5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M7 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m3.5 1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3",clipRule:"evenodd"})),GripHorizontal=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 9a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m6.5 1.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0m0-5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0m-5 0a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0M13 9a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m1.5-3.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0",clipRule:"evenodd"})),Heading$1=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.25 2.25A.75.75 0 0 1 5 3v4.25h6V3a.75.75 0 0 1 1.5 0v10a.75.75 0 0 1-1.5 0V8.75H5V13a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75",clipRule:"evenodd"})),Heading1=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14 4.25a.75.75 0 0 0-1.248-.56l-2.25 2a.75.75 0 0 0 .996 1.12l1.002-.89v5.83a.75.75 0 0 0 1.5 0zm-11.5 0a.75.75 0 0 0-1.5 0v7.496a.75.75 0 0 0 1.5 0V8.75h4v2.996a.75.75 0 0 0 1.5 0V4.25a.75.75 0 0 0-1.5 0v3h-4z",clipRule:"evenodd"})),Heading2=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.5 4.25a.75.75 0 0 0-1.5 0v7.496a.75.75 0 0 0 1.5 0V8.75h4v2.996a.75.75 0 0 0 1.5 0V4.25a.75.75 0 0 0-1.5 0v3h-4zm8.403 1.783A1.364 1.364 0 0 1 12.226 5h.226a1.071 1.071 0 0 1 .672 1.906l-3.61 2.906a1.51 1.51 0 0 0 .947 2.688h3.789a.75.75 0 0 0 0-1.5h-3.793l-.003-.003-.003-.004v-.004a.01.01 0 0 1 .004-.008l3.61-2.907A2.571 2.571 0 0 0 12.452 3.5h-.226c-1.314 0-2.46.894-2.778 2.17l-.038.148a.75.75 0 1 0 1.456.364z",clipRule:"evenodd"})),Heading3=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.5 4.25a.75.75 0 0 0-1.5 0v7.496a.75.75 0 0 0 1.5 0V8.75h4v2.996a.75.75 0 0 0 1.5 0V4.25a.75.75 0 0 0-1.5 0v3h-4zm8.114 1.496c.202-.504.69-.834 1.232-.834h.28a.94.94 0 0 1 .929.796l.027.18a1.15 1.15 0 0 1-.911 1.303l-.8.16a.662.662 0 0 0 .129 1.31h1.21a.89.89 0 0 1 .882 1.017 1.67 1.67 0 0 1-1.414 1.414l-.103.015a1.81 1.81 0 0 1-1.828-.9l-.018-.033a.662.662 0 0 0-1.152.652l.018.032a3.13 3.13 0 0 0 3.167 1.559l.103-.015a2.99 2.99 0 0 0 2.537-2.537 2.21 2.21 0 0 0-1.058-2.216 2.47 2.47 0 0 0 .547-1.963l-.028-.179a2.26 2.26 0 0 0-2.237-1.919h-.28a2.65 2.65 0 0 0-2.46 1.666.662.662 0 1 0 1.228.492",clipRule:"evenodd"})),Heading4=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.25 4.25a.75.75 0 0 0-1.347-.454l-4 5.25A.75.75 0 0 0 9.5 10.25h3.25v1.496a.75.75 0 0 0 1.5 0V10.25h.25a.75.75 0 1 0 0-1.5h-.25zm-1.5 2.222V8.75h-1.736zM2.5 4.25a.75.75 0 1 0-1.5 0v7.496a.75.75 0 0 0 1.5 0V8.75h4v2.996a.75.75 0 0 0 1.5 0V4.25a.75.75 0 1 0-1.5 0v3h-4z",clipRule:"evenodd"})),Heading5=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.5 4.25a.75.75 0 0 0-1.5 0v7.496a.75.75 0 0 0 1.5 0V8.75h4v2.996a.75.75 0 0 0 1.5 0V4.25a.75.75 0 0 0-1.5 0v3h-4zm8-.75a1.25 1.25 0 0 0-1.25 1.25V7.5a.75.75 0 0 0 1.221.584l.033-.022c.04-.024.118-.067.236-.112.235-.091.643-.2 1.26-.2.892 0 1.534.751 1.534 1.75 0 .366-.139.735-.413 1.01-.265.268-.7.49-1.371.49-.568 0-.905-.184-1.094-.336a1.2 1.2 0 0 1-.24-.26l-.002-.003a.75.75 0 0 0-1.335.684l.671-.335-.67.336v.003l.003.003.004.01.012.02.034.06q.042.071.119.174c.102.136.254.31.467.48.436.348 1.099.664 2.031.664 1.027 0 1.86-.352 2.437-.933a2.94 2.94 0 0 0 .847-2.067c0-1.591-1.096-3.25-3.034-3.25a5.6 5.6 0 0 0-1.25.133V5H14a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"})),Heading6=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.5 4.25a.75.75 0 0 0-1.5 0v7.496a.75.75 0 0 0 1.5 0V8.75h4v2.996a.75.75 0 0 0 1.5 0V4.25a.75.75 0 0 0-1.5 0v3h-4zm9.9 2.532a4.9 4.9 0 0 0-1.843.293L12.273 5c.888 0 1.293.251 1.801.566l.006.003a.75.75 0 0 0 .79-1.275c-.59-.365-1.286-.794-2.597-.794-.992 0-1.855.424-2.442 1.255C9.267 5.553 9 6.665 9 8c0 1.326.246 2.438.802 3.24.583.842 1.453 1.26 2.47 1.26 1.918 0 3.228-1.236 3.228-2.795 0-.984-.388-1.74-1.024-2.237-.607-.474-1.372-.661-2.076-.686M11.056 5.62c-.225.32-.41.794-.498 1.455L12.272 5c-.522 0-.92.201-1.217.62m-.021 4.765c-.233-.336-.418-.849-.495-1.58.048-.056.165-.165.436-.282.372-.16.873-.26 1.371-.242.503.018.926.15 1.206.369.25.195.447.504.447 1.055 0 .58-.48 1.295-1.727 1.295-.564 0-.956-.207-1.238-.615",clipRule:"evenodd"})),Italic$1=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.25 2a.75.75 0 0 0 0 1.5h1.317l-2.7 9H4.25a.75.75 0 1 0 0 1.5h4.5a.75.75 0 0 0 0-1.5H7.433l2.7-9h1.617a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"})),LayoutList=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 3.5h1.25v2H2.5V5A1.5 1.5 0 0 1 4 3.5m2.75 2v-2H12A1.5 1.5 0 0 1 13.5 5v.5zM2.5 7h2.75v2H2.5zm0 3.5v.5A1.5 1.5 0 0 0 4 12.5h1.25v-2zm4.25 0v2H12a1.5 1.5 0 0 0 1.5-1.5v-.5zM13.5 9V7H6.75v2zM1 5a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3H4a3 3 0 0 1-3-3z",clipRule:"evenodd"})),LayoutTabs=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.999 3.5h.242c.559 0 1.049.37 1.202.907l.171.598A2.75 2.75 0 0 0 8.26 7h5.24v4a1.5 1.5 0 0 1-1.5 1.5H4A1.5 1.5 0 0 1 2.5 11V5a1.5 1.5 0 0 1 1.499-1.5m9.501 2h-1.242a1.25 1.25 0 0 1-1.201-.907l-.171-.598a3 3 0 0 0-.195-.495H12A1.5 1.5 0 0 1 13.5 5zM8.241 2H4a3 3 0 0 0-.457.035A3 3 0 0 0 2 2.764 3 3 0 0 0 1 5v6a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3zM7 3.5h1.242c.559 0 1.049.37 1.202.907l.171.598q.075.261.195.495H8.26a1.25 1.25 0 0 1-1.202-.907l-.171-.598A3 3 0 0 0 6.69 3.5z",clipRule:"evenodd"})),LetterM=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.062 2c.454 0 .876.234 1.115.62L8 7.162l2.823-4.542a1.312 1.312 0 0 1 2.427.692v9.938a.75.75 0 0 1-1.5 0V3.97L8.637 8.98a.75.75 0 0 1-1.274 0L4.25 3.97v9.28a.75.75 0 0 1-1.5 0V3.312C2.75 2.588 3.338 2 4.062 2",clipRule:"evenodd"})),Link$2=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.47 6.53a.75.75 0 0 1 1.06 1.061l-.727.727a2.743 2.743 0 0 0 3.879 3.879l.727-.727a.75.75 0 0 1 1.06 1.06l-.726.727a4.243 4.243 0 0 1-6-6zm8 1.879a.75.75 0 0 0 1.06 1.06l.727-.726a4.243 4.243 0 0 0-6-6l-.727.727a.75.75 0 0 0 1.061 1.06l.727-.727a2.743 2.743 0 0 1 3.879 3.879zm-.94-1.879a.75.75 0 1 0-1.06-1.06l-4 4a.75.75 0 1 0 1.06 1.06z",clipRule:"evenodd"})),ListOl=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.21 2.5a.5.5 0 0 0-.796-.403l-.71.524a.5.5 0 0 0 .507.856V5a.5.5 0 0 0 1 0zm2.54.5a.75.75 0 1 0 0 1.5h8.5a.75.75 0 0 0 0-1.5zm0 8.5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5zM5 8a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 5 8m-2.596-.67c-.07.051-.087.097-.09.116a.5.5 0 0 1-.988-.149c.051-.345.26-.61.495-.779.236-.169.531-.268.83-.268.345 0 .666.109.902.343s.337.543.337.85c0 .51-.321.855-.76 1.278l-.02.018-.013.011h.493a.5.5 0 0 1 0 1H1.75a.5.5 0 0 1-.326-.879l1.022-.88c.223-.216.338-.344.398-.434.046-.069.046-.092.046-.111v-.002c0-.09-.027-.127-.041-.141-.013-.013-.062-.053-.199-.053a.44.44 0 0 0-.246.08M1.9 10.5a.5.5 0 0 0 0 1h.38l-.15.18a.5.5 0 0 0 .383.82c.259 0 .365.077.407.122.051.054.08.133.08.218a.02.02 0 0 1-.004.014.2.2 0 0 1-.057.052.7.7 0 0 1-.371.094.55.55 0 0 1-.258-.057c-.059-.032-.075-.061-.076-.064a.5.5 0 0 0-.91.416c.213.464.728.705 1.244.705.319 0 .651-.082.92-.258.275-.181.512-.487.512-.902 0-.293-.096-.634-.355-.906a1.3 1.3 0 0 0-.252-.206l.34-.407a.5.5 0 0 0-.383-.821z",clipRule:"evenodd"})),ListUl=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.5 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5m3.25-2a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5zm0 8.5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5zM5 8a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 5 8M3.75 8a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M2.5 13.5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})),LogoMarkdown=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.443 4.699A1.294 1.294 0 0 0 1 5.294v5.956a.75.75 0 0 0 1.5 0V6.139l1.834 3.54a.75.75 0 0 0 1.332 0L7.5 6.138v5.111a.75.75 0 0 0 1.5 0V5.294A1.294 1.294 0 0 0 6.557 4.7L5 7.703zm9.807.051a.75.75 0 0 0-1.5 0v4.69l-.47-.47a.75.75 0 1 0-1.06 1.06l1.75 1.75a.75.75 0 0 0 1.06 0l1.75-1.75a.75.75 0 1 0-1.06-1.06l-.47.47z",clipRule:"evenodd"})),Minus=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.75 8a.75.75 0 0 1 .75-.75h11a.75.75 0 0 1 0 1.5h-11A.75.75 0 0 1 1.75 8",clipRule:"evenodd"})),Paperclip=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m9.77 10.73.01-.01 3.08-3.08a3.889 3.889 0 1 0-5.5-5.5L4.73 4.77l-.01.01-1.667 1.666a5.303 5.303 0 0 0 7.5 7.5l3.167-3.166a.75.75 0 1 0-1.061-1.06l-3.166 3.166a3.803 3.803 0 1 1-5.379-5.379L5.33 6.291l.011-.01L8.421 3.2a2.39 2.39 0 0 1 3.38 3.378l-1.13 1.13-.012.012-2.995 2.994a.975.975 0 1 1-1.378-1.378L9.28 6.34a.75.75 0 0 0-1.06-1.06L5.225 8.274a2.475 2.475 0 0 0 3.5 3.5z",clipRule:"evenodd"})),Picture=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.5 3h-7A1.5 1.5 0 0 0 3 4.5v5.027l.962-.7a1.75 1.75 0 0 1 2.079.016l.928.696 2.368-2.03a1.75 1.75 0 0 1 2.325.043L13 8.787V4.5A1.5 1.5 0 0 0 11.5 3m3 7.498V4.5a3 3 0 0 0-3-3h-7a3 3 0 0 0-3 3v7a3 3 0 0 0 3 3h7a3 3 0 0 0 3-3zm-1.5.33-2.355-2.174a.25.25 0 0 0-.332-.006L7.488 11.07l-.457.392-.481-.361-1.41-1.057a.25.25 0 0 0-.296-.002L3 11.381v.119A1.5 1.5 0 0 0 4.5 13h7a1.5 1.5 0 0 0 1.5-1.5zM7.5 6a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0",clipRule:"evenodd"})),Plus=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 1.75a.75.75 0 0 1 .75.75v4.75h4.75a.75.75 0 0 1 0 1.5H8.75v4.75a.75.75 0 0 1-1.5 0V8.75H2.5a.75.75 0 0 1 0-1.5h4.75V2.5A.75.75 0 0 1 8 1.75",clipRule:"evenodd"})),QuoteClose=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("g",{clipPath:"url(#a)"},reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.589 9.67A2.75 2.75 0 0 1 1.5 7v-.25A2.75 2.75 0 0 1 4.25 4h.25a2.747 2.747 0 0 1 2.748 2.657v.003h.002V7q0 .197-.027.386-.03.392-.09.77a8 8 0 0 1-.559 1.918 7.2 7.2 0 0 1-2.162 2.801l-.098.076A.24.24 0 0 1 4.17 13a.25.25 0 0 1-.22-.367 17 17 0 0 0 .65-1.384c.197-.474.396-1.013.557-1.578a2.7 2.7 0 0 1-.657.079h-.25q-.343-.001-.661-.08m-.549 1.405A4.25 4.25 0 0 1 0 7v-.25A4.25 4.25 0 0 1 4.25 2.5h.25c1.452 0 2.733.728 3.5 1.838A4.25 4.25 0 0 1 11.5 2.5h.25A4.25 4.25 0 0 1 16 6.664V7q0 .275-.035.543c-.207 2.62-1.358 4.966-3.488 6.599a1.74 1.74 0 0 1-1.057.358c-1.341 0-2.146-1.425-1.548-2.564.111-.211.26-.508.418-.86a4.25 4.25 0 0 1-2.005-1.297 8.76 8.76 0 0 1-3.058 4.363 1.74 1.74 0 0 1-1.057.358c-1.341 0-2.146-1.425-1.548-2.564.111-.211.26-.508.418-.86m7.8-1.406q.318.079.661.08h.25a2.8 2.8 0 0 0 .657-.079 14 14 0 0 1-.68 1.865 18 18 0 0 1-.527 1.097.25.25 0 0 0 .22.367.24.24 0 0 0 .144-.049l.098-.076q.452-.358.832-.768a7.2 7.2 0 0 0 1.39-2.172 8 8 0 0 0 .498-1.779 9 9 0 0 0 .091-.77q.027-.19.027-.386v-.339H14.5v-.004A2.747 2.747 0 0 0 11.75 4h-.251a2.75 2.75 0 0 0-2.75 2.75V7c0 1.29.89 2.374 2.089 2.67",clipRule:"evenodd"})),reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:"a"},reactExports.createElement("path",{fill:"currentColor",d:"M0 0h16v16H0z"})))),Scissors=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.5 6a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m-3-1.5a3 3 0 0 0 4.524 2.585L6.939 8l-.915.915a3 3 0 1 0 1.06 1.06L8.122 8.94l5.501 3.209a.75.75 0 1 0 .756-1.296L9.488 8l4.89-2.852a.75.75 0 0 0-.756-1.296l-5.5 3.209-1.037-1.037A3 3 0 1 0 1.5 4.5m3 5.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3",clipRule:"evenodd"})),SquareCheck=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.5 3h7A1.5 1.5 0 0 1 13 4.5v7a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 3 11.5v-7A1.5 1.5 0 0 1 4.5 3m-3 1.5a3 3 0 0 1 3-3h7a3 3 0 0 1 3 3v7a3 3 0 0 1-3 3h-7a3 3 0 0 1-3-3zm10.092 1.46a.75.75 0 0 0-1.184-.92L7.43 8.869l-1.4-1.4A.75.75 0 0 0 4.97 8.53l2 2a.75.75 0 0 0 1.122-.07z",clipRule:"evenodd"})),Sticker=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.5 3h-7A1.5 1.5 0 0 0 3 4.5v7A1.5 1.5 0 0 0 4.5 13h3v-2.5a3 3 0 0 1 3-3H13v-3A1.5 1.5 0 0 0 11.5 3m1.303 6a1.5 1.5 0 0 1-.242.318l-3.243 3.243a1.5 1.5 0 0 1-.318.242V10.5A1.5 1.5 0 0 1 10.5 9zm.818 1.379a3 3 0 0 0 .879-2.122V4.5a3 3 0 0 0-3-3h-7a3 3 0 0 0-3 3v7a3 3 0 0 0 3 3h3.757a3 3 0 0 0 2.122-.879z",clipRule:"evenodd"})),Strikethrough$1=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.502 2.757C6.214 2.236 7.122 2 7.984 2c1.685 0 3.015.572 3.687 1.915a.75.75 0 1 1-1.342.67C10.001 3.93 9.331 3.5 7.984 3.5c-.611 0-1.19.17-1.597.468-.384.28-.627.678-.627 1.242 0 .403.165.758.463 1.04H4.447a2.9 2.9 0 0 1-.187-1.04c0-1.084.507-1.916 1.242-2.453m6.047 5.993h1.201a.75.75 0 0 0 0-1.5h-9.5a.75.75 0 0 0 0 1.5h5.475l.043.012h.002c1.196.323 1.98 1.005 1.98 1.988 0 .669-.289 1.063-.742 1.33-.5.296-1.222.437-2 .437-1.398 0-2.453-.472-2.796-1.504a.75.75 0 1 0-1.424.474c.657 1.969 2.602 2.53 4.22 2.53.915 0 1.94-.16 2.762-.644.869-.512 1.48-1.376 1.48-2.623 0-.822-.276-1.481-.7-2",clipRule:"evenodd"})),Text$4=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.279 2.544A.75.75 0 0 1 4 2h8a.75.75 0 0 1 .721.544l.5 1.75a.75.75 0 1 1-1.442.412L11.434 3.5H8.75l-.004 9H9.5a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5h.746l.004-9H4.566L4.22 4.706a.75.75 0 1 1-1.442-.412z",clipRule:"evenodd"})),TextIndent=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.25 2H2.75a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5m0 3.5h-5.5a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5m0 3.5h-5.5a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5m-10.5 3.5h10.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5m.49-7a.74.74 0 0 1 .463.162l1.906 1.526a1.04 1.04 0 0 1 0 1.624l-1.906 1.526A.74.74 0 0 1 2.5 9.76V6.24a.74.74 0 0 1 .74-.74",clipRule:"evenodd"})),TextOutdent=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.25 2H2.75a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5m0 3.5h-5.5a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5m0 3.5h-5.5a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5m-10.5 3.5h10.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5m2.01-7a.74.74 0 0 0-.463.162L2.39 7.188a1.04 1.04 0 0 0 0 1.624l1.907 1.526A.74.74 0 0 0 5.5 9.76V6.24a.74.74 0 0 0-.74-.74",clipRule:"evenodd"})),Thunderbolt=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m7.836 6 .76-2.027L9.336 2H5.5a.72.72 0 0 0-.664.45L2.513 8.257a.177.177 0 0 0 .164.243h4.965l-.732 2.013-1.082 2.975a.382.382 0 0 0 .637.392l6.956-7.391A.29.29 0 0 0 13.21 6H7.835m2.727-3 .235-.627A1.386 1.386 0 0 0 9.5.5h-4c-.906 0-1.72.552-2.057 1.393L1.12 7.7A1.677 1.677 0 0 0 2.677 10H5.5l-.545 1.5-.537 1.475a1.882 1.882 0 0 0 3.14 1.933l6.956-7.391A1.79 1.79 0 0 0 13.21 4.5H10z",clipRule:"evenodd"})),TrashBin=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9 2H7a.5.5 0 0 0-.5.5V3h3v-.5A.5.5 0 0 0 9 2m2 1v-.5a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2V3H2.251a.75.75 0 0 0 0 1.5h.312l.317 7.625A3 3 0 0 0 5.878 15h4.245a3 3 0 0 0 2.997-2.875l.318-7.625h.312a.75.75 0 0 0 0-1.5zm.936 1.5H4.064l.315 7.562A1.5 1.5 0 0 0 5.878 13.5h4.245a1.5 1.5 0 0 0 1.498-1.438zm-6.186 2v5a.75.75 0 0 0 1.5 0v-5a.75.75 0 0 0-1.5 0m3.75-.75a.75.75 0 0 1 .75.75v5a.75.75 0 0 1-1.5 0v-5a.75.75 0 0 1 .75-.75",clipRule:"evenodd"})),TriangleExclamation=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.134 2.994 2.217 11.5a1 1 0 0 0 .866 1.5h9.834a1 1 0 0 0 .866-1.5L8.866 2.993a1 1 0 0 0-1.732 0m3.03-.75c-.962-1.665-3.366-1.665-4.329 0L.918 10.749c-.963 1.666.24 3.751 2.165 3.751h9.834c1.925 0 3.128-2.085 2.164-3.751zM8 5a.75.75 0 0 1 .75.75v2a.75.75 0 0 1-1.5 0v-2A.75.75 0 0 1 8 5m1 5.75a1 1 0 1 1-2 0 1 1 0 0 1 2 0",clipRule:"evenodd"})),Underline$1=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5 2.75a.75.75 0 0 0-1.5 0V7a4.5 4.5 0 0 0 9 0V2.75a.75.75 0 0 0-1.5 0V7a3 3 0 0 1-6 0zm-.75 9.75a.75.75 0 0 0 0 1.5h7.5a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"})),Xmark=o=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},o),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.47 3.47a.75.75 0 0 1 1.06 0L8 6.94l3.47-3.47a.75.75 0 1 1 1.06 1.06L9.06 8l3.47 3.47a.75.75 0 1 1-1.06 1.06L8 9.06l-3.47 3.47a.75.75 0 0 1-1.06-1.06L6.94 8 3.47 4.53a.75.75 0 0 1 0-1.06",clipRule:"evenodd"})),PARAM_REGEXP=/{{(.*?)}}/g;function replaceParams(o,e){let s="",a=PARAM_REGEXP.lastIndex=0,l;for(;l=PARAM_REGEXP.exec(o);){a!==l.index&&(s+=o.slice(a,l.index)),a=PARAM_REGEXP.lastIndex;const[u,c]=l;c&&Object.prototype.hasOwnProperty.call(e,c)?s+=e[c]:s+=u}return a<o.length&&(s+=o.slice(a)),s}const KEYSET_SEPARATOR="::",MAX_NESTING_DEPTH=1,getNestingTranslationsRegExp=()=>new RegExp(/\$t{([^}]+)}/g);var ErrorCode;(function(o){o.EmptyKeyset="EMPTY_KEYSET",o.EmptyLanguageData="EMPTY_LANGUAGE_DATA",o.KeysetNotFound="KEYSET_NOT_FOUND",o.MissingKey="MISSING_KEY",o.MissingKeyFor0="MISSING_KEY_FOR_0",o.MissingKeyParamsCount="MISSING_KEY_PARAMS_COUNT",o.MissingKeyPlurals="MISSING_KEY_PLURALS",o.MissingInheritedKey="MISSING_INHERITED_KEY",o.NestedPlural="NESTED_PLURAL",o.ExceedTranslationNestingDepth="EXCEED_TRANSLATION_NESTING_DEPTH",o.NoLanguageData="NO_LANGUAGE_DATA"})(ErrorCode||(ErrorCode={})),Object.values(ErrorCode);function mapErrorCodeToMessage(o){const{code:e,fallbackLang:s,lang:a}=o;let l=`Using language ${a}. `;switch(e){case ErrorCode.EmptyKeyset:{l+="Keyset is empty.";break}case ErrorCode.EmptyLanguageData:{l+="Language data is empty.";break}case ErrorCode.KeysetNotFound:{l+="Keyset not found.";break}case ErrorCode.MissingKey:{l+="Missing key.";break}case ErrorCode.MissingKeyFor0:return l+="Missing key for 0",l;case ErrorCode.MissingKeyParamsCount:{l+="Missing params.count for key.";break}case ErrorCode.MissingKeyPlurals:{l+="Missing required plurals.";break}case ErrorCode.NoLanguageData:l=`Language "${a}" is not defined, make sure you call setLang for the same language you called registerKeysets for!`}return s&&(l+=` Trying to use fallback language "${s}"...`),l}const hasNestingTranslations=o=>{var e;const a=getNestingTranslationsRegExp().exec(o);return((e=a==null?void 0:a.length)!==null&&e!==void 0?e:0)>0},getPluralValues=o=>o instanceof Array?o:o instanceof Object?Object.values(o):[];var PluralForm;(function(o){o[o.One=0]="One",o[o.Few=1]="Few",o[o.Many=2]="Many",o[o.None=3]="None"})(PluralForm||(PluralForm={}));function isPluralValue(o){return typeof o!="string"}function pluralizerEn(o,e){return o===0?e.None:o===1||o===-1?e.One:e.Many}function pluralizerRu(o,e){const s=Math.abs(o%10),a=Math.abs(o%100);return o===0?e.None:s===1&&a!==11?e.One:s>1&&s<5&&(a<10||a>20)?e.Few:e.Many}function getPluralViaIntl(o,e,s){if(o.zero&&e===0)return o.zero;if(!Intl.PluralRules)throw new Error("Intl.PluralRules is not available. Use polyfill.");const l=new Intl.PluralRules(s).select(e);return l==="other"&&typeof o.other>"u"?o.many||o.few:o[l]||o.other}function getPluralValue({value:o,count:e,lang:s,pluralizers:a,log:l,key:u}){if(!Array.isArray(o))return getPluralViaIntl(o,e,s)||u;if(!a)return l("Can not use deprecated plural format without pluralizers"),u;if(a[s]||l(`Pluralization is not configured for language '${s}', falling back to the english ruleset`),o.length<3)return l("Missing required plurals"),u;const c=a[s]||a.en;return c?o[c(e,PluralForm)]||o[PluralForm.Many]||u:(l("Fallback pluralization is not configured!"),u)}class I18N{constructor(e={}){this.data={},this.pluralizers={en:pluralizerEn,ru:pluralizerRu},this.logger=null;const{data:s,fallbackLang:a,lang:l,logger:u=null}=e;this.fallbackLang=a,this.lang=l,this.logger=u,s&&Object.entries(s).forEach(([c,d])=>{this.registerKeysets(c,d)})}setLang(e){this.lang=e}setFallbackLang(e){this.fallbackLang=e}configurePluralization(e){this.pluralizers=Object.assign({},this.pluralizers,e)}registerKeyset(e,s,a={}){this.data[e]&&Object.prototype.hasOwnProperty.call(this.data[e],s),this.data[e]=Object.assign({},this.data[e],{[s]:a})}registerKeysets(e,s){Object.keys(s).forEach(a=>{this.registerKeyset(e,a,s[a])})}has(e,s,a){var l;const u=this.getLanguageData(a);return!!(u&&u[e]&&(!((l=u[e])===null||l===void 0)&&l[s]))}i18n(e,s,a){if(!this.lang&&!this.fallbackLang)throw new Error('Language is not specified. You should set at least one of these: "lang", "fallbackLang"');let l;return this.lang?l=this._i18n(e,s,this.lang,a):this.warn("Target language is not specified."),l===void 0&&this.fallbackLang&&this.fallbackLang!==this.lang&&(l=this._i18n(e,s,this.fallbackLang,a)),l??s}keyset(e){return(s,a)=>this.i18n(e,s,a)}warn(e,s,a){var l;let u="";s?(u+=s,a&&(u+=`.${a}`)):u="languageData",(l=this.logger)===null||l===void 0||l.log(`I18n: ${e}`,{level:"info",logger:u,extra:{type:"i18n"}})}getLanguageData(e){const s=e||this.lang;return s?this.data[s]:void 0}_i18n(e,s,a,l){const{text:u,details:c}=new I18NTranslation(this,a,s,e,l).getTranslationData();if(c){const d=mapErrorCodeToMessage({code:c.code,lang:a,fallbackLang:this.fallbackLang===a?void 0:this.fallbackLang});this.warn(d,c.keysetName,c.key)}return u}}class I18NTranslation{constructor(e,s,a,l,u,c){this.i18n=e,this.lang=s,this.key=a,this.keysetName=l,this.params=u,this.nestingDepth=c??0}getTranslationData(){var e;const{data:s,details:a}=this.getKeyset();if(a)return{details:a};const l=s&&s[this.key],u={};if(l===void 0)return this.getTranslationDataError(ErrorCode.MissingKey);if(isPluralValue(l)){const d=this.nestingDepth>0,h=getPluralValues(l).some(m=>hasNestingTranslations(m));if(d||h)return this.getTranslationDataError(ErrorCode.NestedPlural);const p=Number((e=this.params)===null||e===void 0?void 0:e.count);if(Number.isNaN(p))return this.getTranslationDataError(ErrorCode.MissingKeyParamsCount);u.text=getPluralValue({key:this.key,value:l,count:p,lang:this.lang||"en",pluralizers:this.i18n.pluralizers,log:m=>this.i18n.warn(m,this.keysetName,this.key)})}else u.text=String(l);this.params&&(u.text=replaceParams(String(u.text),this.params));const c=this.replaceTranslationsInheritance({keyValue:String(u.text)});return c.text?(u.text=c.text,u):c}getTranslationDataError(e){return{details:{code:e,keysetName:this.keysetName,key:this.key}}}getKeyset(){const e=this.i18n.getLanguageData(this.lang);if(typeof e>"u")return this.getTranslationDataError(ErrorCode.NoLanguageData);if(Object.keys(e).length===0)return this.getTranslationDataError(ErrorCode.EmptyLanguageData);const s=e[this.keysetName];return s?Object.keys(s).length===0?this.getTranslationDataError(ErrorCode.EmptyKeyset):{data:s}:this.getTranslationDataError(ErrorCode.KeysetNotFound)}replaceTranslationsInheritance(e){const{keyValue:s}=e,a=getNestingTranslationsRegExp();let l="",u=a.lastIndex=0,c;for(;c=a.exec(s);){u!==c.index&&(l+=s.slice(u,c.index)),u=a.lastIndex;const[d,h]=c;if(h){if(this.nestingDepth+1>MAX_NESTING_DEPTH)return this.getTranslationDataError(ErrorCode.ExceedTranslationNestingDepth);let[p,m]=[h,void 0];const g=h.split(KEYSET_SEPARATOR);if(g.length>1&&([m,p]=[g[0],g[1]]),!p)return this.getTranslationDataError(ErrorCode.MissingInheritedKey);const y=new I18NTranslation(this.i18n,this.lang,p,m??this.keysetName,void 0,this.nestingDepth+1).getTranslationData();if(y.details)return this.getTranslationDataError(ErrorCode.MissingInheritedKey);l+=y.text}else l+=d}return u<s.length&&(l+=s.slice(u)),{text:l}}}const{lang:lang$1,fallbackLang}=getConfig$2(),i18n$l=new I18N({lang:lang$1,fallbackLang});subscribeConfigure$1(o=>{i18n$l.setLang(o.lang),i18n$l.setFallbackLang(o.fallbackLang)});function addComponentKeysets(o,e){Object.entries(o).forEach(([l,u])=>i18n$l.registerKeyset(l,e,u));const s=i18n$l.keyset(e),a=()=>{const l=useLang(),{lang:u="en",fallbackLang:c="en"}=i18n$l;return{t:reactExports.useCallback((...h)=>{i18n$l.setLang(l.lang),i18n$l.setFallbackLang(l.fallbackLang);const p=s(...h);return i18n$l.setLang(u),i18n$l.setFallbackLang(c),p},[c,u,l.fallbackLang,l.lang])}};return Object.assign(s,{useTranslation:a,Translation:({children:l})=>l(a())}),s}const DOMPropNames=new Set(["id"]),labelablePropNames=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),propRe=/^(data-.*)$/;function filterDOMProps(o,e={}){const{labelable:s,propNames:a}=e,l={};for(const u in o)Object.prototype.hasOwnProperty.call(o,u)&&(DOMPropNames.has(u)||s&&labelablePropNames.has(u)||a!=null&&a.has(u)||propRe.test(u))&&(l[u]=o[u]);return l}const PcNormalizeMap={arrowup:"up",arrowdown:"down",arrowleft:"left",arrowright:"right",esc:"escape",return:"enter",mod:"ctrl",control:"ctrl",opt:"alt",option:"alt",cmd:"ctrl",command:"ctrl"},MacNormalizeMap={arrowup:"up",arrowdown:"down",arrowleft:"left",arrowright:"right",esc:"escape",enter:"return",mod:"command",ctrl:"control",alt:"option",opt:"option",cmd:"command"},PcDisplayName={up:"",down:"",left:"",right:"",escape:"Esc",plus:"",minus:"",enter:"Enter",ctrl:"Ctrl",alt:"Alt",shift:"Shift",tab:"Tab",backspace:"Backspace"},MacDisplayName={up:"",down:"",left:"",right:"",escape:"esc",plus:"",minus:"",return:"",command:"",option:"",control:"",shift:"",backspace:"",tab:""},PcKeyPriority={shift:200,alt:300,ctrl:400},MacKeyPriority={command:100,shift:200,option:300,control:400},defsByPlatform={pc:{NormalizeMap:PcNormalizeMap,Priority:PcKeyPriority,DisplayName:PcDisplayName},mac:{NormalizeMap:MacNormalizeMap,Priority:MacKeyPriority,DisplayName:MacDisplayName}};var _arrayMap,hasRequired_arrayMap;function require_arrayMap(){if(hasRequired_arrayMap)return _arrayMap;hasRequired_arrayMap=1;function o(e,s){for(var a=-1,l=e==null?0:e.length,u=Array(l);++a<l;)u[a]=s(e[a],a,e);return u}return _arrayMap=o,_arrayMap}var isSymbol_1,hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var o=require_baseGetTag(),e=requireIsObjectLike(),s="[object Symbol]";function a(l){return typeof l=="symbol"||e(l)&&o(l)==s}return isSymbol_1=a,isSymbol_1}var _baseToString,hasRequired_baseToString;function require_baseToString(){if(hasRequired_baseToString)return _baseToString;hasRequired_baseToString=1;var o=require_Symbol(),e=require_arrayMap(),s=requireIsArray(),a=requireIsSymbol(),l=o?o.prototype:void 0,u=l?l.toString:void 0;function c(d){if(typeof d=="string")return d;if(s(d))return e(d,c)+"";if(a(d))return u?u.call(d):"";var h=d+"";return h=="0"&&1/d==-1/0?"-0":h}return _baseToString=c,_baseToString}var toString_1,hasRequiredToString;function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;var o=require_baseToString();function e(s){return s==null?"":o(s)}return toString_1=e,toString_1}var _baseSlice,hasRequired_baseSlice;function require_baseSlice(){if(hasRequired_baseSlice)return _baseSlice;hasRequired_baseSlice=1;function o(e,s,a){var l=-1,u=e.length;s<0&&(s=-s>u?0:u+s),a=a>u?u:a,a<0&&(a+=u),u=s>a?0:a-s>>>0,s>>>=0;for(var c=Array(u);++l<u;)c[l]=e[l+s];return c}return _baseSlice=o,_baseSlice}var _castSlice,hasRequired_castSlice;function require_castSlice(){if(hasRequired_castSlice)return _castSlice;hasRequired_castSlice=1;var o=require_baseSlice();function e(s,a,l){var u=s.length;return l=l===void 0?u:l,!a&&l>=u?s:o(s,a,l)}return _castSlice=e,_castSlice}var _hasUnicode,hasRequired_hasUnicode;function require_hasUnicode(){if(hasRequired_hasUnicode)return _hasUnicode;hasRequired_hasUnicode=1;var o="\\ud800-\\udfff",e="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",l=e+s+a,u="\\ufe0e\\ufe0f",c="\\u200d",d=RegExp("["+c+o+l+u+"]");function h(p){return d.test(p)}return _hasUnicode=h,_hasUnicode}var _asciiToArray,hasRequired_asciiToArray;function require_asciiToArray(){if(hasRequired_asciiToArray)return _asciiToArray;hasRequired_asciiToArray=1;function o(e){return e.split("")}return _asciiToArray=o,_asciiToArray}var _unicodeToArray,hasRequired_unicodeToArray;function require_unicodeToArray(){if(hasRequired_unicodeToArray)return _unicodeToArray;hasRequired_unicodeToArray=1;var o="\\ud800-\\udfff",e="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",l=e+s+a,u="\\ufe0e\\ufe0f",c="["+o+"]",d="["+l+"]",h="\\ud83c[\\udffb-\\udfff]",p="(?:"+d+"|"+h+")",m="[^"+o+"]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",A="\\u200d",T=p+"?",E="["+u+"]?",v="(?:"+A+"(?:"+[m,g,y].join("|")+")"+E+T+")*",_=E+T+v,w="(?:"+[m+d+"?",d,g,y,c].join("|")+")",R=RegExp(h+"(?="+h+")|"+w+_,"g");function k(I){return I.match(R)||[]}return _unicodeToArray=k,_unicodeToArray}var _stringToArray,hasRequired_stringToArray;function require_stringToArray(){if(hasRequired_stringToArray)return _stringToArray;hasRequired_stringToArray=1;var o=require_asciiToArray(),e=require_hasUnicode(),s=require_unicodeToArray();function a(l){return e(l)?s(l):o(l)}return _stringToArray=a,_stringToArray}var _createCaseFirst,hasRequired_createCaseFirst;function require_createCaseFirst(){if(hasRequired_createCaseFirst)return _createCaseFirst;hasRequired_createCaseFirst=1;var o=require_castSlice(),e=require_hasUnicode(),s=require_stringToArray(),a=requireToString();function l(u){return function(c){c=a(c);var d=e(c)?s(c):void 0,h=d?d[0]:c.charAt(0),p=d?o(d,1).join(""):c.slice(1);return h[u]()+p}}return _createCaseFirst=l,_createCaseFirst}var upperFirst_1,hasRequiredUpperFirst;function requireUpperFirst(){if(hasRequiredUpperFirst)return upperFirst_1;hasRequiredUpperFirst=1;var o=require_createCaseFirst(),e=o("toUpperCase");return upperFirst_1=e,upperFirst_1}var capitalize_1,hasRequiredCapitalize;function requireCapitalize(){if(hasRequiredCapitalize)return capitalize_1;hasRequiredCapitalize=1;var o=requireToString(),e=requireUpperFirst();function s(a){return e(o(a).toLowerCase())}return capitalize_1=s,capitalize_1}var capitalizeExports=requireCapitalize();const capitalize=getDefaultExportFromCjs$1(capitalizeExports);var _setCacheAdd,hasRequired_setCacheAdd;function require_setCacheAdd(){if(hasRequired_setCacheAdd)return _setCacheAdd;hasRequired_setCacheAdd=1;var o="__lodash_hash_undefined__";function e(s){return this.__data__.set(s,o),this}return _setCacheAdd=e,_setCacheAdd}var _setCacheHas,hasRequired_setCacheHas;function require_setCacheHas(){if(hasRequired_setCacheHas)return _setCacheHas;hasRequired_setCacheHas=1;function o(e){return this.__data__.has(e)}return _setCacheHas=o,_setCacheHas}var _SetCache,hasRequired_SetCache;function require_SetCache(){if(hasRequired_SetCache)return _SetCache;hasRequired_SetCache=1;var o=require_MapCache(),e=require_setCacheAdd(),s=require_setCacheHas();function a(l){var u=-1,c=l==null?0:l.length;for(this.__data__=new o;++u<c;)this.add(l[u])}return a.prototype.add=a.prototype.push=e,a.prototype.has=s,_SetCache=a,_SetCache}var _arraySome,hasRequired_arraySome;function require_arraySome(){if(hasRequired_arraySome)return _arraySome;hasRequired_arraySome=1;function o(e,s){for(var a=-1,l=e==null?0:e.length;++a<l;)if(s(e[a],a,e))return!0;return!1}return _arraySome=o,_arraySome}var _cacheHas,hasRequired_cacheHas;function require_cacheHas(){if(hasRequired_cacheHas)return _cacheHas;hasRequired_cacheHas=1;function o(e,s){return e.has(s)}return _cacheHas=o,_cacheHas}var _equalArrays,hasRequired_equalArrays;function require_equalArrays(){if(hasRequired_equalArrays)return _equalArrays;hasRequired_equalArrays=1;var o=require_SetCache(),e=require_arraySome(),s=require_cacheHas(),a=1,l=2;function u(c,d,h,p,m,g){var y=h&a,A=c.length,T=d.length;if(A!=T&&!(y&&T>A))return!1;var E=g.get(c),v=g.get(d);if(E&&v)return E==d&&v==c;var _=-1,w=!0,R=h&l?new o:void 0;for(g.set(c,d),g.set(d,c);++_<A;){var k=c[_],I=d[_];if(p)var P=y?p(I,k,_,d,c,g):p(k,I,_,c,d,g);if(P!==void 0){if(P)continue;w=!1;break}if(R){if(!e(d,function(N,L){if(!s(R,L)&&(k===N||m(k,N,h,p,g)))return R.push(L)})){w=!1;break}}else if(!(k===I||m(k,I,h,p,g))){w=!1;break}}return g.delete(c),g.delete(d),w}return _equalArrays=u,_equalArrays}var _mapToArray,hasRequired_mapToArray;function require_mapToArray(){if(hasRequired_mapToArray)return _mapToArray;hasRequired_mapToArray=1;function o(e){var s=-1,a=Array(e.size);return e.forEach(function(l,u){a[++s]=[u,l]}),a}return _mapToArray=o,_mapToArray}var _setToArray,hasRequired_setToArray;function require_setToArray(){if(hasRequired_setToArray)return _setToArray;hasRequired_setToArray=1;function o(e){var s=-1,a=Array(e.size);return e.forEach(function(l){a[++s]=l}),a}return _setToArray=o,_setToArray}var _equalByTag,hasRequired_equalByTag;function require_equalByTag(){if(hasRequired_equalByTag)return _equalByTag;hasRequired_equalByTag=1;var o=require_Symbol(),e=require_Uint8Array(),s=requireEq(),a=require_equalArrays(),l=require_mapToArray(),u=require_setToArray(),c=1,d=2,h="[object Boolean]",p="[object Date]",m="[object Error]",g="[object Map]",y="[object Number]",A="[object RegExp]",T="[object Set]",E="[object String]",v="[object Symbol]",_="[object ArrayBuffer]",w="[object DataView]",R=o?o.prototype:void 0,k=R?R.valueOf:void 0;function I(P,N,L,Q,j,F,V){switch(L){case w:if(P.byteLength!=N.byteLength||P.byteOffset!=N.byteOffset)return!1;P=P.buffer,N=N.buffer;case _:return!(P.byteLength!=N.byteLength||!F(new e(P),new e(N)));case h:case p:case y:return s(+P,+N);case m:return P.name==N.name&&P.message==N.message;case A:case E:return P==N+"";case g:var J=l;case T:var z=Q&c;if(J||(J=u),P.size!=N.size&&!z)return!1;var Y=V.get(P);if(Y)return Y==N;Q|=d,V.set(P,N);var fe=a(J(P),J(N),Q,j,F,V);return V.delete(P),fe;case v:if(k)return k.call(P)==k.call(N)}return!1}return _equalByTag=I,_equalByTag}var _arrayPush,hasRequired_arrayPush;function require_arrayPush(){if(hasRequired_arrayPush)return _arrayPush;hasRequired_arrayPush=1;function o(e,s){for(var a=-1,l=s.length,u=e.length;++a<l;)e[u+a]=s[a];return e}return _arrayPush=o,_arrayPush}var _baseGetAllKeys,hasRequired_baseGetAllKeys;function require_baseGetAllKeys(){if(hasRequired_baseGetAllKeys)return _baseGetAllKeys;hasRequired_baseGetAllKeys=1;var o=require_arrayPush(),e=requireIsArray();function s(a,l,u){var c=l(a);return e(a)?c:o(c,u(a))}return _baseGetAllKeys=s,_baseGetAllKeys}var _arrayFilter,hasRequired_arrayFilter;function require_arrayFilter(){if(hasRequired_arrayFilter)return _arrayFilter;hasRequired_arrayFilter=1;function o(e,s){for(var a=-1,l=e==null?0:e.length,u=0,c=[];++a<l;){var d=e[a];s(d,a,e)&&(c[u++]=d)}return c}return _arrayFilter=o,_arrayFilter}var stubArray_1,hasRequiredStubArray;function requireStubArray(){if(hasRequiredStubArray)return stubArray_1;hasRequiredStubArray=1;function o(){return[]}return stubArray_1=o,stubArray_1}var _getSymbols,hasRequired_getSymbols;function require_getSymbols(){if(hasRequired_getSymbols)return _getSymbols;hasRequired_getSymbols=1;var o=require_arrayFilter(),e=requireStubArray(),s=Object.prototype,a=s.propertyIsEnumerable,l=Object.getOwnPropertySymbols,u=l?function(c){return c==null?[]:(c=Object(c),o(l(c),function(d){return a.call(c,d)}))}:e;return _getSymbols=u,_getSymbols}var _nativeKeys,hasRequired_nativeKeys;function require_nativeKeys(){if(hasRequired_nativeKeys)return _nativeKeys;hasRequired_nativeKeys=1;var o=require_overArg(),e=o(Object.keys,Object);return _nativeKeys=e,_nativeKeys}var _baseKeys,hasRequired_baseKeys;function require_baseKeys(){if(hasRequired_baseKeys)return _baseKeys;hasRequired_baseKeys=1;var o=require_isPrototype(),e=require_nativeKeys(),s=Object.prototype,a=s.hasOwnProperty;function l(u){if(!o(u))return e(u);var c=[];for(var d in Object(u))a.call(u,d)&&d!="constructor"&&c.push(d);return c}return _baseKeys=l,_baseKeys}var keys_1,hasRequiredKeys;function requireKeys(){if(hasRequiredKeys)return keys_1;hasRequiredKeys=1;var o=require_arrayLikeKeys(),e=require_baseKeys(),s=requireIsArrayLike();function a(l){return s(l)?o(l):e(l)}return keys_1=a,keys_1}var _getAllKeys,hasRequired_getAllKeys;function require_getAllKeys(){if(hasRequired_getAllKeys)return _getAllKeys;hasRequired_getAllKeys=1;var o=require_baseGetAllKeys(),e=require_getSymbols(),s=requireKeys();function a(l){return o(l,s,e)}return _getAllKeys=a,_getAllKeys}var _equalObjects,hasRequired_equalObjects;function require_equalObjects(){if(hasRequired_equalObjects)return _equalObjects;hasRequired_equalObjects=1;var o=require_getAllKeys(),e=1,s=Object.prototype,a=s.hasOwnProperty;function l(u,c,d,h,p,m){var g=d&e,y=o(u),A=y.length,T=o(c),E=T.length;if(A!=E&&!g)return!1;for(var v=A;v--;){var _=y[v];if(!(g?_ in c:a.call(c,_)))return!1}var w=m.get(u),R=m.get(c);if(w&&R)return w==c&&R==u;var k=!0;m.set(u,c),m.set(c,u);for(var I=g;++v<A;){_=y[v];var P=u[_],N=c[_];if(h)var L=g?h(N,P,_,c,u,m):h(P,N,_,u,c,m);if(!(L===void 0?P===N||p(P,N,d,h,m):L)){k=!1;break}I||(I=_=="constructor")}if(k&&!I){var Q=u.constructor,j=c.constructor;Q!=j&&"constructor"in u&&"constructor"in c&&!(typeof Q=="function"&&Q instanceof Q&&typeof j=="function"&&j instanceof j)&&(k=!1)}return m.delete(u),m.delete(c),k}return _equalObjects=l,_equalObjects}var _DataView,hasRequired_DataView;function require_DataView(){if(hasRequired_DataView)return _DataView;hasRequired_DataView=1;var o=require_getNative(),e=require_root(),s=o(e,"DataView");return _DataView=s,_DataView}var _Promise,hasRequired_Promise;function require_Promise(){if(hasRequired_Promise)return _Promise;hasRequired_Promise=1;var o=require_getNative(),e=require_root(),s=o(e,"Promise");return _Promise=s,_Promise}var _Set,hasRequired_Set;function require_Set(){if(hasRequired_Set)return _Set;hasRequired_Set=1;var o=require_getNative(),e=require_root(),s=o(e,"Set");return _Set=s,_Set}var _WeakMap,hasRequired_WeakMap;function require_WeakMap(){if(hasRequired_WeakMap)return _WeakMap;hasRequired_WeakMap=1;var o=require_getNative(),e=require_root(),s=o(e,"WeakMap");return _WeakMap=s,_WeakMap}var _getTag,hasRequired_getTag;function require_getTag(){if(hasRequired_getTag)return _getTag;hasRequired_getTag=1;var o=require_DataView(),e=require_Map(),s=require_Promise(),a=require_Set(),l=require_WeakMap(),u=require_baseGetTag(),c=require_toSource(),d="[object Map]",h="[object Object]",p="[object Promise]",m="[object Set]",g="[object WeakMap]",y="[object DataView]",A=c(o),T=c(e),E=c(s),v=c(a),_=c(l),w=u;return(o&&w(new o(new ArrayBuffer(1)))!=y||e&&w(new e)!=d||s&&w(s.resolve())!=p||a&&w(new a)!=m||l&&w(new l)!=g)&&(w=function(R){var k=u(R),I=k==h?R.constructor:void 0,P=I?c(I):"";if(P)switch(P){case A:return y;case T:return d;case E:return p;case v:return m;case _:return g}return k}),_getTag=w,_getTag}var _baseIsEqualDeep,hasRequired_baseIsEqualDeep;function require_baseIsEqualDeep(){if(hasRequired_baseIsEqualDeep)return _baseIsEqualDeep;hasRequired_baseIsEqualDeep=1;var o=require_Stack(),e=require_equalArrays(),s=require_equalByTag(),a=require_equalObjects(),l=require_getTag(),u=requireIsArray(),c=requireIsBuffer(),d=requireIsTypedArray(),h=1,p="[object Arguments]",m="[object Array]",g="[object Object]",y=Object.prototype,A=y.hasOwnProperty;function T(E,v,_,w,R,k){var I=u(E),P=u(v),N=I?m:l(E),L=P?m:l(v);N=N==p?g:N,L=L==p?g:L;var Q=N==g,j=L==g,F=N==L;if(F&&c(E)){if(!c(v))return!1;I=!0,Q=!1}if(F&&!Q)return k||(k=new o),I||d(E)?e(E,v,_,w,R,k):s(E,v,N,_,w,R,k);if(!(_&h)){var V=Q&&A.call(E,"__wrapped__"),J=j&&A.call(v,"__wrapped__");if(V||J){var z=V?E.value():E,Y=J?v.value():v;return k||(k=new o),R(z,Y,_,w,k)}}return F?(k||(k=new o),a(E,v,_,w,R,k)):!1}return _baseIsEqualDeep=T,_baseIsEqualDeep}var _baseIsEqual,hasRequired_baseIsEqual;function require_baseIsEqual(){if(hasRequired_baseIsEqual)return _baseIsEqual;hasRequired_baseIsEqual=1;var o=require_baseIsEqualDeep(),e=requireIsObjectLike();function s(a,l,u,c,d){return a===l?!0:a==null||l==null||!e(a)&&!e(l)?a!==a&&l!==l:o(a,l,u,c,s,d)}return _baseIsEqual=s,_baseIsEqual}var _baseIsMatch,hasRequired_baseIsMatch;function require_baseIsMatch(){if(hasRequired_baseIsMatch)return _baseIsMatch;hasRequired_baseIsMatch=1;var o=require_Stack(),e=require_baseIsEqual(),s=1,a=2;function l(u,c,d,h){var p=d.length,m=p,g=!h;if(u==null)return!m;for(u=Object(u);p--;){var y=d[p];if(g&&y[2]?y[1]!==u[y[0]]:!(y[0]in u))return!1}for(;++p<m;){y=d[p];var A=y[0],T=u[A],E=y[1];if(g&&y[2]){if(T===void 0&&!(A in u))return!1}else{var v=new o;if(h)var _=h(T,E,A,u,c,v);if(!(_===void 0?e(E,T,s|a,h,v):_))return!1}}return!0}return _baseIsMatch=l,_baseIsMatch}var _isStrictComparable,hasRequired_isStrictComparable;function require_isStrictComparable(){if(hasRequired_isStrictComparable)return _isStrictComparable;hasRequired_isStrictComparable=1;var o=requireIsObject();function e(s){return s===s&&!o(s)}return _isStrictComparable=e,_isStrictComparable}var _getMatchData,hasRequired_getMatchData;function require_getMatchData(){if(hasRequired_getMatchData)return _getMatchData;hasRequired_getMatchData=1;var o=require_isStrictComparable(),e=requireKeys();function s(a){for(var l=e(a),u=l.length;u--;){var c=l[u],d=a[c];l[u]=[c,d,o(d)]}return l}return _getMatchData=s,_getMatchData}var _matchesStrictComparable,hasRequired_matchesStrictComparable;function require_matchesStrictComparable(){if(hasRequired_matchesStrictComparable)return _matchesStrictComparable;hasRequired_matchesStrictComparable=1;function o(e,s){return function(a){return a==null?!1:a[e]===s&&(s!==void 0||e in Object(a))}}return _matchesStrictComparable=o,_matchesStrictComparable}var _baseMatches,hasRequired_baseMatches;function require_baseMatches(){if(hasRequired_baseMatches)return _baseMatches;hasRequired_baseMatches=1;var o=require_baseIsMatch(),e=require_getMatchData(),s=require_matchesStrictComparable();function a(l){var u=e(l);return u.length==1&&u[0][2]?s(u[0][0],u[0][1]):function(c){return c===l||o(c,l,u)}}return _baseMatches=a,_baseMatches}var _isKey,hasRequired_isKey;function require_isKey(){if(hasRequired_isKey)return _isKey;hasRequired_isKey=1;var o=requireIsArray(),e=requireIsSymbol(),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function l(u,c){if(o(u))return!1;var d=typeof u;return d=="number"||d=="symbol"||d=="boolean"||u==null||e(u)?!0:a.test(u)||!s.test(u)||c!=null&&u in Object(c)}return _isKey=l,_isKey}var memoize_1,hasRequiredMemoize;function requireMemoize(){if(hasRequiredMemoize)return memoize_1;hasRequiredMemoize=1;var o=require_MapCache(),e="Expected a function";function s(a,l){if(typeof a!="function"||l!=null&&typeof l!="function")throw new TypeError(e);var u=function(){var c=arguments,d=l?l.apply(this,c):c[0],h=u.cache;if(h.has(d))return h.get(d);var p=a.apply(this,c);return u.cache=h.set(d,p)||h,p};return u.cache=new(s.Cache||o),u}return s.Cache=o,memoize_1=s,memoize_1}var _memoizeCapped,hasRequired_memoizeCapped;function require_memoizeCapped(){if(hasRequired_memoizeCapped)return _memoizeCapped;hasRequired_memoizeCapped=1;var o=requireMemoize(),e=500;function s(a){var l=o(a,function(c){return u.size===e&&u.clear(),c}),u=l.cache;return l}return _memoizeCapped=s,_memoizeCapped}var _stringToPath,hasRequired_stringToPath;function require_stringToPath(){if(hasRequired_stringToPath)return _stringToPath;hasRequired_stringToPath=1;var o=require_memoizeCapped(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,a=o(function(l){var u=[];return l.charCodeAt(0)===46&&u.push(""),l.replace(e,function(c,d,h,p){u.push(h?p.replace(s,"$1"):d||c)}),u});return _stringToPath=a,_stringToPath}var _castPath,hasRequired_castPath;function require_castPath(){if(hasRequired_castPath)return _castPath;hasRequired_castPath=1;var o=requireIsArray(),e=require_isKey(),s=require_stringToPath(),a=requireToString();function l(u,c){return o(u)?u:e(u,c)?[u]:s(a(u))}return _castPath=l,_castPath}var _toKey,hasRequired_toKey;function require_toKey(){if(hasRequired_toKey)return _toKey;hasRequired_toKey=1;var o=requireIsSymbol();function e(s){if(typeof s=="string"||o(s))return s;var a=s+"";return a=="0"&&1/s==-1/0?"-0":a}return _toKey=e,_toKey}var _baseGet,hasRequired_baseGet;function require_baseGet(){if(hasRequired_baseGet)return _baseGet;hasRequired_baseGet=1;var o=require_castPath(),e=require_toKey();function s(a,l){l=o(l,a);for(var u=0,c=l.length;a!=null&&u<c;)a=a[e(l[u++])];return u&&u==c?a:void 0}return _baseGet=s,_baseGet}var get_1,hasRequiredGet$1;function requireGet$1(){if(hasRequiredGet$1)return get_1;hasRequiredGet$1=1;var o=require_baseGet();function e(s,a,l){var u=s==null?void 0:o(s,a);return u===void 0?l:u}return get_1=e,get_1}var _baseHasIn,hasRequired_baseHasIn;function require_baseHasIn(){if(hasRequired_baseHasIn)return _baseHasIn;hasRequired_baseHasIn=1;function o(e,s){return e!=null&&s in Object(e)}return _baseHasIn=o,_baseHasIn}var _hasPath,hasRequired_hasPath;function require_hasPath(){if(hasRequired_hasPath)return _hasPath;hasRequired_hasPath=1;var o=require_castPath(),e=requireIsArguments(),s=requireIsArray(),a=require_isIndex(),l=requireIsLength(),u=require_toKey();function c(d,h,p){h=o(h,d);for(var m=-1,g=h.length,y=!1;++m<g;){var A=u(h[m]);if(!(y=d!=null&&p(d,A)))break;d=d[A]}return y||++m!=g?y:(g=d==null?0:d.length,!!g&&l(g)&&a(A,g)&&(s(d)||e(d)))}return _hasPath=c,_hasPath}var hasIn_1,hasRequiredHasIn;function requireHasIn(){if(hasRequiredHasIn)return hasIn_1;hasRequiredHasIn=1;var o=require_baseHasIn(),e=require_hasPath();function s(a,l){return a!=null&&e(a,l,o)}return hasIn_1=s,hasIn_1}var _baseMatchesProperty,hasRequired_baseMatchesProperty;function require_baseMatchesProperty(){if(hasRequired_baseMatchesProperty)return _baseMatchesProperty;hasRequired_baseMatchesProperty=1;var o=require_baseIsEqual(),e=requireGet$1(),s=requireHasIn(),a=require_isKey(),l=require_isStrictComparable(),u=require_matchesStrictComparable(),c=require_toKey(),d=1,h=2;function p(m,g){return a(m)&&l(g)?u(c(m),g):function(y){var A=e(y,m);return A===void 0&&A===g?s(y,m):o(g,A,d|h)}}return _baseMatchesProperty=p,_baseMatchesProperty}var _baseProperty,hasRequired_baseProperty;function require_baseProperty(){if(hasRequired_baseProperty)return _baseProperty;hasRequired_baseProperty=1;function o(e){return function(s){return s==null?void 0:s[e]}}return _baseProperty=o,_baseProperty}var _basePropertyDeep,hasRequired_basePropertyDeep;function require_basePropertyDeep(){if(hasRequired_basePropertyDeep)return _basePropertyDeep;hasRequired_basePropertyDeep=1;var o=require_baseGet();function e(s){return function(a){return o(a,s)}}return _basePropertyDeep=e,_basePropertyDeep}var property_1,hasRequiredProperty;function requireProperty(){if(hasRequiredProperty)return property_1;hasRequiredProperty=1;var o=require_baseProperty(),e=require_basePropertyDeep(),s=require_isKey(),a=require_toKey();function l(u){return s(u)?o(a(u)):e(u)}return property_1=l,property_1}var _baseIteratee,hasRequired_baseIteratee;function require_baseIteratee(){if(hasRequired_baseIteratee)return _baseIteratee;hasRequired_baseIteratee=1;var o=require_baseMatches(),e=require_baseMatchesProperty(),s=requireIdentity$1(),a=requireIsArray(),l=requireProperty();function u(c){return typeof c=="function"?c:c==null?s:typeof c=="object"?a(c)?e(c[0],c[1]):o(c):l(c)}return _baseIteratee=u,_baseIteratee}var _baseFindIndex,hasRequired_baseFindIndex;function require_baseFindIndex(){if(hasRequired_baseFindIndex)return _baseFindIndex;hasRequired_baseFindIndex=1;function o(e,s,a,l){for(var u=e.length,c=a+(l?1:-1);l?c--:++c<u;)if(s(e[c],c,e))return c;return-1}return _baseFindIndex=o,_baseFindIndex}var _baseIsNaN,hasRequired_baseIsNaN;function require_baseIsNaN(){if(hasRequired_baseIsNaN)return _baseIsNaN;hasRequired_baseIsNaN=1;function o(e){return e!==e}return _baseIsNaN=o,_baseIsNaN}var _strictIndexOf,hasRequired_strictIndexOf;function require_strictIndexOf(){if(hasRequired_strictIndexOf)return _strictIndexOf;hasRequired_strictIndexOf=1;function o(e,s,a){for(var l=a-1,u=e.length;++l<u;)if(e[l]===s)return l;return-1}return _strictIndexOf=o,_strictIndexOf}var _baseIndexOf,hasRequired_baseIndexOf;function require_baseIndexOf(){if(hasRequired_baseIndexOf)return _baseIndexOf;hasRequired_baseIndexOf=1;var o=require_baseFindIndex(),e=require_baseIsNaN(),s=require_strictIndexOf();function a(l,u,c){return u===u?s(l,u,c):o(l,e,c)}return _baseIndexOf=a,_baseIndexOf}var _arrayIncludes,hasRequired_arrayIncludes;function require_arrayIncludes(){if(hasRequired_arrayIncludes)return _arrayIncludes;hasRequired_arrayIncludes=1;var o=require_baseIndexOf();function e(s,a){var l=s==null?0:s.length;return!!l&&o(s,a,0)>-1}return _arrayIncludes=e,_arrayIncludes}var _arrayIncludesWith,hasRequired_arrayIncludesWith;function require_arrayIncludesWith(){if(hasRequired_arrayIncludesWith)return _arrayIncludesWith;hasRequired_arrayIncludesWith=1;function o(e,s,a){for(var l=-1,u=e==null?0:e.length;++l<u;)if(a(s,e[l]))return!0;return!1}return _arrayIncludesWith=o,_arrayIncludesWith}var noop_1,hasRequiredNoop;function requireNoop(){if(hasRequiredNoop)return noop_1;hasRequiredNoop=1;function o(){}return noop_1=o,noop_1}var _createSet,hasRequired_createSet;function require_createSet(){if(hasRequired_createSet)return _createSet;hasRequired_createSet=1;var o=require_Set(),e=requireNoop(),s=require_setToArray(),a=1/0,l=o&&1/s(new o([,-0]))[1]==a?function(u){return new o(u)}:e;return _createSet=l,_createSet}var _baseUniq,hasRequired_baseUniq;function require_baseUniq(){if(hasRequired_baseUniq)return _baseUniq;hasRequired_baseUniq=1;var o=require_SetCache(),e=require_arrayIncludes(),s=require_arrayIncludesWith(),a=require_cacheHas(),l=require_createSet(),u=require_setToArray(),c=200;function d(h,p,m){var g=-1,y=e,A=h.length,T=!0,E=[],v=E;if(m)T=!1,y=s;else if(A>=c){var _=p?null:l(h);if(_)return u(_);T=!1,y=a,v=new o}else v=p?[]:E;e:for(;++g<A;){var w=h[g],R=p?p(w):w;if(w=m||w!==0?w:0,T&&R===R){for(var k=v.length;k--;)if(v[k]===R)continue e;p&&v.push(R),E.push(w)}else y(v,R,m)||(v!==E&&v.push(R),E.push(w))}return E}return _baseUniq=d,_baseUniq}var uniqBy_1,hasRequiredUniqBy;function requireUniqBy(){if(hasRequiredUniqBy)return uniqBy_1;hasRequiredUniqBy=1;var o=require_baseIteratee(),e=require_baseUniq();function s(a,l){return a&&a.length?e(a,o(l,2)):[]}return uniqBy_1=s,uniqBy_1}var uniqByExports=requireUniqBy();const uniqBy=getDefaultExportFromCjs$1(uniqByExports),isMac$2=()=>typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function split$1(o,e){return o.trim().split(e).filter(Boolean)}const GROUPS_SEPARATOR=/\s/,KEYS_SEPARATOR="+";function parseKeyGroups(o,e){return split$1(e,GROUPS_SEPARATOR).map(s=>uniqBy(split$1(s,KEYS_SEPARATOR).map(keyParser(o)).sort((a,l)=>l.priority-a.priority),a=>a.id).map(renderKey))}function keyParser(o){return function(e){const s=getKeyId(o,e);return{raw:e,id:s,priority:o.Priority[s]??0,displayName:o.DisplayName[s]}}}function getKeyId(o,e){return e=e.toLowerCase(),o.NormalizeMap[e]??e}function renderKey(o){return o.displayName??capitalize(o.id)}const b$1r=block$5("hotkey"),Spaces={BetweenGroups:"",BetweenKeys:""},Hotkey=reactExports.forwardRef(function(e,s){const{value:a,platform:l,view:u="light",qa:c,style:d,className:h,...p}=e,m=parseHotkeys(a,{platform:l}),g=[];let y=!1;return m.forEach((A,T)=>{A.length!==0&&(y?g.push(Spaces.BetweenGroups):y=!0,A.forEach((E,v)=>{v===0||g.push(Spaces.BetweenKeys,jsxRuntimeExports.jsx("span",{className:b$1r("plus"),children:"+"},`${E}_${T}_${v}_plus`),Spaces.BetweenKeys),g.push(jsxRuntimeExports.jsx("kbd",{children:E},`${E}_${T}_${v}`))}))}),g.length===0?null:jsxRuntimeExports.jsx("kbd",{...filterDOMProps(p,{labelable:!0}),ref:s,style:d,"data-qa":c,className:b$1r({view:u},h),children:g})});function parseHotkeys(o,e){const s=e.platform??(isMac$2()?"mac":"pc"),a=defsByPlatform[s];return parseKeyGroups(a,o)}function hasWindow(){return typeof window<"u"}function getNodeName(o){return isNode$1(o)?(o.nodeName||"").toLowerCase():"#document"}function getWindow(o){var e;return(o==null||(e=o.ownerDocument)==null?void 0:e.defaultView)||window}function getDocumentElement$1(o){var e;return(e=(isNode$1(o)?o.ownerDocument:o.document)||window.document)==null?void 0:e.documentElement}function isNode$1(o){return hasWindow()?o instanceof Node||o instanceof getWindow(o).Node:!1}function isElement$1(o){return hasWindow()?o instanceof Element||o instanceof getWindow(o).Element:!1}function isHTMLElement(o){return hasWindow()?o instanceof HTMLElement||o instanceof getWindow(o).HTMLElement:!1}function isShadowRoot(o){return!hasWindow()||typeof ShadowRoot>"u"?!1:o instanceof ShadowRoot||o instanceof getWindow(o).ShadowRoot}const invalidOverflowDisplayValues=new Set(["inline","contents"]);function isOverflowElement(o){const{overflow:e,overflowX:s,overflowY:a,display:l}=getComputedStyle$1(o);return/auto|scroll|overlay|hidden|clip/.test(e+a+s)&&!invalidOverflowDisplayValues.has(l)}const tableElements=new Set(["table","td","th"]);function isTableElement(o){return tableElements.has(getNodeName(o))}const topLayerSelectors=[":popover-open",":modal"];function isTopLayer(o){return topLayerSelectors.some(e=>{try{return o.matches(e)}catch{return!1}})}const transformProperties=["transform","translate","scale","rotate","perspective"],willChangeValues=["transform","translate","scale","rotate","perspective","filter"],containValues=["paint","layout","strict","content"];function isContainingBlock(o){const e=isWebKit(),s=isElement$1(o)?getComputedStyle$1(o):o;return transformProperties.some(a=>s[a]?s[a]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!e&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!e&&(s.filter?s.filter!=="none":!1)||willChangeValues.some(a=>(s.willChange||"").includes(a))||containValues.some(a=>(s.contain||"").includes(a))}function getContainingBlock(o){let e=getParentNode(o);for(;isHTMLElement(e)&&!isLastTraversableNode(e);){if(isContainingBlock(e))return e;if(isTopLayer(e))return null;e=getParentNode(e)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lastTraversableNodeNames=new Set(["html","body","#document"]);function isLastTraversableNode(o){return lastTraversableNodeNames.has(getNodeName(o))}function getComputedStyle$1(o){return getWindow(o).getComputedStyle(o)}function getNodeScroll(o){return isElement$1(o)?{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}:{scrollLeft:o.scrollX,scrollTop:o.scrollY}}function getParentNode(o){if(getNodeName(o)==="html")return o;const e=o.assignedSlot||o.parentNode||isShadowRoot(o)&&o.host||getDocumentElement$1(o);return isShadowRoot(e)?e.host:e}function getNearestOverflowAncestor(o){const e=getParentNode(o);return isLastTraversableNode(e)?o.ownerDocument?o.ownerDocument.body:o.body:isHTMLElement(e)&&isOverflowElement(e)?e:getNearestOverflowAncestor(e)}function getOverflowAncestors(o,e,s){var a;e===void 0&&(e=[]),s===void 0&&(s=!0);const l=getNearestOverflowAncestor(o),u=l===((a=o.ownerDocument)==null?void 0:a.body),c=getWindow(l);if(u){const d=getFrameElement(c);return e.concat(c,c.visualViewport||[],isOverflowElement(l)?l:[],d&&s?getOverflowAncestors(d):[])}return e.concat(l,getOverflowAncestors(l,[],s))}function getFrameElement(o){return o.parent&&Object.getPrototypeOf(o.parent)?o.frameElement:null}const sides=["top","right","bottom","left"],alignments=["start","end"],placements=sides.reduce((o,e)=>o.concat(e,e+"-"+alignments[0],e+"-"+alignments[1]),[]),min$1=Math.min,max$1=Math.max,round$2=Math.round,floor$1=Math.floor,createCoords=o=>({x:o,y:o}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(o,e,s){return max$1(o,min$1(e,s))}function evaluate(o,e){return typeof o=="function"?o(e):o}function getSide$1(o){return o.split("-")[0]}function getAlignment(o){return o.split("-")[1]}function getOppositeAxis(o){return o==="x"?"y":"x"}function getAxisLength(o){return o==="y"?"height":"width"}const yAxisSides=new Set(["top","bottom"]);function getSideAxis(o){return yAxisSides.has(getSide$1(o))?"y":"x"}function getAlignmentAxis(o){return getOppositeAxis(getSideAxis(o))}function getAlignmentSides(o,e,s){s===void 0&&(s=!1);const a=getAlignment(o),l=getAlignmentAxis(o),u=getAxisLength(l);let c=l==="x"?a===(s?"end":"start")?"right":"left":a==="start"?"bottom":"top";return e.reference[u]>e.floating[u]&&(c=getOppositePlacement(c)),[c,getOppositePlacement(c)]}function getExpandedPlacements(o){const e=getOppositePlacement(o);return[getOppositeAlignmentPlacement(o),e,getOppositeAlignmentPlacement(e)]}function getOppositeAlignmentPlacement(o){return o.replace(/start|end/g,e=>oppositeAlignmentMap[e])}const lrPlacement=["left","right"],rlPlacement=["right","left"],tbPlacement=["top","bottom"],btPlacement=["bottom","top"];function getSideList(o,e,s){switch(o){case"top":case"bottom":return s?e?rlPlacement:lrPlacement:e?lrPlacement:rlPlacement;case"left":case"right":return e?tbPlacement:btPlacement;default:return[]}}function getOppositeAxisPlacements(o,e,s,a){const l=getAlignment(o);let u=getSideList(getSide$1(o),s==="start",a);return l&&(u=u.map(c=>c+"-"+l),e&&(u=u.concat(u.map(getOppositeAlignmentPlacement)))),u}function getOppositePlacement(o){return o.replace(/left|right|bottom|top/g,e=>oppositeSideMap[e])}function expandPaddingObject(o){return{top:0,right:0,bottom:0,left:0,...o}}function getPaddingObject(o){return typeof o!="number"?expandPaddingObject(o):{top:o,right:o,bottom:o,left:o}}function rectToClientRect(o){const{x:e,y:s,width:a,height:l}=o;return{width:a,height:l,top:s,left:e,right:e+a,bottom:s+l,x:e,y:s}}/*!
* tabbable 6.4.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var candidateSelectors=["input:not([inert]):not([inert] *)","select:not([inert]):not([inert] *)","textarea:not([inert]):not([inert] *)","a[href]:not([inert]):not([inert] *)","button:not([inert]):not([inert] *)","[tabindex]:not(slot):not([inert]):not([inert] *)","audio[controls]:not([inert]):not([inert] *)","video[controls]:not([inert]):not([inert] *)",'[contenteditable]:not([contenteditable="false"]):not([inert]):not([inert] *)',"details>summary:first-of-type:not([inert]):not([inert] *)","details:not([inert]):not([inert] *)"],candidateSelector=candidateSelectors.join(","),NoElement=typeof Element>"u",matches$1=NoElement?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,getRootNode=!NoElement&&Element.prototype.getRootNode?function(o){var e;return o==null||(e=o.getRootNode)===null||e===void 0?void 0:e.call(o)}:function(o){return o==null?void 0:o.ownerDocument},_isInert=function(e,s){var a;s===void 0&&(s=!0);var l=e==null||(a=e.getAttribute)===null||a===void 0?void 0:a.call(e,"inert"),u=l===""||l==="true",c=u||s&&e&&(typeof e.closest=="function"?e.closest("[inert]"):_isInert(e.parentNode));return c},isContentEditable=function(e){var s,a=e==null||(s=e.getAttribute)===null||s===void 0?void 0:s.call(e,"contenteditable");return a===""||a==="true"},getCandidates=function(e,s,a){if(_isInert(e))return[];var l=Array.prototype.slice.apply(e.querySelectorAll(candidateSelector));return s&&matches$1.call(e,candidateSelector)&&l.unshift(e),l=l.filter(a),l},_getCandidatesIteratively=function(e,s,a){for(var l=[],u=Array.from(e);u.length;){var c=u.shift();if(!_isInert(c,!1))if(c.tagName==="SLOT"){var d=c.assignedElements(),h=d.length?d:c.children,p=_getCandidatesIteratively(h,!0,a);a.flatten?l.push.apply(l,p):l.push({scopeParent:c,candidates:p})}else{var m=matches$1.call(c,candidateSelector);m&&a.filter(c)&&(s||!e.includes(c))&&l.push(c);var g=c.shadowRoot||typeof a.getShadowRoot=="function"&&a.getShadowRoot(c),y=!_isInert(g,!1)&&(!a.shadowRootFilter||a.shadowRootFilter(c));if(g&&y){var A=_getCandidatesIteratively(g===!0?c.children:g.children,!0,a);a.flatten?l.push.apply(l,A):l.push({scopeParent:c,candidates:A})}else u.unshift.apply(u,c.children)}}return l},hasTabIndex=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},getTabIndex=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||isContentEditable(e))&&!hasTabIndex(e)?0:e.tabIndex},getSortOrderTabIndex=function(e,s){var a=getTabIndex(e);return a<0&&s&&!hasTabIndex(e)?0:a},sortOrderedTabbables=function(e,s){return e.tabIndex===s.tabIndex?e.documentOrder-s.documentOrder:e.tabIndex-s.tabIndex},isInput=function(e){return e.tagName==="INPUT"},isHiddenInput$1=function(e){return isInput(e)&&e.type==="hidden"},isDetailsWithSummary=function(e){var s=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(a){return a.tagName==="SUMMARY"});return s},getCheckedRadio=function(e,s){for(var a=0;a<e.length;a++)if(e[a].checked&&e[a].form===s)return e[a]},isTabbableRadio=function(e){if(!e.name)return!0;var s=e.form||getRootNode(e),a=function(d){return s.querySelectorAll('input[type="radio"][name="'+d+'"]')},l;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")l=a(window.CSS.escape(e.name));else try{l=a(e.name)}catch(c){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",c.message),!1}var u=getCheckedRadio(l,e.form);return!u||u===e},isRadio=function(e){return isInput(e)&&e.type==="radio"},isNonTabbableRadio=function(e){return isRadio(e)&&!isTabbableRadio(e)},isNodeAttached=function(e){var s,a=e&&getRootNode(e),l=(s=a)===null||s===void 0?void 0:s.host,u=!1;if(a&&a!==e){var c,d,h;for(u=!!((c=l)!==null&&c!==void 0&&(d=c.ownerDocument)!==null&&d!==void 0&&d.contains(l)||e!=null&&(h=e.ownerDocument)!==null&&h!==void 0&&h.contains(e));!u&&l;){var p,m,g;a=getRootNode(l),l=(p=a)===null||p===void 0?void 0:p.host,u=!!((m=l)!==null&&m!==void 0&&(g=m.ownerDocument)!==null&&g!==void 0&&g.contains(l))}}return u},isZeroArea=function(e){var s=e.getBoundingClientRect(),a=s.width,l=s.height;return a===0&&l===0},isHidden=function(e,s){var a=s.displayCheck,l=s.getShadowRoot;if(a==="full-native"&&"checkVisibility"in e){var u=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!u}if(getComputedStyle(e).visibility==="hidden")return!0;var c=matches$1.call(e,"details>summary:first-of-type"),d=c?e.parentElement:e;if(matches$1.call(d,"details:not([open]) *"))return!0;if(!a||a==="full"||a==="full-native"||a==="legacy-full"){if(typeof l=="function"){for(var h=e;e;){var p=e.parentElement,m=getRootNode(e);if(p&&!p.shadowRoot&&l(p)===!0)return isZeroArea(e);e.assignedSlot?e=e.assignedSlot:!p&&m!==e.ownerDocument?e=m.host:e=p}e=h}if(isNodeAttached(e))return!e.getClientRects().length;if(a!=="legacy-full")return!0}else if(a==="non-zero-area")return isZeroArea(e);return!1},isDisabledFromFieldset=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var s=e.parentElement;s;){if(s.tagName==="FIELDSET"&&s.disabled){for(var a=0;a<s.children.length;a++){var l=s.children.item(a);if(l.tagName==="LEGEND")return matches$1.call(s,"fieldset[disabled] *")?!0:!l.contains(e)}return!0}s=s.parentElement}return!1},isNodeMatchingSelectorFocusable=function(e,s){return!(s.disabled||isHiddenInput$1(s)||isHidden(s,e)||isDetailsWithSummary(s)||isDisabledFromFieldset(s))},isNodeMatchingSelectorTabbable=function(e,s){return!(isNonTabbableRadio(s)||getTabIndex(s)<0||!isNodeMatchingSelectorFocusable(e,s))},isShadowRootTabbable=function(e){var s=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(s)||s>=0)},_sortByOrder=function(e){var s=[],a=[];return e.forEach(function(l,u){var c=!!l.scopeParent,d=c?l.scopeParent:l,h=getSortOrderTabIndex(d,c),p=c?_sortByOrder(l.candidates):d;h===0?c?s.push.apply(s,p):s.push(d):a.push({documentOrder:u,tabIndex:h,item:l,isScope:c,content:p})}),a.sort(sortOrderedTabbables).reduce(function(l,u){return u.isScope?l.push.apply(l,u.content):l.push(u.content),l},[]).concat(s)},tabbable=function(e,s){s=s||{};var a;return s.getShadowRoot?a=_getCandidatesIteratively([e],s.includeContainer,{filter:isNodeMatchingSelectorTabbable.bind(null,s),flatten:!1,getShadowRoot:s.getShadowRoot,shadowRootFilter:isShadowRootTabbable}):a=getCandidates(e,s.includeContainer,isNodeMatchingSelectorTabbable.bind(null,s)),_sortByOrder(a)},focusable=function(e,s){s=s||{};var a;return s.getShadowRoot?a=_getCandidatesIteratively([e],s.includeContainer,{filter:isNodeMatchingSelectorFocusable.bind(null,s),flatten:!0,getShadowRoot:s.getShadowRoot}):a=getCandidates(e,s.includeContainer,isNodeMatchingSelectorFocusable.bind(null,s)),a},isTabbable=function(e,s){if(s=s||{},!e)throw new Error("No node provided");return matches$1.call(e,candidateSelector)===!1?!1:isNodeMatchingSelectorTabbable(s,e)};function getPlatform(){const o=navigator.userAgentData;return o!=null&&o.platform?o.platform:navigator.platform}function getUserAgent(){const o=navigator.userAgentData;return o&&Array.isArray(o.brands)?o.brands.map(e=>{let{brand:s,version:a}=e;return s+"/"+a}).join(" "):navigator.userAgent}function isSafari(){return/apple/i.test(navigator.vendor)}function isAndroid(){const o=/android/i;return o.test(getPlatform())||o.test(getUserAgent())}function isMac$1(){return getPlatform().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function isJSDOM(){return getUserAgent().includes("jsdom/")}const FOCUSABLE_ATTRIBUTE$1="data-floating-ui-focusable",TYPEABLE_SELECTOR="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function activeElement(o){let e=o.activeElement;for(;((s=e)==null||(s=s.shadowRoot)==null?void 0:s.activeElement)!=null;){var s;e=e.shadowRoot.activeElement}return e}function contains$3(o,e){if(!o||!e)return!1;const s=e.getRootNode==null?void 0:e.getRootNode();if(o.contains(e))return!0;if(s&&isShadowRoot(s)){let a=e;for(;a;){if(o===a)return!0;a=a.parentNode||a.host}}return!1}function getTarget$2(o){return"composedPath"in o?o.composedPath()[0]:o.target}function isEventTargetWithin(o,e){if(e==null)return!1;if("composedPath"in o)return o.composedPath().includes(e);const s=o;return s.target!=null&&e.contains(s.target)}function isRootElement(o){return o.matches("html,body")}function getDocument$1(o){return(o==null?void 0:o.ownerDocument)||document}function isTypeableElement(o){return isHTMLElement(o)&&o.matches(TYPEABLE_SELECTOR)}function isTypeableCombobox(o){return o?o.getAttribute("role")==="combobox"&&isTypeableElement(o):!1}function matchesFocusVisible(o){if(!o||isJSDOM())return!0;try{return o.matches(":focus-visible")}catch{return!0}}function getFloatingFocusElement(o){return o?o.hasAttribute(FOCUSABLE_ATTRIBUTE$1)?o:o.querySelector("["+FOCUSABLE_ATTRIBUTE$1+"]")||o:null}function getNodeChildren$1(o,e,s){return s===void 0&&(s=!0),o.filter(l=>{var u;return l.parentId===e&&(!s||((u=l.context)==null?void 0:u.open))}).flatMap(l=>[l,...getNodeChildren$1(o,l.id,s)])}function getNodeAncestors(o,e){var s;let a=[],l=(s=o.find(u=>u.id===e))==null?void 0:s.parentId;for(;l;){const u=o.find(c=>c.id===l);l=u==null?void 0:u.parentId,u&&(a=a.concat(u))}return a}function stopEvent(o){o.preventDefault(),o.stopPropagation()}function isReactEvent(o){return"nativeEvent"in o}function isVirtualClick(o){return o.mozInputSource===0&&o.isTrusted?!0:isAndroid()&&o.pointerType?o.type==="click"&&o.buttons===1:o.detail===0&&!o.pointerType}function isVirtualPointerEvent(o){return isJSDOM()?!1:!isAndroid()&&o.width===0&&o.height===0||isAndroid()&&o.width===1&&o.height===1&&o.pressure===0&&o.detail===0&&o.pointerType==="mouse"||o.width<1&&o.height<1&&o.pressure===0&&o.detail===0&&o.pointerType==="touch"}function isMouseLikePointerType(o,e){const s=["mouse","pen"];return e||s.push("",void 0),s.includes(o)}var isClient$1=typeof document<"u",noop$9=function(){},index$2=isClient$1?reactExports.useLayoutEffect:noop$9;const SafeReact$1={...React$1};function useLatestRef$1(o){const e=reactExports.useRef(o);return index$2(()=>{e.current=o}),e}const useInsertionEffect=SafeReact$1.useInsertionEffect,useSafeInsertionEffect=useInsertionEffect||(o=>o());function useEffectEvent(o){const e=reactExports.useRef(()=>{});return useSafeInsertionEffect(()=>{e.current=o}),reactExports.useCallback(function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return e.current==null?void 0:e.current(...a)},[])}const getTabbableOptions=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function getTabbableIn(o,e){const s=tabbable(o,getTabbableOptions()),a=s.length;if(a===0)return;const l=activeElement(getDocument$1(o)),u=s.indexOf(l),c=u===-1?e===1?0:a-1:u+e;return s[c]}function getNextTabbable(o){return getTabbableIn(getDocument$1(o).body,1)||o}function getPreviousTabbable(o){return getTabbableIn(getDocument$1(o).body,-1)||o}function isOutsideEvent(o,e){const s=e||o.currentTarget,a=o.relatedTarget;return!a||!contains$3(s,a)}function disableFocusInside(o){tabbable(o,getTabbableOptions()).forEach(s=>{s.dataset.tabindex=s.getAttribute("tabindex")||"",s.setAttribute("tabindex","-1")})}function enableFocusInside(o){o.querySelectorAll("[data-tabindex]").forEach(s=>{const a=s.dataset.tabindex;delete s.dataset.tabindex,a?s.setAttribute("tabindex",a):s.removeAttribute("tabindex")})}function computeCoordsFromPlacement(o,e,s){let{reference:a,floating:l}=o;const u=getSideAxis(e),c=getAlignmentAxis(e),d=getAxisLength(c),h=getSide$1(e),p=u==="y",m=a.x+a.width/2-l.width/2,g=a.y+a.height/2-l.height/2,y=a[d]/2-l[d]/2;let A;switch(h){case"top":A={x:m,y:a.y-l.height};break;case"bottom":A={x:m,y:a.y+a.height};break;case"right":A={x:a.x+a.width,y:g};break;case"left":A={x:a.x-l.width,y:g};break;default:A={x:a.x,y:a.y}}switch(getAlignment(e)){case"start":A[c]-=y*(s&&p?-1:1);break;case"end":A[c]+=y*(s&&p?-1:1);break}return A}async function detectOverflow(o,e){var s;e===void 0&&(e={});const{x:a,y:l,platform:u,rects:c,elements:d,strategy:h}=o,{boundary:p="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:y=!1,padding:A=0}=evaluate(e,o),T=getPaddingObject(A),v=d[y?g==="floating"?"reference":"floating":g],_=rectToClientRect(await u.getClippingRect({element:(s=await(u.isElement==null?void 0:u.isElement(v)))==null||s?v:v.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(d.floating)),boundary:p,rootBoundary:m,strategy:h})),w=g==="floating"?{x:a,y:l,width:c.floating.width,height:c.floating.height}:c.reference,R=await(u.getOffsetParent==null?void 0:u.getOffsetParent(d.floating)),k=await(u.isElement==null?void 0:u.isElement(R))?await(u.getScale==null?void 0:u.getScale(R))||{x:1,y:1}:{x:1,y:1},I=rectToClientRect(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:w,offsetParent:R,strategy:h}):w);return{top:(_.top-I.top+T.top)/k.y,bottom:(I.bottom-_.bottom+T.bottom)/k.y,left:(_.left-I.left+T.left)/k.x,right:(I.right-_.right+T.right)/k.x}}const computePosition$1=async(o,e,s)=>{const{placement:a="bottom",strategy:l="absolute",middleware:u=[],platform:c}=s,d=u.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(e));let p=await c.getElementRects({reference:o,floating:e,strategy:l}),{x:m,y:g}=computeCoordsFromPlacement(p,a,h),y=a,A={},T=0;for(let v=0;v<d.length;v++){var E;const{name:_,fn:w}=d[v],{x:R,y:k,data:I,reset:P}=await w({x:m,y:g,initialPlacement:a,placement:y,strategy:l,middlewareData:A,rects:p,platform:{...c,detectOverflow:(E=c.detectOverflow)!=null?E:detectOverflow},elements:{reference:o,floating:e}});m=R??m,g=k??g,A={...A,[_]:{...A[_],...I}},P&&T<=50&&(T++,typeof P=="object"&&(P.placement&&(y=P.placement),P.rects&&(p=P.rects===!0?await c.getElementRects({reference:o,floating:e,strategy:l}):P.rects),{x:m,y:g}=computeCoordsFromPlacement(p,y,h)),v=-1)}return{x:m,y:g,placement:y,strategy:l,middlewareData:A}},arrow$4=o=>({name:"arrow",options:o,async fn(e){const{x:s,y:a,placement:l,rects:u,platform:c,elements:d,middlewareData:h}=e,{element:p,padding:m=0}=evaluate(o,e)||{};if(p==null)return{};const g=getPaddingObject(m),y={x:s,y:a},A=getAlignmentAxis(l),T=getAxisLength(A),E=await c.getDimensions(p),v=A==="y",_=v?"top":"left",w=v?"bottom":"right",R=v?"clientHeight":"clientWidth",k=u.reference[T]+u.reference[A]-y[A]-u.floating[T],I=y[A]-u.reference[A],P=await(c.getOffsetParent==null?void 0:c.getOffsetParent(p));let N=P?P[R]:0;(!N||!await(c.isElement==null?void 0:c.isElement(P)))&&(N=d.floating[R]||u.floating[T]);const L=k/2-I/2,Q=N/2-E[T]/2-1,j=min$1(g[_],Q),F=min$1(g[w],Q),V=j,J=N-E[T]-F,z=N/2-E[T]/2+L,Y=clamp$1(V,z,J),fe=!h.arrow&&getAlignment(l)!=null&&z!==Y&&u.reference[T]/2-(z<V?j:F)-E[T]/2<0,de=fe?z<V?z-V:z-J:0;return{[A]:y[A]+de,data:{[A]:Y,centerOffset:z-Y-de,...fe&&{alignmentOffset:de}},reset:fe}}});function getPlacementList(o,e,s){return(o?[...s.filter(l=>getAlignment(l)===o),...s.filter(l=>getAlignment(l)!==o)]:s.filter(l=>getSide$1(l)===l)).filter(l=>o?getAlignment(l)===o||(e?getOppositeAlignmentPlacement(l)!==l:!1):!0)}const autoPlacement$2=function(o){return o===void 0&&(o={}),{name:"autoPlacement",options:o,async fn(e){var s,a,l;const{rects:u,middlewareData:c,placement:d,platform:h,elements:p}=e,{crossAxis:m=!1,alignment:g,allowedPlacements:y=placements,autoAlignment:A=!0,...T}=evaluate(o,e),E=g!==void 0||y===placements?getPlacementList(g||null,A,y):y,v=await h.detectOverflow(e,T),_=((s=c.autoPlacement)==null?void 0:s.index)||0,w=E[_];if(w==null)return{};const R=getAlignmentSides(w,u,await(h.isRTL==null?void 0:h.isRTL(p.floating)));if(d!==w)return{reset:{placement:E[0]}};const k=[v[getSide$1(w)],v[R[0]],v[R[1]]],I=[...((a=c.autoPlacement)==null?void 0:a.overflows)||[],{placement:w,overflows:k}],P=E[_+1];if(P)return{data:{index:_+1,overflows:I},reset:{placement:P}};const N=I.map(j=>{const F=getAlignment(j.placement);return[j.placement,F&&m?j.overflows.slice(0,2).reduce((V,J)=>V+J,0):j.overflows[0],j.overflows]}).sort((j,F)=>j[1]-F[1]),Q=((l=N.filter(j=>j[2].slice(0,getAlignment(j[0])?2:3).every(F=>F<=0))[0])==null?void 0:l[0])||N[0][0];return Q!==d?{data:{index:_+1,overflows:I},reset:{placement:Q}}:{}}}},flip$2=function(o){return o===void 0&&(o={}),{name:"flip",options:o,async fn(e){var s,a;const{placement:l,middlewareData:u,rects:c,initialPlacement:d,platform:h,elements:p}=e,{mainAxis:m=!0,crossAxis:g=!0,fallbackPlacements:y,fallbackStrategy:A="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:E=!0,...v}=evaluate(o,e);if((s=u.arrow)!=null&&s.alignmentOffset)return{};const _=getSide$1(l),w=getSideAxis(d),R=getSide$1(d)===d,k=await(h.isRTL==null?void 0:h.isRTL(p.floating)),I=y||(R||!E?[getOppositePlacement(d)]:getExpandedPlacements(d)),P=T!=="none";!y&&P&&I.push(...getOppositeAxisPlacements(d,E,T,k));const N=[d,...I],L=await h.detectOverflow(e,v),Q=[];let j=((a=u.flip)==null?void 0:a.overflows)||[];if(m&&Q.push(L[_]),g){const z=getAlignmentSides(l,c,k);Q.push(L[z[0]],L[z[1]])}if(j=[...j,{placement:l,overflows:Q}],!Q.every(z=>z<=0)){var F,V;const z=(((F=u.flip)==null?void 0:F.index)||0)+1,Y=N[z];if(Y&&(!(g==="alignment"?w!==getSideAxis(Y):!1)||j.every(X=>getSideAxis(X.placement)===w?X.overflows[0]>0:!0)))return{data:{index:z,overflows:j},reset:{placement:Y}};let fe=(V=j.filter(de=>de.overflows[0]<=0).sort((de,X)=>de.overflows[1]-X.overflows[1])[0])==null?void 0:V.placement;if(!fe)switch(A){case"bestFit":{var J;const de=(J=j.filter(X=>{if(P){const he=getSideAxis(X.placement);return he===w||he==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(he=>he>0).reduce((he,ue)=>he+ue,0)]).sort((X,he)=>X[1]-he[1])[0])==null?void 0:J[0];de&&(fe=de);break}case"initialPlacement":fe=d;break}if(l!==fe)return{reset:{placement:fe}}}return{}}}},originSides=new Set(["left","top"]);async function convertValueToCoords(o,e){const{placement:s,platform:a,elements:l}=o,u=await(a.isRTL==null?void 0:a.isRTL(l.floating)),c=getSide$1(s),d=getAlignment(s),h=getSideAxis(s)==="y",p=originSides.has(c)?-1:1,m=u&&h?-1:1,g=evaluate(e,o);let{mainAxis:y,crossAxis:A,alignmentAxis:T}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return d&&typeof T=="number"&&(A=d==="end"?T*-1:T),h?{x:A*m,y:y*p}:{x:y*p,y:A*m}}const offset$3=function(o){return o===void 0&&(o=0),{name:"offset",options:o,async fn(e){var s,a;const{x:l,y:u,placement:c,middlewareData:d}=e,h=await convertValueToCoords(e,o);return c===((s=d.offset)==null?void 0:s.placement)&&(a=d.arrow)!=null&&a.alignmentOffset?{}:{x:l+h.x,y:u+h.y,data:{...h,placement:c}}}}},shift$4=function(o){return o===void 0&&(o={}),{name:"shift",options:o,async fn(e){const{x:s,y:a,placement:l,platform:u}=e,{mainAxis:c=!0,crossAxis:d=!1,limiter:h={fn:_=>{let{x:w,y:R}=_;return{x:w,y:R}}},...p}=evaluate(o,e),m={x:s,y:a},g=await u.detectOverflow(e,p),y=getSideAxis(getSide$1(l)),A=getOppositeAxis(y);let T=m[A],E=m[y];if(c){const _=A==="y"?"top":"left",w=A==="y"?"bottom":"right",R=T+g[_],k=T-g[w];T=clamp$1(R,T,k)}if(d){const _=y==="y"?"top":"left",w=y==="y"?"bottom":"right",R=E+g[_],k=E-g[w];E=clamp$1(R,E,k)}const v=h.fn({...e,[A]:T,[y]:E});return{...v,data:{x:v.x-s,y:v.y-a,enabled:{[A]:c,[y]:d}}}}}},limitShift$2=function(o){return o===void 0&&(o={}),{options:o,fn(e){const{x:s,y:a,placement:l,rects:u,middlewareData:c}=e,{offset:d=0,mainAxis:h=!0,crossAxis:p=!0}=evaluate(o,e),m={x:s,y:a},g=getSideAxis(l),y=getOppositeAxis(g);let A=m[y],T=m[g];const E=evaluate(d,e),v=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(h){const R=y==="y"?"height":"width",k=u.reference[y]-u.floating[R]+v.mainAxis,I=u.reference[y]+u.reference[R]-v.mainAxis;A<k?A=k:A>I&&(A=I)}if(p){var _,w;const R=y==="y"?"width":"height",k=originSides.has(getSide$1(l)),I=u.reference[g]-u.floating[R]+(k&&((_=c.offset)==null?void 0:_[g])||0)+(k?0:v.crossAxis),P=u.reference[g]+u.reference[R]+(k?0:((w=c.offset)==null?void 0:w[g])||0)-(k?v.crossAxis:0);T<I?T=I:T>P&&(T=P)}return{[y]:A,[g]:T}}}},size$3=function(o){return o===void 0&&(o={}),{name:"size",options:o,async fn(e){var s,a;const{placement:l,rects:u,platform:c,elements:d}=e,{apply:h=()=>{},...p}=evaluate(o,e),m=await c.detectOverflow(e,p),g=getSide$1(l),y=getAlignment(l),A=getSideAxis(l)==="y",{width:T,height:E}=u.floating;let v,_;g==="top"||g==="bottom"?(v=g,_=y===(await(c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(_=g,v=y==="end"?"top":"bottom");const w=E-m.top-m.bottom,R=T-m.left-m.right,k=min$1(E-m[v],w),I=min$1(T-m[_],R),P=!e.middlewareData.shift;let N=k,L=I;if((s=e.middlewareData.shift)!=null&&s.enabled.x&&(L=R),(a=e.middlewareData.shift)!=null&&a.enabled.y&&(N=w),P&&!y){const j=max$1(m.left,0),F=max$1(m.right,0),V=max$1(m.top,0),J=max$1(m.bottom,0);A?L=T-2*(j!==0||F!==0?j+F:max$1(m.left,m.right)):N=E-2*(V!==0||J!==0?V+J:max$1(m.top,m.bottom))}await h({...e,availableWidth:L,availableHeight:N});const Q=await c.getDimensions(d.floating);return T!==Q.width||E!==Q.height?{reset:{rects:!0}}:{}}}};function getCssDimensions(o){const e=getComputedStyle$1(o);let s=parseFloat(e.width)||0,a=parseFloat(e.height)||0;const l=isHTMLElement(o),u=l?o.offsetWidth:s,c=l?o.offsetHeight:a,d=round$2(s)!==u||round$2(a)!==c;return d&&(s=u,a=c),{width:s,height:a,$:d}}function unwrapElement(o){return isElement$1(o)?o:o.contextElement}function getScale$1(o){const e=unwrapElement(o);if(!isHTMLElement(e))return createCoords(1);const s=e.getBoundingClientRect(),{width:a,height:l,$:u}=getCssDimensions(e);let c=(u?round$2(s.width):s.width)/a,d=(u?round$2(s.height):s.height)/l;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const noOffsets=createCoords(0);function getVisualOffsets(o){const e=getWindow(o);return!isWebKit()||!e.visualViewport?noOffsets:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function shouldAddVisualOffsets(o,e,s){return e===void 0&&(e=!1),!s||e&&s!==getWindow(o)?!1:e}function getBoundingClientRect(o,e,s,a){e===void 0&&(e=!1),s===void 0&&(s=!1);const l=o.getBoundingClientRect(),u=unwrapElement(o);let c=createCoords(1);e&&(a?isElement$1(a)&&(c=getScale$1(a)):c=getScale$1(o));const d=shouldAddVisualOffsets(u,s,a)?getVisualOffsets(u):createCoords(0);let h=(l.left+d.x)/c.x,p=(l.top+d.y)/c.y,m=l.width/c.x,g=l.height/c.y;if(u){const y=getWindow(u),A=a&&isElement$1(a)?getWindow(a):a;let T=y,E=getFrameElement(T);for(;E&&a&&A!==T;){const v=getScale$1(E),_=E.getBoundingClientRect(),w=getComputedStyle$1(E),R=_.left+(E.clientLeft+parseFloat(w.paddingLeft))*v.x,k=_.top+(E.clientTop+parseFloat(w.paddingTop))*v.y;h*=v.x,p*=v.y,m*=v.x,g*=v.y,h+=R,p+=k,T=getWindow(E),E=getFrameElement(T)}}return rectToClientRect({width:m,height:g,x:h,y:p})}function getWindowScrollBarX(o,e){const s=getNodeScroll(o).scrollLeft;return e?e.left+s:getBoundingClientRect(getDocumentElement$1(o)).left+s}function getHTMLOffset(o,e){const s=o.getBoundingClientRect(),a=s.left+e.scrollLeft-getWindowScrollBarX(o,s),l=s.top+e.scrollTop;return{x:a,y:l}}function convertOffsetParentRelativeRectToViewportRelativeRect(o){let{elements:e,rect:s,offsetParent:a,strategy:l}=o;const u=l==="fixed",c=getDocumentElement$1(a),d=e?isTopLayer(e.floating):!1;if(a===c||d&&u)return s;let h={scrollLeft:0,scrollTop:0},p=createCoords(1);const m=createCoords(0),g=isHTMLElement(a);if((g||!g&&!u)&&((getNodeName(a)!=="body"||isOverflowElement(c))&&(h=getNodeScroll(a)),isHTMLElement(a))){const A=getBoundingClientRect(a);p=getScale$1(a),m.x=A.x+a.clientLeft,m.y=A.y+a.clientTop}const y=c&&!g&&!u?getHTMLOffset(c,h):createCoords(0);return{width:s.width*p.x,height:s.height*p.y,x:s.x*p.x-h.scrollLeft*p.x+m.x+y.x,y:s.y*p.y-h.scrollTop*p.y+m.y+y.y}}function getClientRects(o){return Array.from(o.getClientRects())}function getDocumentRect(o){const e=getDocumentElement$1(o),s=getNodeScroll(o),a=o.ownerDocument.body,l=max$1(e.scrollWidth,e.clientWidth,a.scrollWidth,a.clientWidth),u=max$1(e.scrollHeight,e.clientHeight,a.scrollHeight,a.clientHeight);let c=-s.scrollLeft+getWindowScrollBarX(o);const d=-s.scrollTop;return getComputedStyle$1(a).direction==="rtl"&&(c+=max$1(e.clientWidth,a.clientWidth)-l),{width:l,height:u,x:c,y:d}}const SCROLLBAR_MAX=25;function getViewportRect(o,e){const s=getWindow(o),a=getDocumentElement$1(o),l=s.visualViewport;let u=a.clientWidth,c=a.clientHeight,d=0,h=0;if(l){u=l.width,c=l.height;const m=isWebKit();(!m||m&&e==="fixed")&&(d=l.offsetLeft,h=l.offsetTop)}const p=getWindowScrollBarX(a);if(p<=0){const m=a.ownerDocument,g=m.body,y=getComputedStyle(g),A=m.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,T=Math.abs(a.clientWidth-g.clientWidth-A);T<=SCROLLBAR_MAX&&(u-=T)}else p<=SCROLLBAR_MAX&&(u+=p);return{width:u,height:c,x:d,y:h}}const absoluteOrFixed=new Set(["absolute","fixed"]);function getInnerBoundingClientRect(o,e){const s=getBoundingClientRect(o,!0,e==="fixed"),a=s.top+o.clientTop,l=s.left+o.clientLeft,u=isHTMLElement(o)?getScale$1(o):createCoords(1),c=o.clientWidth*u.x,d=o.clientHeight*u.y,h=l*u.x,p=a*u.y;return{width:c,height:d,x:h,y:p}}function getClientRectFromClippingAncestor(o,e,s){let a;if(e==="viewport")a=getViewportRect(o,s);else if(e==="document")a=getDocumentRect(getDocumentElement$1(o));else if(isElement$1(e))a=getInnerBoundingClientRect(e,s);else{const l=getVisualOffsets(o);a={x:e.x-l.x,y:e.y-l.y,width:e.width,height:e.height}}return rectToClientRect(a)}function hasFixedPositionAncestor(o,e){const s=getParentNode(o);return s===e||!isElement$1(s)||isLastTraversableNode(s)?!1:getComputedStyle$1(s).position==="fixed"||hasFixedPositionAncestor(s,e)}function getClippingElementAncestors(o,e){const s=e.get(o);if(s)return s;let a=getOverflowAncestors(o,[],!1).filter(d=>isElement$1(d)&&getNodeName(d)!=="body"),l=null;const u=getComputedStyle$1(o).position==="fixed";let c=u?getParentNode(o):o;for(;isElement$1(c)&&!isLastTraversableNode(c);){const d=getComputedStyle$1(c),h=isContainingBlock(c);!h&&d.position==="fixed"&&(l=null),(u?!h&&!l:!h&&d.position==="static"&&!!l&&absoluteOrFixed.has(l.position)||isOverflowElement(c)&&!h&&hasFixedPositionAncestor(o,c))?a=a.filter(m=>m!==c):l=d,c=getParentNode(c)}return e.set(o,a),a}function getClippingRect(o){let{element:e,boundary:s,rootBoundary:a,strategy:l}=o;const c=[...s==="clippingAncestors"?isTopLayer(e)?[]:getClippingElementAncestors(e,this._c):[].concat(s),a],d=c[0],h=c.reduce((p,m)=>{const g=getClientRectFromClippingAncestor(e,m,l);return p.top=max$1(g.top,p.top),p.right=min$1(g.right,p.right),p.bottom=min$1(g.bottom,p.bottom),p.left=max$1(g.left,p.left),p},getClientRectFromClippingAncestor(e,d,l));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function getDimensions(o){const{width:e,height:s}=getCssDimensions(o);return{width:e,height:s}}function getRectRelativeToOffsetParent(o,e,s){const a=isHTMLElement(e),l=getDocumentElement$1(e),u=s==="fixed",c=getBoundingClientRect(o,!0,u,e);let d={scrollLeft:0,scrollTop:0};const h=createCoords(0);function p(){h.x=getWindowScrollBarX(l)}if(a||!a&&!u)if((getNodeName(e)!=="body"||isOverflowElement(l))&&(d=getNodeScroll(e)),a){const A=getBoundingClientRect(e,!0,u,e);h.x=A.x+e.clientLeft,h.y=A.y+e.clientTop}else l&&p();u&&!a&&l&&p();const m=l&&!a&&!u?getHTMLOffset(l,d):createCoords(0),g=c.left+d.scrollLeft-h.x-m.x,y=c.top+d.scrollTop-h.y-m.y;return{x:g,y,width:c.width,height:c.height}}function isStaticPositioned(o){return getComputedStyle$1(o).position==="static"}function getTrueOffsetParent(o,e){if(!isHTMLElement(o)||getComputedStyle$1(o).position==="fixed")return null;if(e)return e(o);let s=o.offsetParent;return getDocumentElement$1(o)===s&&(s=s.ownerDocument.body),s}function getOffsetParent(o,e){const s=getWindow(o);if(isTopLayer(o))return s;if(!isHTMLElement(o)){let l=getParentNode(o);for(;l&&!isLastTraversableNode(l);){if(isElement$1(l)&&!isStaticPositioned(l))return l;l=getParentNode(l)}return s}let a=getTrueOffsetParent(o,e);for(;a&&isTableElement(a)&&isStaticPositioned(a);)a=getTrueOffsetParent(a,e);return a&&isLastTraversableNode(a)&&isStaticPositioned(a)&&!isContainingBlock(a)?s:a||getContainingBlock(o)||s}const getElementRects=async function(o){const e=this.getOffsetParent||getOffsetParent,s=this.getDimensions,a=await s(o.floating);return{reference:getRectRelativeToOffsetParent(o.reference,await e(o.floating),o.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function isRTL(o){return getComputedStyle$1(o).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement:getDocumentElement$1,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale:getScale$1,isElement:isElement$1,isRTL};function rectsAreEqual(o,e){return o.x===e.x&&o.y===e.y&&o.width===e.width&&o.height===e.height}function observeMove(o,e){let s=null,a;const l=getDocumentElement$1(o);function u(){var d;clearTimeout(a),(d=s)==null||d.disconnect(),s=null}function c(d,h){d===void 0&&(d=!1),h===void 0&&(h=1),u();const p=o.getBoundingClientRect(),{left:m,top:g,width:y,height:A}=p;if(d||e(),!y||!A)return;const T=floor$1(g),E=floor$1(l.clientWidth-(m+y)),v=floor$1(l.clientHeight-(g+A)),_=floor$1(m),R={rootMargin:-T+"px "+-E+"px "+-v+"px "+-_+"px",threshold:max$1(0,min$1(1,h))||1};let k=!0;function I(P){const N=P[0].intersectionRatio;if(N!==h){if(!k)return c();N?c(!1,N):a=setTimeout(()=>{c(!1,1e-7)},1e3)}N===1&&!rectsAreEqual(p,o.getBoundingClientRect())&&c(),k=!1}try{s=new IntersectionObserver(I,{...R,root:l.ownerDocument})}catch{s=new IntersectionObserver(I,R)}s.observe(o)}return c(!0),u}function autoUpdate(o,e,s,a){a===void 0&&(a={});const{ancestorScroll:l=!0,ancestorResize:u=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:h=!1}=a,p=unwrapElement(o),m=l||u?[...p?getOverflowAncestors(p):[],...getOverflowAncestors(e)]:[];m.forEach(_=>{l&&_.addEventListener("scroll",s,{passive:!0}),u&&_.addEventListener("resize",s)});const g=p&&d?observeMove(p,s):null;let y=-1,A=null;c&&(A=new ResizeObserver(_=>{let[w]=_;w&&w.target===p&&A&&(A.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var R;(R=A)==null||R.observe(e)})),s()}),p&&!h&&A.observe(p),A.observe(e));let T,E=h?getBoundingClientRect(o):null;h&&v();function v(){const _=getBoundingClientRect(o);E&&!rectsAreEqual(E,_)&&s(),E=_,T=requestAnimationFrame(v)}return s(),()=>{var _;m.forEach(w=>{l&&w.removeEventListener("scroll",s),u&&w.removeEventListener("resize",s)}),g==null||g(),(_=A)==null||_.disconnect(),A=null,h&&cancelAnimationFrame(T)}}const offset$2=offset$3,autoPlacement$1=autoPlacement$2,shift$3=shift$4,flip$1=flip$2,size$2=size$3,arrow$3=arrow$4,limitShift$1=limitShift$2,computePosition=(o,e,s)=>{const a=new Map,l={platform,...s},u={...l.platform,_c:a};return computePosition$1(o,e,{...l,platform:u})};var isClient=typeof document<"u",noop$8=function(){},index$1=isClient?reactExports.useLayoutEffect:noop$8;function deepEqual(o,e){if(o===e)return!0;if(typeof o!=typeof e)return!1;if(typeof o=="function"&&o.toString()===e.toString())return!0;let s,a,l;if(o&&e&&typeof o=="object"){if(Array.isArray(o)){if(s=o.length,s!==e.length)return!1;for(a=s;a--!==0;)if(!deepEqual(o[a],e[a]))return!1;return!0}if(l=Object.keys(o),s=l.length,s!==Object.keys(e).length)return!1;for(a=s;a--!==0;)if(!{}.hasOwnProperty.call(e,l[a]))return!1;for(a=s;a--!==0;){const u=l[a];if(!(u==="_owner"&&o.$$typeof)&&!deepEqual(o[u],e[u]))return!1}return!0}return o!==o&&e!==e}function getDPR(o){return typeof window>"u"?1:(o.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(o,e){const s=getDPR(o);return Math.round(e*s)/s}function useLatestRef(o){const e=reactExports.useRef(o);return index$1(()=>{e.current=o}),e}function useFloating$1(o){o===void 0&&(o={});const{placement:e="bottom",strategy:s="absolute",middleware:a=[],platform:l,elements:{reference:u,floating:c}={},transform:d=!0,whileElementsMounted:h,open:p}=o,[m,g]=reactExports.useState({x:0,y:0,strategy:s,placement:e,middlewareData:{},isPositioned:!1}),[y,A]=reactExports.useState(a);deepEqual(y,a)||A(a);const[T,E]=reactExports.useState(null),[v,_]=reactExports.useState(null),w=reactExports.useCallback(X=>{X!==P.current&&(P.current=X,E(X))},[]),R=reactExports.useCallback(X=>{X!==N.current&&(N.current=X,_(X))},[]),k=u||T,I=c||v,P=reactExports.useRef(null),N=reactExports.useRef(null),L=reactExports.useRef(m),Q=h!=null,j=useLatestRef(h),F=useLatestRef(l),V=useLatestRef(p),J=reactExports.useCallback(()=>{if(!P.current||!N.current)return;const X={placement:e,strategy:s,middleware:y};F.current&&(X.platform=F.current),computePosition(P.current,N.current,X).then(he=>{const ue={...he,isPositioned:V.current!==!1};z.current&&!deepEqual(L.current,ue)&&(L.current=ue,reactDomExports.flushSync(()=>{g(ue)}))})},[y,e,s,F,V]);index$1(()=>{p===!1&&L.current.isPositioned&&(L.current.isPositioned=!1,g(X=>({...X,isPositioned:!1})))},[p]);const z=reactExports.useRef(!1);index$1(()=>(z.current=!0,()=>{z.current=!1}),[]),index$1(()=>{if(k&&(P.current=k),I&&(N.current=I),k&&I){if(j.current)return j.current(k,I,J);J()}},[k,I,J,j,Q]);const Y=reactExports.useMemo(()=>({reference:P,floating:N,setReference:w,setFloating:R}),[w,R]),fe=reactExports.useMemo(()=>({reference:k,floating:I}),[k,I]),de=reactExports.useMemo(()=>{const X={position:s,left:0,top:0};if(!fe.floating)return X;const he=roundByDPR(fe.floating,m.x),ue=roundByDPR(fe.floating,m.y);return d?{...X,transform:"translate("+he+"px, "+ue+"px)",...getDPR(fe.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:he,top:ue}},[s,d,fe.floating,m.x,m.y]);return reactExports.useMemo(()=>({...m,update:J,refs:Y,elements:fe,floatingStyles:de}),[m,J,Y,fe,de])}const arrow$1=o=>{function e(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:o,fn(s){const{element:a,padding:l}=typeof o=="function"?o(s):o;return a&&e(a)?a.current!=null?arrow$3({element:a.current,padding:l}).fn(s):{}:a?arrow$3({element:a,padding:l}).fn(s):{}}}},offset$1=(o,e)=>({...offset$2(o),options:[o,e]}),shift$2=(o,e)=>({...shift$3(o),options:[o,e]}),limitShift=(o,e)=>({...limitShift$1(o),options:[o,e]}),flip=(o,e)=>({...flip$1(o),options:[o,e]}),size$1=(o,e)=>({...size$2(o),options:[o,e]}),autoPlacement=(o,e)=>({...autoPlacement$1(o),options:[o,e]}),arrow$2=(o,e)=>({...arrow$1(o),options:[o,e]}),FOCUSABLE_ATTRIBUTE="data-floating-ui-focusable",ACTIVE_KEY="active",SELECTED_KEY="selected",SafeReact={...React$1};let serverHandoffComplete=!1,count$1=0;const genId=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+count$1++;function useFloatingId(){const[o,e]=reactExports.useState(()=>serverHandoffComplete?genId():void 0);return index$2(()=>{o==null&&e(genId())},[]),reactExports.useEffect(()=>{serverHandoffComplete=!0},[]),o}const useReactId=SafeReact.useId,useId=useReactId||useFloatingId;function createEventEmitter(){const o=new Map;return{emit(e,s){var a;(a=o.get(e))==null||a.forEach(l=>l(s))},on(e,s){o.has(e)||o.set(e,new Set),o.get(e).add(s)},off(e,s){var a;(a=o.get(e))==null||a.delete(s)}}}const FloatingNodeContext=reactExports.createContext(null),FloatingTreeContext=reactExports.createContext(null),useFloatingParentNodeId=()=>{var o;return((o=reactExports.useContext(FloatingNodeContext))==null?void 0:o.id)||null},useFloatingTree=()=>reactExports.useContext(FloatingTreeContext);function useFloatingNodeId(o){const e=useId(),s=useFloatingTree(),l=useFloatingParentNodeId();return index$2(()=>{if(!e)return;const u={id:e,parentId:l};return s==null||s.addNode(u),()=>{s==null||s.removeNode(u)}},[s,e,l]),e}function FloatingNode(o){const{children:e,id:s}=o,a=useFloatingParentNodeId();return jsxRuntimeExports.jsx(FloatingNodeContext.Provider,{value:reactExports.useMemo(()=>({id:s,parentId:a}),[s,a]),children:e})}function FloatingTree(o){const{children:e}=o,s=reactExports.useRef([]),a=reactExports.useCallback(c=>{s.current=[...s.current,c]},[]),l=reactExports.useCallback(c=>{s.current=s.current.filter(d=>d!==c)},[]),[u]=reactExports.useState(()=>createEventEmitter());return jsxRuntimeExports.jsx(FloatingTreeContext.Provider,{value:reactExports.useMemo(()=>({nodesRef:s,addNode:a,removeNode:l,events:u}),[a,l,u]),children:e})}function createAttribute(o){return"data-floating-ui-"+o}function clearTimeoutIfSet(o){o.current!==-1&&(clearTimeout(o.current),o.current=-1)}const safePolygonIdentifier=createAttribute("safe-polygon");function getDelay(o,e,s){if(s&&!isMouseLikePointerType(s))return 0;if(typeof o=="number")return o;if(typeof o=="function"){const a=o();return typeof a=="number"?a:a==null?void 0:a[e]}return o==null?void 0:o[e]}function getRestMs(o){return typeof o=="function"?o():o}function useHover$1(o,e){e===void 0&&(e={});const{open:s,onOpenChange:a,dataRef:l,events:u,elements:c}=o,{enabled:d=!0,delay:h=0,handleClose:p=null,mouseOnly:m=!1,restMs:g=0,move:y=!0}=e,A=useFloatingTree(),T=useFloatingParentNodeId(),E=useLatestRef$1(p),v=useLatestRef$1(h),_=useLatestRef$1(s),w=useLatestRef$1(g),R=reactExports.useRef(),k=reactExports.useRef(-1),I=reactExports.useRef(),P=reactExports.useRef(-1),N=reactExports.useRef(!0),L=reactExports.useRef(!1),Q=reactExports.useRef(()=>{}),j=reactExports.useRef(!1),F=useEffectEvent(()=>{var de;const X=(de=l.current.openEvent)==null?void 0:de.type;return(X==null?void 0:X.includes("mouse"))&&X!=="mousedown"});reactExports.useEffect(()=>{if(!d)return;function de(X){let{open:he}=X;he||(clearTimeoutIfSet(k),clearTimeoutIfSet(P),N.current=!0,j.current=!1)}return u.on("openchange",de),()=>{u.off("openchange",de)}},[d,u]),reactExports.useEffect(()=>{if(!d||!E.current||!s)return;function de(he){F()&&a(!1,he,"hover")}const X=getDocument$1(c.floating).documentElement;return X.addEventListener("mouseleave",de),()=>{X.removeEventListener("mouseleave",de)}},[c.floating,s,a,d,E,F]);const V=reactExports.useCallback(function(de,X,he){X===void 0&&(X=!0),he===void 0&&(he="hover");const ue=getDelay(v.current,"close",R.current);ue&&!I.current?(clearTimeoutIfSet(k),k.current=window.setTimeout(()=>a(!1,de,he),ue)):X&&(clearTimeoutIfSet(k),a(!1,de,he))},[v,a]),J=useEffectEvent(()=>{Q.current(),I.current=void 0}),z=useEffectEvent(()=>{if(L.current){const de=getDocument$1(c.floating).body;de.style.pointerEvents="",de.removeAttribute(safePolygonIdentifier),L.current=!1}}),Y=useEffectEvent(()=>l.current.openEvent?["click","mousedown"].includes(l.current.openEvent.type):!1);reactExports.useEffect(()=>{if(!d)return;function de(K){if(clearTimeoutIfSet(k),N.current=!1,m&&!isMouseLikePointerType(R.current)||getRestMs(w.current)>0&&!getDelay(v.current,"open"))return;const q=getDelay(v.current,"open",R.current);q?k.current=window.setTimeout(()=>{_.current||a(!0,K,"hover")},q):s||a(!0,K,"hover")}function X(K){if(Y()){z();return}Q.current();const q=getDocument$1(c.floating);if(clearTimeoutIfSet(P),j.current=!1,E.current&&l.current.floatingContext){s||clearTimeoutIfSet(k),I.current=E.current({...l.current.floatingContext,tree:A,x:K.clientX,y:K.clientY,onClose(){z(),J(),Y()||V(K,!0,"safe-polygon")}});const Z=I.current;q.addEventListener("mousemove",Z),Q.current=()=>{q.removeEventListener("mousemove",Z)};return}(R.current==="touch"?!contains$3(c.floating,K.relatedTarget):!0)&&V(K)}function he(K){Y()||l.current.floatingContext&&(E.current==null||E.current({...l.current.floatingContext,tree:A,x:K.clientX,y:K.clientY,onClose(){z(),J(),Y()||V(K)}})(K))}function ue(){clearTimeoutIfSet(k)}function G(K){Y()||V(K,!1)}if(isElement$1(c.domReference)){const K=c.domReference,q=c.floating;return s&&K.addEventListener("mouseleave",he),y&&K.addEventListener("mousemove",de,{once:!0}),K.addEventListener("mouseenter",de),K.addEventListener("mouseleave",X),q&&(q.addEventListener("mouseleave",he),q.addEventListener("mouseenter",ue),q.addEventListener("mouseleave",G)),()=>{s&&K.removeEventListener("mouseleave",he),y&&K.removeEventListener("mousemove",de),K.removeEventListener("mouseenter",de),K.removeEventListener("mouseleave",X),q&&(q.removeEventListener("mouseleave",he),q.removeEventListener("mouseenter",ue),q.removeEventListener("mouseleave",G))}}},[c,d,o,m,y,V,J,z,a,s,_,A,v,E,l,Y,w]),index$2(()=>{var de;if(d&&s&&(de=E.current)!=null&&(de=de.__options)!=null&&de.blockPointerEvents&&F()){L.current=!0;const he=c.floating;if(isElement$1(c.domReference)&&he){var X;const ue=getDocument$1(c.floating).body;ue.setAttribute(safePolygonIdentifier,"");const G=c.domReference,K=A==null||(X=A.nodesRef.current.find(q=>q.id===T))==null||(X=X.context)==null?void 0:X.elements.floating;return K&&(K.style.pointerEvents=""),ue.style.pointerEvents="none",G.style.pointerEvents="auto",he.style.pointerEvents="auto",()=>{ue.style.pointerEvents="",G.style.pointerEvents="",he.style.pointerEvents=""}}}},[d,s,T,c,A,E,F]),index$2(()=>{s||(R.current=void 0,j.current=!1,J(),z())},[s,J,z]),reactExports.useEffect(()=>()=>{J(),clearTimeoutIfSet(k),clearTimeoutIfSet(P),z()},[d,c.domReference,J,z]);const fe=reactExports.useMemo(()=>{function de(X){R.current=X.pointerType}return{onPointerDown:de,onPointerEnter:de,onMouseMove(X){const{nativeEvent:he}=X;function ue(){!N.current&&!_.current&&a(!0,he,"hover")}m&&!isMouseLikePointerType(R.current)||s||getRestMs(w.current)===0||j.current&&X.movementX**2+X.movementY**2<2||(clearTimeoutIfSet(P),R.current==="touch"?ue():(j.current=!0,P.current=window.setTimeout(ue,getRestMs(w.current))))}}},[m,a,s,_,w]);return reactExports.useMemo(()=>d?{reference:fe}:{},[d,fe])}let rafId=0;function enqueueFocus(o,e){e===void 0&&(e={});const{preventScroll:s=!1,cancelPrevious:a=!0,sync:l=!1}=e;a&&cancelAnimationFrame(rafId);const u=()=>o==null?void 0:o.focus({preventScroll:s});l?u():rafId=requestAnimationFrame(u)}function contains$2(o,e){if(!o||!e)return!1;const s=e.getRootNode==null?void 0:e.getRootNode();if(o.contains(e))return!0;if(s&&isShadowRoot(s)){let a=e;for(;a;){if(o===a)return!0;a=a.parentNode||a.host}}return!1}function getTarget$1(o){return"composedPath"in o?o.composedPath()[0]:o.target}function getDocument(o){return(o==null?void 0:o.ownerDocument)||document}const counters={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function getCounterMap(o){return o==="inert"?counters.inert:o==="aria-hidden"?counters["aria-hidden"]:counters.none}let uncontrolledElementsSet=new WeakSet,markerMap={},lockCount$1=0;const supportsInert=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,unwrapHost=o=>o&&(o.host||unwrapHost(o.parentNode)),correctElements=(o,e)=>e.map(s=>{if(o.contains(s))return s;const a=unwrapHost(s);return o.contains(a)?a:null}).filter(s=>s!=null);function applyAttributeToOthers(o,e,s,a){const l="data-floating-ui-inert",u=a?"inert":s?"aria-hidden":null,c=correctElements(e,o),d=new Set,h=new Set(c),p=[];markerMap[l]||(markerMap[l]=new WeakMap);const m=markerMap[l];c.forEach(g),y(e),d.clear();function g(A){!A||d.has(A)||(d.add(A),A.parentNode&&g(A.parentNode))}function y(A){!A||h.has(A)||[].forEach.call(A.children,T=>{if(getNodeName(T)!=="script")if(d.has(T))y(T);else{const E=u?T.getAttribute(u):null,v=E!==null&&E!=="false",_=getCounterMap(u),w=(_.get(T)||0)+1,R=(m.get(T)||0)+1;_.set(T,w),m.set(T,R),p.push(T),w===1&&v&&uncontrolledElementsSet.add(T),R===1&&T.setAttribute(l,""),!v&&u&&T.setAttribute(u,u==="inert"?"":"true")}})}return lockCount$1++,()=>{p.forEach(A=>{const T=getCounterMap(u),v=(T.get(A)||0)-1,_=(m.get(A)||0)-1;T.set(A,v),m.set(A,_),v||(!uncontrolledElementsSet.has(A)&&u&&A.removeAttribute(u),uncontrolledElementsSet.delete(A)),_||A.removeAttribute(l)}),lockCount$1--,lockCount$1||(counters.inert=new WeakMap,counters["aria-hidden"]=new WeakMap,counters.none=new WeakMap,uncontrolledElementsSet=new WeakSet,markerMap={})}}function markOthers(o,e,s){e===void 0&&(e=!1),s===void 0&&(s=!1);const a=getDocument(o[0]).body;return applyAttributeToOthers(o.concat(Array.from(a.querySelectorAll('[aria-live],[role="status"],output'))),a,e,s)}const HIDDEN_STYLES={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},FocusGuard=reactExports.forwardRef(function(e,s){const[a,l]=reactExports.useState();index$2(()=>{isSafari()&&l("button")},[]);const u={ref:s,tabIndex:0,role:a,"aria-hidden":a?void 0:!0,[createAttribute("focus-guard")]:"",style:HIDDEN_STYLES};return jsxRuntimeExports.jsx("span",{...e,...u})}),HIDDEN_OWNER_STYLES={clipPath:"inset(50%)",position:"fixed",top:0,left:0},PortalContext=reactExports.createContext(null),attr$1=createAttribute("portal");function useFloatingPortalNode(o){o===void 0&&(o={});const{id:e,root:s}=o,a=useId(),l=usePortalContext(),[u,c]=reactExports.useState(null),d=reactExports.useRef(null);return index$2(()=>()=>{u==null||u.remove(),queueMicrotask(()=>{d.current=null})},[u]),index$2(()=>{if(!a||d.current)return;const h=e?document.getElementById(e):null;if(!h)return;const p=document.createElement("div");p.id=a,p.setAttribute(attr$1,""),h.appendChild(p),d.current=p,c(p)},[e,a]),index$2(()=>{if(s===null||!a||d.current)return;let h=s||(l==null?void 0:l.portalNode);h&&!isNode$1(h)&&(h=h.current),h=h||document.body;let p=null;e&&(p=document.createElement("div"),p.id=e,h.appendChild(p));const m=document.createElement("div");m.id=a,m.setAttribute(attr$1,""),h=p||h,h.appendChild(m),d.current=m,c(m)},[e,s,a,l]),u}function FloatingPortal(o){const{children:e,id:s,root:a,preserveTabOrder:l=!0}=o,u=useFloatingPortalNode({id:s,root:a}),[c,d]=reactExports.useState(null),h=reactExports.useRef(null),p=reactExports.useRef(null),m=reactExports.useRef(null),g=reactExports.useRef(null),y=c==null?void 0:c.modal,A=c==null?void 0:c.open,T=!!c&&!c.modal&&c.open&&l&&!!(a||u);return reactExports.useEffect(()=>{if(!u||!l||y)return;function E(v){u&&isOutsideEvent(v)&&(v.type==="focusin"?enableFocusInside:disableFocusInside)(u)}return u.addEventListener("focusin",E,!0),u.addEventListener("focusout",E,!0),()=>{u.removeEventListener("focusin",E,!0),u.removeEventListener("focusout",E,!0)}},[u,l,y]),reactExports.useEffect(()=>{u&&(A||enableFocusInside(u))},[A,u]),jsxRuntimeExports.jsxs(PortalContext.Provider,{value:reactExports.useMemo(()=>({preserveTabOrder:l,beforeOutsideRef:h,afterOutsideRef:p,beforeInsideRef:m,afterInsideRef:g,portalNode:u,setFocusManagerState:d}),[l,u]),children:[T&&u&&jsxRuntimeExports.jsx(FocusGuard,{"data-type":"outside",ref:h,onFocus:E=>{if(isOutsideEvent(E,u)){var v;(v=m.current)==null||v.focus()}else{const _=c?c.domReference:null,w=getPreviousTabbable(_);w==null||w.focus()}}}),T&&u&&jsxRuntimeExports.jsx("span",{"aria-owns":u.id,style:HIDDEN_OWNER_STYLES}),u&&reactDomExports.createPortal(e,u),T&&u&&jsxRuntimeExports.jsx(FocusGuard,{"data-type":"outside",ref:p,onFocus:E=>{if(isOutsideEvent(E,u)){var v;(v=g.current)==null||v.focus()}else{const _=c?c.domReference:null,w=getNextTabbable(_);w==null||w.focus(),c!=null&&c.closeOnFocusOut&&(c==null||c.onOpenChange(!1,E.nativeEvent,"focus-out"))}}})]})}const usePortalContext=()=>reactExports.useContext(PortalContext);function useLiteMergeRefs(o){return reactExports.useMemo(()=>e=>{o.forEach(s=>{s&&(s.current=e)})},o)}const LIST_LIMIT=20;let previouslyFocusedElements=[];function clearDisconnectedPreviouslyFocusedElements(){previouslyFocusedElements=previouslyFocusedElements.filter(o=>{var e;return(e=o.deref())==null?void 0:e.isConnected})}function addPreviouslyFocusedElement(o){clearDisconnectedPreviouslyFocusedElements(),o&&getNodeName(o)!=="body"&&(previouslyFocusedElements.push(new WeakRef(o)),previouslyFocusedElements.length>LIST_LIMIT&&(previouslyFocusedElements=previouslyFocusedElements.slice(-20)))}function getPreviouslyFocusedElement(){clearDisconnectedPreviouslyFocusedElements();const o=previouslyFocusedElements[previouslyFocusedElements.length-1];return o==null?void 0:o.deref()}function getFirstTabbableElement(o){const e=getTabbableOptions();return isTabbable(o,e)?o:tabbable(o,e)[0]||o}function handleTabIndex(o,e){var s;if(!e.current.includes("floating")&&!((s=o.getAttribute("role"))!=null&&s.includes("dialog")))return;const a=getTabbableOptions(),u=focusable(o,a).filter(d=>{const h=d.getAttribute("data-tabindex")||"";return isTabbable(d,a)||d.hasAttribute("data-tabindex")&&!h.startsWith("-")}),c=o.getAttribute("tabindex");e.current.includes("floating")||u.length===0?c!=="0"&&o.setAttribute("tabindex","0"):(c!=="-1"||o.hasAttribute("data-tabindex")&&o.getAttribute("data-tabindex")!=="-1")&&(o.setAttribute("tabindex","-1"),o.setAttribute("data-tabindex","-1"))}const VisuallyHiddenDismiss=reactExports.forwardRef(function(e,s){return jsxRuntimeExports.jsx("button",{...e,type:"button",ref:s,tabIndex:-1,style:HIDDEN_STYLES})});function FloatingFocusManager(o){const{context:e,children:s,disabled:a=!1,order:l=["content"],guards:u=!0,initialFocus:c=0,returnFocus:d=!0,restoreFocus:h=!1,modal:p=!0,visuallyHiddenDismiss:m=!1,closeOnFocusOut:g=!0,outsideElementsInert:y=!1,getInsideElements:A=()=>[]}=o,{open:T,onOpenChange:E,events:v,dataRef:_,elements:{domReference:w,floating:R}}=e,k=useEffectEvent(()=>{var Te;return(Te=_.current.floatingContext)==null?void 0:Te.nodeId}),I=useEffectEvent(A),P=typeof c=="number"&&c<0,N=isTypeableCombobox(w)&&P,L=supportsInert(),Q=L?u:!0,j=!Q||L&&y,F=useLatestRef$1(l),V=useLatestRef$1(c),J=useLatestRef$1(d),z=useFloatingTree(),Y=usePortalContext(),fe=reactExports.useRef(null),de=reactExports.useRef(null),X=reactExports.useRef(!1),he=reactExports.useRef(!1),ue=reactExports.useRef(-1),G=reactExports.useRef(-1),K=Y!=null,q=getFloatingFocusElement(R),te=useEffectEvent(function(Te){return Te===void 0&&(Te=q),Te?tabbable(Te,getTabbableOptions()):[]}),Z=useEffectEvent(Te=>{const xe=te(Te);return F.current.map(Pe=>w&&Pe==="reference"?w:q&&Pe==="floating"?q:xe).filter(Boolean).flat()});reactExports.useEffect(()=>{if(a||!p)return;function Te(Pe){if(Pe.key==="Tab"){contains$3(q,activeElement(getDocument$1(q)))&&te().length===0&&!N&&stopEvent(Pe);const Le=Z(),Ue=getTarget$2(Pe);F.current[0]==="reference"&&Ue===w&&(stopEvent(Pe),Pe.shiftKey?enqueueFocus(Le[Le.length-1]):enqueueFocus(Le[1])),F.current[1]==="floating"&&Ue===q&&Pe.shiftKey&&(stopEvent(Pe),enqueueFocus(Le[0]))}}const xe=getDocument$1(q);return xe.addEventListener("keydown",Te),()=>{xe.removeEventListener("keydown",Te)}},[a,w,q,p,F,N,te,Z]),reactExports.useEffect(()=>{if(a||!R)return;function Te(xe){const Pe=getTarget$2(xe),Ue=te().indexOf(Pe);Ue!==-1&&(ue.current=Ue)}return R.addEventListener("focusin",Te),()=>{R.removeEventListener("focusin",Te)}},[a,R,te]),reactExports.useEffect(()=>{if(a||!g)return;function Te(){he.current=!0,setTimeout(()=>{he.current=!1})}function xe(Ue){const Be=Ue.relatedTarget,Ze=Ue.currentTarget,We=getTarget$2(Ue);queueMicrotask(()=>{const Ge=k(),Ye=!(contains$3(w,Be)||contains$3(R,Be)||contains$3(Be,R)||contains$3(Y==null?void 0:Y.portalNode,Be)||Be!=null&&Be.hasAttribute(createAttribute("focus-guard"))||z&&(getNodeChildren$1(z.nodesRef.current,Ge).find(Ve=>{var He,at;return contains$3((He=Ve.context)==null?void 0:He.elements.floating,Be)||contains$3((at=Ve.context)==null?void 0:at.elements.domReference,Be)})||getNodeAncestors(z.nodesRef.current,Ge).find(Ve=>{var He,at,dt;return[(He=Ve.context)==null?void 0:He.elements.floating,getFloatingFocusElement((at=Ve.context)==null?void 0:at.elements.floating)].includes(Be)||((dt=Ve.context)==null?void 0:dt.elements.domReference)===Be})));if(Ze===w&&q&&handleTabIndex(q,F),h&&Ze!==w&&!(We!=null&&We.isConnected)&&activeElement(getDocument$1(q))===getDocument$1(q).body){isHTMLElement(q)&&q.focus();const Ve=ue.current,He=te(),at=He[Ve]||He[He.length-1]||q;isHTMLElement(at)&&at.focus()}if(_.current.insideReactTree){_.current.insideReactTree=!1;return}(N||!p)&&Be&&Ye&&!he.current&&Be!==getPreviouslyFocusedElement()&&(X.current=!0,E(!1,Ue,"focus-out"))})}const Pe=!!(!z&&Y);function Le(){clearTimeoutIfSet(G),_.current.insideReactTree=!0,G.current=window.setTimeout(()=>{_.current.insideReactTree=!1})}if(R&&isHTMLElement(w))return w.addEventListener("focusout",xe),w.addEventListener("pointerdown",Te),R.addEventListener("focusout",xe),Pe&&R.addEventListener("focusout",Le,!0),()=>{w.removeEventListener("focusout",xe),w.removeEventListener("pointerdown",Te),R.removeEventListener("focusout",xe),Pe&&R.removeEventListener("focusout",Le,!0)}},[a,w,R,q,p,z,Y,E,g,h,te,N,k,F,_]);const ce=reactExports.useRef(null),be=reactExports.useRef(null),Ee=useLiteMergeRefs([ce,Y==null?void 0:Y.beforeInsideRef]),Se=useLiteMergeRefs([be,Y==null?void 0:Y.afterInsideRef]);reactExports.useEffect(()=>{var Te,xe;if(a||!R)return;const Pe=Array.from((Y==null||(Te=Y.portalNode)==null?void 0:Te.querySelectorAll("["+createAttribute("portal")+"]"))||[]),Ue=(xe=(z?getNodeAncestors(z.nodesRef.current,k()):[]).find(We=>{var Ge;return isTypeableCombobox(((Ge=We.context)==null?void 0:Ge.elements.domReference)||null)}))==null||(xe=xe.context)==null?void 0:xe.elements.domReference,Be=[R,Ue,...Pe,...I(),fe.current,de.current,ce.current,be.current,Y==null?void 0:Y.beforeOutsideRef.current,Y==null?void 0:Y.afterOutsideRef.current,F.current.includes("reference")||N?w:null].filter(We=>We!=null),Ze=p||N?markOthers(Be,!j,j):markOthers(Be);return()=>{Ze()}},[a,w,R,p,F,Y,N,Q,j,z,k,I]),index$2(()=>{if(a||!isHTMLElement(q))return;const Te=getDocument$1(q),xe=activeElement(Te);queueMicrotask(()=>{const Pe=Z(q),Le=V.current,Ue=(typeof Le=="number"?Pe[Le]:Le.current)||q,Be=contains$3(q,xe);!P&&!Be&&T&&enqueueFocus(Ue,{preventScroll:Ue===q})})},[a,T,q,P,Z,V]),index$2(()=>{if(a||!q)return;const Te=getDocument$1(q),xe=activeElement(Te);addPreviouslyFocusedElement(xe);function Pe(Be){let{reason:Ze,event:We,nested:Ge}=Be;if(["hover","safe-polygon"].includes(Ze)&&We.type==="mouseleave"&&(X.current=!0),Ze==="outside-press")if(Ge)X.current=!1;else if(isVirtualClick(We)||isVirtualPointerEvent(We))X.current=!1;else{let Ye=!1;document.createElement("div").focus({get preventScroll(){return Ye=!0,!1}}),Ye?X.current=!1:X.current=!0}}v.on("openchange",Pe);const Le=Te.createElement("span");Le.setAttribute("tabindex","-1"),Le.setAttribute("aria-hidden","true"),Object.assign(Le.style,HIDDEN_STYLES),K&&w&&w.insertAdjacentElement("afterend",Le);function Ue(){if(typeof J.current=="boolean"){const Be=w||getPreviouslyFocusedElement();return Be&&Be.isConnected?Be:Le}return J.current.current||Le}return()=>{v.off("openchange",Pe);const Be=activeElement(Te),Ze=contains$3(R,Be)||z&&getNodeChildren$1(z.nodesRef.current,k(),!1).some(Ge=>{var Ye;return contains$3((Ye=Ge.context)==null?void 0:Ye.elements.floating,Be)}),We=Ue();queueMicrotask(()=>{const Ge=getFirstTabbableElement(We);J.current&&!X.current&&isHTMLElement(Ge)&&(!(Ge!==Be&&Be!==Te.body)||Ze)&&Ge.focus({preventScroll:!0}),Le.remove()})}},[a,R,q,J,_,v,z,K,w,k]),reactExports.useEffect(()=>(queueMicrotask(()=>{X.current=!1}),()=>{queueMicrotask(clearDisconnectedPreviouslyFocusedElements)}),[a]),index$2(()=>{if(!a&&Y)return Y.setFocusManagerState({modal:p,closeOnFocusOut:g,open:T,onOpenChange:E,domReference:w}),()=>{Y.setFocusManagerState(null)}},[a,Y,p,T,E,g,w]),index$2(()=>{a||q&&handleTabIndex(q,F)},[a,q,F]);function ke(Te){return a||!m||!p?null:jsxRuntimeExports.jsx(VisuallyHiddenDismiss,{ref:Te==="start"?fe:de,onClick:xe=>E(!1,xe.nativeEvent),children:typeof m=="string"?m:"Dismiss"})}const Ae=!a&&Q&&(p?!N:!0)&&(K||p);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Ae&&jsxRuntimeExports.jsx(FocusGuard,{"data-type":"inside",ref:Ee,onFocus:Te=>{if(p){const Pe=Z();enqueueFocus(l[0]==="reference"?Pe[0]:Pe[Pe.length-1])}else if(Y!=null&&Y.preserveTabOrder&&Y.portalNode)if(X.current=!1,isOutsideEvent(Te,Y.portalNode)){const Pe=getNextTabbable(w);Pe==null||Pe.focus()}else{var xe;(xe=Y.beforeOutsideRef.current)==null||xe.focus()}}}),!N&&ke("start"),s,ke("end"),Ae&&jsxRuntimeExports.jsx(FocusGuard,{"data-type":"inside",ref:Se,onFocus:Te=>{if(p)enqueueFocus(Z()[0]);else if(Y!=null&&Y.preserveTabOrder&&Y.portalNode)if(g&&(X.current=!0),isOutsideEvent(Te,Y.portalNode)){const Pe=getPreviousTabbable(w);Pe==null||Pe.focus()}else{var xe;(xe=Y.afterOutsideRef.current)==null||xe.focus()}}})]})}let lockCount=0;const scrollbarProperty="--floating-ui-scrollbar-width";function enableScrollLock(){const o=getPlatform(),e=/iP(hone|ad|od)|iOS/.test(o)||o==="MacIntel"&&navigator.maxTouchPoints>1,s=document.body.style,l=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",u=window.innerWidth-document.documentElement.clientWidth,c=s.left?parseFloat(s.left):window.scrollX,d=s.top?parseFloat(s.top):window.scrollY;if(s.overflow="hidden",s.setProperty(scrollbarProperty,u+"px"),u&&(s[l]=u+"px"),e){var h,p;const m=((h=window.visualViewport)==null?void 0:h.offsetLeft)||0,g=((p=window.visualViewport)==null?void 0:p.offsetTop)||0;Object.assign(s,{position:"fixed",top:-(d-Math.floor(g))+"px",left:-(c-Math.floor(m))+"px",right:"0"})}return()=>{Object.assign(s,{overflow:"",[l]:""}),s.removeProperty(scrollbarProperty),e&&(Object.assign(s,{position:"",top:"",left:"",right:""}),window.scrollTo(c,d))}}let cleanup=()=>{};const FloatingOverlay=reactExports.forwardRef(function(e,s){const{lockScroll:a=!1,...l}=e;return index$2(()=>{if(a)return lockCount++,lockCount===1&&(cleanup=enableScrollLock()),()=>{lockCount--,lockCount===0&&cleanup()}},[a]),jsxRuntimeExports.jsx("div",{ref:s,...l,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...l.style}})});function isButtonTarget(o){return isHTMLElement(o.target)&&o.target.tagName==="BUTTON"}function isAnchorTarget(o){return isHTMLElement(o.target)&&o.target.tagName==="A"}function isSpaceIgnored(o){return isTypeableElement(o)}function useClick(o,e){e===void 0&&(e={});const{open:s,onOpenChange:a,dataRef:l,elements:{domReference:u}}=o,{enabled:c=!0,event:d="click",toggle:h=!0,ignoreMouse:p=!1,keyboardHandlers:m=!0,stickIfOpen:g=!0}=e,y=reactExports.useRef(),A=reactExports.useRef(!1),T=reactExports.useMemo(()=>({onPointerDown(E){y.current=E.pointerType},onMouseDown(E){const v=y.current;E.button===0&&d!=="click"&&(isMouseLikePointerType(v,!0)&&p||(s&&h&&(!(l.current.openEvent&&g)||l.current.openEvent.type==="mousedown")?a(!1,E.nativeEvent,"click"):(E.preventDefault(),a(!0,E.nativeEvent,"click"))))},onClick(E){const v=y.current;if(d==="mousedown"&&y.current){y.current=void 0;return}isMouseLikePointerType(v,!0)&&p||(s&&h&&(!(l.current.openEvent&&g)||l.current.openEvent.type==="click")?a(!1,E.nativeEvent,"click"):a(!0,E.nativeEvent,"click"))},onKeyDown(E){y.current=void 0,!(E.defaultPrevented||!m||isButtonTarget(E))&&(E.key===" "&&!isSpaceIgnored(u)&&(E.preventDefault(),A.current=!0),!isAnchorTarget(E)&&E.key==="Enter"&&a(!(s&&h),E.nativeEvent,"click"))},onKeyUp(E){E.defaultPrevented||!m||isButtonTarget(E)||isSpaceIgnored(u)||E.key===" "&&A.current&&(A.current=!1,a(!(s&&h),E.nativeEvent,"click"))}}),[l,u,d,p,m,a,s,g,h]);return reactExports.useMemo(()=>c?{reference:T}:{},[c,T])}const bubbleHandlerKeys={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},captureHandlerKeys={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},normalizeProp=o=>{var e,s;return{escapeKey:typeof o=="boolean"?o:(e=o==null?void 0:o.escapeKey)!=null?e:!1,outsidePress:typeof o=="boolean"?o:(s=o==null?void 0:o.outsidePress)!=null?s:!0}};function useDismiss(o,e){e===void 0&&(e={});const{open:s,onOpenChange:a,elements:l,dataRef:u}=o,{enabled:c=!0,escapeKey:d=!0,outsidePress:h=!0,outsidePressEvent:p="pointerdown",referencePress:m=!1,referencePressEvent:g="pointerdown",ancestorScroll:y=!1,bubbles:A,capture:T}=e,E=useFloatingTree(),v=useEffectEvent(typeof h=="function"?h:()=>!1),_=typeof h=="function"?v:h,w=reactExports.useRef(!1),{escapeKey:R,outsidePress:k}=normalizeProp(A),{escapeKey:I,outsidePress:P}=normalizeProp(T),N=reactExports.useRef(!1),L=useEffectEvent(z=>{var Y;if(!s||!c||!d||z.key!=="Escape"||N.current)return;const fe=(Y=u.current.floatingContext)==null?void 0:Y.nodeId,de=E?getNodeChildren$1(E.nodesRef.current,fe):[];if(!R&&(z.stopPropagation(),de.length>0)){let X=!0;if(de.forEach(he=>{var ue;if((ue=he.context)!=null&&ue.open&&!he.context.dataRef.current.__escapeKeyBubbles){X=!1;return}}),!X)return}a(!1,isReactEvent(z)?z.nativeEvent:z,"escape-key")}),Q=useEffectEvent(z=>{var Y;const fe=()=>{var de;L(z),(de=getTarget$2(z))==null||de.removeEventListener("keydown",fe)};(Y=getTarget$2(z))==null||Y.addEventListener("keydown",fe)}),j=useEffectEvent(z=>{var Y;const fe=u.current.insideReactTree;u.current.insideReactTree=!1;const de=w.current;if(w.current=!1,p==="click"&&de||fe||typeof _=="function"&&!_(z))return;const X=getTarget$2(z),he="["+createAttribute("inert")+"]",ue=getDocument$1(l.floating).querySelectorAll(he);let G=isElement$1(X)?X:null;for(;G&&!isLastTraversableNode(G);){const Z=getParentNode(G);if(isLastTraversableNode(Z)||!isElement$1(Z))break;G=Z}if(ue.length&&isElement$1(X)&&!isRootElement(X)&&!contains$3(X,l.floating)&&Array.from(ue).every(Z=>!contains$3(G,Z)))return;if(isHTMLElement(X)&&J){const Z=isLastTraversableNode(X),ce=getComputedStyle$1(X),be=/auto|scroll/,Ee=Z||be.test(ce.overflowX),Se=Z||be.test(ce.overflowY),ke=Ee&&X.clientWidth>0&&X.scrollWidth>X.clientWidth,Ae=Se&&X.clientHeight>0&&X.scrollHeight>X.clientHeight,Te=ce.direction==="rtl",xe=Ae&&(Te?z.offsetX<=X.offsetWidth-X.clientWidth:z.offsetX>X.clientWidth),Pe=ke&&z.offsetY>X.clientHeight;if(xe||Pe)return}const K=(Y=u.current.floatingContext)==null?void 0:Y.nodeId,q=E&&getNodeChildren$1(E.nodesRef.current,K).some(Z=>{var ce;return isEventTargetWithin(z,(ce=Z.context)==null?void 0:ce.elements.floating)});if(isEventTargetWithin(z,l.floating)||isEventTargetWithin(z,l.domReference)||q)return;const te=E?getNodeChildren$1(E.nodesRef.current,K):[];if(te.length>0){let Z=!0;if(te.forEach(ce=>{var be;if((be=ce.context)!=null&&be.open&&!ce.context.dataRef.current.__outsidePressBubbles){Z=!1;return}}),!Z)return}a(!1,z,"outside-press")}),F=useEffectEvent(z=>{var Y;const fe=()=>{var de;j(z),(de=getTarget$2(z))==null||de.removeEventListener(p,fe)};(Y=getTarget$2(z))==null||Y.addEventListener(p,fe)});reactExports.useEffect(()=>{if(!s||!c)return;u.current.__escapeKeyBubbles=R,u.current.__outsidePressBubbles=k;let z=-1;function Y(ue){a(!1,ue,"ancestor-scroll")}function fe(){window.clearTimeout(z),N.current=!0}function de(){z=window.setTimeout(()=>{N.current=!1},isWebKit()?5:0)}const X=getDocument$1(l.floating);d&&(X.addEventListener("keydown",I?Q:L,I),X.addEventListener("compositionstart",fe),X.addEventListener("compositionend",de)),_&&X.addEventListener(p,P?F:j,P);let he=[];return y&&(isElement$1(l.domReference)&&(he=getOverflowAncestors(l.domReference)),isElement$1(l.floating)&&(he=he.concat(getOverflowAncestors(l.floating))),!isElement$1(l.reference)&&l.reference&&l.reference.contextElement&&(he=he.concat(getOverflowAncestors(l.reference.contextElement)))),he=he.filter(ue=>{var G;return ue!==((G=X.defaultView)==null?void 0:G.visualViewport)}),he.forEach(ue=>{ue.addEventListener("scroll",Y,{passive:!0})}),()=>{d&&(X.removeEventListener("keydown",I?Q:L,I),X.removeEventListener("compositionstart",fe),X.removeEventListener("compositionend",de)),_&&X.removeEventListener(p,P?F:j,P),he.forEach(ue=>{ue.removeEventListener("scroll",Y)}),window.clearTimeout(z)}},[u,l,d,_,p,s,a,y,c,R,k,L,I,Q,j,P,F]),reactExports.useEffect(()=>{u.current.insideReactTree=!1},[u,_,p]);const V=reactExports.useMemo(()=>({onKeyDown:L,...m&&{[bubbleHandlerKeys[g]]:z=>{a(!1,z.nativeEvent,"reference-press")},...g!=="click"&&{onClick(z){a(!1,z.nativeEvent,"reference-press")}}}}),[L,a,m,g]),J=reactExports.useMemo(()=>({onKeyDown:L,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[captureHandlerKeys[p]]:()=>{u.current.insideReactTree=!0}}),[L,p,u]);return reactExports.useMemo(()=>c?{reference:V,floating:J}:{},[c,V,J])}function useFloatingRootContext(o){const{open:e=!1,onOpenChange:s,elements:a}=o,l=useId(),u=reactExports.useRef({}),[c]=reactExports.useState(()=>createEventEmitter()),d=useFloatingParentNodeId()!=null,[h,p]=reactExports.useState(a.reference),m=useEffectEvent((A,T,E)=>{u.current.openEvent=A?T:void 0,c.emit("openchange",{open:A,event:T,reason:E,nested:d}),s==null||s(A,T,E)}),g=reactExports.useMemo(()=>({setPositionReference:p}),[]),y=reactExports.useMemo(()=>({reference:h||a.reference||null,floating:a.floating||null,domReference:a.reference}),[h,a.reference,a.floating]);return reactExports.useMemo(()=>({dataRef:u,open:e,onOpenChange:m,elements:y,events:c,floatingId:l,refs:g}),[e,m,y,c,l,g])}function useFloating(o){o===void 0&&(o={});const{nodeId:e}=o,s=useFloatingRootContext({...o,elements:{reference:null,floating:null,...o.elements}}),a=o.rootContext||s,l=a.elements,[u,c]=reactExports.useState(null),[d,h]=reactExports.useState(null),m=(l==null?void 0:l.domReference)||u,g=reactExports.useRef(null),y=useFloatingTree();index$2(()=>{m&&(g.current=m)},[m]);const A=useFloating$1({...o,elements:{...l,...d&&{reference:d}}}),T=reactExports.useCallback(R=>{const k=isElement$1(R)?{getBoundingClientRect:()=>R.getBoundingClientRect(),getClientRects:()=>R.getClientRects(),contextElement:R}:R;h(k),A.refs.setReference(k)},[A.refs]),E=reactExports.useCallback(R=>{(isElement$1(R)||R===null)&&(g.current=R,c(R)),(isElement$1(A.refs.reference.current)||A.refs.reference.current===null||R!==null&&!isElement$1(R))&&A.refs.setReference(R)},[A.refs]),v=reactExports.useMemo(()=>({...A.refs,setReference:E,setPositionReference:T,domReference:g}),[A.refs,E,T]),_=reactExports.useMemo(()=>({...A.elements,domReference:m}),[A.elements,m]),w=reactExports.useMemo(()=>({...A,...a,refs:v,elements:_,nodeId:e}),[A,v,_,e,a]);return index$2(()=>{a.dataRef.current.floatingContext=w;const R=y==null?void 0:y.nodesRef.current.find(k=>k.id===e);R&&(R.context=w)}),reactExports.useMemo(()=>({...A,context:w,refs:v,elements:_}),[A,v,_,w])}function isMacSafari(){return isMac$1()&&isSafari()}function useFocus(o,e){e===void 0&&(e={});const{open:s,onOpenChange:a,events:l,dataRef:u,elements:c}=o,{enabled:d=!0,visibleOnly:h=!0}=e,p=reactExports.useRef(!1),m=reactExports.useRef(-1),g=reactExports.useRef(!0);reactExports.useEffect(()=>{if(!d)return;const A=getWindow(c.domReference);function T(){!s&&isHTMLElement(c.domReference)&&c.domReference===activeElement(getDocument$1(c.domReference))&&(p.current=!0)}function E(){g.current=!0}function v(){g.current=!1}return A.addEventListener("blur",T),isMacSafari()&&(A.addEventListener("keydown",E,!0),A.addEventListener("pointerdown",v,!0)),()=>{A.removeEventListener("blur",T),isMacSafari()&&(A.removeEventListener("keydown",E,!0),A.removeEventListener("pointerdown",v,!0))}},[c.domReference,s,d]),reactExports.useEffect(()=>{if(!d)return;function A(T){let{reason:E}=T;(E==="reference-press"||E==="escape-key")&&(p.current=!0)}return l.on("openchange",A),()=>{l.off("openchange",A)}},[l,d]),reactExports.useEffect(()=>()=>{clearTimeoutIfSet(m)},[]);const y=reactExports.useMemo(()=>({onMouseLeave(){p.current=!1},onFocus(A){if(p.current)return;const T=getTarget$2(A.nativeEvent);if(h&&isElement$1(T)){if(isMacSafari()&&!A.relatedTarget){if(!g.current&&!isTypeableElement(T))return}else if(!matchesFocusVisible(T))return}a(!0,A.nativeEvent,"focus")},onBlur(A){p.current=!1;const T=A.relatedTarget,E=A.nativeEvent,v=isElement$1(T)&&T.hasAttribute(createAttribute("focus-guard"))&&T.getAttribute("data-type")==="outside";m.current=window.setTimeout(()=>{var _;const w=activeElement(c.domReference?c.domReference.ownerDocument:document);!T&&w===c.domReference||contains$3((_=u.current.floatingContext)==null?void 0:_.refs.floating.current,w)||contains$3(c.domReference,w)||v||a(!1,E,"focus")})}}),[u,c.domReference,a,h]);return reactExports.useMemo(()=>d?{reference:y}:{},[d,y])}function mergeProps(o,e,s){const a=new Map,l=s==="item";let u=o;if(l&&o){const{[ACTIVE_KEY]:c,[SELECTED_KEY]:d,...h}=o;u=h}return{...s==="floating"&&{tabIndex:-1,[FOCUSABLE_ATTRIBUTE]:""},...u,...e.map(c=>{const d=c?c[s]:null;return typeof d=="function"?o?d(o):null:d}).concat(o).reduce((c,d)=>(d&&Object.entries(d).forEach(h=>{let[p,m]=h;if(!(l&&[ACTIVE_KEY,SELECTED_KEY].includes(p)))if(p.indexOf("on")===0){if(a.has(p)||a.set(p,[]),typeof m=="function"){var g;(g=a.get(p))==null||g.push(m),c[p]=function(){for(var y,A=arguments.length,T=new Array(A),E=0;E<A;E++)T[E]=arguments[E];return(y=a.get(p))==null?void 0:y.map(v=>v(...T)).find(v=>v!==void 0)}}}else c[p]=m}),c),{})}}function useInteractions(o){o===void 0&&(o=[]);const e=o.map(d=>d==null?void 0:d.reference),s=o.map(d=>d==null?void 0:d.floating),a=o.map(d=>d==null?void 0:d.item),l=reactExports.useCallback(d=>mergeProps(d,o,"reference"),e),u=reactExports.useCallback(d=>mergeProps(d,o,"floating"),s),c=reactExports.useCallback(d=>mergeProps(d,o,"item"),a);return reactExports.useMemo(()=>({getReferenceProps:l,getFloatingProps:u,getItemProps:c}),[l,u,c])}const componentRoleToAriaRoleMap=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function useRole(o,e){var s,a;e===void 0&&(e={});const{open:l,elements:u,floatingId:c}=o,{enabled:d=!0,role:h="dialog"}=e,p=useId(),m=((s=u.domReference)==null?void 0:s.id)||p,g=reactExports.useMemo(()=>{var w;return((w=getFloatingFocusElement(u.floating))==null?void 0:w.id)||c},[u.floating,c]),y=(a=componentRoleToAriaRoleMap.get(h))!=null?a:h,T=useFloatingParentNodeId()!=null,E=reactExports.useMemo(()=>y==="tooltip"||h==="label"?{["aria-"+(h==="label"?"labelledby":"describedby")]:l?g:void 0}:{"aria-expanded":l?"true":"false","aria-haspopup":y==="alertdialog"?"dialog":y,"aria-controls":l?g:void 0,...y==="listbox"&&{role:"combobox"},...y==="menu"&&{id:m},...y==="menu"&&T&&{role:"menuitem"},...h==="select"&&{"aria-autocomplete":"none"},...h==="combobox"&&{"aria-autocomplete":"list"}},[y,g,T,l,m,h]),v=reactExports.useMemo(()=>{const w={id:g,...y&&{role:y}};return y==="tooltip"||h==="label"?w:{...w,...y==="menu"&&{"aria-labelledby":m}}},[y,g,m,h]),_=reactExports.useCallback(w=>{let{active:R,selected:k}=w;const I={role:"option",...R&&{id:g+"-fui-option"}};switch(h){case"select":case"combobox":return{...I,"aria-selected":k}}return{}},[g,h]);return reactExports.useMemo(()=>d?{reference:E,floating:v,item:_}:{},[d,E,v,_])}function useDelayUnmount(o,e){const[s,a]=reactExports.useState(o);return o&&!s&&a(!0),reactExports.useEffect(()=>{if(!o&&s){const l=setTimeout(()=>a(!1),e);return()=>clearTimeout(l)}},[o,s,e]),s}function useTransitionStatus(o,e){e===void 0&&(e={});const{open:s,elements:{floating:a}}=o,{duration:l=250}=e,c=(typeof l=="number"?l:l.close)||0,[d,h]=reactExports.useState("unmounted"),p=useDelayUnmount(s,c);return!p&&d==="close"&&h("unmounted"),index$2(()=>{if(a){if(s){h("initial");const m=requestAnimationFrame(()=>{reactDomExports.flushSync(()=>{h("open")})});return()=>{cancelAnimationFrame(m)}}h("close")}},[s,a]),{isMounted:p,status:d}}function getNodeChildren(o,e,s){return s===void 0&&(s=!0),o.filter(l=>{var u;return l.parentId===e&&(!s||((u=l.context)==null?void 0:u.open))}).flatMap(l=>[l,...getNodeChildren(o,l.id,s)])}function isPointInPolygon(o,e){const[s,a]=o;let l=!1;const u=e.length;for(let c=0,d=u-1;c<u;d=c++){const[h,p]=e[c]||[0,0],[m,g]=e[d]||[0,0];p>=a!=g>=a&&s<=(m-h)*(a-p)/(g-p)+h&&(l=!l)}return l}function isInside(o,e){return o[0]>=e.x&&o[0]<=e.x+e.width&&o[1]>=e.y&&o[1]<=e.y+e.height}function safePolygon(o){o===void 0&&(o={});const{buffer:e=.5,blockPointerEvents:s=!1,requireIntent:a=!0}=o,l={current:-1};let u=!1,c=null,d=null,h=typeof performance<"u"?performance.now():0;function p(g,y){const A=performance.now(),T=A-h;if(c===null||d===null||T===0)return c=g,d=y,h=A,null;const E=g-c,v=y-d,w=Math.sqrt(E*E+v*v)/T;return c=g,d=y,h=A,w}const m=g=>{let{x:y,y:A,placement:T,elements:E,onClose:v,nodeId:_,tree:w}=g;return function(k){function I(){clearTimeoutIfSet(l),v()}if(clearTimeoutIfSet(l),!E.domReference||!E.floating||T==null||y==null||A==null)return;const{clientX:P,clientY:N}=k,L=[P,N],Q=getTarget$1(k),j=k.type==="mouseleave",F=contains$2(E.floating,Q),V=contains$2(E.domReference,Q),J=E.domReference.getBoundingClientRect(),z=E.floating.getBoundingClientRect(),Y=T.split("-")[0],fe=y>z.right-z.width/2,de=A>z.bottom-z.height/2,X=isInside(L,J),he=z.width>J.width,ue=z.height>J.height,G=(he?J:z).left,K=(he?J:z).right,q=(ue?J:z).top,te=(ue?J:z).bottom;if(F&&(u=!0,!j))return;if(V&&(u=!1),V&&!j){u=!0;return}if(j&&isElement$1(k.relatedTarget)&&contains$2(E.floating,k.relatedTarget)||w&&getNodeChildren(w.nodesRef.current,_).length)return;if(Y==="top"&&A>=J.bottom-1||Y==="bottom"&&A<=J.top+1||Y==="left"&&y>=J.right-1||Y==="right"&&y<=J.left+1)return I();let Z=[];switch(Y){case"top":Z=[[G,J.top+1],[G,z.bottom-1],[K,z.bottom-1],[K,J.top+1]];break;case"bottom":Z=[[G,z.top+1],[G,J.bottom-1],[K,J.bottom-1],[K,z.top+1]];break;case"left":Z=[[z.right-1,te],[z.right-1,q],[J.left+1,q],[J.left+1,te]];break;case"right":Z=[[J.right-1,te],[J.right-1,q],[z.left+1,q],[z.left+1,te]];break}function ce(be){let[Ee,Se]=be;switch(Y){case"top":{const ke=[he?Ee+e/2:fe?Ee+e*4:Ee-e*4,Se+e+1],Ae=[he?Ee-e/2:fe?Ee+e*4:Ee-e*4,Se+e+1],Te=[[z.left,fe||he?z.bottom-e:z.top],[z.right,fe?he?z.bottom-e:z.top:z.bottom-e]];return[ke,Ae,...Te]}case"bottom":{const ke=[he?Ee+e/2:fe?Ee+e*4:Ee-e*4,Se-e],Ae=[he?Ee-e/2:fe?Ee+e*4:Ee-e*4,Se-e],Te=[[z.left,fe||he?z.top+e:z.bottom],[z.right,fe?he?z.top+e:z.bottom:z.top+e]];return[ke,Ae,...Te]}case"left":{const ke=[Ee+e+1,ue?Se+e/2:de?Se+e*4:Se-e*4],Ae=[Ee+e+1,ue?Se-e/2:de?Se+e*4:Se-e*4];return[...[[de||ue?z.right-e:z.left,z.top],[de?ue?z.right-e:z.left:z.right-e,z.bottom]],ke,Ae]}case"right":{const ke=[Ee-e,ue?Se+e/2:de?Se+e*4:Se-e*4],Ae=[Ee-e,ue?Se-e/2:de?Se+e*4:Se-e*4],Te=[[de||ue?z.left+e:z.right,z.top],[de?ue?z.left+e:z.right:z.left+e,z.bottom]];return[ke,Ae,...Te]}}}if(!isPointInPolygon([P,N],Z)){if(u&&!X)return I();if(!j&&a){const be=p(k.clientX,k.clientY);if(be!==null&&be<.1)return I()}isPointInPolygon([P,N],ce([y,A]))?!u&&a&&(l.current=window.setTimeout(I,40)):I()}}};return m.__options={blockPointerEvents:s},m}const AUTO_PLACEMENTS=["auto","auto-start","auto-end"],ARROW_SIZE=8,OVERFLOW_PADDING=4,TRANSITION_DURATION$1=100;function getOffsetOptions(o,e){let s=o;return e&&(typeof s=="number"?s+=ARROW_SIZE:s={...s,mainAxis:(s.mainAxis??0)+ARROW_SIZE}),{offset:s}}function isAutoPlacement(o){return!!(o&&AUTO_PLACEMENTS.includes(o))}function getPlacementOptions(o,e){let s,a;if(Array.isArray(o))s=o[0],a=flip({padding:OVERFLOW_PADDING,altBoundary:e,fallbackPlacements:o.slice(1)});else if(isAutoPlacement(o)){let l;o==="auto-start"?l="start":o==="auto-end"&&(l="end"),s=void 0,a=autoPlacement({padding:OVERFLOW_PADDING,altBoundary:e,alignment:l})}else{let l;o!=null&&o.startsWith("top")||o!=null&&o.startsWith("left")?l="start":l="end",s=o,a=flip({padding:OVERFLOW_PADDING,altBoundary:e,fallbackAxisSideDirection:l})}return{placement:s,middleware:a}}const arrowStylesMiddleware=()=>({name:"arrowStyles",fn({middlewareData:o}){return o.arrow?{data:{left:o.arrow.x,top:o.arrow.y}}:{}}}),b$1q=block$5("portal");function Portal({container:o,children:e,disablePortal:s}){const a=usePortalContainer(),{scoped:l}=useThemeContext(),u=o??a;return s?jsxRuntimeExports.jsx(reactExports.Fragment,{children:e}):u?jsxRuntimeExports.jsx(FloatingPortal,{root:u,children:l?jsxRuntimeExports.jsx(ThemeProvider,{rootClassName:b$1q("theme-wrapper"),scoped:!0,children:e}):e}):null}function getElementRef(o){return o.props.ref??o.ref}const b$1p=block$5("tooltip"),DEFAULT_OPEN_DELAY$2=1e3,DEFAULT_CLOSE_DELAY$2=0,DEFAULT_PLACEMENT$1="bottom",DEFAULT_OFFSET$1=4;function Tooltip({children:o,open:e,onOpenChange:s,strategy:a,placement:l=DEFAULT_PLACEMENT$1,offset:u=DEFAULT_OFFSET$1,disabled:c,content:d,trigger:h,role:p="tooltip",openDelay:m=DEFAULT_OPEN_DELAY$2,closeDelay:g=DEFAULT_CLOSE_DELAY$2,container:y,disablePortal:A,className:T,style:E,qa:v,..._}){const[w,R]=reactExports.useState(null),{placement:k,middleware:I}=getPlacementOptions(l,!1),[P,N]=useControlledState(e,!1,s),{refs:L,floatingStyles:Q,context:j}=useFloating({open:P,onOpenChange:N,strategy:a,placement:k,middleware:[offset$1(u),shift$2({padding:OVERFLOW_PADDING,limiter:limitShift()}),I],whileElementsMounted:autoUpdate,elements:{reference:w}}),F=useHover$1(j,{enabled:h!=="focus",delay:{open:m,close:g},move:!1}),V=useFocus(j),J=useRole(j,{role:p}),z=useDismiss(j,{outsidePress:!1,ancestorScroll:!0}),{getReferenceProps:Y,getFloatingProps:fe}=useInteractions([F,V,J,z]),de=useForkRef(R,reactExports.isValidElement(o)?getElementRef(o):void 0),X=reactExports.isValidElement(o)?Y(o.props):Y(),he=reactExports.isValidElement(o)?reactExports.cloneElement(o,{...X,ref:de}):o(X,de);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[he,P&&!c?jsxRuntimeExports.jsx(Portal,{container:y,disablePortal:A,children:jsxRuntimeExports.jsx("div",{ref:L.setFloating,style:{position:"absolute",top:0,left:0,zIndex:1e4,width:"max-content",...Q},...fe(),children:jsxRuntimeExports.jsx("div",{className:b$1p(null,T),style:E,"data-qa":v,...filterDOMProps(_,{labelable:!0}),children:d})})}):null]})}const b$1o=block$5("action-tooltip"),DEFAULT_OPEN_DELAY$1=500,DEFAULT_CLOSE_DELAY$1=0;function ActionTooltip({title:o,description:e,hotkey:s,openDelay:a=DEFAULT_OPEN_DELAY$1,closeDelay:l=DEFAULT_CLOSE_DELAY$1,className:u,...c}){const d=reactExports.useMemo(()=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:b$1o("heading"),children:[jsxRuntimeExports.jsx("div",{className:b$1o("title"),children:o}),s&&jsxRuntimeExports.jsx(Hotkey,{view:"dark",value:s,className:b$1o("hotkey")})]}),e&&jsxRuntimeExports.jsx("div",{className:b$1o("description"),children:e})]}),[o,e,s]);return jsxRuntimeExports.jsx(Tooltip,{...c,role:"label",content:d,openDelay:a,closeDelay:l,className:b$1o(null,u)})}class EventBroker{constructor(e){oe(this,"subscriptions",[]);oe(this,"componentPrefix");this.componentPrefix=e}subscribe(e){this.subscriptions.push(e)}unsubscribe(e){const s=this.subscriptions.indexOf(e);s>-1&&this.subscriptions.splice(s,1)}publish({componentId:e,...s}){this.subscriptions.forEach(a=>a({...s,componentId:this.componentPrefix?`${this.componentPrefix}${e}`:e}))}withEventPublisher(e,s){return a=>{this.publish({...a,componentId:e,qa:s})}}}const eventBroker=new EventBroker(NAMESPACE$1),b$1n=block$5("button"),ButtonIcon=({side:o,className:e,children:s})=>jsxRuntimeExports.jsx("span",{className:b$1n("icon",{side:getIconSide(o)},e),children:jsxRuntimeExports.jsx("span",{className:b$1n("icon-inner"),children:s})});ButtonIcon.displayName="Button.Icon";function getIconSide(o){let e=o;return e==="left"&&(e="start"),e==="right"&&(e="end"),e}function isButtonComponentProps(o){return o.component!==void 0}const b$1m=block$5("button"),_Button=reactExports.forwardRef(function(e,s){const{view:a="normal",size:l="m",pin:u="round-round",selected:c,disabled:d=!1,loading:h=!1,width:p,children:m,extraProps:g,qa:y,onClickCapture:A,...T}=e,v={onClickCapture:reactExports.useCallback(_=>{eventBroker.publish({componentId:"Button",eventId:"click",domEvent:_,meta:{content:_.currentTarget.textContent,view:a}}),A&&A(_)},[a,A]),className:b$1m({view:a,size:l,pin:u,selected:c,disabled:d||h,loading:h,width:p},T.className),"data-qa":y,tabIndex:T.tabIndex??(g==null?void 0:g.tabIndex)??(d?void 0:0)};return isButtonComponentProps(e)?reactExports.createElement(e.component,{role:"button",...T,...g,...v,ref:s,"aria-disabled":d??void 0},prepareChildren(m)):typeof e.href<"u"?jsxRuntimeExports.jsx("a",{...T,...g,...v,ref:s,rel:e.target==="_blank"&&!T.rel?"noopener noreferrer":T.rel,"aria-disabled":d??void 0,children:prepareChildren(m)}):jsxRuntimeExports.jsx("button",{...T,...g,...v,ref:s,type:e.type||"button",disabled:d||h,"aria-pressed":c,children:prepareChildren(m)})}),Button=Object.assign(_Button,{Icon:ButtonIcon}),isButtonIconComponent=isOfType(ButtonIcon),isSpan=isOfType("span"),buttonIconClassRe=RegExp(`^${b$1m("icon")}($|\\s+\\w)`);function prepareChildren(o){const e=reactExports.Children.toArray(o);if(e.length===1){const s=e[0];return isButtonIconComponent(s)||isSpan(s)&&buttonIconClassRe.test(s.props.className||"")?s:isIcon(s)||isSvg(s)?jsxRuntimeExports.jsx(Button.Icon,{children:s},"icon"):jsxRuntimeExports.jsx("span",{className:b$1m("text"),children:s},"text")}else{let s,a,l;const u=[];for(const c of e){const d=isIcon(c)||isSvg(c),h=isButtonIconComponent(c),p=isSpan(c)&&buttonIconClassRe.test(c.props.className||"");if(d||h||p)if(!s&&u.length===0){const m="icon-start",g="start";d?s=jsxRuntimeExports.jsx(Button.Icon,{side:g,children:c},m):h?s=reactExports.cloneElement(c,{side:g}):s=reactExports.cloneElement(c,{className:b$1m("icon",{side:getIconSide(g)},c.props.className)})}else!a&&u.length!==0&&(d?a=jsxRuntimeExports.jsx(Button.Icon,{side:"end",children:c},"icon-end"):h?a=reactExports.cloneElement(c,{side:"end"}):a=reactExports.cloneElement(c,{className:b$1m("icon",{side:getIconSide("end")},c.props.className)}));else u.push(c)}return u.length>0&&(l=jsxRuntimeExports.jsx("span",{className:b$1m("text"),children:u},"text")),[s,a,l]}}const b$1l=block$5("text"),text$7=({variant:o="body-1",ellipsis:e,ellipsisLines:s,whiteSpace:a,wordBreak:l},u)=>b$1l({variant:o,ellipsis:e,ws:a,wb:l,"ellipsis-lines":s},u),Text$3=reactExports.forwardRef(function({as:e,children:s,variant:a,className:l,ellipsis:u,color:c,whiteSpace:d,wordBreak:h,ellipsisLines:p,style:m,qa:g,...y},A){const T=e||"span",E={...m};return typeof p=="number"&&(E.WebkitLineClamp=p),jsxRuntimeExports.jsx(T,{ref:A,className:text$7({variant:a,ellipsis:u,whiteSpace:d,wordBreak:h,ellipsisLines:typeof p=="number"},c?colorText({color:c},l):l),style:E,"data-qa":g,...y,children:s})});Text$3.displayName="Text";const cnDropdownMenu=block$5("dropdown-menu"),DropdownMenuContext=reactExports.createContext({toggle(){},data:void 0});DropdownMenuContext.displayName="DropdownMenu.Context";const b$1k=block$5("menu"),MenuGroup=reactExports.forwardRef(function({label:e,children:s,style:a,className:l,qa:u},c){const d=useUniqId();return jsxRuntimeExports.jsx("li",{ref:c,className:b$1k("list-group-item"),children:jsxRuntimeExports.jsxs("div",{style:a,className:b$1k("group",l),"data-qa":u,children:[e&&jsxRuntimeExports.jsx("div",{id:d,className:b$1k("group-label"),children:e}),jsxRuntimeExports.jsx("ul",{role:"group","aria-labelledby":d,className:b$1k("group-list"),children:s})]})})}),b$1j=block$5("menu"),MenuItem=reactExports.forwardRef(function({iconStart:e,iconEnd:s,title:a,disabled:l,active:u,selected:c,href:d,target:h,rel:p,onClick:m,style:g,className:y,contentClassName:A,theme:T,extraProps:E,children:v,qa:_},w){const{onKeyDown:R}=useActionHandlers(m),k=reactExports.useCallback(Q=>{eventBroker.publish({componentId:"MenuItem",eventId:"click",domEvent:Q})},[]),I={role:"menuitem",onKeyDown:m&&!l?R:void 0},P={title:a,onClick:l?void 0:m,onClickCapture:l?void 0:k,style:g,tabIndex:l?-1:0,className:b$1j("item",{disabled:l,active:u,selected:c,theme:T,interactive:!!m||!!d},y),"data-qa":_},N=[e&&jsxRuntimeExports.jsx("div",{className:b$1j("item-icon"),children:e},"icon-start"),jsxRuntimeExports.jsx("div",{className:b$1j("item-content",A),children:v},"content"),s&&jsxRuntimeExports.jsx("div",{className:b$1j("item-icon-end"),children:s},"icon-end")];let L;return d?L=jsxRuntimeExports.jsx("a",{...I,...E,...P,href:d,target:h,rel:p,children:N}):L=jsxRuntimeExports.jsx("div",{...I,...E,...P,children:N}),jsxRuntimeExports.jsx("li",{ref:w,className:b$1j("list-item"),role:"none",children:L})}),b$1i=block$5("menu"),Menu=reactExports.forwardRef(function({size:e="m",children:s,style:a,className:l,qa:u,...c},d){return jsxRuntimeExports.jsx("ul",{...filterDOMProps(c,{labelable:!0}),ref:d,role:"menu",style:a,className:b$1i({size:e},l),"data-qa":u,children:s})});Menu.Item=MenuItem,Menu.Group=MenuGroup;function usePrevious$1(o){const e=reactExports.useRef();return reactExports.useEffect(()=>{e.current=o}),e.current}function useFloatingTransition({context:o,duration:e,onTransitionIn:s,onTransitionInComplete:a,onTransitionOut:l,onTransitionOutComplete:u}){const{isMounted:c,status:d}=useTransitionStatus(o,{duration:e}),h=usePrevious$1(d),p=(typeof e=="number"?e:e.open)??0,m=reactExports.useRef(null);return reactExports.useEffect(()=>{d==="open"&&h==="initial"&&(s==null||s(),m.current=setTimeout(()=>{a==null||a(),m.current=null},p)),d==="close"&&h==="open"&&(m.current&&(clearTimeout(m.current),m.current=null),l==null||l()),d==="unmounted"&&h==="close"&&(u==null||u())},[d,h,p,s,a,l,u]),reactExports.useEffect(()=>()=>{m.current&&(clearTimeout(m.current),m.current=null)},[]),{isMounted:c,status:d}}class LayerManager{constructor(){oe(this,"stack",[]);oe(this,"mouseDownLayerTarget");oe(this,"handleDocumentKeyDown",e=>{var s,a,l;if(e.code===KeyCode.ESCAPE){const u=this.getTopLayer();u.disableEscapeKeyDown||((s=u.onEscapeKeyDown)==null||s.call(u,e),(a=u.onClose)==null||a.call(u,e,"escapeKeyDown"))}if(e.code===KeyCode.ENTER){const u=this.getTopLayer();(l=u.onEnterKeyDown)==null||l.call(u,e)}});oe(this,"handleDocumentClick",e=>{var l,u;if(this.isToastClick(e))return;let s,a=null;if(this.mouseDownLayerTarget){if(s=this.mouseDownLayerTarget.layer,a=this.mouseDownLayerTarget.target,this.mouseDownLayerTarget=void 0,!this.stack.includes(s))return}else s=this.getTopLayer();!s.disableOutsideClick&&this.isOutsideClick(s,e,a)&&((l=s.onOutsideClick)==null||l.call(s,e),(u=s.onClose)==null||u.call(s,e,"outsideClick"))});oe(this,"handleDocumentMouseDown",e=>{const s=this.getTopLayer();s&&(this.mouseDownLayerTarget={layer:s,target:e.target})})}add(e){this.stack.push(e),this.stack.length===1&&this.addListeners(),this.notifyLayersChange()}remove(e){const s=this.stack.indexOf(e);this.stack.splice(s,1),this.stack.length===0&&this.removeListeners(),this.notifyLayersChange()}getLayersCount(){return this.stack.length}getLayers(){return this.stack.map(({type:e})=>({type:e}))}addListeners(){document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("click",this.handleDocumentClick,!0),document.addEventListener("mousedown",this.handleDocumentMouseDown,!0)}removeListeners(){document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("click",this.handleDocumentClick,!0),document.removeEventListener("mousedown",this.handleDocumentMouseDown,!0)}notifyLayersChange(){eventBroker.publish({componentId:"LayerManager",eventId:"layerschange",meta:{layersCount:this.getLayersCount(),layers:this.getLayers()}})}getTopLayer(){return this.stack[this.stack.length-1]}isOutsideClick(e,s,a=null){const l=e.contentRefs||[],{target:u}=s,c=typeof s.composedPath=="function"?s.composedPath():[];return l.length>0?!l.some(h=>{var p,m,g,y;return((m=(p=h==null?void 0:h.current)==null?void 0:p.contains)==null?void 0:m.call(p,u))||((y=(g=h==null?void 0:h.current)==null?void 0:g.contains)==null?void 0:y.call(g,a))||c.includes(h==null?void 0:h.current)}):!1}isToastClick(e){return(typeof e.composedPath=="function"?e.composedPath():[]).some(a=>{var l;return!!((l=a==null?void 0:a.dataset)!=null&&l.toast)})}}const layerManager=new LayerManager;function useLayer({open:o,disableEscapeKeyDown:e,disableOutsideClick:s,onEscapeKeyDown:a,onEnterKeyDown:l,onOutsideClick:u,onClose:c,contentRefs:d,enabled:h=!0,type:p}){const m=reactExports.useRef({disableEscapeKeyDown:e,disableOutsideClick:s,onEscapeKeyDown:a,onEnterKeyDown:l,onOutsideClick:u,onClose:c,contentRefs:d,type:p});reactExports.useEffect(()=>{Object.assign(m.current,{disableEscapeKeyDown:e,disableOutsideClick:s,onEscapeKeyDown:a,onEnterKeyDown:l,onOutsideClick:u,onClose:c,contentRefs:d,enabled:h})},[e,s,a,l,u,c,d,h]),reactExports.useEffect(()=>{if(o&&h){const g=m.current;return layerManager.add(g),()=>{layerManager.remove(g)}}},[o,h])}const b$1h=block$5("popup"),PopupArrow=reactExports.forwardRef(function({styles:e},s){return jsxRuntimeExports.jsx("div",{ref:s,className:b$1h("arrow"),style:e,children:jsxRuntimeExports.jsxs("div",{className:b$1h("arrow-content"),children:[jsxRuntimeExports.jsx("div",{className:b$1h("arrow-circle-wrapper"),children:jsxRuntimeExports.jsx("div",{className:b$1h("arrow-circle",{left:!0})})}),jsxRuntimeExports.jsx("div",{className:b$1h("arrow-circle-wrapper"),children:jsxRuntimeExports.jsx("div",{className:b$1h("arrow-circle",{right:!0})})})]})})}),close$4="Close",en$o={close:close$4},close$3="",ru$o={close:close$3},COMPONENT$3="Popup",i18n$k=addComponentKeysets({en:en$o,ru:ru$o},COMPONENT$3),b$1g=block$5("popup");function PopupComponent({keepMounted:o=!1,hasArrow:e=!1,open:s=!1,onOpenChange:a,strategy:l,placement:u,offset:c=4,anchorElement:d,anchorRef:h,floatingMiddlewares:p,floatingContext:m,floatingInteractions:g,floatingRef:y,floatingStyles:A,floatingClassName:T,modal:E=!1,initialFocus:v,returnFocus:_=!0,focusOrder:w,disableVisuallyHiddenDismiss:R=!E,onClose:k,onEscapeKeyDown:I,onOutsideClick:P,disableEscapeKeyDown:N=!1,disableOutsideClick:L=!1,disableFocusOut:Q=!1,style:j,className:F,children:V,container:J,disablePortal:z=!1,disableLayer:Y=!1,disableTransition:fe=!1,qa:de,role:X,zIndex:he=1e3,onTransitionIn:ue,onTransitionOut:G,onTransitionInComplete:K,onTransitionOutComplete:q,...te}){useLayer({open:s,type:"popup",enabled:!Y});const Z=reactExports.useRef(null),[ce,be]=reactExports.useState(null),{offset:Ee}=getOffsetOptions(c,e),{placement:Se,middleware:ke}=getPlacementOptions(u,z),{t:Ae}=i18n$k.useTranslation(),Te=reactExports.useCallback((pt,ae,H)=>{if(a==null||a(pt,ae,H),pt||!ae)return;let W;H==="escape-key"?W="escapeKeyDown":H==="outside-press"?W="outsideClick":W=H,W==="escapeKeyDown"&&I&&I(ae),W==="outsideClick"&&P&&P(ae),k==null||k(ae,W)},[a,k,I,P]),xe=useFloatingNodeId(),{refs:Pe,elements:Le,floatingStyles:Ue,placement:Be,middlewareData:Ze,context:We,update:Ge,isPositioned:Ye}=useFloating({rootContext:m,nodeId:xe,strategy:l,placement:Se,open:s,onOpenChange:Te,middleware:p??[offset$1(Ee),shift$2({padding:OVERFLOW_PADDING,limiter:limitShift({offset:4+(e?18:0)}),altBoundary:z}),ke,e&&arrow$2({element:ce,padding:4}),e&&arrowStylesMiddleware()]});reactExports.useEffect(()=>{const pt=d===void 0?h==null?void 0:h.current:d;pt!==void 0&&pt!==Pe.reference.current&&Pe.setReference(pt)},[d,h,Pe]);const Ve=useRole(We,{enabled:!!(X||E),role:X??(E?"dialog":void 0)}),He=useDismiss(We,{enabled:!L||!N,outsidePress:!L,escapeKey:!N}),{getFloatingProps:at}=useInteractions(g??[Ve,He]),{isMounted:dt,status:bt}=useFloatingTransition({context:We,duration:fe?0:TRANSITION_DURATION$1,onTransitionIn:ue,onTransitionInComplete:K,onTransitionOut:G,onTransitionOutComplete:q});reactExports.useEffect(()=>{if(dt&&Le.reference&&Le.floating)return autoUpdate(Le.reference,Le.floating,Ge)},[dt,Le,Ge]);const Ct=useForkRef(Pe.setFloating,y);let ht=v;return typeof ht>"u"&&(E?ht=Pe.floating:ht=-1),jsxRuntimeExports.jsx(FloatingNode,{id:xe,children:dt||o?jsxRuntimeExports.jsx(Portal,{container:J,disablePortal:z,children:jsxRuntimeExports.jsx(FloatingFocusManager,{context:We,disabled:!Ye,modal:E,initialFocus:ht,returnFocus:_,closeOnFocusOut:!Q,visuallyHiddenDismiss:R?!1:Ae("close"),guards:E||!z,order:w,children:jsxRuntimeExports.jsx("div",{ref:Ct,className:T,style:{position:"absolute",top:0,left:0,zIndex:he,width:"max-content",pointerEvents:dt?"auto":"none",outline:"none",...Ue,...A},"data-floating-ui-placement":Be,"data-floating-ui-status":bt,"aria-modal":E&&dt?!0:void 0,...at(),children:jsxRuntimeExports.jsxs("div",{ref:Z,className:b$1g({open:dt,"disable-transition":fe},F),style:j,"data-qa":de,...filterDOMProps(te),children:[e&&jsxRuntimeExports.jsx(PopupArrow,{ref:be,styles:Ze.arrowStyles}),V]})})})}):null})}function Popup(o){return useFloatingParentNodeId()===null?jsxRuntimeExports.jsx(FloatingTree,{children:jsxRuntimeExports.jsx(PopupComponent,{...o})}):jsxRuntimeExports.jsx(PopupComponent,{...o})}const rootMenuPath=[],DropdownMenuNavigationContext=reactExports.createContext({activeMenuPath:rootMenuPath,setActiveMenuPath:()=>{},anchorRef:{current:null}}),DropdownMenuNavigationContextProvider=({anchorRef:o,children:e,disabled:s})=>{const[a,l]=reactExports.useState(rootMenuPath);reactExports.useEffect(()=>{s&&l(rootMenuPath)},[s]);const u=reactExports.useMemo(()=>({activeMenuPath:a,setActiveMenuPath:l,anchorRef:o}),[a,o]);return jsxRuntimeExports.jsx(DropdownMenuNavigationContext.Provider,{value:u,children:e})},dropdownMenuSeparator={text:"",action:()=>{},path:[]};function isSeparator(o){return o===dropdownMenuSeparator}function shouldSkipItemNavigation(o){return o.disabled||isSeparator(o)}function stringifyNavigationPath(o){return(o==null?void 0:o.join(" "))??""}const DropdownMenuPopup=({items:o,open:e,anchorRef:s,onClose:a,size:l,menuProps:u,children:c,popupProps:d,path:h=[]})=>{const{toggle:p,data:m}=reactExports.useContext(DropdownMenuContext),{activeMenuPath:g,setActiveMenuPath:y,anchorRef:A}=reactExports.useContext(DropdownMenuNavigationContext),T=h.length>0,E=reactExports.useCallback(()=>{y(h.slice(0,h.length-1))},[y,h]),v=reactExports.useCallback(()=>{y(h)},[h,y]),_=reactExports.useCallback(()=>{E()},[E]),w=reactExports.useCallback((L,Q)=>{var j;L.items&&L.path?y(L.path):((j=L.action)==null||j.call(L,Q,m),p(!1))},[m,y,p]),R=reactExports.useCallback((L,Q)=>{switch(Q.key){case KeyCode.ESCAPE:return T&&(Q.stopPropagation(),E==null||E()),!1;case KeyCode.ENTER:case KeyCode.SPACEBAR:{const j=o[L],F=j==null?void 0:j.items;return(T||F)&&(Q.stopPropagation(),Q.preventDefault()),j&&w(j,Q),!1}}return!0},[E,w,T,o]),k=e&&stringifyNavigationPath(h)===stringifyNavigationPath(g),{activeItemIndex:I,setActiveItemIndex:P,reset:N}=useListNavigation({items:o,skip:shouldSkipItemNavigation,anchorRef:A,onAnchorKeyDown:R,disabled:!k,initialValue:T?0:-1});return reactExports.useEffect(()=>{e||N()},[e,N]),jsxRuntimeExports.jsx(Popup,{open:e,anchorRef:s,onClose:a,placement:"bottom-start",...d,children:jsxRuntimeExports.jsx("div",{onMouseEnter:v,onMouseLeave:_,className:cnDropdownMenu("popup-content"),children:c||jsxRuntimeExports.jsx(Menu,{className:cnDropdownMenu("menu"),size:l,...u,children:o.map((L,Q)=>{var z;const j=k&&I===Q,F=()=>P(Q),V=e&&!j&&g.length!==0&&stringifyNavigationPath(L.path)===stringifyNavigationPath(g.slice(0,L.path.length)),J={...L.extraProps,onClick:F,onMouseEnter:F};return jsxRuntimeExports.jsx(DropdownMenuItem,{size:l,className:cnDropdownMenu("menu-item",{separator:isSeparator(L),"active-parent":V,"with-submenu":!!((z=L.items)!=null&&z.length)},L.className),selected:j,popupProps:d,closeMenu:a,...L,extraProps:J},Q)})})})})};function isSubmenuOpen(o,e){return(o==null?void 0:o.every((s,a)=>s===(e==null?void 0:e[a])))??!1}function useSubmenu({items:o,path:e}){const{activeMenuPath:s,setActiveMenuPath:a}=reactExports.useContext(DropdownMenuNavigationContext),l=!!e&&!!(o!=null&&o.length),u=reactExports.useCallback(()=>{e&&a(e.slice(0,e.length-1))},[e,a]),c=reactExports.useCallback(()=>{e&&a(e)},[e,a]);return{hasSubmenu:l,isSubmenuOpen:isSubmenuOpen(e,s),openSubmenu:c,closeSubmenu:u}}const DropdownMenuItem=({text:o,action:e,items:s,popupProps:a,closeMenu:l,children:u,path:c,size:d,...h})=>{const{toggle:p,data:m}=reactExports.useContext(DropdownMenuContext),g=reactExports.useRef(null),y=useDirection(),{hasSubmenu:A,isSubmenuOpen:T,closeSubmenu:E,openSubmenu:v}=useSubmenu({items:s,path:c}),_=reactExports.useCallback(()=>{const P=()=>{l?l():p(!1)};A?(E(),requestAnimationFrame(P)):P()},[l,E,A,p]),w=reactExports.useCallback(P=>{var N,L;if((L=(N=h.extraProps)==null?void 0:N.onClick)==null||L.call(N,P),A){T?E():v();return}e==null||e(P,m),_()},[e,m,_,A,T,v,E,h.extraProps]),R=reactExports.useMemo(()=>({...h.extraProps,onMouseEnter:P=>{var N,L;(L=(N=h.extraProps)==null?void 0:N.onMouseEnter)==null||L.call(N,P),A&&v()},onMouseLeave:P=>{var N,L;(L=(N=h.extraProps)==null?void 0:N.onMouseLeave)==null||L.call(N,P),A&&E()}}),[h.extraProps,E,A,v]),k=reactExports.useMemo(()=>y==="rtl"?["left-start","right-start"]:["right-start","left-start"],[y]),I=reactExports.useMemo(()=>A?jsxRuntimeExports.jsx(Icon,{data:y==="rtl"?ChevronLeft:ChevronRight,size:10,className:cnDropdownMenu("sub-menu-arrow")}):h.iconEnd,[A,y,h.iconEnd]);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Menu.Item,{ref:g,...h,extraProps:R,onClick:w,iconEnd:I,children:o||u}),A&&s&&jsxRuntimeExports.jsx(DropdownMenuPopup,{popupProps:{...a,className:cnDropdownMenu("sub-menu",a==null?void 0:a.className),placement:k},size:d,items:s,path:c,open:T,anchorRef:g,onClose:_})]})};function useFormResetHandler({initialValue:o,onReset:e}){const[s,a]=reactExports.useState(null),l=reactExports.useRef(o);return reactExports.useEffect(()=>{if(!s)return;const c=()=>{e(l.current)};return s.addEventListener("reset",c),()=>{s.removeEventListener("reset",c)}},[s,e]),reactExports.useCallback(c=>{a((c==null?void 0:c.form)??null)},[])}function useCheckbox({name:o,value:e,id:s,defaultChecked:a,checked:l,indeterminate:u,onUpdate:c,onChange:d,controlRef:h,controlProps:p,onFocus:m,onBlur:g,disabled:y}){const A=reactExports.useRef(null),[T,E]=useControlledState(l,a??!1,c),v=u?!1:l,_=useFormResetHandler({initialValue:T,onReset:E}),w=useForkRef(h,A,_);useLayoutEffect(()=>{A.current&&(A.current.indeterminate=!!u)},[u]);const R=P=>{E(P.target.checked),d&&d(P)},k=reactExports.useCallback(P=>{eventBroker.publish({componentId:"Checkbox",eventId:"click",domEvent:P,meta:{checked:P.target.checked}})},[]),I={...p,name:o,value:e,id:s,onFocus:m,onBlur:g,disabled:y,type:"checkbox",onChange:R,onClickCapture:k,defaultChecked:a,checked:v,ref:w};return{checked:T,inputProps:I}}function useHover(){const[o,e]=reactExports.useState(!1),s=reactExports.useCallback(()=>{e(!0)},[]),a=reactExports.useCallback(()=>{e(!1)},[]);return[s,a,o]}function useCloseOnTimeout({onClose:o,timeout:e}){const[s,a,l]=useHover();return useTimeout(o,l?null:e),{onMouseOver:s,onMouseLeave:a}}const isFunction$1=o=>typeof o=="function";function useStateWithCallback(o,e){const[s,a]=reactExports.useState(o),l=reactExports.useCallback(u=>{isFunction$1(u)?a(c=>{const d=u(c);return e==null||e(d),d}):(e==null||e(u),a(u))},[e]);return[s,l]}function useConditionallyControlledState(o,e,s,a=o!==void 0&&e!==void 0){const l=useStateWithCallback(o||s,e);return a?[o,e]:l}var _trimmedEndIndex,hasRequired_trimmedEndIndex;function require_trimmedEndIndex(){if(hasRequired_trimmedEndIndex)return _trimmedEndIndex;hasRequired_trimmedEndIndex=1;var o=/\s/;function e(s){for(var a=s.length;a--&&o.test(s.charAt(a)););return a}return _trimmedEndIndex=e,_trimmedEndIndex}var _baseTrim,hasRequired_baseTrim;function require_baseTrim(){if(hasRequired_baseTrim)return _baseTrim;hasRequired_baseTrim=1;var o=require_trimmedEndIndex(),e=/^\s+/;function s(a){return a&&a.slice(0,o(a)+1).replace(e,"")}return _baseTrim=s,_baseTrim}var toNumber_1,hasRequiredToNumber;function requireToNumber(){if(hasRequiredToNumber)return toNumber_1;hasRequiredToNumber=1;var o=require_baseTrim(),e=requireIsObject(),s=requireIsSymbol(),a=NaN,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;function h(p){if(typeof p=="number")return p;if(s(p))return a;if(e(p)){var m=typeof p.valueOf=="function"?p.valueOf():p;p=e(m)?m+"":m}if(typeof p!="string")return p===0?p:+p;p=o(p);var g=u.test(p);return g||c.test(p)?d(p.slice(2),g?2:8):l.test(p)?a:+p}return toNumber_1=h,toNumber_1}var toFinite_1,hasRequiredToFinite;function requireToFinite(){if(hasRequiredToFinite)return toFinite_1;hasRequiredToFinite=1;var o=requireToNumber(),e=1/0,s=17976931348623157e292;function a(l){if(!l)return l===0?l:0;if(l=o(l),l===e||l===-e){var u=l<0?-1:1;return u*s}return l===l?l:0}return toFinite_1=a,toFinite_1}var toInteger_1,hasRequiredToInteger;function requireToInteger(){if(hasRequiredToInteger)return toInteger_1;hasRequiredToInteger=1;var o=requireToFinite();function e(s){var a=o(s),l=a%1;return a===a?l?a-l:a:0}return toInteger_1=e,toInteger_1}var _createRound,hasRequired_createRound;function require_createRound(){if(hasRequired_createRound)return _createRound;hasRequired_createRound=1;var o=require_root(),e=requireToInteger(),s=requireToNumber(),a=requireToString(),l=o.isFinite,u=Math.min;function c(d){var h=Math[d];return function(p,m){if(p=s(p),m=m==null?0:u(e(m),292),m&&l(p)){var g=(a(p)+"e").split("e"),y=h(g[0]+"e"+(+g[1]+m));return g=(a(y)+"e").split("e"),+(g[0]+"e"+(+g[1]-m))}return h(p)}}return _createRound=c,_createRound}var round_1,hasRequiredRound$1;function requireRound$1(){if(hasRequiredRound$1)return round_1;hasRequiredRound$1=1;var o=require_createRound(),e=o("round");return round_1=e,round_1}var roundExports=requireRound$1();const round$1=getDefaultExportFromCjs$1(roundExports);var now_1,hasRequiredNow;function requireNow(){if(hasRequiredNow)return now_1;hasRequiredNow=1;var o=require_root(),e=function(){return o.Date.now()};return now_1=e,now_1}var debounce_1,hasRequiredDebounce;function requireDebounce(){if(hasRequiredDebounce)return debounce_1;hasRequiredDebounce=1;var o=requireIsObject(),e=requireNow(),s=requireToNumber(),a="Expected a function",l=Math.max,u=Math.min;function c(d,h,p){var m,g,y,A,T,E,v=0,_=!1,w=!1,R=!0;if(typeof d!="function")throw new TypeError(a);h=s(h)||0,o(p)&&(_=!!p.leading,w="maxWait"in p,y=w?l(s(p.maxWait)||0,h):y,R="trailing"in p?!!p.trailing:R);function k(J){var z=m,Y=g;return m=g=void 0,v=J,A=d.apply(Y,z),A}function I(J){return v=J,T=setTimeout(L,h),_?k(J):A}function P(J){var z=J-E,Y=J-v,fe=h-z;return w?u(fe,y-Y):fe}function N(J){var z=J-E,Y=J-v;return E===void 0||z>=h||z<0||w&&Y>=y}function L(){var J=e();if(N(J))return Q(J);T=setTimeout(L,P(J))}function Q(J){return T=void 0,R&&m?k(J):(m=g=void 0,A)}function j(){T!==void 0&&clearTimeout(T),v=0,m=E=g=T=void 0}function F(){return T===void 0?A:Q(e())}function V(){var J=e(),z=N(J);if(m=arguments,g=this,E=J,z){if(T===void 0)return I(E);if(w)return clearTimeout(T),T=setTimeout(L,h),k(E)}return T===void 0&&(T=setTimeout(L,h)),A}return V.cancel=j,V.flush=F,V}return debounce_1=c,debounce_1}var throttle_1,hasRequiredThrottle;function requireThrottle(){if(hasRequiredThrottle)return throttle_1;hasRequiredThrottle=1;var o=requireDebounce(),e=requireIsObject(),s="Expected a function";function a(l,u,c){var d=!0,h=!0;if(typeof l!="function")throw new TypeError(s);return e(c)&&(d="leading"in c?!!c.leading:d,h="trailing"in c?!!c.trailing:h),o(l,u,{leading:d,maxWait:u,trailing:h})}return throttle_1=a,throttle_1}var throttleExports=requireThrottle();const throttle=getDefaultExportFromCjs$1(throttleExports),RESIZE_THROTTLE=16,ROUND_PRECISION=2;function useElementSize(o,e){const[s,a]=reactExports.useState({width:0,height:0});return useLayoutEffect(()=>{const l=o==null?void 0:o.current;if(!l)return;a({width:round$1(l.offsetWidth,ROUND_PRECISION),height:round$1(l.offsetHeight,ROUND_PRECISION)});const u=d=>{if(!Array.isArray(d))return;const h=d[0];if(h.borderBoxSize){const p=h.borderBoxSize[0]?h.borderBoxSize[0]:h.borderBoxSize;a({width:round$1(p.inlineSize,ROUND_PRECISION),height:round$1(p.blockSize,ROUND_PRECISION)})}else{const p=h.target;a({width:round$1(p.offsetWidth,ROUND_PRECISION),height:round$1(p.offsetHeight,ROUND_PRECISION)})}},c=new ResizeObserver(throttle(u,RESIZE_THROTTLE));return c.observe(l),()=>{c.disconnect()}},[o,e]),s}const useUpdateEffect=(o,e)=>{const s=reactExports.useRef(!0);reactExports.useEffect(()=>{if(s.current){s.current=!1;return}o()},e)};function usePopupVisibility(o,e,s){const[a,l]=useConditionallyControlledState(o,e,!1),u=reactExports.useCallback(d=>{l(h=>typeof d=="boolean"?d:!h)},[l]),c=reactExports.useCallback(()=>{l(!1)},[l]);return reactExports.useEffect(()=>{s&&a&&c()},[c,s,a]),{isPopupShown:a,togglePopup:u,closePopup:c}}function useScrollHandler(o,e,s){reactExports.useEffect(()=>{if(s)return;const a=l=>{l.target.contains(e.current)&&o(l)};return document.addEventListener("scroll",a,!0),()=>{document.removeEventListener("scroll",a,!0)}},[e,o,s])}function toItemList(o,e,s=[],a=0){const l=[];let u=!1,c=a;for(const d of o)if(Array.isArray(d)){const h=toItemList(d,e,s,c);l.length!==0&&h.length!==0&&l.push(e),l.push(...h),c+=h.length,u=!0}else{if(d.hidden)continue;u&&l.push(e);const h={...d,path:[...s,c++]};d.items&&(h.items=toItemList(d.items,e,h.path)),l.push(h),u=!1}return l}const DropdownMenu=({items:o=[],size:e="m",icon:s=jsxRuntimeExports.jsx(Icon,{data:Ellipsis}),open:a,onOpenToggle:l,hideOnScroll:u=!0,data:c,disabled:d,switcher:h,renderSwitcher:p,switcherWrapperClassName:m,defaultSwitcherProps:g,defaultSwitcherClassName:y,onSwitcherClick:A,menuProps:T,popupProps:E,children:v})=>{const _=reactExports.useRef(null),{isPopupShown:w,togglePopup:R,closePopup:k}=usePopupVisibility(a,l,d);useScrollHandler(k,_,!w||!u);const I=reactExports.useMemo(()=>({toggle:R,data:c}),[c,R]),P=reactExports.useMemo(()=>toItemList(o,dropdownMenuSeparator),[o]),N=reactExports.useCallback(j=>{d||(A==null||A(j),R())},[d,A,R]),{onKeyDown:L}=useActionHandlers(N),Q=reactExports.useMemo(()=>({onClick:N,onKeyDown:L}),[N,L]);return jsxRuntimeExports.jsxs(DropdownMenuContext.Provider,{value:I,children:[jsxRuntimeExports.jsx("div",{ref:_,className:cnDropdownMenu("switcher-wrapper",m),...p?{}:Q,children:(p==null?void 0:p(Q))||h||jsxRuntimeExports.jsx(Button,{view:"flat",size:e,...g,className:cnDropdownMenu("switcher-button",y),disabled:d,children:s})}),jsxRuntimeExports.jsx(DropdownMenuNavigationContextProvider,{anchorRef:_,disabled:!w,children:jsxRuntimeExports.jsx(DropdownMenuPopup,{items:P,open:w,size:e,menuProps:T,anchorRef:_,onClose:k,popupProps:E,children:v})})]})},DropdownMenuExport=Object.assign(DropdownMenu,{Item:DropdownMenuItem});var _arrayAggregator,hasRequired_arrayAggregator;function require_arrayAggregator(){if(hasRequired_arrayAggregator)return _arrayAggregator;hasRequired_arrayAggregator=1;function o(e,s,a,l){for(var u=-1,c=e==null?0:e.length;++u<c;){var d=e[u];s(l,d,a(d),e)}return l}return _arrayAggregator=o,_arrayAggregator}var _baseForOwn,hasRequired_baseForOwn;function require_baseForOwn(){if(hasRequired_baseForOwn)return _baseForOwn;hasRequired_baseForOwn=1;var o=require_baseFor(),e=requireKeys();function s(a,l){return a&&o(a,l,e)}return _baseForOwn=s,_baseForOwn}var _createBaseEach,hasRequired_createBaseEach;function require_createBaseEach(){if(hasRequired_createBaseEach)return _createBaseEach;hasRequired_createBaseEach=1;var o=requireIsArrayLike();function e(s,a){return function(l,u){if(l==null)return l;if(!o(l))return s(l,u);for(var c=l.length,d=a?c:-1,h=Object(l);(a?d--:++d<c)&&u(h[d],d,h)!==!1;);return l}}return _createBaseEach=e,_createBaseEach}var _baseEach,hasRequired_baseEach;function require_baseEach(){if(hasRequired_baseEach)return _baseEach;hasRequired_baseEach=1;var o=require_baseForOwn(),e=require_createBaseEach(),s=e(o);return _baseEach=s,_baseEach}var _baseAggregator,hasRequired_baseAggregator;function require_baseAggregator(){if(hasRequired_baseAggregator)return _baseAggregator;hasRequired_baseAggregator=1;var o=require_baseEach();function e(s,a,l,u){return o(s,function(c,d,h){a(u,c,l(c),h)}),u}return _baseAggregator=e,_baseAggregator}var _createAggregator,hasRequired_createAggregator;function require_createAggregator(){if(hasRequired_createAggregator)return _createAggregator;hasRequired_createAggregator=1;var o=require_arrayAggregator(),e=require_baseAggregator(),s=require_baseIteratee(),a=requireIsArray();function l(u,c){return function(d,h){var p=a(d)?o:e,m=c?c():{};return p(d,u,s(h,2),m)}}return _createAggregator=l,_createAggregator}var groupBy_1,hasRequiredGroupBy;function requireGroupBy(){if(hasRequiredGroupBy)return groupBy_1;hasRequiredGroupBy=1;var o=require_baseAssignValue(),e=require_createAggregator(),s=Object.prototype,a=s.hasOwnProperty,l=e(function(u,c,d){a.call(u,d)?u[d].push(c):o(u,d,[c])});return groupBy_1=l,groupBy_1}var groupByExports=requireGroupBy();const groupBy=getDefaultExportFromCjs$1(groupByExports),mediaByOrder={xs:0,s:1,m:2,l:3,xl:4,xxl:5,xxxl:6},isMediaActiveFactory=o=>e=>o in mediaByOrder?mediaByOrder[o]-mediaByOrder[e]>=0:!1,mediaOrder=["xs","s","m","l","xl","xxl","xxxl"],getClosestMediaPropsFactory=o=>(e={})=>{if(!o)return;let s=o;for(;s;){if(typeof e[s]<"u")return e[s];s=mediaOrder[mediaByOrder[s]-1]}},makeCssMod=o=>o in CSS_SIZE_EXCEPTION?CSS_SIZE_EXCEPTION[o]:String(o),useLayoutContext=()=>{const{activeMediaQuery:o,theme:e}=reactExports.useContext(LayoutContext),{isMediaActive:s,getClosestMediaProps:a}=reactExports.useMemo(()=>({isMediaActive:isMediaActiveFactory(o),getClosestMediaProps:getClosestMediaPropsFactory(o)}),[o]);return{theme:e,activeMediaQuery:o,isMediaActive:s,getClosestMediaProps:a}},b$1f=block$5("s"),spacing=(o,e)=>{const s=[];for(const a in o)if(Object.prototype.hasOwnProperty.call(o,a)){const l=o[a];typeof l<"u"&&s.push(b$1f(`${a}_${makeCssMod(l)}`))}return e&&s.push(e),s.join(" ")},sp=spacing,b$1e=block$5("box"),Box=reactExports.forwardRef(function({as:e,children:s,qa:a,className:l,width:u,height:c,minWidth:d,minHeight:h,maxHeight:p,maxWidth:m,position:g,style:y,spacing:A,overflow:T,...E},v){const _=e||"div",w={width:u,height:c,minWidth:d,minHeight:h,maxHeight:p,maxWidth:m,position:g,...y};return jsxRuntimeExports.jsx(_,{...E,"data-qa":a,style:w,ref:v,className:b$1e({overflow:T},A?sp(A,l):l),children:s})}),b$1d=block$5("flex"),Flex=reactExports.forwardRef(function(e,s){const{as:a,direction:l,grow:u,basis:c,children:d,style:h,alignContent:p,alignItems:m,alignSelf:g,justifyContent:y,justifyItems:A,justifySelf:T,shrink:E,wrap:v,inline:_,gap:w,gapRow:R,className:k,space:I,centerContent:P,...N}=e,L=a||"div",{getClosestMediaProps:Q,theme:{spaceBaseSize:j}}=useLayoutContext(),F=X=>typeof X=="object"&&X!==null?Q(X):X,V=F(w),J=typeof V>"u"?void 0:j*Number(V),z=F(R)||V,Y=typeof z>"u"?void 0:j*Number(z),fe=F(I),de=typeof w>"u"&&typeof R>"u"&&typeof fe<"u"?makeCssMod(fe):void 0;return jsxRuntimeExports.jsx(Box,{as:L,className:b$1d({"center-content":P,inline:_,s:de},k),ref:s,style:{flexDirection:F(l),flexGrow:u===!0?1:u,flexWrap:v===!0?"wrap":v,flexBasis:c,flexShrink:E,columnGap:J,rowGap:Y,alignContent:F(p),alignItems:F(m),alignSelf:F(g),justifyContent:F(y),justifyItems:F(A),justifySelf:F(T),...h},...N,children:I?reactExports.Children.map(d,X=>X&&jsxRuntimeExports.jsx("div",{className:b$1d("wr"),children:X})):d})}),b$1c=block$5("card"),roles={selection:"radio",action:"button",container:void 0},Card=reactExports.forwardRef(function(e,s){const{type:a="container",theme:l,view:u,size:c="m",children:d,className:h,onClick:p,disabled:m,selected:g,...y}=e,A=a==="action",T=a==="selection",E=a==="container",_=(A||T)&&!!p&&!m,w=E?"normal":void 0,R=E||T?"outlined":void 0,k=_?p:void 0,{onKeyDown:I}=useActionHandlers(p);return jsxRuntimeExports.jsx(Box,{ref:s,role:roles[a],className:b$1c({theme:l||w,view:u||R,type:a,selected:g,size:c,disabled:m,clickable:_},h),onClick:k,onKeyDown:_?I:void 0,tabIndex:_?0:void 0,"aria-checked":T?g:void 0,...y,children:d})}),b$1b=block$5("control-label"),ControlLabel=reactExports.forwardRef(({children:o,className:e,labelClassName:s,title:a,style:l,disabled:u=!1,control:c,size:d="m",qa:h},p)=>{const m=reactExports.cloneElement(c,{className:b$1b("indicator",c.props.className)});return jsxRuntimeExports.jsxs("label",{ref:p,title:a,style:l,className:b$1b({size:d,disabled:u},e),"data-qa":h,children:[m,o?jsxRuntimeExports.jsx("span",{className:b$1b("text",s),children:o}):null]})});ControlLabel.displayName="ControlLabel";function CheckboxDashIcon(o){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 17",width:"16",height:"16",fill:"currentColor",...o,children:jsxRuntimeExports.jsx("path",{d:"M4 7h9v3H4z"})})}function CheckboxTickIcon(o){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 10",width:"16",height:"16",fill:"currentColor",...o,children:jsxRuntimeExports.jsx("path",{d:"M.49 5.385l1.644-1.644 4.385 4.385L4.874 9.77.49 5.385zm4.384 1.096L10.356 1 12 2.644 6.519 8.126 4.874 6.48v.001z"})})}const b$1a=block$5("checkbox"),Checkbox$1=reactExports.forwardRef(function(e,s){const{size:a="m",indeterminate:l,disabled:u=!1,content:c,children:d,title:h,style:p,className:m,qa:g}=e,{checked:y,inputProps:A}=useCheckbox(e),T=c||d,E=jsxRuntimeExports.jsxs("span",{className:b$1a("indicator"),children:[jsxRuntimeExports.jsx("span",{className:b$1a("icon"),"aria-hidden":!0,children:l?jsxRuntimeExports.jsx(CheckboxDashIcon,{className:b$1a("icon-svg",{type:"dash"})}):jsxRuntimeExports.jsx(CheckboxTickIcon,{className:b$1a("icon-svg",{type:"tick"})})}),jsxRuntimeExports.jsx("input",{...A,className:b$1a("control")}),jsxRuntimeExports.jsx("span",{className:b$1a("outline")})]});return jsxRuntimeExports.jsx(ControlLabel,{ref:s,title:h,style:p,size:a,disabled:u,className:b$1a({size:a,disabled:u,indeterminate:l,checked:y},m),qa:g,control:E,children:T})});function ClipboardIcon({status:o,...e}){return o==="error"?jsxRuntimeExports.jsx(Icon,{data:CopyXmark,...e}):o==="success"?jsxRuntimeExports.jsx(Icon,{data:CopyCheck,...e}):jsxRuntimeExports.jsx(Icon,{data:Copy,...e})}function copyText(o){var e;if(typeof navigator<"u"&&((e=navigator.clipboard)!=null&&e.writeText))try{return navigator.clipboard.writeText(o)}catch(s){return typeof document>"u"?Promise.reject(s):copyTextFallback(o)}return typeof document<"u"?copyTextFallback(o):Promise.reject(new Error("Neither navigator.clipboard nor document is available"))}async function copyTextFallback(o){const e=document.activeElement;try{const s=document.createElement("textarea");if(s.setAttribute("aria-hidden","true"),s.style.all="unset",s.style.position="absolute",s.style.left="1000%",s.style.whiteSpace="pre",s.style.userSelect="text",s.value=o,document.body.append(s),s.select(),!document.execCommand("copy"))throw new Error('Failed to copy text with document.execCommand("copy")');document.body.removeChild(s)}finally{e&&"focus"in e&&typeof e.focus=="function"&&e.focus()}}const INITIAL_STATUS="pending";function CopyToClipboard(o){const{children:e,text:s,timeout:a,onCopy:l}=o,u=reactExports.useRef(""),[c,d]=reactExports.useState(INITIAL_STATUS),h=reactExports.useRef(),p=typeof e=="function"?e(c):e,m=reactExports.useCallback((y,A)=>{d(A?"success":"error"),window.clearTimeout(h.current),h.current=window.setTimeout(()=>d(INITIAL_STATUS),a),l==null||l(y,A)},[l,a]),g=reactExports.useCallback(y=>{const A=typeof s=="function"?s():s;u.current=A;function T(E){var v,_;A===u.current&&(m(A,E),(_=(v=p.props)==null?void 0:v.onClick)==null||_.call(v,y))}copyText(A).then(()=>{T(!0)},()=>{T(!1)})},[p.props,m,s]);if(reactExports.useEffect(()=>()=>window.clearTimeout(h.current),[]),!reactExports.isValidElement(p))throw new Error("Content must be a valid react element");return reactExports.cloneElement(p,{onClick:g})}const startCopy$1="Copy",endCopy$1="Copied",en$n={startCopy:startCopy$1,endCopy:endCopy$1},startCopy="",endCopy="",ru$n={startCopy,endCopy},COMPONENT$2="ClipboardButton",i18n$j=addComponentKeysets({en:en$n,ru:ru$n},COMPONENT$2),b$19=block$5("clipboard-button"),DEFAULT_TIMEOUT$1=1200,ButtonSizeToIconSize={xs:12,s:16,m:16,l:16,xl:20},ClipboardButtonComponent=o=>{const{t:e}=i18n$j.useTranslation(),{size:s="m",hasTooltip:a=!0,tooltipInitialText:l=e("startCopy"),tooltipSuccessText:u=e("endCopy"),status:c,view:d="flat",children:h,iconPosition:p="start",closeDelay:m,icon:g,...y}=o,A=jsxRuntimeExports.jsx(Button.Icon,{className:b$19("icon"),children:g??jsxRuntimeExports.jsx(ClipboardIcon,{size:ButtonSizeToIconSize[s],status:c})});return jsxRuntimeExports.jsx(ActionTooltip,{title:c==="success"?u:l,disabled:!a,closeDelay:m,children:jsxRuntimeExports.jsxs(Button,{view:d,size:s,"aria-label":l,...y,children:[p==="start"?A:null,h,p==="end"?A:null]})})};function ClipboardButton(o){const{text:e,timeout:s=DEFAULT_TIMEOUT$1,onCopy:a,hasTooltip:l=!0,onMouseEnter:u,onFocus:c,...d}=o,h=reactExports.useRef(),[p,m]=reactExports.useState(void 0),[g,y]=reactExports.useState(!1);reactExports.useEffect(()=>window.clearTimeout(h.current),[]);const A=reactExports.useCallback((_,w)=>{a==null||a(_,w),y(!1),m(s),window.clearTimeout(h.current),h.current=window.setTimeout(()=>{y(!0)},s)},[a,s]),T=reactExports.useCallback(()=>{g&&(y(!1),m(void 0))},[g]),E=reactExports.useCallback(_=>{u==null||u(_),T()},[u,T]),v=reactExports.useCallback(_=>{c==null||c(_),T()},[c,T]);return jsxRuntimeExports.jsx(CopyToClipboard,{text:e,timeout:s,onCopy:A,children:_=>jsxRuntimeExports.jsx(ClipboardButtonComponent,{...d,closeDelay:p,hasTooltip:l&&!g,status:_,onMouseEnter:E,onFocus:v})})}const b$18=block$5("popover"),DEFAULT_OPEN_DELAY=500,DEFAULT_CLOSE_DELAY=250;function Popover$1({children:o,open:e,onOpenChange:s,disabled:a,content:l,trigger:u,openDelay:c=DEFAULT_OPEN_DELAY,closeDelay:d=DEFAULT_CLOSE_DELAY,enableSafePolygon:h,className:p,...m}){const[g,y]=reactExports.useState(null),[A,T]=reactExports.useState(null),[E,v]=useControlledState(e,!1,s),_=useFloatingRootContext({open:E&&!a,onOpenChange:v,elements:{reference:g,floating:A}}),w=u!=="click",R=useHover$1(_,{enabled:w,delay:{open:c,close:d},move:!1,handleClose:h?safePolygon():void 0}),k=useClick(_,{ignoreMouse:w}),I=useRole(_,{role:"dialog"}),P=useDismiss(_),N=[R,k,I,P],{getReferenceProps:L}=useInteractions(N),Q=useForkRef(y,reactExports.isValidElement(o)?getElementRef(o):void 0),j=reactExports.isValidElement(o)?L(o.props):L(),F=reactExports.isValidElement(o)?reactExports.cloneElement(o,{...j,ref:Q}):o(j,Q);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[F,jsxRuntimeExports.jsx(Popup,{...m,open:_.open,floatingContext:_,floatingRef:T,floatingInteractions:N,className:b$18(null,p),children:l})]})}const ICON_SIZE_MAP={s:14,m:16,l:18,xl:20},b$17=block$5("help-mark"),HelpMark=reactExports.forwardRef(function({children:e,qa:s,className:a,iconSize:l="m",popoverProps:u,...c},d){return jsxRuntimeExports.jsx(Popover$1,{content:jsxRuntimeExports.jsx("div",{className:b$17("popover"),children:e}),hasArrow:!0,...u,children:jsxRuntimeExports.jsx("button",{...c,ref:d,type:"button",className:b$17({size:l},a),"data-qa":s,children:jsxRuntimeExports.jsx(Icon,{data:CircleQuestion,size:ICON_SIZE_MAP[l],className:b$17("icon")})})})});function formatProdErrorMessage(o){return`Minified Redux error #${o}; visit https://redux.js.org/Errors?code=${o} for the full message or use the non-minified dev environment for full errors. `}var $$observable=typeof Symbol=="function"&&Symbol.observable||"@@observable",symbol_observable_default=$$observable,randomString=()=>Math.random().toString(36).substring(7).split("").join("."),ActionTypes={INIT:`@@redux/INIT${randomString()}`,REPLACE:`@@redux/REPLACE${randomString()}`},actionTypes_default=ActionTypes;function isPlainObject$1(o){if(typeof o!="object"||o===null)return!1;let e=o;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(o)===e||Object.getPrototypeOf(o)===null}function createStore$1(o,e,s){if(typeof o!="function")throw new Error(formatProdErrorMessage(2));if(typeof e=="function"&&typeof s=="function"||typeof s=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage(0));if(typeof e=="function"&&typeof s>"u"&&(s=e,e=void 0),typeof s<"u"){if(typeof s!="function")throw new Error(formatProdErrorMessage(1));return s(createStore$1)(o,e)}let a=o,l=e,u=new Map,c=u,d=0,h=!1;function p(){c===u&&(c=new Map,u.forEach((v,_)=>{c.set(_,v)}))}function m(){if(h)throw new Error(formatProdErrorMessage(3));return l}function g(v){if(typeof v!="function")throw new Error(formatProdErrorMessage(4));if(h)throw new Error(formatProdErrorMessage(5));let _=!0;p();const w=d++;return c.set(w,v),function(){if(_){if(h)throw new Error(formatProdErrorMessage(6));_=!1,p(),c.delete(w),u=null}}}function y(v){if(!isPlainObject$1(v))throw new Error(formatProdErrorMessage(7));if(typeof v.type>"u")throw new Error(formatProdErrorMessage(8));if(typeof v.type!="string")throw new Error(formatProdErrorMessage(17));if(h)throw new Error(formatProdErrorMessage(9));try{h=!0,l=a(l,v)}finally{h=!1}return(u=c).forEach(w=>{w()}),v}function A(v){if(typeof v!="function")throw new Error(formatProdErrorMessage(10));a=v,y({type:actionTypes_default.REPLACE})}function T(){const v=g;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(formatProdErrorMessage(11));function w(){const k=_;k.next&&k.next(m())}return w(),{unsubscribe:v(w)}},[symbol_observable_default](){return this}}}return y({type:actionTypes_default.INIT}),{dispatch:y,subscribe:g,getState:m,replaceReducer:A,[symbol_observable_default]:T}}function bindActionCreator(o,e){return function(...s){return e(o.apply(this,s))}}function bindActionCreators$1(o,e){if(typeof o=="function")return bindActionCreator(o,e);if(typeof o!="object"||o===null)throw new Error(formatProdErrorMessage(16));const s={};for(const a in o){const l=o[a];typeof l=="function"&&(s[a]=bindActionCreator(l,e))}return s}function compose(...o){return o.length===0?e=>e:o.length===1?o[0]:o.reduce((e,s)=>(...a)=>e(s(...a)))}function applyMiddleware(...o){return e=>(s,a)=>{const l=e(s,a);let u=()=>{throw new Error(formatProdErrorMessage(15))};const c={getState:l.getState,dispatch:(h,...p)=>u(h,...p)},d=o.map(h=>h(c));return u=compose(...d)(l.dispatch),{...l,dispatch:u}}}var withSelector={exports:{}},useSyncExternalStoreWithSelector_production={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreWithSelector_production;function requireUseSyncExternalStoreWithSelector_production(){if(hasRequiredUseSyncExternalStoreWithSelector_production)return useSyncExternalStoreWithSelector_production;hasRequiredUseSyncExternalStoreWithSelector_production=1;var o=requireReact();function e(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var s=typeof Object.is=="function"?Object.is:e,a=o.useSyncExternalStore,l=o.useRef,u=o.useEffect,c=o.useMemo,d=o.useDebugValue;return useSyncExternalStoreWithSelector_production.useSyncExternalStoreWithSelector=function(h,p,m,g,y){var A=l(null);if(A.current===null){var T={hasValue:!1,value:null};A.current=T}else T=A.current;A=c(function(){function v(I){if(!_){if(_=!0,w=I,I=g(I),y!==void 0&&T.hasValue){var P=T.value;if(y(P,I))return R=P}return R=I}if(P=R,s(w,I))return P;var N=g(I);return y!==void 0&&y(P,N)?(w=I,P):(w=I,R=N)}var _=!1,w,R,k=m===void 0?null:m;return[function(){return v(p())},k===null?void 0:function(){return v(k())}]},[p,m,g,y]);var E=a(h,A[0],A[1]);return u(function(){T.hasValue=!0,T.value=E},[E]),d(E),E},useSyncExternalStoreWithSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireUseSyncExternalStoreWithSelector_production()),withSelector.exports}requireWithSelector();var IS_REACT_19=reactExports.version.startsWith("19"),REACT_ELEMENT_TYPE=Symbol.for(IS_REACT_19?"react.transitional.element":"react.element"),REACT_PORTAL_TYPE=Symbol.for("react.portal"),REACT_FRAGMENT_TYPE=Symbol.for("react.fragment"),REACT_STRICT_MODE_TYPE=Symbol.for("react.strict_mode"),REACT_PROFILER_TYPE=Symbol.for("react.profiler"),REACT_CONSUMER_TYPE=Symbol.for("react.consumer"),REACT_CONTEXT_TYPE=Symbol.for("react.context"),REACT_FORWARD_REF_TYPE=Symbol.for("react.forward_ref"),REACT_SUSPENSE_TYPE=Symbol.for("react.suspense"),REACT_SUSPENSE_LIST_TYPE=Symbol.for("react.suspense_list"),REACT_MEMO_TYPE=Symbol.for("react.memo"),REACT_LAZY_TYPE=Symbol.for("react.lazy"),ForwardRef=REACT_FORWARD_REF_TYPE,Memo=REACT_MEMO_TYPE;function typeOf(o){if(typeof o=="object"&&o!==null){const{$$typeof:e}=o;switch(e){case REACT_ELEMENT_TYPE:switch(o=o.type,o){case REACT_FRAGMENT_TYPE:case REACT_PROFILER_TYPE:case REACT_STRICT_MODE_TYPE:case REACT_SUSPENSE_TYPE:case REACT_SUSPENSE_LIST_TYPE:return o;default:switch(o=o&&o.$$typeof,o){case REACT_CONTEXT_TYPE:case REACT_FORWARD_REF_TYPE:case REACT_LAZY_TYPE:case REACT_MEMO_TYPE:return o;case REACT_CONSUMER_TYPE:return o;default:return e}}case REACT_PORTAL_TYPE:return e}}}function isMemo(o){return typeOf(o)===REACT_MEMO_TYPE}function pureFinalPropsSelectorFactory(o,e,s,a,{areStatesEqual:l,areOwnPropsEqual:u,areStatePropsEqual:c}){let d=!1,h,p,m,g,y;function A(w,R){return h=w,p=R,m=o(h,p),g=e(a,p),y=s(m,g,p),d=!0,y}function T(){return m=o(h,p),e.dependsOnOwnProps&&(g=e(a,p)),y=s(m,g,p),y}function E(){return o.dependsOnOwnProps&&(m=o(h,p)),e.dependsOnOwnProps&&(g=e(a,p)),y=s(m,g,p),y}function v(){const w=o(h,p),R=!c(w,m);return m=w,R&&(y=s(m,g,p)),y}function _(w,R){const k=!u(R,p),I=!l(w,h,R,p);return h=w,p=R,k&&I?T():k?E():I?v():y}return function(R,k){return d?_(R,k):A(R,k)}}function finalPropsSelectorFactory(o,{initMapStateToProps:e,initMapDispatchToProps:s,initMergeProps:a,...l}){const u=e(o,l),c=s(o,l),d=a(o,l);return pureFinalPropsSelectorFactory(u,c,d,o,l)}function bindActionCreators(o,e){const s={};for(const a in o){const l=o[a];typeof l=="function"&&(s[a]=(...u)=>e(l(...u)))}return s}function wrapMapToPropsConstant(o){return function(s){const a=o(s);function l(){return a}return l.dependsOnOwnProps=!1,l}}function getDependsOnOwnProps(o){return o.dependsOnOwnProps?!!o.dependsOnOwnProps:o.length!==1}function wrapMapToPropsFunc(o,e){return function(a,{displayName:l}){const u=function(d,h){return u.dependsOnOwnProps?u.mapToProps(d,h):u.mapToProps(d,void 0)};return u.dependsOnOwnProps=!0,u.mapToProps=function(d,h){u.mapToProps=o,u.dependsOnOwnProps=getDependsOnOwnProps(o);let p=u(d,h);return typeof p=="function"&&(u.mapToProps=p,u.dependsOnOwnProps=getDependsOnOwnProps(p),p=u(d,h)),p},u}}function createInvalidArgFactory(o,e){return(s,a)=>{throw new Error(`Invalid value of type ${typeof o} for ${e} argument when connecting component ${a.wrappedComponentName}.`)}}function mapDispatchToPropsFactory(o){return o&&typeof o=="object"?wrapMapToPropsConstant(e=>bindActionCreators(o,e)):o?typeof o=="function"?wrapMapToPropsFunc(o):createInvalidArgFactory(o,"mapDispatchToProps"):wrapMapToPropsConstant(e=>({dispatch:e}))}function mapStateToPropsFactory(o){return o?typeof o=="function"?wrapMapToPropsFunc(o):createInvalidArgFactory(o,"mapStateToProps"):wrapMapToPropsConstant(()=>({}))}function defaultMergeProps(o,e,s){return{...s,...o,...e}}function wrapMergePropsFunc(o){return function(s,{displayName:a,areMergedPropsEqual:l}){let u=!1,c;return function(h,p,m){const g=o(h,p,m);return u?l(g,c)||(c=g):(u=!0,c=g),c}}}function mergePropsFactory(o){return o?typeof o=="function"?wrapMergePropsFunc(o):createInvalidArgFactory(o,"mergeProps"):()=>defaultMergeProps}function defaultNoopBatch(o){o()}function createListenerCollection(){let o=null,e=null;return{clear(){o=null,e=null},notify(){defaultNoopBatch(()=>{let s=o;for(;s;)s.callback(),s=s.next})},get(){const s=[];let a=o;for(;a;)s.push(a),a=a.next;return s},subscribe(s){let a=!0;const l=e={callback:s,next:null,prev:e};return l.prev?l.prev.next=l:o=l,function(){!a||o===null||(a=!1,l.next?l.next.prev=l.prev:e=l.prev,l.prev?l.prev.next=l.next:o=l.next)}}}}var nullListeners={notify(){},get:()=>[]};function createSubscription(o,e){let s,a=nullListeners,l=0,u=!1;function c(E){m();const v=a.subscribe(E);let _=!1;return()=>{_||(_=!0,v(),g())}}function d(){a.notify()}function h(){T.onStateChange&&T.onStateChange()}function p(){return u}function m(){l++,s||(s=e?e.addNestedSub(h):o.subscribe(h),a=createListenerCollection())}function g(){l--,s&&l===0&&(s(),s=void 0,a.clear(),a=nullListeners)}function y(){u||(u=!0,m())}function A(){u&&(u=!1,g())}const T={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:h,isSubscribed:p,trySubscribe:y,tryUnsubscribe:A,getListeners:()=>a};return T}var canUseDOM=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isDOM=canUseDOM(),isRunningInReactNative=()=>typeof navigator<"u"&&navigator.product==="ReactNative",isReactNative=isRunningInReactNative(),getUseIsomorphicLayoutEffect=()=>isDOM||isReactNative?reactExports.useLayoutEffect:reactExports.useEffect,useIsomorphicLayoutEffect$2=getUseIsomorphicLayoutEffect();function is$3(o,e){return o===e?o!==0||e!==0||1/o===1/e:o!==o&&e!==e}function shallowEqual(o,e){if(is$3(o,e))return!0;if(typeof o!="object"||o===null||typeof e!="object"||e===null)return!1;const s=Object.keys(o),a=Object.keys(e);if(s.length!==a.length)return!1;for(let l=0;l<s.length;l++)if(!Object.prototype.hasOwnProperty.call(e,s[l])||!is$3(o[s[l]],e[s[l]]))return!1;return!0}var REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={[ForwardRef]:FORWARD_REF_STATICS,[Memo]:MEMO_STATICS};function getStatics(o){return isMemo(o)?MEMO_STATICS:TYPE_STATICS[o.$$typeof]||REACT_STATICS}var defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=Object.prototype;function hoistNonReactStatics(o,e){if(typeof e!="string"){if(objectPrototype){const u=getPrototypeOf(e);u&&u!==objectPrototype&&hoistNonReactStatics(o,u)}let s=getOwnPropertyNames(e);getOwnPropertySymbols&&(s=s.concat(getOwnPropertySymbols(e)));const a=getStatics(o),l=getStatics(e);for(let u=0;u<s.length;++u){const c=s[u];if(!KNOWN_STATICS[c]&&!(l&&l[c])&&!(a&&a[c])){const d=getOwnPropertyDescriptor(e,c);try{defineProperty(o,c,d)}catch{}}}}return o}var ContextKey=Symbol.for("react-redux-context"),gT=typeof globalThis<"u"?globalThis:{};function getContext$1(){if(!reactExports.createContext)return{};const o=gT[ContextKey]??(gT[ContextKey]=new Map);let e=o.get(reactExports.createContext);return e||(e=reactExports.createContext(null),o.set(reactExports.createContext,e)),e}var ReactReduxContext=getContext$1(),NO_SUBSCRIPTION_ARRAY=[null,null];function useIsomorphicLayoutEffectWithArgs(o,e,s){useIsomorphicLayoutEffect$2(()=>o(...e),s)}function captureWrapperProps(o,e,s,a,l,u){o.current=a,s.current=!1,l.current&&(l.current=null,u())}function subscribeUpdates(o,e,s,a,l,u,c,d,h,p,m){if(!o)return()=>{};let g=!1,y=null;const A=()=>{if(g||!d.current)return;const E=e.getState();let v,_;try{v=a(E,l.current)}catch(w){_=w,y=w}_||(y=null),v===u.current?c.current||p():(u.current=v,h.current=v,c.current=!0,m())};return s.onStateChange=A,s.trySubscribe(),A(),()=>{if(g=!0,s.tryUnsubscribe(),s.onStateChange=null,y)throw y}}function strictEqual(o,e){return o===e}function connect(o,e,s,{pure:a,areStatesEqual:l=strictEqual,areOwnPropsEqual:u=shallowEqual,areStatePropsEqual:c=shallowEqual,areMergedPropsEqual:d=shallowEqual,forwardRef:h=!1,context:p=ReactReduxContext}={}){const m=p,g=mapStateToPropsFactory(o),y=mapDispatchToPropsFactory(e),A=mergePropsFactory(s),T=!!o;return v=>{const _=v.displayName||v.name||"Component",w=`Connect(${_})`,R={shouldHandleStateChanges:T,displayName:w,wrappedComponentName:_,WrappedComponent:v,initMapStateToProps:g,initMapDispatchToProps:y,initMergeProps:A,areStatesEqual:l,areStatePropsEqual:c,areOwnPropsEqual:u,areMergedPropsEqual:d};function k(N){const[L,Q,j]=reactExports.useMemo(()=>{const{reactReduxForwardedRef:Te,...xe}=N;return[N.context,Te,xe]},[N]),F=reactExports.useMemo(()=>{let Te=m;return L!=null&&L.Consumer,Te},[L,m]),V=reactExports.useContext(F),J=!!N.store&&!!N.store.getState&&!!N.store.dispatch,z=!!V&&!!V.store,Y=J?N.store:V.store,fe=z?V.getServerState:Y.getState,de=reactExports.useMemo(()=>finalPropsSelectorFactory(Y.dispatch,R),[Y]),[X,he]=reactExports.useMemo(()=>{if(!T)return NO_SUBSCRIPTION_ARRAY;const Te=createSubscription(Y,J?void 0:V.subscription),xe=Te.notifyNestedSubs.bind(Te);return[Te,xe]},[Y,J,V]),ue=reactExports.useMemo(()=>J?V:{...V,subscription:X},[J,V,X]),G=reactExports.useRef(void 0),K=reactExports.useRef(j),q=reactExports.useRef(void 0),te=reactExports.useRef(!1),Z=reactExports.useRef(!1),ce=reactExports.useRef(void 0);useIsomorphicLayoutEffect$2(()=>(Z.current=!0,()=>{Z.current=!1}),[]);const be=reactExports.useMemo(()=>()=>q.current&&j===K.current?q.current:de(Y.getState(),j),[Y,j]),Ee=reactExports.useMemo(()=>xe=>X?subscribeUpdates(T,Y,X,de,K,G,te,Z,q,he,xe):()=>{},[X]);useIsomorphicLayoutEffectWithArgs(captureWrapperProps,[K,G,te,j,q,he]);let Se;try{Se=reactExports.useSyncExternalStore(Ee,be,fe?()=>de(fe(),j):be)}catch(Te){throw ce.current&&(Te.message+=`
The error may be correlated with this previous error:
${ce.current.stack}

`),Te}useIsomorphicLayoutEffect$2(()=>{ce.current=void 0,q.current=void 0,G.current=Se});const ke=reactExports.useMemo(()=>reactExports.createElement(v,{...Se,ref:Q}),[Q,v,Se]);return reactExports.useMemo(()=>T?reactExports.createElement(F.Provider,{value:ue},ke):ke,[F,ke,ue])}const P=reactExports.memo(k);if(P.WrappedComponent=v,P.displayName=k.displayName=w,h){const L=reactExports.forwardRef(function(j,F){return reactExports.createElement(P,{...j,reactReduxForwardedRef:F})});return L.displayName=w,L.WrappedComponent=v,hoistNonReactStatics(L,v)}return hoistNonReactStatics(P,v)}}var connect_default=connect;function Provider(o){const{children:e,context:s,serverState:a,store:l}=o,u=reactExports.useMemo(()=>{const h=createSubscription(l);return{store:l,subscription:h,getServerState:a?()=>a:void 0}},[l,a]),c=reactExports.useMemo(()=>l.getState(),[l]);useIsomorphicLayoutEffect$2(()=>{const{subscription:h}=u;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),c!==l.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[u,c]);const d=s||ReactReduxContext;return reactExports.createElement(d.Provider,{value:u},e)}var Provider_default=Provider,prefix$3="Invariant failed";function invariant$1(o,e){throw new Error(prefix$3)}var getRect=function(e){var s=e.top,a=e.right,l=e.bottom,u=e.left,c=a-u,d=l-s,h={top:s,right:a,bottom:l,left:u,width:c,height:d,x:u,y:s,center:{x:(a+u)/2,y:(l+s)/2}};return h},expand=function(e,s){return{top:e.top-s.top,left:e.left-s.left,bottom:e.bottom+s.bottom,right:e.right+s.right}},shrink=function(e,s){return{top:e.top+s.top,left:e.left+s.left,bottom:e.bottom-s.bottom,right:e.right-s.right}},shift$1=function(e,s){return{top:e.top+s.y,left:e.left+s.x,bottom:e.bottom+s.y,right:e.right+s.x}},noSpacing$1={top:0,right:0,bottom:0,left:0},createBox=function(e){var s=e.borderBox,a=e.margin,l=a===void 0?noSpacing$1:a,u=e.border,c=u===void 0?noSpacing$1:u,d=e.padding,h=d===void 0?noSpacing$1:d,p=getRect(expand(s,l)),m=getRect(shrink(s,c)),g=getRect(shrink(m,h));return{marginBox:p,borderBox:getRect(s),paddingBox:m,contentBox:g,margin:l,border:c,padding:h}},parse$9=function(e){var s=e.slice(0,-2),a=e.slice(-2);if(a!=="px")return 0;var l=Number(s);return isNaN(l)&&invariant$1(),l},getWindowScroll$1=function(){return{x:window.pageXOffset,y:window.pageYOffset}},offset=function(e,s){var a=e.borderBox,l=e.border,u=e.margin,c=e.padding,d=shift$1(a,s);return createBox({borderBox:d,border:l,margin:u,padding:c})},withScroll=function(e,s){return s===void 0&&(s=getWindowScroll$1()),offset(e,s)},calculateBox=function(e,s){var a={top:parse$9(s.marginTop),right:parse$9(s.marginRight),bottom:parse$9(s.marginBottom),left:parse$9(s.marginLeft)},l={top:parse$9(s.paddingTop),right:parse$9(s.paddingRight),bottom:parse$9(s.paddingBottom),left:parse$9(s.paddingLeft)},u={top:parse$9(s.borderTopWidth),right:parse$9(s.borderRightWidth),bottom:parse$9(s.borderBottomWidth),left:parse$9(s.borderLeftWidth)};return createBox({borderBox:e,margin:a,padding:l,border:u})},getBox=function(e){var s=e.getBoundingClientRect(),a=window.getComputedStyle(e);return calculateBox(s,a)},rafSchd=function(e){var s=[],a=null,l=function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];s=d,!a&&(a=requestAnimationFrame(function(){a=null,e.apply(void 0,s)}))};return l.cancel=function(){a&&(cancelAnimationFrame(a),a=null)},l};function log$1(o,e){}log$1.bind(null,"warn"),log$1.bind(null,"error");function noop$2$1(){}function getOptions(o,e){return{...o,...e}}function bindEvents(o,e,s){const a=e.map(l=>{const u=getOptions(s,l.options);return o.addEventListener(l.eventName,l.fn,u),function(){o.removeEventListener(l.eventName,l.fn,u)}});return function(){a.forEach(u=>{u()})}}const prefix$1="Invariant failed";class RbdInvariant extends Error{}RbdInvariant.prototype.toString=function(){return this.message};function invariant(o,e){throw new RbdInvariant(prefix$1)}let ErrorBoundary$1=class extends React.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=noop$2$1,this.onWindowError=s=>{const a=this.getCallbacks();a.isDragging()&&a.tryAbort(),s.error instanceof RbdInvariant&&s.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=s=>{this.callbacks=s}}componentDidMount(){this.unbind=bindEvents(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof RbdInvariant){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}};const dragHandleUsageInstructions=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,position=o=>o+1,onDragStart=o=>`
  You have lifted an item in position ${position(o.source.index)}
`,withLocation=(o,e)=>{const s=o.droppableId===e.droppableId,a=position(o.index),l=position(e.index);return s?`
      You have moved the item from position ${a}
      to position ${l}
    `:`
    You have moved the item from position ${a}
    in list ${o.droppableId}
    to list ${e.droppableId}
    in position ${l}
  `},withCombine=(o,e,s)=>e.droppableId===s.droppableId?`
      The item ${o}
      has been combined with ${s.draggableId}`:`
      The item ${o}
      in list ${e.droppableId}
      has been combined with ${s.draggableId}
      in list ${s.droppableId}
    `,onDragUpdate=o=>{const e=o.destination;if(e)return withLocation(o.source,e);const s=o.combine;return s?withCombine(o.draggableId,o.source,s):"You are over an area that cannot be dropped on"},returnedToStart=o=>`
  The item has returned to its starting position
  of ${position(o.index)}
`,onDragEnd=o=>{if(o.reason==="CANCEL")return`
      Movement cancelled.
      ${returnedToStart(o.source)}
    `;const e=o.destination,s=o.combine;return e?`
      You have dropped the item.
      ${withLocation(o.source,e)}
    `:s?`
      You have dropped the item.
      ${withCombine(o.draggableId,o.source,s)}
    `:`
    The item has been dropped while not over a drop area.
    ${returnedToStart(o.source)}
  `},preset={dragHandleUsageInstructions,onDragStart,onDragUpdate,onDragEnd};function isEqual$2(o,e){return!!(o===e||Number.isNaN(o)&&Number.isNaN(e))}function areInputsEqual$1(o,e){if(o.length!==e.length)return!1;for(let s=0;s<o.length;s++)if(!isEqual$2(o[s],e[s]))return!1;return!0}function useMemo(o,e){const s=reactExports.useState(()=>({inputs:e,result:o()}))[0],a=reactExports.useRef(!0),l=reactExports.useRef(s),c=a.current||!!(e&&l.current.inputs&&areInputsEqual$1(e,l.current.inputs))?l.current:{inputs:e,result:o()};return reactExports.useEffect(()=>{a.current=!1,l.current=c},[c]),c.result}function useCallback(o,e){return useMemo(()=>o,e)}const origin={x:0,y:0},add$2=(o,e)=>({x:o.x+e.x,y:o.y+e.y}),subtract=(o,e)=>({x:o.x-e.x,y:o.y-e.y}),isEqual$1$1=(o,e)=>o.x===e.x&&o.y===e.y,negate=o=>({x:o.x!==0?-o.x:0,y:o.y!==0?-o.y:0}),patch=(o,e,s=0)=>o==="x"?{x:e,y:s}:{x:s,y:e},distance=(o,e)=>Math.sqrt((e.x-o.x)**2+(e.y-o.y)**2),closest$1=(o,e)=>Math.min(...e.map(s=>distance(o,s))),apply$1=o=>e=>({x:o(e.x),y:o(e.y)});var executeClip=(o,e)=>{const s=getRect({top:Math.max(e.top,o.top),right:Math.min(e.right,o.right),bottom:Math.min(e.bottom,o.bottom),left:Math.max(e.left,o.left)});return s.width<=0||s.height<=0?null:s};const offsetByPosition=(o,e)=>({top:o.top+e.y,left:o.left+e.x,bottom:o.bottom+e.y,right:o.right+e.x}),getCorners=o=>[{x:o.left,y:o.top},{x:o.right,y:o.top},{x:o.left,y:o.bottom},{x:o.right,y:o.bottom}],noSpacing={top:0,right:0,bottom:0,left:0},scroll$1=(o,e)=>e?offsetByPosition(o,e.scroll.diff.displacement):o,increase=(o,e,s)=>s&&s.increasedBy?{...o,[e.end]:o[e.end]+s.increasedBy[e.line]}:o,clip$1=(o,e)=>e&&e.shouldClipSubject?executeClip(e.pageMarginBox,o):getRect(o);var getSubject=({page:o,withPlaceholder:e,axis:s,frame:a})=>{const l=scroll$1(o.marginBox,a),u=increase(l,s,e),c=clip$1(u,a);return{page:o,withPlaceholder:e,active:c}},scrollDroppable=(o,e)=>{o.frame||invariant();const s=o.frame,a=subtract(e,s.scroll.initial),l=negate(a),u={...s,scroll:{initial:s.scroll.initial,current:e,diff:{value:a,displacement:l},max:s.scroll.max}},c=getSubject({page:o.subject.page,withPlaceholder:o.subject.withPlaceholder,axis:o.axis,frame:u});return{...o,frame:u,subject:c}};function memoizeOne$1(o,e=areInputsEqual$1){let s=null;function a(...l){if(s&&s.lastThis===this&&e(l,s.lastArgs))return s.lastResult;const u=o.apply(this,l);return s={lastResult:u,lastArgs:l,lastThis:this},u}return a.clear=function(){s=null},a}const toDroppableMap=memoizeOne$1(o=>o.reduce((e,s)=>(e[s.descriptor.id]=s,e),{})),toDraggableMap=memoizeOne$1(o=>o.reduce((e,s)=>(e[s.descriptor.id]=s,e),{})),toDroppableList=memoizeOne$1(o=>Object.values(o)),toDraggableList=memoizeOne$1(o=>Object.values(o));var getDraggablesInsideDroppable=memoizeOne$1((o,e)=>toDraggableList(e).filter(a=>o===a.descriptor.droppableId).sort((a,l)=>a.descriptor.index-l.descriptor.index));function tryGetDestination(o){return o.at&&o.at.type==="REORDER"?o.at.destination:null}function tryGetCombine(o){return o.at&&o.at.type==="COMBINE"?o.at.combine:null}var removeDraggableFromList=memoizeOne$1((o,e)=>e.filter(s=>s.descriptor.id!==o.descriptor.id)),moveToNextCombine=({isMovingForward:o,draggable:e,destination:s,insideDestination:a,previousImpact:l})=>{if(!s.isCombineEnabled||!tryGetDestination(l))return null;function c(A){const T={type:"COMBINE",combine:{draggableId:A,droppableId:s.descriptor.id}};return{...l,at:T}}const d=l.displaced.all,h=d.length?d[0]:null;if(o)return h?c(h):null;const p=removeDraggableFromList(e,a);if(!h){if(!p.length)return null;const A=p[p.length-1];return c(A.descriptor.id)}const m=p.findIndex(A=>A.descriptor.id===h);m===-1&&invariant();const g=m-1;if(g<0)return null;const y=p[g];return c(y.descriptor.id)},isHomeOf=(o,e)=>o.descriptor.droppableId===e.descriptor.id;const noDisplacedBy={point:origin,value:0},emptyGroups={invisible:{},visible:{},all:[]},noImpact={displaced:emptyGroups,displacedBy:noDisplacedBy,at:null};var isWithin=(o,e)=>s=>o<=s&&s<=e,isPartiallyVisibleThroughFrame=o=>{const e=isWithin(o.top,o.bottom),s=isWithin(o.left,o.right);return a=>{if(e(a.top)&&e(a.bottom)&&s(a.left)&&s(a.right))return!0;const u=e(a.top)||e(a.bottom),c=s(a.left)||s(a.right);if(u&&c)return!0;const h=a.top<o.top&&a.bottom>o.bottom,p=a.left<o.left&&a.right>o.right;return h&&p?!0:h&&c||p&&u}},isTotallyVisibleThroughFrame=o=>{const e=isWithin(o.top,o.bottom),s=isWithin(o.left,o.right);return a=>e(a.top)&&e(a.bottom)&&s(a.left)&&s(a.right)};const vertical={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},horizontal={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var isTotallyVisibleThroughFrameOnAxis=o=>e=>{const s=isWithin(e.top,e.bottom),a=isWithin(e.left,e.right);return l=>o===vertical?s(l.top)&&s(l.bottom):a(l.left)&&a(l.right)};const getDroppableDisplaced=(o,e)=>{const s=e.frame?e.frame.scroll.diff.displacement:origin;return offsetByPosition(o,s)},isVisibleInDroppable=(o,e,s)=>e.subject.active?s(e.subject.active)(o):!1,isVisibleInViewport=(o,e,s)=>s(e)(o),isVisible$1=({target:o,destination:e,viewport:s,withDroppableDisplacement:a,isVisibleThroughFrameFn:l})=>{const u=a?getDroppableDisplaced(o,e):o;return isVisibleInDroppable(u,e,l)&&isVisibleInViewport(u,s,l)},isPartiallyVisible=o=>isVisible$1({...o,isVisibleThroughFrameFn:isPartiallyVisibleThroughFrame}),isTotallyVisible=o=>isVisible$1({...o,isVisibleThroughFrameFn:isTotallyVisibleThroughFrame}),isTotallyVisibleOnAxis=o=>isVisible$1({...o,isVisibleThroughFrameFn:isTotallyVisibleThroughFrameOnAxis(o.destination.axis)}),getShouldAnimate=(o,e,s)=>{if(typeof s=="boolean")return s;if(!e)return!0;const{invisible:a,visible:l}=e;if(a[o])return!1;const u=l[o];return u?u.shouldAnimate:!0};function getTarget(o,e){const s=o.page.marginBox,a={top:e.point.y,right:0,bottom:0,left:e.point.x};return getRect(expand(s,a))}function getDisplacementGroups({afterDragging:o,destination:e,displacedBy:s,viewport:a,forceShouldAnimate:l,last:u}){return o.reduce(function(d,h){const p=getTarget(h,s),m=h.descriptor.id;if(d.all.push(m),!isPartiallyVisible({target:p,destination:e,viewport:a,withDroppableDisplacement:!0}))return d.invisible[h.descriptor.id]=!0,d;const y=getShouldAnimate(m,u,l),A={draggableId:m,shouldAnimate:y};return d.visible[m]=A,d},{all:[],visible:{},invisible:{}})}function getIndexOfLastItem(o,e){if(!o.length)return 0;const s=o[o.length-1].descriptor.index;return e.inHomeList?s:s+1}function goAtEnd({insideDestination:o,inHomeList:e,displacedBy:s,destination:a}){const l=getIndexOfLastItem(o,{inHomeList:e});return{displaced:emptyGroups,displacedBy:s,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:l}}}}function calculateReorderImpact({draggable:o,insideDestination:e,destination:s,viewport:a,displacedBy:l,last:u,index:c,forceShouldAnimate:d}){const h=isHomeOf(o,s);if(c==null)return goAtEnd({insideDestination:e,inHomeList:h,displacedBy:l,destination:s});const p=e.find(T=>T.descriptor.index===c);if(!p)return goAtEnd({insideDestination:e,inHomeList:h,displacedBy:l,destination:s});const m=removeDraggableFromList(o,e),g=e.indexOf(p),y=m.slice(g);return{displaced:getDisplacementGroups({afterDragging:y,destination:s,displacedBy:l,last:u,viewport:a.frame,forceShouldAnimate:d}),displacedBy:l,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:c}}}}function didStartAfterCritical(o,e){return!!e.effected[o]}var fromCombine=({isMovingForward:o,destination:e,draggables:s,combine:a,afterCritical:l})=>{if(!e.isCombineEnabled)return null;const u=a.draggableId,d=s[u].descriptor.index;return didStartAfterCritical(u,l)?o?d:d-1:o?d+1:d},fromReorder=({isMovingForward:o,isInHomeList:e,insideDestination:s,location:a})=>{if(!s.length)return null;const l=a.index,u=o?l+1:l-1,c=s[0].descriptor.index,d=s[s.length-1].descriptor.index,h=e?d:d+1;return u<c||u>h?null:u},moveToNextIndex=({isMovingForward:o,isInHomeList:e,draggable:s,draggables:a,destination:l,insideDestination:u,previousImpact:c,viewport:d,afterCritical:h})=>{const p=c.at;if(p||invariant(),p.type==="REORDER"){const g=fromReorder({isMovingForward:o,isInHomeList:e,location:p.destination,insideDestination:u});return g==null?null:calculateReorderImpact({draggable:s,insideDestination:u,destination:l,viewport:d,last:c.displaced,displacedBy:c.displacedBy,index:g})}const m=fromCombine({isMovingForward:o,destination:l,displaced:c.displaced,draggables:a,combine:p.combine,afterCritical:h});return m==null?null:calculateReorderImpact({draggable:s,insideDestination:u,destination:l,viewport:d,last:c.displaced,displacedBy:c.displacedBy,index:m})},getCombinedItemDisplacement=({displaced:o,afterCritical:e,combineWith:s,displacedBy:a})=>{const l=!!(o.visible[s]||o.invisible[s]);return didStartAfterCritical(s,e)?l?origin:negate(a.point):l?a.point:origin},whenCombining=({afterCritical:o,impact:e,draggables:s})=>{const a=tryGetCombine(e);a||invariant();const l=a.draggableId,u=s[l].page.borderBox.center,c=getCombinedItemDisplacement({displaced:e.displaced,afterCritical:o,combineWith:l,displacedBy:e.displacedBy});return add$2(u,c)};const distanceFromStartToBorderBoxCenter=(o,e)=>e.margin[o.start]+e.borderBox[o.size]/2,distanceFromEndToBorderBoxCenter=(o,e)=>e.margin[o.end]+e.borderBox[o.size]/2,getCrossAxisBorderBoxCenter=(o,e,s)=>e[o.crossAxisStart]+s.margin[o.crossAxisStart]+s.borderBox[o.crossAxisSize]/2,goAfter=({axis:o,moveRelativeTo:e,isMoving:s})=>patch(o.line,e.marginBox[o.end]+distanceFromStartToBorderBoxCenter(o,s),getCrossAxisBorderBoxCenter(o,e.marginBox,s)),goBefore=({axis:o,moveRelativeTo:e,isMoving:s})=>patch(o.line,e.marginBox[o.start]-distanceFromEndToBorderBoxCenter(o,s),getCrossAxisBorderBoxCenter(o,e.marginBox,s)),goIntoStart=({axis:o,moveInto:e,isMoving:s})=>patch(o.line,e.contentBox[o.start]+distanceFromStartToBorderBoxCenter(o,s),getCrossAxisBorderBoxCenter(o,e.contentBox,s));var whenReordering=({impact:o,draggable:e,draggables:s,droppable:a,afterCritical:l})=>{const u=getDraggablesInsideDroppable(a.descriptor.id,s),c=e.page,d=a.axis;if(!u.length)return goIntoStart({axis:d,moveInto:a.page,isMoving:c});const{displaced:h,displacedBy:p}=o,m=h.all[0];if(m){const y=s[m];if(didStartAfterCritical(m,l))return goBefore({axis:d,moveRelativeTo:y.page,isMoving:c});const A=offset(y.page,p.point);return goBefore({axis:d,moveRelativeTo:A,isMoving:c})}const g=u[u.length-1];if(g.descriptor.id===e.descriptor.id)return c.borderBox.center;if(didStartAfterCritical(g.descriptor.id,l)){const y=offset(g.page,negate(l.displacedBy.point));return goAfter({axis:d,moveRelativeTo:y,isMoving:c})}return goAfter({axis:d,moveRelativeTo:g.page,isMoving:c})},withDroppableDisplacement=(o,e)=>{const s=o.frame;return s?add$2(e,s.scroll.diff.displacement):e};const getResultWithoutDroppableDisplacement=({impact:o,draggable:e,droppable:s,draggables:a,afterCritical:l})=>{const u=e.page.borderBox.center,c=o.at;return!s||!c?u:c.type==="REORDER"?whenReordering({impact:o,draggable:e,draggables:a,droppable:s,afterCritical:l}):whenCombining({impact:o,draggables:a,afterCritical:l})};var getPageBorderBoxCenterFromImpact=o=>{const e=getResultWithoutDroppableDisplacement(o),s=o.droppable;return s?withDroppableDisplacement(s,e):e},scrollViewport=(o,e)=>{const s=subtract(e,o.scroll.initial),a=negate(s);return{frame:getRect({top:e.y,bottom:e.y+o.frame.height,left:e.x,right:e.x+o.frame.width}),scroll:{initial:o.scroll.initial,max:o.scroll.max,current:e,diff:{value:s,displacement:a}}}};function getDraggables$1(o,e){return o.map(s=>e[s])}function tryGetVisible(o,e){for(let s=0;s<e.length;s++){const a=e[s].visible[o];if(a)return a}return null}var speculativelyIncrease=({impact:o,viewport:e,destination:s,draggables:a,maxScrollChange:l})=>{const u=scrollViewport(e,add$2(e.scroll.current,l)),c=s.frame?scrollDroppable(s,add$2(s.frame.scroll.current,l)):s,d=o.displaced,h=getDisplacementGroups({afterDragging:getDraggables$1(d.all,a),destination:s,displacedBy:o.displacedBy,viewport:u.frame,last:d,forceShouldAnimate:!1}),p=getDisplacementGroups({afterDragging:getDraggables$1(d.all,a),destination:c,displacedBy:o.displacedBy,viewport:e.frame,last:d,forceShouldAnimate:!1}),m={},g={},y=[d,h,p];return d.all.forEach(T=>{const E=tryGetVisible(T,y);if(E){g[T]=E;return}m[T]=!0}),{...o,displaced:{all:d.all,invisible:m,visible:g}}},withViewportDisplacement=(o,e)=>add$2(o.scroll.diff.displacement,e),getClientFromPageBorderBoxCenter=({pageBorderBoxCenter:o,draggable:e,viewport:s})=>{const a=withViewportDisplacement(s,o),l=subtract(a,e.page.borderBox.center);return add$2(e.client.borderBox.center,l)},isTotallyVisibleInNewLocation=({draggable:o,destination:e,newPageBorderBoxCenter:s,viewport:a,withDroppableDisplacement:l,onlyOnMainAxis:u=!1})=>{const c=subtract(s,o.page.borderBox.center),h={target:offsetByPosition(o.page.borderBox,c),destination:e,withDroppableDisplacement:l,viewport:a};return u?isTotallyVisibleOnAxis(h):isTotallyVisible(h)},moveToNextPlace=({isMovingForward:o,draggable:e,destination:s,draggables:a,previousImpact:l,viewport:u,previousPageBorderBoxCenter:c,previousClientSelection:d,afterCritical:h})=>{if(!s.isEnabled)return null;const p=getDraggablesInsideDroppable(s.descriptor.id,a),m=isHomeOf(e,s),g=moveToNextCombine({isMovingForward:o,draggable:e,destination:s,insideDestination:p,previousImpact:l})||moveToNextIndex({isMovingForward:o,isInHomeList:m,draggable:e,draggables:a,destination:s,insideDestination:p,previousImpact:l,viewport:u,afterCritical:h});if(!g)return null;const y=getPageBorderBoxCenterFromImpact({impact:g,draggable:e,droppable:s,draggables:a,afterCritical:h});if(isTotallyVisibleInNewLocation({draggable:e,destination:s,newPageBorderBoxCenter:y,viewport:u.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:getClientFromPageBorderBoxCenter({pageBorderBoxCenter:y,draggable:e,viewport:u}),impact:g,scrollJumpRequest:null};const T=subtract(y,c),E=speculativelyIncrease({impact:g,viewport:u,destination:s,draggables:a,maxScrollChange:T});return{clientSelection:d,impact:E,scrollJumpRequest:T}};const getKnownActive=o=>{const e=o.subject.active;return e||invariant(),e};var getBestCrossAxisDroppable=({isMovingForward:o,pageBorderBoxCenter:e,source:s,droppables:a,viewport:l})=>{const u=s.subject.active;if(!u)return null;const c=s.axis,d=isWithin(u[c.start],u[c.end]),h=toDroppableList(a).filter(m=>m!==s).filter(m=>m.isEnabled).filter(m=>!!m.subject.active).filter(m=>isPartiallyVisibleThroughFrame(l.frame)(getKnownActive(m))).filter(m=>{const g=getKnownActive(m);return o?u[c.crossAxisEnd]<g[c.crossAxisEnd]:g[c.crossAxisStart]<u[c.crossAxisStart]}).filter(m=>{const g=getKnownActive(m),y=isWithin(g[c.start],g[c.end]);return d(g[c.start])||d(g[c.end])||y(u[c.start])||y(u[c.end])}).sort((m,g)=>{const y=getKnownActive(m)[c.crossAxisStart],A=getKnownActive(g)[c.crossAxisStart];return o?y-A:A-y}).filter((m,g,y)=>getKnownActive(m)[c.crossAxisStart]===getKnownActive(y[0])[c.crossAxisStart]);if(!h.length)return null;if(h.length===1)return h[0];const p=h.filter(m=>isWithin(getKnownActive(m)[c.start],getKnownActive(m)[c.end])(e[c.line]));return p.length===1?p[0]:p.length>1?p.sort((m,g)=>getKnownActive(m)[c.start]-getKnownActive(g)[c.start])[0]:h.sort((m,g)=>{const y=closest$1(e,getCorners(getKnownActive(m))),A=closest$1(e,getCorners(getKnownActive(g)));return y!==A?y-A:getKnownActive(m)[c.start]-getKnownActive(g)[c.start]})[0]};const getCurrentPageBorderBoxCenter=(o,e)=>{const s=o.page.borderBox.center;return didStartAfterCritical(o.descriptor.id,e)?subtract(s,e.displacedBy.point):s},getCurrentPageBorderBox=(o,e)=>{const s=o.page.borderBox;return didStartAfterCritical(o.descriptor.id,e)?offsetByPosition(s,negate(e.displacedBy.point)):s};var getClosestDraggable=({pageBorderBoxCenter:o,viewport:e,destination:s,insideDestination:a,afterCritical:l})=>a.filter(c=>isTotallyVisible({target:getCurrentPageBorderBox(c,l),destination:s,viewport:e.frame,withDroppableDisplacement:!0})).sort((c,d)=>{const h=distance(o,withDroppableDisplacement(s,getCurrentPageBorderBoxCenter(c,l))),p=distance(o,withDroppableDisplacement(s,getCurrentPageBorderBoxCenter(d,l)));return h<p?-1:p<h?1:c.descriptor.index-d.descriptor.index})[0]||null,getDisplacedBy=memoizeOne$1(function(e,s){const a=s[e.line];return{value:a,point:patch(e.line,a)}});const getRequiredGrowthForPlaceholder=(o,e,s)=>{const a=o.axis;if(o.descriptor.mode==="virtual")return patch(a.line,e[a.line]);const l=o.subject.page.contentBox[a.size],h=getDraggablesInsideDroppable(o.descriptor.id,s).reduce((p,m)=>p+m.client.marginBox[a.size],0)+e[a.line]-l;return h<=0?null:patch(a.line,h)},withMaxScroll=(o,e)=>({...o,scroll:{...o.scroll,max:e}}),addPlaceholder$1=(o,e,s)=>{const a=o.frame;isHomeOf(e,o)&&invariant(),o.subject.withPlaceholder&&invariant();const l=getDisplacedBy(o.axis,e.displaceBy).point,u=getRequiredGrowthForPlaceholder(o,l,s),c={placeholderSize:l,increasedBy:u,oldFrameMaxScroll:o.frame?o.frame.scroll.max:null};if(!a){const m=getSubject({page:o.subject.page,withPlaceholder:c,axis:o.axis,frame:o.frame});return{...o,subject:m}}const d=u?add$2(a.scroll.max,u):a.scroll.max,h=withMaxScroll(a,d),p=getSubject({page:o.subject.page,withPlaceholder:c,axis:o.axis,frame:h});return{...o,subject:p,frame:h}},removePlaceholder=o=>{const e=o.subject.withPlaceholder;e||invariant();const s=o.frame;if(!s){const c=getSubject({page:o.subject.page,axis:o.axis,frame:null,withPlaceholder:null});return{...o,subject:c}}const a=e.oldFrameMaxScroll;a||invariant();const l=withMaxScroll(s,a),u=getSubject({page:o.subject.page,axis:o.axis,frame:l,withPlaceholder:null});return{...o,subject:u,frame:l}};var moveToNewDroppable=({previousPageBorderBoxCenter:o,moveRelativeTo:e,insideDestination:s,draggable:a,draggables:l,destination:u,viewport:c,afterCritical:d})=>{if(!e){if(s.length)return null;const g={displaced:emptyGroups,displacedBy:noDisplacedBy,at:{type:"REORDER",destination:{droppableId:u.descriptor.id,index:0}}},y=getPageBorderBoxCenterFromImpact({impact:g,draggable:a,droppable:u,draggables:l,afterCritical:d}),A=isHomeOf(a,u)?u:addPlaceholder$1(u,a,l);return isTotallyVisibleInNewLocation({draggable:a,destination:A,newPageBorderBoxCenter:y,viewport:c.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?g:null}const h=o[u.axis.line]<=e.page.borderBox.center[u.axis.line],p=(()=>{const g=e.descriptor.index;return e.descriptor.id===a.descriptor.id||h?g:g+1})(),m=getDisplacedBy(u.axis,a.displaceBy);return calculateReorderImpact({draggable:a,insideDestination:s,destination:u,viewport:c,displacedBy:m,last:emptyGroups,index:p})},moveCrossAxis=({isMovingForward:o,previousPageBorderBoxCenter:e,draggable:s,isOver:a,draggables:l,droppables:u,viewport:c,afterCritical:d})=>{const h=getBestCrossAxisDroppable({isMovingForward:o,pageBorderBoxCenter:e,source:a,droppables:u,viewport:c});if(!h)return null;const p=getDraggablesInsideDroppable(h.descriptor.id,l),m=getClosestDraggable({pageBorderBoxCenter:e,viewport:c,destination:h,insideDestination:p,afterCritical:d}),g=moveToNewDroppable({previousPageBorderBoxCenter:e,destination:h,draggable:s,draggables:l,moveRelativeTo:m,insideDestination:p,viewport:c,afterCritical:d});if(!g)return null;const y=getPageBorderBoxCenterFromImpact({impact:g,draggable:s,droppable:h,draggables:l,afterCritical:d});return{clientSelection:getClientFromPageBorderBoxCenter({pageBorderBoxCenter:y,draggable:s,viewport:c}),impact:g,scrollJumpRequest:null}},whatIsDraggedOver=o=>{const e=o.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const getDroppableOver$1=(o,e)=>{const s=whatIsDraggedOver(o);return s?e[s]:null};var moveInDirection=({state:o,type:e})=>{const s=getDroppableOver$1(o.impact,o.dimensions.droppables),a=!!s,l=o.dimensions.droppables[o.critical.droppable.id],u=s||l,c=u.axis.direction,d=c==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||c==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(d&&!a)return null;const h=e==="MOVE_DOWN"||e==="MOVE_RIGHT",p=o.dimensions.draggables[o.critical.draggable.id],m=o.current.page.borderBoxCenter,{draggables:g,droppables:y}=o.dimensions;return d?moveToNextPlace({isMovingForward:h,previousPageBorderBoxCenter:m,draggable:p,destination:u,draggables:g,viewport:o.viewport,previousClientSelection:o.current.client.selection,previousImpact:o.impact,afterCritical:o.afterCritical}):moveCrossAxis({isMovingForward:h,previousPageBorderBoxCenter:m,draggable:p,isOver:u,draggables:g,droppables:y,viewport:o.viewport,afterCritical:o.afterCritical})};function isMovementAllowed(o){return o.phase==="DRAGGING"||o.phase==="COLLECTING"}function isPositionInFrame(o){const e=isWithin(o.top,o.bottom),s=isWithin(o.left,o.right);return function(l){return e(l.y)&&s(l.x)}}function getHasOverlap(o,e){return o.left<e.right&&o.right>e.left&&o.top<e.bottom&&o.bottom>e.top}function getFurthestAway({pageBorderBox:o,draggable:e,candidates:s}){const a=e.page.borderBox.center,l=s.map(u=>{const c=u.axis,d=patch(u.axis.line,o.center[c.line],u.page.borderBox.center[c.crossAxisLine]);return{id:u.descriptor.id,distance:distance(a,d)}}).sort((u,c)=>c.distance-u.distance);return l[0]?l[0].id:null}function getDroppableOver({pageBorderBox:o,draggable:e,droppables:s}){const a=toDroppableList(s).filter(l=>{if(!l.isEnabled)return!1;const u=l.subject.active;if(!u||!getHasOverlap(o,u))return!1;if(isPositionInFrame(u)(o.center))return!0;const c=l.axis,d=u.center[c.crossAxisLine],h=o[c.crossAxisStart],p=o[c.crossAxisEnd],m=isWithin(u[c.crossAxisStart],u[c.crossAxisEnd]),g=m(h),y=m(p);return!g&&!y?!0:g?h<d:p>d});return a.length?a.length===1?a[0].descriptor.id:getFurthestAway({pageBorderBox:o,draggable:e,candidates:a}):null}const offsetRectByPosition=(o,e)=>getRect(offsetByPosition(o,e));var withDroppableScroll=(o,e)=>{const s=o.frame;return s?offsetRectByPosition(e,s.scroll.diff.value):e};function getIsDisplaced({displaced:o,id:e}){return!!(o.visible[e]||o.invisible[e])}function atIndex({draggable:o,closest:e,inHomeList:s}){return e?s&&e.descriptor.index>o.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var getReorderImpact=({pageBorderBoxWithDroppableScroll:o,draggable:e,destination:s,insideDestination:a,last:l,viewport:u,afterCritical:c})=>{const d=s.axis,h=getDisplacedBy(s.axis,e.displaceBy),p=h.value,m=o[d.start],g=o[d.end],A=removeDraggableFromList(e,a).find(E=>{const v=E.descriptor.id,_=E.page.borderBox.center[d.line],w=didStartAfterCritical(v,c),R=getIsDisplaced({displaced:l,id:v});return w?R?g<=_:m<_-p:R?g<=_+p:m<_})||null,T=atIndex({draggable:e,closest:A,inHomeList:isHomeOf(e,s)});return calculateReorderImpact({draggable:e,insideDestination:a,destination:s,viewport:u,last:l,displacedBy:h,index:T})};const combineThresholdDivisor=4;var getCombineImpact=({draggable:o,pageBorderBoxWithDroppableScroll:e,previousImpact:s,destination:a,insideDestination:l,afterCritical:u})=>{if(!a.isCombineEnabled)return null;const c=a.axis,d=getDisplacedBy(a.axis,o.displaceBy),h=d.value,p=e[c.start],m=e[c.end],y=removeDraggableFromList(o,l).find(T=>{const E=T.descriptor.id,v=T.page.borderBox,w=v[c.size]/combineThresholdDivisor,R=didStartAfterCritical(E,u),k=getIsDisplaced({displaced:s.displaced,id:E});return R?k?m>v[c.start]+w&&m<v[c.end]-w:p>v[c.start]-h+w&&p<v[c.end]-h-w:k?m>v[c.start]+h+w&&m<v[c.end]+h-w:p>v[c.start]+w&&p<v[c.end]-w});return y?{displacedBy:d,displaced:s.displaced,at:{type:"COMBINE",combine:{draggableId:y.descriptor.id,droppableId:a.descriptor.id}}}:null},getDragImpact=({pageOffset:o,draggable:e,draggables:s,droppables:a,previousImpact:l,viewport:u,afterCritical:c})=>{const d=offsetRectByPosition(e.page.borderBox,o),h=getDroppableOver({pageBorderBox:d,draggable:e,droppables:a});if(!h)return noImpact;const p=a[h],m=getDraggablesInsideDroppable(p.descriptor.id,s),g=withDroppableScroll(p,d);return getCombineImpact({pageBorderBoxWithDroppableScroll:g,draggable:e,previousImpact:l,destination:p,insideDestination:m,afterCritical:c})||getReorderImpact({pageBorderBoxWithDroppableScroll:g,draggable:e,destination:p,insideDestination:m,last:l.displaced,viewport:u,afterCritical:c})},patchDroppableMap=(o,e)=>({...o,[e.descriptor.id]:e});const clearUnusedPlaceholder=({previousImpact:o,impact:e,droppables:s})=>{const a=whatIsDraggedOver(o),l=whatIsDraggedOver(e);if(!a||a===l)return s;const u=s[a];if(!u.subject.withPlaceholder)return s;const c=removePlaceholder(u);return patchDroppableMap(s,c)};var recomputePlaceholders=({draggable:o,draggables:e,droppables:s,previousImpact:a,impact:l})=>{const u=clearUnusedPlaceholder({previousImpact:a,impact:l,droppables:s}),c=whatIsDraggedOver(l);if(!c)return u;const d=s[c];if(isHomeOf(o,d)||d.subject.withPlaceholder)return u;const h=addPlaceholder$1(d,o,e);return patchDroppableMap(u,h)},update$2=({state:o,clientSelection:e,dimensions:s,viewport:a,impact:l,scrollJumpRequest:u})=>{const c=a||o.viewport,d=s||o.dimensions,h=e||o.current.client.selection,p=subtract(h,o.initial.client.selection),m={offset:p,selection:h,borderBoxCenter:add$2(o.initial.client.borderBoxCenter,p)},g={selection:add$2(m.selection,c.scroll.current),borderBoxCenter:add$2(m.borderBoxCenter,c.scroll.current),offset:add$2(m.offset,c.scroll.diff.value)},y={client:m,page:g};if(o.phase==="COLLECTING")return{...o,dimensions:d,viewport:c,current:y};const A=d.draggables[o.critical.draggable.id],T=l||getDragImpact({pageOffset:g.offset,draggable:A,draggables:d.draggables,droppables:d.droppables,previousImpact:o.impact,viewport:c,afterCritical:o.afterCritical}),E=recomputePlaceholders({draggable:A,impact:T,previousImpact:o.impact,draggables:d.draggables,droppables:d.droppables});return{...o,current:y,dimensions:{draggables:d.draggables,droppables:E},impact:T,viewport:c,scrollJumpRequest:u||null,forceShouldAnimate:u?!1:null}};function getDraggables(o,e){return o.map(s=>e[s])}var recompute=({impact:o,viewport:e,draggables:s,destination:a,forceShouldAnimate:l})=>{const u=o.displaced,c=getDraggables(u.all,s),d=getDisplacementGroups({afterDragging:c,destination:a,displacedBy:o.displacedBy,viewport:e.frame,forceShouldAnimate:l,last:u});return{...o,displaced:d}},getClientBorderBoxCenter=({impact:o,draggable:e,droppable:s,draggables:a,viewport:l,afterCritical:u})=>{const c=getPageBorderBoxCenterFromImpact({impact:o,draggable:e,draggables:a,droppable:s,afterCritical:u});return getClientFromPageBorderBoxCenter({pageBorderBoxCenter:c,draggable:e,viewport:l})},refreshSnap=({state:o,dimensions:e,viewport:s})=>{o.movementMode!=="SNAP"&&invariant();const a=o.impact,l=s||o.viewport,u=e||o.dimensions,{draggables:c,droppables:d}=u,h=c[o.critical.draggable.id],p=whatIsDraggedOver(a);p||invariant();const m=d[p],g=recompute({impact:a,viewport:l,destination:m,draggables:c}),y=getClientBorderBoxCenter({impact:g,draggable:h,droppable:m,draggables:c,viewport:l,afterCritical:o.afterCritical});return update$2({impact:g,clientSelection:y,state:o,dimensions:u,viewport:l})},getHomeLocation=o=>({index:o.index,droppableId:o.droppableId}),getLiftEffect=({draggable:o,home:e,draggables:s,viewport:a})=>{const l=getDisplacedBy(e.axis,o.displaceBy),u=getDraggablesInsideDroppable(e.descriptor.id,s),c=u.indexOf(o);c===-1&&invariant();const d=u.slice(c+1),h=d.reduce((y,A)=>(y[A.descriptor.id]=!0,y),{}),p={inVirtualList:e.descriptor.mode==="virtual",displacedBy:l,effected:h};return{impact:{displaced:getDisplacementGroups({afterDragging:d,destination:e,displacedBy:l,last:null,viewport:a.frame,forceShouldAnimate:!1}),displacedBy:l,at:{type:"REORDER",destination:getHomeLocation(o.descriptor)}},afterCritical:p}},patchDimensionMap=(o,e)=>({draggables:o.draggables,droppables:patchDroppableMap(o.droppables,e)}),offsetDraggable=({draggable:o,offset:e,initialWindowScroll:s})=>{const a=offset(o.client,e),l=withScroll(a,s);return{...o,placeholder:{...o.placeholder,client:a},client:a,page:l}},getFrame=o=>{const e=o.frame;return e||invariant(),e},adjustAdditionsForScrollChanges=({additions:o,updatedDroppables:e,viewport:s})=>{const a=s.scroll.diff.value;return o.map(l=>{const u=l.descriptor.droppableId,c=e[u],h=getFrame(c).scroll.diff.value,p=add$2(a,h);return offsetDraggable({draggable:l,offset:p,initialWindowScroll:s.scroll.initial})})},publishWhileDraggingInVirtual=({state:o,published:e})=>{const s=e.modified.map(_=>{const w=o.dimensions.droppables[_.droppableId];return scrollDroppable(w,_.scroll)}),a={...o.dimensions.droppables,...toDroppableMap(s)},l=toDraggableMap(adjustAdditionsForScrollChanges({additions:e.additions,updatedDroppables:a,viewport:o.viewport})),u={...o.dimensions.draggables,...l};e.removals.forEach(_=>{delete u[_]});const c={droppables:a,draggables:u},d=whatIsDraggedOver(o.impact),h=d?c.droppables[d]:null,p=c.draggables[o.critical.draggable.id],m=c.droppables[o.critical.droppable.id],{impact:g,afterCritical:y}=getLiftEffect({draggable:p,home:m,draggables:u,viewport:o.viewport}),A=h&&h.isCombineEnabled?o.impact:g,T=getDragImpact({pageOffset:o.current.page.offset,draggable:c.draggables[o.critical.draggable.id],draggables:c.draggables,droppables:c.droppables,previousImpact:A,viewport:o.viewport,afterCritical:y}),E={...o,phase:"DRAGGING",impact:T,onLiftImpact:g,dimensions:c,afterCritical:y,forceShouldAnimate:!1};return o.phase==="COLLECTING"?E:{...E,phase:"DROP_PENDING",reason:o.reason,isWaiting:!1}};const isSnapping=o=>o.movementMode==="SNAP",postDroppableChange=(o,e,s)=>{const a=patchDimensionMap(o.dimensions,e);return!isSnapping(o)||s?update$2({state:o,dimensions:a}):refreshSnap({state:o,dimensions:a})};function removeScrollJumpRequest(o){return o.isDragging&&o.movementMode==="SNAP"?{...o,scrollJumpRequest:null}:o}const idle$2={phase:"IDLE",completed:null,shouldFlush:!1};var reducer=(o=idle$2,e)=>{if(e.type==="FLUSH")return{...idle$2,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){o.phase!=="IDLE"&&invariant();const{critical:s,clientSelection:a,viewport:l,dimensions:u,movementMode:c}=e.payload,d=u.draggables[s.draggable.id],h=u.droppables[s.droppable.id],p={selection:a,borderBoxCenter:d.client.borderBox.center,offset:origin},m={client:p,page:{selection:add$2(p.selection,l.scroll.initial),borderBoxCenter:add$2(p.selection,l.scroll.initial),offset:add$2(p.selection,l.scroll.diff.value)}},g=toDroppableList(u.droppables).every(E=>!E.isFixedOnPage),{impact:y,afterCritical:A}=getLiftEffect({draggable:d,home:h,draggables:u.draggables,viewport:l});return{phase:"DRAGGING",isDragging:!0,critical:s,movementMode:c,dimensions:u,initial:m,current:m,isWindowScrollAllowed:g,impact:y,afterCritical:A,onLiftImpact:y,viewport:l,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return o.phase==="COLLECTING"||o.phase==="DROP_PENDING"?o:(o.phase!=="DRAGGING"&&invariant(),{...o,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return o.phase==="COLLECTING"||o.phase==="DROP_PENDING"||invariant(),publishWhileDraggingInVirtual({state:o,published:e.payload});if(e.type==="MOVE"){if(o.phase==="DROP_PENDING")return o;isMovementAllowed(o)||invariant();const{client:s}=e.payload;return isEqual$1$1(s,o.current.client.selection)?o:update$2({state:o,clientSelection:s,impact:isSnapping(o)?o.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(o.phase==="DROP_PENDING"||o.phase==="COLLECTING")return removeScrollJumpRequest(o);isMovementAllowed(o)||invariant();const{id:s,newScroll:a}=e.payload,l=o.dimensions.droppables[s];if(!l)return o;const u=scrollDroppable(l,a);return postDroppableChange(o,u,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(o.phase==="DROP_PENDING")return o;isMovementAllowed(o)||invariant();const{id:s,isEnabled:a}=e.payload,l=o.dimensions.droppables[s];l||invariant(),l.isEnabled===a&&invariant();const u={...l,isEnabled:a};return postDroppableChange(o,u,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(o.phase==="DROP_PENDING")return o;isMovementAllowed(o)||invariant();const{id:s,isCombineEnabled:a}=e.payload,l=o.dimensions.droppables[s];l||invariant(),l.isCombineEnabled===a&&invariant();const u={...l,isCombineEnabled:a};return postDroppableChange(o,u,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(o.phase==="DROP_PENDING"||o.phase==="DROP_ANIMATING")return o;isMovementAllowed(o)||invariant(),o.isWindowScrollAllowed||invariant();const s=e.payload.newScroll;if(isEqual$1$1(o.viewport.scroll.current,s))return removeScrollJumpRequest(o);const a=scrollViewport(o.viewport,s);return isSnapping(o)?refreshSnap({state:o,viewport:a}):update$2({state:o,viewport:a})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!isMovementAllowed(o))return o;const s=e.payload.maxScroll;if(isEqual$1$1(s,o.viewport.scroll.max))return o;const a={...o.viewport,scroll:{...o.viewport.scroll,max:s}};return{...o,viewport:a}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(o.phase==="COLLECTING"||o.phase==="DROP_PENDING")return o;o.phase!=="DRAGGING"&&invariant();const s=moveInDirection({state:o,type:e.type});return s?update$2({state:o,impact:s.impact,clientSelection:s.clientSelection,scrollJumpRequest:s.scrollJumpRequest}):o}if(e.type==="DROP_PENDING"){const s=e.payload.reason;return o.phase!=="COLLECTING"&&invariant(),{...o,phase:"DROP_PENDING",isWaiting:!0,reason:s}}if(e.type==="DROP_ANIMATE"){const{completed:s,dropDuration:a,newHomeClientOffset:l}=e.payload;return o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||invariant(),{phase:"DROP_ANIMATING",completed:s,dropDuration:a,newHomeClientOffset:l,dimensions:o.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:s}=e.payload;return{phase:"IDLE",completed:s,shouldFlush:!1}}return o};function guard(o,e){return o instanceof Object&&"type"in o&&o.type===e}const beforeInitialCapture=o=>({type:"BEFORE_INITIAL_CAPTURE",payload:o}),lift$1$1=o=>({type:"LIFT",payload:o}),initialPublish=o=>({type:"INITIAL_PUBLISH",payload:o}),publishWhileDragging=o=>({type:"PUBLISH_WHILE_DRAGGING",payload:o}),collectionStarting=()=>({type:"COLLECTION_STARTING",payload:null}),updateDroppableScroll=o=>({type:"UPDATE_DROPPABLE_SCROLL",payload:o}),updateDroppableIsEnabled=o=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:o}),updateDroppableIsCombineEnabled=o=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:o}),move=o=>({type:"MOVE",payload:o}),moveByWindowScroll=o=>({type:"MOVE_BY_WINDOW_SCROLL",payload:o}),updateViewportMaxScroll=o=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:o}),moveUp=()=>({type:"MOVE_UP",payload:null}),moveDown=()=>({type:"MOVE_DOWN",payload:null}),moveRight=()=>({type:"MOVE_RIGHT",payload:null}),moveLeft=()=>({type:"MOVE_LEFT",payload:null}),flush=()=>({type:"FLUSH",payload:null}),animateDrop=o=>({type:"DROP_ANIMATE",payload:o}),completeDrop=o=>({type:"DROP_COMPLETE",payload:o}),drop=o=>({type:"DROP",payload:o}),dropPending=o=>({type:"DROP_PENDING",payload:o}),dropAnimationFinished=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var lift$2=o=>({getState:e,dispatch:s})=>a=>l=>{if(!guard(l,"LIFT")){a(l);return}const{id:u,clientSelection:c,movementMode:d}=l.payload,h=e();h.phase==="DROP_ANIMATING"&&s(completeDrop({completed:h.completed})),e().phase!=="IDLE"&&invariant(),s(flush()),s(beforeInitialCapture({draggableId:u,movementMode:d}));const m={draggableId:u,scrollOptions:{shouldPublishImmediately:d==="SNAP"}},{critical:g,dimensions:y,viewport:A}=o.startPublishing(m);s(initialPublish({critical:g,dimensions:y,clientSelection:c,movementMode:d,viewport:A}))},style$1=o=>()=>e=>s=>{guard(s,"INITIAL_PUBLISH")&&o.dragging(),guard(s,"DROP_ANIMATE")&&o.dropping(s.payload.completed.result.reason),(guard(s,"FLUSH")||guard(s,"DROP_COMPLETE"))&&o.resting(),e(s)};const curves={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},combine={opacity:{drop:0,combining:.7},scale:{drop:.75}},timings={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},outOfTheWayTiming=`${timings.outOfTheWay}s ${curves.outOfTheWay}`,transitions={fluid:`opacity ${outOfTheWayTiming}`,snap:`transform ${outOfTheWayTiming}, opacity ${outOfTheWayTiming}`,drop:o=>{const e=`${o}s ${curves.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${outOfTheWayTiming}`,placeholder:`height ${outOfTheWayTiming}, width ${outOfTheWayTiming}, margin ${outOfTheWayTiming}`},moveTo=o=>isEqual$1$1(o,origin)?void 0:`translate(${o.x}px, ${o.y}px)`,transforms={moveTo,drop:(o,e)=>{const s=moveTo(o);if(s)return e?`${s} scale(${combine.scale.drop})`:s}},{minDropTime,maxDropTime}=timings,dropTimeRange=maxDropTime-minDropTime,maxDropTimeAtDistance=1500,cancelDropModifier=.6;var getDropDuration=({current:o,destination:e,reason:s})=>{const a=distance(o,e);if(a<=0)return minDropTime;if(a>=maxDropTimeAtDistance)return maxDropTime;const l=a/maxDropTimeAtDistance,u=minDropTime+dropTimeRange*l,c=s==="CANCEL"?u*cancelDropModifier:u;return Number(c.toFixed(2))},getNewHomeClientOffset=({impact:o,draggable:e,dimensions:s,viewport:a,afterCritical:l})=>{const{draggables:u,droppables:c}=s,d=whatIsDraggedOver(o),h=d?c[d]:null,p=c[e.descriptor.droppableId],m=getClientBorderBoxCenter({impact:o,draggable:e,draggables:u,afterCritical:l,droppable:h||p,viewport:a});return subtract(m,e.client.borderBox.center)},getDropImpact=({draggables:o,reason:e,lastImpact:s,home:a,viewport:l,onLiftImpact:u})=>!s.at||e!=="DROP"?{impact:recompute({draggables:o,impact:u,destination:a,viewport:l,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:s.at.type==="REORDER"?{impact:s,didDropInsideDroppable:!0}:{impact:{...s,displaced:emptyGroups},didDropInsideDroppable:!0};const dropMiddleware=({getState:o,dispatch:e})=>s=>a=>{if(!guard(a,"DROP")){s(a);return}const l=o(),u=a.payload.reason;if(l.phase==="COLLECTING"){e(dropPending({reason:u}));return}if(l.phase==="IDLE")return;l.phase==="DROP_PENDING"&&l.isWaiting&&invariant(),l.phase==="DRAGGING"||l.phase==="DROP_PENDING"||invariant();const d=l.critical,h=l.dimensions,p=h.draggables[l.critical.draggable.id],{impact:m,didDropInsideDroppable:g}=getDropImpact({reason:u,lastImpact:l.impact,afterCritical:l.afterCritical,onLiftImpact:l.onLiftImpact,home:l.dimensions.droppables[l.critical.droppable.id],viewport:l.viewport,draggables:l.dimensions.draggables}),y=g?tryGetDestination(m):null,A=g?tryGetCombine(m):null,T={index:d.draggable.index,droppableId:d.droppable.id},E={draggableId:p.descriptor.id,type:p.descriptor.type,source:T,reason:u,mode:l.movementMode,destination:y,combine:A},v=getNewHomeClientOffset({impact:m,draggable:p,dimensions:h,viewport:l.viewport,afterCritical:l.afterCritical}),_={critical:l.critical,afterCritical:l.afterCritical,result:E,impact:m};if(!(!isEqual$1$1(l.current.client.offset,v)||!!E.combine)){e(completeDrop({completed:_}));return}const R=getDropDuration({current:l.current.client.offset,destination:v,reason:u});e(animateDrop({newHomeClientOffset:v,dropDuration:R,completed:_}))};var getWindowScroll=()=>({x:window.pageXOffset,y:window.pageYOffset});function getWindowScrollBinding(o){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||o()}}}function getScrollListener({onWindowScroll:o}){function e(){o(getWindowScroll())}const s=rafSchd(e),a=getWindowScrollBinding(s);let l=noop$2$1;function u(){return l!==noop$2$1}function c(){u()&&invariant(),l=bindEvents(window,[a])}function d(){u()||invariant(),s.cancel(),l(),l=noop$2$1}return{start:c,stop:d,isActive:u}}const shouldStop$1=o=>guard(o,"DROP_COMPLETE")||guard(o,"DROP_ANIMATE")||guard(o,"FLUSH"),scrollListener=o=>{const e=getScrollListener({onWindowScroll:s=>{o.dispatch(moveByWindowScroll({newScroll:s}))}});return s=>a=>{!e.isActive()&&guard(a,"INITIAL_PUBLISH")&&e.start(),e.isActive()&&shouldStop$1(a)&&e.stop(),s(a)}};var getExpiringAnnounce=o=>{let e=!1,s=!1;const a=setTimeout(()=>{s=!0}),l=u=>{e||s||(e=!0,o(u),clearTimeout(a))};return l.wasCalled=()=>e,l},getAsyncMarshal=()=>{const o=[],e=l=>{const u=o.findIndex(d=>d.timerId===l);u===-1&&invariant();const[c]=o.splice(u,1);c.callback()};return{add:l=>{const u=setTimeout(()=>e(u)),c={timerId:u,callback:l};o.push(c)},flush:()=>{if(!o.length)return;const l=[...o];o.length=0,l.forEach(u=>{clearTimeout(u.timerId),u.callback()})}}};const areLocationsEqual=(o,e)=>o==null&&e==null?!0:o==null||e==null?!1:o.droppableId===e.droppableId&&o.index===e.index,isCombineEqual=(o,e)=>o==null&&e==null?!0:o==null||e==null?!1:o.draggableId===e.draggableId&&o.droppableId===e.droppableId,isCriticalEqual=(o,e)=>{if(o===e)return!0;const s=o.draggable.id===e.draggable.id&&o.draggable.droppableId===e.draggable.droppableId&&o.draggable.type===e.draggable.type&&o.draggable.index===e.draggable.index,a=o.droppable.id===e.droppable.id&&o.droppable.type===e.droppable.type;return s&&a},withTimings=(o,e)=>{e()},getDragStart=(o,e)=>({draggableId:o.draggable.id,type:o.droppable.type,source:{droppableId:o.droppable.id,index:o.draggable.index},mode:e});function execute(o,e,s,a){if(!o){s(a(e));return}const l=getExpiringAnnounce(s);o(e,{announce:l}),l.wasCalled()||s(a(e))}var getPublisher=(o,e)=>{const s=getAsyncMarshal();let a=null;const l=(g,y)=>{a&&invariant(),withTimings("onBeforeCapture",()=>{const A=o().onBeforeCapture;A&&A({draggableId:g,mode:y})})},u=(g,y)=>{a&&invariant(),withTimings("onBeforeDragStart",()=>{const A=o().onBeforeDragStart;A&&A(getDragStart(g,y))})},c=(g,y)=>{a&&invariant();const A=getDragStart(g,y);a={mode:y,lastCritical:g,lastLocation:A.source,lastCombine:null},s.add(()=>{withTimings("onDragStart",()=>execute(o().onDragStart,A,e,preset.onDragStart))})},d=(g,y)=>{const A=tryGetDestination(y),T=tryGetCombine(y);a||invariant();const E=!isCriticalEqual(g,a.lastCritical);E&&(a.lastCritical=g);const v=!areLocationsEqual(a.lastLocation,A);v&&(a.lastLocation=A);const _=!isCombineEqual(a.lastCombine,T);if(_&&(a.lastCombine=T),!E&&!v&&!_)return;const w={...getDragStart(g,a.mode),combine:T,destination:A};s.add(()=>{withTimings("onDragUpdate",()=>execute(o().onDragUpdate,w,e,preset.onDragUpdate))})},h=()=>{a||invariant(),s.flush()},p=g=>{a||invariant(),a=null,withTimings("onDragEnd",()=>execute(o().onDragEnd,g,e,preset.onDragEnd))};return{beforeCapture:l,beforeStart:u,start:c,update:d,flush:h,drop:p,abort:()=>{if(!a)return;const g={...getDragStart(a.lastCritical,a.mode),combine:null,destination:null,reason:"CANCEL"};p(g)}}},responders=(o,e)=>{const s=getPublisher(o,e);return a=>l=>u=>{if(guard(u,"BEFORE_INITIAL_CAPTURE")){s.beforeCapture(u.payload.draggableId,u.payload.movementMode);return}if(guard(u,"INITIAL_PUBLISH")){const d=u.payload.critical;s.beforeStart(d,u.payload.movementMode),l(u),s.start(d,u.payload.movementMode);return}if(guard(u,"DROP_COMPLETE")){const d=u.payload.completed.result;s.flush(),l(u),s.drop(d);return}if(l(u),guard(u,"FLUSH")){s.abort();return}const c=a.getState();c.phase==="DRAGGING"&&s.update(c.critical,c.impact)}};const dropAnimationFinishMiddleware=o=>e=>s=>{if(!guard(s,"DROP_ANIMATION_FINISHED")){e(s);return}const a=o.getState();a.phase!=="DROP_ANIMATING"&&invariant(),o.dispatch(completeDrop({completed:a.completed}))},dropAnimationFlushOnScrollMiddleware=o=>{let e=null,s=null;function a(){s&&(cancelAnimationFrame(s),s=null),e&&(e(),e=null)}return l=>u=>{if((guard(u,"FLUSH")||guard(u,"DROP_COMPLETE")||guard(u,"DROP_ANIMATION_FINISHED"))&&a(),l(u),!guard(u,"DROP_ANIMATE"))return;const c={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){o.getState().phase==="DROP_ANIMATING"&&o.dispatch(dropAnimationFinished())}};s=requestAnimationFrame(()=>{s=null,e=bindEvents(window,[c])})}};var dimensionMarshalStopper=o=>()=>e=>s=>{(guard(s,"DROP_COMPLETE")||guard(s,"FLUSH")||guard(s,"DROP_ANIMATE"))&&o.stopPublishing(),e(s)},focus=o=>{let e=!1;return()=>s=>a=>{if(guard(a,"INITIAL_PUBLISH")){e=!0,o.tryRecordFocus(a.payload.critical.draggable.id),s(a),o.tryRestoreFocusRecorded();return}if(s(a),!!e){if(guard(a,"FLUSH")){e=!1,o.tryRestoreFocusRecorded();return}if(guard(a,"DROP_COMPLETE")){e=!1;const l=a.payload.completed.result;l.combine&&o.tryShiftRecord(l.draggableId,l.combine.draggableId),o.tryRestoreFocusRecorded()}}}};const shouldStop=o=>guard(o,"DROP_COMPLETE")||guard(o,"DROP_ANIMATE")||guard(o,"FLUSH");var autoScroll=o=>e=>s=>a=>{if(shouldStop(a)){o.stop(),s(a);return}if(guard(a,"INITIAL_PUBLISH")){s(a);const l=e.getState();l.phase!=="DRAGGING"&&invariant(),o.start(l);return}s(a),o.scroll(e.getState())};const pendingDrop=o=>e=>s=>{if(e(s),!guard(s,"PUBLISH_WHILE_DRAGGING"))return;const a=o.getState();a.phase==="DROP_PENDING"&&(a.isWaiting||o.dispatch(drop({reason:a.reason})))},composeEnhancers=compose;var createStore=({dimensionMarshal:o,focusMarshal:e,styleMarshal:s,getResponders:a,announce:l,autoScroller:u})=>createStore$1(reducer,composeEnhancers(applyMiddleware(style$1(s),dimensionMarshalStopper(o),lift$2(o),dropMiddleware,dropAnimationFinishMiddleware,dropAnimationFlushOnScrollMiddleware,pendingDrop,autoScroll(u),scrollListener,focus(e),responders(a,l))));const clean$1=()=>({additions:{},removals:{},modified:{}});function createPublisher({registry:o,callbacks:e}){let s=clean$1(),a=null;const l=()=>{a||(e.collectionStarting(),a=requestAnimationFrame(()=>{a=null;const{additions:h,removals:p,modified:m}=s,g=Object.keys(h).map(T=>o.draggable.getById(T).getDimension(origin)).sort((T,E)=>T.descriptor.index-E.descriptor.index),y=Object.keys(m).map(T=>{const v=o.droppable.getById(T).callbacks.getScrollWhileDragging();return{droppableId:T,scroll:v}}),A={additions:g,removals:Object.keys(p),modified:y};s=clean$1(),e.publish(A)}))};return{add:h=>{const p=h.descriptor.id;s.additions[p]=h,s.modified[h.descriptor.droppableId]=!0,s.removals[p]&&delete s.removals[p],l()},remove:h=>{const p=h.descriptor;s.removals[p.id]=!0,s.modified[p.droppableId]=!0,s.additions[p.id]&&delete s.additions[p.id],l()},stop:()=>{a&&(cancelAnimationFrame(a),a=null,s=clean$1())}}}var getMaxScroll=({scrollHeight:o,scrollWidth:e,height:s,width:a})=>{const l=subtract({x:e,y:o},{x:a,y:s});return{x:Math.max(0,l.x),y:Math.max(0,l.y)}},getDocumentElement=()=>{const o=document.documentElement;return o||invariant(),o},getMaxWindowScroll=()=>{const o=getDocumentElement();return getMaxScroll({scrollHeight:o.scrollHeight,scrollWidth:o.scrollWidth,width:o.clientWidth,height:o.clientHeight})},getViewport=()=>{const o=getWindowScroll(),e=getMaxWindowScroll(),s=o.y,a=o.x,l=getDocumentElement(),u=l.clientWidth,c=l.clientHeight,d=a+u,h=s+c;return{frame:getRect({top:s,left:a,right:d,bottom:h}),scroll:{initial:o,current:o,max:e,diff:{value:origin,displacement:origin}}}},getInitialPublish=({critical:o,scrollOptions:e,registry:s})=>{const a=getViewport(),l=a.scroll.current,u=o.droppable,c=s.droppable.getAllByType(u.type).map(m=>m.callbacks.getDimensionAndWatchScroll(l,e)),d=s.draggable.getAllByType(o.draggable.type).map(m=>m.getDimension(l));return{dimensions:{draggables:toDraggableMap(d),droppables:toDroppableMap(c)},critical:o,viewport:a}};function shouldPublishUpdate(o,e,s){return!(s.descriptor.id===e.id||s.descriptor.type!==e.type||o.droppable.getById(s.descriptor.droppableId).descriptor.mode!=="virtual")}var createDimensionMarshal=(o,e)=>{let s=null;const a=createPublisher({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:o}),l=(y,A)=>{o.droppable.exists(y)||invariant(),s&&e.updateDroppableIsEnabled({id:y,isEnabled:A})},u=(y,A)=>{s&&(o.droppable.exists(y)||invariant(),e.updateDroppableIsCombineEnabled({id:y,isCombineEnabled:A}))},c=(y,A)=>{s&&(o.droppable.exists(y)||invariant(),e.updateDroppableScroll({id:y,newScroll:A}))},d=(y,A)=>{s&&o.droppable.getById(y).callbacks.scroll(A)},h=()=>{if(!s)return;a.stop();const y=s.critical.droppable;o.droppable.getAllByType(y.type).forEach(A=>A.callbacks.dragStopped()),s.unsubscribe(),s=null},p=y=>{s||invariant();const A=s.critical.draggable;y.type==="ADDITION"&&shouldPublishUpdate(o,A,y.value)&&a.add(y.value),y.type==="REMOVAL"&&shouldPublishUpdate(o,A,y.value)&&a.remove(y.value)};return{updateDroppableIsEnabled:l,updateDroppableIsCombineEnabled:u,scrollDroppable:d,updateDroppableScroll:c,startPublishing:y=>{s&&invariant();const A=o.draggable.getById(y.draggableId),T=o.droppable.getById(A.descriptor.droppableId),E={draggable:A.descriptor,droppable:T.descriptor},v=o.subscribe(p);return s={critical:E,unsubscribe:v},getInitialPublish({critical:E,registry:o,scrollOptions:y.scrollOptions})},stopPublishing:h}},canStartDrag=(o,e)=>o.phase==="IDLE"?!0:o.phase!=="DROP_ANIMATING"||o.completed.result.draggableId===e?!1:o.completed.result.reason==="DROP",scrollWindow=o=>{window.scrollBy(o.x,o.y)};const getScrollableDroppables=memoizeOne$1(o=>toDroppableList(o).filter(e=>!(!e.isEnabled||!e.frame))),getScrollableDroppableOver=(o,e)=>getScrollableDroppables(e).find(a=>(a.frame||invariant(),isPositionInFrame(a.frame.pageMarginBox)(o)))||null;var getBestScrollableDroppable=({center:o,destination:e,droppables:s})=>{if(e){const l=s[e];return l.frame?l:null}return getScrollableDroppableOver(o,s)};const defaultAutoScrollerOptions={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:o=>o**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var getDistanceThresholds=(o,e,s=()=>defaultAutoScrollerOptions)=>{const a=s(),l=o[e.size]*a.startFromPercentage,u=o[e.size]*a.maxScrollAtPercentage;return{startScrollingFrom:l,maxScrollValueAt:u}},getPercentage=({startOfRange:o,endOfRange:e,current:s})=>{const a=e-o;return a===0?0:(s-o)/a},minScroll=1,getValueFromDistance=(o,e,s=()=>defaultAutoScrollerOptions)=>{const a=s();if(o>e.startScrollingFrom)return 0;if(o<=e.maxScrollValueAt)return a.maxPixelScroll;if(o===e.startScrollingFrom)return minScroll;const u=1-getPercentage({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:o}),c=a.maxPixelScroll*a.ease(u);return Math.ceil(c)},dampenValueByTime=(o,e,s)=>{const a=s(),l=a.durationDampening.accelerateAt,u=a.durationDampening.stopDampeningAt,c=e,d=u,p=Date.now()-c;if(p>=u)return o;if(p<l)return minScroll;const m=getPercentage({startOfRange:l,endOfRange:d,current:p}),g=o*a.ease(m);return Math.ceil(g)},getValue=({distanceToEdge:o,thresholds:e,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:l})=>{const u=getValueFromDistance(o,e,l);return u===0?0:a?Math.max(dampenValueByTime(u,s,l),minScroll):u},getScrollOnAxis=({container:o,distanceToEdges:e,dragStartTime:s,axis:a,shouldUseTimeDampening:l,getAutoScrollerOptions:u})=>{const c=getDistanceThresholds(o,a,u);return e[a.end]<e[a.start]?getValue({distanceToEdge:e[a.end],thresholds:c,dragStartTime:s,shouldUseTimeDampening:l,getAutoScrollerOptions:u}):-1*getValue({distanceToEdge:e[a.start],thresholds:c,dragStartTime:s,shouldUseTimeDampening:l,getAutoScrollerOptions:u})},adjustForSizeLimits=({container:o,subject:e,proposedScroll:s})=>{const a=e.height>o.height,l=e.width>o.width;return!l&&!a?s:l&&a?null:{x:l?0:s.x,y:a?0:s.y}};const clean=apply$1(o=>o===0?0:o);var getScroll$1=({dragStartTime:o,container:e,subject:s,center:a,shouldUseTimeDampening:l,getAutoScrollerOptions:u})=>{const c={top:a.y-e.top,right:e.right-a.x,bottom:e.bottom-a.y,left:a.x-e.left},d=getScrollOnAxis({container:e,distanceToEdges:c,dragStartTime:o,axis:vertical,shouldUseTimeDampening:l,getAutoScrollerOptions:u}),h=getScrollOnAxis({container:e,distanceToEdges:c,dragStartTime:o,axis:horizontal,shouldUseTimeDampening:l,getAutoScrollerOptions:u}),p=clean({x:h,y:d});if(isEqual$1$1(p,origin))return null;const m=adjustForSizeLimits({container:e,subject:s,proposedScroll:p});return m?isEqual$1$1(m,origin)?null:m:null};const smallestSigned=apply$1(o=>o===0?0:o>0?1:-1),getOverlap=(()=>{const o=(e,s)=>e<0?e:e>s?e-s:0;return({current:e,max:s,change:a})=>{const l=add$2(e,a),u={x:o(l.x,s.x),y:o(l.y,s.y)};return isEqual$1$1(u,origin)?null:u}})(),canPartiallyScroll=({max:o,current:e,change:s})=>{const a={x:Math.max(e.x,o.x),y:Math.max(e.y,o.y)},l=smallestSigned(s),u=getOverlap({max:a,current:e,change:l});return!u||l.x!==0&&u.x===0||l.y!==0&&u.y===0},canScrollWindow=(o,e)=>canPartiallyScroll({current:o.scroll.current,max:o.scroll.max,change:e}),getWindowOverlap=(o,e)=>{if(!canScrollWindow(o,e))return null;const s=o.scroll.max,a=o.scroll.current;return getOverlap({current:a,max:s,change:e})},canScrollDroppable=(o,e)=>{const s=o.frame;return s?canPartiallyScroll({current:s.scroll.current,max:s.scroll.max,change:e}):!1},getDroppableOverlap=(o,e)=>{const s=o.frame;return!s||!canScrollDroppable(o,e)?null:getOverlap({current:s.scroll.current,max:s.scroll.max,change:e})};var getWindowScrollChange=({viewport:o,subject:e,center:s,dragStartTime:a,shouldUseTimeDampening:l,getAutoScrollerOptions:u})=>{const c=getScroll$1({dragStartTime:a,container:o.frame,subject:e,center:s,shouldUseTimeDampening:l,getAutoScrollerOptions:u});return c&&canScrollWindow(o,c)?c:null},getDroppableScrollChange=({droppable:o,subject:e,center:s,dragStartTime:a,shouldUseTimeDampening:l,getAutoScrollerOptions:u})=>{const c=o.frame;if(!c)return null;const d=getScroll$1({dragStartTime:a,container:c.pageMarginBox,subject:e,center:s,shouldUseTimeDampening:l,getAutoScrollerOptions:u});return d&&canScrollDroppable(o,d)?d:null},scroll=({state:o,dragStartTime:e,shouldUseTimeDampening:s,scrollWindow:a,scrollDroppable:l,getAutoScrollerOptions:u})=>{const c=o.current.page.borderBoxCenter,h=o.dimensions.draggables[o.critical.draggable.id].page.marginBox;if(o.isWindowScrollAllowed){const g=o.viewport,y=getWindowScrollChange({dragStartTime:e,viewport:g,subject:h,center:c,shouldUseTimeDampening:s,getAutoScrollerOptions:u});if(y){a(y);return}}const p=getBestScrollableDroppable({center:c,destination:whatIsDraggedOver(o.impact),droppables:o.dimensions.droppables});if(!p)return;const m=getDroppableScrollChange({dragStartTime:e,droppable:p,subject:h,center:c,shouldUseTimeDampening:s,getAutoScrollerOptions:u});m&&l(p.descriptor.id,m)},createFluidScroller=({scrollWindow:o,scrollDroppable:e,getAutoScrollerOptions:s=()=>defaultAutoScrollerOptions})=>{const a=rafSchd(o),l=rafSchd(e);let u=null;const c=p=>{u||invariant();const{shouldUseTimeDampening:m,dragStartTime:g}=u;scroll({state:p,scrollWindow:a,scrollDroppable:l,dragStartTime:g,shouldUseTimeDampening:m,getAutoScrollerOptions:s})};return{start:p=>{u&&invariant();const m=Date.now();let g=!1;const y=()=>{g=!0};scroll({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:y,scrollDroppable:y,getAutoScrollerOptions:s}),u={dragStartTime:m,shouldUseTimeDampening:g},g&&c(p)},stop:()=>{u&&(a.cancel(),l.cancel(),u=null)},scroll:c}},createJumpScroller=({move:o,scrollDroppable:e,scrollWindow:s})=>{const a=(d,h)=>{const p=add$2(d.current.client.selection,h);o({client:p})},l=(d,h)=>{if(!canScrollDroppable(d,h))return h;const p=getDroppableOverlap(d,h);if(!p)return e(d.descriptor.id,h),null;const m=subtract(h,p);return e(d.descriptor.id,m),subtract(h,m)},u=(d,h,p)=>{if(!d||!canScrollWindow(h,p))return p;const m=getWindowOverlap(h,p);if(!m)return s(p),null;const g=subtract(p,m);return s(g),subtract(p,g)};return d=>{const h=d.scrollJumpRequest;if(!h)return;const p=whatIsDraggedOver(d.impact);p||invariant();const m=l(d.dimensions.droppables[p],h);if(!m)return;const g=d.viewport,y=u(d.isWindowScrollAllowed,g,m);y&&a(d,y)}},createAutoScroller=({scrollDroppable:o,scrollWindow:e,move:s,getAutoScrollerOptions:a})=>{const l=createFluidScroller({scrollWindow:e,scrollDroppable:o,getAutoScrollerOptions:a}),u=createJumpScroller({move:s,scrollWindow:e,scrollDroppable:o});return{scroll:h=>{if(!(a().disabled||h.phase!=="DRAGGING")){if(h.movementMode==="FLUID"){l.scroll(h);return}h.scrollJumpRequest&&u(h)}},start:l.start,stop:l.stop}};const prefix$2="data-rfd",dragHandle=(()=>{const o=`${prefix$2}-drag-handle`;return{base:o,draggableId:`${o}-draggable-id`,contextId:`${o}-context-id`}})(),draggable=(()=>{const o=`${prefix$2}-draggable`;return{base:o,contextId:`${o}-context-id`,id:`${o}-id`}})(),droppable=(()=>{const o=`${prefix$2}-droppable`;return{base:o,contextId:`${o}-context-id`,id:`${o}-id`}})(),scrollContainer={contextId:`${prefix$2}-scroll-container-context-id`},makeGetSelector=o=>e=>`[${e}="${o}"]`,getStyles=(o,e)=>o.map(s=>{const a=s.styles[e];return a?`${s.selector} { ${a} }`:""}).join(" "),noPointerEvents="pointer-events: none;";var getStyles$1=o=>{const e=makeGetSelector(o),s=(()=>{const d=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(dragHandle.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:d,dragging:noPointerEvents,dropAnimating:d}}})(),a=(()=>{const d=`
      transition: ${transitions.outOfTheWay};
    `;return{selector:e(draggable.contextId),styles:{dragging:d,dropAnimating:d,userCancel:d}}})(),l={selector:e(droppable.contextId),styles:{always:"overflow-anchor: none;"}},c=[a,s,l,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:getStyles(c,"always"),resting:getStyles(c,"resting"),dragging:getStyles(c,"dragging"),dropAnimating:getStyles(c,"dropAnimating"),userCancel:getStyles(c,"userCancel")}};const useIsomorphicLayoutEffect$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?reactExports.useLayoutEffect:reactExports.useEffect,getHead=()=>{const o=document.querySelector("head");return o||invariant(),o},createStyleEl=o=>{const e=document.createElement("style");return o&&e.setAttribute("nonce",o),e.type="text/css",e};function useStyleMarshal(o,e){const s=useMemo(()=>getStyles$1(o),[o]),a=reactExports.useRef(null),l=reactExports.useRef(null),u=useCallback(memoizeOne$1(g=>{const y=l.current;y||invariant(),y.textContent=g}),[]),c=useCallback(g=>{const y=a.current;y||invariant(),y.textContent=g},[]);useIsomorphicLayoutEffect$1(()=>{!a.current&&!l.current||invariant();const g=createStyleEl(e),y=createStyleEl(e);return a.current=g,l.current=y,g.setAttribute(`${prefix$2}-always`,o),y.setAttribute(`${prefix$2}-dynamic`,o),getHead().appendChild(g),getHead().appendChild(y),c(s.always),u(s.resting),()=>{const A=T=>{const E=T.current;E||invariant(),getHead().removeChild(E),T.current=null};A(a),A(l)}},[e,c,u,s.always,s.resting,o]);const d=useCallback(()=>u(s.dragging),[u,s.dragging]),h=useCallback(g=>{if(g==="DROP"){u(s.dropAnimating);return}u(s.userCancel)},[u,s.dropAnimating,s.userCancel]),p=useCallback(()=>{l.current&&u(s.resting)},[u,s.resting]);return useMemo(()=>({dragging:d,dropping:h,resting:p}),[d,h,p])}function querySelectorAll(o,e){return Array.from(o.querySelectorAll(e))}var getWindowFromEl=o=>o&&o.ownerDocument&&o.ownerDocument.defaultView?o.ownerDocument.defaultView:window;function isHtmlElement(o){return o instanceof getWindowFromEl(o).HTMLElement}function findDragHandle(o,e){const s=`[${dragHandle.contextId}="${o}"]`,a=querySelectorAll(document,s);if(!a.length)return null;const l=a.find(u=>u.getAttribute(dragHandle.draggableId)===e);return!l||!isHtmlElement(l)?null:l}function useFocusMarshal(o){const e=reactExports.useRef({}),s=reactExports.useRef(null),a=reactExports.useRef(null),l=reactExports.useRef(!1),u=useCallback(function(y,A){const T={id:y,focus:A};return e.current[y]=T,function(){const v=e.current;v[y]!==T&&delete v[y]}},[]),c=useCallback(function(y){const A=findDragHandle(o,y);A&&A!==document.activeElement&&A.focus()},[o]),d=useCallback(function(y,A){s.current===y&&(s.current=A)},[]),h=useCallback(function(){a.current||l.current&&(a.current=requestAnimationFrame(()=>{a.current=null;const y=s.current;y&&c(y)}))},[c]),p=useCallback(function(y){s.current=null;const A=document.activeElement;A&&A.getAttribute(dragHandle.draggableId)===y&&(s.current=y)},[]);return useIsomorphicLayoutEffect$1(()=>(l.current=!0,function(){l.current=!1;const y=a.current;y&&cancelAnimationFrame(y)}),[]),useMemo(()=>({register:u,tryRecordFocus:p,tryRestoreFocusRecorded:h,tryShiftRecord:d}),[u,p,h,d])}function createRegistry(){const o={draggables:{},droppables:{}},e=[];function s(g){return e.push(g),function(){const A=e.indexOf(g);A!==-1&&e.splice(A,1)}}function a(g){e.length&&e.forEach(y=>y(g))}function l(g){return o.draggables[g]||null}function u(g){const y=l(g);return y||invariant(),y}const c={register:g=>{o.draggables[g.descriptor.id]=g,a({type:"ADDITION",value:g})},update:(g,y)=>{const A=o.draggables[y.descriptor.id];A&&A.uniqueId===g.uniqueId&&(delete o.draggables[y.descriptor.id],o.draggables[g.descriptor.id]=g)},unregister:g=>{const y=g.descriptor.id,A=l(y);A&&g.uniqueId===A.uniqueId&&(delete o.draggables[y],o.droppables[g.descriptor.droppableId]&&a({type:"REMOVAL",value:g}))},getById:u,findById:l,exists:g=>!!l(g),getAllByType:g=>Object.values(o.draggables).filter(y=>y.descriptor.type===g)};function d(g){return o.droppables[g]||null}function h(g){const y=d(g);return y||invariant(),y}const p={register:g=>{o.droppables[g.descriptor.id]=g},unregister:g=>{const y=d(g.descriptor.id);y&&g.uniqueId===y.uniqueId&&delete o.droppables[g.descriptor.id]},getById:h,findById:d,exists:g=>!!d(g),getAllByType:g=>Object.values(o.droppables).filter(y=>y.descriptor.type===g)};function m(){o.draggables={},o.droppables={},e.length=0}return{draggable:c,droppable:p,subscribe:s,clean:m}}function useRegistry(){const o=useMemo(createRegistry,[]);return reactExports.useEffect(()=>function(){o.clean()},[o]),o}var StoreContext=React.createContext(null),getBodyElement=()=>{const o=document.body;return o||invariant(),o};const visuallyHidden={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},getId=o=>`rfd-announcement-${o}`;function useAnnouncer(o){const e=useMemo(()=>getId(o),[o]),s=reactExports.useRef(null);return reactExports.useEffect(function(){const u=document.createElement("div");return s.current=u,u.id=e,u.setAttribute("aria-live","assertive"),u.setAttribute("aria-atomic","true"),_extends(u.style,visuallyHidden),getBodyElement().appendChild(u),function(){setTimeout(function(){const h=getBodyElement();h.contains(u)&&h.removeChild(u),u===s.current&&(s.current=null)})}},[e]),useCallback(l=>{const u=s.current;if(u){u.textContent=l;return}},[])}const defaults={separator:"::"};function useUniqueId(o,e=defaults){const s=React.useId();return useMemo(()=>`${o}${e.separator}${s}`,[e.separator,o,s])}function getElementId$1({contextId:o,uniqueId:e}){return`rfd-hidden-text-${o}-${e}`}function useHiddenTextElement({contextId:o,text:e}){const s=useUniqueId("hidden-text",{separator:"-"}),a=useMemo(()=>getElementId$1({contextId:o,uniqueId:s}),[s,o]);return reactExports.useEffect(function(){const u=document.createElement("div");return u.id=a,u.textContent=e,u.style.display="none",getBodyElement().appendChild(u),function(){const d=getBodyElement();d.contains(u)&&d.removeChild(u)}},[a,e]),a}var AppContext=React.createContext(null);function usePrevious(o){const e=reactExports.useRef(o);return reactExports.useEffect(()=>{e.current=o}),e}function create(){let o=null;function e(){return!!o}function s(c){return c===o}function a(c){o&&invariant();const d={abandon:c};return o=d,d}function l(){o||invariant(),o=null}function u(){o&&(o.abandon(),l())}return{isClaimed:e,isActive:s,claim:a,release:l,tryAbandon:u}}function isDragging(o){return o.phase==="IDLE"||o.phase==="DROP_ANIMATING"?!1:o.isDragging}const tab=9,enter=13,escape$1=27,space$3=32,pageUp=33,pageDown=34,end$1=35,home=36,arrowLeft$1=37,arrowUp$1=38,arrowRight$1=39,arrowDown$1=40,preventedKeys={[enter]:!0,[tab]:!0};var preventStandardKeyEvents=o=>{preventedKeys[o.keyCode]&&o.preventDefault()};const supportedEventName=(()=>{const o="visibilitychange";return typeof document>"u"?o:[o,`ms${o}`,`webkit${o}`,`moz${o}`,`o${o}`].find(a=>`on${a}`in document)||o})(),primaryButton=0,sloppyClickThreshold=5;function isSloppyClickThresholdExceeded(o,e){return Math.abs(e.x-o.x)>=sloppyClickThreshold||Math.abs(e.y-o.y)>=sloppyClickThreshold}const idle$1={type:"IDLE"};function getCaptureBindings({cancel:o,completed:e,getPhase:s,setPhase:a}){return[{eventName:"mousemove",fn:l=>{const{button:u,clientX:c,clientY:d}=l;if(u!==primaryButton)return;const h={x:c,y:d},p=s();if(p.type==="DRAGGING"){l.preventDefault(),p.actions.move(h);return}p.type!=="PENDING"&&invariant();const m=p.point;if(!isSloppyClickThresholdExceeded(m,h))return;l.preventDefault();const g=p.actions.fluidLift(h);a({type:"DRAGGING",actions:g})}},{eventName:"mouseup",fn:l=>{const u=s();if(u.type!=="DRAGGING"){o();return}l.preventDefault(),u.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:l=>{s().type==="DRAGGING"&&l.preventDefault(),o()}},{eventName:"keydown",fn:l=>{if(s().type==="PENDING"){o();return}if(l.keyCode===escape$1){l.preventDefault(),o();return}preventStandardKeyEvents(l)}},{eventName:"resize",fn:o},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{s().type==="PENDING"&&o()}},{eventName:"webkitmouseforcedown",fn:l=>{const u=s();if(u.type==="IDLE"&&invariant(),u.actions.shouldRespectForcePress()){o();return}l.preventDefault()}},{eventName:supportedEventName,fn:o}]}function useMouseSensor(o){const e=reactExports.useRef(idle$1),s=reactExports.useRef(noop$2$1),a=useMemo(()=>({eventName:"mousedown",fn:function(g){if(g.defaultPrevented||g.button!==primaryButton||g.ctrlKey||g.metaKey||g.shiftKey||g.altKey)return;const y=o.findClosestDraggableId(g);if(!y)return;const A=o.tryGetLock(y,c,{sourceEvent:g});if(!A)return;g.preventDefault();const T={x:g.clientX,y:g.clientY};s.current(),p(A,T)}}),[o]),l=useMemo(()=>({eventName:"webkitmouseforcewillbegin",fn:m=>{if(m.defaultPrevented)return;const g=o.findClosestDraggableId(m);if(!g)return;const y=o.findOptionsForDraggable(g);y&&(y.shouldRespectForcePress||o.canGetLock(g)&&m.preventDefault())}}),[o]),u=useCallback(function(){const g={passive:!1,capture:!0};s.current=bindEvents(window,[l,a],g)},[l,a]),c=useCallback(()=>{e.current.type!=="IDLE"&&(e.current=idle$1,s.current(),u())},[u]),d=useCallback(()=>{const m=e.current;c(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[c]),h=useCallback(function(){const g={capture:!0,passive:!1},y=getCaptureBindings({cancel:d,completed:c,getPhase:()=>e.current,setPhase:A=>{e.current=A}});s.current=bindEvents(window,y,g)},[d,c]),p=useCallback(function(g,y){e.current.type!=="IDLE"&&invariant(),e.current={type:"PENDING",point:y,actions:g},h()},[h]);useIsomorphicLayoutEffect$1(function(){return u(),function(){s.current()}},[u])}function noop$1$1(){}const scrollJumpKeys={[pageDown]:!0,[pageUp]:!0,[home]:!0,[end$1]:!0};function getDraggingBindings(o,e){function s(){e(),o.cancel()}function a(){e(),o.drop()}return[{eventName:"keydown",fn:l=>{if(l.keyCode===escape$1){l.preventDefault(),s();return}if(l.keyCode===space$3){l.preventDefault(),a();return}if(l.keyCode===arrowDown$1){l.preventDefault(),o.moveDown();return}if(l.keyCode===arrowUp$1){l.preventDefault(),o.moveUp();return}if(l.keyCode===arrowRight$1){l.preventDefault(),o.moveRight();return}if(l.keyCode===arrowLeft$1){l.preventDefault(),o.moveLeft();return}if(scrollJumpKeys[l.keyCode]){l.preventDefault();return}preventStandardKeyEvents(l)}},{eventName:"mousedown",fn:s},{eventName:"mouseup",fn:s},{eventName:"click",fn:s},{eventName:"touchstart",fn:s},{eventName:"resize",fn:s},{eventName:"wheel",fn:s,options:{passive:!0}},{eventName:supportedEventName,fn:s}]}function useKeyboardSensor(o){const e=reactExports.useRef(noop$1$1),s=useMemo(()=>({eventName:"keydown",fn:function(u){if(u.defaultPrevented||u.keyCode!==space$3)return;const c=o.findClosestDraggableId(u);if(!c)return;const d=o.tryGetLock(c,m,{sourceEvent:u});if(!d)return;u.preventDefault();let h=!0;const p=d.snapLift();e.current();function m(){h||invariant(),h=!1,e.current(),a()}e.current=bindEvents(window,getDraggingBindings(p,m),{capture:!0,passive:!1})}}),[o]),a=useCallback(function(){const u={passive:!1,capture:!0};e.current=bindEvents(window,[s],u)},[s]);useIsomorphicLayoutEffect$1(function(){return a(),function(){e.current()}},[a])}const idle={type:"IDLE"},timeForLongPress=120,forcePressThreshold=.15;function getWindowBindings({cancel:o,getPhase:e}){return[{eventName:"orientationchange",fn:o},{eventName:"resize",fn:o},{eventName:"contextmenu",fn:s=>{s.preventDefault()}},{eventName:"keydown",fn:s=>{if(e().type!=="DRAGGING"){o();return}s.keyCode===escape$1&&s.preventDefault(),o()}},{eventName:supportedEventName,fn:o}]}function getHandleBindings({cancel:o,completed:e,getPhase:s}){return[{eventName:"touchmove",options:{capture:!1},fn:a=>{const l=s();if(l.type!=="DRAGGING"){o();return}l.hasMoved=!0;const{clientX:u,clientY:c}=a.touches[0],d={x:u,y:c};a.preventDefault(),l.actions.move(d)}},{eventName:"touchend",fn:a=>{const l=s();if(l.type!=="DRAGGING"){o();return}a.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:a=>{if(s().type!=="DRAGGING"){o();return}a.preventDefault(),o()}},{eventName:"touchforcechange",fn:a=>{const l=s();l.type==="IDLE"&&invariant();const u=a.touches[0];if(!u||!(u.force>=forcePressThreshold))return;const d=l.actions.shouldRespectForcePress();if(l.type==="PENDING"){d&&o();return}if(d){if(l.hasMoved){a.preventDefault();return}o();return}a.preventDefault()}},{eventName:supportedEventName,fn:o}]}function useTouchSensor(o){const e=reactExports.useRef(idle),s=reactExports.useRef(noop$2$1),a=useCallback(function(){return e.current},[]),l=useCallback(function(A){e.current=A},[]),u=useMemo(()=>({eventName:"touchstart",fn:function(A){if(A.defaultPrevented)return;const T=o.findClosestDraggableId(A);if(!T)return;const E=o.tryGetLock(T,d,{sourceEvent:A});if(!E)return;const v=A.touches[0],{clientX:_,clientY:w}=v,R={x:_,y:w};s.current(),g(E,R)}}),[o]),c=useCallback(function(){const A={capture:!0,passive:!1};s.current=bindEvents(window,[u],A)},[u]),d=useCallback(()=>{const y=e.current;y.type!=="IDLE"&&(y.type==="PENDING"&&clearTimeout(y.longPressTimerId),l(idle),s.current(),c())},[c,l]),h=useCallback(()=>{const y=e.current;d(),y.type==="DRAGGING"&&y.actions.cancel({shouldBlockNextClick:!0}),y.type==="PENDING"&&y.actions.abort()},[d]),p=useCallback(function(){const A={capture:!0,passive:!1},T={cancel:h,completed:d,getPhase:a},E=bindEvents(window,getHandleBindings(T),A),v=bindEvents(window,getWindowBindings(T),A);s.current=function(){E(),v()}},[h,a,d]),m=useCallback(function(){const A=a();A.type!=="PENDING"&&invariant();const T=A.actions.fluidLift(A.point);l({type:"DRAGGING",actions:T,hasMoved:!1})},[a,l]),g=useCallback(function(A,T){a().type!=="IDLE"&&invariant();const E=setTimeout(m,timeForLongPress);l({type:"PENDING",point:T,actions:A,longPressTimerId:E}),p()},[p,a,l,m]);useIsomorphicLayoutEffect$1(function(){return c(),function(){s.current();const T=a();T.type==="PENDING"&&(clearTimeout(T.longPressTimerId),l(idle))}},[a,c,l]),useIsomorphicLayoutEffect$1(function(){return bindEvents(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const interactiveTagNames=["input","button","textarea","select","option","optgroup","video","audio"];function isAnInteractiveElement(o,e){if(e==null)return!1;if(interactiveTagNames.includes(e.tagName.toLowerCase()))return!0;const a=e.getAttribute("contenteditable");return a==="true"||a===""?!0:e===o?!1:isAnInteractiveElement(o,e.parentElement)}function isEventInInteractiveElement(o,e){const s=e.target;return isHtmlElement(s)?isAnInteractiveElement(o,s):!1}var getBorderBoxCenterPosition=o=>getRect(o.getBoundingClientRect()).center;function isElement(o){return o instanceof getWindowFromEl(o).Element}const supportedMatchesName=(()=>{const o="matches";return typeof document>"u"?o:[o,"msMatchesSelector","webkitMatchesSelector"].find(a=>a in Element.prototype)||o})();function closestPonyfill(o,e){return o==null?null:o[supportedMatchesName](e)?o:closestPonyfill(o.parentElement,e)}function closest$2(o,e){return o.closest?o.closest(e):closestPonyfill(o,e)}function getSelector(o){return`[${dragHandle.contextId}="${o}"]`}function findClosestDragHandleFromEvent(o,e){const s=e.target;if(!isElement(s))return null;const a=getSelector(o),l=closest$2(s,a);return!l||!isHtmlElement(l)?null:l}function tryGetClosestDraggableIdFromEvent(o,e){const s=findClosestDragHandleFromEvent(o,e);return s?s.getAttribute(dragHandle.draggableId):null}function findDraggable(o,e){const s=`[${draggable.contextId}="${o}"]`,l=querySelectorAll(document,s).find(u=>u.getAttribute(draggable.id)===e);return!l||!isHtmlElement(l)?null:l}function preventDefault(o){o.preventDefault()}function isActive$1({expected:o,phase:e,isLockActive:s,shouldWarn:a}){return!(!s()||o!==e)}function canStart({lockAPI:o,store:e,registry:s,draggableId:a}){if(o.isClaimed())return!1;const l=s.draggable.findById(a);return!(!l||!l.options.isEnabled||!canStartDrag(e.getState(),a))}function tryStart({lockAPI:o,contextId:e,store:s,registry:a,draggableId:l,forceSensorStop:u,sourceEvent:c}){if(!canStart({lockAPI:o,store:s,registry:a,draggableId:l}))return null;const h=a.draggable.getById(l),p=findDraggable(e,h.descriptor.id);if(!p||c&&!h.options.canDragInteractiveElements&&isEventInInteractiveElement(p,c))return null;const m=o.claim(u||noop$2$1);let g="PRE_DRAG";function y(){return h.options.shouldRespectForcePress}function A(){return o.isActive(m)}function T(I,P){isActive$1({expected:I,phase:g,isLockActive:A,shouldWarn:!0})&&s.dispatch(P())}const E=T.bind(null,"DRAGGING");function v(I){function P(){o.release(),g="COMPLETED"}g!=="PRE_DRAG"&&(P(),invariant()),s.dispatch(lift$1$1(I.liftActionArgs)),g="DRAGGING";function N(L,Q={shouldBlockNextClick:!1}){if(I.cleanup(),Q.shouldBlockNextClick){const j=bindEvents(window,[{eventName:"click",fn:preventDefault,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(j)}P(),s.dispatch(drop({reason:L}))}return{isActive:()=>isActive$1({expected:"DRAGGING",phase:g,isLockActive:A,shouldWarn:!1}),shouldRespectForcePress:y,drop:L=>N("DROP",L),cancel:L=>N("CANCEL",L),...I.actions}}function _(I){const P=rafSchd(L=>{E(()=>move({client:L}))});return{...v({liftActionArgs:{id:l,clientSelection:I,movementMode:"FLUID"},cleanup:()=>P.cancel(),actions:{move:P}}),move:P}}function w(){const I={moveUp:()=>E(moveUp),moveRight:()=>E(moveRight),moveDown:()=>E(moveDown),moveLeft:()=>E(moveLeft)};return v({liftActionArgs:{id:l,clientSelection:getBorderBoxCenterPosition(p),movementMode:"SNAP"},cleanup:noop$2$1,actions:I})}function R(){isActive$1({expected:"PRE_DRAG",phase:g,isLockActive:A,shouldWarn:!0})&&o.release()}return{isActive:()=>isActive$1({expected:"PRE_DRAG",phase:g,isLockActive:A,shouldWarn:!1}),shouldRespectForcePress:y,fluidLift:_,snapLift:w,abort:R}}const defaultSensors=[useMouseSensor,useKeyboardSensor,useTouchSensor];function useSensorMarshal({contextId:o,store:e,registry:s,customSensors:a,enableDefaultSensors:l}){const u=[...l?defaultSensors:[],...a||[]],c=reactExports.useState(()=>create())[0],d=useCallback(function(v,_){isDragging(v)&&!isDragging(_)&&c.tryAbandon()},[c]);useIsomorphicLayoutEffect$1(function(){let v=e.getState();return e.subscribe(()=>{const w=e.getState();d(v,w),v=w})},[c,e,d]),useIsomorphicLayoutEffect$1(()=>c.tryAbandon,[c.tryAbandon]);const h=useCallback(E=>canStart({lockAPI:c,registry:s,store:e,draggableId:E}),[c,s,e]),p=useCallback((E,v,_)=>tryStart({lockAPI:c,registry:s,contextId:o,store:e,draggableId:E,forceSensorStop:v||null,sourceEvent:_&&_.sourceEvent?_.sourceEvent:null}),[o,c,s,e]),m=useCallback(E=>tryGetClosestDraggableIdFromEvent(o,E),[o]),g=useCallback(E=>{const v=s.draggable.findById(E);return v?v.options:null},[s.draggable]),y=useCallback(function(){c.isClaimed()&&(c.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(flush()))},[c,e]),A=useCallback(()=>c.isClaimed(),[c]),T=useMemo(()=>({canGetLock:h,tryGetLock:p,findClosestDraggableId:m,findOptionsForDraggable:g,tryReleaseLock:y,isLockClaimed:A}),[h,p,m,g,y,A]);for(let E=0;E<u.length;E++)u[E](T)}const createResponders=o=>({onBeforeCapture:e=>{const s=()=>{o.onBeforeCapture&&o.onBeforeCapture(e)};reactDomExports.flushSync(s)},onBeforeDragStart:o.onBeforeDragStart,onDragStart:o.onDragStart,onDragEnd:o.onDragEnd,onDragUpdate:o.onDragUpdate}),createAutoScrollerOptions=o=>({...defaultAutoScrollerOptions,...o.autoScrollerOptions,durationDampening:{...defaultAutoScrollerOptions.durationDampening,...o.autoScrollerOptions}});function getStore(o){return o.current||invariant(),o.current}function App$1(o){const{contextId:e,setCallbacks:s,sensors:a,nonce:l,dragHandleUsageInstructions:u}=o,c=reactExports.useRef(null),d=usePrevious(o),h=useCallback(()=>createResponders(d.current),[d]),p=useCallback(()=>createAutoScrollerOptions(d.current),[d]),m=useAnnouncer(e),g=useHiddenTextElement({contextId:e,text:u}),y=useStyleMarshal(e,l),A=useCallback(j=>{getStore(c).dispatch(j)},[]),T=useMemo(()=>bindActionCreators$1({publishWhileDragging,updateDroppableScroll,updateDroppableIsEnabled,updateDroppableIsCombineEnabled,collectionStarting},A),[A]),E=useRegistry(),v=useMemo(()=>createDimensionMarshal(E,T),[E,T]),_=useMemo(()=>createAutoScroller({scrollWindow,scrollDroppable:v.scrollDroppable,getAutoScrollerOptions:p,...bindActionCreators$1({move},A)}),[v.scrollDroppable,A,p]),w=useFocusMarshal(e),R=useMemo(()=>createStore({announce:m,autoScroller:_,dimensionMarshal:v,focusMarshal:w,getResponders:h,styleMarshal:y}),[m,_,v,w,h,y]);c.current=R;const k=useCallback(()=>{const j=getStore(c);j.getState().phase!=="IDLE"&&j.dispatch(flush())},[]),I=useCallback(()=>{const j=getStore(c).getState();return j.phase==="DROP_ANIMATING"?!0:j.phase==="IDLE"?!1:j.isDragging},[]),P=useMemo(()=>({isDragging:I,tryAbort:k}),[I,k]);s(P);const N=useCallback(j=>canStartDrag(getStore(c).getState(),j),[]),L=useCallback(()=>isMovementAllowed(getStore(c).getState()),[]),Q=useMemo(()=>({marshal:v,focus:w,contextId:e,canLift:N,isMovementAllowed:L,dragHandleUsageInstructionsId:g,registry:E}),[e,v,g,w,N,L,E]);return useSensorMarshal({contextId:e,store:R,registry:E,customSensors:a||null,enableDefaultSensors:o.enableDefaultSensors!==!1}),reactExports.useEffect(()=>k,[k]),React.createElement(AppContext.Provider,{value:Q},React.createElement(Provider_default,{context:StoreContext,store:R},o.children))}function useUniqueContextId(){return React.useId()}function DragDropContext(o){const e=useUniqueContextId(),s=o.dragHandleUsageInstructions||preset.dragHandleUsageInstructions;return React.createElement(ErrorBoundary$1,null,a=>React.createElement(App$1,{nonce:o.nonce,contextId:e,setCallbacks:a,dragHandleUsageInstructions:s,enableDefaultSensors:o.enableDefaultSensors,sensors:o.sensors,onBeforeCapture:o.onBeforeCapture,onBeforeDragStart:o.onBeforeDragStart,onDragStart:o.onDragStart,onDragUpdate:o.onDragUpdate,onDragEnd:o.onDragEnd,autoScrollerOptions:o.autoScrollerOptions},o.children))}const zIndexOptions={dragging:5e3,dropAnimating:4500},getDraggingTransition=(o,e)=>e?transitions.drop(e.duration):o?transitions.snap:transitions.fluid,getDraggingOpacity=(o,e)=>{if(o)return e?combine.opacity.drop:combine.opacity.combining},getShouldDraggingAnimate=o=>o.forceShouldAnimate!=null?o.forceShouldAnimate:o.mode==="SNAP";function getDraggingStyle(o){const s=o.dimension.client,{offset:a,combineWith:l,dropping:u}=o,c=!!l,d=getShouldDraggingAnimate(o),h=!!u,p=h?transforms.drop(a,c):transforms.moveTo(a);return{position:"fixed",top:s.marginBox.top,left:s.marginBox.left,boxSizing:"border-box",width:s.borderBox.width,height:s.borderBox.height,transition:getDraggingTransition(d,u),transform:p,opacity:getDraggingOpacity(c,h),zIndex:h?zIndexOptions.dropAnimating:zIndexOptions.dragging,pointerEvents:"none"}}function getSecondaryStyle(o){return{transform:transforms.moveTo(o.offset),transition:o.shouldAnimateDisplacement?void 0:"none"}}function getStyle$1(o){return o.type==="DRAGGING"?getDraggingStyle(o):getSecondaryStyle(o)}function getDimension$1(o,e,s=origin){const a=window.getComputedStyle(e),l=e.getBoundingClientRect(),u=calculateBox(l,a),c=withScroll(u,s),d={client:u,tagName:e.tagName.toLowerCase(),display:a.display},h={x:u.marginBox.width,y:u.marginBox.height};return{descriptor:o,placeholder:d,displaceBy:h,client:u,page:c}}function useDraggablePublisher(o){const e=useUniqueId("draggable"),{descriptor:s,registry:a,getDraggableRef:l,canDragInteractiveElements:u,shouldRespectForcePress:c,isEnabled:d}=o,h=useMemo(()=>({canDragInteractiveElements:u,shouldRespectForcePress:c,isEnabled:d}),[u,d,c]),p=useCallback(A=>{const T=l();return T||invariant(),getDimension$1(s,T,A)},[s,l]),m=useMemo(()=>({uniqueId:e,descriptor:s,options:h,getDimension:p}),[s,p,h,e]),g=reactExports.useRef(m),y=reactExports.useRef(!0);useIsomorphicLayoutEffect$1(()=>(a.draggable.register(g.current),()=>a.draggable.unregister(g.current)),[a.draggable]),useIsomorphicLayoutEffect$1(()=>{if(y.current){y.current=!1;return}const A=g.current;g.current=m,a.draggable.update(m,A)},[m,a.draggable])}var DroppableContext=React.createContext(null);function useRequiredContext(o){const e=reactExports.useContext(o);return e||invariant(),e}function preventHtml5Dnd(o){o.preventDefault()}const Draggable=o=>{const e=reactExports.useRef(null),s=useCallback((P=null)=>{e.current=P},[]),a=useCallback(()=>e.current,[]),{contextId:l,dragHandleUsageInstructionsId:u,registry:c}=useRequiredContext(AppContext),{type:d,droppableId:h}=useRequiredContext(DroppableContext),p=useMemo(()=>({id:o.draggableId,index:o.index,type:d,droppableId:h}),[o.draggableId,o.index,d,h]),{children:m,draggableId:g,isEnabled:y,shouldRespectForcePress:A,canDragInteractiveElements:T,isClone:E,mapped:v,dropAnimationFinished:_}=o;if(!E){const P=useMemo(()=>({descriptor:p,registry:c,getDraggableRef:a,canDragInteractiveElements:T,shouldRespectForcePress:A,isEnabled:y}),[p,c,a,T,A,y]);useDraggablePublisher(P)}const w=useMemo(()=>y?{tabIndex:0,role:"button","aria-describedby":u,"data-rfd-drag-handle-draggable-id":g,"data-rfd-drag-handle-context-id":l,draggable:!1,onDragStart:preventHtml5Dnd}:null,[l,u,g,y]),R=useCallback(P=>{v.type==="DRAGGING"&&v.dropping&&P.propertyName==="transform"&&reactDomExports.flushSync(_)},[_,v]),k=useMemo(()=>{const P=getStyle$1(v),N=v.type==="DRAGGING"&&v.dropping?R:void 0;return{innerRef:s,draggableProps:{"data-rfd-draggable-context-id":l,"data-rfd-draggable-id":g,style:P,onTransitionEnd:N},dragHandleProps:w}},[l,w,g,v,R,s]),I=useMemo(()=>({draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}),[p.droppableId,p.id,p.index,p.type]);return React.createElement(React.Fragment,null,m(k,v.snapshot,I))};var isStrictEqual=(o,e)=>o===e,whatIsDraggedOverFromResult=o=>{const{combine:e,destination:s}=o;return s?s.droppableId:e?e.droppableId:null};const getCombineWithFromResult=o=>o.combine?o.combine.draggableId:null,getCombineWithFromImpact=o=>o.at&&o.at.type==="COMBINE"?o.at.combine.draggableId:null;function getDraggableSelector(){const o=memoizeOne$1((l,u)=>({x:l,y:u})),e=memoizeOne$1((l,u,c=null,d=null,h=null)=>({isDragging:!0,isClone:u,isDropAnimating:!!h,dropAnimation:h,mode:l,draggingOver:c,combineWith:d,combineTargetFor:null})),s=memoizeOne$1((l,u,c,d,h=null,p=null,m=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:h,combineWith:p,mode:u,offset:l,dimension:c,forceShouldAnimate:m,snapshot:e(u,d,h,p,null)}}));return(l,u)=>{if(isDragging(l)){if(l.critical.draggable.id!==u.draggableId)return null;const c=l.current.client.offset,d=l.dimensions.draggables[u.draggableId],h=whatIsDraggedOver(l.impact),p=getCombineWithFromImpact(l.impact),m=l.forceShouldAnimate;return s(o(c.x,c.y),l.movementMode,d,u.isClone,h,p,m)}if(l.phase==="DROP_ANIMATING"){const c=l.completed;if(c.result.draggableId!==u.draggableId)return null;const d=u.isClone,h=l.dimensions.draggables[u.draggableId],p=c.result,m=p.mode,g=whatIsDraggedOverFromResult(p),y=getCombineWithFromResult(p),T={duration:l.dropDuration,curve:curves.drop,moveTo:l.newHomeClientOffset,opacity:y?combine.opacity.drop:null,scale:y?combine.scale.drop:null};return{mapped:{type:"DRAGGING",offset:l.newHomeClientOffset,dimension:h,dropping:T,draggingOver:g,combineWith:y,mode:m,forceShouldAnimate:null,snapshot:e(m,d,g,y,T)}}}return null}}function getSecondarySnapshot(o=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:o,combineWith:null}}const atRest={mapped:{type:"SECONDARY",offset:origin,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:getSecondarySnapshot(null)}};function getSecondarySelector(){const o=memoizeOne$1((c,d)=>({x:c,y:d})),e=memoizeOne$1(getSecondarySnapshot),s=memoizeOne$1((c,d=null,h)=>({mapped:{type:"SECONDARY",offset:c,combineTargetFor:d,shouldAnimateDisplacement:h,snapshot:e(d)}})),a=c=>c?s(origin,c,!0):null,l=(c,d,h,p)=>{const m=h.displaced.visible[c],g=!!(p.inVirtualList&&p.effected[c]),y=tryGetCombine(h),A=y&&y.draggableId===c?d:null;if(!m){if(!g)return a(A);if(h.displaced.invisible[c])return null;const v=negate(p.displacedBy.point),_=o(v.x,v.y);return s(_,A,!0)}if(g)return a(A);const T=h.displacedBy.point,E=o(T.x,T.y);return s(E,A,m.shouldAnimate)};return(c,d)=>{if(isDragging(c))return c.critical.draggable.id===d.draggableId?null:l(d.draggableId,c.critical.draggable.id,c.impact,c.afterCritical);if(c.phase==="DROP_ANIMATING"){const h=c.completed;return h.result.draggableId===d.draggableId?null:l(d.draggableId,h.result.draggableId,h.impact,h.afterCritical)}return null}}const makeMapStateToProps$1=()=>{const o=getDraggableSelector(),e=getSecondarySelector();return(a,l)=>o(a,l)||e(a,l)||atRest},mapDispatchToProps$1={dropAnimationFinished},ConnectedDraggable=connect_default(makeMapStateToProps$1,mapDispatchToProps$1,null,{context:StoreContext,areStatePropsEqual:isStrictEqual})(Draggable);function PrivateDraggable(o){return useRequiredContext(DroppableContext).isUsingCloneFor===o.draggableId&&!o.isClone?null:React.createElement(ConnectedDraggable,o)}function PublicDraggable(o){const e=typeof o.isDragDisabled=="boolean"?!o.isDragDisabled:!0,s=!!o.disableInteractiveElementBlocking,a=!!o.shouldRespectForcePress;return React.createElement(PrivateDraggable,_extends({},o,{isClone:!1,isEnabled:e,canDragInteractiveElements:s,shouldRespectForcePress:a}))}const isEqual$3=o=>e=>o===e,isScroll=isEqual$3("scroll"),isAuto=isEqual$3("auto"),isEither=(o,e)=>e(o.overflowX)||e(o.overflowY),isElementScrollable=o=>{const e=window.getComputedStyle(o),s={overflowX:e.overflowX,overflowY:e.overflowY};return isEither(s,isScroll)||isEither(s,isAuto)},isBodyScrollable=()=>!1,getClosestScrollable=o=>o==null?null:o===document.body?isBodyScrollable()?o:null:o===document.documentElement?null:isElementScrollable(o)?o:getClosestScrollable(o.parentElement);var getScroll=o=>({x:o.scrollLeft,y:o.scrollTop});const getIsFixed=o=>o?window.getComputedStyle(o).position==="fixed"?!0:getIsFixed(o.parentElement):!1;var getEnv=o=>{const e=getClosestScrollable(o),s=getIsFixed(o);return{closestScrollable:e,isFixedOnPage:s}},getDroppableDimension=({descriptor:o,isEnabled:e,isCombineEnabled:s,isFixedOnPage:a,direction:l,client:u,page:c,closest:d})=>{const h=(()=>{if(!d)return null;const{scrollSize:y,client:A}=d,T=getMaxScroll({scrollHeight:y.scrollHeight,scrollWidth:y.scrollWidth,height:A.paddingBox.height,width:A.paddingBox.width});return{pageMarginBox:d.page.marginBox,frameClient:A,scrollSize:y,shouldClipSubject:d.shouldClipSubject,scroll:{initial:d.scroll,current:d.scroll,max:T,diff:{value:origin,displacement:origin}}}})(),p=l==="vertical"?vertical:horizontal,m=getSubject({page:c,withPlaceholder:null,axis:p,frame:h});return{descriptor:o,isCombineEnabled:s,isFixedOnPage:a,axis:p,isEnabled:e,client:u,page:c,frame:h,subject:m}};const getClient=(o,e)=>{const s=getBox(o);if(!e||o!==e)return s;const a=s.paddingBox.top-e.scrollTop,l=s.paddingBox.left-e.scrollLeft,u=a+e.scrollHeight,c=l+e.scrollWidth,h=expand({top:a,right:c,bottom:u,left:l},s.border);return createBox({borderBox:h,margin:s.margin,border:s.border,padding:s.padding})};var getDimension=({ref:o,descriptor:e,env:s,windowScroll:a,direction:l,isDropDisabled:u,isCombineEnabled:c,shouldClipSubject:d})=>{const h=s.closestScrollable,p=getClient(o,h),m=withScroll(p,a),g=(()=>{if(!h)return null;const A=getBox(h),T={scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth};return{client:A,page:withScroll(A,a),scroll:getScroll(h),scrollSize:T,shouldClipSubject:d}})();return getDroppableDimension({descriptor:e,isEnabled:!u,isCombineEnabled:c,isFixedOnPage:s.isFixedOnPage,direction:l,client:p,page:m,closest:g})};const immediate={passive:!1},delayed={passive:!0};var getListenerOptions=o=>o.shouldPublishImmediately?immediate:delayed;const getClosestScrollableFromDrag=o=>o&&o.env.closestScrollable||null;function useDroppablePublisher(o){const e=reactExports.useRef(null),s=useRequiredContext(AppContext),a=useUniqueId("droppable"),{registry:l,marshal:u}=s,c=usePrevious(o),d=useMemo(()=>({id:o.droppableId,type:o.type,mode:o.mode}),[o.droppableId,o.mode,o.type]),h=reactExports.useRef(d),p=useMemo(()=>memoizeOne$1((k,I)=>{e.current||invariant();const P={x:k,y:I};u.updateDroppableScroll(d.id,P)}),[d.id,u]),m=useCallback(()=>{const k=e.current;return!k||!k.env.closestScrollable?origin:getScroll(k.env.closestScrollable)},[]),g=useCallback(()=>{const k=m();p(k.x,k.y)},[m,p]),y=useMemo(()=>rafSchd(g),[g]),A=useCallback(()=>{const k=e.current,I=getClosestScrollableFromDrag(k);if(k&&I||invariant(),k.scrollOptions.shouldPublishImmediately){g();return}y()},[y,g]),T=useCallback((k,I)=>{e.current&&invariant();const P=c.current,N=P.getDroppableRef();N||invariant();const L=getEnv(N),Q={ref:N,descriptor:d,env:L,scrollOptions:I};e.current=Q;const j=getDimension({ref:N,descriptor:d,env:L,windowScroll:k,direction:P.direction,isDropDisabled:P.isDropDisabled,isCombineEnabled:P.isCombineEnabled,shouldClipSubject:!P.ignoreContainerClipping}),F=L.closestScrollable;return F&&(F.setAttribute(scrollContainer.contextId,s.contextId),F.addEventListener("scroll",A,getListenerOptions(Q.scrollOptions))),j},[s.contextId,d,A,c]),E=useCallback(()=>{const k=e.current,I=getClosestScrollableFromDrag(k);return k&&I||invariant(),getScroll(I)},[]),v=useCallback(()=>{const k=e.current;k||invariant();const I=getClosestScrollableFromDrag(k);e.current=null,I&&(y.cancel(),I.removeAttribute(scrollContainer.contextId),I.removeEventListener("scroll",A,getListenerOptions(k.scrollOptions)))},[A,y]),_=useCallback(k=>{const I=e.current;I||invariant();const P=getClosestScrollableFromDrag(I);P||invariant(),P.scrollTop+=k.y,P.scrollLeft+=k.x},[]),w=useMemo(()=>({getDimensionAndWatchScroll:T,getScrollWhileDragging:E,dragStopped:v,scroll:_}),[v,T,E,_]),R=useMemo(()=>({uniqueId:a,descriptor:d,callbacks:w}),[w,d,a]);useIsomorphicLayoutEffect$1(()=>(h.current=R.descriptor,l.droppable.register(R),()=>{e.current&&v(),l.droppable.unregister(R)}),[w,d,v,R,u,l.droppable]),useIsomorphicLayoutEffect$1(()=>{e.current&&u.updateDroppableIsEnabled(h.current.id,!o.isDropDisabled)},[o.isDropDisabled,u]),useIsomorphicLayoutEffect$1(()=>{e.current&&u.updateDroppableIsCombineEnabled(h.current.id,o.isCombineEnabled)},[o.isCombineEnabled,u])}function noop$7(){}const empty$4={width:0,height:0,margin:noSpacing},getSize$2=({isAnimatingOpenOnMount:o,placeholder:e,animate:s})=>o||s==="close"?empty$4:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},getStyle$2=({isAnimatingOpenOnMount:o,placeholder:e,animate:s})=>{const a=getSize$2({isAnimatingOpenOnMount:o,placeholder:e,animate:s});return{display:e.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:s!=="none"?transitions.placeholder:null}},Placeholder$2=o=>{const e=reactExports.useRef(null),s=useCallback(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:a,onTransitionEnd:l,onClose:u,contextId:c}=o,[d,h]=reactExports.useState(o.animate==="open");reactExports.useEffect(()=>d?a!=="open"?(s(),h(!1),noop$7):e.current?noop$7:(e.current=setTimeout(()=>{e.current=null,h(!1)}),s):noop$7,[a,d,s]);const p=useCallback(g=>{g.propertyName==="height"&&(l(),a==="close"&&u())},[a,u,l]),m=getStyle$2({isAnimatingOpenOnMount:d,animate:o.animate,placeholder:o.placeholder});return React.createElement(o.placeholder.tagName,{style:m,"data-rfd-placeholder-context-id":c,onTransitionEnd:p,ref:o.innerRef})};var Placeholder$1$1=React.memo(Placeholder$2);class AnimateInOut extends React.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,s){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:s.isVisible?{isVisible:!0,data:s.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const Droppable=o=>{const e=reactExports.useContext(AppContext);e||invariant();const{contextId:s,isMovementAllowed:a}=e,l=reactExports.useRef(null),u=reactExports.useRef(null),{children:c,droppableId:d,type:h,mode:p,direction:m,ignoreContainerClipping:g,isDropDisabled:y,isCombineEnabled:A,snapshot:T,useClone:E,updateViewportMaxScroll:v,getContainerForClone:_}=o,w=useCallback(()=>l.current,[]),R=useCallback((F=null)=>{l.current=F},[]);useCallback(()=>u.current,[]);const k=useCallback((F=null)=>{u.current=F},[]),I=useCallback(()=>{a()&&v({maxScroll:getMaxWindowScroll()})},[a,v]);useDroppablePublisher({droppableId:d,type:h,mode:p,direction:m,isDropDisabled:y,isCombineEnabled:A,ignoreContainerClipping:g,getDroppableRef:w});const P=useMemo(()=>React.createElement(AnimateInOut,{on:o.placeholder,shouldAnimate:o.shouldAnimatePlaceholder},({onClose:F,data:V,animate:J})=>React.createElement(Placeholder$1$1,{placeholder:V,onClose:F,innerRef:k,animate:J,contextId:s,onTransitionEnd:I})),[s,I,o.placeholder,o.shouldAnimatePlaceholder,k]),N=useMemo(()=>({innerRef:R,placeholder:P,droppableProps:{"data-rfd-droppable-id":d,"data-rfd-droppable-context-id":s}}),[s,d,P,R]),L=E?E.dragging.draggableId:null,Q=useMemo(()=>({droppableId:d,type:h,isUsingCloneFor:L}),[d,L,h]);function j(){if(!E)return null;const{dragging:F,render:V}=E,J=React.createElement(PrivateDraggable,{draggableId:F.draggableId,index:F.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(z,Y)=>V(z,Y,F));return ReactDOM.createPortal(J,_())}return React.createElement(DroppableContext.Provider,{value:Q},c(N,T),j())};function getBody(){return document.body||invariant(),document.body}const defaultProps={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:getBody},attachDefaultPropsToOwnProps=o=>{let e={...o},s;for(s in defaultProps)o[s]===void 0&&(e={...e,[s]:defaultProps[s]});return e},isMatchingType=(o,e)=>o===e.droppable.type,getDraggable=(o,e)=>e.draggables[o.draggable.id],makeMapStateToProps=()=>{const o={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...o,shouldAnimatePlaceholder:!1},s=memoizeOne$1(u=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}})),a=memoizeOne$1((u,c,d,h,p,m)=>{const g=p.descriptor.id;if(p.descriptor.droppableId===u){const T=m?{render:m,dragging:s(p.descriptor)}:null,E={isDraggingOver:d,draggingOverWith:d?g:null,draggingFromThisWith:g,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:E,useClone:T}}if(!c)return e;if(!h)return o;const A={isDraggingOver:d,draggingOverWith:g,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:A,useClone:null}});return(u,c)=>{const d=attachDefaultPropsToOwnProps(c),h=d.droppableId,p=d.type,m=!d.isDropDisabled,g=d.renderClone;if(isDragging(u)){const y=u.critical;if(!isMatchingType(p,y))return e;const A=getDraggable(y,u.dimensions),T=whatIsDraggedOver(u.impact)===h;return a(h,m,T,T,A,g)}if(u.phase==="DROP_ANIMATING"){const y=u.completed;if(!isMatchingType(p,y.critical))return e;const A=getDraggable(y.critical,u.dimensions);return a(h,m,whatIsDraggedOverFromResult(y.result)===h,whatIsDraggedOver(y.impact)===h,A,g)}if(u.phase==="IDLE"&&u.completed&&!u.shouldFlush){const y=u.completed;if(!isMatchingType(p,y.critical))return e;const A=whatIsDraggedOver(y.impact)===h,T=!!(y.impact.at&&y.impact.at.type==="COMBINE"),E=y.critical.droppable.id===h;return A?T?o:e:E?o:e}return e}},mapDispatchToProps={updateViewportMaxScroll},ConnectedDroppable=connect_default(makeMapStateToProps,mapDispatchToProps,(o,e,s)=>({...attachDefaultPropsToOwnProps(s),...o,...e}),{context:StoreContext,areStatePropsEqual:isStrictEqual})(Droppable);var isEqual_1,hasRequiredIsEqual;function requireIsEqual(){if(hasRequiredIsEqual)return isEqual_1;hasRequiredIsEqual=1;var o=require_baseIsEqual();function e(s,a){return o(s,a)}return isEqual_1=e,isEqual_1}var isEqualExports=requireIsEqual();const isEqual$1=getDefaultExportFromCjs$1(isEqualExports);var isObjectExports=requireIsObject();const isObject=getDefaultExportFromCjs$1(isObjectExports),global$1=globalThis||void 0||self;let windowObject;typeof window<"u"?windowObject=window:typeof self<"u"?windowObject=self:windowObject=global$1;let cancelFrame=null,requestFrame=null;const TIMEOUT_DURATION=20,clearTimeoutFn=windowObject.clearTimeout,setTimeoutFn=windowObject.setTimeout,cancelAnimationFrameFn=windowObject.cancelAnimationFrame||windowObject.mozCancelAnimationFrame||windowObject.webkitCancelAnimationFrame,requestAnimationFrameFn=windowObject.requestAnimationFrame||windowObject.mozRequestAnimationFrame||windowObject.webkitRequestAnimationFrame;cancelAnimationFrameFn==null||requestAnimationFrameFn==null?(cancelFrame=clearTimeoutFn,requestFrame=function(e){return setTimeoutFn(e,TIMEOUT_DURATION)}):(cancelFrame=function([e,s]){cancelAnimationFrameFn(e),clearTimeoutFn(s)},requestFrame=function(e){const s=requestAnimationFrameFn(function(){clearTimeoutFn(a),e()}),a=setTimeoutFn(function(){cancelAnimationFrameFn(s),e()},TIMEOUT_DURATION);return[s,a]});function createDetectElementResize(o){let e,s,a,l,u,c,d;const h=typeof document<"u"&&document.attachEvent;if(!h){c=function(_){const w=_.__resizeTriggers__,R=w.firstElementChild,k=w.lastElementChild,I=R.firstElementChild;k.scrollLeft=k.scrollWidth,k.scrollTop=k.scrollHeight,I.style.width=R.offsetWidth+1+"px",I.style.height=R.offsetHeight+1+"px",R.scrollLeft=R.scrollWidth,R.scrollTop=R.scrollHeight},u=function(_){return _.offsetWidth!==_.__resizeLast__.width||_.offsetHeight!==_.__resizeLast__.height},d=function(_){if(_.target.className&&typeof _.target.className.indexOf=="function"&&_.target.className.indexOf("contract-trigger")<0&&_.target.className.indexOf("expand-trigger")<0)return;const w=this;c(this),this.__resizeRAF__&&cancelFrame(this.__resizeRAF__),this.__resizeRAF__=requestFrame(function(){u(w)&&(w.__resizeLast__.width=w.offsetWidth,w.__resizeLast__.height=w.offsetHeight,w.__resizeListeners__.forEach(function(I){I.call(w,_)}))})};let y=!1,A="";a="animationstart";const T="Webkit Moz O ms".split(" ");let E="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),v="";{const _=document.createElement("fakeelement");if(_.style.animationName!==void 0&&(y=!0),y===!1){for(let w=0;w<T.length;w++)if(_.style[T[w]+"AnimationName"]!==void 0){v=T[w],A="-"+v.toLowerCase()+"-",a=E[w],y=!0;break}}}s="resizeanim",e="@"+A+"keyframes "+s+" { from { opacity: 0; } to { opacity: 0; } } ",l=A+"animation: 1ms "+s+"; "}const p=function(y){if(!y.getElementById("detectElementResize")){const A=(e||"")+".resize-triggers { "+(l||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',T=y.head||y.getElementsByTagName("head")[0],E=y.createElement("style");E.id="detectElementResize",E.type="text/css",o!=null&&E.setAttribute("nonce",o),E.styleSheet?E.styleSheet.cssText=A:E.appendChild(y.createTextNode(A)),T.appendChild(E)}};return{addResizeListener:function(y,A){if(h)y.attachEvent("onresize",A);else{if(!y.__resizeTriggers__){const T=y.ownerDocument,E=windowObject.getComputedStyle(y);E&&E.position==="static"&&(y.style.position="relative"),p(T),y.__resizeLast__={},y.__resizeListeners__=[],(y.__resizeTriggers__=T.createElement("div")).className="resize-triggers";const v=T.createElement("div");v.className="expand-trigger",v.appendChild(T.createElement("div"));const _=T.createElement("div");_.className="contract-trigger",y.__resizeTriggers__.appendChild(v),y.__resizeTriggers__.appendChild(_),y.appendChild(y.__resizeTriggers__),c(y),y.addEventListener("scroll",d,!0),a&&(y.__resizeTriggers__.__animationListener__=function(R){R.animationName===s&&c(y)},y.__resizeTriggers__.addEventListener(a,y.__resizeTriggers__.__animationListener__))}y.__resizeListeners__.push(A)}},removeResizeListener:function(y,A){if(h)y.detachEvent("onresize",A);else if(y.__resizeListeners__.splice(y.__resizeListeners__.indexOf(A),1),!y.__resizeListeners__.length){y.removeEventListener("scroll",d,!0),y.__resizeTriggers__.__animationListener__&&(y.__resizeTriggers__.removeEventListener(a,y.__resizeTriggers__.__animationListener__),y.__resizeTriggers__.__animationListener__=null);try{y.__resizeTriggers__=!y.removeChild(y.__resizeTriggers__)}catch{}}}}}class AutoSizer extends reactExports.Component{constructor(...e){super(...e),this.state={height:this.props.defaultHeight||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._didLogDeprecationWarning=!1,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:s,disableWidth:a,onResize:l}=this.props;if(this._parentNode){const u=window.getComputedStyle(this._parentNode)||{},c=parseFloat(u.paddingLeft||"0"),d=parseFloat(u.paddingRight||"0"),h=parseFloat(u.paddingTop||"0"),p=parseFloat(u.paddingBottom||"0"),m=this._parentNode.getBoundingClientRect(),g=m.height-h-p,y=m.width-c-d;if(!s&&this.state.height!==g||!a&&this.state.width!==y){this.setState({height:g,width:y});const A=()=>{this._didLogDeprecationWarning||(this._didLogDeprecationWarning=!0,console.warn("scaledWidth and scaledHeight parameters have been deprecated; use width and height instead"))};typeof l=="function"&&l({height:g,width:y,get scaledHeight(){return A(),g},get scaledWidth(){return A(),y}})}}},this._setRef=s=>{this._autoSizer=s}}componentDidMount(){const{nonce:e}=this.props,s=this._autoSizer?this._autoSizer.parentNode:null;if(s!=null&&s.ownerDocument&&s.ownerDocument.defaultView&&s instanceof s.ownerDocument.defaultView.HTMLElement){this._parentNode=s;const a=s.ownerDocument.defaultView.ResizeObserver;a!=null?(this._resizeObserver=new a(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(s)):(this._detectElementResize=createDetectElementResize(e),this._detectElementResize.addResizeListener(s,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),this._timeoutId!==null&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:e,defaultHeight:s,defaultWidth:a,disableHeight:l=!1,disableWidth:u=!1,doNotBailOutOnEmptyChildren:c=!1,nonce:d,onResize:h,style:p={},tagName:m="div",...g}=this.props,{height:y,width:A}=this.state,T={overflow:"visible"},E={};let v=!1;return l||(y===0&&(v=!0),T.height=0,E.height=y,E.scaledHeight=y),u||(A===0&&(v=!0),T.width=0,E.width=A,E.scaledWidth=A),c&&(v=!1),reactExports.createElement(m,{ref:this._setRef,style:{...T,...p},...g},!v&&e(E))}}var safeIsNaN=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function isEqual(o,e){return!!(o===e||safeIsNaN(o)&&safeIsNaN(e))}function areInputsEqual(o,e){if(o.length!==e.length)return!1;for(var s=0;s<o.length;s++)if(!isEqual(o[s],e[s]))return!1;return!0}function memoizeOne(o,e){e===void 0&&(e=areInputsEqual);var s,a=[],l,u=!1;function c(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];return u&&s===this&&e(d,a)||(l=o.apply(this,d),u=!0,s=this,a=d),l}return c}var hasNativePerformanceNow=typeof performance=="object"&&typeof performance.now=="function",now=hasNativePerformanceNow?function(){return performance.now()}:function(){return Date.now()};function cancelTimeout(o){cancelAnimationFrame(o.id)}function requestTimeout(o,e){var s=now();function a(){now()-s>=e?o.call(null):l.id=requestAnimationFrame(a)}var l={id:requestAnimationFrame(a)};return l}var size=-1;function getScrollbarSize(o){if(o===void 0&&(o=!1),size===-1||o){var e=document.createElement("div"),s=e.style;s.width="50px",s.height="50px",s.overflow="scroll",document.body.appendChild(e),size=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return size}var cachedRTLResult=null;function getRTLOffsetType(o){if(o===void 0&&(o=!1),cachedRTLResult===null||o){var e=document.createElement("div"),s=e.style;s.width="50px",s.height="50px",s.overflow="scroll",s.direction="rtl";var a=document.createElement("div"),l=a.style;return l.width="100px",l.height="100px",e.appendChild(a),document.body.appendChild(e),e.scrollLeft>0?cachedRTLResult="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?cachedRTLResult="negative":cachedRTLResult="positive-ascending"),document.body.removeChild(e),cachedRTLResult}return cachedRTLResult}var IS_SCROLLING_DEBOUNCE_INTERVAL$1=150,defaultItemKey$1=function(e,s){return e};function createListComponent(o){var e,s=o.getItemOffset,a=o.getEstimatedTotalSize,l=o.getItemSize,u=o.getOffsetForIndexAndAlignment,c=o.getStartIndexForOffset,d=o.getStopIndexForStartIndex,h=o.initInstanceProps,p=o.shouldResetStyleCacheOnItemSizeChange,m=o.validateProps;return e=(function(g){_inheritsLoose(y,g);function y(T){var E;return E=g.call(this,T)||this,E._instanceProps=h(E.props,_assertThisInitialized(E)),E._outerRef=void 0,E._resetIsScrollingTimeoutId=null,E.state={instance:_assertThisInitialized(E),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof E.props.initialScrollOffset=="number"?E.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},E._callOnItemsRendered=void 0,E._callOnItemsRendered=memoizeOne(function(v,_,w,R){return E.props.onItemsRendered({overscanStartIndex:v,overscanStopIndex:_,visibleStartIndex:w,visibleStopIndex:R})}),E._callOnScroll=void 0,E._callOnScroll=memoizeOne(function(v,_,w){return E.props.onScroll({scrollDirection:v,scrollOffset:_,scrollUpdateWasRequested:w})}),E._getItemStyle=void 0,E._getItemStyle=function(v){var _=E.props,w=_.direction,R=_.itemSize,k=_.layout,I=E._getItemStyleCache(p&&R,p&&k,p&&w),P;if(I.hasOwnProperty(v))P=I[v];else{var N=s(E.props,v,E._instanceProps),L=l(E.props,v,E._instanceProps),Q=w==="horizontal"||k==="horizontal",j=w==="rtl",F=Q?N:0;I[v]=P={position:"absolute",left:j?void 0:F,right:j?F:void 0,top:Q?0:N,height:Q?"100%":L,width:Q?L:"100%"}}return P},E._getItemStyleCache=void 0,E._getItemStyleCache=memoizeOne(function(v,_,w){return{}}),E._onScrollHorizontal=function(v){var _=v.currentTarget,w=_.clientWidth,R=_.scrollLeft,k=_.scrollWidth;E.setState(function(I){if(I.scrollOffset===R)return null;var P=E.props.direction,N=R;if(P==="rtl")switch(getRTLOffsetType()){case"negative":N=-R;break;case"positive-descending":N=k-w-R;break}return N=Math.max(0,Math.min(N,k-w)),{isScrolling:!0,scrollDirection:I.scrollOffset<N?"forward":"backward",scrollOffset:N,scrollUpdateWasRequested:!1}},E._resetIsScrollingDebounced)},E._onScrollVertical=function(v){var _=v.currentTarget,w=_.clientHeight,R=_.scrollHeight,k=_.scrollTop;E.setState(function(I){if(I.scrollOffset===k)return null;var P=Math.max(0,Math.min(k,R-w));return{isScrolling:!0,scrollDirection:I.scrollOffset<P?"forward":"backward",scrollOffset:P,scrollUpdateWasRequested:!1}},E._resetIsScrollingDebounced)},E._outerRefSetter=function(v){var _=E.props.outerRef;E._outerRef=v,typeof _=="function"?_(v):_!=null&&typeof _=="object"&&_.hasOwnProperty("current")&&(_.current=v)},E._resetIsScrollingDebounced=function(){E._resetIsScrollingTimeoutId!==null&&cancelTimeout(E._resetIsScrollingTimeoutId),E._resetIsScrollingTimeoutId=requestTimeout(E._resetIsScrolling,IS_SCROLLING_DEBOUNCE_INTERVAL$1)},E._resetIsScrolling=function(){E._resetIsScrollingTimeoutId=null,E.setState({isScrolling:!1},function(){E._getItemStyleCache(-1,null)})},E}y.getDerivedStateFromProps=function(E,v){return validateSharedProps$1(E,v),m(E),null};var A=y.prototype;return A.scrollTo=function(E){E=Math.max(0,E),this.setState(function(v){return v.scrollOffset===E?null:{scrollDirection:v.scrollOffset<E?"forward":"backward",scrollOffset:E,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},A.scrollToItem=function(E,v){v===void 0&&(v="auto");var _=this.props,w=_.itemCount,R=_.layout,k=this.state.scrollOffset;E=Math.max(0,Math.min(E,w-1));var I=0;if(this._outerRef){var P=this._outerRef;R==="vertical"?I=P.scrollWidth>P.clientWidth?getScrollbarSize():0:I=P.scrollHeight>P.clientHeight?getScrollbarSize():0}this.scrollTo(u(this.props,E,v,k,this._instanceProps,I))},A.componentDidMount=function(){var E=this.props,v=E.direction,_=E.initialScrollOffset,w=E.layout;if(typeof _=="number"&&this._outerRef!=null){var R=this._outerRef;v==="horizontal"||w==="horizontal"?R.scrollLeft=_:R.scrollTop=_}this._callPropsCallbacks()},A.componentDidUpdate=function(){var E=this.props,v=E.direction,_=E.layout,w=this.state,R=w.scrollOffset,k=w.scrollUpdateWasRequested;if(k&&this._outerRef!=null){var I=this._outerRef;if(v==="horizontal"||_==="horizontal")if(v==="rtl")switch(getRTLOffsetType()){case"negative":I.scrollLeft=-R;break;case"positive-ascending":I.scrollLeft=R;break;default:var P=I.clientWidth,N=I.scrollWidth;I.scrollLeft=N-P-R;break}else I.scrollLeft=R;else I.scrollTop=R}this._callPropsCallbacks()},A.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&cancelTimeout(this._resetIsScrollingTimeoutId)},A.render=function(){var E=this.props,v=E.children,_=E.className,w=E.direction,R=E.height,k=E.innerRef,I=E.innerElementType,P=E.innerTagName,N=E.itemCount,L=E.itemData,Q=E.itemKey,j=Q===void 0?defaultItemKey$1:Q,F=E.layout,V=E.outerElementType,J=E.outerTagName,z=E.style,Y=E.useIsScrolling,fe=E.width,de=this.state.isScrolling,X=w==="horizontal"||F==="horizontal",he=X?this._onScrollHorizontal:this._onScrollVertical,ue=this._getRangeToRender(),G=ue[0],K=ue[1],q=[];if(N>0)for(var te=G;te<=K;te++)q.push(reactExports.createElement(v,{data:L,key:j(te,L),index:te,isScrolling:Y?de:void 0,style:this._getItemStyle(te)}));var Z=a(this.props,this._instanceProps);return reactExports.createElement(V||J||"div",{className:_,onScroll:he,ref:this._outerRefSetter,style:_extends({position:"relative",height:R,width:fe,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:w},z)},reactExports.createElement(I||P||"div",{children:q,ref:k,style:{height:X?"100%":Z,pointerEvents:de?"none":void 0,width:X?Z:"100%"}}))},A._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var E=this.props.itemCount;if(E>0){var v=this._getRangeToRender(),_=v[0],w=v[1],R=v[2],k=v[3];this._callOnItemsRendered(_,w,R,k)}}if(typeof this.props.onScroll=="function"){var I=this.state,P=I.scrollDirection,N=I.scrollOffset,L=I.scrollUpdateWasRequested;this._callOnScroll(P,N,L)}},A._getRangeToRender=function(){var E=this.props,v=E.itemCount,_=E.overscanCount,w=this.state,R=w.isScrolling,k=w.scrollDirection,I=w.scrollOffset;if(v===0)return[0,0,0,0];var P=c(this.props,I,this._instanceProps),N=d(this.props,P,I,this._instanceProps),L=!R||k==="backward"?Math.max(1,_):1,Q=!R||k==="forward"?Math.max(1,_):1;return[Math.max(0,P-L),Math.max(0,Math.min(v-1,N+Q)),P,N]},y})(reactExports.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var validateSharedProps$1=function(e,s){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,s.instance},DEFAULT_ESTIMATED_ITEM_SIZE$1=50,getItemMetadata$1=function(e,s,a){var l=e,u=l.itemSize,c=a.itemMetadataMap,d=a.lastMeasuredIndex;if(s>d){var h=0;if(d>=0){var p=c[d];h=p.offset+p.size}for(var m=d+1;m<=s;m++){var g=u(m);c[m]={offset:h,size:g},h+=g}a.lastMeasuredIndex=s}return c[s]},findNearestItem$1=function(e,s,a){var l=s.itemMetadataMap,u=s.lastMeasuredIndex,c=u>0?l[u].offset:0;return c>=a?findNearestItemBinarySearch$1(e,s,u,0,a):findNearestItemExponentialSearch$1(e,s,Math.max(0,u),a)},findNearestItemBinarySearch$1=function(e,s,a,l,u){for(;l<=a;){var c=l+Math.floor((a-l)/2),d=getItemMetadata$1(e,c,s).offset;if(d===u)return c;d<u?l=c+1:d>u&&(a=c-1)}return l>0?l-1:0},findNearestItemExponentialSearch$1=function(e,s,a,l){for(var u=e.itemCount,c=1;a<u&&getItemMetadata$1(e,a,s).offset<l;)a+=c,c*=2;return findNearestItemBinarySearch$1(e,s,Math.min(a,u-1),Math.floor(a/2),l)},getEstimatedTotalSize=function(e,s){var a=e.itemCount,l=s.itemMetadataMap,u=s.estimatedItemSize,c=s.lastMeasuredIndex,d=0;if(c>=a&&(c=a-1),c>=0){var h=l[c];d=h.offset+h.size}var p=a-c-1,m=p*u;return d+m},VariableSizeList=createListComponent({getItemOffset:function(e,s,a){return getItemMetadata$1(e,s,a).offset},getItemSize:function(e,s,a){return a.itemMetadataMap[s].size},getEstimatedTotalSize,getOffsetForIndexAndAlignment:function(e,s,a,l,u,c){var d=e.direction,h=e.height,p=e.layout,m=e.width,g=d==="horizontal"||p==="horizontal",y=g?m:h,A=getItemMetadata$1(e,s,u),T=getEstimatedTotalSize(e,u),E=Math.max(0,Math.min(T-y,A.offset)),v=Math.max(0,A.offset-y+A.size+c);switch(a==="smart"&&(l>=v-y&&l<=E+y?a="auto":a="center"),a){case"start":return E;case"end":return v;case"center":return Math.round(v+(E-v)/2);case"auto":default:return l>=v&&l<=E?l:l<v?v:E}},getStartIndexForOffset:function(e,s,a){return findNearestItem$1(e,a,s)},getStopIndexForStartIndex:function(e,s,a,l){for(var u=e.direction,c=e.height,d=e.itemCount,h=e.layout,p=e.width,m=u==="horizontal"||h==="horizontal",g=m?p:c,y=getItemMetadata$1(e,s,l),A=a+g,T=y.offset+y.size,E=s;E<d-1&&T<A;)E++,T+=getItemMetadata$1(e,E,l).size;return E},initInstanceProps:function(e,s){var a=e,l=a.estimatedItemSize,u={itemMetadataMap:{},estimatedItemSize:l||DEFAULT_ESTIMATED_ITEM_SIZE$1,lastMeasuredIndex:-1};return s.resetAfterIndex=function(c,d){d===void 0&&(d=!0),u.lastMeasuredIndex=Math.min(u.lastMeasuredIndex,c-1),s._getItemStyleCache(-1),d&&s.forceUpdate()},u},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}});const en$m={"label_clear-button":"Clear"},ru$m={"label_clear-button":""},i18n$i=addComponentKeysets({en:en$m,ru:ru$m},`${NAMESPACE$1}clear-button`),b$16=block$5("clear-button"),ICON_SIZE=16,mapTextInputSizeToButtonSize=o=>{switch(o){case"s":return"xs";case"m":return"s";case"l":return"m";case"xl":return"l";default:throw new Error(`Unknown text input size "${o}"`)}},ClearButton=o=>{const{size:e,className:s,onClick:a}=o,l=c=>{c.preventDefault()},{t:u}=i18n$i.useTranslation();return jsxRuntimeExports.jsx(Button,{size:e,className:b$16(null,s),onClick:a,onMouseDown:l,"aria-label":u("label_clear-button"),children:jsxRuntimeExports.jsx(Icon,{data:Xmark,size:ICON_SIZE})})},CONTROL_ERROR_MESSAGE_QA="control-error-message-qa",CONTROL_ERROR_ICON_QA="control-error-icon-qa",prepareAutoComplete=o=>typeof o=="boolean"?o?"on":"off":o,getInputControlState=o=>o==="invalid"?"error":void 0,errorPropsMapper=o=>{const{error:e,errorMessage:s,errorPlacement:a,validationState:l}=o;let u;typeof e=="string"&&(u=e),s&&(u=s);let c;return(l==="invalid"||e)&&(c="invalid"),{errorMessage:u,errorPlacement:a,validationState:c}},b$15=block$5("outer-additional-content"),OuterAdditionalContent=({errorMessage:o,note:e,noteId:s,errorMessageId:a})=>o||e?jsxRuntimeExports.jsxs("div",{className:b$15(),children:[o&&jsxRuntimeExports.jsx("div",{className:b$15("error"),id:a,"data-qa":CONTROL_ERROR_MESSAGE_QA,children:o}),e&&jsxRuntimeExports.jsx("div",{className:b$15("note"),id:s,children:e})]}):null,b$14=block$5("text-area"),calculateLinesByScrollHeight=o=>{const{height:e,lineHeight:s}=o,a=Number.isNaN(o.paddingTop)?0:o.paddingTop,l=Number.isNaN(o.paddingBottom)?0:o.paddingBottom;return(e-a-l)/s};function TextAreaControl(o){var V;const{name:e,id:s,tabIndex:a,autoComplete:l,placeholder:u,value:c,defaultValue:d,controlRef:h,controlProps:p,size:m,rows:g,minRows:y=1,maxRows:A,autoFocus:T,disabled:E,readOnly:v,onChange:_,onFocus:w,onBlur:R,onKeyDown:k,onKeyUp:I,onKeyPress:P}=o,N=reactExports.useRef(null),L=useForkRef(h,N),Q=Math.max(g||y,1),j=c||((V=N==null?void 0:N.current)==null?void 0:V.value),F=reactExports.useCallback(()=>{const J=N==null?void 0:N.current,z=J==null?void 0:J.parentElement;if(J&&z&&!g){const Y=getComputedStyle(J),fe=parseInt(Y.getPropertyValue("line-height"),10),de=parseInt(Y.getPropertyValue("padding-top"),10),X=parseInt(Y.getPropertyValue("padding-bottom"),10),he=((j==null?void 0:j.match(/\n/g))||[]).length+1,ue=z.style.height;z.style.height=`${z.offsetHeight}px`,J.style.height=`${fe+de+X}px`;const G=J.style.overflow;J.style.overflow="hidden";const K=calculateLinesByScrollHeight({height:J.scrollHeight,paddingTop:de,paddingBottom:X,lineHeight:fe}),q=Math.max(K,he);A&&A<q?J.style.height=`${A*fe+de+X}px`:y&&y>q?J.style.height=`${Math.min(y,A||1/0)*fe+de+X}px`:J.style.height=`${J.scrollHeight}px`,J.style.overflow=G,z.style.height=ue}},[g,A,y,j]);return useResizeObserver({ref:g?void 0:N,onResize:F}),reactExports.useEffect(()=>{F()},[F,m,c]),jsxRuntimeExports.jsx("textarea",{...p,ref:L,style:{...p.style,height:g?"auto":void 0},className:b$14("control",p.className),name:e,id:s,tabIndex:a,placeholder:u,value:c,defaultValue:d,rows:Q,autoFocus:T,autoComplete:l,onChange:_,onFocus:w,onBlur:R,onKeyDown:k,onKeyUp:I,onKeyPress:P,disabled:E??p.disabled,readOnly:v??p.readOnly})}const b$13=block$5("text-area"),TextArea=reactExports.forwardRef(function(e,s){const{view:a="normal",size:l="m",pin:u="round-round",name:c,value:d,defaultValue:h,disabled:p,readOnly:m,hasClear:g=!1,error:y,errorMessage:A,validationState:T,autoComplete:E,id:v,tabIndex:_,style:w,className:R,qa:k,controlProps:I,note:P,onUpdate:N,onChange:L}=e,{errorMessage:Q,validationState:j}=errorPropsMapper({error:y,errorMessage:A,validationState:T}),[F,V]=useControlledState(d,h??"",N),J=reactExports.useRef(null),z=useFormResetHandler({initialValue:F,onReset:V}),Y=useForkRef(e.controlRef,J,z),[fe,de]=reactExports.useState(!1),X=getInputControlState(j),he=useUniqId(),ue=j==="invalid"&&!!Q,G=!!(g&&!p&&!m&&F),K=v||he,q=useUniqId(),te=useUniqId(),Z=[I==null?void 0:I["aria-describedby"],P?te:void 0,ue?q:void 0].filter(Boolean).join(" "),ce={id:K,tabIndex:_,name:c,onChange(Ee){V(Ee.target.value),L&&L(Ee)},autoComplete:prepareAutoComplete(E),controlProps:{...I,"aria-describedby":Z||void 0,"aria-invalid":j==="invalid"||void 0}},be=Ee=>{const Se=J.current;if(Se){Se.focus();const ke=Object.create(Ee);ke.target=Se,ke.currentTarget=Se,Se.value="",L&&L(ke)}V("")};return reactExports.useEffect(()=>{const Ee=J.current;if(Ee){const Se=Ee.scrollHeight>Ee.clientHeight;fe!==Se&&de(Se)}},[F,fe]),jsxRuntimeExports.jsxs("span",{ref:s,style:w,className:b$13({view:a,size:l,disabled:p,state:X,pin:a==="clear"?void 0:u,"has-clear":G,"has-scrollbar":fe},R),"data-qa":k,children:[jsxRuntimeExports.jsxs("span",{className:b$13("content"),children:[jsxRuntimeExports.jsx(TextAreaControl,{...e,...ce,controlRef:Y}),G&&jsxRuntimeExports.jsx(ClearButton,{className:b$13("clear",{size:l}),size:mapTextInputSizeToButtonSize(l),onClick:be})]}),jsxRuntimeExports.jsx(OuterAdditionalContent,{errorMessage:ue?Q:null,errorMessageId:q,note:P,noteId:te})]})}),cnPopover=block$5("popover-legacy"),getButtonView=(o,e=!1)=>{switch(o){case"special":return e?"normal-contrast":"flat-contrast";case"announcement":return e?"normal-contrast":"outlined";default:return e?"normal":"flat"}},Buttons=({theme:o,tooltipActionButton:e,tooltipCancelButton:s})=>!e&&!s?null:jsxRuntimeExports.jsxs("div",{className:cnPopover("tooltip-buttons"),children:[e&&jsxRuntimeExports.jsx(Button,{view:getButtonView(o,!0),width:"max",onClick:e.onClick,className:cnPopover("tooltip-button"),children:e.text}),s&&jsxRuntimeExports.jsx(Button,{view:getButtonView(o,!1),width:"max",onClick:s.onClick,className:cnPopover("tooltip-button"),children:s.text})]}),Content=({secondary:o,htmlContent:e,content:s,className:a})=>!e&&!s?null:e?jsxRuntimeExports.jsx("div",{className:cnPopover("tooltip-content",{secondary:o},a),dangerouslySetInnerHTML:{__html:e}}):s?jsxRuntimeExports.jsx("div",{className:cnPopover("tooltip-content",{secondary:o},a),children:s}):null,b$12=block$5("link"),Link$1=reactExports.forwardRef(function({view:e="normal",visitable:s=!1,underline:a=!1,href:l,children:u,extraProps:c,qa:d,onClickCapture:h,...p},m){const g=reactExports.useCallback(y=>{eventBroker.publish({componentId:"Link",eventId:"click",domEvent:y}),h&&h(y)},[h]);return jsxRuntimeExports.jsx("a",{...p,...c,ref:m,href:l,rel:p.target==="_blank"&&!p.rel?"noopener noreferrer":p.rel,onClickCapture:g,className:b$12({view:e,visitable:s,underline:a},p.className),"data-qa":d,children:u})}),Links=({links:o})=>o.length===0?null:jsxRuntimeExports.jsx("div",{className:cnPopover("tooltip-links"),children:o.map((e,s)=>{const{text:a,href:l,target:u="_blank",onClick:c}=e;return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Link$1,{href:l,target:u,onClick:c,className:cnPopover("tooltip-link"),children:a}),jsxRuntimeExports.jsx("br",{})]},`link-${s}`)})}),Trigger=({open:o,openOnHover:e,disabled:s,className:a,openTooltip:l,closeTooltip:u,closedManually:c,onClick:d,children:h})=>{const p=async g=>{if(s||o&&e||!(!d||await d(g)))return;(()=>{!o?(l(),c.current=!1):(u(),c.current=!0)})()},{onKeyDown:m}=useActionHandlers(p);return typeof h=="function"?jsxRuntimeExports.jsx(reactExports.Fragment,{children:h({onClick:p,onKeyDown:m,open:o})}):jsxRuntimeExports.jsx("div",{className:a,onClick:p,onKeyDown:d?m:void 0,children:h})};var PopoverBehavior;(function(o){o.Immediate="immediate",o.Delayed="delayed",o.DelayedClosing="delayedClosing"})(PopoverBehavior||(PopoverBehavior={}));const delayByBehavior={[PopoverBehavior.Immediate]:[0,0],[PopoverBehavior.Delayed]:[300,300],[PopoverBehavior.DelayedClosing]:[0,300]},useOpen=({initialOpen:o,disabled:e,autoclosable:s,onOpenChange:a,delayOpening:l,delayClosing:u,behavior:c,shouldBeOpen:d})=>{const h=reactExports.useRef(null),p=reactExports.useRef(null),[m,g]=reactExports.useState(o),y=reactExports.useCallback(()=>{h.current&&(clearTimeout(h.current),h.current=null)},[]),A=reactExports.useCallback(()=>{p.current&&(clearTimeout(p.current),p.current=null)},[]);reactExports.useEffect(()=>()=>{y(),A()},[A,y]);const T=reactExports.useCallback(I=>{g(I),d.current=I,a==null||a(I)},[a,d]),E=reactExports.useCallback(()=>{y(),T(!0)},[T,y]),v=reactExports.useCallback(()=>{A(),T(!1)},[T,A]);reactExports.useEffect(()=>{e&&v()},[e,v]),useUpdateEffect(()=>{s&&!d.current&&v()},[s,v,d]);const[_,w]=delayByBehavior[c],R=reactExports.useCallback(()=>{h.current=setTimeout(()=>{h.current=null,E()},l??_)},[_,l,E]),k=reactExports.useCallback(()=>{p.current=setTimeout(()=>{p.current=null,v()},u??w)},[v,w,u]);return{isOpen:m,closingTimeout:p,openTooltip:E,openTooltipDelayed:R,unsetOpeningTimeout:y,closeTooltip:v,closeTooltipDelayed:k,unsetClosingTimeout:A}},Popover=reactExports.forwardRef(function({initialOpen:o=!1,disabled:e=!1,autoclosable:s=!0,openOnHover:a=!0,delayOpening:l,delayClosing:u,behavior:c=PopoverBehavior.Delayed,placement:d,offset:h={},tooltipOffset:p,tooltipClassName:m,theme:g="info",size:y="s",hasArrow:A=!0,hasClose:T=!1,className:E,children:v,title:_,content:w,htmlContent:R,contentClassName:k,links:I,forceLinksAppearance:P=!1,tooltipActionButton:N,tooltipCancelButton:L,onOpenChange:Q,onCloseClick:j,onClick:F,anchorRef:V,anchorElement:J,strategy:z,qa:Y,disablePortal:fe=!1,tooltipId:de,focusTrap:X,autoFocus:he,restoreFocusRef:ue},G){const K=useDirection(),q=reactExports.useRef(null),te=reactExports.useRef(!1),Z=reactExports.useRef(o),{isOpen:ce,closingTimeout:be,openTooltip:Ee,openTooltipDelayed:Se,unsetOpeningTimeout:ke,closeTooltip:Ae,closeTooltipDelayed:Te,unsetClosingTimeout:xe}=useOpen({initialOpen:o,disabled:e,autoclosable:s,onOpenChange:Q,delayOpening:l,delayClosing:u,behavior:c,shouldBeOpen:Z}),Pe=reactExports.useMemo(()=>d||(K==="rtl"?["left","bottom"]:["right","bottom"]),[K,d]);reactExports.useImperativeHandle(G,()=>({openTooltip:Ee,closeTooltip:Ae}),[Ee,Ae]);const Le=async Ve=>{Ae(),j==null||j(Ve)},Ue=!!_,Be=!!(V||J),Ze=`popover-${de??""}-title-${useUniqId()}`,We=jsxRuntimeExports.jsx(Popup,{id:de,role:a?"tooltip":"dialog",strategy:z,anchorElement:J,anchorRef:V||q,className:cnPopover("tooltip",{theme:g,size:y,"with-close":T,"force-links-appearance":P},m),open:ce,placement:Pe,hasArrow:A,offset:p,onClose:Be?void 0:Ae,qa:Y?`${Y}-tooltip`:"",disablePortal:fe,initialFocus:he?0:void 0,modal:X,returnFocus:ue,"aria-labelledby":_?Ze:void 0,children:jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[_&&jsxRuntimeExports.jsx("h3",{id:Ze,className:cnPopover("tooltip-title"),children:_}),jsxRuntimeExports.jsx(Content,{secondary:Ue?g!=="announcement":!1,content:w,htmlContent:R,className:k}),I&&jsxRuntimeExports.jsx(Links,{links:I}),jsxRuntimeExports.jsx(Buttons,{theme:g,tooltipActionButton:N,tooltipCancelButton:L}),T&&jsxRuntimeExports.jsx("div",{className:cnPopover("tooltip-close"),children:jsxRuntimeExports.jsx(Button,{size:"s",view:"flat-secondary",onClick:Le,"aria-label":"Close",children:jsxRuntimeExports.jsx(Icon,{data:Xmark,size:16})})})]})});if(Be)return We;const Ge=()=>{xe(),!ce&&!e&&!te.current?Se():Z.current=!0},Ye=()=>{s&&!te.current&&!be.current?(ke(),Te()):Z.current=!1,te.current=!1};return h&&(typeof h.top=="number"||h.left),jsxRuntimeExports.jsxs("div",{ref:q,className:cnPopover({disabled:e},E),onMouseEnter:a?Ge:void 0,onMouseLeave:a?Ye:void 0,onFocus:a?Ge:void 0,onBlur:a?Ye:void 0,style:{top:h.top,left:h.left,insetBlockStart:h.block,insetInlineStart:h.inline},"data-qa":Y,children:[jsxRuntimeExports.jsx(Trigger,{closeTooltip:Ae,openTooltip:Ee,open:ce,openOnHover:a,className:cnPopover("handler"),disabled:e,onClick:F,closedManually:te,children:v}),We]})});Popover.displayName="Popover";const TabsContext=reactExports.createContext({activeTabId:void 0});TabsContext.displayName="TabsContext";const LabelQa={copyButton:"copy-button",closeButton:"close-button",mainButton:"main-button"},b$11=block$5("label"),iconSizeMap={xxs:12,xs:12,s:14,m:16},Label=reactExports.forwardRef(function(e,s){const{type:a="default",theme:l="normal",size:u="xs",width:c,title:d,icon:h,children:p,onCloseClick:m,className:g,disabled:y,copyText:A,closeButtonLabel:T,copyButtonLabel:E,interactive:v=!1,value:_,onCopy:w,onClick:R,qa:k,loading:I=!1}=e,P=p!==""&&reactExports.Children.count(p)>0,N=a==="close"&&P,L=a==="copy"&&P,Q=a==="info",j=typeof R=="function",F=!!(L&&A),V=(j||F||Q||v)&&!y,J=iconSizeMap[u],z=h&&jsxRuntimeExports.jsx("div",{className:b$11("addon",{side:P?"start":void 0,type:"icon"}),children:h}),Y=P&&jsxRuntimeExports.jsxs("div",{className:b$11("text"),children:[jsxRuntimeExports.jsx("div",{className:b$11("content"),children:p}),!!_&&jsxRuntimeExports.jsxs("div",{className:b$11("value"),children:[jsxRuntimeExports.jsx("div",{className:b$11("separator"),children:":"}),jsxRuntimeExports.jsx("div",{className:b$11("key"),children:_})]})]}),fe=de=>{let X;return L?X=jsxRuntimeExports.jsx("button",{type:"button","aria-label":E||void 0,onClick:j?R:void 0,disabled:y,className:b$11("addon",{side:"end",type:"button",action:j?"click":"copy"}),"data-qa":LabelQa.copyButton,children:jsxRuntimeExports.jsx(ClipboardIcon,{status:de||"pending",size:J})}):Q?X=jsxRuntimeExports.jsx("div",{className:b$11("addon",{side:"end",type:"icon"}),children:jsxRuntimeExports.jsx(Icon,{size:J,data:CircleInfo})}):N&&(X=jsxRuntimeExports.jsx("button",{type:"button",onClick:m,"aria-label":T||void 0,disabled:y,className:b$11("addon",{side:"end",type:"button",action:"close"}),"data-qa":LabelQa.closeButton,children:jsxRuntimeExports.jsx(Icon,{size:J,data:Xmark})})),jsxRuntimeExports.jsxs("div",{ref:s,className:b$11({theme:l,size:u,width:c,interactive:V,disabled:y},g),title:d,"data-qa":k,children:[!y&&I&&jsxRuntimeExports.jsx("div",{className:b$11("animation-container")}),z,j?jsxRuntimeExports.jsx("button",{disabled:y,type:"button",onClick:R,className:b$11("main-button"),"data-qa":LabelQa.mainButton,children:Y}):Y,X]})};return F&&A&&!j?jsxRuntimeExports.jsx(CopyToClipboard,{text:A,onCopy:w,timeout:1e3,children:de=>fe(de)}):fe()}),b$10=block$5("tabs-legacy");function TabsItem({id:o,className:e,title:s,meta:a,hint:l,icon:u,counter:c,label:d,active:h,disabled:p,hasOverflow:m,extraProps:g,onClick:y,qa:A}){const{activeTabId:T}=reactExports.useContext(TabsContext),E=typeof h=="boolean"?h:T===o,v=()=>{y(o)},_=R=>{R.key===" "&&y(o)},w=reactExports.useMemo(()=>{if(l!==void 0)return l;if(typeof s=="string")return s},[l,s]);return jsxRuntimeExports.jsxs("div",{...g,role:"tab","aria-selected":E,"aria-disabled":p===!0,tabIndex:p?-1:0,className:b$10("item",{active:E,disabled:p,overflow:!!m},e),title:w,onClick:v,onKeyDown:_,"data-qa":A,children:[jsxRuntimeExports.jsxs("div",{className:b$10("item-content"),children:[u&&jsxRuntimeExports.jsx("div",{className:b$10("item-icon"),children:u}),jsxRuntimeExports.jsx("div",{className:b$10("item-title"),children:s||o}),c!==void 0&&jsxRuntimeExports.jsx("div",{className:b$10("item-counter"),children:c}),d&&jsxRuntimeExports.jsx(Label,{className:b$10("item-label"),theme:d.theme,children:d.content})]}),a&&jsxRuntimeExports.jsx("div",{className:b$10("item-meta"),children:a})]})}TabsItem.displayName="Tabs.Item";const b$$=block$5("tabs-legacy");var TabsDirection;(function(o){o.Horizontal="horizontal",o.Vertical="vertical"})(TabsDirection||(TabsDirection={}));const getActiveTabId=(o,e,s)=>{var a;if(o)return o;if(!(e||(s==null?void 0:s.length)===0))return(a=s==null?void 0:s[0])==null?void 0:a.id},emptyTabsList=[],TabsComponent=reactExports.forwardRef(({direction:o=TabsDirection.Horizontal,size:e="m",activeTab:s,allowNotSelected:a=!1,items:l=emptyTabsList,children:u,className:c,onSelectTab:d,wrapTo:h,qa:p,...m},g)=>{const y=getActiveTabId(s,a,l),A=reactExports.useMemo(()=>({activeTabId:y}),[y]),T=reactExports.useMemo(()=>{const E=v=>{d&&d(v)};return l.map((v,_)=>{const w=jsxRuntimeExports.jsx(TabsItem,{...v,onClick:E},v.id);return h?h(v,w,_):w})},[l,d,h]);return jsxRuntimeExports.jsx("div",{...filterDOMProps(m,{labelable:!0}),role:"tablist",className:b$$({direction:o,size:e},c),"data-qa":p,ref:g,children:jsxRuntimeExports.jsx(TabsContext.Provider,{value:A,children:u||T})})});TabsComponent.displayName="Tabs";const Tabs=Object.assign(TabsComponent,{Item:TabsItem}),b$_=block$5("text-input"),AdditionalContent=reactExports.forwardRef(function({placement:e,children:s,onClick:a},l){return s?jsxRuntimeExports.jsx("div",{ref:l,className:b$_("additional-content",{placement:e}),onClick:a,children:s}):null}),b$Z=block$5("text-input");function TextInputControl(o){const{controlProps:e,controlRef:s,type:a,name:l,id:u,tabIndex:c,autoComplete:d,placeholder:h,value:p,defaultValue:m,autoFocus:g,disabled:y,readOnly:A,onChange:T,onFocus:E,onBlur:v,onKeyDown:_,onKeyUp:w,onKeyPress:R}=o;return jsxRuntimeExports.jsx("input",{...e,ref:s,className:b$Z("control",{type:"input"},e.className),type:a,name:l,id:u,tabIndex:c,placeholder:h,value:p,defaultValue:m,autoFocus:g,autoComplete:d,onChange:T,onFocus:E,onBlur:v,onKeyDown:_,onKeyUp:w,onKeyPress:R,disabled:y??e.disabled,readOnly:A??e.readOnly})}const b$Y=block$5("text-input"),TextInput=reactExports.forwardRef(function(e,s){const{view:a="normal",size:l="m",pin:u="round-round",name:c,value:d,defaultValue:h,label:p,disabled:m,readOnly:g,hasClear:y=!1,error:A,errorMessage:T,errorPlacement:E="outside",validationState:v,autoComplete:_,id:w,tabIndex:R,style:k,className:I,qa:P,controlProps:N,startContent:L,endContent:Q,note:j,onUpdate:F,onChange:V}=e,{errorMessage:J,errorPlacement:z,validationState:Y}=errorPropsMapper({error:A,errorMessage:T,errorPlacement:E,validationState:v}),[fe,de]=useControlledState(d,h??"",F),X=reactExports.useRef(null),he=useFormResetHandler({initialValue:fe,onReset:de}),ue=useForkRef(e.controlRef,X,he),G=reactExports.useRef(null),K=reactExports.useRef(null),q=getInputControlState(Y),te=!!p,Z=Y==="invalid"&&!!J&&z==="outside",ce=Y==="invalid"&&!!J&&z==="inside",be=!!(y&&!m&&!g&&fe),Ee=!!L,Se=!!Q,ke=te&&!w&&!c&&typeof _>"u",Ae=useUniqId(),Te=te?w||Ae:w,xe=useElementSize(te?G:null,l),Pe=useElementSize(Ee?K:null,l),Le=useUniqId(),Ue=useUniqId(),Be=[N==null?void 0:N["aria-describedby"],j?Ue:void 0,Z?Le:void 0].filter(Boolean).join(" "),Ze={...N,style:{...N==null?void 0:N.style,...te&&xe.width?{paddingInlineStart:`${xe.width}px`}:{}},"aria-invalid":Y==="invalid"||void 0,"aria-describedby":Be||void 0},We={id:Te,tabIndex:R,name:c,onChange(Ve){de(Ve.target.value),V&&V(Ve)},autoComplete:ke?"off":prepareAutoComplete(_),controlProps:Ze},Ge=Ve=>{de("");const He=X.current;if(He){const at=Object.create(Ve);at.target=He,at.currentTarget=He,He.value="",V&&V(at)}},Ye=Ve=>{var dt,bt;const He=!Ve.currentTarget.contains(document.activeElement)&&Ve.currentTarget.contains(Ve.target),at=!!((dt=document.getSelection())!=null&&dt.toString());He&&!at&&((bt=X.current)==null||bt.focus())};return jsxRuntimeExports.jsxs("span",{ref:s,style:k,className:b$Y({view:a,size:l,disabled:m,state:q,pin:a==="clear"?void 0:u,"has-clear":be,"has-start-content":Ee,"has-end-content":Se},I),"data-qa":P,children:[jsxRuntimeExports.jsxs("span",{className:b$Y("content"),children:[Ee&&jsxRuntimeExports.jsx(AdditionalContent,{ref:K,placement:"start",onClick:Ye,children:L}),te&&jsxRuntimeExports.jsx("label",{ref:G,style:{insetInlineStart:Ee?Pe.width:void 0,maxWidth:`calc(50% - ${Pe.width}px)`},className:b$Y("label"),title:p,htmlFor:Te,children:`${p}`}),jsxRuntimeExports.jsx(TextInputControl,{...e,...We,controlRef:ue}),be&&jsxRuntimeExports.jsx(ClearButton,{size:mapTextInputSizeToButtonSize(l),onClick:Ge,className:b$Y("clear",{size:l})}),ce&&jsxRuntimeExports.jsx(Popover,{content:J,children:jsxRuntimeExports.jsx("span",{"data-qa":CONTROL_ERROR_ICON_QA,children:jsxRuntimeExports.jsx(Icon,{data:TriangleExclamation,className:b$Y("error-icon"),size:l==="s"?12:16})})}),Se&&jsxRuntimeExports.jsx(AdditionalContent,{placement:"end",onClick:Ye,children:Q})]}),jsxRuntimeExports.jsx(OuterAdditionalContent,{note:j,errorMessage:Z?J:null,noteId:Ue,errorMessageId:Le})]})}),b$X=block$5("loader");function Loader({size:o="s",className:e,qa:s}){return jsxRuntimeExports.jsxs("div",{className:b$X({size:o},e),"data-qa":s,children:[jsxRuntimeExports.jsx("div",{className:b$X("left")}),jsxRuntimeExports.jsx("div",{className:b$X("center")}),jsxRuntimeExports.jsx("div",{className:b$X("right")})]})}const b$W=block$5("list"),ListLoadingIndicator=o=>{const e=reactExports.useRef(null);return useIntersection({element:e.current,onIntersect:o==null?void 0:o.onIntersect}),jsxRuntimeExports.jsx("div",{ref:e,className:b$W("loading-indicator"),children:jsxRuntimeExports.jsx(Loader,{qa:"list-loader"})})},ListQa={ACTIVE_ITEM:"list-active-item"},listNavigationIgnoredKeys=[KeyCode.TAB];function getElementId(o,e){if(!(!o||!e))return`${o}-item-${e}`}const b$V=block$5("list"),ROLES_WITH_ARIA_SELECTED=new Set(["option","gridcell","row","tab"]),defaultRenderItem=o=>String(o);function getStyle(o,e){return e?{...o==null?void 0:o.draggableProps.style,...e}:o==null?void 0:o.draggableProps.style}const xt=class xt extends reactExports.Component{constructor(){super(...arguments);oe(this,"node",null);oe(this,"getNode",()=>this.node);oe(this,"setRef",s=>{var a;this.node=s,(a=this.props.provided)==null||a.innerRef(s)});oe(this,"onClick",s=>{this.props.onClick&&this.props.onClick(this.props.item,this.props.itemIndex,!1,s)});oe(this,"onClickCapture",s=>{xt.publishEvent({domEvent:s,eventId:"click"})});oe(this,"onMouseEnter",()=>!this.props.item.disabled&&this.props.onActivate(this.props.itemIndex))}render(){var A;const{item:s,height:a,style:l,sortable:u,sortHandleAlign:c,itemClassName:d,selected:h,active:p,role:m="listitem",isDragging:g=!1}=this.props,y={height:a,...l,right:void 0};return jsxRuntimeExports.jsxs("div",{role:m,"aria-selected":ROLES_WITH_ARIA_SELECTED.has(m)?h:void 0,"aria-disabled":s.disabled,"data-qa":p?ListQa.ACTIVE_ITEM:void 0,className:b$V("item",{sortable:u,active:p,selected:h,inactive:s.disabled,"sort-handle-align":c,dragging:g},d),...(A=this.props.provided)==null?void 0:A.draggableProps,style:getStyle(this.props.provided,y),onClick:s.disabled?void 0:this.onClick,onClickCapture:s.disabled?void 0:this.onClickCapture,onMouseEnter:this.onMouseEnter,ref:this.setRef,id:getElementId(this.props.listId,this.props.itemIndex),children:[this.renderSortIcon(),this.renderContent()]})}renderSortIcon(){var a;const{sortable:s}=this.props;return s?jsxRuntimeExports.jsx("div",{...(a=this.props.provided)==null?void 0:a.dragHandleProps,className:b$V("item-sort-icon"),children:jsxRuntimeExports.jsx(Icon,{data:Grip,size:12})}):null}renderContent(){const{renderItem:s=defaultRenderItem,item:a,active:l,itemIndex:u}=this.props;return jsxRuntimeExports.jsx("div",{className:b$V("item-content"),children:s(a,l,u)})}};oe(xt,"publishEvent",eventBroker.withEventPublisher("List"));let ListItem=xt;function getRefs(o){return Array.from({length:o}).reduce((e,s,a)=>(e[a]=reactExports.createRef(),e),{})}class SimpleContainer extends reactExports.Component{constructor(s){super(s);oe(this,"node",null);oe(this,"setRef",s=>{var a;this.node=s,(a=this.props.provided)==null||a.innerRef(s)});this.state={refsList:getRefs(s.itemCount)}}static getDerivedStateFromProps({itemCount:s},a){const l=Object.keys(a.refsList).length;return s===l?a:{refsList:getRefs(s)}}render(){const s=reactExports.Children.map(this.props.children,(a,l)=>reactExports.cloneElement(a,{ref:this.state.refsList[l]}));return jsxRuntimeExports.jsx("div",{ref:this.setRef,role:this.props.role,id:this.props.id,children:s})}scrollToItem(s){var l,u,c,d;const a=(l=this.state.refsList[s])==null?void 0:l.current;if(a&&typeof a.getNode=="function"){const h=a.getNode();h&&((c=(u=this.props).onScrollToItem)!=null&&c.call(u,h)||(d=h.scrollIntoView)==null||d.call(h,{block:"nearest"}))}}}const VariableSizeListElementType=reactExports.forwardRef(({style:o,role:e,listId:s,...a},l)=>jsxRuntimeExports.jsx("div",{ref:l,style:o,role:e,id:s,...a}));VariableSizeListElementType.displayName="VariableSizeListElementType";const createVariableSizeListElementType=(o,e)=>{const s=reactExports.forwardRef((a,l)=>jsxRuntimeExports.jsx(VariableSizeListElementType,{...a,role:o,ref:l,listId:e}));return s.displayName="VariableSizeListElementType",s},b$U=block$5("list"),DEFAULT_ITEM_HEIGHT=28,DEFAULT_PAGE_SIZE=10,listDefaultProps={items:[],itemClassName:"",filterable:!0,sortable:!1,virtualized:!0,deactivateOnLeave:!0},reorder=(o,e,s)=>{const a=Array.from(o),[l]=a.splice(e,1);return a.splice(s,0,l),a},ListContainer=reactExports.forwardRef((o,e)=>{const{role:s,listId:a,...l}=o,u=reactExports.useMemo(()=>createVariableSizeListElementType(s,a),[s,a]);return jsxRuntimeExports.jsx(VariableSizeList,{ref:e,direction:useDirection(),innerElementType:u,...l})});ListContainer.displayName="ListContainer";const Et=class Et extends reactExports.Component{constructor(){super(...arguments);oe(this,"state",{items:this.props.items,activeItem:this.props.activeItemIndex,filter:""});oe(this,"refFilter",reactExports.createRef());oe(this,"refContainer",reactExports.createRef());oe(this,"blurTimer",null);oe(this,"loadingItem",{value:"__LIST_ITEM_LOADING__",disabled:!1});oe(this,"uniqId",getUniqId());oe(this,"onKeyDown",s=>{const{activeItem:a,pageSize:l}=this.state;if(listNavigationIgnoredKeys.includes(s.key))return;const u=s.target instanceof HTMLInputElement;switch(s.key){case KeyCode.ARROW_DOWN:{this.handleKeyMove(s,1,-1);break}case KeyCode.ARROW_UP:{this.handleKeyMove(s,-1);break}case KeyCode.PAGE_DOWN:{this.handleKeyMove(s,l??DEFAULT_PAGE_SIZE);break}case KeyCode.PAGE_UP:{this.handleKeyMove(s,-(l??DEFAULT_PAGE_SIZE));break}case KeyCode.HOME:{if(u)return;this.handleKeyMove(s,this.state.items.length-(a||0));break}case KeyCode.END:{if(u)return;this.handleKeyMove(s,-(a||0)-1);break}case KeyCode.ENTER:{typeof a=="number"&&this.props.onItemClick&&this.props.onItemClick(this.state.items[a],a,!0,s);break}default:this.refFilter.current&&this.refFilter.current.focus()}});oe(this,"renderItemContent",(s,a,l)=>{const{onLoadMore:u}=this.props;return isObject(s)&&"value"in s&&s.value===this.loadingItem.value?jsxRuntimeExports.jsx(ListLoadingIndicator,{onIntersect:l===0?void 0:u}):this.props.renderItem?this.props.renderItem(s,a,l):defaultRenderItem(s)});oe(this,"renderItem",({index:s,style:a,height:l,provided:u,isDragging:c})=>{const{sortHandleAlign:d,role:h}=this.props,{items:p,activeItem:m}=this.state,g=this.getItemsWithLoading()[s],y=this.props.sortable&&p.length>1&&!this.getFilter(),A=s===m||s===this.props.activeItemIndex,T=Array.isArray(this.props.selectedItemIndex)?this.props.selectedItemIndex.includes(s):s===this.props.selectedItemIndex;return jsxRuntimeExports.jsx(ListItem,{style:a,height:l,itemIndex:s,item:g,sortable:y,sortHandleAlign:d,renderItem:this.renderItemContent,itemClassName:this.props.itemClassName,active:A,selected:T,onActivate:this.onItemActivate,onClick:this.props.onItemClick,role:h==="listbox"?"option":"listitem",listId:this.props.id??this.uniqId,provided:u,isDragging:c},s)});oe(this,"renderVirtualizedItem",({index:s,style:a})=>jsxRuntimeExports.jsx(PublicDraggable,{draggableId:String(s),index:s,children:l=>this.renderItem({index:s,style:a,provided:l})},`item-key-${s}`));oe(this,"filterItem",s=>a=>String(a).includes(s));oe(this,"scrollToIndex",s=>{const a=this.refContainer.current;a&&a.scrollToItem(s)});oe(this,"deactivate",()=>{this.blurTimer&&(this.blurTimer=null,this.props.deactivateOnLeave&&this.setState({activeItem:void 0}))});oe(this,"handleFocus",()=>{this.blurTimer&&(clearTimeout(this.blurTimer),this.blurTimer=null)});oe(this,"handleBlur",()=>{this.blurTimer||(this.blurTimer=setTimeout(this.deactivate,50))});oe(this,"onUpdateFilterInternal",s=>{const{items:a,filterItem:l=this.filterItem,onFilterEnd:u}=this.props;this.setState({filter:s,items:s?a.filter(l(s)):a},()=>{u&&u({items:this.state.items})})});oe(this,"onFilterUpdate",s=>{this.props.onFilterUpdate?this.props.onFilterUpdate(s):this.onUpdateFilterInternal(s)});oe(this,"onItemsRendered",({visibleStartIndex:s,visibleStopIndex:a})=>{this.setState({pageSize:a-s})});oe(this,"onItemActivate",s=>{this.state.sorting||this.activateItem(s,!1)});oe(this,"onMouseLeave",()=>{this.handleBlur()});oe(this,"onSortStart",()=>{this.setState({sorting:!0})});oe(this,"onSortEnd",s=>{if(!s.destination){this.setState({sorting:!1});return}if(s.source.index===s.destination.index){this.setState({sorting:!1});return}const a=s.source.index,l=s.destination.index;this.props.onSortEnd&&this.props.onSortEnd({oldIndex:a,newIndex:l});const u=reorder(this.getItems(),a,l);this.setState({activeItem:l,items:u,sorting:!1})});oe(this,"getItemHeight",s=>{const{itemHeight:a}=this.props;if(typeof a=="function"){const{items:l}=this.state;return a(l[s],s)}return a});oe(this,"getVirtualizedItemHeight",s=>this.getItemHeight(s)||DEFAULT_ITEM_HEIGHT)}static moveListElement(s,a,l){if(a!==l){const[u]=s.splice(a,1);s.splice(l,0,u)}return s}static findNextIndex(s,a,l){const u=s.length;let c=(a+u)%u;for(let d=0;d<u;d+=1){if(s[c]&&!s[c].disabled)return c;c=(c+u+l)%u}}componentDidMount(){this.activateItem(this.props.activeItemIndex,!0)}componentDidUpdate(s,a){if(!isEqual$1(this.props.items,s.items)){const l=this.getFilter();l&&!this.props.onFilterUpdate?this.onUpdateFilterInternal(l):this.setState({items:this.props.items})}this.props.activeItemIndex!==s.activeItemIndex&&this.activateItem(this.props.activeItemIndex),this.props.onChangeActive&&this.state.activeItem!==a.activeItem&&this.props.onChangeActive(this.state.activeItem)}componentWillUnmount(){this.blurTimer=null}render(){const{id:s,emptyPlaceholder:a,virtualized:l,className:u,itemsClassName:c,qa:d}=this.props,{items:h}=this.state;return jsxRuntimeExports.jsx(MobileContext.Consumer,{children:({mobile:p})=>jsxRuntimeExports.jsxs("div",{className:b$U({mobile:p},u),"data-qa":d,tabIndex:-1,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.onKeyDown,children:[this.renderFilter(),jsxRuntimeExports.jsxs("div",{id:s,className:b$U("items",{virtualized:l},c),style:this.getItemsStyle(),onMouseLeave:this.onMouseLeave,children:[this.renderItems(),h.length===0&&!!a&&jsxRuntimeExports.jsx("div",{className:b$U("empty-placeholder"),children:a})]})]})})}getItems(){return this.state.items}getItemsWithLoading(){return this.props.sortable?this.getItems():this.props.loading?[...this.state.items,this.loadingItem]:this.getItems()}getActiveItem(){return typeof this.state.activeItem=="number"?this.state.activeItem:null}activateItem(s,a=!0){this.setState({activeItem:s},()=>{typeof s=="number"&&a&&this.scrollToIndex(s)})}renderFilter(){const{size:s,filterable:a,filter:l=this.state.filter,filterPlaceholder:u,filterClassName:c="",autoFocus:d}=this.props;return a?jsxRuntimeExports.jsx("div",{className:b$U("filter",c),children:jsxRuntimeExports.jsx(TextInput,{controlRef:this.refFilter,size:s,placeholder:u,value:l,hasClear:!0,onUpdate:this.onFilterUpdate,autoFocus:d,controlProps:{role:"combobox","aria-activedescendant":getElementId(this.props.id??this.uniqId,this.state.activeItem),"aria-autocomplete":"list","aria-controls":this.props.id??this.uniqId,"aria-expanded":!0}})}):null}renderSimpleContainer(){const{sortable:s,role:a="list"}=this.props,l=this.getItemsWithLoading();return s?jsxRuntimeExports.jsx(DragDropContext,{onDragStart:this.onSortStart,onDragEnd:this.onSortEnd,children:jsxRuntimeExports.jsx(ConnectedDroppable,{droppableId:"droppable",renderClone:(u,c,d)=>this.renderItem({index:d.source.index,provided:u,isDragging:c.isDragging}),children:u=>jsxRuntimeExports.jsx(SimpleContainer,{ref:this.refContainer,itemCount:l.length,provided:u,onScrollToItem:this.props.onScrollToItem,role:a,id:this.props.id??this.uniqId,children:l.map((c,d)=>jsxRuntimeExports.jsx(PublicDraggable,{draggableId:String(d),index:d,children:(h,p)=>this.renderItem({index:d,isDragging:p.isDragging,provided:h,height:this.getItemHeight(d)})},`item-key-${d}`))})})}):jsxRuntimeExports.jsx(SimpleContainer,{itemCount:l.length,ref:this.refContainer,onScrollToItem:this.props.onScrollToItem,role:a,id:this.props.id??this.uniqId,children:l.map((u,c)=>this.renderItem({index:c,height:this.getItemHeight(c)}))})}renderVirtualizedContainer(){const{role:s="list"}=this.props,a=[...this.getItemsWithLoading()];return this.props.sortable?jsxRuntimeExports.jsx(DragDropContext,{onDragStart:this.onSortStart,onDragEnd:this.onSortEnd,children:jsxRuntimeExports.jsx(ConnectedDroppable,{droppableId:"droppable",mode:"virtual",renderClone:(l,u,c)=>this.renderItem({index:c.source.index,provided:l,isDragging:u.isDragging}),children:l=>jsxRuntimeExports.jsx(AutoSizer,{children:({width:u,height:c})=>jsxRuntimeExports.jsx(ListContainer,{ref:this.refContainer,outerRef:l.innerRef,width:u,height:c,itemSize:this.getVirtualizedItemHeight,itemData:a,itemCount:a.length,overscanCount:10,onItemsRendered:this.onItemsRendered,role:s,listId:this.props.id??this.uniqId,activeItem:this.state.activeItem,children:this.renderVirtualizedItem})})})}):jsxRuntimeExports.jsx(AutoSizer,{children:({width:l,height:u})=>jsxRuntimeExports.jsx(ListContainer,{ref:this.refContainer,width:l,height:u,itemSize:this.getVirtualizedItemHeight,itemData:a,itemCount:a.length,overscanCount:10,onItemsRendered:this.onItemsRendered,role:s,listId:this.props.id??this.uniqId,activeItem:this.state.activeItem,children:this.renderItem})})}renderItems(){return this.props.virtualized?this.renderVirtualizedContainer():this.renderSimpleContainer()}getFilter(){const{filter:s=this.state.filter}=this.props;return s}getItemsStyle(){let{itemsHeight:s}=this.props;return typeof s=="function"&&(s=s(this.state.items)),s?{height:s}:void 0}handleKeyMove(s,a,l=0){const{activeItem:u=l}=this.state;s.preventDefault();const c=this.getItemsWithLoading();this.activateItem(Et.findNextIndex(c,u+a,Math.sign(a)))}};oe(Et,"defaultProps",listDefaultProps);let List=Et;const sheetBlock=block$5("sheet"),SheetQa={VEIL:"sheet-veil"};class Point{constructor(e,s){oe(this,"x");oe(this,"y");oe(this,"timeStamp");this.x=e,this.y=s,this.timeStamp=Date.now()}}class VelocityTracker{constructor(e=5){oe(this,"pointsLen");oe(this,"points",[]);this.pointsLen=e,this.clear()}clear(){this.points=new Array(this.pointsLen)}addMovement({x:e,y:s}){this.points.pop(),this.points.unshift(new Point(e,s))}getYAcceleration(e=1){const s=this.points[0],a=this.points[e];return!s||!a?0:(s.y-a.y)/Math.pow(s.timeStamp-a.timeStamp,2)}}const TRANSITION_DURATION="0.3s",HIDE_THRESHOLD=50,ACCELERATION_Y_MAX=.08,ACCELERATION_Y_MIN=-.02,DEFAULT_MAX_CONTENT_HEIGHT_FROM_VIEWPORT_COEFFICIENT=.9,WINDOW_RESIZE_TIMEOUT=50;let hashHistory=[];class SheetContent extends reactExports.Component{constructor(){super(...arguments);oe(this,"veilRef",reactExports.createRef());oe(this,"sheetRef",reactExports.createRef());oe(this,"sheetTopRef",reactExports.createRef());oe(this,"sheetMarginBoxRef",reactExports.createRef());oe(this,"sheetScrollContainerRef",reactExports.createRef());oe(this,"velocityTracker",new VelocityTracker);oe(this,"observer",null);oe(this,"resizeWindowTimer",null);oe(this,"state",{startScrollTop:0,startY:0,deltaY:0,prevSheetHeight:0,swipeAreaTouched:!1,contentTouched:!1,veilTouched:!1,isAnimating:!1,inWindowResizeScope:!1,delayedResize:!1});oe(this,"setStyles",({status:s,deltaHeight:a=0})=>{if(!this.sheetRef.current||!this.veilRef.current)return;const l=this.sheetHeight-a,u=s==="showing"?`translate3d(0, -${l}px, 0)`:"translate3d(0, 0, 0)";let c=0;s==="showing"&&(c=a===0?1:l/this.sheetHeight),this.veilRef.current.style.opacity=String(c),this.sheetRef.current.style.transform=u,this.isPrefersReducedMotion&&(this.sheetRef.current.style.opacity=String(c),this.sheetRef.current.style.transform=`translate3d(0, -${l}px, 0)`)});oe(this,"getAvailableContentHeight",s=>{let a=DEFAULT_MAX_CONTENT_HEIGHT_FROM_VIEWPORT_COEFFICIENT;typeof this.props.maxContentHeightCoefficient=="number"&&this.props.maxContentHeightCoefficient>=0&&this.props.maxContentHeightCoefficient<=1?a=this.props.maxContentHeightCoefficient:this.props.maxContentHeightCoefficient;const l=window.innerHeight*a-this.sheetTopHeight;return this.props.alwaysFullHeight||s>=l?l:s});oe(this,"show",()=>{this.setState({isAnimating:!0},()=>{this.setStyles({status:"showing"}),this.setHash()})});oe(this,"hide",()=>{this.setState({isAnimating:!0},()=>{this.setStyles({status:"hiding"}),this.removeHash()})});oe(this,"onSwipeAreaTouchStart",s=>{this.velocityTracker.clear(),this.setState({startY:s.nativeEvent.touches[0].clientY,swipeAreaTouched:!0})});oe(this,"onContentTouchStart",s=>{!this.props.allowHideOnContentScroll||this.state.swipeAreaTouched||(this.velocityTracker.clear(),this.setState({startY:s.nativeEvent.touches[0].clientY,startScrollTop:this.sheetScrollTop,contentTouched:!0}))});oe(this,"onSwipeAriaTouchMove",s=>{const a=s.nativeEvent.touches[0].clientY-this.state.startY;this.velocityTracker.addMovement({x:s.nativeEvent.touches[0].clientX,y:s.nativeEvent.touches[0].clientY}),this.setState({deltaY:a}),!(a<=0)&&this.setStyles({status:"showing",deltaHeight:a})});oe(this,"onContentTouchMove",s=>{if(!this.props.allowHideOnContentScroll)return;if(!this.state.startY){this.onContentTouchStart(s);return}const{startScrollTop:a,swipeAreaTouched:l}=this.state;if(l||this.sheetScrollTop>0||a>0&&a!==this.sheetScrollTop)return;const u=s.nativeEvent.touches[0].clientY-this.state.startY;if(this.velocityTracker.addMovement({x:s.nativeEvent.touches[0].clientX,y:s.nativeEvent.touches[0].clientY}),u<=0){this.setState({deltaY:0});return}this.setState({deltaY:u}),this.setStyles({status:"showing",deltaHeight:u})});oe(this,"onTouchEndAction",s=>{const a=this.velocityTracker.getYAcceleration();this.sheetHeight<=s?this.props.hideSheet():s>HIDE_THRESHOLD&&a<=ACCELERATION_Y_MAX&&a>=ACCELERATION_Y_MIN||a>ACCELERATION_Y_MAX?this.hide():s!==0&&this.show()});oe(this,"onSwipeAriaTouchEnd",()=>{const{deltaY:s}=this.state;this.onTouchEndAction(s),this.setState({startY:0,deltaY:0,swipeAreaTouched:!1})});oe(this,"onContentTouchEnd",()=>{const{deltaY:s,swipeAreaTouched:a}=this.state;!this.props.allowHideOnContentScroll||a||(this.onTouchEndAction(s),this.setState({startY:0,deltaY:0,contentTouched:!1}))});oe(this,"onVeilClick",()=>{this.state.isAnimating||(this.setState({veilTouched:!0}),this.hide())});oe(this,"onVeilTransitionEnd",()=>{if(this.setState({isAnimating:!1}),this.veilOpacity==="0"){this.props.hideSheet();return}this.state.delayedResize&&(this.onResizeWindow(),this.setState({delayedResize:!1}))});oe(this,"onContentTransitionEnd",s=>{s.propertyName==="height"&&this.sheetScrollContainerRef.current&&(this.sheetScrollContainerRef.current.style.transition="none")});oe(this,"onResizeWindow",()=>{if(this.state.isAnimating){this.setState({delayedResize:!0});return}this.setState({inWindowResizeScope:!0}),this.resizeWindowTimer&&window.clearTimeout(this.resizeWindowTimer),this.resizeWindowTimer=window.setTimeout(()=>{this.onResize()},WINDOW_RESIZE_TIMEOUT)});oe(this,"onResize",()=>{if(!this.sheetRef.current||!this.sheetScrollContainerRef.current)return;const s=this.sheetContentHeight;if(s===this.state.prevSheetHeight&&!this.state.inWindowResizeScope)return;const a=this.getAvailableContentHeight(s);this.sheetScrollContainerRef.current.style.transition=this.state.prevSheetHeight>s?`height 0s ease ${TRANSITION_DURATION}`:"none",this.sheetScrollContainerRef.current.style.height=`${a}px`,this.sheetRef.current.style.transform=`translate3d(0, -${a+this.sheetTopHeight}px, 0)`,this.setState({prevSheetHeight:s,inWindowResizeScope:!1})})}componentDidMount(){this.addListeners(),this.show();const s=this.getAvailableContentHeight(this.sheetContentHeight);this.setInitialStyles(s),this.setState({prevSheetHeight:s})}componentDidUpdate(s){const{visible:a,location:l}=this.props;!s.visible&&a&&this.show(),(s.visible&&!a||this.shouldClose(s))&&this.hide(),s.location.pathname!==l.pathname&&(hashHistory=[])}componentWillUnmount(){this.removeListeners()}render(){const{content:s,contentClassName:a,swipeAreaClassName:l,hideTopBar:u,title:c}=this.props,{deltaY:d,swipeAreaTouched:h,contentTouched:p,veilTouched:m}=this.state,g={"with-transition":!d||m},y={"with-transition":g["with-transition"]},A={"without-scroll":d>0&&p||h},T={"always-full-height":this.props.alwaysFullHeight};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:this.veilRef,className:sheetBlock("veil",g),onClick:this.onVeilClick,onTransitionEnd:this.onVeilTransitionEnd,role:"presentation","data-qa":SheetQa.VEIL}),jsxRuntimeExports.jsxs("div",{ref:this.sheetRef,className:sheetBlock("sheet",y),role:"dialog","aria-modal":"true","aria-label":c,children:[!u&&jsxRuntimeExports.jsx("div",{ref:this.sheetTopRef,className:sheetBlock("sheet-top"),children:jsxRuntimeExports.jsx("div",{className:sheetBlock("sheet-top-resizer")})}),jsxRuntimeExports.jsx("div",{className:sheetBlock("sheet-swipe-area",l),onTouchStart:this.onSwipeAreaTouchStart,onTouchMove:this.onSwipeAriaTouchMove,onTouchEnd:this.onSwipeAriaTouchEnd}),jsxRuntimeExports.jsx("div",{ref:this.sheetScrollContainerRef,className:sheetBlock("sheet-scroll-container",A),onTouchStart:this.onContentTouchStart,onTouchMove:this.onContentTouchMove,onTouchEnd:this.onContentTouchEnd,onTransitionEnd:this.onContentTransitionEnd,children:jsxRuntimeExports.jsx("div",{ref:this.sheetMarginBoxRef,className:sheetBlock("sheet-margin-box",T),children:jsxRuntimeExports.jsx("div",{className:sheetBlock("sheet-margin-box-border-compensation"),children:jsxRuntimeExports.jsxs("div",{className:sheetBlock("sheet-content",a),children:[c&&jsxRuntimeExports.jsx("div",{className:sheetBlock("sheet-content-title"),children:c}),s]})})})})]})]})}get veilOpacity(){var s;return((s=this.veilRef.current)==null?void 0:s.style.opacity)||0}get sheetTopHeight(){var s;return((s=this.sheetTopRef.current)==null?void 0:s.getBoundingClientRect().height)||0}get sheetHeight(){var s;return((s=this.sheetRef.current)==null?void 0:s.getBoundingClientRect().height)||0}get sheetScrollTop(){var s;return((s=this.sheetScrollContainerRef.current)==null?void 0:s.scrollTop)||0}get sheetContentHeight(){var s;return((s=this.sheetMarginBoxRef.current)==null?void 0:s.getBoundingClientRect().height)||0}setInitialStyles(s){this.sheetScrollContainerRef.current&&this.sheetMarginBoxRef.current&&(this.sheetScrollContainerRef.current.style.height=`${s}px`)}addListeners(){window.addEventListener("resize",this.onResizeWindow),this.sheetMarginBoxRef.current&&(this.observer=new ResizeObserver(()=>{this.state.inWindowResizeScope||this.onResize()}),this.observer.observe(this.sheetMarginBoxRef.current))}removeListeners(){window.removeEventListener("resize",this.onResizeWindow),this.observer&&this.observer.disconnect()}setHash(){const{id:s,platform:a,location:l,history:u}=this.props;if(a===Platform.BROWSER)return;const c={...l,hash:s};switch(a){case Platform.IOS:l.hash&&hashHistory.push(l.hash),u.replace(c);break;case Platform.ANDROID:u.push(c);break}}removeHash(){const{id:s,platform:a,location:l,history:u}=this.props;if(!(a===Platform.BROWSER||l.hash!==`#${s}`))switch(a){case Platform.IOS:u.replace({...l,hash:hashHistory.pop()??""});break;case Platform.ANDROID:u.goBack();break}}shouldClose(s){const{id:a,platform:l,location:u,history:c}=this.props;return l!==Platform.BROWSER&&c.action==="POP"&&s.location.hash!==u.hash&&u.hash!==`#${a}`}get isPrefersReducedMotion(){return!!(window!=null&&window.matchMedia("(prefers-reduced-motion: reduce)").matches)}}oe(SheetContent,"defaultProps",{id:"sheet",allowHideOnContentScroll:!0});function withRouterWrapper(o){const e=a=>{const{useHistory:l,useLocation:u,...c}=a;return jsxRuntimeExports.jsx(o,{...c,history:l(),location:u()})},s=o.displayName||o.name||"Component";return e.displayName=`withRouterWrapper(${s})`,e}const SheetContentContainer=withMobile(withRouterWrapper(SheetContent)),Sheet=({children:o,onClose:e,visible:s,id:a,title:l,className:u,contentClassName:c,swipeAreaClassName:d,allowHideOnContentScroll:h,hideTopBar:p,maxContentHeightCoefficient:m,alwaysFullHeight:g,container:y,disablePortal:A,qa:T})=>{const[E,v]=reactExports.useState(s),[_,w]=reactExports.useState(s);!_&&s&&v(!0),s!==_&&w(s);const R=()=>{e&&e(),v(!1)};return E?jsxRuntimeExports.jsx(Portal,{container:y,disablePortal:A,children:jsxRuntimeExports.jsx(FloatingOverlay,{"data-qa":T,className:sheetBlock(null,u),lockScroll:E,style:{overflow:void 0},children:jsxRuntimeExports.jsx(SheetContentContainer,{id:a,content:o,contentClassName:c,swipeAreaClassName:d,title:l,visible:s,allowHideOnContentScroll:h,hideTopBar:p,hideSheet:R,maxContentHeightCoefficient:m,alwaysFullHeight:g})})}):null},b$T=block$5("select-empty-placeholder"),EmptyOptions=({renderEmptyOptions:o,filter:e})=>jsxRuntimeExports.jsx("div",{className:b$T({empty:!o}),children:o==null?void 0:o({filter:e})}),selectBlock=block$5("select"),selectControlBlock=block$5("select-control"),selectControlButtonBlock=block$5("select-control__button"),selectListBlock=block$5("select-list"),selectClearBlock=block$5("select-clear"),SIZE_TO_ITEM_HEIGHT={s:28,m:28,l:32,xl:36},MOBILE_ITEM_HEIGHT=32,GROUP_ITEM_MARGIN_TOP=5,BORDER_WIDTH=1,POPUP_MIN_WIDTH_IN_VIRTUALIZE_CASE=100,QUICK_SEARCH_TIMEOUT=2e3,DEFAULT_VIRTUALIZATION_THRESHOLD=50,SelectQa={LIST:"select-list",POPUP:"select-popup",SHEET:"select-sheet",CLEAR:"select-clear",FILTER_INPUT:"select-filter-input",COUNTER:"select-counter"},FLATTEN_KEY=Symbol("flatten"),label_clear$1="Clear",label_filter$1="Filter",en$l={label_clear:label_clear$1,"label_show-error-info":"Show popup with error info",label_filter:label_filter$1},label_clear="",label_filter="",ru$l={label_clear,"label_show-error-info":"     ",label_filter},COMPONENT$1="Select",i18n$h=addComponentKeysets({en:en$l,ru:ru$l},COMPONENT$1),SelectClear=o=>{const{size:e,onClick:s,onMouseEnter:a,onMouseLeave:l,renderIcon:u}=o,{t:c}=i18n$h.useTranslation(),d=u?u():jsxRuntimeExports.jsx(Icon,{className:selectClearBlock("clear"),data:Xmark});return jsxRuntimeExports.jsx("button",{className:selectClearBlock({size:e}),"aria-label":c("label_clear"),onClick:s,onMouseEnter:a,onMouseLeave:l,"data-qa":SelectQa.CLEAR,type:"button",children:d})};SelectClear.displayName="SelectClear";const b$S=block$5("select-counter");function SelectCounter({count:o,size:e,disabled:s}){return jsxRuntimeExports.jsx("div",{className:b$S({size:e}),children:jsxRuntimeExports.jsx(Text$3,{variant:e==="xl"?"body-2":"body-1",color:s?"hint":"primary",className:b$S("text"),qa:SelectQa.COUNTER,children:o})})}const SelectControl=reactExports.forwardRef((o,e)=>{const{toggleOpen:s,clearValue:a,onKeyDown:l,renderControl:u,view:c,size:d,pin:h,selectedOptionsContent:p,className:m,qa:g,label:y,placeholder:A,isErrorVisible:T,errorMessage:E,open:v,disabled:_,value:w,hasClear:R,popupId:k,selectId:I,activeIndex:P,renderCounter:N,hasCounter:L,title:Q}=o,j=!!p,F=!!(A&&!j),V=Array.isArray(w)&&w.filter(Boolean).length>0,J=useUniqId(),[z,Y]=reactExports.useState(!1),fe={open:v,size:d,pin:h,disabled:_,error:T,"has-clear":R,"no-active":z,"has-value":V},de={open:v,size:d,view:c,pin:h,disabled:_,error:T},X=reactExports.useCallback(ce=>{ce&&ce.currentTarget!==document.activeElement&&"focus"in ce.currentTarget&&ce.currentTarget.focus(),s()},[s]),he=reactExports.useCallback(()=>{Y(!0)},[]),ue=reactExports.useCallback(()=>{Y(!1)},[]),G=reactExports.useCallback(()=>{Y(!1),a()},[a]),K=()=>{if(!L)return null;const ce=w.length,be=jsxRuntimeExports.jsx(SelectCounter,{count:ce,size:d,disabled:_});return N?N(be,{count:ce,size:d,disabled:_}):be},q=ce=>{const be=w.length===0;return!R||be||_?null:jsxRuntimeExports.jsx(SelectClear,{size:d,onClick:G,onMouseEnter:he,onMouseLeave:ue,renderIcon:ce.renderIcon})},te={...filterDOMProps(o,{labelable:!0}),id:I,role:"combobox","aria-controls":v?k:void 0,"aria-haspopup":"listbox","aria-expanded":v,"aria-activedescendant":P===void 0?void 0:`${k}-item-${P}`,onClick:X,onKeyDown:l,disabled:_},{t:Z}=i18n$h.useTranslation();return u?u({onClear:a,renderClear:q,renderCounter:K,ref:e,open:v,disabled:_,triggerProps:te},{value:w}):jsxRuntimeExports.jsx(reactExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:selectControlBlock(fe),role:"group",children:[jsxRuntimeExports.jsxs("button",{ref:e,className:selectControlButtonBlock(de,m),type:"button","data-qa":g,title:Q,tabIndex:0,...te,children:[y&&jsxRuntimeExports.jsx("span",{className:selectControlBlock("label"),children:y}),F&&jsxRuntimeExports.jsx("span",{className:selectControlBlock("placeholder"),children:A}),j&&jsxRuntimeExports.jsx("span",{className:selectControlBlock("option-text"),children:p})]}),K(),q({}),E&&jsxRuntimeExports.jsx(Popover,{content:E,tooltipId:J,children:jsxRuntimeExports.jsx("button",{"aria-label":Z("label_show-error-info"),"aria-describedby":J,type:"button",className:selectControlBlock("error-icon"),children:jsxRuntimeExports.jsx(Icon,{data:TriangleExclamation,size:d==="s"?12:16})})}),jsxRuntimeExports.jsx(Icon,{className:selectControlBlock("chevron-icon",{disabled:_}),data:ChevronDown,"aria-hidden":"true"})]})})});SelectControl.displayName="SelectControl";const b$R=block$5("select-filter"),style={padding:"4px 4px 0"},SelectFilter=reactExports.forwardRef((o,e)=>{const{onChange:s,onKeyDown:a,renderFilter:l,size:u,value:c,placeholder:d,popupId:h,activeIndex:p}=o,m=reactExports.useRef(null);reactExports.useImperativeHandle(e,()=>({focus:()=>{var A;return(A=m.current)==null?void 0:A.focus({preventScroll:!0})}}),[]);const{t:g}=i18n$h.useTranslation(),y={value:c,placeholder:d,size:1,onKeyDown:a,onChange:A=>{s(A.target.value)},"aria-label":g("label_filter"),"aria-controls":h,"aria-activedescendant":p===void 0?void 0:`${h}-item-${p}`};return l?l({onChange:s,onKeyDown:a,value:c,ref:m,style,inputProps:y}):jsxRuntimeExports.jsx("div",{className:b$R(),style,children:jsxRuntimeExports.jsx(TextInput,{controlRef:m,controlProps:{className:b$R("input"),size:1,"aria-label":y["aria-label"],"aria-controls":y["aria-controls"],"aria-activedescendant":y["aria-activedescendant"]},size:u,value:c,placeholder:d,onUpdate:s,onKeyDown:a,qa:SelectQa.FILTER_INPUT})})});SelectFilter.displayName="SelectFilter";const isSelectGroupTitle=o=>!!(o&&"label"in o),getFlattenOptions=o=>{const e=o.reduce((s,a)=>("label"in a?(s.push({label:a.label,disabled:!0,data:a.data}),s.push(...a.options||[])):s.push(a),s),[]);return Object.defineProperty(e,FLATTEN_KEY,{enumerable:!1,value:{}}),e},getPopupItemHeight=o=>{const{getOptionHeight:e,getOptionGroupHeight:s,size:a,option:l,index:u,mobile:c}=o;let d=c?MOBILE_ITEM_HEIGHT:SIZE_TO_ITEM_HEIGHT[a];if(isSelectGroupTitle(l)){const h=u===0?0:GROUP_ITEM_MARGIN_TOP;return d=l.label===""?0:d,s?s(l,u):d+h}return e?e(l,u):d},getOptionsHeight=o=>{const{getOptionHeight:e,getOptionGroupHeight:s,size:a,options:l,mobile:u}=o;return l.reduce((c,d,h)=>c+getPopupItemHeight({getOptionHeight:e,getOptionGroupHeight:s,size:a,option:d,index:h,mobile:u}),0)},getOptionText=o=>typeof o.content=="string"?o.content:typeof o.children=="string"?o.children:o.text?o.text:o.value,getSelectedOptionsContent=(o,e,s)=>{if(e.length===0)return null;const a=o.filter(c=>!isSelectGroupTitle(c)),l=new Map(a.map(c=>[c.value,c])),u=e.map(c=>l.get(c)||{value:c});return s?u.map((c,d)=>jsxRuntimeExports.jsx(reactExports.Fragment,{children:s(c,d)},c.value)):u.map(c=>getOptionText(c)).join(", ")},getTypedChildrenArray=o=>reactExports.Children.toArray(o),getOptionsFromOptgroupChildren=o=>reactExports.Children.toArray(o).reduce((e,{props:s})=>("value"in s&&e.push(s),e),[]),getOptionsFromChildren=o=>getTypedChildrenArray(o).reduce((e,{props:s})=>{if("label"in s){const a=s.options||getOptionsFromOptgroupChildren(s.children);e.push({options:a,label:s.label})}return"value"in s&&e.push({...s}),e},[]),getNextQuickSearch=(o,e)=>{const s=o.length===1,a=o===KeyCode.BACKSPACE;let l="";return a&&e.length?l=e.slice(0,e.length-1):s&&(l=(e+o).trim()),l},getEscapedRegExp=o=>new RegExp(o.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),findItemIndexByQuickSearch=(o,e)=>e?e.findIndex(s=>{if(isSelectGroupTitle(s)||s.disabled)return!1;const a=getOptionText(s);return getEscapedRegExp(o).test(a)}):-1,getListItems=o=>{var e;return((e=o==null?void 0:o.current)==null?void 0:e.getItems())||[]},getActiveItem=o=>{var a;const e=getListItems(o),s=(a=o==null?void 0:o.current)==null?void 0:a.getActiveItem();return typeof s=="number"?e[s]:void 0},isOptionMatchedByFilter=(o,e)=>{const s=getOptionText(o).toLocaleLowerCase(),a=e.toLocaleLowerCase();return s.indexOf(a)!==-1},getFilteredFlattenOptions=o=>{const{options:e,filter:s,filterOption:a}=o,l=e.filter(u=>isSelectGroupTitle(u)?!0:a?a(u,s):isOptionMatchedByFilter(u,s));return l.reduce((u,c,d)=>{const h=isSelectGroupTitle(c),p=isSelectGroupTitle(u[u.length-1]),m=d===l.length-1;return h&&p&&u.pop(),(!h||h&&!m)&&u.push(c),u},[])};function scrollToItem(o){const e=o.offsetParent;if(e instanceof HTMLElement){const s=e.offsetHeight,a=e.scrollTop,l=o.offsetTop;l+o.offsetHeight>=a+s?e.scrollTo({top:l-s+o.offsetHeight}):l<=a&&e.scrollTo({top:l})}return!0}const b$Q=block$5("select-list"),GroupLabel=({option:o,renderOptionGroup:e})=>e?jsxRuntimeExports.jsx("div",{className:b$Q("group-label-custom"),children:e(o)}):jsxRuntimeExports.jsx("div",{className:b$Q("group-label",{empty:o.label===""}),children:jsxRuntimeExports.jsx("div",{className:b$Q("group-label-content"),children:o.label})}),b$P=block$5("select-list"),DefaultOption=({option:o})=>{const{content:e,children:s,disabled:a,title:l}=o;return jsxRuntimeExports.jsx("span",{title:l,className:b$P("option-default-label",{disabled:a}),children:e||s})},OptionWrap=o=>{const{renderOption:e,value:s,option:a,multiple:l}=o,u=s.indexOf(a.value)!==-1,c=e?e(a):jsxRuntimeExports.jsx(DefaultOption,{option:a});return jsxRuntimeExports.jsxs("div",{"data-qa":a.qa,className:b$P("option",{disabled:a.disabled}),children:[l&&jsxRuntimeExports.jsx(Icon,{className:b$P("tick-icon",{shown:u&&l}),data:Check}),c]})},SelectLoadingIndicator=o=>{const e=reactExports.useRef(null);return useIntersection({element:e.current,onIntersect:o==null?void 0:o.onIntersect}),jsxRuntimeExports.jsx("div",{ref:e,className:selectListBlock("loading-indicator"),children:jsxRuntimeExports.jsx(Loader,{})})},loadingOption={value:"__SELECT_LIST_ITEM_LOADING__",disabled:!0},SelectList=reactExports.forwardRef((o,e)=>{const{onOptionClick:s,renderOption:a,renderOptionGroup:l,getOptionHeight:u,getOptionGroupHeight:c,size:d,flattenOptions:h,value:p,multiple:m,virtualized:g,mobile:y,loading:A,onLoadMore:T,id:E,activeIndex:v,onChangeActive:_}=o,w=reactExports.useMemo(()=>A?[...h,loadingOption]:h,[h,A]),R=reactExports.useMemo(()=>{if(p.length===0)return[];const N=new Set(p);return h.reduce((L,Q,j)=>("value"in Q&&N.has(Q.value)&&L.push(j),L),[])},[h,p]),k=getOptionsHeight({options:w,getOptionHeight:u,getOptionGroupHeight:c,size:d,mobile:y}),I=reactExports.useCallback((N,L)=>getPopupItemHeight({getOptionHeight:u,getOptionGroupHeight:c,size:d,option:N,index:L,mobile:y}),[u,c,y,d]),P=reactExports.useCallback((N,L,Q)=>{if("label"in N){const F=l?V=>l(V,{isItemActive:L,itemHeight:I(V,Q)}):void 0;return jsxRuntimeExports.jsx(GroupLabel,{option:N,renderOptionGroup:F})}if(N.value===loadingOption.value)return jsxRuntimeExports.jsx(SelectLoadingIndicator,{onIntersect:Q===0?void 0:T});const j=a?F=>a(F,{isItemActive:L,itemHeight:I(F,Q)}):void 0;return jsxRuntimeExports.jsx(OptionWrap,{option:N,value:p,multiple:m,renderOption:j})},[a,l,p,m,I,T]);return jsxRuntimeExports.jsx(List,{ref:e,className:selectListBlock({size:d,virtualized:g,mobile:y,multiple:m}),qa:SelectQa.LIST,itemHeight:I,itemsHeight:g?k:void 0,items:w,filterable:!1,virtualized:g,renderItem:P,onItemClick:s,selectedItemIndex:R,id:E,role:"listbox",activeItemIndex:v,onChangeActive:_,deactivateOnLeave:!1,onScrollToItem:scrollToItem})});SelectList.displayName="SelectList";const adjustBorderWidth=o=>o-BORDER_WIDTH*2,getMinWidth=(o,e)=>e?o>POPUP_MIN_WIDTH_IN_VIRTUALIZE_CASE?o:POPUP_MIN_WIDTH_IN_VIRTUALIZE_CASE:adjustBorderWidth(o),getPopupWidth=(o,e,s)=>{let a=e;return typeof o=="number"?a=o:o==="fit"?a=adjustBorderWidth(e):a=getMinWidth(e,s),`${a}px`};function sameWidthMiddleware(o){const{width:e,virtualized:s}=o;return size$1({apply(a){if(typeof e!="number"&&!!a.elements.floating.style.maxWidth)return;const u=getPopupWidth(e,a.rects.reference.width,s),c={};typeof e!="number"&&e!=="fit"?(c.minWidth=u,c.width=void 0):(c.minWidth=u,c.width=u),c.maxWidth=`max(90vw, ${adjustBorderWidth(a.rects.reference.width)}px)`,Object.assign(a.elements.floating.style,c)}})}function getMiddlewares(o){return[offset$1({mainAxis:BORDER_WIDTH,crossAxis:BORDER_WIDTH}),flip({altBoundary:o.disablePortal}),shift$2({limiter:limitShift(),crossAxis:!0,padding:10,altBoundary:o.disablePortal}),sameWidthMiddleware(o)]}const b$O=block$5("select-popup"),DEFAULT_PLACEMENT=["bottom-start","bottom-end","top-start","top-end"],SelectPopup=reactExports.forwardRef(({handleClose:o,onAfterOpen:e,onAfterClose:s,width:a,open:l,placement:u=DEFAULT_PLACEMENT,controlRef:c,children:d,className:h,disablePortal:p,virtualized:m,mobile:g,id:y},A)=>g?jsxRuntimeExports.jsx(Sheet,{qa:SelectQa.SHEET,className:h,visible:!!l,onClose:o,children:d}):jsxRuntimeExports.jsx(Popup,{className:b$O(null,h),qa:SelectQa.POPUP,anchorRef:A,placement:u,open:l,onClose:o,disablePortal:p,returnFocus:c,floatingMiddlewares:getMiddlewares({width:a,disablePortal:p,virtualized:m}),id:y,onTransitionIn:e,onTransitionOutComplete:s,children:d}));SelectPopup.displayName="SelectPopup";function HiddenSelect(o){const{name:e,value:s,disabled:a,form:l,onReset:u}=o,c=useFormResetHandler({onReset:u,initialValue:s});return!e||a?null:s.length===0?jsxRuntimeExports.jsx("input",{ref:c,type:"hidden",name:e,value:s,form:l,disabled:a}):jsxRuntimeExports.jsx(reactExports.Fragment,{children:s.map((d,h)=>jsxRuntimeExports.jsx("input",{ref:h===0?c:void 0,value:d,type:"hidden",name:e,form:l,disabled:a},d))})}const useQuickSearch=o=>{const{onChange:e,open:s,disabled:a}=o,[l,u]=reactExports.useState(""),[c,d]=reactExports.useState(),h=reactExports.useCallback(m=>{if(clearTimeout(c),m){const g=window.setTimeout(()=>u(""),QUICK_SEARCH_TIMEOUT);d(g)}},[c]),p=reactExports.useCallback(m=>{m.stopPropagation();const g=getNextQuickSearch(m.key,l);l!==g&&(h(g),u(g))},[h,l]);reactExports.useEffect(()=>(s&&!a?document.addEventListener("keydown",p):!s&&!a&&u(""),()=>{s&&!a&&document.removeEventListener("keydown",p)}),[p,s,a]),reactExports.useEffect(()=>(s||clearTimeout(c),()=>clearTimeout(c)),[s,c]),reactExports.useEffect(()=>{e(l)},[e,l])};function useActiveItemIndex({options:o,value:e,open:s}){const[a,l]=reactExports.useState(()=>{if(s)return getInitialActiveItemIndex(o,e)}),[u,c]=reactExports.useState(s);return u!==s&&(c(s),s&&l(getInitialActiveItemIndex(o,e))),[s&&a!==void 0&&a<o.length&&!o[a].disabled?a:void 0,l]}function getInitialActiveItemIndex(o,e){let s=-1;return e.length>0&&(s=o.findIndex(a=>"value"in a&&e.includes(a.value)&&!a.disabled)),s===-1&&(s=o.findIndex(a=>"value"in a&&!a.disabled)),s===-1?void 0:s}function isFlattenOptions(o){return!!o[FLATTEN_KEY]}function getSelectFilteredOptions(o){if(!isFlattenOptions(o))throw Error("You should use options generated by useSelectOptions hook");return o[FLATTEN_KEY].filteredOptions}function useSelectOptions(o){const{filter:e="",filterable:s,filterOption:a}=o,l=reactExports.useMemo(()=>isFlattenOptions(o.options)?o.options:getFlattenOptions(o.options),[o.options]),u=reactExports.useMemo(()=>s?getFilteredFlattenOptions({options:l,filter:e,filterOption:a}):l,[e,s,a,l]);return l[FLATTEN_KEY].filteredOptions=u,l}const Option$1=o=>null,OptionGroup=o=>null,DEFAULT_RENDER_POPUP=({renderFilter:o,renderList:e})=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[o(),e()]}),Select=reactExports.forwardRef(function(e,s){const{onUpdate:a,onOpenChange:l,onFilterChange:u,renderControl:c,renderFilter:d,renderOption:h,renderOptionGroup:p,renderSelectedOption:m,renderEmptyOptions:g,renderPopup:y=DEFAULT_RENDER_POPUP,getOptionHeight:A,getOptionGroupHeight:T,filterOption:E,name:v,form:_,className:w,controlClassName:R,popupClassName:k,qa:I,value:P,defaultValue:N,defaultOpen:L,open:Q,label:j,placeholder:F,filterPlaceholder:V,width:J,popupWidth:z,popupPlacement:Y,error:fe,virtualizationThreshold:de=DEFAULT_VIRTUALIZATION_THRESHOLD,view:X="normal",size:he="m",pin:ue="round-round",multiple:G=!1,disabled:K=!1,filterable:q=!1,filter:te,disablePortal:Z,hasClear:ce=!1,onClose:be,id:Ee,hasCounter:Se,renderCounter:ke,title:Ae}=e,Te=useMobile(),[xe,Pe]=useControlledState(te,"",u),Le=reactExports.useRef(null),Ue=reactExports.useRef(null),Be=reactExports.useRef(null),Ze=reactExports.useRef(null),We=useForkRef(s,Ue),{value:Ge,open:Ye,toggleOpen:Ve,setValue:He,handleSelection:at,handleClearValue:dt}=useSelect({onUpdate:a,value:P,defaultValue:N,defaultOpen:L,multiple:G,open:Q,onClose:be,onOpenChange:l,disabled:K});reactExports.useEffect(()=>{!Ye&&q&&Te&&setTimeout(()=>{Pe("")},300)},[Ye,q,Pe,Te]);const bt=e.options||getOptionsFromChildren(e.children),Ct=useSelectOptions({options:bt,filter:xe,filterable:q,filterOption:E}),ht=getSelectFilteredOptions(Ct),pt=reactExports.useMemo(()=>getSelectedOptionsContent(Ct,Ge,m),[Ct,Ge,m]),ae=ht.length>=de,{errorMessage:H,errorPlacement:W,validationState:me}=errorPropsMapper({error:fe,errorMessage:e.errorMessage,errorPlacement:e.errorPlacement||"outside",validationState:e.validationState}),_e=useUniqId(),De=me==="invalid",ye=De&&!!H&&W==="outside",we=De&&!!H&&W==="inside",et=reactExports.useCallback(mt=>{var $t,xn;if(!(!mt||mt!=null&&mt.disabled||"label"in mt)){if(G){const fi=($t=Ze==null?void 0:Ze.current)==null?void 0:$t.getActiveItem();Te||(xn=Be.current)==null||xn.focus(),typeof fi=="number"&&setTimeout(()=>{var kr;(kr=Ze==null?void 0:Ze.current)==null||kr.activateItem(fi,!0)},50)}at(mt)}},[at,Te,G]),ot=reactExports.useCallback(mt=>{var $t;[KeyCode.ENTER,KeyCode.SPACEBAR].includes(mt.key)&&Ye&&(mt.preventDefault(),mt.key===KeyCode.SPACEBAR&&et(getActiveItem(Ze))),[KeyCode.ARROW_DOWN,KeyCode.ARROW_UP].includes(mt.key)&&!Ye&&(mt.preventDefault(),Ve()),mt.key===KeyCode.ESCAPE&&Ye&&Ve(!1),($t=Ze==null?void 0:Ze.current)==null||$t.onKeyDown(mt)},[et,Ye,Ve]),st=reactExports.useCallback(mt=>{var $t;($t=Ze==null?void 0:Ze.current)==null||$t.onKeyDown(mt),mt.key===KeyCode.ENTER&&Ye&&(mt.preventDefault(),et(getActiveItem(Ze)))},[et,Ye]),Ke=reactExports.useCallback(mt=>{var $t;if(mt){const xn=findItemIndexByQuickSearch(mt,getListItems(Ze));typeof xn=="number"&&xn!==-1&&(($t=Ze==null?void 0:Ze.current)==null||$t.activateItem(xn,!0))}},[]);useQuickSearch({onChange:Ke,open:Ye,disabled:q});const zt={...J==="max"&&{width:J}},An={};typeof J=="number"&&(An.width=J);const Mt=reactExports.useCallback(()=>Ve(!1),[Ve]),{onFocus:On,onBlur:$n}=e,{focusWithinProps:Bn}=useFocusWithin({onFocusWithin:On,onBlurWithin:reactExports.useCallback(mt=>{$n==null||$n(mt),Te||Mt()},[Mt,Te,$n])}),Vt=useUniqId(),Cr=Ee??Vt,Cn=`select-popup-${Cr}`,[Yn,Tn]=useActiveItemIndex({options:ht,open:Ye,value:Ge}),di=()=>q?jsxRuntimeExports.jsx(SelectFilter,{ref:Be,size:he,value:xe,placeholder:V,onChange:Pe,onKeyDown:st,renderFilter:d,popupId:Cn,activeIndex:Yn}):null,wn=()=>ht.length||e.loading?jsxRuntimeExports.jsx(SelectList,{ref:Ze,size:he,value:Ge,mobile:Te,flattenOptions:ht,multiple:G,virtualized:ae,onOptionClick:et,renderOption:h,renderOptionGroup:p,getOptionHeight:A,getOptionGroupHeight:T,loading:e.loading,onLoadMore:e.onLoadMore,id:Cn,activeIndex:Yn,onChangeActive:Tn}):jsxRuntimeExports.jsx(EmptyOptions,{filter:xe,renderEmptyOptions:g});return jsxRuntimeExports.jsxs("div",{ref:Le,className:selectBlock(zt,w),...Bn,style:An,tabIndex:-1,children:[jsxRuntimeExports.jsx(SelectControl,{...filterDOMProps(e,{labelable:!0}),toggleOpen:Ve,hasClear:ce,clearValue:dt,ref:We,className:R,qa:I,view:X,size:he,pin:ue,label:j,placeholder:F,selectedOptionsContent:pt,isErrorVisible:De,errorMessage:we?H:void 0,open:Ye,disabled:K,onKeyDown:ot,renderControl:c,value:Ge,popupId:Cn,selectId:Cr,activeIndex:Yn,hasCounter:G&&Se,renderCounter:ke,title:Ae}),jsxRuntimeExports.jsx(SelectPopup,{ref:Le,className:k,controlRef:Ue,width:z,open:Ye,handleClose:Mt,disablePortal:Z,virtualized:ae,mobile:Te,placement:Y,onAfterOpen:q?()=>{var mt;(mt=Be.current)==null||mt.focus()}:void 0,onAfterClose:q&&!te?()=>{Pe("")}:void 0,children:y({renderFilter:di,renderList:wn})}),jsxRuntimeExports.jsx(OuterAdditionalContent,{errorMessage:ye?H:null,errorMessageId:_e}),jsxRuntimeExports.jsx(HiddenSelect,{name:v,value:Ge,disabled:K,form:_,onReset:He})]})});Select.Option=Option$1,Select.OptionGroup=OptionGroup;const b$N=block$5("skeleton");function Skeleton({className:o,style:e,qa:s,animation:a="gradient"}){return jsxRuntimeExports.jsx("div",{className:b$N({animation:a},o),style:e,"data-qa":s})}const b$M=block$5("spin"),Spin=reactExports.forwardRef(function(e,s){const{size:a="m",style:l,className:u,qa:c}=e;return jsxRuntimeExports.jsx("div",{ref:s,style:l,className:b$M({size:a},u),"data-qa":c,children:jsxRuntimeExports.jsx("div",{className:b$M("inner")})})});var _isFlattenable,hasRequired_isFlattenable;function require_isFlattenable(){if(hasRequired_isFlattenable)return _isFlattenable;hasRequired_isFlattenable=1;var o=require_Symbol(),e=requireIsArguments(),s=requireIsArray(),a=o?o.isConcatSpreadable:void 0;function l(u){return s(u)||e(u)||!!(a&&u&&u[a])}return _isFlattenable=l,_isFlattenable}var _baseFlatten,hasRequired_baseFlatten;function require_baseFlatten(){if(hasRequired_baseFlatten)return _baseFlatten;hasRequired_baseFlatten=1;var o=require_arrayPush(),e=require_isFlattenable();function s(a,l,u,c,d){var h=-1,p=a.length;for(u||(u=e),d||(d=[]);++h<p;){var m=a[h];l>0&&u(m)?l>1?s(m,l-1,u,c,d):o(d,m):c||(d[d.length]=m)}return d}return _baseFlatten=s,_baseFlatten}var debounceExports=requireDebounce();const debounceFn=getDefaultExportFromCjs$1(debounceExports);let EventEmitter$1=class{constructor(){oe(this,"listeners");this.listeners={}}destroy(){this.listeners={}}subscribe(e,s){return typeof s=="function"&&(this.listeners[e]=(this.listeners[e]||[]).concat(s)),()=>{var a;this.listeners[e]=(a=this.listeners[e])==null?void 0:a.filter(l=>s!==l)}}notify(e,s){var a;if(!((a=this.listeners[e])!=null&&a.length))return!1;for(const l of this.listeners[e])l(...s);return!0}};function getToastIndex(o,e){return o.findIndex(s=>s.name===e)}function hasToast(o,e){return getToastIndex(o,e)!==-1}function removeToast(o,e){return hasToast(o,e)?o.filter(s=>s.name!==e):o}class Toaster{constructor(){oe(this,"hasUndelivered",!1);oe(this,"toasts",[]);oe(this,"eventEmitter",new EventEmitter$1)}destroy(){this.removeAll(),this.eventEmitter.destroy()}add(e){let s=this.toasts;hasToast(s,e.name)&&(s=removeToast(s,e.name)),this.toasts=[...s,{...e,addedAt:Date.now(),ref:{current:null}}],this.notify()}remove(e){this.toasts=removeToast(this.toasts,e),this.notify()}removeAll(){this.toasts=[],this.notify()}update(e,s){if(!hasToast(this.toasts,e))return;const a=getToastIndex(this.toasts,e);this.toasts=[...this.toasts.slice(0,a),{...this.toasts[a],...s},...this.toasts.slice(a+1)],this.notify()}has(e){return hasToast(this.toasts,e)}subscribe(e){const s=this.eventEmitter.subscribe("toasts-change",e);return this.hasUndelivered&&this.notify(),s}notify(){const e=this.eventEmitter.notify("toasts-change",[this.toasts]);this.hasUndelivered=!e}}const en$k={"label_close-button":"Close"},ru$k={"label_close-button":""},COMPONENT="Toaster",i18n$g=addComponentKeysets({en:en$k,ru:ru$k},COMPONENT),b$L=block$5("toast"),DEFAULT_TIMEOUT=5e3,TITLE_ICONS={normal:null,info:CircleInfo,success:CircleCheck,warning:TriangleExclamation,danger:TriangleExclamation,utility:Thunderbolt};function renderActions({actions:o,onClose:e}){let s;if(Array.isArray(o)){if(s=o.map(({label:a,onClick:l,view:u="outlined",removeAfterClick:c=!0},d)=>{const h=()=>{l(),c&&e()};return jsxRuntimeExports.jsx(Button,{onClick:h,type:"button",size:"l",view:u,width:"auto",children:a},`${a}__${d}`)}),!o.length)return null}else if(s=o==null?void 0:o(),!s)return null;return jsxRuntimeExports.jsx("div",{className:b$L("actions"),children:s})}function renderIconByType({theme:o}){return!o||!TITLE_ICONS[o]?null:jsxRuntimeExports.jsx(Icon,{data:TITLE_ICONS[o],size:20,className:b$L("icon",{[o]:!0})})}const Toast=reactExports.forwardRef(function(e,s){const{name:a,content:l,actions:u,title:c,className:d,theme:h="normal",renderIcon:p,autoHiding:m=DEFAULT_TIMEOUT,isClosable:g=!0,mobile:y=!1,onClose:A,removeCallback:T}=e,E=reactExports.useCallback(()=>{T(a),A&&A()},[T,A,a]),_=useCloseOnTimeout({onClose:E,timeout:typeof m=="number"?m:void 0}),w={mobile:y,theme:h},R=!!c,k=!!l,{t:I}=i18n$g.useTranslation(),P=p?p(e):renderIconByType({theme:h});return jsxRuntimeExports.jsxs("div",{ref:s,className:b$L(w,d),..._,"data-toast":!0,children:[P&&jsxRuntimeExports.jsx("div",{className:b$L("icon-container"),children:P}),jsxRuntimeExports.jsxs("div",{className:b$L("container"),children:[R&&jsxRuntimeExports.jsx("h3",{className:b$L("title"),children:c}),g&&jsxRuntimeExports.jsx(Button,{size:"s",view:"flat",className:b$L("btn-close"),onClick:E,"aria-label":I("label_close-button"),children:jsxRuntimeExports.jsx(Icon,{data:Xmark})}),k&&jsxRuntimeExports.jsx("div",{className:b$L("content",{"without-title":!R}),children:l}),renderActions({actions:u,onClose:E})]})]})}),ToasterContext=reactExports.createContext(null);ToasterContext.displayName="ToasterContext";function useToaster(){const o=reactExports.useContext(ToasterContext);if(o===null)throw new Error("Toaster: `useToaster` hook is used out of context");return reactExports.useMemo(()=>({add:o.add.bind(o),remove:o.remove.bind(o),removeAll:o.removeAll.bind(o),update:o.update.bind(o),has:o.has.bind(o)}),[o])}const ToastsContext=reactExports.createContext([]);ToastsContext.displayName="ToastsContext";const desktopTransitionClassNames=getCSSTransitionClassNames(block$5("toast-animation-desktop")),mobileTransitionClassNames=getCSSTransitionClassNames(block$5("toast-animation-mobile"));function ToastList(o){const{toasts:e,mobile:s,removeCallback:a}=o;return jsxRuntimeExports.jsx(TransitionGroup,{component:null,children:e.map(l=>jsxRuntimeExports.jsx(CSSTransition,{nodeRef:l.ref,classNames:s?mobileTransitionClassNames:desktopTransitionClassNames,addEndListener:u=>{var c,d;return(d=(c=l.ref)==null?void 0:c.current)==null?void 0:d.addEventListener("animationend",u)},onEnter:()=>updateToastHeightCssProperty(l),onExit:()=>updateToastHeightCssProperty(l),children:jsxRuntimeExports.jsx(Toast,{...l,ref:l.ref,mobile:s,removeCallback:a})},`${l.name}_${l.addedAt}`))})}function updateToastHeightCssProperty(o){var e;(e=o.ref)!=null&&e.current&&o.ref.current.style.setProperty("--_--item-height",`${o.ref.current.offsetHeight}px`)}const b$K=block$5("toaster");function ToasterComponent({className:o,mobile:e,hasPortal:s=!0}){const a=useMobile(),{remove:l}=useToaster(),u=reactExports.useContext(ToastsContext),c=jsxRuntimeExports.jsx(ToastList,{toasts:u,removeCallback:l,mobile:e??a});return s?jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx("div",{className:b$K({mobile:e??a},o),"aria-live":"assertive",children:c})}):c}ToasterComponent.displayName="ToasterComponent";const ToasterProvider=({toaster:o,children:e})=>{const[s,a]=reactExports.useState([]);return reactExports.useEffect(()=>{const l=o.subscribe(a);return()=>{l()}},[o]),jsxRuntimeExports.jsx(ToasterContext.Provider,{value:o,children:jsxRuntimeExports.jsx(ToastsContext.Provider,{value:s,children:e})})};ToasterProvider.displayName="ToasterProvider";const toaster=new Toaster;function OrderedMap(o){this.content=o}OrderedMap.prototype={constructor:OrderedMap,find:function(o){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===o)return e;return-1},get:function(o){var e=this.find(o);return e==-1?void 0:this.content[e+1]},update:function(o,e,s){var a=s&&s!=o?this.remove(s):this,l=a.find(o),u=a.content.slice();return l==-1?u.push(s||o,e):(u[l+1]=e,s&&(u[l]=s)),new OrderedMap(u)},remove:function(o){var e=this.find(o);if(e==-1)return this;var s=this.content.slice();return s.splice(e,2),new OrderedMap(s)},addToStart:function(o,e){return new OrderedMap([o,e].concat(this.remove(o).content))},addToEnd:function(o,e){var s=this.remove(o).content.slice();return s.push(o,e),new OrderedMap(s)},addBefore:function(o,e,s){var a=this.remove(e),l=a.content.slice(),u=a.find(o);return l.splice(u==-1?l.length:u,0,e,s),new OrderedMap(l)},forEach:function(o){for(var e=0;e<this.content.length;e+=2)o(this.content[e],this.content[e+1])},prepend:function(o){return o=OrderedMap.from(o),o.size?new OrderedMap(o.content.concat(this.subtract(o).content)):this},append:function(o){return o=OrderedMap.from(o),o.size?new OrderedMap(this.subtract(o).content.concat(o.content)):this},subtract:function(o){var e=this;o=OrderedMap.from(o);for(var s=0;s<o.content.length;s+=2)e=e.remove(o.content[s]);return e},toObject:function(){var o={};return this.forEach(function(e,s){o[e]=s}),o},get size(){return this.content.length>>1}},OrderedMap.from=function(o){if(o instanceof OrderedMap)return o;var e=[];if(o)for(var s in o)e.push(s,o[s]);return new OrderedMap(e)};function findDiffStart(o,e,s){for(let a=0;;a++){if(a==o.childCount||a==e.childCount)return o.childCount==e.childCount?null:s;let l=o.child(a),u=e.child(a);if(l==u){s+=l.nodeSize;continue}if(!l.sameMarkup(u))return s;if(l.isText&&l.text!=u.text){for(let c=0;l.text[c]==u.text[c];c++)s++;return s}if(l.content.size||u.content.size){let c=findDiffStart(l.content,u.content,s+1);if(c!=null)return c}s+=l.nodeSize}}function findDiffEnd(o,e,s,a){for(let l=o.childCount,u=e.childCount;;){if(l==0||u==0)return l==u?null:{a:s,b:a};let c=o.child(--l),d=e.child(--u),h=c.nodeSize;if(c==d){s-=h,a-=h;continue}if(!c.sameMarkup(d))return{a:s,b:a};if(c.isText&&c.text!=d.text){let p=0,m=Math.min(c.text.length,d.text.length);for(;p<m&&c.text[c.text.length-p-1]==d.text[d.text.length-p-1];)p++,s--,a--;return{a:s,b:a}}if(c.content.size||d.content.size){let p=findDiffEnd(c.content,d.content,s-1,a-1);if(p)return p}s-=h,a-=h}}class Fragment{constructor(e,s){if(this.content=e,this.size=s||0,s==null)for(let a=0;a<e.length;a++)this.size+=e[a].nodeSize}nodesBetween(e,s,a,l=0,u){for(let c=0,d=0;d<s;c++){let h=this.content[c],p=d+h.nodeSize;if(p>e&&a(h,l+d,u||null,c)!==!1&&h.content.size){let m=d+1;h.nodesBetween(Math.max(0,e-m),Math.min(h.content.size,s-m),a,l+m)}d=p}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,s,a,l){let u="",c=!0;return this.nodesBetween(e,s,(d,h)=>{let p=d.isText?d.text.slice(Math.max(e,h)-h,s-h):d.isLeaf?l?typeof l=="function"?l(d):l:d.type.spec.leafText?d.type.spec.leafText(d):"":"";d.isBlock&&(d.isLeaf&&p||d.isTextblock)&&a&&(c?c=!1:u+=a),u+=p},0),u}append(e){if(!e.size)return this;if(!this.size)return e;let s=this.lastChild,a=e.firstChild,l=this.content.slice(),u=0;for(s.isText&&s.sameMarkup(a)&&(l[l.length-1]=s.withText(s.text+a.text),u=1);u<e.content.length;u++)l.push(e.content[u]);return new Fragment(l,this.size+e.size)}cut(e,s=this.size){if(e==0&&s==this.size)return this;let a=[],l=0;if(s>e)for(let u=0,c=0;c<s;u++){let d=this.content[u],h=c+d.nodeSize;h>e&&((c<e||h>s)&&(d.isText?d=d.cut(Math.max(0,e-c),Math.min(d.text.length,s-c)):d=d.cut(Math.max(0,e-c-1),Math.min(d.content.size,s-c-1))),a.push(d),l+=d.nodeSize),c=h}return new Fragment(a,l)}cutByIndex(e,s){return e==s?Fragment.empty:e==0&&s==this.content.length?this:new Fragment(this.content.slice(e,s))}replaceChild(e,s){let a=this.content[e];if(a==s)return this;let l=this.content.slice(),u=this.size+s.nodeSize-a.nodeSize;return l[e]=s,new Fragment(l,u)}addToStart(e){return new Fragment([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Fragment(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let s=0;s<this.content.length;s++)if(!this.content[s].eq(e.content[s]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let s=this.content[e];if(!s)throw new RangeError("Index "+e+" out of range for "+this);return s}maybeChild(e){return this.content[e]||null}forEach(e){for(let s=0,a=0;s<this.content.length;s++){let l=this.content[s];e(l,a,s),a+=l.nodeSize}}findDiffStart(e,s=0){return findDiffStart(this,e,s)}findDiffEnd(e,s=this.size,a=e.size){return findDiffEnd(this,e,s,a)}findIndex(e){if(e==0)return retIndex(0,e);if(e==this.size)return retIndex(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let s=0,a=0;;s++){let l=this.child(s),u=a+l.nodeSize;if(u>=e)return u==e?retIndex(s+1,u):retIndex(s,a);a=u}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,s){if(!s)return Fragment.empty;if(!Array.isArray(s))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(s.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Fragment.empty;let s,a=0;for(let l=0;l<e.length;l++){let u=e[l];a+=u.nodeSize,l&&u.isText&&e[l-1].sameMarkup(u)?(s||(s=e.slice(0,l)),s[s.length-1]=u.withText(s[s.length-1].text+u.text)):s&&s.push(u)}return new Fragment(s||e,a)}static from(e){if(!e)return Fragment.empty;if(e instanceof Fragment)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Fragment([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(o,e){return found.index=o,found.offset=e,found}function compareDeep(o,e){if(o===e)return!0;if(!(o&&typeof o=="object")||!(e&&typeof e=="object"))return!1;let s=Array.isArray(o);if(Array.isArray(e)!=s)return!1;if(s){if(o.length!=e.length)return!1;for(let a=0;a<o.length;a++)if(!compareDeep(o[a],e[a]))return!1}else{for(let a in o)if(!(a in e)||!compareDeep(o[a],e[a]))return!1;for(let a in e)if(!(a in o))return!1}return!0}let Mark$1=class Xu{constructor(e,s){this.type=e,this.attrs=s}addToSet(e){let s,a=!1;for(let l=0;l<e.length;l++){let u=e[l];if(this.eq(u))return e;if(this.type.excludes(u.type))s||(s=e.slice(0,l));else{if(u.type.excludes(this.type))return e;!a&&u.type.rank>this.type.rank&&(s||(s=e.slice(0,l)),s.push(this),a=!0),s&&s.push(u)}}return s||(s=e.slice()),a||s.push(this),s}removeFromSet(e){for(let s=0;s<e.length;s++)if(this.eq(e[s]))return e.slice(0,s).concat(e.slice(s+1));return e}isInSet(e){for(let s=0;s<e.length;s++)if(this.eq(e[s]))return!0;return!1}eq(e){return this==e||this.type==e.type&&compareDeep(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let s in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,s){if(!s)throw new RangeError("Invalid input for Mark.fromJSON");let a=e.marks[s.type];if(!a)throw new RangeError(`There is no mark type ${s.type} in this schema`);let l=a.create(s.attrs);return a.checkAttrs(l.attrs),l}static sameSet(e,s){if(e==s)return!0;if(e.length!=s.length)return!1;for(let a=0;a<e.length;a++)if(!e[a].eq(s[a]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Xu.none;if(e instanceof Xu)return[e];let s=e.slice();return s.sort((a,l)=>a.type.rank-l.type.rank),s}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(e,s,a){this.content=e,this.openStart=s,this.openEnd=a}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,s){let a=insertInto(this.content,e+this.openStart,s);return a&&new Slice(a,this.openStart,this.openEnd)}removeBetween(e,s){return new Slice(removeRange(this.content,e+this.openStart,s+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,s){if(!s)return Slice.empty;let a=s.openStart||0,l=s.openEnd||0;if(typeof a!="number"||typeof l!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(e,s.content),a,l)}static maxOpen(e,s=!0){let a=0,l=0;for(let u=e.firstChild;u&&!u.isLeaf&&(s||!u.type.spec.isolating);u=u.firstChild)a++;for(let u=e.lastChild;u&&!u.isLeaf&&(s||!u.type.spec.isolating);u=u.lastChild)l++;return new Slice(e,a,l)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(o,e,s){let{index:a,offset:l}=o.findIndex(e),u=o.maybeChild(a),{index:c,offset:d}=o.findIndex(s);if(l==e||u.isText){if(d!=s&&!o.child(c).isText)throw new RangeError("Removing non-flat range");return o.cut(0,e).append(o.cut(s))}if(a!=c)throw new RangeError("Removing non-flat range");return o.replaceChild(a,u.copy(removeRange(u.content,e-l-1,s-l-1)))}function insertInto(o,e,s,a){let{index:l,offset:u}=o.findIndex(e),c=o.maybeChild(l);if(u==e||c.isText)return a&&!a.canReplace(l,l,s)?null:o.cut(0,e).append(s).append(o.cut(e));let d=insertInto(c.content,e-u-1,s,c);return d&&o.replaceChild(l,c.copy(d))}function replace$4(o,e,s){if(s.openStart>o.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(o.depth-s.openStart!=e.depth-s.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(o,e,s,0)}function replaceOuter(o,e,s,a){let l=o.index(a),u=o.node(a);if(l==e.index(a)&&a<o.depth-s.openStart){let c=replaceOuter(o,e,s,a+1);return u.copy(u.content.replaceChild(l,c))}else if(s.content.size)if(!s.openStart&&!s.openEnd&&o.depth==a&&e.depth==a){let c=o.parent,d=c.content;return close$2(c,d.cut(0,o.parentOffset).append(s.content).append(d.cut(e.parentOffset)))}else{let{start:c,end:d}=prepareSliceForReplace(s,o);return close$2(u,replaceThreeWay(o,c,d,e,a))}else return close$2(u,replaceTwoWay(o,e,a))}function checkJoin(o,e){if(!e.type.compatibleContent(o.type))throw new ReplaceError("Cannot join "+e.type.name+" onto "+o.type.name)}function joinable$1(o,e,s){let a=o.node(s);return checkJoin(a,e.node(s)),a}function addNode(o,e){let s=e.length-1;s>=0&&o.isText&&o.sameMarkup(e[s])?e[s]=o.withText(e[s].text+o.text):e.push(o)}function addRange$1(o,e,s,a){let l=(e||o).node(s),u=0,c=e?e.index(s):l.childCount;o&&(u=o.index(s),o.depth>s?u++:o.textOffset&&(addNode(o.nodeAfter,a),u++));for(let d=u;d<c;d++)addNode(l.child(d),a);e&&e.depth==s&&e.textOffset&&addNode(e.nodeBefore,a)}function close$2(o,e){return o.type.checkContent(e),o.copy(e)}function replaceThreeWay(o,e,s,a,l){let u=o.depth>l&&joinable$1(o,e,l+1),c=a.depth>l&&joinable$1(s,a,l+1),d=[];return addRange$1(null,o,l,d),u&&c&&e.index(l)==s.index(l)?(checkJoin(u,c),addNode(close$2(u,replaceThreeWay(o,e,s,a,l+1)),d)):(u&&addNode(close$2(u,replaceTwoWay(o,e,l+1)),d),addRange$1(e,s,l,d),c&&addNode(close$2(c,replaceTwoWay(s,a,l+1)),d)),addRange$1(a,null,l,d),new Fragment(d)}function replaceTwoWay(o,e,s){let a=[];if(addRange$1(null,o,s,a),o.depth>s){let l=joinable$1(o,e,s+1);addNode(close$2(l,replaceTwoWay(o,e,s+1)),a)}return addRange$1(e,null,s,a),new Fragment(a)}function prepareSliceForReplace(o,e){let s=e.depth-o.openStart,l=e.node(s).copy(o.content);for(let u=s-1;u>=0;u--)l=e.node(u).copy(Fragment.from(l));return{start:l.resolveNoCache(o.openStart+s),end:l.resolveNoCache(l.content.size-o.openEnd-s)}}class ResolvedPos{constructor(e,s,a){this.pos=e,this.path=s,this.parentOffset=a,this.depth=s.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,s=this.index(this.depth);if(s==e.childCount)return null;let a=this.pos-this.path[this.path.length-1],l=e.child(s);return a?e.child(s).cut(a):l}get nodeBefore(){let e=this.index(this.depth),s=this.pos-this.path[this.path.length-1];return s?this.parent.child(e).cut(0,s):e==0?null:this.parent.child(e-1)}posAtIndex(e,s){s=this.resolveDepth(s);let a=this.path[s*3],l=s==0?0:this.path[s*3-1]+1;for(let u=0;u<e;u++)l+=a.child(u).nodeSize;return l}marks(){let e=this.parent,s=this.index();if(e.content.size==0)return Mark$1.none;if(this.textOffset)return e.child(s).marks;let a=e.maybeChild(s-1),l=e.maybeChild(s);if(!a){let d=a;a=l,l=d}let u=a.marks;for(var c=0;c<u.length;c++)u[c].type.spec.inclusive===!1&&(!l||!u[c].isInSet(l.marks))&&(u=u[c--].removeFromSet(u));return u}marksAcross(e){let s=this.parent.maybeChild(this.index());if(!s||!s.isInline)return null;let a=s.marks,l=e.parent.maybeChild(e.index());for(var u=0;u<a.length;u++)a[u].type.spec.inclusive===!1&&(!l||!a[u].isInSet(l.marks))&&(a=a[u--].removeFromSet(a));return a}sharedDepth(e){for(let s=this.depth;s>0;s--)if(this.start(s)<=e&&this.end(s)>=e)return s;return 0}blockRange(e=this,s){if(e.pos<this.pos)return e.blockRange(this);for(let a=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);a>=0;a--)if(e.pos<=this.end(a)&&(!s||s(this.node(a))))return new NodeRange(this,e,a);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let s=1;s<=this.depth;s++)e+=(e?"/":"")+this.node(s).type.name+"_"+this.index(s-1);return e+":"+this.parentOffset}static resolve(e,s){if(!(s>=0&&s<=e.content.size))throw new RangeError("Position "+s+" out of range");let a=[],l=0,u=s;for(let c=e;;){let{index:d,offset:h}=c.content.findIndex(u),p=u-h;if(a.push(c,d,l+h),!p||(c=c.child(d),c.isText))break;u=p-1,l+=h+1}return new ResolvedPos(s,a,u)}static resolveCached(e,s){let a=resolveCache.get(e);if(a)for(let u=0;u<a.elts.length;u++){let c=a.elts[u];if(c.pos==s)return c}else resolveCache.set(e,a=new ResolveCache);let l=a.elts[a.i]=ResolvedPos.resolve(e,s);return a.i=(a.i+1)%resolveCacheSize,l}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(e,s,a){this.$from=e,this.$to=s,this.depth=a}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$2=class Ju{constructor(e,s,a,l=Mark$1.none){this.type=e,this.attrs=s,this.marks=l,this.content=a||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,s,a,l=0){this.content.nodesBetween(e,s,a,l,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,s,a,l){return this.content.textBetween(e,s,a,l)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,s,a){return this.type==e&&compareDeep(this.attrs,s||e.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,a||Mark$1.none)}copy(e=null){return e==this.content?this:new Ju(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Ju(this.type,this.attrs,this.content,e)}cut(e,s=this.content.size){return e==0&&s==this.content.size?this:this.copy(this.content.cut(e,s))}slice(e,s=this.content.size,a=!1){if(e==s)return Slice.empty;let l=this.resolve(e),u=this.resolve(s),c=a?0:l.sharedDepth(s),d=l.start(c),p=l.node(c).content.cut(l.pos-d,u.pos-d);return new Slice(p,l.depth-c,u.depth-c)}replace(e,s,a){return replace$4(this.resolve(e),this.resolve(s),a)}nodeAt(e){for(let s=this;;){let{index:a,offset:l}=s.content.findIndex(e);if(s=s.maybeChild(a),!s)return null;if(l==e||s.isText)return s;e-=l+1}}childAfter(e){let{index:s,offset:a}=this.content.findIndex(e);return{node:this.content.maybeChild(s),index:s,offset:a}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:s,offset:a}=this.content.findIndex(e);if(a<e)return{node:this.content.child(s),index:s,offset:a};let l=this.content.child(s-1);return{node:l,index:s-1,offset:a-l.nodeSize}}resolve(e){return ResolvedPos.resolveCached(this,e)}resolveNoCache(e){return ResolvedPos.resolve(this,e)}rangeHasMark(e,s,a){let l=!1;return s>e&&this.nodesBetween(e,s,u=>(a.isInSet(u.marks)&&(l=!0),!l)),l}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,e)}contentMatchAt(e){let s=this.type.contentMatch.matchFragment(this.content,0,e);if(!s)throw new Error("Called contentMatchAt on a node with invalid content");return s}canReplace(e,s,a=Fragment.empty,l=0,u=a.childCount){let c=this.contentMatchAt(e).matchFragment(a,l,u),d=c&&c.matchFragment(this.content,s);if(!d||!d.validEnd)return!1;for(let h=l;h<u;h++)if(!this.type.allowsMarks(a.child(h).marks))return!1;return!0}canReplaceWith(e,s,a,l){if(l&&!this.type.allowsMarks(l))return!1;let u=this.contentMatchAt(e).matchType(a),c=u&&u.matchFragment(this.content,s);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Mark$1.none;for(let s=0;s<this.marks.length;s++){let a=this.marks[s];a.type.checkAttrs(a.attrs),e=a.addToSet(e)}if(!Mark$1.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(s=>s.type.name)}`);this.content.forEach(s=>s.check())}toJSON(){let e={type:this.type.name};for(let s in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(s=>s.toJSON())),e}static fromJSON(e,s){if(!s)throw new RangeError("Invalid input for Node.fromJSON");let a;if(s.marks){if(!Array.isArray(s.marks))throw new RangeError("Invalid mark data for Node.fromJSON");a=s.marks.map(e.markFromJSON)}if(s.type=="text"){if(typeof s.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(s.text,a)}let l=Fragment.fromJSON(e,s.content),u=e.nodeType(s.type).create(s.attrs,l,a);return u.type.checkAttrs(u.attrs),u}};Node$2.prototype.text=void 0;let TextNode$1=class ec extends Node$2{constructor(e,s,a,l){if(super(e,s,null,l),!a)throw new RangeError("Empty text nodes are not allowed");this.text=a}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,s){return this.text.slice(e,s)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new ec(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new ec(this.type,this.attrs,e,this.marks)}cut(e=0,s=this.text.length){return e==0&&s==this.text.length?this:this.withText(this.text.slice(e,s))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function wrapMarks(o,e){for(let s=o.length-1;s>=0;s--)e=o[s].type.name+"("+e+")";return e}class ContentMatch{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,s){let a=new TokenStream(e,s);if(a.next==null)return ContentMatch.empty;let l=parseExpr(a);a.next&&a.err("Unexpected trailing text");let u=dfa(nfa(l));return checkForDeadEnds(u,a),u}matchType(e){for(let s=0;s<this.next.length;s++)if(this.next[s].type==e)return this.next[s].next;return null}matchFragment(e,s=0,a=e.childCount){let l=this;for(let u=s;l&&u<a;u++)l=l.matchType(e.child(u).type);return l}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:s}=this.next[e];if(!(s.isText||s.hasRequiredAttrs()))return s}return null}compatible(e){for(let s=0;s<this.next.length;s++)for(let a=0;a<e.next.length;a++)if(this.next[s].type==e.next[a].type)return!0;return!1}fillBefore(e,s=!1,a=0){let l=[this];function u(c,d){let h=c.matchFragment(e,a);if(h&&(!s||h.validEnd))return Fragment.from(d.map(p=>p.createAndFill()));for(let p=0;p<c.next.length;p++){let{type:m,next:g}=c.next[p];if(!(m.isText||m.hasRequiredAttrs())&&l.indexOf(g)==-1){l.push(g);let y=u(g,d.concat(m));if(y)return y}}return null}return u(this,[])}findWrapping(e){for(let a=0;a<this.wrapCache.length;a+=2)if(this.wrapCache[a]==e)return this.wrapCache[a+1];let s=this.computeWrapping(e);return this.wrapCache.push(e,s),s}computeWrapping(e){let s=Object.create(null),a=[{match:this,type:null,via:null}];for(;a.length;){let l=a.shift(),u=l.match;if(u.matchType(e)){let c=[];for(let d=l;d.type;d=d.via)c.push(d.type);return c.reverse()}for(let c=0;c<u.next.length;c++){let{type:d,next:h}=u.next[c];!d.isLeaf&&!d.hasRequiredAttrs()&&!(d.name in s)&&(!l.type||h.validEnd)&&(a.push({match:d.contentMatch,type:d,via:l}),s[d.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function s(a){e.push(a);for(let l=0;l<a.next.length;l++)e.indexOf(a.next[l].next)==-1&&s(a.next[l].next)}return s(this),e.map((a,l)=>{let u=l+(a.validEnd?"*":" ")+" ";for(let c=0;c<a.next.length;c++)u+=(c?", ":"")+a.next[c].type.name+"->"+e.indexOf(a.next[c].next);return u}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(e,s){this.string=e,this.nodeTypes=s,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function parseExpr(o){let e=[];do e.push(parseExprSeq(o));while(o.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function parseExprSeq(o){let e=[];do e.push(parseExprSubscript(o));while(o.next&&o.next!=")"&&o.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function parseExprSubscript(o){let e=parseExprAtom(o);for(;;)if(o.eat("+"))e={type:"plus",expr:e};else if(o.eat("*"))e={type:"star",expr:e};else if(o.eat("?"))e={type:"opt",expr:e};else if(o.eat("{"))e=parseExprRange(o,e);else break;return e}function parseNum(o){/\D/.test(o.next)&&o.err("Expected number, got '"+o.next+"'");let e=Number(o.next);return o.pos++,e}function parseExprRange(o,e){let s=parseNum(o),a=s;return o.eat(",")&&(o.next!="}"?a=parseNum(o):a=-1),o.eat("}")||o.err("Unclosed braced range"),{type:"range",min:s,max:a,expr:e}}function resolveName(o,e){let s=o.nodeTypes,a=s[e];if(a)return[a];let l=[];for(let u in s){let c=s[u];c.isInGroup(e)&&l.push(c)}return l.length==0&&o.err("No node type or group '"+e+"' found"),l}function parseExprAtom(o){if(o.eat("(")){let e=parseExpr(o);return o.eat(")")||o.err("Missing closing paren"),e}else if(/\W/.test(o.next))o.err("Unexpected token '"+o.next+"'");else{let e=resolveName(o,o.next).map(s=>(o.inline==null?o.inline=s.isInline:o.inline!=s.isInline&&o.err("Mixing inline and block content"),{type:"name",value:s}));return o.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function nfa(o){let e=[[]];return l(u(o,0),s()),e;function s(){return e.push([])-1}function a(c,d,h){let p={term:h,to:d};return e[c].push(p),p}function l(c,d){c.forEach(h=>h.to=d)}function u(c,d){if(c.type=="choice")return c.exprs.reduce((h,p)=>h.concat(u(p,d)),[]);if(c.type=="seq")for(let h=0;;h++){let p=u(c.exprs[h],d);if(h==c.exprs.length-1)return p;l(p,d=s())}else if(c.type=="star"){let h=s();return a(d,h),l(u(c.expr,h),h),[a(h)]}else if(c.type=="plus"){let h=s();return l(u(c.expr,d),h),l(u(c.expr,h),h),[a(h)]}else{if(c.type=="opt")return[a(d)].concat(u(c.expr,d));if(c.type=="range"){let h=d;for(let p=0;p<c.min;p++){let m=s();l(u(c.expr,h),m),h=m}if(c.max==-1)l(u(c.expr,h),h);else for(let p=c.min;p<c.max;p++){let m=s();a(h,m),l(u(c.expr,h),m),h=m}return[a(h)]}else{if(c.type=="name")return[a(d,void 0,c.value)];throw new Error("Unknown expr type")}}}}function cmp(o,e){return e-o}function nullFrom(o,e){let s=[];return a(e),s.sort(cmp);function a(l){let u=o[l];if(u.length==1&&!u[0].term)return a(u[0].to);s.push(l);for(let c=0;c<u.length;c++){let{term:d,to:h}=u[c];!d&&s.indexOf(h)==-1&&a(h)}}}function dfa(o){let e=Object.create(null);return s(nullFrom(o,0));function s(a){let l=[];a.forEach(c=>{o[c].forEach(({term:d,to:h})=>{if(!d)return;let p;for(let m=0;m<l.length;m++)l[m][0]==d&&(p=l[m][1]);nullFrom(o,h).forEach(m=>{p||l.push([d,p=[]]),p.indexOf(m)==-1&&p.push(m)})})});let u=e[a.join(",")]=new ContentMatch(a.indexOf(o.length-1)>-1);for(let c=0;c<l.length;c++){let d=l[c][1].sort(cmp);u.next.push({type:l[c][0],next:e[d.join(",")]||s(d)})}return u}}function checkForDeadEnds(o,e){for(let s=0,a=[o];s<a.length;s++){let l=a[s],u=!l.validEnd,c=[];for(let d=0;d<l.next.length;d++){let{type:h,next:p}=l.next[d];c.push(h.name),u&&!(h.isText||h.hasRequiredAttrs())&&(u=!1),a.indexOf(p)==-1&&a.push(p)}u&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs$1(o){let e=Object.create(null);for(let s in o){let a=o[s];if(!a.hasDefault)return null;e[s]=a.default}return e}function computeAttrs(o,e){let s=Object.create(null);for(let a in o){let l=e&&e[a];if(l===void 0){let u=o[a];if(u.hasDefault)l=u.default;else throw new RangeError("No value supplied for attribute "+a)}s[a]=l}return s}function checkAttrs(o,e,s,a){for(let l in e)if(!(l in o))throw new RangeError(`Unsupported attribute ${l} for ${s} of type ${l}`);for(let l in o){let u=o[l];u.validate&&u.validate(e[l])}}function initAttrs(o,e){let s=Object.create(null);if(e)for(let a in e)s[a]=new Attribute$1(o,a,e[a]);return s}let NodeType$2=class Bf{constructor(e,s,a){this.name=e,this.schema=s,this.spec=a,this.markSet=null,this.groups=a.group?a.group.split(" "):[],this.attrs=initAttrs(e,a.attrs),this.defaultAttrs=defaultAttrs$1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(a.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,e)}create(e=null,s,a){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$2(this,this.computeAttrs(e),Fragment.from(s),Mark$1.setFrom(a))}createChecked(e=null,s,a){return s=Fragment.from(s),this.checkContent(s),new Node$2(this,this.computeAttrs(e),s,Mark$1.setFrom(a))}createAndFill(e=null,s,a){if(e=this.computeAttrs(e),s=Fragment.from(s),s.size){let c=this.contentMatch.fillBefore(s);if(!c)return null;s=c.append(s)}let l=this.contentMatch.matchFragment(s),u=l&&l.fillBefore(Fragment.empty,!0);return u?new Node$2(this,e,s.append(u),Mark$1.setFrom(a)):null}validContent(e){let s=this.contentMatch.matchFragment(e);if(!s||!s.validEnd)return!1;for(let a=0;a<e.childCount;a++)if(!this.allowsMarks(e.child(a).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){checkAttrs(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let s=0;s<e.length;s++)if(!this.allowsMarkType(e[s].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let s;for(let a=0;a<e.length;a++)this.allowsMarkType(e[a].type)?s&&s.push(e[a]):s||(s=e.slice(0,a));return s?s.length?s:Mark$1.none:e}static compile(e,s){let a=Object.create(null);e.forEach((u,c)=>a[u]=new Bf(u,s,c));let l=s.spec.topNode||"doc";if(!a[l])throw new RangeError("Schema is missing its top node type ('"+l+"')");if(!a.text)throw new RangeError("Every schema needs a 'text' type");for(let u in a.text.attrs)throw new RangeError("The text node type should not have attributes");return a}};function validateType(o,e,s){let a=s.split("|");return l=>{let u=l===null?"null":typeof l;if(a.indexOf(u)<0)throw new RangeError(`Expected value of type ${a} for attribute ${e} on type ${o}, got ${u}`)}}let Attribute$1=class{constructor(e,s,a){this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default,this.validate=typeof a.validate=="string"?validateType(e,s,a.validate):a.validate}get isRequired(){return!this.hasDefault}};class MarkType{constructor(e,s,a,l){this.name=e,this.rank=s,this.schema=a,this.spec=l,this.attrs=initAttrs(e,l.attrs),this.excluded=null;let u=defaultAttrs$1(this.attrs);this.instance=u?new Mark$1(this,u):null}create(e=null){return!e&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,e))}static compile(e,s){let a=Object.create(null),l=0;return e.forEach((u,c)=>a[u]=new MarkType(u,l++,s,c)),a}removeFromSet(e){for(var s=0;s<e.length;s++)e[s].type==this&&(e=e.slice(0,s).concat(e.slice(s+1)),s--);return e}isInSet(e){for(let s=0;s<e.length;s++)if(e[s].type==this)return e[s]}checkAttrs(e){checkAttrs(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}let Schema$1=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let s=this.spec={};for(let l in e)s[l]=e[l];s.nodes=OrderedMap.from(e.nodes),s.marks=OrderedMap.from(e.marks||{}),this.nodes=NodeType$2.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let a=Object.create(null);for(let l in this.nodes){if(l in this.marks)throw new RangeError(l+" can not be both a node and a mark");let u=this.nodes[l],c=u.spec.content||"",d=u.spec.marks;if(u.contentMatch=a[c]||(a[c]=ContentMatch.parse(c,this.nodes)),u.inlineContent=u.contentMatch.inlineContent,u.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!u.isInline||!u.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=u}u.markSet=d=="_"?null:d?gatherMarks(this,d.split(" ")):d==""||!u.inlineContent?[]:null}for(let l in this.marks){let u=this.marks[l],c=u.spec.excludes;u.excluded=c==null?[u]:c==""?[]:gatherMarks(this,c.split(" "))}this.nodeFromJSON=l=>Node$2.fromJSON(this,l),this.markFromJSON=l=>Mark$1.fromJSON(this,l),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,s=null,a,l){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof NodeType$2){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(s,a,l)}text(e,s){let a=this.nodes.text;return new TextNode$1(a,a.defaultAttrs,e,Mark$1.setFrom(s))}mark(e,s){return typeof e=="string"&&(e=this.marks[e]),e.create(s)}nodeType(e){let s=this.nodes[e];if(!s)throw new RangeError("Unknown node type: "+e);return s}};function gatherMarks(o,e){let s=[];for(let a=0;a<e.length;a++){let l=e[a],u=o.marks[l],c=u;if(u)s.push(u);else for(let d in o.marks){let h=o.marks[d];(l=="_"||h.spec.group&&h.spec.group.split(" ").indexOf(l)>-1)&&s.push(c=h)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[a]+"'")}return s}function isTagRule(o){return o.tag!=null}function isStyleRule(o){return o.style!=null}let DOMParser$1=class tc{constructor(e,s){this.schema=e,this.rules=s,this.tags=[],this.styles=[];let a=this.matchedStyles=[];s.forEach(l=>{if(isTagRule(l))this.tags.push(l);else if(isStyleRule(l)){let u=/[^=]*/.exec(l.style)[0];a.indexOf(u)<0&&a.push(u),this.styles.push(l)}}),this.normalizeLists=!this.tags.some(l=>{if(!/^(ul|ol)\b/.test(l.tag)||!l.node)return!1;let u=e.nodes[l.node];return u.contentMatch.matchType(u)})}parse(e,s={}){let a=new ParseContext$1(this,s,!1);return a.addAll(e,Mark$1.none,s.from,s.to),a.finish()}parseSlice(e,s={}){let a=new ParseContext$1(this,s,!0);return a.addAll(e,Mark$1.none,s.from,s.to),Slice.maxOpen(a.finish())}matchTag(e,s,a){for(let l=a?this.tags.indexOf(a)+1:0;l<this.tags.length;l++){let u=this.tags[l];if(matches(e,u.tag)&&(u.namespace===void 0||e.namespaceURI==u.namespace)&&(!u.context||s.matchesContext(u.context))){if(u.getAttrs){let c=u.getAttrs(e);if(c===!1)continue;u.attrs=c||void 0}return u}}}matchStyle(e,s,a,l){for(let u=l?this.styles.indexOf(l)+1:0;u<this.styles.length;u++){let c=this.styles[u],d=c.style;if(!(d.indexOf(e)!=0||c.context&&!a.matchesContext(c.context)||d.length>e.length&&(d.charCodeAt(e.length)!=61||d.slice(e.length+1)!=s))){if(c.getAttrs){let h=c.getAttrs(s);if(h===!1)continue;c.attrs=h||void 0}return c}}}static schemaRules(e){let s=[];function a(l){let u=l.priority==null?50:l.priority,c=0;for(;c<s.length;c++){let d=s[c];if((d.priority==null?50:d.priority)<u)break}s.splice(c,0,l)}for(let l in e.marks){let u=e.marks[l].spec.parseDOM;u&&u.forEach(c=>{a(c=copy$1(c)),c.mark||c.ignore||c.clearMark||(c.mark=l)})}for(let l in e.nodes){let u=e.nodes[l].spec.parseDOM;u&&u.forEach(c=>{a(c=copy$1(c)),c.node||c.ignore||c.mark||(c.node=l)})}return s}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new tc(e,tc.schemaRules(e)))}};const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(o,e,s){return e!=null?(e?OPT_PRESERVE_WS:0)|(e==="full"?OPT_PRESERVE_WS_FULL:0):o&&o.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:s&~OPT_OPEN_LEFT}class NodeContext{constructor(e,s,a,l,u,c){this.type=e,this.attrs=s,this.marks=a,this.solid=l,this.options=c,this.content=[],this.activeMarks=Mark$1.none,this.match=u||(c&OPT_OPEN_LEFT?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let s=this.type.contentMatch.fillBefore(Fragment.from(e));if(s)this.match=this.type.contentMatch.matchFragment(s);else{let a=this.type.contentMatch,l;return(l=a.findWrapping(e.type))?(this.match=a,l):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&OPT_PRESERVE_WS)){let a=this.content[this.content.length-1],l;if(a&&a.isText&&(l=/[ \t\r\n\u000c]+$/.exec(a.text))){let u=a;a.text.length==l[0].length?this.content.pop():this.content[this.content.length-1]=u.withText(u.text.slice(0,u.text.length-l[0].length))}}let s=Fragment.from(this.content);return!e&&this.match&&(s=s.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,s,this.marks):s}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!blockTags.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}let ParseContext$1=class{constructor(e,s,a){this.parser=e,this.options=s,this.isOpen=a,this.open=0,this.localPreserveWS=!1;let l=s.topNode,u,c=wsOptionsFor(null,s.preserveWhitespace,0)|(a?OPT_OPEN_LEFT:0);l?u=new NodeContext(l.type,l.attrs,Mark$1.none,!0,s.topMatch||l.type.contentMatch,c):a?u=new NodeContext(null,null,Mark$1.none,!0,null,c):u=new NodeContext(e.schema.topNodeType,null,Mark$1.none,!0,null,c),this.nodes=[u],this.find=s.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,s){e.nodeType==3?this.addTextNode(e,s):e.nodeType==1&&this.addElement(e,s)}addTextNode(e,s){let a=e.nodeValue,l=this.top,u=l.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(l.options&OPT_PRESERVE_WS)>0,{schema:c}=this.parser;if(u==="full"||l.inlineContext(e)||/[^ \t\r\n\u000c]/.test(a)){if(u)if(u==="full")a=a.replace(/\r\n?/g,`
`);else if(c.linebreakReplacement&&/[\r\n]/.test(a)&&this.top.findWrapping(c.linebreakReplacement.create())){let d=a.split(/\r?\n|\r/);for(let h=0;h<d.length;h++)h&&this.insertNode(c.linebreakReplacement.create(),s,!0),d[h]&&this.insertNode(c.text(d[h]),s,!/\S/.test(d[h]));a=""}else a=a.replace(/\r?\n|\r/g," ");else if(a=a.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(a)&&this.open==this.nodes.length-1){let d=l.content[l.content.length-1],h=e.previousSibling;(!d||h&&h.nodeName=="BR"||d.isText&&/[ \t\r\n\u000c]$/.test(d.text))&&(a=a.slice(1))}a&&this.insertNode(c.text(a),s,!/\S/.test(a)),this.findInText(e)}else this.findInside(e)}addElement(e,s,a){let l=this.localPreserveWS,u=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),d;listTags.hasOwnProperty(c)&&this.parser.normalizeLists&&normalizeList(e);let h=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(d=this.parser.matchTag(e,this,a));e:if(h?h.ignore:ignoreTags.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,s);else if(!h||h.skip||h.closeParent){h&&h.closeParent?this.open=Math.max(0,this.open-1):h&&h.skip.nodeType&&(e=h.skip);let p,m=this.needsBlock;if(blockTags.hasOwnProperty(c))u.content.length&&u.content[0].isInline&&this.open&&(this.open--,u=this.top),p=!0,u.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,s);break e}let g=h&&h.skip?s:this.readStyles(e,s);g&&this.addAll(e,g),p&&this.sync(u),this.needsBlock=m}else{let p=this.readStyles(e,s);p&&this.addElementByRule(e,h,p,h.consuming===!1?d:void 0)}this.localPreserveWS=l}leafFallback(e,s){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),s)}ignoreFallback(e,s){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),s,!0)}readStyles(e,s){let a=e.style;if(a&&a.length)for(let l=0;l<this.parser.matchedStyles.length;l++){let u=this.parser.matchedStyles[l],c=a.getPropertyValue(u);if(c)for(let d=void 0;;){let h=this.parser.matchStyle(u,c,this,d);if(!h)break;if(h.ignore)return null;if(h.clearMark?s=s.filter(p=>!h.clearMark(p)):s=s.concat(this.parser.schema.marks[h.mark].create(h.attrs)),h.consuming===!1)d=h;else break}}return s}addElementByRule(e,s,a,l){let u,c;if(s.node)if(c=this.parser.schema.nodes[s.node],c.isLeaf)this.insertNode(c.create(s.attrs),a,e.nodeName=="BR")||this.leafFallback(e,a);else{let h=this.enter(c,s.attrs||null,a,s.preserveWhitespace);h&&(u=!0,a=h)}else{let h=this.parser.schema.marks[s.mark];a=a.concat(h.create(s.attrs))}let d=this.top;if(c&&c.isLeaf)this.findInside(e);else if(l)this.addElement(e,a,l);else if(s.getContent)this.findInside(e),s.getContent(e,this.parser.schema).forEach(h=>this.insertNode(h,a,!1));else{let h=e;typeof s.contentElement=="string"?h=e.querySelector(s.contentElement):typeof s.contentElement=="function"?h=s.contentElement(e):s.contentElement&&(h=s.contentElement),this.findAround(e,h,!0),this.addAll(h,a),this.findAround(e,h,!1)}u&&this.sync(d)&&this.open--}addAll(e,s,a,l){let u=a||0;for(let c=a?e.childNodes[a]:e.firstChild,d=l==null?null:e.childNodes[l];c!=d;c=c.nextSibling,++u)this.findAtPoint(e,u),this.addDOM(c,s);this.findAtPoint(e,u)}findPlace(e,s,a){let l,u;for(let c=this.open,d=0;c>=0;c--){let h=this.nodes[c],p=h.findWrapping(e);if(p&&(!l||l.length>p.length+d)&&(l=p,u=h,!p.length))break;if(h.solid){if(a)break;d+=2}}if(!l)return null;this.sync(u);for(let c=0;c<l.length;c++)s=this.enterInner(l[c],null,s,!1);return s}insertNode(e,s,a){if(e.isInline&&this.needsBlock&&!this.top.type){let u=this.textblockFromContext();u&&(s=this.enterInner(u,null,s))}let l=this.findPlace(e,s,a);if(l){this.closeExtra();let u=this.top;u.match&&(u.match=u.match.matchType(e.type));let c=Mark$1.none;for(let d of l.concat(e.marks))(u.type?u.type.allowsMarkType(d.type):markMayApply(d.type,e.type))&&(c=d.addToSet(c));return u.content.push(e.mark(c)),!0}return!1}enter(e,s,a,l){let u=this.findPlace(e.create(s),a,!1);return u&&(u=this.enterInner(e,s,a,!0,l)),u}enterInner(e,s,a,l=!1,u){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let d=wsOptionsFor(e,u,c.options);c.options&OPT_OPEN_LEFT&&c.content.length==0&&(d|=OPT_OPEN_LEFT);let h=Mark$1.none;return a=a.filter(p=>(c.type?c.type.allowsMarkType(p.type):markMayApply(p.type,e))?(h=p.addToSet(h),!1):!0),this.nodes.push(new NodeContext(e,s,h,l,null,d)),this.open++,a}closeExtra(e=!1){let s=this.nodes.length-1;if(s>this.open){for(;s>this.open;s--)this.nodes[s-1].content.push(this.nodes[s].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let s=this.open;s>=0;s--){if(this.nodes[s]==e)return this.open=s,!0;this.localPreserveWS&&(this.nodes[s].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let e=0;for(let s=this.open;s>=0;s--){let a=this.nodes[s].content;for(let l=a.length-1;l>=0;l--)e+=a[l].nodeSize;s&&e++}return e}findAtPoint(e,s){if(this.find)for(let a=0;a<this.find.length;a++)this.find[a].node==e&&this.find[a].offset==s&&(this.find[a].pos=this.currentPos)}findInside(e){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&(this.find[s].pos=this.currentPos)}findAround(e,s,a){if(e!=s&&this.find)for(let l=0;l<this.find.length;l++)this.find[l].pos==null&&e.nodeType==1&&e.contains(this.find[l].node)&&s.compareDocumentPosition(this.find[l].node)&(a?2:4)&&(this.find[l].pos=this.currentPos)}findInText(e){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==e&&(this.find[s].pos=this.currentPos-(e.nodeValue.length-this.find[s].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let s=e.split("/"),a=this.options.context,l=!this.isOpen&&(!a||a.parent.type==this.nodes[0].type),u=-(a?a.depth+1:0)+(l?0:1),c=(d,h)=>{for(;d>=0;d--){let p=s[d];if(p==""){if(d==s.length-1||d==0)continue;for(;h>=u;h--)if(c(d-1,h))return!0;return!1}else{let m=h>0||h==0&&l?this.nodes[h].type:a&&h>=u?a.node(h-u).type:null;if(!m||m.name!=p&&!m.isInGroup(p))return!1;h--}}return!0};return c(s.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let s=e.depth;s>=0;s--){let a=e.node(s).contentMatchAt(e.indexAfter(s)).defaultType;if(a&&a.isTextblock&&a.defaultAttrs)return a}for(let s in this.parser.schema.nodes){let a=this.parser.schema.nodes[s];if(a.isTextblock&&a.defaultAttrs)return a}}};function normalizeList(o){for(let e=o.firstChild,s=null;e;e=e.nextSibling){let a=e.nodeType==1?e.nodeName.toLowerCase():null;a&&listTags.hasOwnProperty(a)&&s?(s.appendChild(e),e=s):a=="li"?s=e:a&&(s=null)}}function matches(o,e){return(o.matches||o.msMatchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector).call(o,e)}function copy$1(o){let e={};for(let s in o)e[s]=o[s];return e}function markMayApply(o,e){let s=e.schema.nodes;for(let a in s){let l=s[a];if(!l.allowsMarkType(o))continue;let u=[],c=d=>{u.push(d);for(let h=0;h<d.edgeCount;h++){let{type:p,next:m}=d.edge(h);if(p==e||u.indexOf(m)<0&&c(m))return!0}};if(c(l.contentMatch))return!0}}class DOMSerializer{constructor(e,s){this.nodes=e,this.marks=s}serializeFragment(e,s={},a){a||(a=doc$2(s).createDocumentFragment());let l=a,u=[];return e.forEach(c=>{if(u.length||c.marks.length){let d=0,h=0;for(;d<u.length&&h<c.marks.length;){let p=c.marks[h];if(!this.marks[p.type.name]){h++;continue}if(!p.eq(u[d][0])||p.type.spec.spanning===!1)break;d++,h++}for(;d<u.length;)l=u.pop()[1];for(;h<c.marks.length;){let p=c.marks[h++],m=this.serializeMark(p,c.isInline,s);m&&(u.push([p,l]),l.appendChild(m.dom),l=m.contentDOM||m.dom)}}l.appendChild(this.serializeNodeInner(c,s))}),a}serializeNodeInner(e,s){let{dom:a,contentDOM:l}=renderSpec(doc$2(s),this.nodes[e.type.name](e),null,e.attrs);if(l){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,s,l)}return a}serializeNode(e,s={}){let a=this.serializeNodeInner(e,s);for(let l=e.marks.length-1;l>=0;l--){let u=this.serializeMark(e.marks[l],e.isInline,s);u&&((u.contentDOM||u.dom).appendChild(a),a=u.dom)}return a}serializeMark(e,s,a={}){let l=this.marks[e.type.name];return l&&renderSpec(doc$2(a),l(e,s),null,e.attrs)}static renderSpec(e,s,a=null,l){return renderSpec(e,s,a,l)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let s=gatherToDOM(e.nodes);return s.text||(s.text=a=>a.text),s}static marksFromSchema(e){return gatherToDOM(e.marks)}}function gatherToDOM(o){let e={};for(let s in o){let a=o[s].spec.toDOM;a&&(e[s]=a)}return e}function doc$2(o){return o.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(o){let e=suspiciousAttributeCache.get(o);return e===void 0&&suspiciousAttributeCache.set(o,e=suspiciousAttributesInner(o)),e}function suspiciousAttributesInner(o){let e=null;function s(a){if(a&&typeof a=="object")if(Array.isArray(a))if(typeof a[0]=="string")e||(e=[]),e.push(a);else for(let l=0;l<a.length;l++)s(a[l]);else for(let l in a)s(a[l])}return s(o),e}function renderSpec(o,e,s,a){if(typeof e=="string")return{dom:o.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let l=e[0],u;if(typeof l!="string")throw new RangeError("Invalid array passed to renderSpec");if(a&&(u=suspiciousAttributes(a))&&u.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=l.indexOf(" ");c>0&&(s=l.slice(0,c),l=l.slice(c+1));let d,h=s?o.createElementNS(s,l):o.createElement(l),p=e[1],m=1;if(p&&typeof p=="object"&&p.nodeType==null&&!Array.isArray(p)){m=2;for(let g in p)if(p[g]!=null){let y=g.indexOf(" ");y>0?h.setAttributeNS(g.slice(0,y),g.slice(y+1),p[g]):g=="style"&&h.style?h.style.cssText=p[g]:h.setAttribute(g,p[g])}}for(let g=m;g<e.length;g++){let y=e[g];if(y===0){if(g<e.length-1||g>m)throw new RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}else{let{dom:A,contentDOM:T}=renderSpec(o,y,s,a);if(h.appendChild(A),T){if(d)throw new RangeError("Multiple content holes");d=T}}}return{dom:h,contentDOM:d}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(o,e){return o+e*factor16}function recoverIndex(o){return o&lower16}function recoverOffset(o){return(o-(o&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(e,s,a){this.pos=e,this.delInfo=s,this.recover=a}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(e,s=!1){if(this.ranges=e,this.inverted=s,!e.length&&StepMap.empty)return StepMap.empty}recover(e){let s=0,a=recoverIndex(e);if(!this.inverted)for(let l=0;l<a;l++)s+=this.ranges[l*3+2]-this.ranges[l*3+1];return this.ranges[a*3]+s+recoverOffset(e)}mapResult(e,s=1){return this._map(e,s,!1)}map(e,s=1){return this._map(e,s,!0)}_map(e,s,a){let l=0,u=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let h=this.ranges[d]-(this.inverted?l:0);if(h>e)break;let p=this.ranges[d+u],m=this.ranges[d+c],g=h+p;if(e<=g){let y=p?e==h?-1:e==g?1:s:s,A=h+l+(y<0?0:m);if(a)return A;let T=e==(s<0?h:g)?null:makeRecover(d/3,e-h),E=e==h?DEL_AFTER:e==g?DEL_BEFORE:DEL_ACROSS;return(s<0?e!=h:e!=g)&&(E|=DEL_SIDE),new MapResult(A,E,T)}l+=m-p}return a?e+l:new MapResult(e+l,0,null)}touches(e,s){let a=0,l=recoverIndex(s),u=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let h=this.ranges[d]-(this.inverted?a:0);if(h>e)break;let p=this.ranges[d+u],m=h+p;if(e<=m&&d==l*3)return!0;a+=this.ranges[d+c]-p}return!1}forEach(e){let s=this.inverted?2:1,a=this.inverted?1:2;for(let l=0,u=0;l<this.ranges.length;l+=3){let c=this.ranges[l],d=c-(this.inverted?u:0),h=c+(this.inverted?0:u),p=this.ranges[l+s],m=this.ranges[l+a];e(d,d+p,h,h+m),u+=m-p}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?StepMap.empty:new StepMap(e<0?[0,-e,0]:[0,0,e])}}StepMap.empty=new StepMap([]);class Mapping{constructor(e,s,a=0,l=e?e.length:0){this.mirror=s,this.from=a,this.to=l,this._maps=e||[],this.ownData=!(e||s)}get maps(){return this._maps}slice(e=0,s=this.maps.length){return new Mapping(this._maps,this.mirror,e,s)}appendMap(e,s){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),s!=null&&this.setMirror(this._maps.length-1,s)}appendMapping(e){for(let s=0,a=this._maps.length;s<e._maps.length;s++){let l=e.getMirror(s);this.appendMap(e._maps[s],l!=null&&l<s?a+l:void 0)}}getMirror(e){if(this.mirror){for(let s=0;s<this.mirror.length;s++)if(this.mirror[s]==e)return this.mirror[s+(s%2?-1:1)]}}setMirror(e,s){this.mirror||(this.mirror=[]),this.mirror.push(e,s)}appendMappingInverted(e){for(let s=e.maps.length-1,a=this._maps.length+e._maps.length;s>=0;s--){let l=e.getMirror(s);this.appendMap(e._maps[s].invert(),l!=null&&l>s?a-l-1:void 0)}}invert(){let e=new Mapping;return e.appendMappingInverted(this),e}map(e,s=1){if(this.mirror)return this._map(e,s,!0);for(let a=this.from;a<this.to;a++)e=this._maps[a].map(e,s);return e}mapResult(e,s=1){return this._map(e,s,!1)}_map(e,s,a){let l=0;for(let u=this.from;u<this.to;u++){let c=this._maps[u],d=c.mapResult(e,s);if(d.recover!=null){let h=this.getMirror(u);if(h!=null&&h>u&&h<this.to){u=h,e=this._maps[h].recover(d.recover);continue}}l|=d.delInfo,e=d.pos}return a?e:new MapResult(e,l,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(e){return null}static fromJSON(e,s){if(!s||!s.stepType)throw new RangeError("Invalid input for Step.fromJSON");let a=stepsByID[s.stepType];if(!a)throw new RangeError(`No step type ${s.stepType} defined`);return a.fromJSON(e,s)}static jsonID(e,s){if(e in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+e);return stepsByID[e]=s,s.prototype.jsonID=e,s}}class StepResult{constructor(e,s){this.doc=e,this.failed=s}static ok(e){return new StepResult(e,null)}static fail(e){return new StepResult(null,e)}static fromReplace(e,s,a,l){try{return StepResult.ok(e.replace(s,a,l))}catch(u){if(u instanceof ReplaceError)return StepResult.fail(u.message);throw u}}}function mapFragment(o,e,s){let a=[];for(let l=0;l<o.childCount;l++){let u=o.child(l);u.content.size&&(u=u.copy(mapFragment(u.content,e,u))),u.isInline&&(u=e(u,s,l)),a.push(u)}return Fragment.fromArray(a)}class AddMarkStep extends Step{constructor(e,s,a){super(),this.from=e,this.to=s,this.mark=a}apply(e){let s=e.slice(this.from,this.to),a=e.resolve(this.from),l=a.node(a.sharedDepth(this.to)),u=new Slice(mapFragment(s.content,(c,d)=>!c.isAtom||!d.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),l),s.openStart,s.openEnd);return StepResult.fromReplace(e,this.from,this.to,u)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(e){let s=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return s.deleted&&a.deleted||s.pos>=a.pos?null:new AddMarkStep(s.pos,a.pos,this.mark)}merge(e){return e instanceof AddMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new AddMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(s.from,s.to,e.markFromJSON(s.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(e,s,a){super(),this.from=e,this.to=s,this.mark=a}apply(e){let s=e.slice(this.from,this.to),a=new Slice(mapFragment(s.content,l=>l.mark(this.mark.removeFromSet(l.marks)),e),s.openStart,s.openEnd);return StepResult.fromReplace(e,this.from,this.to,a)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(e){let s=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return s.deleted&&a.deleted||s.pos>=a.pos?null:new RemoveMarkStep(s.pos,a.pos,this.mark)}merge(e){return e instanceof RemoveMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new RemoveMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(s.from,s.to,e.markFromJSON(s.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(e,s){super(),this.pos=e,this.mark=s}apply(e){let s=e.nodeAt(this.pos);if(!s)return StepResult.fail("No node at mark step's position");let a=s.type.create(s.attrs,null,this.mark.addToSet(s.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(a),0,s.isLeaf?0:1))}invert(e){let s=e.nodeAt(this.pos);if(s){let a=this.mark.addToSet(s.marks);if(a.length==s.marks.length){for(let l=0;l<s.marks.length;l++)if(!s.marks[l].isInSet(a))return new AddNodeMarkStep(this.pos,s.marks[l]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(e){let s=e.mapResult(this.pos,1);return s.deletedAfter?null:new AddNodeMarkStep(s.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(s.pos,e.markFromJSON(s.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(e,s){super(),this.pos=e,this.mark=s}apply(e){let s=e.nodeAt(this.pos);if(!s)return StepResult.fail("No node at mark step's position");let a=s.type.create(s.attrs,null,this.mark.removeFromSet(s.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(a),0,s.isLeaf?0:1))}invert(e){let s=e.nodeAt(this.pos);return!s||!this.mark.isInSet(s.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(e){let s=e.mapResult(this.pos,1);return s.deletedAfter?null:new RemoveNodeMarkStep(s.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(s.pos,e.markFromJSON(s.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(e,s,a,l=!1){super(),this.from=e,this.to=s,this.slice=a,this.structure=l}apply(e){return this.structure&&contentBetween(e,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(e){return new ReplaceStep(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let s=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return s.deletedAcross&&a.deletedAcross?null:new ReplaceStep(s.pos,Math.max(s.pos,a.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ReplaceStep)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let s=this.slice.size+e.slice.size==0?Slice.empty:new Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ReplaceStep(this.from,this.to+(e.to-e.from),s,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let s=this.slice.size+e.slice.size==0?Slice.empty:new Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ReplaceStep(e.from,this.to,s,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(s.from,s.to,Slice.fromJSON(e,s.slice),!!s.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(e,s,a,l,u,c,d=!1){super(),this.from=e,this.to=s,this.gapFrom=a,this.gapTo=l,this.slice=u,this.insert=c,this.structure=d}apply(e){if(this.structure&&(contentBetween(e,this.from,this.gapFrom)||contentBetween(e,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let s=e.slice(this.gapFrom,this.gapTo);if(s.openStart||s.openEnd)return StepResult.fail("Gap is not a flat range");let a=this.slice.insertAt(this.insert,s.content);return a?StepResult.fromReplace(e,this.from,this.to,a):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let s=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+s,this.from+this.insert,this.from+this.insert+s,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let s=e.mapResult(this.from,1),a=e.mapResult(this.to,-1),l=this.from==this.gapFrom?s.pos:e.map(this.gapFrom,-1),u=this.to==this.gapTo?a.pos:e.map(this.gapTo,1);return s.deletedAcross&&a.deletedAcross||l<s.pos||u>a.pos?null:new ReplaceAroundStep(s.pos,a.pos,l,u,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number"||typeof s.gapFrom!="number"||typeof s.gapTo!="number"||typeof s.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(s.from,s.to,s.gapFrom,s.gapTo,Slice.fromJSON(e,s.slice),s.insert,!!s.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(o,e,s){let a=o.resolve(e),l=s-e,u=a.depth;for(;l>0&&u>0&&a.indexAfter(u)==a.node(u).childCount;)u--,l--;if(l>0){let c=a.node(u).maybeChild(a.indexAfter(u));for(;l>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,l--}}return!1}function addMark(o,e,s,a){let l=[],u=[],c,d;o.doc.nodesBetween(e,s,(h,p,m)=>{if(!h.isInline)return;let g=h.marks;if(!a.isInSet(g)&&m.type.allowsMarkType(a.type)){let y=Math.max(p,e),A=Math.min(p+h.nodeSize,s),T=a.addToSet(g);for(let E=0;E<g.length;E++)g[E].isInSet(T)||(c&&c.to==y&&c.mark.eq(g[E])?c.to=A:l.push(c=new RemoveMarkStep(y,A,g[E])));d&&d.to==y?d.to=A:u.push(d=new AddMarkStep(y,A,a))}}),l.forEach(h=>o.step(h)),u.forEach(h=>o.step(h))}function removeMark(o,e,s,a){let l=[],u=0;o.doc.nodesBetween(e,s,(c,d)=>{if(!c.isInline)return;u++;let h=null;if(a instanceof MarkType){let p=c.marks,m;for(;m=a.isInSet(p);)(h||(h=[])).push(m),p=m.removeFromSet(p)}else a?a.isInSet(c.marks)&&(h=[a]):h=c.marks;if(h&&h.length){let p=Math.min(d+c.nodeSize,s);for(let m=0;m<h.length;m++){let g=h[m],y;for(let A=0;A<l.length;A++){let T=l[A];T.step==u-1&&g.eq(l[A].style)&&(y=T)}y?(y.to=p,y.step=u):l.push({style:g,from:Math.max(d,e),to:p,step:u})}}}),l.forEach(c=>o.step(new RemoveMarkStep(c.from,c.to,c.style)))}function clearIncompatible(o,e,s,a=s.contentMatch,l=!0){let u=o.doc.nodeAt(e),c=[],d=e+1;for(let h=0;h<u.childCount;h++){let p=u.child(h),m=d+p.nodeSize,g=a.matchType(p.type);if(!g)c.push(new ReplaceStep(d,m,Slice.empty));else{a=g;for(let y=0;y<p.marks.length;y++)s.allowsMarkType(p.marks[y].type)||o.step(new RemoveMarkStep(d,m,p.marks[y]));if(l&&p.isText&&s.whitespace!="pre"){let y,A=/\r?\n|\r/g,T;for(;y=A.exec(p.text);)T||(T=new Slice(Fragment.from(s.schema.text(" ",s.allowedMarks(p.marks))),0,0)),c.push(new ReplaceStep(d+y.index,d+y.index+y[0].length,T))}}d=m}if(!a.validEnd){let h=a.fillBefore(Fragment.empty,!0);o.replace(d,d,new Slice(h,0,0))}for(let h=c.length-1;h>=0;h--)o.step(c[h])}function canCut(o,e,s){return(e==0||o.canReplace(e,o.childCount))&&(s==o.childCount||o.canReplace(0,s))}function liftTarget(o){let s=o.parent.content.cutByIndex(o.startIndex,o.endIndex);for(let a=o.depth,l=0,u=0;;--a){let c=o.$from.node(a),d=o.$from.index(a)+l,h=o.$to.indexAfter(a)-u;if(a<o.depth&&c.canReplace(d,h,s))return a;if(a==0||c.type.spec.isolating||!canCut(c,d,h))break;d&&(l=1),h<c.childCount&&(u=1)}return null}function lift$1(o,e,s){let{$from:a,$to:l,depth:u}=e,c=a.before(u+1),d=l.after(u+1),h=c,p=d,m=Fragment.empty,g=0;for(let T=u,E=!1;T>s;T--)E||a.index(T)>0?(E=!0,m=Fragment.from(a.node(T).copy(m)),g++):h--;let y=Fragment.empty,A=0;for(let T=u,E=!1;T>s;T--)E||l.after(T+1)<l.end(T)?(E=!0,y=Fragment.from(l.node(T).copy(y)),A++):p++;o.step(new ReplaceAroundStep(h,p,c,d,new Slice(m.append(y),g,A),m.size-g,!0))}function findWrapping(o,e,s=null,a=o){let l=findWrappingOutside(o,e),u=l&&findWrappingInside(a,e);return u?l.map(withAttrs).concat({type:e,attrs:s}).concat(u.map(withAttrs)):null}function withAttrs(o){return{type:o,attrs:null}}function findWrappingOutside(o,e){let{parent:s,startIndex:a,endIndex:l}=o,u=s.contentMatchAt(a).findWrapping(e);if(!u)return null;let c=u.length?u[0]:e;return s.canReplaceWith(a,l,c)?u:null}function findWrappingInside(o,e){let{parent:s,startIndex:a,endIndex:l}=o,u=s.child(a),c=e.contentMatch.findWrapping(u.type);if(!c)return null;let h=(c.length?c[c.length-1]:e).contentMatch;for(let p=a;h&&p<l;p++)h=h.matchType(s.child(p).type);return!h||!h.validEnd?null:c}function wrap$1(o,e,s){let a=Fragment.empty;for(let c=s.length-1;c>=0;c--){if(a.size){let d=s[c].type.contentMatch.matchFragment(a);if(!d||!d.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}a=Fragment.from(s[c].type.create(s[c].attrs,a))}let l=e.start,u=e.end;o.step(new ReplaceAroundStep(l,u,l,u,new Slice(a,0,0),s.length,!0))}function setBlockType$1(o,e,s,a,l){if(!a.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let u=o.steps.length;o.doc.nodesBetween(e,s,(c,d)=>{let h=typeof l=="function"?l(c):l;if(c.isTextblock&&!c.hasMarkup(a,h)&&canChangeType(o.doc,o.mapping.slice(u).map(d),a)){let p=null;if(a.schema.linebreakReplacement){let A=a.whitespace=="pre",T=!!a.contentMatch.matchType(a.schema.linebreakReplacement);A&&!T?p=!1:!A&&T&&(p=!0)}p===!1&&replaceLinebreaks(o,c,d,u),clearIncompatible(o,o.mapping.slice(u).map(d,1),a,void 0,p===null);let m=o.mapping.slice(u),g=m.map(d,1),y=m.map(d+c.nodeSize,1);return o.step(new ReplaceAroundStep(g,y,g+1,y-1,new Slice(Fragment.from(a.create(h,null,c.marks)),0,0),1,!0)),p===!0&&replaceNewlines(o,c,d,u),!1}})}function replaceNewlines(o,e,s,a){e.forEach((l,u)=>{if(l.isText){let c,d=/\r?\n|\r/g;for(;c=d.exec(l.text);){let h=o.mapping.slice(a).map(s+1+u+c.index);o.replaceWith(h,h+1,e.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(o,e,s,a){e.forEach((l,u)=>{if(l.type==l.type.schema.linebreakReplacement){let c=o.mapping.slice(a).map(s+1+u);o.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function canChangeType(o,e,s){let a=o.resolve(e),l=a.index();return a.parent.canReplaceWith(l,l+1,s)}function setNodeMarkup(o,e,s,a,l){let u=o.doc.nodeAt(e);if(!u)throw new RangeError("No node at given position");s||(s=u.type);let c=s.create(a,null,l||u.marks);if(u.isLeaf)return o.replaceWith(e,e+u.nodeSize,c);if(!s.validContent(u.content))throw new RangeError("Invalid content for node type "+s.name);o.step(new ReplaceAroundStep(e,e+u.nodeSize,e+1,e+u.nodeSize-1,new Slice(Fragment.from(c),0,0),1,!0))}function canSplit(o,e,s=1,a){let l=o.resolve(e),u=l.depth-s,c=a&&a[a.length-1]||l.parent;if(u<0||l.parent.type.spec.isolating||!l.parent.canReplace(l.index(),l.parent.childCount)||!c.type.validContent(l.parent.content.cutByIndex(l.index(),l.parent.childCount)))return!1;for(let p=l.depth-1,m=s-2;p>u;p--,m--){let g=l.node(p),y=l.index(p);if(g.type.spec.isolating)return!1;let A=g.content.cutByIndex(y,g.childCount),T=a&&a[m+1];T&&(A=A.replaceChild(0,T.type.create(T.attrs)));let E=a&&a[m]||g;if(!g.canReplace(y+1,g.childCount)||!E.type.validContent(A))return!1}let d=l.indexAfter(u),h=a&&a[0];return l.node(u).canReplaceWith(d,d,h?h.type:l.node(u+1).type)}function split(o,e,s=1,a){let l=o.doc.resolve(e),u=Fragment.empty,c=Fragment.empty;for(let d=l.depth,h=l.depth-s,p=s-1;d>h;d--,p--){u=Fragment.from(l.node(d).copy(u));let m=a&&a[p];c=Fragment.from(m?m.type.create(m.attrs,c):l.node(d).copy(c))}o.step(new ReplaceStep(e,e,new Slice(u.append(c),s,s),!0))}function canJoin(o,e){let s=o.resolve(e),a=s.index();return joinable(s.nodeBefore,s.nodeAfter)&&s.parent.canReplace(a,a+1)}function canAppendWithSubstitutedLinebreaks(o,e){e.content.size||o.type.compatibleContent(e.type);let s=o.contentMatchAt(o.childCount),{linebreakReplacement:a}=o.type.schema;for(let l=0;l<e.childCount;l++){let u=e.child(l),c=u.type==a?o.type.schema.nodes.text:u.type;if(s=s.matchType(c),!s||!o.type.allowsMarks(u.marks))return!1}return s.validEnd}function joinable(o,e){return!!(o&&e&&!o.isLeaf&&canAppendWithSubstitutedLinebreaks(o,e))}function join(o,e,s){let a=null,{linebreakReplacement:l}=o.doc.type.schema,u=o.doc.resolve(e-s),c=u.node().type;if(l&&c.inlineContent){let m=c.whitespace=="pre",g=!!c.contentMatch.matchType(l);m&&!g?a=!1:!m&&g&&(a=!0)}let d=o.steps.length;if(a===!1){let m=o.doc.resolve(e+s);replaceLinebreaks(o,m.node(),m.before(),d)}c.inlineContent&&clearIncompatible(o,e+s-1,c,u.node().contentMatchAt(u.index()),a==null);let h=o.mapping.slice(d),p=h.map(e-s);if(o.step(new ReplaceStep(p,h.map(e+s,-1),Slice.empty,!0)),a===!0){let m=o.doc.resolve(p);replaceNewlines(o,m.node(),m.before(),o.steps.length)}return o}function insertPoint(o,e,s){let a=o.resolve(e);if(a.parent.canReplaceWith(a.index(),a.index(),s))return e;if(a.parentOffset==0)for(let l=a.depth-1;l>=0;l--){let u=a.index(l);if(a.node(l).canReplaceWith(u,u,s))return a.before(l+1);if(u>0)return null}if(a.parentOffset==a.parent.content.size)for(let l=a.depth-1;l>=0;l--){let u=a.indexAfter(l);if(a.node(l).canReplaceWith(u,u,s))return a.after(l+1);if(u<a.node(l).childCount)return null}return null}function dropPoint(o,e,s){let a=o.resolve(e);if(!s.content.size)return e;let l=s.content;for(let u=0;u<s.openStart;u++)l=l.firstChild.content;for(let u=1;u<=(s.openStart==0&&s.size?2:1);u++)for(let c=a.depth;c>=0;c--){let d=c==a.depth?0:a.pos<=(a.start(c+1)+a.end(c+1))/2?-1:1,h=a.index(c)+(d>0?1:0),p=a.node(c),m=!1;if(u==1)m=p.canReplace(h,h,l);else{let g=p.contentMatchAt(h).findWrapping(l.firstChild.type);m=g&&p.canReplaceWith(h,h,g[0])}if(m)return d==0?a.pos:d<0?a.before(c+1):a.after(c+1)}return null}function replaceStep(o,e,s=e,a=Slice.empty){if(e==s&&!a.size)return null;let l=o.resolve(e),u=o.resolve(s);return fitsTrivially(l,u,a)?new ReplaceStep(e,s,a):new Fitter(l,u,a).fit()}function fitsTrivially(o,e,s){return!s.openStart&&!s.openEnd&&o.start()==e.start()&&o.parent.canReplace(o.index(),e.index(),s.content)}class Fitter{constructor(e,s,a){this.$from=e,this.$to=s,this.unplaced=a,this.frontier=[],this.placed=Fragment.empty;for(let l=0;l<=e.depth;l++){let u=e.node(l);this.frontier.push({type:u.type,match:u.contentMatchAt(e.indexAfter(l))})}for(let l=e.depth;l>0;l--)this.placed=Fragment.from(e.node(l).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let p=this.findFittable();p?this.placeNodes(p):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),s=this.placed.size-this.depth-this.$from.depth,a=this.$from,l=this.close(e<0?this.$to:a.doc.resolve(e));if(!l)return null;let u=this.placed,c=a.depth,d=l.depth;for(;c&&d&&u.childCount==1;)u=u.firstChild.content,c--,d--;let h=new Slice(u,c,d);return e>-1?new ReplaceAroundStep(a.pos,e,this.$to.pos,this.$to.end(),h,s):h.size||a.pos!=this.$to.pos?new ReplaceStep(a.pos,l.pos,h):null}findFittable(){let e=this.unplaced.openStart;for(let s=this.unplaced.content,a=0,l=this.unplaced.openEnd;a<e;a++){let u=s.firstChild;if(s.childCount>1&&(l=0),u.type.spec.isolating&&l<=a){e=a;break}s=u.content}for(let s=1;s<=2;s++)for(let a=s==1?e:this.unplaced.openStart;a>=0;a--){let l,u=null;a?(u=contentAt(this.unplaced.content,a-1).firstChild,l=u.content):l=this.unplaced.content;let c=l.firstChild;for(let d=this.depth;d>=0;d--){let{type:h,match:p}=this.frontier[d],m,g=null;if(s==1&&(c?p.matchType(c.type)||(g=p.fillBefore(Fragment.from(c),!1)):u&&h.compatibleContent(u.type)))return{sliceDepth:a,frontierDepth:d,parent:u,inject:g};if(s==2&&c&&(m=p.findWrapping(c.type)))return{sliceDepth:a,frontierDepth:d,parent:u,wrap:m};if(u&&p.matchType(u.type))break}}}openMore(){let{content:e,openStart:s,openEnd:a}=this.unplaced,l=contentAt(e,s);return!l.childCount||l.firstChild.isLeaf?!1:(this.unplaced=new Slice(e,s+1,Math.max(a,l.size+s>=e.size-a?s+1:0)),!0)}dropNode(){let{content:e,openStart:s,openEnd:a}=this.unplaced,l=contentAt(e,s);if(l.childCount<=1&&s>0){let u=e.size-s<=s+l.size;this.unplaced=new Slice(dropFromFragment(e,s-1,1),s-1,u?s-1:a)}else this.unplaced=new Slice(dropFromFragment(e,s,1),s,a)}placeNodes({sliceDepth:e,frontierDepth:s,parent:a,inject:l,wrap:u}){for(;this.depth>s;)this.closeFrontierNode();if(u)for(let E=0;E<u.length;E++)this.openFrontierNode(u[E]);let c=this.unplaced,d=a?a.content:c.content,h=c.openStart-e,p=0,m=[],{match:g,type:y}=this.frontier[s];if(l){for(let E=0;E<l.childCount;E++)m.push(l.child(E));g=g.matchFragment(l)}let A=d.size+e-(c.content.size-c.openEnd);for(;p<d.childCount;){let E=d.child(p),v=g.matchType(E.type);if(!v)break;p++,(p>1||h==0||E.content.size)&&(g=v,m.push(closeNodeStart(E.mark(y.allowedMarks(E.marks)),p==1?h:0,p==d.childCount?A:-1)))}let T=p==d.childCount;T||(A=-1),this.placed=addToFragment(this.placed,s,Fragment.from(m)),this.frontier[s].match=g,T&&A<0&&a&&a.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,v=d;E<A;E++){let _=v.lastChild;this.frontier.push({type:_.type,match:_.contentMatchAt(_.childCount)}),v=_.content}this.unplaced=T?e==0?Slice.empty:new Slice(dropFromFragment(c.content,e-1,1),e-1,A<0?c.openEnd:e-1):new Slice(dropFromFragment(c.content,e,p),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],s;if(!e.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(s=this.findCloseLevel(this.$to))&&s.depth==this.depth)return-1;let{depth:a}=this.$to,l=this.$to.after(a);for(;a>1&&l==this.$to.end(--a);)++l;return l}findCloseLevel(e){e:for(let s=Math.min(this.depth,e.depth);s>=0;s--){let{match:a,type:l}=this.frontier[s],u=s<e.depth&&e.end(s+1)==e.pos+(e.depth-(s+1)),c=contentAfterFits(e,s,l,a,u);if(c){for(let d=s-1;d>=0;d--){let{match:h,type:p}=this.frontier[d],m=contentAfterFits(e,d,p,h,!0);if(!m||m.childCount)continue e}return{depth:s,fit:c,move:u?e.doc.resolve(e.after(s+1)):e}}}}close(e){let s=this.findCloseLevel(e);if(!s)return null;for(;this.depth>s.depth;)this.closeFrontierNode();s.fit.childCount&&(this.placed=addToFragment(this.placed,s.depth,s.fit)),e=s.move;for(let a=s.depth+1;a<=e.depth;a++){let l=e.node(a),u=l.type.contentMatch.fillBefore(l.content,!0,e.index(a));this.openFrontierNode(l.type,l.attrs,u)}return e}openFrontierNode(e,s=null,a){let l=this.frontier[this.depth];l.match=l.match.matchType(e),this.placed=addToFragment(this.placed,this.depth,Fragment.from(e.create(s,a))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let s=this.frontier.pop().match.fillBefore(Fragment.empty,!0);s.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,s))}}function dropFromFragment(o,e,s){return e==0?o.cutByIndex(s,o.childCount):o.replaceChild(0,o.firstChild.copy(dropFromFragment(o.firstChild.content,e-1,s)))}function addToFragment(o,e,s){return e==0?o.append(s):o.replaceChild(o.childCount-1,o.lastChild.copy(addToFragment(o.lastChild.content,e-1,s)))}function contentAt(o,e){for(let s=0;s<e;s++)o=o.firstChild.content;return o}function closeNodeStart(o,e,s){if(e<=0)return o;let a=o.content;return e>1&&(a=a.replaceChild(0,closeNodeStart(a.firstChild,e-1,a.childCount==1?s-1:0))),e>0&&(a=o.type.contentMatch.fillBefore(a).append(a),s<=0&&(a=a.append(o.type.contentMatch.matchFragment(a).fillBefore(Fragment.empty,!0)))),o.copy(a)}function contentAfterFits(o,e,s,a,l){let u=o.node(e),c=l?o.indexAfter(e):o.index(e);if(c==u.childCount&&!s.compatibleContent(u.type))return null;let d=a.fillBefore(u.content,!0,c);return d&&!invalidMarks(s,u.content,c)?d:null}function invalidMarks(o,e,s){for(let a=s;a<e.childCount;a++)if(!o.allowsMarks(e.child(a).marks))return!0;return!1}function definesContent(o){return o.spec.defining||o.spec.definingForContent}function replaceRange(o,e,s,a){if(!a.size)return o.deleteRange(e,s);let l=o.doc.resolve(e),u=o.doc.resolve(s);if(fitsTrivially(l,u,a))return o.step(new ReplaceStep(e,s,a));let c=coveredDepths(l,u);c[c.length-1]==0&&c.pop();let d=-(l.depth+1);c.unshift(d);for(let y=l.depth,A=l.pos-1;y>0;y--,A--){let T=l.node(y).type.spec;if(T.defining||T.definingAsContext||T.isolating)break;c.indexOf(y)>-1?d=y:l.before(y)==A&&c.splice(1,0,-y)}let h=c.indexOf(d),p=[],m=a.openStart;for(let y=a.content,A=0;;A++){let T=y.firstChild;if(p.push(T),A==a.openStart)break;y=T.content}for(let y=m-1;y>=0;y--){let A=p[y],T=definesContent(A.type);if(T&&!A.sameMarkup(l.node(Math.abs(d)-1)))m=y;else if(T||!A.type.isTextblock)break}for(let y=a.openStart;y>=0;y--){let A=(y+m+1)%(a.openStart+1),T=p[A];if(T)for(let E=0;E<c.length;E++){let v=c[(E+h)%c.length],_=!0;v<0&&(_=!1,v=-v);let w=l.node(v-1),R=l.index(v-1);if(w.canReplaceWith(R,R,T.type,T.marks))return o.replace(l.before(v),_?u.after(v):s,new Slice(closeFragment(a.content,0,a.openStart,A),A,a.openEnd))}}let g=o.steps.length;for(let y=c.length-1;y>=0&&(o.replace(e,s,a),!(o.steps.length>g));y--){let A=c[y];A<0||(e=l.before(A),s=u.after(A))}}function closeFragment(o,e,s,a,l){if(e<s){let u=o.firstChild;o=o.replaceChild(0,u.copy(closeFragment(u.content,e+1,s,a,u)))}if(e>a){let u=l.contentMatchAt(0),c=u.fillBefore(o).append(o);o=c.append(u.matchFragment(c).fillBefore(Fragment.empty,!0))}return o}function replaceRangeWith(o,e,s,a){if(!a.isInline&&e==s&&o.doc.resolve(e).parent.content.size){let l=insertPoint(o.doc,e,a.type);l!=null&&(e=s=l)}o.replaceRange(e,s,new Slice(Fragment.from(a),0,0))}function deleteRange(o,e,s){let a=o.doc.resolve(e),l=o.doc.resolve(s),u=coveredDepths(a,l);for(let c=0;c<u.length;c++){let d=u[c],h=c==u.length-1;if(h&&d==0||a.node(d).type.contentMatch.validEnd)return o.delete(a.start(d),l.end(d));if(d>0&&(h||a.node(d-1).canReplace(a.index(d-1),l.indexAfter(d-1))))return o.delete(a.before(d),l.after(d))}for(let c=1;c<=a.depth&&c<=l.depth;c++)if(e-a.start(c)==a.depth-c&&s>a.end(c)&&l.end(c)-s!=l.depth-c&&a.start(c-1)==l.start(c-1)&&a.node(c-1).canReplace(a.index(c-1),l.index(c-1)))return o.delete(a.before(c),s);o.delete(e,s)}function coveredDepths(o,e){let s=[],a=Math.min(o.depth,e.depth);for(let l=a;l>=0;l--){let u=o.start(l);if(u<o.pos-(o.depth-l)||e.end(l)>e.pos+(e.depth-l)||o.node(l).type.spec.isolating||e.node(l).type.spec.isolating)break;(u==e.start(l)||l==o.depth&&l==e.depth&&o.parent.inlineContent&&e.parent.inlineContent&&l&&e.start(l-1)==u-1)&&s.push(l)}return s}class AttrStep extends Step{constructor(e,s,a){super(),this.pos=e,this.attr=s,this.value=a}apply(e){let s=e.nodeAt(this.pos);if(!s)return StepResult.fail("No node at attribute step's position");let a=Object.create(null);for(let u in s.attrs)a[u]=s.attrs[u];a[this.attr]=this.value;let l=s.type.create(a,null,s.marks);return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(l),0,s.isLeaf?0:1))}getMap(){return StepMap.empty}invert(e){return new AttrStep(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let s=e.mapResult(this.pos,1);return s.deletedAfter?null:new AttrStep(s.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,s){if(typeof s.pos!="number"||typeof s.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(s.pos,s.attr,s.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(e,s){super(),this.attr=e,this.value=s}apply(e){let s=Object.create(null);for(let l in e.attrs)s[l]=e.attrs[l];s[this.attr]=this.value;let a=e.type.create(s,e.content,e.marks);return StepResult.ok(a)}getMap(){return StepMap.empty}invert(e){return new DocAttrStep(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,s){if(typeof s.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(s.attr,s.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function o(e){let s=Error.call(this,e);return s.__proto__=o.prototype,s},TransformError.prototype=Object.create(Error.prototype),TransformError.prototype.constructor=TransformError,TransformError.prototype.name="TransformError";class Transform{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let s=this.maybeStep(e);if(s.failed)throw new TransformError(s.failed);return this}maybeStep(e){let s=e.apply(this.doc);return s.failed||this.addStep(e,s.doc),s}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,s=-1e9;for(let a=0;a<this.mapping.maps.length;a++){let l=this.mapping.maps[a];a&&(e=l.map(e,1),s=l.map(s,-1)),l.forEach((u,c,d,h)=>{e=Math.min(e,d),s=Math.max(s,h)})}return e==1e9?null:{from:e,to:s}}addStep(e,s){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=s}replace(e,s=e,a=Slice.empty){let l=replaceStep(this.doc,e,s,a);return l&&this.step(l),this}replaceWith(e,s,a){return this.replace(e,s,new Slice(Fragment.from(a),0,0))}delete(e,s){return this.replace(e,s,Slice.empty)}insert(e,s){return this.replaceWith(e,e,s)}replaceRange(e,s,a){return replaceRange(this,e,s,a),this}replaceRangeWith(e,s,a){return replaceRangeWith(this,e,s,a),this}deleteRange(e,s){return deleteRange(this,e,s),this}lift(e,s){return lift$1(this,e,s),this}join(e,s=1){return join(this,e,s),this}wrap(e,s){return wrap$1(this,e,s),this}setBlockType(e,s=e,a,l=null){return setBlockType$1(this,e,s,a,l),this}setNodeMarkup(e,s,a=null,l){return setNodeMarkup(this,e,s,a,l),this}setNodeAttribute(e,s,a){return this.step(new AttrStep(e,s,a)),this}setDocAttribute(e,s){return this.step(new DocAttrStep(e,s)),this}addNodeMark(e,s){return this.step(new AddNodeMarkStep(e,s)),this}removeNodeMark(e,s){let a=this.doc.nodeAt(e);if(!a)throw new RangeError("No node at position "+e);if(s instanceof Mark$1)s.isInSet(a.marks)&&this.step(new RemoveNodeMarkStep(e,s));else{let l=a.marks,u,c=[];for(;u=s.isInSet(l);)c.push(new RemoveNodeMarkStep(e,u)),l=u.removeFromSet(l);for(let d=c.length-1;d>=0;d--)this.step(c[d])}return this}split(e,s=1,a){return split(this,e,s,a),this}addMark(e,s,a){return addMark(this,e,s,a),this}removeMark(e,s,a){return removeMark(this,e,s,a),this}clearIncompatible(e,s,a){return clearIncompatible(this,e,s,a),this}}const classesById=Object.create(null);let Selection$1=class{constructor(e,s,a){this.$anchor=e,this.$head=s,this.ranges=a||[new SelectionRange$1(e.min(s),e.max(s))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let s=0;s<e.length;s++)if(e[s].$from.pos!=e[s].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,s=Slice.empty){let a=s.content.lastChild,l=null;for(let d=0;d<s.openEnd;d++)l=a,a=a.lastChild;let u=e.steps.length,c=this.ranges;for(let d=0;d<c.length;d++){let{$from:h,$to:p}=c[d],m=e.mapping.slice(u);e.replaceRange(m.map(h.pos),m.map(p.pos),d?Slice.empty:s),d==0&&selectionToInsertionEnd(e,u,(a?a.isInline:l&&l.isTextblock)?-1:1)}}replaceWith(e,s){let a=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:c,$to:d}=l[u],h=e.mapping.slice(a),p=h.map(c.pos),m=h.map(d.pos);u?e.deleteRange(p,m):(e.replaceRangeWith(p,m,s),selectionToInsertionEnd(e,a,s.isInline?-1:1))}}static findFrom(e,s,a=!1){let l=e.parent.inlineContent?new TextSelection(e):findSelectionIn(e.node(0),e.parent,e.pos,e.index(),s,a);if(l)return l;for(let u=e.depth-1;u>=0;u--){let c=s<0?findSelectionIn(e.node(0),e.node(u),e.before(u+1),e.index(u),s,a):findSelectionIn(e.node(0),e.node(u),e.after(u+1),e.index(u)+1,s,a);if(c)return c}return null}static near(e,s=1){return this.findFrom(e,s)||this.findFrom(e,-s)||new AllSelection(e.node(0))}static atStart(e){return findSelectionIn(e,e,0,0,1)||new AllSelection(e)}static atEnd(e){return findSelectionIn(e,e,e.content.size,e.childCount,-1)||new AllSelection(e)}static fromJSON(e,s){if(!s||!s.type)throw new RangeError("Invalid input for Selection.fromJSON");let a=classesById[s.type];if(!a)throw new RangeError(`No selection type ${s.type} defined`);return a.fromJSON(e,s)}static jsonID(e,s){if(e in classesById)throw new RangeError("Duplicate use of selection JSON ID "+e);return classesById[e]=s,s.prototype.jsonID=e,s}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}};Selection$1.prototype.visible=!0;let SelectionRange$1=class{constructor(e,s){this.$from=e,this.$to=s}},warnedAboutTextSelection=!1;function checkTextSelection(o){!warnedAboutTextSelection&&!o.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+o.parent.type.name+")"))}class TextSelection extends Selection$1{constructor(e,s=e){checkTextSelection(e),checkTextSelection(s),super(e,s)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,s){let a=e.resolve(s.map(this.head));if(!a.parent.inlineContent)return Selection$1.near(a);let l=e.resolve(s.map(this.anchor));return new TextSelection(l.parent.inlineContent?l:a,a)}replace(e,s=Slice.empty){if(super.replace(e,s),s==Slice.empty){let a=this.$from.marksAcross(this.$to);a&&e.ensureMarks(a)}}eq(e){return e instanceof TextSelection&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,s){if(typeof s.anchor!="number"||typeof s.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(e.resolve(s.anchor),e.resolve(s.head))}static create(e,s,a=s){let l=e.resolve(s);return new this(l,a==s?l:e.resolve(a))}static between(e,s,a){let l=e.pos-s.pos;if((!a||l)&&(a=l>=0?1:-1),!s.parent.inlineContent){let u=Selection$1.findFrom(s,a,!0)||Selection$1.findFrom(s,-a,!0);if(u)s=u.$head;else return Selection$1.near(s,a)}return e.parent.inlineContent||(l==0?e=s:(e=(Selection$1.findFrom(e,-a,!0)||Selection$1.findFrom(e,a,!0)).$anchor,e.pos<s.pos!=l<0&&(e=s))),new TextSelection(e,s)}}Selection$1.jsonID("text",TextSelection);class TextBookmark{constructor(e,s){this.anchor=e,this.head=s}map(e){return new TextBookmark(e.map(this.anchor),e.map(this.head))}resolve(e){return TextSelection.between(e.resolve(this.anchor),e.resolve(this.head))}}class NodeSelection extends Selection$1{constructor(e){let s=e.nodeAfter,a=e.node(0).resolve(e.pos+s.nodeSize);super(e,a),this.node=s}map(e,s){let{deleted:a,pos:l}=s.mapResult(this.anchor),u=e.resolve(l);return a?Selection$1.near(u):new NodeSelection(u)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(e){return e instanceof NodeSelection&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(e,s){if(typeof s.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(e.resolve(s.anchor))}static create(e,s){return new NodeSelection(e.resolve(s))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1,Selection$1.jsonID("node",NodeSelection);class NodeBookmark{constructor(e){this.anchor=e}map(e){let{deleted:s,pos:a}=e.mapResult(this.anchor);return s?new TextBookmark(a,a):new NodeBookmark(a)}resolve(e){let s=e.resolve(this.anchor),a=s.nodeAfter;return a&&NodeSelection.isSelectable(a)?new NodeSelection(s):Selection$1.near(s)}}class AllSelection extends Selection$1{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,s=Slice.empty){if(s==Slice.empty){e.delete(0,e.doc.content.size);let a=Selection$1.atStart(e.doc);a.eq(e.selection)||e.setSelection(a)}else super.replace(e,s)}toJSON(){return{type:"all"}}static fromJSON(e){return new AllSelection(e)}map(e){return new AllSelection(e)}eq(e){return e instanceof AllSelection}getBookmark(){return AllBookmark}}Selection$1.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(o){return new AllSelection(o)}};function findSelectionIn(o,e,s,a,l,u=!1){if(e.inlineContent)return TextSelection.create(o,s);for(let c=a-(l>0?0:1);l>0?c<e.childCount:c>=0;c+=l){let d=e.child(c);if(d.isAtom){if(!u&&NodeSelection.isSelectable(d))return NodeSelection.create(o,s-(l<0?d.nodeSize:0))}else{let h=findSelectionIn(o,d,s+l,l<0?d.childCount:0,l,u);if(h)return h}s+=d.nodeSize*l}return null}function selectionToInsertionEnd(o,e,s){let a=o.steps.length-1;if(a<e)return;let l=o.steps[a];if(!(l instanceof ReplaceStep||l instanceof ReplaceAroundStep))return;let u=o.mapping.maps[a],c;u.forEach((d,h,p,m)=>{c==null&&(c=m)}),o.setSelection(Selection$1.near(o.doc.resolve(c),s))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;let Transaction$1=class extends Transform{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=UPDATED_MARKS,this}ensureMarks(e){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(e,s){super.addStep(e,s),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,s=!0){let a=this.selection;return s&&(e=e.mark(this.storedMarks||(a.empty?a.$from.marks():a.$from.marksAcross(a.$to)||Mark$1.none))),a.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,s,a){let l=this.doc.type.schema;if(s==null)return e?this.replaceSelectionWith(l.text(e),!0):this.deleteSelection();{if(a==null&&(a=s),!e)return this.deleteRange(s,a);let u=this.storedMarks;if(!u){let c=this.doc.resolve(s);u=a==s?c.marks():c.marksAcross(this.doc.resolve(a))}return this.replaceRangeWith(s,a,l.text(e,u)),!this.selection.empty&&this.selection.to==s+e.length&&this.setSelection(Selection$1.near(this.selection.$to)),this}}setMeta(e,s){return this.meta[typeof e=="string"?e:e.key]=s,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}};function bind(o,e){return!e||!o?o:o.bind(e)}class FieldDesc{constructor(e,s,a){this.name=e,this.init=bind(s.init,a),this.apply=bind(s.apply,a)}}const baseFields=[new FieldDesc("doc",{init(o){return o.doc||o.schema.topNodeType.createAndFill()},apply(o){return o.doc}}),new FieldDesc("selection",{init(o,e){return o.selection||Selection$1.atStart(e.doc)},apply(o){return o.selection}}),new FieldDesc("storedMarks",{init(o){return o.storedMarks||null},apply(o,e,s,a){return a.selection.$cursor?o.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(o,e){return o.scrolledIntoView?e+1:e}})];let Configuration$1=class{constructor(e,s){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),s&&s.forEach(a=>{if(this.pluginsByKey[a.key])throw new RangeError("Adding different instances of a keyed plugin ("+a.key+")");this.plugins.push(a),this.pluginsByKey[a.key]=a,a.spec.state&&this.fields.push(new FieldDesc(a.key,a.spec.state,a))})}},EditorState$1=class Ws{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,s=-1){for(let a=0;a<this.config.plugins.length;a++)if(a!=s){let l=this.config.plugins[a];if(l.spec.filterTransaction&&!l.spec.filterTransaction.call(l,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let s=[e],a=this.applyInner(e),l=null;for(;;){let u=!1;for(let c=0;c<this.config.plugins.length;c++){let d=this.config.plugins[c];if(d.spec.appendTransaction){let h=l?l[c].n:0,p=l?l[c].state:this,m=h<s.length&&d.spec.appendTransaction.call(d,h?s.slice(h):s,p,a);if(m&&a.filterTransaction(m,c)){if(m.setMeta("appendedTransaction",e),!l){l=[];for(let g=0;g<this.config.plugins.length;g++)l.push(g<c?{state:a,n:s.length}:{state:this,n:0})}s.push(m),a=a.applyInner(m),u=!0}l&&(l[c]={state:a,n:s.length})}}if(!u)return{state:a,transactions:s}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let s=new Ws(this.config),a=this.config.fields;for(let l=0;l<a.length;l++){let u=a[l];s[u.name]=u.apply(e,this[u.name],this,s)}return s}get tr(){return new Transaction$1(this)}static create(e){let s=new Configuration$1(e.doc?e.doc.type.schema:e.schema,e.plugins),a=new Ws(s);for(let l=0;l<s.fields.length;l++)a[s.fields[l].name]=s.fields[l].init(e,a);return a}reconfigure(e){let s=new Configuration$1(this.schema,e.plugins),a=s.fields,l=new Ws(s);for(let u=0;u<a.length;u++){let c=a[u].name;l[c]=this.hasOwnProperty(c)?this[c]:a[u].init(e,l)}return l}toJSON(e){let s={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(s.storedMarks=this.storedMarks.map(a=>a.toJSON())),e&&typeof e=="object")for(let a in e){if(a=="doc"||a=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let l=e[a],u=l.spec.state;u&&u.toJSON&&(s[a]=u.toJSON.call(l,this[l.key]))}return s}static fromJSON(e,s,a){if(!s)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let l=new Configuration$1(e.schema,e.plugins),u=new Ws(l);return l.fields.forEach(c=>{if(c.name=="doc")u.doc=Node$2.fromJSON(e.schema,s.doc);else if(c.name=="selection")u.selection=Selection$1.fromJSON(u.doc,s.selection);else if(c.name=="storedMarks")s.storedMarks&&(u.storedMarks=s.storedMarks.map(e.schema.markFromJSON));else{if(a)for(let d in a){let h=a[d],p=h.spec.state;if(h.key==c.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(s,d)){u[c.name]=p.fromJSON.call(h,e,s[d],u);return}}u[c.name]=c.init(e,u)}}),u}};function bindProps(o,e,s){for(let a in o){let l=o[a];l instanceof Function?l=l.bind(e):a=="handleDOMEvents"&&(l=bindProps(l,e,{})),s[a]=l}return s}class Plugin{constructor(e){this.spec=e,this.props={},e.props&&bindProps(e.props,this,this.props),this.key=e.key?e.key.key:createKey("plugin")}getState(e){return e[this.key]}}const keys$2=Object.create(null);function createKey(o){return o in keys$2?o+"$"+ ++keys$2[o]:(keys$2[o]=0,o+"$")}class PluginKey{constructor(e="key"){this.key=createKey(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const domIndex$1=function(o){for(var e=0;;e++)if(o=o.previousSibling,!o)return e},parentNode=function(o){let e=o.assignedSlot||o.parentNode;return e&&e.nodeType==11?e.host:e};let reusedRange=null;const textRange$1=function(o,e,s){let a=reusedRange||(reusedRange=document.createRange());return a.setEnd(o,s??o.nodeValue.length),a.setStart(o,e||0),a},clearReusedRange=function(){reusedRange=null},isEquivalentPosition$1=function(o,e,s,a){return s&&(scanFor$1(o,e,s,a,-1)||scanFor$1(o,e,s,a,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor$1(o,e,s,a,l){for(var u;;){if(o==s&&e==a)return!0;if(e==(l<0?0:nodeSize$1(o))){let c=o.parentNode;if(!c||c.nodeType!=1||hasBlockDesc(o)||atomElements.test(o.nodeName)||o.contentEditable=="false")return!1;e=domIndex$1(o)+(l<0?0:1),o=c}else if(o.nodeType==1){let c=o.childNodes[e+(l<0?-1:0)];if(c.nodeType==1&&c.contentEditable=="false")if(!((u=c.pmViewDesc)===null||u===void 0)&&u.ignoreForSelection)e+=l;else return!1;else o=c,e=l<0?nodeSize$1(o):0}else return!1}}function nodeSize$1(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}function textNodeBefore$1(o,e){for(;;){if(o.nodeType==3&&e)return o;if(o.nodeType==1&&e>0){if(o.contentEditable=="false")return null;o=o.childNodes[e-1],e=nodeSize$1(o)}else if(o.parentNode&&!hasBlockDesc(o))e=domIndex$1(o),o=o.parentNode;else return null}}function textNodeAfter$1(o,e){for(;;){if(o.nodeType==3&&e<o.nodeValue.length)return o;if(o.nodeType==1&&e<o.childNodes.length){if(o.contentEditable=="false")return null;o=o.childNodes[e],e=0}else if(o.parentNode&&!hasBlockDesc(o))e=domIndex$1(o)+1,o=o.parentNode;else return null}}function isOnEdge(o,e,s){for(let a=e==0,l=e==nodeSize$1(o);a||l;){if(o==s)return!0;let u=domIndex$1(o);if(o=o.parentNode,!o)return!1;a=a&&u==0,l=l&&u==nodeSize$1(o)}}function hasBlockDesc(o){let e;for(let s=o;s&&!(e=s.pmViewDesc);s=s.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==o||e.contentDOM==o)}const selectionCollapsed=function(o){return o.focusNode&&isEquivalentPosition$1(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)};function keyEvent(o,e){let s=document.createEvent("Event");return s.initEvent("keydown",!0,!0),s.keyCode=o,s.key=s.code=e,s}function deepActiveElement(o){let e=o.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function caretFromPoint(o,e,s){if(o.caretPositionFromPoint)try{let a=o.caretPositionFromPoint(e,s);if(a)return{node:a.offsetNode,offset:Math.min(nodeSize$1(a.offsetNode),a.offset)}}catch{}if(o.caretRangeFromPoint){let a=o.caretRangeFromPoint(e,s);if(a)return{node:a.startContainer,offset:Math.min(nodeSize$1(a.startContainer),a.startOffset)}}}const nav$1=typeof navigator<"u"?navigator:null,doc$1=typeof document<"u"?document:null,agent=nav$1&&nav$1.userAgent||"",ie_edge$1=/Edge\/(\d+)/.exec(agent),ie_upto10$1=/MSIE \d/.exec(agent),ie_11up$1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$2=!!(ie_upto10$1||ie_11up$1||ie_edge$1),ie_version=ie_upto10$1?document.documentMode:ie_11up$1?+ie_11up$1[1]:ie_edge$1?+ie_edge$1[1]:0,gecko$1=!ie$2&&/gecko\/(\d+)/i.test(agent);gecko$1&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$2&&/Chrome\/(\d+)/.exec(agent),chrome$1=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari$1=!ie$2&&!!nav$1&&/Apple Computer/.test(nav$1.vendor),ios$1=safari$1&&(/Mobile\/\w+/.test(agent)||!!nav$1&&nav$1.maxTouchPoints>2),mac$3=ios$1||(nav$1?/Mac/.test(nav$1.platform):!1),windows$2=nav$1?/Win/.test(nav$1.platform):!1,android$1=/Android \d/.test(agent),webkit$1=!!doc$1&&"webkitFontSmoothing"in doc$1.documentElement.style,webkit_version=webkit$1?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect$1(o){let e=o.defaultView&&o.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:o.documentElement.clientWidth,top:0,bottom:o.documentElement.clientHeight}}function getSide(o,e){return typeof o=="number"?o:o[e]}function clientRect(o){let e=o.getBoundingClientRect(),s=e.width/o.offsetWidth||1,a=e.height/o.offsetHeight||1;return{left:e.left,right:e.left+o.clientWidth*s,top:e.top,bottom:e.top+o.clientHeight*a}}function scrollRectIntoView$1(o,e,s){let a=o.someProp("scrollThreshold")||0,l=o.someProp("scrollMargin")||5,u=o.dom.ownerDocument;for(let c=s||o.dom;c;){if(c.nodeType!=1){c=parentNode(c);continue}let d=c,h=d==u.body,p=h?windowRect$1(u):clientRect(d),m=0,g=0;if(e.top<p.top+getSide(a,"top")?g=-(p.top-e.top+getSide(l,"top")):e.bottom>p.bottom-getSide(a,"bottom")&&(g=e.bottom-e.top>p.bottom-p.top?e.top+getSide(l,"top")-p.top:e.bottom-p.bottom+getSide(l,"bottom")),e.left<p.left+getSide(a,"left")?m=-(p.left-e.left+getSide(l,"left")):e.right>p.right-getSide(a,"right")&&(m=e.right-p.right+getSide(l,"right")),m||g)if(h)u.defaultView.scrollBy(m,g);else{let A=d.scrollLeft,T=d.scrollTop;g&&(d.scrollTop+=g),m&&(d.scrollLeft+=m);let E=d.scrollLeft-A,v=d.scrollTop-T;e={left:e.left-E,top:e.top-v,right:e.right-E,bottom:e.bottom-v}}let y=h?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(y))break;c=y=="absolute"?c.offsetParent:parentNode(c)}}function storeScrollPos(o){let e=o.dom.getBoundingClientRect(),s=Math.max(0,e.top),a,l;for(let u=(e.left+e.right)/2,c=s+1;c<Math.min(innerHeight,e.bottom);c+=5){let d=o.root.elementFromPoint(u,c);if(!d||d==o.dom||!o.dom.contains(d))continue;let h=d.getBoundingClientRect();if(h.top>=s-20){a=d,l=h.top;break}}return{refDOM:a,refTop:l,stack:scrollStack(o.dom)}}function scrollStack(o){let e=[],s=o.ownerDocument;for(let a=o;a&&(e.push({dom:a,top:a.scrollTop,left:a.scrollLeft}),o!=s);a=parentNode(a));return e}function resetScrollPos({refDOM:o,refTop:e,stack:s}){let a=o?o.getBoundingClientRect().top:0;restoreScrollStack(s,a==0?0:a-e)}function restoreScrollStack(o,e){for(let s=0;s<o.length;s++){let{dom:a,top:l,left:u}=o[s];a.scrollTop!=l+e&&(a.scrollTop=l+e),a.scrollLeft!=u&&(a.scrollLeft=u)}}let preventScrollSupported$1=null;function focusPreventScroll$1(o){if(o.setActive)return o.setActive();if(preventScrollSupported$1)return o.focus(preventScrollSupported$1);let e=scrollStack(o);o.focus(preventScrollSupported$1==null?{get preventScroll(){return preventScrollSupported$1={preventScroll:!0},!0}}:void 0),preventScrollSupported$1||(preventScrollSupported$1=!1,restoreScrollStack(e,0))}function findOffsetInNode(o,e){let s,a=2e8,l,u=0,c=e.top,d=e.top,h,p;for(let m=o.firstChild,g=0;m;m=m.nextSibling,g++){let y;if(m.nodeType==1)y=m.getClientRects();else if(m.nodeType==3)y=textRange$1(m).getClientRects();else continue;for(let A=0;A<y.length;A++){let T=y[A];if(T.top<=c&&T.bottom>=d){c=Math.max(T.bottom,c),d=Math.min(T.top,d);let E=T.left>e.left?T.left-e.left:T.right<e.left?e.left-T.right:0;if(E<a){s=m,a=E,l=E&&s.nodeType==3?{left:T.right<e.left?T.right:T.left,top:e.top}:e,m.nodeType==1&&E&&(u=g+(e.left>=(T.left+T.right)/2?1:0));continue}}else T.top>e.top&&!h&&T.left<=e.left&&T.right>=e.left&&(h=m,p={left:Math.max(T.left,Math.min(T.right,e.left)),top:T.top});!s&&(e.left>=T.right&&e.top>=T.top||e.left>=T.left&&e.top>=T.bottom)&&(u=g+1)}}return!s&&h&&(s=h,l=p,a=0),s&&s.nodeType==3?findOffsetInText(s,l):!s||a&&s.nodeType==1?{node:o,offset:u}:findOffsetInNode(s,l)}function findOffsetInText(o,e){let s=o.nodeValue.length,a=document.createRange(),l;for(let u=0;u<s;u++){a.setEnd(o,u+1),a.setStart(o,u);let c=singleRect(a,1);if(c.top!=c.bottom&&inRect(e,c)){l={node:o,offset:u+(e.left>=(c.left+c.right)/2?1:0)};break}}return a.detach(),l||{node:o,offset:0}}function inRect(o,e){return o.left>=e.left-1&&o.left<=e.right+1&&o.top>=e.top-1&&o.top<=e.bottom+1}function targetKludge(o,e){let s=o.parentNode;return s&&/^li$/i.test(s.nodeName)&&e.left<o.getBoundingClientRect().left?s:o}function posFromElement(o,e,s){let{node:a,offset:l}=findOffsetInNode(e,s),u=-1;if(a.nodeType==1&&!a.firstChild){let c=a.getBoundingClientRect();u=c.left!=c.right&&s.left>(c.left+c.right)/2?1:-1}return o.docView.posFromDOM(a,l,u)}function posFromCaret(o,e,s,a){let l=-1;for(let u=e,c=!1;u!=o.dom;){let d=o.docView.nearestDesc(u,!0),h;if(!d)return null;if(d.dom.nodeType==1&&(d.node.isBlock&&d.parent||!d.contentDOM)&&((h=d.dom.getBoundingClientRect()).width||h.height)&&(d.node.isBlock&&d.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(d.dom.nodeName)&&(!c&&h.left>a.left||h.top>a.top?l=d.posBefore:(!c&&h.right<a.left||h.bottom<a.top)&&(l=d.posAfter),c=!0),!d.contentDOM&&l<0&&!d.node.isText))return(d.node.isBlock?a.top<(h.top+h.bottom)/2:a.left<(h.left+h.right)/2)?d.posBefore:d.posAfter;u=d.dom.parentNode}return l>-1?l:o.docView.posFromDOM(e,s,-1)}function elementFromPoint(o,e,s){let a=o.childNodes.length;if(a&&s.top<s.bottom)for(let l=Math.max(0,Math.min(a-1,Math.floor(a*(e.top-s.top)/(s.bottom-s.top))-2)),u=l;;){let c=o.childNodes[u];if(c.nodeType==1){let d=c.getClientRects();for(let h=0;h<d.length;h++){let p=d[h];if(inRect(e,p))return elementFromPoint(c,e,p)}}if((u=(u+1)%a)==l)break}return o}function posAtCoords$1(o,e){let s=o.dom.ownerDocument,a,l=0,u=caretFromPoint(s,e.left,e.top);u&&({node:a,offset:l}=u);let c=(o.root.elementFromPoint?o.root:s).elementFromPoint(e.left,e.top),d;if(!c||!o.dom.contains(c.nodeType!=1?c.parentNode:c)){let p=o.dom.getBoundingClientRect();if(!inRect(e,p)||(c=elementFromPoint(o.dom,e,p),!c))return null}if(safari$1)for(let p=c;a&&p;p=parentNode(p))p.draggable&&(a=void 0);if(c=targetKludge(c,e),a){if(gecko$1&&a.nodeType==1&&(l=Math.min(l,a.childNodes.length),l<a.childNodes.length)){let m=a.childNodes[l],g;m.nodeName=="IMG"&&(g=m.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&l++}let p;webkit$1&&l&&a.nodeType==1&&(p=a.childNodes[l-1]).nodeType==1&&p.contentEditable=="false"&&p.getBoundingClientRect().top>=e.top&&l--,a==o.dom&&l==a.childNodes.length-1&&a.lastChild.nodeType==1&&e.top>a.lastChild.getBoundingClientRect().bottom?d=o.state.doc.content.size:(l==0||a.nodeType!=1||a.childNodes[l-1].nodeName!="BR")&&(d=posFromCaret(o,a,l,e))}d==null&&(d=posFromElement(o,c,e));let h=o.docView.nearestDesc(c,!0);return{pos:d,inside:h?h.posAtStart-h.border:-1}}function nonZero(o){return o.top<o.bottom||o.left<o.right}function singleRect(o,e){let s=o.getClientRects();if(s.length){let a=s[e<0?0:s.length-1];if(nonZero(a))return a}return Array.prototype.find.call(s,nonZero)||o.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(o,e,s){let{node:a,offset:l,atom:u}=o.docView.domFromPos(e,s<0?-1:1),c=webkit$1||gecko$1;if(a.nodeType==3)if(c&&(BIDI.test(a.nodeValue)||(s<0?!l:l==a.nodeValue.length))){let h=singleRect(textRange$1(a,l,l),s);if(gecko$1&&l&&/\s/.test(a.nodeValue[l-1])&&l<a.nodeValue.length){let p=singleRect(textRange$1(a,l-1,l-1),-1);if(p.top==h.top){let m=singleRect(textRange$1(a,l,l+1),-1);if(m.top!=h.top)return flattenV(m,m.left<p.left)}}return h}else{let h=l,p=l,m=s<0?1:-1;return s<0&&!l?(p++,m=-1):s>=0&&l==a.nodeValue.length?(h--,m=1):s<0?h--:p++,flattenV(singleRect(textRange$1(a,h,p),m),m<0)}if(!o.state.doc.resolve(e-(u||0)).parent.inlineContent){if(u==null&&l&&(s<0||l==nodeSize$1(a))){let h=a.childNodes[l-1];if(h.nodeType==1)return flattenH(h.getBoundingClientRect(),!1)}if(u==null&&l<nodeSize$1(a)){let h=a.childNodes[l];if(h.nodeType==1)return flattenH(h.getBoundingClientRect(),!0)}return flattenH(a.getBoundingClientRect(),s>=0)}if(u==null&&l&&(s<0||l==nodeSize$1(a))){let h=a.childNodes[l-1],p=h.nodeType==3?textRange$1(h,nodeSize$1(h)-(c?0:1)):h.nodeType==1&&(h.nodeName!="BR"||!h.nextSibling)?h:null;if(p)return flattenV(singleRect(p,1),!1)}if(u==null&&l<nodeSize$1(a)){let h=a.childNodes[l];for(;h.pmViewDesc&&h.pmViewDesc.ignoreForCoords;)h=h.nextSibling;let p=h?h.nodeType==3?textRange$1(h,0,c?0:1):h.nodeType==1?h:null:null;if(p)return flattenV(singleRect(p,-1),!0)}return flattenV(singleRect(a.nodeType==3?textRange$1(a):a,-s),s>=0)}function flattenV(o,e){if(o.width==0)return o;let s=e?o.left:o.right;return{top:o.top,bottom:o.bottom,left:s,right:s}}function flattenH(o,e){if(o.height==0)return o;let s=e?o.top:o.bottom;return{top:s,bottom:s,left:o.left,right:o.right}}function withFlushedState(o,e,s){let a=o.state,l=o.root.activeElement;a!=e&&o.updateState(e),l!=o.dom&&o.focus();try{return s()}finally{a!=e&&o.updateState(a),l!=o.dom&&l&&l.focus()}}function endOfTextblockVertical(o,e,s){let a=e.selection,l=s=="up"?a.$from:a.$to;return withFlushedState(o,e,()=>{let{node:u}=o.docView.domFromPos(l.pos,s=="up"?-1:1);for(;;){let d=o.docView.nearestDesc(u,!0);if(!d)break;if(d.node.isBlock){u=d.contentDOM||d.dom;break}u=d.dom.parentNode}let c=coordsAtPos(o,l.pos,1);for(let d=u.firstChild;d;d=d.nextSibling){let h;if(d.nodeType==1)h=d.getClientRects();else if(d.nodeType==3)h=textRange$1(d,0,d.nodeValue.length).getClientRects();else continue;for(let p=0;p<h.length;p++){let m=h[p];if(m.bottom>m.top+1&&(s=="up"?c.top-m.top>(m.bottom-c.top)*2:m.bottom-c.bottom>(c.bottom-m.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(o,e,s){let{$head:a}=e.selection;if(!a.parent.isTextblock)return!1;let l=a.parentOffset,u=!l,c=l==a.parent.content.size,d=o.domSelection();return d?!maybeRTL.test(a.parent.textContent)||!d.modify?s=="left"||s=="backward"?u:c:withFlushedState(o,e,()=>{let{focusNode:h,focusOffset:p,anchorNode:m,anchorOffset:g}=o.domSelectionRange(),y=d.caretBidiLevel;d.modify("move",s,"character");let A=a.depth?o.docView.domAfterPos(a.before()):o.dom,{focusNode:T,focusOffset:E}=o.domSelectionRange(),v=T&&!A.contains(T.nodeType==1?T:T.parentNode)||h==T&&p==E;try{d.collapse(m,g),h&&(h!=m||p!=g)&&d.extend&&d.extend(h,p)}catch{}return y!=null&&(d.caretBidiLevel=y),v}):a.pos==a.start()||a.pos==a.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(o,e,s){return cachedState==e&&cachedDir==s?cachedResult:(cachedState=e,cachedDir=s,cachedResult=s=="up"||s=="down"?endOfTextblockVertical(o,e,s):endOfTextblockHorizontal(o,e,s))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(e,s,a,l){this.parent=e,this.children=s,this.dom=a,this.contentDOM=l,this.dirty=NOT_DIRTY,a.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,s,a){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let s=0;s<this.children.length;s++)e+=this.children[s].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let s=0,a=this.posAtStart;;s++){let l=this.children[s];if(l==e)return a;a+=l.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,s,a){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(a<0){let u,c;if(e==this.contentDOM)u=e.childNodes[s-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;u=e.previousSibling}for(;u&&!((c=u.pmViewDesc)&&c.parent==this);)u=u.previousSibling;return u?this.posBeforeChild(c)+c.size:this.posAtStart}else{let u,c;if(e==this.contentDOM)u=e.childNodes[s];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;u=e.nextSibling}for(;u&&!((c=u.pmViewDesc)&&c.parent==this);)u=u.nextSibling;return u?this.posBeforeChild(c):this.posAtEnd}let l;if(e==this.dom&&this.contentDOM)l=s>domIndex$1(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))l=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(s==0)for(let u=e;;u=u.parentNode){if(u==this.dom){l=!1;break}if(u.previousSibling)break}if(l==null&&s==e.childNodes.length)for(let u=e;;u=u.parentNode){if(u==this.dom){l=!0;break}if(u.nextSibling)break}}return l??a>0?this.posAtEnd:this.posAtStart}nearestDesc(e,s=!1){for(let a=!0,l=e;l;l=l.parentNode){let u=this.getDesc(l),c;if(u&&(!s||u.node))if(a&&(c=u.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))a=!1;else return u}}getDesc(e){let s=e.pmViewDesc;for(let a=s;a;a=a.parent)if(a==this)return s}posFromDOM(e,s,a){for(let l=e;l;l=l.parentNode){let u=this.getDesc(l);if(u)return u.localPosFromDOM(e,s,a)}return-1}descAt(e){for(let s=0,a=0;s<this.children.length;s++){let l=this.children[s],u=a+l.size;if(a==e&&u!=a){for(;!l.border&&l.children.length;)for(let c=0;c<l.children.length;c++){let d=l.children[c];if(d.size){l=d;break}}return l}if(e<u)return l.descAt(e-a-l.border);a=u}}domFromPos(e,s){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let a=0,l=0;for(let u=0;a<this.children.length;a++){let c=this.children[a],d=u+c.size;if(d>e||c instanceof TrailingHackViewDesc){l=e-u;break}u=d}if(l)return this.children[a].domFromPos(l-this.children[a].border,s);for(let u;a&&!(u=this.children[a-1]).size&&u instanceof WidgetViewDesc&&u.side>=0;a--);if(s<=0){let u,c=!0;for(;u=a?this.children[a-1]:null,!(!u||u.dom.parentNode==this.contentDOM);a--,c=!1);return u&&s&&c&&!u.border&&!u.domAtom?u.domFromPos(u.size,s):{node:this.contentDOM,offset:u?domIndex$1(u.dom)+1:0}}else{let u,c=!0;for(;u=a<this.children.length?this.children[a]:null,!(!u||u.dom.parentNode==this.contentDOM);a++,c=!1);return u&&c&&!u.border&&!u.domAtom?u.domFromPos(0,s):{node:this.contentDOM,offset:u?domIndex$1(u.dom):this.contentDOM.childNodes.length}}}parseRange(e,s,a=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:s,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let l=-1,u=-1;for(let c=a,d=0;;d++){let h=this.children[d],p=c+h.size;if(l==-1&&e<=p){let m=c+h.border;if(e>=m&&s<=p-h.border&&h.node&&h.contentDOM&&this.contentDOM.contains(h.contentDOM))return h.parseRange(e,s,m);e=c;for(let g=d;g>0;g--){let y=this.children[g-1];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(1)){l=domIndex$1(y.dom)+1;break}e-=y.size}l==-1&&(l=0)}if(l>-1&&(p>s||d==this.children.length-1)){s=p;for(let m=d+1;m<this.children.length;m++){let g=this.children[m];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){u=domIndex$1(g.dom);break}s+=g.size}u==-1&&(u=this.contentDOM.childNodes.length);break}c=p}return{node:this.contentDOM,from:e,to:s,fromOffset:l,toOffset:u}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let s=this.children[e<0?0:this.children.length-1];return s.size==0||s.emptyChildAt(e)}domAfterPos(e){let{node:s,offset:a}=this.domFromPos(e,0);if(s.nodeType!=1||a==s.childNodes.length)throw new RangeError("No node after pos "+e);return s.childNodes[a]}setSelection(e,s,a,l=!1){let u=Math.min(e,s),c=Math.max(e,s);for(let A=0,T=0;A<this.children.length;A++){let E=this.children[A],v=T+E.size;if(u>T&&c<v)return E.setSelection(e-T-E.border,s-T-E.border,a,l);T=v}let d=this.domFromPos(e,e?-1:1),h=s==e?d:this.domFromPos(s,s?-1:1),p=a.root.getSelection(),m=a.domSelectionRange(),g=!1;if((gecko$1||safari$1)&&e==s){let{node:A,offset:T}=d;if(A.nodeType==3){if(g=!!(T&&A.nodeValue[T-1]==`
`),g&&T==A.nodeValue.length)for(let E=A,v;E;E=E.parentNode){if(v=E.nextSibling){v.nodeName=="BR"&&(d=h={node:v.parentNode,offset:domIndex$1(v)+1});break}let _=E.pmViewDesc;if(_&&_.node&&_.node.isBlock)break}}else{let E=A.childNodes[T-1];g=E&&(E.nodeName=="BR"||E.contentEditable=="false")}}if(gecko$1&&m.focusNode&&m.focusNode!=h.node&&m.focusNode.nodeType==1){let A=m.focusNode.childNodes[m.focusOffset];A&&A.contentEditable=="false"&&(l=!0)}if(!(l||g&&safari$1)&&isEquivalentPosition$1(d.node,d.offset,m.anchorNode,m.anchorOffset)&&isEquivalentPosition$1(h.node,h.offset,m.focusNode,m.focusOffset))return;let y=!1;if((p.extend||e==s)&&!(g&&gecko$1)){p.collapse(d.node,d.offset);try{e!=s&&p.extend(h.node,h.offset),y=!0}catch{}}if(!y){if(e>s){let T=d;d=h,h=T}let A=document.createRange();A.setEnd(h.node,h.offset),A.setStart(d.node,d.offset),p.removeAllRanges(),p.addRange(A)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,s){for(let a=0,l=0;l<this.children.length;l++){let u=this.children[l],c=a+u.size;if(a==c?e<=c&&s>=a:e<c&&s>a){let d=a+u.border,h=c-u.border;if(e>=d&&s<=h){this.dirty=e==a||s==c?CONTENT_DIRTY:CHILD_DIRTY,e==d&&s==h&&(u.contentLost||u.dom.parentNode!=this.contentDOM)?u.dirty=NODE_DIRTY:u.markDirty(e-d,s-d);return}else u.dirty=u.dom==u.contentDOM&&u.dom.parentNode==this.contentDOM&&!u.children.length?CONTENT_DIRTY:NODE_DIRTY}a=c}this.dirty=CONTENT_DIRTY}markParentsDirty(){let e=1;for(let s=this.parent;s;s=s.parent,e++){let a=e==1?CONTENT_DIRTY:CHILD_DIRTY;s.dirty<a&&(s.dirty=a)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class WidgetViewDesc extends ViewDesc{constructor(e,s,a,l){let u,c=s.type.toDOM;if(typeof c=="function"&&(c=c(a,()=>{if(!u)return l;if(u.parent)return u.parent.posBeforeChild(u)})),!s.type.spec.raw){if(c.nodeType!=1){let d=document.createElement("span");d.appendChild(c),c=d}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=s,this.widget=s,u=this}matchesWidget(e){return this.dirty==NOT_DIRTY&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let s=this.widget.spec.stopEvent;return s?s(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(e,s,a,l){super(e,[],s,null),this.textDOM=a,this.text=l}get size(){return this.text.length}localPosFromDOM(e,s){return e!=this.textDOM?this.posAtStart+(s?this.size:0):this.posAtStart+s}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class MarkViewDesc extends ViewDesc{constructor(e,s,a,l,u){super(e,[],a,l),this.mark=s,this.spec=u}static create(e,s,a,l){let u=l.nodeViews[s.type.name],c=u&&u(s,l,a);return(!c||!c.dom)&&(c=DOMSerializer.renderSpec(document,s.type.spec.toDOM(s,a),null,s.attrs)),new MarkViewDesc(e,s,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=NODE_DIRTY&&this.mark.eq(e)}markDirty(e,s){if(super.markDirty(e,s),this.dirty!=NOT_DIRTY){let a=this.parent;for(;!a.node;)a=a.parent;a.dirty<this.dirty&&(a.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(e,s,a){let l=MarkViewDesc.create(this.parent,this.mark,!0,a),u=this.children,c=this.size;s<c&&(u=replaceNodes(u,s,c,a)),e>0&&(u=replaceNodes(u,0,e,a));for(let d=0;d<u.length;d++)u[d].parent=l;return l.children=u,l}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(e,s,a,l,u,c,d,h,p){super(e,[],u,c),this.node=s,this.outerDeco=a,this.innerDeco=l,this.nodeDOM=d}static create(e,s,a,l,u,c){let d=u.nodeViews[s.type.name],h,p=d&&d(s,u,()=>{if(!h)return c;if(h.parent)return h.parent.posBeforeChild(h)},a,l),m=p&&p.dom,g=p&&p.contentDOM;if(s.isText){if(!m)m=document.createTextNode(s.text);else if(m.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else m||({dom:m,contentDOM:g}=DOMSerializer.renderSpec(document,s.type.spec.toDOM(s),null,s.attrs));!g&&!s.isText&&m.nodeName!="BR"&&(m.hasAttribute("contenteditable")||(m.contentEditable="false"),s.type.spec.draggable&&(m.draggable=!0));let y=m;return m=applyOuterDeco(m,a,s),p?h=new CustomNodeViewDesc(e,s,a,l,m,g||null,y,p,u,c+1):s.isText?new TextViewDesc(e,s,a,l,m,y,u):new NodeViewDesc(e,s,a,l,m,g||null,y,u,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let s=this.children.length-1;s>=0;s--){let a=this.children[s];if(this.dom.contains(a.dom.parentNode)){e.contentElement=a.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Fragment.empty)}return e}matchesNode(e,s,a){return this.dirty==NOT_DIRTY&&e.eq(this.node)&&sameOuterDeco(s,this.outerDeco)&&a.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,s){let a=this.node.inlineContent,l=s,u=e.composing?this.localCompositionInfo(e,s):null,c=u&&u.pos>-1?u:null,d=u&&u.pos<0,h=new ViewTreeUpdater(this,c&&c.node,e);iterDeco(this.node,this.innerDeco,(p,m,g)=>{p.spec.marks?h.syncToMarks(p.spec.marks,a,e,m):p.type.side>=0&&!g&&h.syncToMarks(m==this.node.childCount?Mark$1.none:this.node.child(m).marks,a,e,m),h.placeWidget(p,e,l)},(p,m,g,y)=>{h.syncToMarks(p.marks,a,e,y);let A;h.findNodeMatch(p,m,g,y)||d&&e.state.selection.from>l&&e.state.selection.to<l+p.nodeSize&&(A=h.findIndexWithChild(u.node))>-1&&h.updateNodeAt(p,m,g,A,e)||h.updateNextNode(p,m,g,e,y,l)||h.addNode(p,m,g,e,l),l+=p.nodeSize}),h.syncToMarks([],a,e,0),this.node.isTextblock&&h.addTextblockHacks(),h.destroyRest(),(h.changed||this.dirty==CONTENT_DIRTY)&&(c&&this.protectLocalComposition(e,c),renderDescs(this.contentDOM,this.children,e),ios$1&&iosHacks(this.dom))}localCompositionInfo(e,s){let{from:a,to:l}=e.state.selection;if(!(e.state.selection instanceof TextSelection)||a<s||l>s+this.node.content.size)return null;let u=e.input.compositionNode;if(!u||!this.dom.contains(u.parentNode))return null;if(this.node.inlineContent){let c=u.nodeValue,d=findTextInFragment(this.node.content,c,a-s,l-s);return d<0?null:{node:u,pos:d,text:c}}else return{node:u,pos:-1,text:""}}protectLocalComposition(e,{node:s,pos:a,text:l}){if(this.getDesc(s))return;let u=s;for(;u.parentNode!=this.contentDOM;u=u.parentNode){for(;u.previousSibling;)u.parentNode.removeChild(u.previousSibling);for(;u.nextSibling;)u.parentNode.removeChild(u.nextSibling);u.pmViewDesc&&(u.pmViewDesc=void 0)}let c=new CompositionViewDesc(this,u,s,l);e.input.compositionNodes.push(c),this.children=replaceNodes(this.children,a,a+l.length,e,c)}update(e,s,a,l){return this.dirty==NODE_DIRTY||!e.sameMarkup(this.node)?!1:(this.updateInner(e,s,a,l),!0)}updateInner(e,s,a,l){this.updateOuterDeco(s),this.node=e,this.innerDeco=a,this.contentDOM&&this.updateChildren(l,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(e){if(sameOuterDeco(e,this.outerDeco))return;let s=this.nodeDOM.nodeType!=1,a=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,s),computeOuterDeco(e,this.node,s)),this.dom!=a&&(a.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(o,e,s,a,l){applyOuterDeco(a,e,o);let u=new NodeViewDesc(void 0,o,e,s,a,a,a,l,0);return u.contentDOM&&u.updateChildren(l,0),u}class TextViewDesc extends NodeViewDesc{constructor(e,s,a,l,u,c,d){super(e,s,a,l,u,null,c,d,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,s,a,l){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(s),(this.dirty!=NOT_DIRTY||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,l.trackWrites==this.nodeDOM&&(l.trackWrites=null)),this.node=e,this.dirty=NOT_DIRTY,!0)}inParent(){let e=this.parent.contentDOM;for(let s=this.nodeDOM;s;s=s.parentNode)if(s==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,s,a){return e==this.nodeDOM?this.posAtStart+Math.min(s,this.node.text.length):super.localPosFromDOM(e,s,a)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,s,a){let l=this.node.cut(e,s),u=document.createTextNode(l.text);return new TextViewDesc(this.parent,l,this.outerDeco,this.innerDeco,u,u,a)}markDirty(e,s){super.markDirty(e,s),this.dom!=this.nodeDOM&&(e==0||s==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(e){return this.node.text==e}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==NOT_DIRTY&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(e,s,a,l,u,c,d,h,p,m){super(e,s,a,l,u,c,d,p,m),this.spec=h}update(e,s,a,l){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let u=this.spec.update(e,s,a);return u&&this.updateInner(e,s,a,l),u}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,s,a,l)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,s,a,l){this.spec.setSelection?this.spec.setSelection(e,s,a.root):super.setSelection(e,s,a,l)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function renderDescs(o,e,s){let a=o.firstChild,l=!1;for(let u=0;u<e.length;u++){let c=e[u],d=c.dom;if(d.parentNode==o){for(;d!=a;)a=rm$2(a),l=!0;a=a.nextSibling}else l=!0,o.insertBefore(d,a);if(c instanceof MarkViewDesc){let h=a?a.previousSibling:o.lastChild;renderDescs(c.contentDOM,c.children,s),a=h?h.nextSibling:o.firstChild}}for(;a;)a=rm$2(a),l=!0;l&&s.trackWrites==o&&(s.trackWrites=null)}const OuterDecoLevel=function(o){o&&(this.nodeName=o)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(o,e,s){if(o.length==0)return noDeco;let a=s?noDeco[0]:new OuterDecoLevel,l=[a];for(let u=0;u<o.length;u++){let c=o[u].type.attrs;if(c){c.nodeName&&l.push(a=new OuterDecoLevel(c.nodeName));for(let d in c){let h=c[d];h!=null&&(s&&l.length==1&&l.push(a=new OuterDecoLevel(e.isInline?"span":"div")),d=="class"?a.class=(a.class?a.class+" ":"")+h:d=="style"?a.style=(a.style?a.style+";":"")+h:d!="nodeName"&&(a[d]=h))}}}return l}function patchOuterDeco(o,e,s,a){if(s==noDeco&&a==noDeco)return e;let l=e;for(let u=0;u<a.length;u++){let c=a[u],d=s[u];if(u){let h;d&&d.nodeName==c.nodeName&&l!=o&&(h=l.parentNode)&&h.nodeName.toLowerCase()==c.nodeName||(h=document.createElement(c.nodeName),h.pmIsDeco=!0,h.appendChild(l),d=noDeco[0]),l=h}patchAttributes(l,d||noDeco[0],c)}return l}function patchAttributes(o,e,s){for(let a in e)a!="class"&&a!="style"&&a!="nodeName"&&!(a in s)&&o.removeAttribute(a);for(let a in s)a!="class"&&a!="style"&&a!="nodeName"&&s[a]!=e[a]&&o.setAttribute(a,s[a]);if(e.class!=s.class){let a=e.class?e.class.split(" ").filter(Boolean):[],l=s.class?s.class.split(" ").filter(Boolean):[];for(let u=0;u<a.length;u++)l.indexOf(a[u])==-1&&o.classList.remove(a[u]);for(let u=0;u<l.length;u++)a.indexOf(l[u])==-1&&o.classList.add(l[u]);o.classList.length==0&&o.removeAttribute("class")}if(e.style!=s.style){if(e.style){let a=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,l;for(;l=a.exec(e.style);)o.style.removeProperty(l[1])}s.style&&(o.style.cssText+=s.style)}}function applyOuterDeco(o,e,s){return patchOuterDeco(o,o,noDeco,computeOuterDeco(e,s,o.nodeType!=1))}function sameOuterDeco(o,e){if(o.length!=e.length)return!1;for(let s=0;s<o.length;s++)if(!o[s].type.eq(e[s].type))return!1;return!0}function rm$2(o){let e=o.nextSibling;return o.parentNode.removeChild(o),e}class ViewTreeUpdater{constructor(e,s,a){this.lock=s,this.view=a,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=preMatch(e.node.content,e)}destroyBetween(e,s){if(e!=s){for(let a=e;a<s;a++)this.top.children[a].destroy();this.top.children.splice(e,s-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,s,a,l){let u=0,c=this.stack.length>>1,d=Math.min(c,e.length);for(;u<d&&(u==c-1?this.top:this.stack[u+1<<1]).matchesMark(e[u])&&e[u].type.spec.spanning!==!1;)u++;for(;u<c;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),c--;for(;c<e.length;){this.stack.push(this.top,this.index+1);let h=-1,p=this.top.children.length;l<this.preMatch.index&&(p=Math.min(this.index+3,p));for(let m=this.index;m<p;m++){let g=this.top.children[m];if(g.matchesMark(e[c])&&!this.isLocked(g.dom)){h=m;break}}if(h>-1)h>this.index&&(this.changed=!0,this.destroyBetween(this.index,h)),this.top=this.top.children[this.index];else{let m=MarkViewDesc.create(this.top,e[c],s,a);this.top.children.splice(this.index,0,m),this.top=m,this.changed=!0}this.index=0,c++}}findNodeMatch(e,s,a,l){let u=-1,c;if(l>=this.preMatch.index&&(c=this.preMatch.matches[l-this.preMatch.index]).parent==this.top&&c.matchesNode(e,s,a))u=this.top.children.indexOf(c,this.index);else for(let d=this.index,h=Math.min(this.top.children.length,d+5);d<h;d++){let p=this.top.children[d];if(p.matchesNode(e,s,a)&&!this.preMatch.matched.has(p)){u=d;break}}return u<0?!1:(this.destroyBetween(this.index,u),this.index++,!0)}updateNodeAt(e,s,a,l,u){let c=this.top.children[l];return c.dirty==NODE_DIRTY&&c.dom==c.contentDOM&&(c.dirty=CONTENT_DIRTY),c.update(e,s,a,u)?(this.destroyBetween(this.index,l),this.index++,!0):!1}findIndexWithChild(e){for(;;){let s=e.parentNode;if(!s)return-1;if(s==this.top.contentDOM){let a=e.pmViewDesc;if(a){for(let l=this.index;l<this.top.children.length;l++)if(this.top.children[l]==a)return l}return-1}e=s}}updateNextNode(e,s,a,l,u,c){for(let d=this.index;d<this.top.children.length;d++){let h=this.top.children[d];if(h instanceof NodeViewDesc){let p=this.preMatch.matched.get(h);if(p!=null&&p!=u)return!1;let m=h.dom,g,y=this.isLocked(m)&&!(e.isText&&h.node&&h.node.isText&&h.nodeDOM.nodeValue==e.text&&h.dirty!=NODE_DIRTY&&sameOuterDeco(s,h.outerDeco));if(!y&&h.update(e,s,a,l))return this.destroyBetween(this.index,d),h.dom!=m&&(this.changed=!0),this.index++,!0;if(!y&&(g=this.recreateWrapper(h,e,s,a,l,c)))return this.destroyBetween(this.index,d),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=CONTENT_DIRTY,g.updateChildren(l,c+1),g.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,s,a,l,u,c){if(e.dirty||s.isAtom||!e.children.length||!e.node.content.eq(s.content)||!sameOuterDeco(a,e.outerDeco)||!l.eq(e.innerDeco))return null;let d=NodeViewDesc.create(this.top,s,a,l,u,c);if(d.contentDOM){d.children=e.children,e.children=[];for(let h of d.children)h.parent=d}return e.destroy(),d}addNode(e,s,a,l,u){let c=NodeViewDesc.create(this.top,e,s,a,l,u);c.contentDOM&&c.updateChildren(l,u+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,s,a){let l=this.index<this.top.children.length?this.top.children[this.index]:null;if(l&&l.matchesWidget(e)&&(e==l.widget||!l.widget.type.toDOM.parentNode))this.index++;else{let u=new WidgetViewDesc(this.top,e,s,a);this.top.children.splice(this.index++,0,u),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],s=this.top;for(;e instanceof MarkViewDesc;)s=e,e=s.children[s.children.length-1];(!e||!(e instanceof TextViewDesc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((safari$1||chrome$1)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",s),this.addHackNode("BR",this.top))}addHackNode(e,s){if(s==this.top&&this.index<s.children.length&&s.children[this.index].matchesHack(e))this.index++;else{let a=document.createElement(e);e=="IMG"&&(a.className="ProseMirror-separator",a.alt=""),e=="BR"&&(a.className="ProseMirror-trailingBreak");let l=new TrailingHackViewDesc(this.top,[],a,null);s!=this.top?s.children.push(l):s.children.splice(this.index++,0,l),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function preMatch(o,e){let s=e,a=s.children.length,l=o.childCount,u=new Map,c=[];e:for(;l>0;){let d;for(;;)if(a){let p=s.children[a-1];if(p instanceof MarkViewDesc)s=p,a=p.children.length;else{d=p,a--;break}}else{if(s==e)break e;a=s.parent.children.indexOf(s),s=s.parent}let h=d.node;if(h){if(h!=o.child(l-1))break;--l,u.set(d,l),c.push(d)}}return{index:l,matched:u,matches:c.reverse()}}function compareSide(o,e){return o.type.side-e.type.side}function iterDeco(o,e,s,a){let l=e.locals(o),u=0;if(l.length==0){for(let p=0;p<o.childCount;p++){let m=o.child(p);a(m,l,e.forChild(u,m),p),u+=m.nodeSize}return}let c=0,d=[],h=null;for(let p=0;;){let m,g;for(;c<l.length&&l[c].to==u;){let v=l[c++];v.widget&&(m?(g||(g=[m])).push(v):m=v)}if(m)if(g){g.sort(compareSide);for(let v=0;v<g.length;v++)s(g[v],p,!!h)}else s(m,p,!!h);let y,A;if(h)A=-1,y=h,h=null;else if(p<o.childCount)A=p,y=o.child(p++);else break;for(let v=0;v<d.length;v++)d[v].to<=u&&d.splice(v--,1);for(;c<l.length&&l[c].from<=u&&l[c].to>u;)d.push(l[c++]);let T=u+y.nodeSize;if(y.isText){let v=T;c<l.length&&l[c].from<v&&(v=l[c].from);for(let _=0;_<d.length;_++)d[_].to<v&&(v=d[_].to);v<T&&(h=y.cut(v-u),y=y.cut(0,v-u),T=v,A=-1)}else for(;c<l.length&&l[c].to<T;)c++;let E=y.isInline&&!y.isLeaf?d.filter(v=>!v.inline):d.slice();a(y,E,e.forChild(u,y),A),u=T}}function iosHacks(o){if(o.nodeName=="UL"||o.nodeName=="OL"){let e=o.style.cssText;o.style.cssText=e+"; list-style: square !important",window.getComputedStyle(o).listStyle,o.style.cssText=e}}function findTextInFragment(o,e,s,a){for(let l=0,u=0;l<o.childCount&&u<=a;){let c=o.child(l++),d=u;if(u+=c.nodeSize,!c.isText)continue;let h=c.text;for(;l<o.childCount;){let p=o.child(l++);if(u+=p.nodeSize,!p.isText)break;h+=p.text}if(u>=s){if(u>=a&&h.slice(a-e.length-d,a-d)==e)return a-e.length;let p=d<a?h.lastIndexOf(e,a-d-1):-1;if(p>=0&&p+e.length+d>=s)return d+p;if(s==a&&h.length>=a+e.length-d&&h.slice(a-d,a-d+e.length)==e)return a}}return-1}function replaceNodes(o,e,s,a,l){let u=[];for(let c=0,d=0;c<o.length;c++){let h=o[c],p=d,m=d+=h.size;p>=s||m<=e?u.push(h):(p<e&&u.push(h.slice(0,e-p,a)),l&&(u.push(l),l=void 0),m>s&&u.push(h.slice(s-p,h.size,a)))}return u}function selectionFromDOM(o,e=null){let s=o.domSelectionRange(),a=o.state.doc;if(!s.focusNode)return null;let l=o.docView.nearestDesc(s.focusNode),u=l&&l.size==0,c=o.docView.posFromDOM(s.focusNode,s.focusOffset,1);if(c<0)return null;let d=a.resolve(c),h,p;if(selectionCollapsed(s)){for(h=c;l&&!l.node;)l=l.parent;let g=l.node;if(l&&g.isAtom&&NodeSelection.isSelectable(g)&&l.parent&&!(g.isInline&&isOnEdge(s.focusNode,s.focusOffset,l.dom))){let y=l.posBefore;p=new NodeSelection(c==y?d:a.resolve(y))}}else{if(s instanceof o.dom.ownerDocument.defaultView.Selection&&s.rangeCount>1){let g=c,y=c;for(let A=0;A<s.rangeCount;A++){let T=s.getRangeAt(A);g=Math.min(g,o.docView.posFromDOM(T.startContainer,T.startOffset,1)),y=Math.max(y,o.docView.posFromDOM(T.endContainer,T.endOffset,-1))}if(g<0)return null;[h,c]=y==o.state.selection.anchor?[y,g]:[g,y],d=a.resolve(c)}else h=o.docView.posFromDOM(s.anchorNode,s.anchorOffset,1);if(h<0)return null}let m=a.resolve(h);if(!p){let g=e=="pointer"||o.state.selection.head<d.pos&&!u?1:-1;p=selectionBetween(o,m,d,g)}return p}function editorOwnsSelection(o){return o.editable?o.hasFocus():hasSelection$1(o)&&document.activeElement&&document.activeElement.contains(o.dom)}function selectionToDOM(o,e=!1){let s=o.state.selection;if(syncNodeSelection(o,s),!!editorOwnsSelection(o)){if(!e&&o.input.mouseDown&&o.input.mouseDown.allowDefault&&chrome$1){let a=o.domSelectionRange(),l=o.domObserver.currentSelection;if(a.anchorNode&&l.anchorNode&&isEquivalentPosition$1(a.anchorNode,a.anchorOffset,l.anchorNode,l.anchorOffset)){o.input.mouseDown.delayedSelectionSync=!0,o.domObserver.setCurSelection();return}}if(o.domObserver.disconnectSelection(),o.cursorWrapper)selectCursorWrapper(o);else{let{anchor:a,head:l}=s,u,c;brokenSelectBetweenUneditable&&!(s instanceof TextSelection)&&(s.$from.parent.inlineContent||(u=temporarilyEditableNear(o,s.from)),!s.empty&&!s.$from.parent.inlineContent&&(c=temporarilyEditableNear(o,s.to))),o.docView.setSelection(a,l,o,e),brokenSelectBetweenUneditable&&(u&&resetEditable(u),c&&resetEditable(c)),s.visible?o.dom.classList.remove("ProseMirror-hideselection"):(o.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(o))}o.domObserver.setCurSelection(),o.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari$1||chrome$1&&chrome_version<63;function temporarilyEditableNear(o,e){let{node:s,offset:a}=o.docView.domFromPos(e,0),l=a<s.childNodes.length?s.childNodes[a]:null,u=a?s.childNodes[a-1]:null;if(safari$1&&l&&l.contentEditable=="false")return setEditable(l);if((!l||l.contentEditable=="false")&&(!u||u.contentEditable=="false")){if(l)return setEditable(l);if(u)return setEditable(u)}}function setEditable(o){return o.contentEditable="true",safari$1&&o.draggable&&(o.draggable=!1,o.wasDraggable=!0),o}function resetEditable(o){o.contentEditable="false",o.wasDraggable&&(o.draggable=!0,o.wasDraggable=null)}function removeClassOnSelectionChange(o){let e=o.dom.ownerDocument;e.removeEventListener("selectionchange",o.input.hideSelectionGuard);let s=o.domSelectionRange(),a=s.anchorNode,l=s.anchorOffset;e.addEventListener("selectionchange",o.input.hideSelectionGuard=()=>{(s.anchorNode!=a||s.anchorOffset!=l)&&(e.removeEventListener("selectionchange",o.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(o)||o.state.selection.visible)&&o.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(o){let e=o.domSelection();if(!e)return;let s=o.cursorWrapper.dom,a=s.nodeName=="IMG";a?e.collapse(s.parentNode,domIndex$1(s)+1):e.collapse(s,0),!a&&!o.state.selection.visible&&ie$2&&ie_version<=11&&(s.disabled=!0,s.disabled=!1)}function syncNodeSelection(o,e){if(e instanceof NodeSelection){let s=o.docView.descAt(e.from);s!=o.lastSelectedViewDesc&&(clearNodeSelection(o),s&&s.selectNode(),o.lastSelectedViewDesc=s)}else clearNodeSelection(o)}function clearNodeSelection(o){o.lastSelectedViewDesc&&(o.lastSelectedViewDesc.parent&&o.lastSelectedViewDesc.deselectNode(),o.lastSelectedViewDesc=void 0)}function selectionBetween(o,e,s,a){return o.someProp("createSelectionBetween",l=>l(o,e,s))||TextSelection.between(e,s,a)}function hasFocusAndSelection(o){return o.editable&&!o.hasFocus()?!1:hasSelection$1(o)}function hasSelection$1(o){let e=o.domSelectionRange();if(!e.anchorNode)return!1;try{return o.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(o.editable||o.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function anchorInRightPlace(o){let e=o.docView.domFromPos(o.state.selection.anchor,0),s=o.domSelectionRange();return isEquivalentPosition$1(e.node,e.offset,s.anchorNode,s.anchorOffset)}function moveSelectionBlock(o,e){let{$anchor:s,$head:a}=o.selection,l=e>0?s.max(a):s.min(a),u=l.parent.inlineContent?l.depth?o.doc.resolve(e>0?l.after():l.before()):null:l;return u&&Selection$1.findFrom(u,e)}function apply(o,e){return o.dispatch(o.state.tr.setSelection(e).scrollIntoView()),!0}function selectHorizontally(o,e,s){let a=o.state.selection;if(a instanceof TextSelection)if(s.indexOf("s")>-1){let{$head:l}=a,u=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!u||u.isText||!u.isLeaf)return!1;let c=o.state.doc.resolve(l.pos+u.nodeSize*(e<0?-1:1));return apply(o,new TextSelection(a.$anchor,c))}else if(a.empty){if(o.endOfTextblock(e>0?"forward":"backward")){let l=moveSelectionBlock(o.state,e);return l&&l instanceof NodeSelection?apply(o,l):!1}else if(!(mac$3&&s.indexOf("m")>-1)){let l=a.$head,u=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter,c;if(!u||u.isText)return!1;let d=e<0?l.pos-u.nodeSize:l.pos;return u.isAtom||(c=o.docView.descAt(d))&&!c.contentDOM?NodeSelection.isSelectable(u)?apply(o,new NodeSelection(e<0?o.state.doc.resolve(l.pos-u.nodeSize):l)):webkit$1?apply(o,new TextSelection(o.state.doc.resolve(e<0?d:d+u.nodeSize))):!1:!1}}else return!1;else{if(a instanceof NodeSelection&&a.node.isInline)return apply(o,new TextSelection(e>0?a.$to:a.$from));{let l=moveSelectionBlock(o.state,e);return l?apply(o,l):!1}}}function nodeLen(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}function isIgnorable(o,e){let s=o.pmViewDesc;return s&&s.size==0&&(e<0||o.nextSibling||o.nodeName!="BR")}function skipIgnoredNodes(o,e){return e<0?skipIgnoredNodesBefore(o):skipIgnoredNodesAfter(o)}function skipIgnoredNodesBefore(o){let e=o.domSelectionRange(),s=e.focusNode,a=e.focusOffset;if(!s)return;let l,u,c=!1;for(gecko$1&&s.nodeType==1&&a<nodeLen(s)&&isIgnorable(s.childNodes[a],-1)&&(c=!0);;)if(a>0){if(s.nodeType!=1)break;{let d=s.childNodes[a-1];if(isIgnorable(d,-1))l=s,u=--a;else if(d.nodeType==3)s=d,a=s.nodeValue.length;else break}}else{if(isBlockNode(s))break;{let d=s.previousSibling;for(;d&&isIgnorable(d,-1);)l=s.parentNode,u=domIndex$1(d),d=d.previousSibling;if(d)s=d,a=nodeLen(s);else{if(s=s.parentNode,s==o.dom)break;a=0}}}c?setSelFocus(o,s,a):l&&setSelFocus(o,l,u)}function skipIgnoredNodesAfter(o){let e=o.domSelectionRange(),s=e.focusNode,a=e.focusOffset;if(!s)return;let l=nodeLen(s),u,c;for(;;)if(a<l){if(s.nodeType!=1)break;let d=s.childNodes[a];if(isIgnorable(d,1))u=s,c=++a;else break}else{if(isBlockNode(s))break;{let d=s.nextSibling;for(;d&&isIgnorable(d,1);)u=d.parentNode,c=domIndex$1(d)+1,d=d.nextSibling;if(d)s=d,a=0,l=nodeLen(s);else{if(s=s.parentNode,s==o.dom)break;a=l=0}}}u&&setSelFocus(o,u,c)}function isBlockNode(o){let e=o.pmViewDesc;return e&&e.node&&e.node.isBlock}function textNodeAfter$2(o,e){for(;o&&e==o.childNodes.length&&!hasBlockDesc(o);)e=domIndex$1(o)+1,o=o.parentNode;for(;o&&e<o.childNodes.length;){let s=o.childNodes[e];if(s.nodeType==3)return s;if(s.nodeType==1&&s.contentEditable=="false")break;o=s,e=0}}function textNodeBefore$2(o,e){for(;o&&!e&&!hasBlockDesc(o);)e=domIndex$1(o),o=o.parentNode;for(;o&&e;){let s=o.childNodes[e-1];if(s.nodeType==3)return s;if(s.nodeType==1&&s.contentEditable=="false")break;o=s,e=o.childNodes.length}}function setSelFocus(o,e,s){if(e.nodeType!=3){let u,c;(c=textNodeAfter$2(e,s))?(e=c,s=0):(u=textNodeBefore$2(e,s))&&(e=u,s=u.nodeValue.length)}let a=o.domSelection();if(!a)return;if(selectionCollapsed(a)){let u=document.createRange();u.setEnd(e,s),u.setStart(e,s),a.removeAllRanges(),a.addRange(u)}else a.extend&&a.extend(e,s);o.domObserver.setCurSelection();let{state:l}=o;setTimeout(()=>{o.state==l&&selectionToDOM(o)},50)}function findDirection(o,e){let s=o.state.doc.resolve(e);if(!(chrome$1||windows$2)&&s.parent.inlineContent){let l=o.coordsAtPos(e);if(e>s.start()){let u=o.coordsAtPos(e-1),c=(u.top+u.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(u.left-l.left)>1)return u.left<l.left?"ltr":"rtl"}if(e<s.end()){let u=o.coordsAtPos(e+1),c=(u.top+u.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(u.left-l.left)>1)return u.left>l.left?"ltr":"rtl"}}return getComputedStyle(o.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(o,e,s){let a=o.state.selection;if(a instanceof TextSelection&&!a.empty||s.indexOf("s")>-1||mac$3&&s.indexOf("m")>-1)return!1;let{$from:l,$to:u}=a;if(!l.parent.inlineContent||o.endOfTextblock(e<0?"up":"down")){let c=moveSelectionBlock(o.state,e);if(c&&c instanceof NodeSelection)return apply(o,c)}if(!l.parent.inlineContent){let c=e<0?l:u,d=a instanceof AllSelection?Selection$1.near(c,e):Selection$1.findFrom(c,e);return d?apply(o,d):!1}return!1}function stopNativeHorizontalDelete(o,e){if(!(o.state.selection instanceof TextSelection))return!0;let{$head:s,$anchor:a,empty:l}=o.state.selection;if(!s.sameParent(a))return!0;if(!l)return!1;if(o.endOfTextblock(e>0?"forward":"backward"))return!0;let u=!s.textOffset&&(e<0?s.nodeBefore:s.nodeAfter);if(u&&!u.isText){let c=o.state.tr;return e<0?c.delete(s.pos-u.nodeSize,s.pos):c.delete(s.pos,s.pos+u.nodeSize),o.dispatch(c),!0}return!1}function switchEditable(o,e,s){o.domObserver.stop(),e.contentEditable=s,o.domObserver.start()}function safariDownArrowBug(o){if(!safari$1||o.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:s}=o.domSelectionRange();if(e&&e.nodeType==1&&s==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let a=e.firstChild;switchEditable(o,a,"true"),setTimeout(()=>switchEditable(o,a,"false"),20)}return!1}function getMods(o){let e="";return o.ctrlKey&&(e+="c"),o.metaKey&&(e+="m"),o.altKey&&(e+="a"),o.shiftKey&&(e+="s"),e}function captureKeyDown(o,e){let s=e.keyCode,a=getMods(e);if(s==8||mac$3&&s==72&&a=="c")return stopNativeHorizontalDelete(o,-1)||skipIgnoredNodes(o,-1);if(s==46&&!e.shiftKey||mac$3&&s==68&&a=="c")return stopNativeHorizontalDelete(o,1)||skipIgnoredNodes(o,1);if(s==13||s==27)return!0;if(s==37||mac$3&&s==66&&a=="c"){let l=s==37?findDirection(o,o.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(o,l,a)||skipIgnoredNodes(o,l)}else if(s==39||mac$3&&s==70&&a=="c"){let l=s==39?findDirection(o,o.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(o,l,a)||skipIgnoredNodes(o,l)}else{if(s==38||mac$3&&s==80&&a=="c")return selectVertically(o,-1,a)||skipIgnoredNodes(o,-1);if(s==40||mac$3&&s==78&&a=="c")return safariDownArrowBug(o)||selectVertically(o,1,a)||skipIgnoredNodes(o,1);if(a==(mac$3?"m":"c")&&(s==66||s==73||s==89||s==90))return!0}return!1}function serializeForClipboard(o,e){o.someProp("transformCopied",A=>{e=A(e,o)});let s=[],{content:a,openStart:l,openEnd:u}=e;for(;l>1&&u>1&&a.childCount==1&&a.firstChild.childCount==1;){l--,u--;let A=a.firstChild;s.push(A.type.name,A.attrs!=A.type.defaultAttrs?A.attrs:null),a=A.content}let c=o.someProp("clipboardSerializer")||DOMSerializer.fromSchema(o.state.schema),d=detachedDoc(),h=d.createElement("div");h.appendChild(c.serializeFragment(a,{document:d}));let p=h.firstChild,m,g=0;for(;p&&p.nodeType==1&&(m=wrapMap[p.nodeName.toLowerCase()]);){for(let A=m.length-1;A>=0;A--){let T=d.createElement(m[A]);for(;h.firstChild;)T.appendChild(h.firstChild);h.appendChild(T),g++}p=h.firstChild}p&&p.nodeType==1&&p.setAttribute("data-pm-slice",`${l} ${u}${g?` -${g}`:""} ${JSON.stringify(s)}`);let y=o.someProp("clipboardTextSerializer",A=>A(e,o))||e.content.textBetween(0,e.content.size,`

`);return{dom:h,text:y,slice:e}}function parseFromClipboard(o,e,s,a,l){let u=l.parent.type.spec.code,c,d;if(!s&&!e)return null;let h=!!e&&(a||u||!s);if(h){if(o.someProp("transformPastedText",y=>{e=y(e,u||a,o)}),u)return d=new Slice(Fragment.from(o.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),o.someProp("transformPasted",y=>{d=y(d,o,!0)}),d;let g=o.someProp("clipboardTextParser",y=>y(e,l,a,o));if(g)d=g;else{let y=l.marks(),{schema:A}=o.state,T=DOMSerializer.fromSchema(A);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(E=>{let v=c.appendChild(document.createElement("p"));E&&v.appendChild(T.serializeNode(A.text(E,y)))})}}else o.someProp("transformPastedHTML",g=>{s=g(s,o)}),c=readHTML(s),webkit$1&&restoreReplacedSpaces(c);let p=c&&c.querySelector("[data-pm-slice]"),m=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(m&&m[3])for(let g=+m[3];g>0;g--){let y=c.firstChild;for(;y&&y.nodeType!=1;)y=y.nextSibling;if(!y)break;c=y}if(d||(d=(o.someProp("clipboardParser")||o.someProp("domParser")||DOMParser$1.fromSchema(o.state.schema)).parseSlice(c,{preserveWhitespace:!!(h||m),context:l,ruleFromNode(y){return y.nodeName=="BR"&&!y.nextSibling&&y.parentNode&&!inlineParents.test(y.parentNode.nodeName)?{ignore:!0}:null}})),m)d=addContext(closeSlice(d,+m[1],+m[2]),m[4]);else if(d=Slice.maxOpen(normalizeSiblings(d.content,l),!0),d.openStart||d.openEnd){let g=0,y=0;for(let A=d.content.firstChild;g<d.openStart&&!A.type.spec.isolating;g++,A=A.firstChild);for(let A=d.content.lastChild;y<d.openEnd&&!A.type.spec.isolating;y++,A=A.lastChild);d=closeSlice(d,g,y)}return o.someProp("transformPasted",g=>{d=g(d,o,h)}),d}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(o,e){if(o.childCount<2)return o;for(let s=e.depth;s>=0;s--){let l=e.node(s).contentMatchAt(e.index(s)),u,c=[];if(o.forEach(d=>{if(!c)return;let h=l.findWrapping(d.type),p;if(!h)return c=null;if(p=c.length&&u.length&&addToSibling(h,u,d,c[c.length-1],0))c[c.length-1]=p;else{c.length&&(c[c.length-1]=closeRight(c[c.length-1],u.length));let m=withWrappers(d,h);c.push(m),l=l.matchType(m.type),u=h}}),c)return Fragment.from(c)}return o}function withWrappers(o,e,s=0){for(let a=e.length-1;a>=s;a--)o=e[a].create(null,Fragment.from(o));return o}function addToSibling(o,e,s,a,l){if(l<o.length&&l<e.length&&o[l]==e[l]){let u=addToSibling(o,e,s,a.lastChild,l+1);if(u)return a.copy(a.content.replaceChild(a.childCount-1,u));if(a.contentMatchAt(a.childCount).matchType(l==o.length-1?s.type:o[l+1]))return a.copy(a.content.append(Fragment.from(withWrappers(s,o,l+1))))}}function closeRight(o,e){if(e==0)return o;let s=o.content.replaceChild(o.childCount-1,closeRight(o.lastChild,e-1)),a=o.contentMatchAt(o.childCount).fillBefore(Fragment.empty,!0);return o.copy(s.append(a))}function closeRange(o,e,s,a,l,u){let c=e<0?o.firstChild:o.lastChild,d=c.content;return o.childCount>1&&(u=0),l<a-1&&(d=closeRange(d,e,s,a,l+1,u)),l>=s&&(d=e<0?c.contentMatchAt(0).fillBefore(d,u<=l).append(d):d.append(c.contentMatchAt(c.childCount).fillBefore(Fragment.empty,!0))),o.replaceChild(e<0?0:o.childCount-1,c.copy(d))}function closeSlice(o,e,s){return e<o.openStart&&(o=new Slice(closeRange(o.content,-1,e,o.openStart,0,o.openEnd),e,o.openEnd)),s<o.openEnd&&(o=new Slice(closeRange(o.content,1,s,o.openEnd,0,0),o.openStart,s)),o}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(o){let e=window.trustedTypes;return e?(_policy||(_policy=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:s=>s})),_policy.createHTML(o)):o}function readHTML(o){let e=/^(\s*<meta [^>]*>)*/.exec(o);e&&(o=o.slice(e[0].length));let s=detachedDoc().createElement("div"),a=/<([a-z][^>\s]+)/i.exec(o),l;if((l=a&&wrapMap[a[1].toLowerCase()])&&(o=l.map(u=>"<"+u+">").join("")+o+l.map(u=>"</"+u+">").reverse().join("")),s.innerHTML=maybeWrapTrusted(o),l)for(let u=0;u<l.length;u++)s=s.querySelector(l[u])||s;return s}function restoreReplacedSpaces(o){let e=o.querySelectorAll(chrome$1?"span:not([class]):not([style])":"span.Apple-converted-space");for(let s=0;s<e.length;s++){let a=e[s];a.childNodes.length==1&&a.textContent==""&&a.parentNode&&a.parentNode.replaceChild(o.ownerDocument.createTextNode(" "),a)}}function addContext(o,e){if(!o.size)return o;let s=o.content.firstChild.type.schema,a;try{a=JSON.parse(e)}catch{return o}let{content:l,openStart:u,openEnd:c}=o;for(let d=a.length-2;d>=0;d-=2){let h=s.nodes[a[d]];if(!h||h.hasRequiredAttrs())break;l=Fragment.from(h.create(a[d+1],l)),u++,c++}return new Slice(l,u,c)}const handlers$1={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};let InputState$2=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function initInput(o){for(let e in handlers$1){let s=handlers$1[e];o.dom.addEventListener(e,o.input.eventHandlers[e]=a=>{eventBelongsToView(o,a)&&!runCustomHandler(o,a)&&(o.editable||!(a.type in editHandlers))&&s(o,a)},passiveHandlers[e]?{passive:!0}:void 0)}safari$1&&o.dom.addEventListener("input",()=>null),ensureListeners(o)}function setSelectionOrigin(o,e){o.input.lastSelectionOrigin=e,o.input.lastSelectionTime=Date.now()}function destroyInput(o){o.domObserver.stop();for(let e in o.input.eventHandlers)o.dom.removeEventListener(e,o.input.eventHandlers[e]);clearTimeout(o.input.composingTimeout),clearTimeout(o.input.lastIOSEnterFallbackTimeout)}function ensureListeners(o){o.someProp("handleDOMEvents",e=>{for(let s in e)o.input.eventHandlers[s]||o.dom.addEventListener(s,o.input.eventHandlers[s]=a=>runCustomHandler(o,a))})}function runCustomHandler(o,e){return o.someProp("handleDOMEvents",s=>{let a=s[e.type];return a?a(o,e)||e.defaultPrevented:!1})}function eventBelongsToView(o,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let s=e.target;s!=o.dom;s=s.parentNode)if(!s||s.nodeType==11||s.pmViewDesc&&s.pmViewDesc.stopEvent(e))return!1;return!0}function dispatchEvent(o,e){!runCustomHandler(o,e)&&handlers$1[e.type]&&(o.editable||!(e.type in editHandlers))&&handlers$1[e.type](o,e)}editHandlers.keydown=(o,e)=>{let s=e;if(o.input.shiftKey=s.keyCode==16||s.shiftKey,!inOrNearComposition(o,s)&&(o.input.lastKeyCode=s.keyCode,o.input.lastKeyCodeTime=Date.now(),!(android$1&&chrome$1&&s.keyCode==13)))if(s.keyCode!=229&&o.domObserver.forceFlush(),ios$1&&s.keyCode==13&&!s.ctrlKey&&!s.altKey&&!s.metaKey){let a=Date.now();o.input.lastIOSEnter=a,o.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{o.input.lastIOSEnter==a&&(o.someProp("handleKeyDown",l=>l(o,keyEvent(13,"Enter"))),o.input.lastIOSEnter=0)},200)}else o.someProp("handleKeyDown",a=>a(o,s))||captureKeyDown(o,s)?s.preventDefault():setSelectionOrigin(o,"key")},editHandlers.keyup=(o,e)=>{e.keyCode==16&&(o.input.shiftKey=!1)},editHandlers.keypress=(o,e)=>{let s=e;if(inOrNearComposition(o,s)||!s.charCode||s.ctrlKey&&!s.altKey||mac$3&&s.metaKey)return;if(o.someProp("handleKeyPress",l=>l(o,s))){s.preventDefault();return}let a=o.state.selection;if(!(a instanceof TextSelection)||!a.$from.sameParent(a.$to)){let l=String.fromCharCode(s.charCode),u=()=>o.state.tr.insertText(l).scrollIntoView();!/[\r\n]/.test(l)&&!o.someProp("handleTextInput",c=>c(o,a.$from.pos,a.$to.pos,l,u))&&o.dispatch(u()),s.preventDefault()}};function eventCoords(o){return{left:o.clientX,top:o.clientY}}function isNear(o,e){let s=e.x-o.clientX,a=e.y-o.clientY;return s*s+a*a<100}function runHandlerOnContext(o,e,s,a,l){if(a==-1)return!1;let u=o.state.doc.resolve(a);for(let c=u.depth+1;c>0;c--)if(o.someProp(e,d=>c>u.depth?d(o,s,u.nodeAfter,u.before(c),l,!0):d(o,s,u.node(c),u.before(c),l,!1)))return!0;return!1}function updateSelection(o,e,s){if(o.focused||o.focus(),o.state.selection.eq(e))return;let a=o.state.tr.setSelection(e);a.setMeta("pointer",!0),o.dispatch(a)}function selectClickedLeaf(o,e){if(e==-1)return!1;let s=o.state.doc.resolve(e),a=s.nodeAfter;return a&&a.isAtom&&NodeSelection.isSelectable(a)?(updateSelection(o,new NodeSelection(s)),!0):!1}function selectClickedNode(o,e){if(e==-1)return!1;let s=o.state.selection,a,l;s instanceof NodeSelection&&(a=s.node);let u=o.state.doc.resolve(e);for(let c=u.depth+1;c>0;c--){let d=c>u.depth?u.nodeAfter:u.node(c);if(NodeSelection.isSelectable(d)){a&&s.$from.depth>0&&c>=s.$from.depth&&u.before(s.$from.depth+1)==s.$from.pos?l=u.before(s.$from.depth):l=u.before(c);break}}return l!=null?(updateSelection(o,NodeSelection.create(o.state.doc,l)),!0):!1}function handleSingleClick(o,e,s,a,l){return runHandlerOnContext(o,"handleClickOn",e,s,a)||o.someProp("handleClick",u=>u(o,e,a))||(l?selectClickedNode(o,s):selectClickedLeaf(o,s))}function handleDoubleClick(o,e,s,a){return runHandlerOnContext(o,"handleDoubleClickOn",e,s,a)||o.someProp("handleDoubleClick",l=>l(o,e,a))}function handleTripleClick(o,e,s,a){return runHandlerOnContext(o,"handleTripleClickOn",e,s,a)||o.someProp("handleTripleClick",l=>l(o,e,a))||defaultTripleClick(o,s,a)}function defaultTripleClick(o,e,s){if(s.button!=0)return!1;let a=o.state.doc;if(e==-1)return a.inlineContent?(updateSelection(o,TextSelection.create(a,0,a.content.size)),!0):!1;let l=a.resolve(e);for(let u=l.depth+1;u>0;u--){let c=u>l.depth?l.nodeAfter:l.node(u),d=l.before(u);if(c.inlineContent)updateSelection(o,TextSelection.create(a,d+1,d+1+c.content.size));else if(NodeSelection.isSelectable(c))updateSelection(o,NodeSelection.create(a,d));else continue;return!0}}function forceDOMFlush(o){return endComposition(o)}const selectNodeModifier=mac$3?"metaKey":"ctrlKey";handlers$1.mousedown=(o,e)=>{let s=e;o.input.shiftKey=s.shiftKey;let a=forceDOMFlush(o),l=Date.now(),u="singleClick";l-o.input.lastClick.time<500&&isNear(s,o.input.lastClick)&&!s[selectNodeModifier]&&o.input.lastClick.button==s.button&&(o.input.lastClick.type=="singleClick"?u="doubleClick":o.input.lastClick.type=="doubleClick"&&(u="tripleClick")),o.input.lastClick={time:l,x:s.clientX,y:s.clientY,type:u,button:s.button};let c=o.posAtCoords(eventCoords(s));c&&(u=="singleClick"?(o.input.mouseDown&&o.input.mouseDown.done(),o.input.mouseDown=new MouseDown(o,c,s,!!a)):(u=="doubleClick"?handleDoubleClick:handleTripleClick)(o,c.pos,c.inside,s)?s.preventDefault():setSelectionOrigin(o,"pointer"))};class MouseDown{constructor(e,s,a,l){this.view=e,this.pos=s,this.event=a,this.flushed=l,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!a[selectNodeModifier],this.allowDefault=a.shiftKey;let u,c;if(s.inside>-1)u=e.state.doc.nodeAt(s.inside),c=s.inside;else{let m=e.state.doc.resolve(s.pos);u=m.parent,c=m.depth?m.before():0}const d=l?null:a.target,h=d?e.docView.nearestDesc(d,!0):null;this.target=h&&h.nodeDOM.nodeType==1?h.nodeDOM:null;let{selection:p}=e.state;(a.button==0&&u.type.spec.draggable&&u.type.spec.selectable!==!1||p instanceof NodeSelection&&p.from<=c&&p.to>c)&&(this.mightDrag={node:u,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko$1&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let s=this.pos;this.view.state.doc!=this.startDoc&&(s=this.view.posAtCoords(eventCoords(e))),this.updateAllowDefault(e),this.allowDefault||!s?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,s.pos,s.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||safari$1&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome$1&&!this.view.state.selection.visible&&Math.min(Math.abs(s.pos-this.view.state.selection.from),Math.abs(s.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection$1.near(this.view.state.doc.resolve(s.pos))),e.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(e){this.updateAllowDefault(e),setSelectionOrigin(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}handlers$1.touchstart=o=>{o.input.lastTouch=Date.now(),forceDOMFlush(o),setSelectionOrigin(o,"pointer")},handlers$1.touchmove=o=>{o.input.lastTouch=Date.now(),setSelectionOrigin(o,"pointer")},handlers$1.contextmenu=o=>forceDOMFlush(o);function inOrNearComposition(o,e){return o.composing?!0:safari$1&&Math.abs(e.timeStamp-o.input.compositionEndedAt)<500?(o.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android$1?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=o=>{if(!o.composing){o.domObserver.flush();let{state:e}=o,s=e.selection.$to;if(e.selection instanceof TextSelection&&(e.storedMarks||!s.textOffset&&s.parentOffset&&s.nodeBefore.marks.some(a=>a.type.spec.inclusive===!1)||chrome$1&&windows$2&&selectionBeforeUneditable(o)))o.markCursor=o.state.storedMarks||s.marks(),endComposition(o,!0),o.markCursor=null;else if(endComposition(o,!e.selection.empty),gecko$1&&e.selection.empty&&s.parentOffset&&!s.textOffset&&s.nodeBefore.marks.length){let a=o.domSelectionRange();for(let l=a.focusNode,u=a.focusOffset;l&&l.nodeType==1&&u!=0;){let c=u<0?l.lastChild:l.childNodes[u-1];if(!c)break;if(c.nodeType==3){let d=o.domSelection();d&&d.collapse(c,c.nodeValue.length);break}else l=c,u=-1}}o.input.composing=!0}scheduleComposeEnd(o,timeoutComposition)};function selectionBeforeUneditable(o){let{focusNode:e,focusOffset:s}=o.domSelectionRange();if(!e||e.nodeType!=1||s>=e.childNodes.length)return!1;let a=e.childNodes[s];return a.nodeType==1&&a.contentEditable=="false"}editHandlers.compositionend=(o,e)=>{o.composing&&(o.input.composing=!1,o.input.compositionEndedAt=e.timeStamp,o.input.compositionPendingChanges=o.domObserver.pendingRecords().length?o.input.compositionID:0,o.input.compositionNode=null,o.input.badSafariComposition?o.domObserver.forceFlush():o.input.compositionPendingChanges&&Promise.resolve().then(()=>o.domObserver.flush()),o.input.compositionID++,scheduleComposeEnd(o,20))};function scheduleComposeEnd(o,e){clearTimeout(o.input.composingTimeout),e>-1&&(o.input.composingTimeout=setTimeout(()=>endComposition(o),e))}function clearComposition(o){for(o.composing&&(o.input.composing=!1,o.input.compositionEndedAt=timestampFromCustomEvent());o.input.compositionNodes.length>0;)o.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode$1(o){let e=o.domSelectionRange();if(!e.focusNode)return null;let s=textNodeBefore$1(e.focusNode,e.focusOffset),a=textNodeAfter$1(e.focusNode,e.focusOffset);if(s&&a&&s!=a){let l=a.pmViewDesc,u=o.domObserver.lastChangedTextNode;if(s==u||a==u)return u;if(!l||!l.isText(a.nodeValue))return a;if(o.input.compositionNode==a){let c=s.pmViewDesc;if(!(!c||!c.isText(s.nodeValue)))return a}}return s||a}function timestampFromCustomEvent(){let o=document.createEvent("Event");return o.initEvent("event",!0,!0),o.timeStamp}function endComposition(o,e=!1){if(!(android$1&&o.domObserver.flushingSoon>=0)){if(o.domObserver.forceFlush(),clearComposition(o),e||o.docView&&o.docView.dirty){let s=selectionFromDOM(o),a=o.state.selection;return s&&!s.eq(a)?o.dispatch(o.state.tr.setSelection(s)):(o.markCursor||e)&&!a.$from.node(a.$from.sharedDepth(a.to)).inlineContent?o.dispatch(o.state.tr.deleteSelection()):o.updateState(o.state),!0}return!1}}function captureCopy$1(o,e){if(!o.dom.parentNode)return;let s=o.dom.parentNode.appendChild(document.createElement("div"));s.appendChild(e),s.style.cssText="position: fixed; left: -10000px; top: 10px";let a=getSelection(),l=document.createRange();l.selectNodeContents(e),o.dom.blur(),a.removeAllRanges(),a.addRange(l),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s),o.focus()},50)}const brokenClipboardAPI$1=ie$2&&ie_version<15||ios$1&&webkit_version<604;handlers$1.copy=editHandlers.cut=(o,e)=>{let s=e,a=o.state.selection,l=s.type=="cut";if(a.empty)return;let u=brokenClipboardAPI$1?null:s.clipboardData,c=a.content(),{dom:d,text:h}=serializeForClipboard(o,c);u?(s.preventDefault(),u.clearData(),u.setData("text/html",d.innerHTML),u.setData("text/plain",h)):captureCopy$1(o,d),l&&o.dispatch(o.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode$1(o){return o.openStart==0&&o.openEnd==0&&o.content.childCount==1?o.content.firstChild:null}function capturePaste$1(o,e){if(!o.dom.parentNode)return;let s=o.input.shiftKey||o.state.selection.$from.parent.type.spec.code,a=o.dom.parentNode.appendChild(document.createElement(s?"textarea":"div"));s||(a.contentEditable="true"),a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus();let l=o.input.shiftKey&&o.input.lastKeyCode!=45;setTimeout(()=>{o.focus(),a.parentNode&&a.parentNode.removeChild(a),s?doPaste$1(o,a.value,null,l,e):doPaste$1(o,a.textContent,a.innerHTML,l,e)},50)}function doPaste$1(o,e,s,a,l){let u=parseFromClipboard(o,e,s,a,o.state.selection.$from);if(o.someProp("handlePaste",h=>h(o,l,u||Slice.empty)))return!0;if(!u)return!1;let c=sliceSingleNode$1(u),d=c?o.state.tr.replaceSelectionWith(c,a):o.state.tr.replaceSelection(u);return o.dispatch(d.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(o){let e=o.getData("text/plain")||o.getData("Text");if(e)return e;let s=o.getData("text/uri-list");return s?s.replace(/\r?\n/g," "):""}editHandlers.paste=(o,e)=>{let s=e;if(o.composing&&!android$1)return;let a=brokenClipboardAPI$1?null:s.clipboardData,l=o.input.shiftKey&&o.input.lastKeyCode!=45;a&&doPaste$1(o,getText$1(a),a.getData("text/html"),l,s)?s.preventDefault():capturePaste$1(o,s)};class Dragging{constructor(e,s,a){this.slice=e,this.move=s,this.node=a}}const dragCopyModifier=mac$3?"altKey":"ctrlKey";function dragMoves(o,e){let s=o.someProp("dragCopies",a=>!a(e));return s??!e[dragCopyModifier]}handlers$1.dragstart=(o,e)=>{let s=e,a=o.input.mouseDown;if(a&&a.done(),!s.dataTransfer)return;let l=o.state.selection,u=l.empty?null:o.posAtCoords(eventCoords(s)),c;if(!(u&&u.pos>=l.from&&u.pos<=(l instanceof NodeSelection?l.to-1:l.to))){if(a&&a.mightDrag)c=NodeSelection.create(o.state.doc,a.mightDrag.pos);else if(s.target&&s.target.nodeType==1){let g=o.docView.nearestDesc(s.target,!0);g&&g.node.type.spec.draggable&&g!=o.docView&&(c=NodeSelection.create(o.state.doc,g.posBefore))}}let d=(c||o.state.selection).content(),{dom:h,text:p,slice:m}=serializeForClipboard(o,d);(!s.dataTransfer.files.length||!chrome$1||chrome_version>120)&&s.dataTransfer.clearData(),s.dataTransfer.setData(brokenClipboardAPI$1?"Text":"text/html",h.innerHTML),s.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI$1||s.dataTransfer.setData("text/plain",p),o.dragging=new Dragging(m,dragMoves(o,s),c)},handlers$1.dragend=o=>{let e=o.dragging;window.setTimeout(()=>{o.dragging==e&&(o.dragging=null)},50)},editHandlers.dragover=editHandlers.dragenter=(o,e)=>e.preventDefault(),editHandlers.drop=(o,e)=>{try{handleDrop(o,e,o.dragging)}finally{o.dragging=null}};function handleDrop(o,e,s){if(!e.dataTransfer)return;let a=o.posAtCoords(eventCoords(e));if(!a)return;let l=o.state.doc.resolve(a.pos),u=s&&s.slice;u?o.someProp("transformPasted",A=>{u=A(u,o,!1)}):u=parseFromClipboard(o,getText$1(e.dataTransfer),brokenClipboardAPI$1?null:e.dataTransfer.getData("text/html"),!1,l);let c=!!(s&&dragMoves(o,e));if(o.someProp("handleDrop",A=>A(o,e,u||Slice.empty,c))){e.preventDefault();return}if(!u)return;e.preventDefault();let d=u?dropPoint(o.state.doc,l.pos,u):l.pos;d==null&&(d=l.pos);let h=o.state.tr;if(c){let{node:A}=s;A?A.replace(h):h.deleteSelection()}let p=h.mapping.map(d),m=u.openStart==0&&u.openEnd==0&&u.content.childCount==1,g=h.doc;if(m?h.replaceRangeWith(p,p,u.content.firstChild):h.replaceRange(p,p,u),h.doc.eq(g))return;let y=h.doc.resolve(p);if(m&&NodeSelection.isSelectable(u.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(u.content.firstChild))h.setSelection(new NodeSelection(y));else{let A=h.mapping.map(d);h.mapping.maps[h.mapping.maps.length-1].forEach((T,E,v,_)=>A=_),h.setSelection(selectionBetween(o,y,h.doc.resolve(A)))}o.focus(),o.dispatch(h.setMeta("uiEvent","drop"))}handlers$1.focus=o=>{o.input.lastFocus=Date.now(),o.focused||(o.domObserver.stop(),o.dom.classList.add("ProseMirror-focused"),o.domObserver.start(),o.focused=!0,setTimeout(()=>{o.docView&&o.hasFocus()&&!o.domObserver.currentSelection.eq(o.domSelectionRange())&&selectionToDOM(o)},20))},handlers$1.blur=(o,e)=>{let s=e;o.focused&&(o.domObserver.stop(),o.dom.classList.remove("ProseMirror-focused"),o.domObserver.start(),s.relatedTarget&&o.dom.contains(s.relatedTarget)&&o.domObserver.currentSelection.clear(),o.focused=!1)},handlers$1.beforeinput=(o,e)=>{if(chrome$1&&android$1&&e.inputType=="deleteContentBackward"){o.domObserver.flushSoon();let{domChangeCount:a}=o.input;setTimeout(()=>{if(o.input.domChangeCount!=a||(o.dom.blur(),o.focus(),o.someProp("handleKeyDown",u=>u(o,keyEvent(8,"Backspace")))))return;let{$cursor:l}=o.state.selection;l&&l.pos>0&&o.dispatch(o.state.tr.delete(l.pos-1,l.pos).scrollIntoView())},50)}};for(let o in editHandlers)handlers$1[o]=editHandlers[o];function compareObjs(o,e){if(o==e)return!0;for(let s in o)if(o[s]!==e[s])return!1;for(let s in e)if(!(s in o))return!1;return!0}let WidgetType$1=class Ff{constructor(e,s){this.toDOM=e,this.spec=s||noSpec,this.side=this.spec.side||0}map(e,s,a,l){let{pos:u,deleted:c}=e.mapResult(s.from+l,this.side<0?-1:1);return c?null:new Decoration$1(u-a,u-a,this)}valid(){return!0}eq(e){return this==e||e instanceof Ff&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&compareObjs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}};class InlineType{constructor(e,s){this.attrs=e,this.spec=s||noSpec}map(e,s,a,l){let u=e.map(s.from+l,this.spec.inclusiveStart?-1:1)-a,c=e.map(s.to+l,this.spec.inclusiveEnd?1:-1)-a;return u>=c?null:new Decoration$1(u,c,this)}valid(e,s){return s.from<s.to}eq(e){return this==e||e instanceof InlineType&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}static is(e){return e.type instanceof InlineType}destroy(){}}let NodeType$1=class qf{constructor(e,s){this.attrs=e,this.spec=s||noSpec}map(e,s,a,l){let u=e.mapResult(s.from+l,1);if(u.deleted)return null;let c=e.mapResult(s.to+l,-1);return c.deleted||c.pos<=u.pos?null:new Decoration$1(u.pos-a,c.pos-a,this)}valid(e,s){let{index:a,offset:l}=e.content.findIndex(s.from),u;return l==s.from&&!(u=e.child(a)).isText&&l+u.nodeSize==s.to}eq(e){return this==e||e instanceof qf&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}destroy(){}},Decoration$1=class Ys{constructor(e,s,a){this.from=e,this.to=s,this.type=a}copy(e,s){return new Ys(e,s,this.type)}eq(e,s=0){return this.type.eq(e.type)&&this.from+s==e.from&&this.to+s==e.to}map(e,s,a){return this.type.map(e,this,s,a)}static widget(e,s,a){return new Ys(e,e,new WidgetType$1(s,a))}static inline(e,s,a,l){return new Ys(e,s,new InlineType(a,l))}static node(e,s,a,l){return new Ys(e,s,new NodeType$1(a,l))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType$1}};const none$4=[],noSpec={};class DecorationSet{constructor(e,s){this.local=e.length?e:none$4,this.children=s.length?s:none$4}static create(e,s){return s.length?buildTree$1(s,e,0,noSpec):empty$3}find(e,s,a){let l=[];return this.findInner(e??0,s??1e9,l,0,a),l}findInner(e,s,a,l,u){for(let c=0;c<this.local.length;c++){let d=this.local[c];d.from<=s&&d.to>=e&&(!u||u(d.spec))&&a.push(d.copy(d.from+l,d.to+l))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<s&&this.children[c+1]>e){let d=this.children[c]+1;this.children[c+2].findInner(e-d,s-d,a,l+d,u)}}map(e,s,a){return this==empty$3||e.maps.length==0?this:this.mapInner(e,s,0,0,a||noSpec)}mapInner(e,s,a,l,u){let c;for(let d=0;d<this.local.length;d++){let h=this.local[d].map(e,a,l);h&&h.type.valid(s,h)?(c||(c=[])).push(h):u.onRemove&&u.onRemove(this.local[d].spec)}return this.children.length?mapChildren(this.children,c||[],e,s,a,l,u):c?new DecorationSet(c.sort(byPos),none$4):empty$3}add(e,s){return s.length?this==empty$3?DecorationSet.create(e,s):this.addInner(e,s,0):this}addInner(e,s,a){let l,u=0;e.forEach((d,h)=>{let p=h+a,m;if(m=takeSpansForNode(s,d,p)){for(l||(l=this.children.slice());u<l.length&&l[u]<h;)u+=3;l[u]==h?l[u+2]=l[u+2].addInner(d,m,p+1):l.splice(u,0,h,h+d.nodeSize,buildTree$1(m,d,p+1,noSpec)),u+=3}});let c=moveSpans(u?withoutNulls(s):s,-a);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||c.splice(d--,1);return new DecorationSet(c.length?this.local.concat(c).sort(byPos):this.local,l||this.children)}remove(e){return e.length==0||this==empty$3?this:this.removeInner(e,0)}removeInner(e,s){let a=this.children,l=this.local;for(let u=0;u<a.length;u+=3){let c,d=a[u]+s,h=a[u+1]+s;for(let m=0,g;m<e.length;m++)(g=e[m])&&g.from>d&&g.to<h&&(e[m]=null,(c||(c=[])).push(g));if(!c)continue;a==this.children&&(a=this.children.slice());let p=a[u+2].removeInner(c,d+1);p!=empty$3?a[u+2]=p:(a.splice(u,3),u-=3)}if(l.length){for(let u=0,c;u<e.length;u++)if(c=e[u])for(let d=0;d<l.length;d++)l[d].eq(c,s)&&(l==this.local&&(l=this.local.slice()),l.splice(d--,1))}return a==this.children&&l==this.local?this:l.length||a.length?new DecorationSet(l,a):empty$3}forChild(e,s){if(this==empty$3)return this;if(s.isLeaf)return DecorationSet.empty;let a,l;for(let d=0;d<this.children.length;d+=3)if(this.children[d]>=e){this.children[d]==e&&(a=this.children[d+2]);break}let u=e+1,c=u+s.content.size;for(let d=0;d<this.local.length;d++){let h=this.local[d];if(h.from<c&&h.to>u&&h.type instanceof InlineType){let p=Math.max(u,h.from)-u,m=Math.min(c,h.to)-u;p<m&&(l||(l=[])).push(h.copy(p,m))}}if(l){let d=new DecorationSet(l.sort(byPos),none$4);return a?new DecorationGroup([d,a]):d}return a||empty$3}eq(e){if(this==e)return!0;if(!(e instanceof DecorationSet)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let s=0;s<this.local.length;s++)if(!this.local[s].eq(e.local[s]))return!1;for(let s=0;s<this.children.length;s+=3)if(this.children[s]!=e.children[s]||this.children[s+1]!=e.children[s+1]||!this.children[s+2].eq(e.children[s+2]))return!1;return!0}locals(e){return removeOverlap(this.localsInner(e))}localsInner(e){if(this==empty$3)return none$4;if(e.inlineContent||!this.local.some(InlineType.is))return this.local;let s=[];for(let a=0;a<this.local.length;a++)this.local[a].type instanceof InlineType||s.push(this.local[a]);return s}forEachSet(e){e(this)}}DecorationSet.empty=new DecorationSet([],[]),DecorationSet.removeOverlap=removeOverlap;const empty$3=DecorationSet.empty;class DecorationGroup{constructor(e){this.members=e}map(e,s){const a=this.members.map(l=>l.map(e,s,noSpec));return DecorationGroup.from(a)}forChild(e,s){if(s.isLeaf)return DecorationSet.empty;let a=[];for(let l=0;l<this.members.length;l++){let u=this.members[l].forChild(e,s);u!=empty$3&&(u instanceof DecorationGroup?a=a.concat(u.members):a.push(u))}return DecorationGroup.from(a)}eq(e){if(!(e instanceof DecorationGroup)||e.members.length!=this.members.length)return!1;for(let s=0;s<this.members.length;s++)if(!this.members[s].eq(e.members[s]))return!1;return!0}locals(e){let s,a=!0;for(let l=0;l<this.members.length;l++){let u=this.members[l].localsInner(e);if(u.length)if(!s)s=u;else{a&&(s=s.slice(),a=!1);for(let c=0;c<u.length;c++)s.push(u[c])}}return s?removeOverlap(a?s:s.sort(byPos)):none$4}static from(e){switch(e.length){case 0:return empty$3;case 1:return e[0];default:return new DecorationGroup(e.every(s=>s instanceof DecorationSet)?e:e.reduce((s,a)=>s.concat(a instanceof DecorationSet?a:a.members),[]))}}forEachSet(e){for(let s=0;s<this.members.length;s++)this.members[s].forEachSet(e)}}function mapChildren(o,e,s,a,l,u,c){let d=o.slice();for(let p=0,m=u;p<s.maps.length;p++){let g=0;s.maps[p].forEach((y,A,T,E)=>{let v=E-T-(A-y);for(let _=0;_<d.length;_+=3){let w=d[_+1];if(w<0||y>w+m-g)continue;let R=d[_]+m-g;A>=R?d[_+1]=y<=R?-2:-1:y>=m&&v&&(d[_]+=v,d[_+1]+=v)}g+=v}),m=s.maps[p].map(m,-1)}let h=!1;for(let p=0;p<d.length;p+=3)if(d[p+1]<0){if(d[p+1]==-2){h=!0,d[p+1]=-1;continue}let m=s.map(o[p]+u),g=m-l;if(g<0||g>=a.content.size){h=!0;continue}let y=s.map(o[p+1]+u,-1),A=y-l,{index:T,offset:E}=a.content.findIndex(g),v=a.maybeChild(T);if(v&&E==g&&E+v.nodeSize==A){let _=d[p+2].mapInner(s,v,m+1,o[p]+u+1,c);_!=empty$3?(d[p]=g,d[p+1]=A,d[p+2]=_):(d[p+1]=-2,h=!0)}else h=!0}if(h){let p=mapAndGatherRemainingDecorations(d,o,e,s,l,u,c),m=buildTree$1(p,a,0,c);e=m.local;for(let g=0;g<d.length;g+=3)d[g+1]<0&&(d.splice(g,3),g-=3);for(let g=0,y=0;g<m.children.length;g+=3){let A=m.children[g];for(;y<d.length&&d[y]<A;)y+=3;d.splice(y,0,m.children[g],m.children[g+1],m.children[g+2])}}return new DecorationSet(e.sort(byPos),d)}function moveSpans(o,e){if(!e||!o.length)return o;let s=[];for(let a=0;a<o.length;a++){let l=o[a];s.push(new Decoration$1(l.from+e,l.to+e,l.type))}return s}function mapAndGatherRemainingDecorations(o,e,s,a,l,u,c){function d(h,p){for(let m=0;m<h.local.length;m++){let g=h.local[m].map(a,l,p);g?s.push(g):c.onRemove&&c.onRemove(h.local[m].spec)}for(let m=0;m<h.children.length;m+=3)d(h.children[m+2],h.children[m]+p+1)}for(let h=0;h<o.length;h+=3)o[h+1]==-1&&d(o[h+2],e[h]+u+1);return s}function takeSpansForNode(o,e,s){if(e.isLeaf)return null;let a=s+e.nodeSize,l=null;for(let u=0,c;u<o.length;u++)(c=o[u])&&c.from>s&&c.to<a&&((l||(l=[])).push(c),o[u]=null);return l}function withoutNulls(o){let e=[];for(let s=0;s<o.length;s++)o[s]!=null&&e.push(o[s]);return e}function buildTree$1(o,e,s,a){let l=[],u=!1;e.forEach((d,h)=>{let p=takeSpansForNode(o,d,h+s);if(p){u=!0;let m=buildTree$1(p,d,s+h+1,a);m!=empty$3&&l.push(h,h+d.nodeSize,m)}});let c=moveSpans(u?withoutNulls(o):o,-s).sort(byPos);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||(a.onRemove&&a.onRemove(c[d].spec),c.splice(d--,1));return c.length||l.length?new DecorationSet(c,l):empty$3}function byPos(o,e){return o.from-e.from||o.to-e.to}function removeOverlap(o){let e=o;for(let s=0;s<e.length-1;s++){let a=e[s];if(a.from!=a.to)for(let l=s+1;l<e.length;l++){let u=e[l];if(u.from==a.from){u.to!=a.to&&(e==o&&(e=o.slice()),e[l]=u.copy(u.from,a.to),insertAhead(e,l+1,u.copy(a.to,u.to)));continue}else{u.from<a.to&&(e==o&&(e=o.slice()),e[s]=a.copy(a.from,u.from),insertAhead(e,l,a.copy(u.from,a.to)));break}}}return e}function insertAhead(o,e,s){for(;e<o.length&&byPos(s,o[e])>0;)e++;o.splice(e,0,s)}function viewDecorations(o){let e=[];return o.someProp("decorations",s=>{let a=s(o.state);a&&a!=empty$3&&e.push(a)}),o.cursorWrapper&&e.push(DecorationSet.create(o.state.doc,[o.cursorWrapper.deco])),DecorationGroup.from(e)}const observeOptions$1={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData$1=ie$2&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}let DOMObserver$1=class{constructor(e,s){this.view=e,this.handleDOMChange=s,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(a=>{for(let l=0;l<a.length;l++)this.queue.push(a[l]);ie$2&&ie_version<=11&&a.some(l=>l.type=="childList"&&l.removedNodes.length||l.type=="characterData"&&l.oldValue.length>l.target.nodeValue.length)?this.flushSoon():safari$1&&e.composing&&a.some(l=>l.type=="childList"&&l.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),useCharData$1&&(this.onCharData=a=>{this.queue.push({target:a.target,type:"characterData",oldValue:a.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions$1)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let s=0;s<e.length;s++)this.queue.push(e[s]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$2&&ie_version<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&isEquivalentPosition$1(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let s=new Set,a;for(let u=e.focusNode;u;u=parentNode(u))s.add(u);for(let u=e.anchorNode;u;u=parentNode(u))if(s.has(u)){a=u;break}let l=a&&this.view.docView.nearestDesc(a);if(l&&l.ignoreMutation({type:"selection",target:a.nodeType==3?a.parentNode:a}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let s=this.pendingRecords();s.length&&(this.queue=[]);let a=e.domSelectionRange(),l=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(a)&&hasFocusAndSelection(e)&&!this.ignoreSelectionChange(a),u=-1,c=-1,d=!1,h=[];if(e.editable)for(let m=0;m<s.length;m++){let g=this.registerMutation(s[m],h);g&&(u=u<0?g.from:Math.min(g.from,u),c=c<0?g.to:Math.max(g.to,c),g.typeOver&&(d=!0))}if(h.some(m=>m.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let m of h)if(m.nodeName=="BR"&&m.parentNode){let g=m.nextSibling;g&&g.nodeType==1&&g.contentEditable=="false"&&m.parentNode.removeChild(m)}}else if(gecko$1&&h.length){let m=h.filter(g=>g.nodeName=="BR");if(m.length==2){let[g,y]=m;g.parentNode&&g.parentNode.parentNode==y.parentNode?y.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let y of m){let A=y.parentNode;A&&A.nodeName=="LI"&&(!g||blockParent(e,g)!=A)&&y.remove()}}}let p=null;u<0&&l&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&selectionCollapsed(a)&&(p=selectionFromDOM(e))&&p.eq(Selection$1.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,selectionToDOM(e),this.currentSelection.set(a),e.scrollToSelection()):(u>-1||l)&&(u>-1&&(e.docView.markDirty(u,c),checkCSS(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,fixUpBadSafariComposition(e,h)),this.handleDOMChange(u,c,d,h),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(a)||selectionToDOM(e),this.currentSelection.set(a))}registerMutation(e,s){if(s.indexOf(e.target)>-1)return null;let a=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(a==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!a||a.ignoreMutation(e))return null;if(e.type=="childList"){for(let m=0;m<e.addedNodes.length;m++){let g=e.addedNodes[m];s.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(a.contentDOM&&a.contentDOM!=a.dom&&!a.contentDOM.contains(e.target))return{from:a.posBefore,to:a.posAfter};let l=e.previousSibling,u=e.nextSibling;if(ie$2&&ie_version<=11&&e.addedNodes.length)for(let m=0;m<e.addedNodes.length;m++){let{previousSibling:g,nextSibling:y}=e.addedNodes[m];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(l=g),(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(u=y)}let c=l&&l.parentNode==e.target?domIndex$1(l)+1:0,d=a.localPosFromDOM(e.target,c,-1),h=u&&u.parentNode==e.target?domIndex$1(u):e.target.childNodes.length,p=a.localPosFromDOM(e.target,h,1);return{from:d,to:p}}else return e.type=="attributes"?{from:a.posAtStart-a.border,to:a.posAtEnd+a.border}:(this.lastChangedTextNode=e.target,{from:a.posAtStart,to:a.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}},cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(o){if(!cssChecked.has(o)&&(cssChecked.set(o,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(o.dom).whiteSpace)!==-1)){if(o.requiresGeckoHackNode=gecko$1,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(o,e){let s=e.startContainer,a=e.startOffset,l=e.endContainer,u=e.endOffset,c=o.domAtPos(o.state.selection.anchor);return isEquivalentPosition$1(c.node,c.offset,l,u)&&([s,a,l,u]=[l,u,s,a]),{anchorNode:s,anchorOffset:a,focusNode:l,focusOffset:u}}function safariShadowSelectionRange(o,e){if(e.getComposedRanges){let l=e.getComposedRanges(o.root)[0];if(l)return rangeToSelectionRange(o,l)}let s;function a(l){l.preventDefault(),l.stopImmediatePropagation(),s=l.getTargetRanges()[0]}return o.dom.addEventListener("beforeinput",a,!0),document.execCommand("indent"),o.dom.removeEventListener("beforeinput",a,!0),s?rangeToSelectionRange(o,s):null}function blockParent(o,e){for(let s=e.parentNode;s&&s!=o.dom;s=s.parentNode){let a=o.docView.nearestDesc(s,!0);if(a&&a.node.isBlock)return s}return null}function fixUpBadSafariComposition(o,e){var s;let{focusNode:a,focusOffset:l}=o.domSelectionRange();for(let u of e)if(((s=u.parentNode)===null||s===void 0?void 0:s.nodeName)=="TR"){let c=u.nextSibling;for(;c&&c.nodeName!="TD"&&c.nodeName!="TH";)c=c.nextSibling;if(c){let d=c;for(;;){let h=d.firstChild;if(!h||h.nodeType!=1||h.contentEditable=="false"||/^(BR|IMG)$/.test(h.nodeName))break;d=h}d.insertBefore(u,d.firstChild),a==u&&o.domSelection().collapse(u,l)}else u.parentNode.removeChild(u)}}function parseBetween(o,e,s){let{node:a,fromOffset:l,toOffset:u,from:c,to:d}=o.docView.parseRange(e,s),h=o.domSelectionRange(),p,m=h.anchorNode;if(m&&o.dom.contains(m.nodeType==1?m:m.parentNode)&&(p=[{node:m,offset:h.anchorOffset}],selectionCollapsed(h)||p.push({node:h.focusNode,offset:h.focusOffset})),chrome$1&&o.input.lastKeyCode===8)for(let v=u;v>l;v--){let _=a.childNodes[v-1],w=_.pmViewDesc;if(_.nodeName=="BR"&&!w){u=v;break}if(!w||w.size)break}let g=o.state.doc,y=o.someProp("domParser")||DOMParser$1.fromSchema(o.state.schema),A=g.resolve(c),T=null,E=y.parse(a,{topNode:A.parent,topMatch:A.parent.contentMatchAt(A.index()),topOpen:!0,from:l,to:u,preserveWhitespace:A.parent.type.whitespace=="pre"?"full":!0,findPositions:p,ruleFromNode,context:A});if(p&&p[0].pos!=null){let v=p[0].pos,_=p[1]&&p[1].pos;_==null&&(_=v),T={anchor:v+c,head:_+c}}return{doc:E,sel:T,from:c,to:d}}function ruleFromNode(o){let e=o.pmViewDesc;if(e)return e.parseRule();if(o.nodeName=="BR"&&o.parentNode){if(safari$1&&/^(ul|ol)$/i.test(o.parentNode.nodeName)){let s=document.createElement("div");return s.appendChild(document.createElement("li")),{skip:s}}else if(o.parentNode.lastChild==o||safari$1&&/^(tr|table)$/i.test(o.parentNode.nodeName))return{ignore:!0}}else if(o.nodeName=="IMG"&&o.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(o,e,s,a,l){let u=o.input.compositionPendingChanges||(o.composing?o.input.compositionID:0);if(o.input.compositionPendingChanges=0,e<0){let N=o.input.lastSelectionTime>Date.now()-50?o.input.lastSelectionOrigin:null,L=selectionFromDOM(o,N);if(L&&!o.state.selection.eq(L)){if(chrome$1&&android$1&&o.input.lastKeyCode===13&&Date.now()-100<o.input.lastKeyCodeTime&&o.someProp("handleKeyDown",j=>j(o,keyEvent(13,"Enter"))))return;let Q=o.state.tr.setSelection(L);N=="pointer"?Q.setMeta("pointer",!0):N=="key"&&Q.scrollIntoView(),u&&Q.setMeta("composition",u),o.dispatch(Q)}return}let c=o.state.doc.resolve(e),d=c.sharedDepth(s);e=c.before(d+1),s=o.state.doc.resolve(s).after(d+1);let h=o.state.selection,p=parseBetween(o,e,s),m=o.state.doc,g=m.slice(p.from,p.to),y,A;o.input.lastKeyCode===8&&Date.now()-100<o.input.lastKeyCodeTime?(y=o.state.selection.to,A="end"):(y=o.state.selection.from,A="start"),o.input.lastKeyCode=null;let T=findDiff$1(g.content,p.doc.content,p.from,y,A);if(T&&o.input.domChangeCount++,(ios$1&&o.input.lastIOSEnter>Date.now()-225||android$1)&&l.some(N=>N.nodeType==1&&!isInline.test(N.nodeName))&&(!T||T.endA>=T.endB)&&o.someProp("handleKeyDown",N=>N(o,keyEvent(13,"Enter")))){o.input.lastIOSEnter=0;return}if(!T)if(a&&h instanceof TextSelection&&!h.empty&&h.$head.sameParent(h.$anchor)&&!o.composing&&!(p.sel&&p.sel.anchor!=p.sel.head))T={start:h.from,endA:h.to,endB:h.to};else{if(p.sel){let N=resolveSelection(o,o.state.doc,p.sel);if(N&&!N.eq(o.state.selection)){let L=o.state.tr.setSelection(N);u&&L.setMeta("composition",u),o.dispatch(L)}}return}o.state.selection.from<o.state.selection.to&&T.start==T.endB&&o.state.selection instanceof TextSelection&&(T.start>o.state.selection.from&&T.start<=o.state.selection.from+2&&o.state.selection.from>=p.from?T.start=o.state.selection.from:T.endA<o.state.selection.to&&T.endA>=o.state.selection.to-2&&o.state.selection.to<=p.to&&(T.endB+=o.state.selection.to-T.endA,T.endA=o.state.selection.to)),ie$2&&ie_version<=11&&T.endB==T.start+1&&T.endA==T.start&&T.start>p.from&&p.doc.textBetween(T.start-p.from-1,T.start-p.from+1)==" "&&(T.start--,T.endA--,T.endB--);let E=p.doc.resolveNoCache(T.start-p.from),v=p.doc.resolveNoCache(T.endB-p.from),_=m.resolve(T.start),w=E.sameParent(v)&&E.parent.inlineContent&&_.end()>=T.endA;if((ios$1&&o.input.lastIOSEnter>Date.now()-225&&(!w||l.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!w&&E.pos<p.doc.content.size&&(!E.sameParent(v)||!E.parent.inlineContent)&&E.pos<v.pos&&!/\S/.test(p.doc.textBetween(E.pos,v.pos,"","")))&&o.someProp("handleKeyDown",N=>N(o,keyEvent(13,"Enter")))){o.input.lastIOSEnter=0;return}if(o.state.selection.anchor>T.start&&looksLikeBackspace(m,T.start,T.endA,E,v)&&o.someProp("handleKeyDown",N=>N(o,keyEvent(8,"Backspace")))){android$1&&chrome$1&&o.domObserver.suppressSelectionUpdates();return}chrome$1&&T.endB==T.start&&(o.input.lastChromeDelete=Date.now()),android$1&&!w&&E.start()!=v.start()&&v.parentOffset==0&&E.depth==v.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==T.endA&&(T.endB-=2,v=p.doc.resolveNoCache(T.endB-p.from),setTimeout(()=>{o.someProp("handleKeyDown",function(N){return N(o,keyEvent(13,"Enter"))})},20));let R=T.start,k=T.endA,I=N=>{let L=N||o.state.tr.replace(R,k,p.doc.slice(T.start-p.from,T.endB-p.from));if(p.sel){let Q=resolveSelection(o,L.doc,p.sel);Q&&!(chrome$1&&o.composing&&Q.empty&&(T.start!=T.endB||o.input.lastChromeDelete<Date.now()-100)&&(Q.head==R||Q.head==L.mapping.map(k)-1)||ie$2&&Q.empty&&Q.head==R)&&L.setSelection(Q)}return u&&L.setMeta("composition",u),L.scrollIntoView()},P;if(w)if(E.pos==v.pos){ie$2&&ie_version<=11&&E.parentOffset==0&&(o.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(o),20));let N=I(o.state.tr.delete(R,k)),L=m.resolve(T.start).marksAcross(m.resolve(T.endA));L&&N.ensureMarks(L),o.dispatch(N)}else if(T.endA==T.endB&&(P=isMarkChange(E.parent.content.cut(E.parentOffset,v.parentOffset),_.parent.content.cut(_.parentOffset,T.endA-_.start())))){let N=I(o.state.tr);P.type=="add"?N.addMark(R,k,P.mark):N.removeMark(R,k,P.mark),o.dispatch(N)}else if(E.parent.child(E.index()).isText&&E.index()==v.index()-(v.textOffset?0:1)){let N=E.parent.textBetween(E.parentOffset,v.parentOffset),L=()=>I(o.state.tr.insertText(N,R,k));o.someProp("handleTextInput",Q=>Q(o,R,k,N,L))||o.dispatch(L())}else o.dispatch(I());else o.dispatch(I())}function resolveSelection(o,e,s){return Math.max(s.anchor,s.head)>e.content.size?null:selectionBetween(o,e.resolve(s.anchor),e.resolve(s.head))}function isMarkChange(o,e){let s=o.firstChild.marks,a=e.firstChild.marks,l=s,u=a,c,d,h;for(let m=0;m<a.length;m++)l=a[m].removeFromSet(l);for(let m=0;m<s.length;m++)u=s[m].removeFromSet(u);if(l.length==1&&u.length==0)d=l[0],c="add",h=m=>m.mark(d.addToSet(m.marks));else if(l.length==0&&u.length==1)d=u[0],c="remove",h=m=>m.mark(d.removeFromSet(m.marks));else return null;let p=[];for(let m=0;m<e.childCount;m++)p.push(h(e.child(m)));if(Fragment.from(p).eq(o))return{mark:d,type:c}}function looksLikeBackspace(o,e,s,a,l){if(s-e<=l.pos-a.pos||skipClosingAndOpening(a,!0,!1)<l.pos)return!1;let u=o.resolve(e);if(!a.parent.isTextblock){let d=u.nodeAfter;return d!=null&&s==e+d.nodeSize}if(u.parentOffset<u.parent.content.size||!u.parent.isTextblock)return!1;let c=o.resolve(skipClosingAndOpening(u,!0,!0));return!c.parent.isTextblock||c.pos>s||skipClosingAndOpening(c,!0,!1)<s?!1:a.parent.content.cut(a.parentOffset).eq(c.parent.content)}function skipClosingAndOpening(o,e,s){let a=o.depth,l=e?o.end():o.pos;for(;a>0&&(e||o.indexAfter(a)==o.node(a).childCount);)a--,l++,e=!1;if(s){let u=o.node(a).maybeChild(o.indexAfter(a));for(;u&&!u.isLeaf;)u=u.firstChild,l++}return l}function findDiff$1(o,e,s,a,l){let u=o.findDiffStart(e,s);if(u==null)return null;let{a:c,b:d}=o.findDiffEnd(e,s+o.size,s+e.size);if(l=="end"){let h=Math.max(0,u-Math.min(c,d));a-=c+h-u}if(c<u&&o.size<e.size){let h=a<=u&&a>=c?u-a:0;u-=h,u&&u<e.size&&isSurrogatePair$1(e.textBetween(u-1,u+1))&&(u+=h?1:-1),d=u+(d-c),c=u}else if(d<u){let h=a<=u&&a>=d?u-a:0;u-=h,u&&u<o.size&&isSurrogatePair$1(o.textBetween(u-1,u+1))&&(u+=h?1:-1),c=u+(c-d),d=u}return{start:u,endA:c,endB:d}}function isSurrogatePair$1(o){if(o.length!=2)return!1;let e=o.charCodeAt(0),s=o.charCodeAt(1);return e>=56320&&e<=57343&&s>=55296&&s<=56319}let EditorView$1=class{constructor(e,s){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState$2,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=s,this.state=s.state,this.directPlugins=s.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver$1(this,(a,l,u,c)=>readDOMChange(this,a,l,u,c)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let s in e)this._props[s]=e[s];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let s=this._props;this._props=e,e.plugins&&(e.plugins.forEach(checkStateComponent),this.directPlugins=e.plugins),this.updateStateInner(e.state,s)}setProps(e){let s={};for(let a in this._props)s[a]=this._props[a];s.state=this.state;for(let a in e)s[a]=e[a];this.update(s)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,s){var a;let l=this.state,u=!1,c=!1;e.storedMarks&&this.composing&&(clearComposition(this),c=!0),this.state=e;let d=l.plugins!=e.plugins||this._props.plugins!=s.plugins;if(d||this._props.plugins!=s.plugins||this._props.nodeViews!=s.nodeViews){let A=buildNodeViews(this);changedNodeViews(A,this.nodeViews)&&(this.nodeViews=A,u=!0)}(d||s.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let h=viewDecorations(this),p=computeDocDeco(this),m=l.plugins!=e.plugins&&!l.doc.eq(e.doc)?"reset":e.scrollToSelection>l.scrollToSelection?"to selection":"preserve",g=u||!this.docView.matchesNode(e.doc,p,h);(g||!e.selection.eq(l.selection))&&(c=!0);let y=m=="preserve"&&c&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(c){this.domObserver.stop();let A=g&&(ie$2||chrome$1)&&!this.composing&&!l.selection.empty&&!e.selection.empty&&selectionContextChanged(l.selection,e.selection);if(g){let T=chrome$1?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode$1(this)),(u||!this.docView.update(e.doc,p,h,this))&&(this.docView.updateOuterDeco(p),this.docView.destroy(),this.docView=docViewDesc(e.doc,p,h,this.dom,this)),T&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(A=!0)}A||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,A):(syncNodeSelection(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(l),!((a=this.dragging)===null||a===void 0)&&a.node&&!l.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,l),m=="reset"?this.dom.scrollTop=0:m=="to selection"?this.scrollToSelection():y&&resetScrollPos(y)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",s=>s(this)))if(this.state.selection instanceof NodeSelection){let s=this.docView.domAfterPos(this.state.selection.from);s.nodeType==1&&scrollRectIntoView$1(this,s.getBoundingClientRect(),e)}else scrollRectIntoView$1(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s];a.spec.view&&this.pluginViews.push(a.spec.view(this))}for(let s=0;s<this.state.plugins.length;s++){let a=this.state.plugins[s];a.spec.view&&this.pluginViews.push(a.spec.view(this))}}else for(let s=0;s<this.pluginViews.length;s++){let a=this.pluginViews[s];a.update&&a.update(this,e)}}updateDraggedNode(e,s){let a=e.node,l=-1;if(this.state.doc.nodeAt(a.from)==a.node)l=a.from;else{let u=a.from+(this.state.doc.content.size-s.doc.content.size);(u>0&&this.state.doc.nodeAt(u))==a.node&&(l=u)}this.dragging=new Dragging(e.slice,e.move,l<0?void 0:NodeSelection.create(this.state.doc,l))}someProp(e,s){let a=this._props&&this._props[e],l;if(a!=null&&(l=s?s(a):a))return l;for(let c=0;c<this.directPlugins.length;c++){let d=this.directPlugins[c].props[e];if(d!=null&&(l=s?s(d):d))return l}let u=this.state.plugins;if(u)for(let c=0;c<u.length;c++){let d=u[c].props[e];if(d!=null&&(l=s?s(d):d))return l}}hasFocus(){if(ie$2){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll$1(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let s=this.dom.parentNode;s;s=s.parentNode)if(s.nodeType==9||s.nodeType==11&&s.host)return s.getSelection||(Object.getPrototypeOf(s).getSelection=()=>s.ownerDocument.getSelection()),this._root=s}return e||document}updateRoot(){this._root=null}posAtCoords(e){return posAtCoords$1(this,e)}coordsAtPos(e,s=1){return coordsAtPos(this,e,s)}domAtPos(e,s=0){return this.docView.domFromPos(e,s)}nodeDOM(e){let s=this.docView.descAt(e);return s?s.nodeDOM:null}posAtDOM(e,s,a=-1){let l=this.docView.posFromDOM(e,s,a);if(l==null)throw new RangeError("DOM position not inside the editor");return l}endOfTextblock(e,s){return endOfTextblock(this,s||this.state,e)}pasteHTML(e,s){return doPaste$1(this,"",e,!1,s||new ClipboardEvent("paste"))}pasteText(e,s){return doPaste$1(this,e,null,!0,s||new ClipboardEvent("paste"))}serializeForClipboard(e){return serializeForClipboard(this,e)}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return dispatchEvent(this,e)}domSelectionRange(){let e=this.domSelection();return e?safari$1&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}};EditorView$1.prototype.dispatch=function(o){let e=this._props.dispatchTransaction;e?e.call(this,o):this.updateState(this.state.apply(o))};function computeDocDeco(o){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(o.editable),o.someProp("attributes",s=>{if(typeof s=="function"&&(s=s(o.state)),s)for(let a in s)a=="class"?e.class+=" "+s[a]:a=="style"?e.style=(e.style?e.style+";":"")+s[a]:!e[a]&&a!="contenteditable"&&a!="nodeName"&&(e[a]=String(s[a]))}),e.translate||(e.translate="no"),[Decoration$1.node(0,o.state.doc.content.size,e)]}function updateCursorWrapper(o){if(o.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),o.cursorWrapper={dom:e,deco:Decoration$1.widget(o.state.selection.from,e,{raw:!0,marks:o.markCursor})}}else o.cursorWrapper=null}function getEditable(o){return!o.someProp("editable",e=>e(o.state)===!1)}function selectionContextChanged(o,e){let s=Math.min(o.$anchor.sharedDepth(o.head),e.$anchor.sharedDepth(e.head));return o.$anchor.start(s)!=e.$anchor.start(s)}function buildNodeViews(o){let e=Object.create(null);function s(a){for(let l in a)Object.prototype.hasOwnProperty.call(e,l)||(e[l]=a[l])}return o.someProp("nodeViews",s),o.someProp("markViews",s),e}function changedNodeViews(o,e){let s=0,a=0;for(let l in o){if(o[l]!=e[l])return!0;s++}for(let l in e)a++;return s!=a}function checkStateComponent(o){if(o.spec.state||o.spec.filterTransaction||o.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}class EventEmitter{constructor(){oe(this,"_listeners",new Map)}on(e,s){this._listeners.has(e)||this._listeners.set(e,[]),this._listeners.get(e).push(s)}off(e,s){this._listeners.has(e)&&this._listeners.set(e,this._listeners.get(e).filter(a=>a!==s))}emit(e,s){var a;(a=this._listeners.get(e))==null||a.forEach(l=>l(s))}countOf(e){var s;return((s=this._listeners.get(e))==null?void 0:s.length)||0}}class SafeEventEmitter extends EventEmitter{constructor(s){super();oe(this,"onError");this.onError=(s==null?void 0:s.onError)??console.error}emit(s,a){var l;(l=this._listeners.get(s))==null||l.forEach(u=>this.safeExec(()=>u(a)))}safeExec(s){try{s()}catch(a){this.onError(a)}}}class Logger2{constructor(){qe(this,yt,new SafeEventEmitter)}log(e,...s){const a=Object.assign({},...s),l=Object.assign(a,{msg:e});pe(this,yt).emit("log",l)}warn(e,...s){const a=Object.assign({},...s),l=Object.assign(a,{msg:e});pe(this,yt).emit("warn",l)}error(e,...s){const a=typeof e=="string"?Error(e):e,l=Object.assign({},...s),u=Object.assign(l,{error:a});pe(this,yt).emit("error",u)}action(e){pe(this,yt).emit("action",e)}metrics(e){pe(this,yt).emit("metrics",e)}event(e){pe(this,yt).emit("event",e)}nested(e){const s=this,a=Symbol();return{[a]:e,log(u,...c){pe(s,yt).countOf("log")&&s.log(u,this[a],...c)},warn(u,...c){pe(s,yt).countOf("warn")&&s.warn(u,this[a],...c)},error(u,...c){pe(s,yt).countOf("error")&&s.error(u,this[a],...c)},action(u){pe(s,yt).countOf("action")&&s.action({...this[a],...u})},metrics(u){pe(s,yt).countOf("metrics")&&s.metrics({...this[a],...u})},event(u){pe(s,yt).countOf("event")&&s.event({...this[a],...u})},nested(u){return{...this,[a]:{...this[a],...u}}},on:s.on.bind(s),off:s.off.bind(s)}}on(e,s){pe(this,yt).on(e,s)}off(e,s){pe(this,yt).off(e,s)}}yt=new WeakMap;const noop$6=()=>{};class Logger{constructor(){qe(this,pn,this.createLogger({}))}get log(){return pe(this,pn).log}get info(){return pe(this,pn).info}get error(){return pe(this,pn).error}get warn(){return pe(this,pn).warn}get metrics(){return pe(this,pn).metrics}get action(){return pe(this,pn).action}setLogger(e={}){$e(this,pn,this.createLogger(e))}createLogger(e){return{log:e.log??noop$6,info:e.info??noop$6,warn:e.warn??noop$6,error:e.error??noop$6,metrics:e.metrics??noop$6,action:e.action??noop$6}}}pn=new WeakMap;const logger=new Logger,globalLogger=logger;class WysiwygContentHandler{constructor(e,s){qe(this,Ft);qe(this,gr);$e(this,Ft,e),$e(this,gr,s)}clear(){pe(this,Ft).dispatch(pe(this,Ft).state.tr.setSelection(new AllSelection(pe(this,Ft).state.doc)).replaceSelection(Slice.empty))}replace(e){pe(this,Ft).dispatch(pe(this,Ft).state.tr.setSelection(new AllSelection(pe(this,Ft).state.doc)).replaceSelection(new Slice(pe(this,gr).parse(e).content,0,0)))}prepend(e){pe(this,Ft).dispatch(pe(this,Ft).state.tr.insert(0,pe(this,gr).parse(e).content))}append(e){var a,l;let s=pe(this,Ft).state.tr;if(((a=s.doc.lastChild)==null?void 0:a.type.name)==="paragraph"&&s.doc.lastChild.childCount===0){const u=s.doc.nodeSize-3;s=s.replaceWith(u-1,u+1,pe(this,gr).parse(e))}else s=this.appendContentTr(s,e);(((l=s.doc.lastChild)==null?void 0:l.type.name)!=="paragraph"||s.doc.lastChild.childCount!==0)&&(s=this.appendContentTr(s,"")),pe(this,Ft).dispatch(s)}moveCursor(e){switch(e){case"start":{const{tr:s}=pe(this,Ft).state;pe(this,Ft).dispatch(s.setSelection(TextSelection.create(s.doc,1)));break}case"end":{const{lastChild:s}=pe(this,Ft).state.doc,{tr:a}=pe(this,Ft).state,l=a.doc.nodeSize-2;!(s!=null&&s.isTextblock)&&!(s!=null&&s.isText)&&this.appendContentTr(a,""),pe(this,Ft).dispatch(a.setSelection(TextSelection.create(a.doc,a.mapping.map(l)-1)).scrollIntoView());break}default:throw new Error('The "position" argument must be "start" or "end"')}}appendContentTr(e,s){return e.insert(e.doc.nodeSize-2,pe(this,gr).parse(s).content)}}Ft=new WeakMap,gr=new WeakMap;var utils$4={};const Aacute="",aacute="",Abreve="",abreve="",ac="",acd="",acE="",Acirc="",acirc="",acute="",Acy="",acy="",AElig="",aelig="",af="",Afr="",afr="",Agrave="",agrave="",alefsym="",aleph="",Alpha="",alpha="",Amacr="",amacr="",amalg="",amp="&",AMP="&",andand="",And="",and="",andd="",andslope="",andv="",ang="",ange="",angle="",angmsdaa="",angmsdab="",angmsdac="",angmsdad="",angmsdae="",angmsdaf="",angmsdag="",angmsdah="",angmsd="",angrt="",angrtvb="",angrtvbd="",angsph="",angst="",angzarr="",Aogon="",aogon="",Aopf="",aopf="",apacir="",ap="",apE="",ape="",apid="",apos="'",ApplyFunction="",approx="",approxeq="",Aring="",aring="",Ascr="",ascr="",Assign="",ast="*",asymp="",asympeq="",Atilde="",atilde="",Auml="",auml="",awconint="",awint="",backcong="",backepsilon="",backprime="",backsim="",backsimeq="",Backslash="",Barv="",barvee="",barwed="",Barwed="",barwedge="",bbrk="",bbrktbrk="",bcong="",Bcy="",bcy="",bdquo="",becaus="",because="",Because="",bemptyv="",bepsi="",bernou="",Bernoullis="",Beta="",beta="",beth="",between="",Bfr="",bfr="",bigcap="",bigcirc="",bigcup="",bigodot="",bigoplus="",bigotimes="",bigsqcup="",bigstar="",bigtriangledown="",bigtriangleup="",biguplus="",bigvee="",bigwedge="",bkarow="",blacklozenge="",blacksquare="",blacktriangle="",blacktriangledown="",blacktriangleleft="",blacktriangleright="",blank="",blk12="",blk14="",blk34="",block$4="",bne="=",bnequiv="",bNot="",bnot="",Bopf="",bopf="",bot="",bottom="",bowtie="",boxbox="",boxdl="",boxdL="",boxDl="",boxDL="",boxdr="",boxdR="",boxDr="",boxDR="",boxh="",boxH="",boxhd="",boxHd="",boxhD="",boxHD="",boxhu="",boxHu="",boxhU="",boxHU="",boxminus="",boxplus="",boxtimes="",boxul="",boxuL="",boxUl="",boxUL="",boxur="",boxuR="",boxUr="",boxUR="",boxv="",boxV="",boxvh="",boxvH="",boxVh="",boxVH="",boxvl="",boxvL="",boxVl="",boxVL="",boxvr="",boxvR="",boxVr="",boxVR="",bprime="",breve="",Breve="",brvbar="",bscr="",Bscr="",bsemi="",bsim="",bsime="",bsolb="",bsol="\\",bsolhsub="",bull="",bullet="",bump="",bumpE="",bumpe="",Bumpeq="",bumpeq="",Cacute="",cacute="",capand="",capbrcup="",capcap="",cap="",Cap="",capcup="",capdot="",CapitalDifferentialD="",caps="",caret="",caron="",Cayleys="",ccaps="",Ccaron="",ccaron="",Ccedil="",ccedil="",Ccirc="",ccirc="",Cconint="",ccups="",ccupssm="",Cdot="",cdot="",cedil="",Cedilla="",cemptyv="",cent="",centerdot="",CenterDot="",cfr="",Cfr="",CHcy="",chcy="",check="",checkmark="",Chi="",chi="",circ="",circeq="",circlearrowleft="",circlearrowright="",circledast="",circledcirc="",circleddash="",CircleDot="",circledR="",circledS="",CircleMinus="",CirclePlus="",CircleTimes="",cir="",cirE="",cire="",cirfnint="",cirmid="",cirscir="",ClockwiseContourIntegral="",CloseCurlyDoubleQuote="",CloseCurlyQuote="",clubs="",clubsuit="",colon$1=":",Colon="",Colone="",colone="",coloneq="",comma$1=",",commat="@",comp="",compfn="",complement="",complexes="",cong="",congdot="",Congruent="",conint="",Conint="",ContourIntegral="",copf="",Copf="",coprod="",Coproduct="",copy="",COPY="",copysr="",CounterClockwiseContourIntegral="",crarr="",cross="",Cross="",Cscr="",cscr="",csub="",csube="",csup="",csupe="",ctdot="",cudarrl="",cudarrr="",cuepr="",cuesc="",cularr="",cularrp="",cupbrcap="",cupcap="",CupCap="",cup="",Cup="",cupcup="",cupdot="",cupor="",cups="",curarr="",curarrm="",curlyeqprec="",curlyeqsucc="",curlyvee="",curlywedge="",curren="",curvearrowleft="",curvearrowright="",cuvee="",cuwed="",cwconint="",cwint="",cylcty="",dagger="",Dagger="",daleth="",darr="",Darr="",dArr="",dash$2="",Dashv="",dashv="",dbkarow="",dblac="",Dcaron="",dcaron="",Dcy="",dcy="",ddagger="",ddarr="",DD="",dd="",DDotrahd="",ddotseq="",deg="",Del="",Delta="",delta="",demptyv="",dfisht="",Dfr="",dfr="",dHar="",dharl="",dharr="",DiacriticalAcute="",DiacriticalDot="",DiacriticalDoubleAcute="",DiacriticalGrave="`",DiacriticalTilde="",diam="",diamond="",Diamond="",diamondsuit="",diams="",die="",DifferentialD="",digamma="",disin="",div="",divide="",divideontimes="",divonx="",DJcy="",djcy="",dlcorn="",dlcrop="",dollar="$",Dopf="",dopf="",Dot="",dot$1="",DotDot="",doteq="",doteqdot="",DotEqual="",dotminus="",dotplus="",dotsquare="",doublebarwedge="",DoubleContourIntegral="",DoubleDot="",DoubleDownArrow="",DoubleLeftArrow="",DoubleLeftRightArrow="",DoubleLeftTee="",DoubleLongLeftArrow="",DoubleLongLeftRightArrow="",DoubleLongRightArrow="",DoubleRightArrow="",DoubleRightTee="",DoubleUpArrow="",DoubleUpDownArrow="",DoubleVerticalBar="",DownArrowBar="",downarrow="",DownArrow="",Downarrow="",DownArrowUpArrow="",DownBreve="",downdownarrows="",downharpoonleft="",downharpoonright="",DownLeftRightVector="",DownLeftTeeVector="",DownLeftVectorBar="",DownLeftVector="",DownRightTeeVector="",DownRightVectorBar="",DownRightVector="",DownTeeArrow="",DownTee="",drbkarow="",drcorn="",drcrop="",Dscr="",dscr="",DScy="",dscy="",dsol="",Dstrok="",dstrok="",dtdot="",dtri="",dtrif="",duarr="",duhar="",dwangle="",DZcy="",dzcy="",dzigrarr="",Eacute="",eacute="",easter="",Ecaron="",ecaron="",Ecirc="",ecirc="",ecir="",ecolon="",Ecy="",ecy="",eDDot="",Edot="",edot="",eDot="",ee="",efDot="",Efr="",efr="",eg="",Egrave="",egrave="",egs="",egsdot="",el="",Element$4="",elinters="",ell="",els="",elsdot="",Emacr="",emacr="",empty$2="",emptyset="",EmptySmallSquare="",emptyv="",EmptyVerySmallSquare="",emsp13="",emsp14="",emsp="",ENG="",eng="",ensp="",Eogon="",eogon="",Eopf="",eopf="",epar="",eparsl="",eplus="",epsi="",Epsilon$1="",epsilon="",epsiv="",eqcirc="",eqcolon="",eqsim="",eqslantgtr="",eqslantless="",Equal="",equals="=",EqualTilde="",equest="",Equilibrium="",equiv="",equivDD="",eqvparsl="",erarr="",erDot="",escr="",Escr="",esdot="",Esim="",esim="",Eta="",eta="",ETH="",eth="",Euml="",euml="",euro="",excl="!",exist="",Exists="",expectation="",exponentiale="",ExponentialE="",fallingdotseq="",Fcy="",fcy="",female="",ffilig="",fflig="",ffllig="",Ffr="",ffr="",filig="",FilledSmallSquare="",FilledVerySmallSquare="",fjlig="fj",flat="",fllig="",fltns="",fnof="",Fopf="",fopf="",forall="",ForAll="",fork="",forkv="",Fouriertrf="",fpartint="",frac12="",frac13="",frac14="",frac15="",frac16="",frac18="",frac23="",frac25="",frac34="",frac35="",frac38="",frac45="",frac56="",frac58="",frac78="",frasl="",frown="",fscr="",Fscr="",gacute="",Gamma="",gamma="",Gammad="",gammad="",gap="",Gbreve="",gbreve="",Gcedil="",Gcirc="",gcirc="",Gcy="",gcy="",Gdot="",gdot="",ge="",gE="",gEl="",gel="",geq="",geqq="",geqslant="",gescc="",ges="",gesdot="",gesdoto="",gesdotol="",gesl="",gesles="",Gfr="",gfr="",gg="",Gg="",ggg="",gimel="",GJcy="",gjcy="",gla="",gl="",glE="",glj="",gnap="",gnapprox="",gne="",gnE="",gneq="",gneqq="",gnsim="",Gopf="",gopf="",grave="`",GreaterEqual="",GreaterEqualLess="",GreaterFullEqual="",GreaterGreater="",GreaterLess="",GreaterSlantEqual="",GreaterTilde="",Gscr="",gscr="",gsim="",gsime="",gsiml="",gtcc="",gtcir="",gt=">",GT=">",Gt="",gtdot="",gtlPar="",gtquest="",gtrapprox="",gtrarr="",gtrdot="",gtreqless="",gtreqqless="",gtrless="",gtrsim="",gvertneqq="",gvnE="",Hacek="",hairsp="",half="",hamilt="",HARDcy="",hardcy="",harrcir="",harr="",hArr="",harrw="",Hat="^",hbar="",Hcirc="",hcirc="",hearts="",heartsuit="",hellip="",hercon="",hfr="",Hfr="",HilbertSpace="",hksearow="",hkswarow="",hoarr="",homtht="",hookleftarrow="",hookrightarrow="",hopf="",Hopf="",horbar="",HorizontalLine="",hscr="",Hscr="",hslash="",Hstrok="",hstrok="",HumpDownHump="",HumpEqual="",hybull="",hyphen="",Iacute="",iacute="",ic="",Icirc="",icirc="",Icy="",icy="",Idot="",IEcy="",iecy="",iexcl="",iff="",ifr="",Ifr="",Igrave="",igrave="",ii="",iiiint="",iiint="",iinfin="",iiota="",IJlig="",ijlig="",Imacr="",imacr="",image$5="",ImaginaryI="",imagline="",imagpart="",imath="",Im="",imof="",imped="",Implies="",incare="",infin="",infintie="",inodot="",intcal="",int="",Int="",integers="",Integral="",intercal="",Intersection="",intlarhk="",intprod="",InvisibleComma="",InvisibleTimes="",IOcy="",iocy="",Iogon="",iogon="",Iopf="",iopf="",Iota="",iota="",iprod="",iquest="",iscr="",Iscr="",isin="",isindot="",isinE="",isins="",isinsv="",isinv="",it="",Itilde="",itilde="",Iukcy="",iukcy="",Iuml="",iuml="",Jcirc="",jcirc="",Jcy="",jcy="",Jfr="",jfr="",jmath="",Jopf="",jopf="",Jscr="",jscr="",Jsercy="",jsercy="",Jukcy="",jukcy="",Kappa="",kappa="",kappav="",Kcedil="",kcedil="",Kcy="",kcy="",Kfr="",kfr="",kgreen="",KHcy="",khcy="",KJcy="",kjcy="",Kopf="",kopf="",Kscr="",kscr="",lAarr="",Lacute="",lacute="",laemptyv="",lagran="",Lambda="",lambda="",lang="",Lang$1="",langd="",langle="",lap="",Laplacetrf="",laquo="",larrb="",larrbfs="",larr="",Larr="",lArr="",larrfs="",larrhk="",larrlp="",larrpl="",larrsim="",larrtl="",latail="",lAtail="",lat="",late="",lates="",lbarr="",lBarr="",lbbrk="",lbrace="{",lbrack="[",lbrke="",lbrksld="",lbrkslu="",Lcaron="",lcaron="",Lcedil="",lcedil="",lceil="",lcub="{",Lcy="",lcy="",ldca="",ldquo="",ldquor="",ldrdhar="",ldrushar="",ldsh="",le="",lE="",LeftAngleBracket="",LeftArrowBar="",leftarrow="",LeftArrow="",Leftarrow="",LeftArrowRightArrow="",leftarrowtail="",LeftCeiling="",LeftDoubleBracket="",LeftDownTeeVector="",LeftDownVectorBar="",LeftDownVector="",LeftFloor="",leftharpoondown="",leftharpoonup="",leftleftarrows="",leftrightarrow="",LeftRightArrow="",Leftrightarrow="",leftrightarrows="",leftrightharpoons="",leftrightsquigarrow="",LeftRightVector="",LeftTeeArrow="",LeftTee="",LeftTeeVector="",leftthreetimes="",LeftTriangleBar="",LeftTriangle="",LeftTriangleEqual="",LeftUpDownVector="",LeftUpTeeVector="",LeftUpVectorBar="",LeftUpVector="",LeftVectorBar="",LeftVector="",lEg="",leg="",leq="",leqq="",leqslant="",lescc="",les="",lesdot="",lesdoto="",lesdotor="",lesg="",lesges="",lessapprox="",lessdot="",lesseqgtr="",lesseqqgtr="",LessEqualGreater="",LessFullEqual="",LessGreater="",lessgtr="",LessLess="",lesssim="",LessSlantEqual="",LessTilde="",lfisht="",lfloor="",Lfr="",lfr="",lg="",lgE="",lHar="",lhard="",lharu="",lharul="",lhblk="",LJcy="",ljcy="",llarr="",ll="",Ll="",llcorner="",Lleftarrow="",llhard="",lltri="",Lmidot="",lmidot="",lmoustache="",lmoust="",lnap="",lnapprox="",lne="",lnE="",lneq="",lneqq="",lnsim="",loang="",loarr="",lobrk="",longleftarrow="",LongLeftArrow="",Longleftarrow="",longleftrightarrow="",LongLeftRightArrow="",Longleftrightarrow="",longmapsto="",longrightarrow="",LongRightArrow="",Longrightarrow="",looparrowleft="",looparrowright="",lopar="",Lopf="",lopf="",loplus="",lotimes="",lowast="",lowbar="_",LowerLeftArrow="",LowerRightArrow="",loz="",lozenge="",lozf="",lpar="(",lparlt="",lrarr="",lrcorner="",lrhar="",lrhard="",lrm="",lrtri="",lsaquo="",lscr="",Lscr="",lsh="",Lsh="",lsim="",lsime="",lsimg="",lsqb="[",lsquo="",lsquor="",Lstrok="",lstrok="",ltcc="",ltcir="",lt$1="<",LT="<",Lt="",ltdot="",lthree="",ltimes="",ltlarr="",ltquest="",ltri="",ltrie="",ltrif="",ltrPar="",lurdshar="",luruhar="",lvertneqq="",lvnE="",macr="",male="",malt="",maltese="",map$1="",mapsto="",mapstodown="",mapstoleft="",mapstoup="",marker="",mcomma="",Mcy="",mcy="",mdash="",mDDot="",measuredangle="",MediumSpace="",Mellintrf="",Mfr="",mfr="",mho="",micro="",midast="*",midcir="",mid="",middot="",minusb="",minus$1="",minusd="",minusdu="",MinusPlus="",mlcp="",mldr="",mnplus="",models="",Mopf="",mopf="",mp="",mscr="",Mscr="",mstpos="",Mu="",mu="",multimap="",mumap="",nabla="",Nacute="",nacute="",nang="",nap="",napE="",napid="",napos="",napprox="",natural="",naturals="",natur="",nbsp="",nbump="",nbumpe="",ncap="",Ncaron="",ncaron="",Ncedil="",ncedil="",ncong="",ncongdot="",ncup="",Ncy="",ncy="",ndash="",nearhk="",nearr="",neArr="",nearrow="",ne="",nedot="",NegativeMediumSpace="",NegativeThickSpace="",NegativeThinSpace="",NegativeVeryThinSpace="",nequiv="",nesear="",nesim="",NestedGreaterGreater="",NestedLessLess="",NewLine=`
`,nexist="",nexists="",Nfr="",nfr="",ngE="",nge="",ngeq="",ngeqq="",ngeqslant="",nges="",nGg="",ngsim="",nGt="",ngt="",ngtr="",nGtv="",nharr="",nhArr="",nhpar="",ni="",nis="",nisd="",niv="",NJcy="",njcy="",nlarr="",nlArr="",nldr="",nlE="",nle="",nleftarrow="",nLeftarrow="",nleftrightarrow="",nLeftrightarrow="",nleq="",nleqq="",nleqslant="",nles="",nless="",nLl="",nlsim="",nLt="",nlt="",nltri="",nltrie="",nLtv="",nmid="",NoBreak="",NonBreakingSpace="",nopf="",Nopf="",Not="",not$1="",NotCongruent="",NotCupCap="",NotDoubleVerticalBar="",NotElement="",NotEqual="",NotEqualTilde="",NotExists="",NotGreater="",NotGreaterEqual="",NotGreaterFullEqual="",NotGreaterGreater="",NotGreaterLess="",NotGreaterSlantEqual="",NotGreaterTilde="",NotHumpDownHump="",NotHumpEqual="",notin="",notindot="",notinE="",notinva="",notinvb="",notinvc="",NotLeftTriangleBar="",NotLeftTriangle="",NotLeftTriangleEqual="",NotLess="",NotLessEqual="",NotLessGreater="",NotLessLess="",NotLessSlantEqual="",NotLessTilde="",NotNestedGreaterGreater="",NotNestedLessLess="",notni="",notniva="",notnivb="",notnivc="",NotPrecedes="",NotPrecedesEqual="",NotPrecedesSlantEqual="",NotReverseElement="",NotRightTriangleBar="",NotRightTriangle="",NotRightTriangleEqual="",NotSquareSubset="",NotSquareSubsetEqual="",NotSquareSuperset="",NotSquareSupersetEqual="",NotSubset="",NotSubsetEqual="",NotSucceeds="",NotSucceedsEqual="",NotSucceedsSlantEqual="",NotSucceedsTilde="",NotSuperset="",NotSupersetEqual="",NotTilde="",NotTildeEqual="",NotTildeFullEqual="",NotTildeTilde="",NotVerticalBar="",nparallel="",npar="",nparsl="",npart="",npolint="",npr="",nprcue="",nprec="",npreceq="",npre="",nrarrc="",nrarr="",nrArr="",nrarrw="",nrightarrow="",nRightarrow="",nrtri="",nrtrie="",nsc="",nsccue="",nsce="",Nscr="",nscr="",nshortmid="",nshortparallel="",nsim="",nsime="",nsimeq="",nsmid="",nspar="",nsqsube="",nsqsupe="",nsub="",nsubE="",nsube="",nsubset="",nsubseteq="",nsubseteqq="",nsucc="",nsucceq="",nsup="",nsupE="",nsupe="",nsupset="",nsupseteq="",nsupseteqq="",ntgl="",Ntilde="",ntilde="",ntlg="",ntriangleleft="",ntrianglelefteq="",ntriangleright="",ntrianglerighteq="",Nu="",nu="",num="#",numero="",numsp="",nvap="",nvdash="",nvDash="",nVdash="",nVDash="",nvge="",nvgt=">",nvHarr="",nvinfin="",nvlArr="",nvle="",nvlt="<",nvltrie="",nvrArr="",nvrtrie="",nvsim="",nwarhk="",nwarr="",nwArr="",nwarrow="",nwnear="",Oacute="",oacute="",oast="",Ocirc="",ocirc="",ocir="",Ocy="",ocy="",odash="",Odblac="",odblac="",odiv="",odot="",odsold="",OElig="",oelig="",ofcir="",Ofr="",ofr="",ogon="",Ograve="",ograve="",ogt="",ohbar="",ohm="",oint="",olarr="",olcir="",olcross="",oline="",olt="",Omacr="",omacr="",Omega="",omega="",Omicron="",omicron="",omid="",ominus="",Oopf="",oopf="",opar="",OpenCurlyDoubleQuote="",OpenCurlyQuote="",operp="",oplus="",orarr="",Or="",or="",ord="",order="",orderof="",ordf="",ordm="",origof="",oror="",orslope="",orv="",oS="",Oscr="",oscr="",Oslash="",oslash="",osol="",Otilde="",otilde="",otimesas="",Otimes="",otimes="",Ouml="",ouml="",ovbar="",OverBar="",OverBrace="",OverBracket="",OverParenthesis="",para="",parallel="",par="",parsim="",parsl="",part="",PartialD="",Pcy="",pcy="",percnt="%",period$1=".",permil="",perp="",pertenk="",Pfr="",pfr="",Phi="",phi="",phiv="",phmmat="",phone="",Pi="",pi="",pitchfork="",piv="",planck="",planckh="",plankv="",plusacir="",plusb="",pluscir="",plus$1="+",plusdo="",plusdu="",pluse="",PlusMinus="",plusmn="",plussim="",plustwo="",pm="",Poincareplane="",pointint="",popf="",Popf="",pound="",prap="",Pr="",pr="",prcue="",precapprox="",prec$1="",preccurlyeq="",Precedes="",PrecedesEqual="",PrecedesSlantEqual="",PrecedesTilde="",preceq="",precnapprox="",precneqq="",precnsim="",pre="",prE="",precsim="",prime="",Prime="",primes="",prnap="",prnE="",prnsim="",prod="",Product="",profalar="",profline="",profsurf="",prop$1="",Proportional="",Proportion="",propto="",prsim="",prurel="",Pscr="",pscr="",Psi="",psi="",puncsp="",Qfr="",qfr="",qint="",qopf="",Qopf="",qprime="",Qscr="",qscr="",quaternions="",quatint="",quest="?",questeq="",quot='"',QUOT='"',rAarr="",race="",Racute="",racute="",radic="",raemptyv="",rang="",Rang="",rangd="",range$2="",rangle="",raquo="",rarrap="",rarrb="",rarrbfs="",rarrc="",rarr="",Rarr="",rArr="",rarrfs="",rarrhk="",rarrlp="",rarrpl="",rarrsim="",Rarrtl="",rarrtl="",rarrw="",ratail="",rAtail="",ratio="",rationals="",rbarr="",rBarr="",RBarr="",rbbrk="",rbrace$1="}",rbrack="]",rbrke="",rbrksld="",rbrkslu="",Rcaron="",rcaron="",Rcedil="",rcedil="",rceil="",rcub="}",Rcy="",rcy="",rdca="",rdldhar="",rdquo="",rdquor="",rdsh="",real="",realine="",realpart="",reals="",Re="",rect="",reg="",REG="",ReverseElement="",ReverseEquilibrium="",ReverseUpEquilibrium="",rfisht="",rfloor="",rfr="",Rfr="",rHar="",rhard="",rharu="",rharul="",Rho="",rho="",rhov="",RightAngleBracket="",RightArrowBar="",rightarrow="",RightArrow="",Rightarrow="",RightArrowLeftArrow="",rightarrowtail="",RightCeiling="",RightDoubleBracket="",RightDownTeeVector="",RightDownVectorBar="",RightDownVector="",RightFloor="",rightharpoondown="",rightharpoonup="",rightleftarrows="",rightleftharpoons="",rightrightarrows="",rightsquigarrow="",RightTeeArrow="",RightTee="",RightTeeVector="",rightthreetimes="",RightTriangleBar="",RightTriangle="",RightTriangleEqual="",RightUpDownVector="",RightUpTeeVector="",RightUpVectorBar="",RightUpVector="",RightVectorBar="",RightVector="",ring="",risingdotseq="",rlarr="",rlhar="",rlm="",rmoustache="",rmoust="",rnmid="",roang="",roarr="",robrk="",ropar="",ropf="",Ropf="",roplus="",rotimes="",RoundImplies="",rpar=")",rpargt="",rppolint="",rrarr="",Rrightarrow="",rsaquo="",rscr="",Rscr="",rsh="",Rsh="",rsqb="]",rsquo="",rsquor="",rthree="",rtimes="",rtri="",rtrie="",rtrif="",rtriltri="",RuleDelayed="",ruluhar="",rx="",Sacute="",sacute="",sbquo="",scap="",Scaron="",scaron="",Sc="",sc="",sccue="",sce="",scE="",Scedil="",scedil="",Scirc="",scirc="",scnap="",scnE="",scnsim="",scpolint="",scsim="",Scy="",scy="",sdotb="",sdot="",sdote="",searhk="",searr="",seArr="",searrow="",sect="",semi=";",seswar="",setminus="",setmn="",sext="",Sfr="",sfr="",sfrown="",sharp="",SHCHcy="",shchcy="",SHcy="",shcy="",ShortDownArrow="",ShortLeftArrow="",shortmid="",shortparallel="",ShortRightArrow="",ShortUpArrow="",shy="",Sigma="",sigma="",sigmaf="",sigmav="",sim="",simdot="",sime="",simeq="",simg="",simgE="",siml="",simlE="",simne="",simplus="",simrarr="",slarr="",SmallCircle="",smallsetminus="",smashp="",smeparsl="",smid="",smile="",smt="",smte="",smtes="",SOFTcy="",softcy="",solbar="",solb="",sol="/",Sopf="",sopf="",spades="",spadesuit="",spar="",sqcap="",sqcaps="",sqcup="",sqcups="",Sqrt="",sqsub="",sqsube="",sqsubset="",sqsubseteq="",sqsup="",sqsupe="",sqsupset="",sqsupseteq="",square="",Square="",SquareIntersection="",SquareSubset="",SquareSubsetEqual="",SquareSuperset="",SquareSupersetEqual="",SquareUnion="",squarf="",squ="",squf="",srarr="",Sscr="",sscr="",ssetmn="",ssmile="",sstarf="",Star="",star$1="",starf="",straightepsilon="",straightphi="",strns="",sub="",Sub="",subdot="",subE="",sube="",subedot="",submult="",subnE="",subne="",subplus="",subrarr="",subset="",Subset="",subseteq="",subseteqq="",SubsetEqual="",subsetneq="",subsetneqq="",subsim="",subsub="",subsup="",succapprox="",succ="",succcurlyeq="",Succeeds="",SucceedsEqual="",SucceedsSlantEqual="",SucceedsTilde="",succeq="",succnapprox="",succneqq="",succnsim="",succsim="",SuchThat="",sum="",Sum="",sung="",sup1="",sup2="",sup3="",sup$2="",Sup="",supdot="",supdsub="",supE="",supe="",supedot="",Superset="",SupersetEqual="",suphsol="",suphsub="",suplarr="",supmult="",supnE="",supne="",supplus="",supset="",Supset="",supseteq="",supseteqq="",supsetneq="",supsetneqq="",supsim="",supsub="",supsup="",swarhk="",swarr="",swArr="",swarrow="",swnwar="",szlig="",Tab="	",target="",Tau="",tau="",tbrk="",Tcaron="",tcaron="",Tcedil="",tcedil="",Tcy="",tcy="",tdot="",telrec="",Tfr="",tfr="",there4="",therefore="",Therefore="",Theta="",theta="",thetasym="",thetav="",thickapprox="",thicksim="",ThickSpace="",ThinSpace="",thinsp="",thkap="",thksim="",THORN="",thorn="",tilde="",Tilde="",TildeEqual="",TildeFullEqual="",TildeTilde="",timesbar="",timesb="",times="",timesd="",tint="",toea="",topbot="",topcir="",top$1="",Topf="",topf="",topfork="",tosa="",tprime="",trade="",TRADE="",triangle="",triangledown="",triangleleft="",trianglelefteq="",triangleq="",triangleright="",trianglerighteq="",tridot="",trie="",triminus="",TripleDot="",triplus="",trisb="",tritime="",trpezium="",Tscr="",tscr="",TScy="",tscy="",TSHcy="",tshcy="",Tstrok="",tstrok="",twixt="",twoheadleftarrow="",twoheadrightarrow="",Uacute="",uacute="",uarr="",Uarr="",uArr="",Uarrocir="",Ubrcy="",ubrcy="",Ubreve="",ubreve="",Ucirc="",ucirc="",Ucy="",ucy="",udarr="",Udblac="",udblac="",udhar="",ufisht="",Ufr="",ufr="",Ugrave="",ugrave="",uHar="",uharl="",uharr="",uhblk="",ulcorn="",ulcorner="",ulcrop="",ultri="",Umacr="",umacr="",uml="",UnderBar="_",UnderBrace="",UnderBracket="",UnderParenthesis="",Union="",UnionPlus="",Uogon="",uogon="",Uopf="",uopf="",UpArrowBar="",uparrow="",UpArrow="",Uparrow="",UpArrowDownArrow="",updownarrow="",UpDownArrow="",Updownarrow="",UpEquilibrium="",upharpoonleft="",upharpoonright="",uplus="",UpperLeftArrow="",UpperRightArrow="",upsi="",Upsi="",upsih="",Upsilon="",upsilon="",UpTeeArrow="",UpTee="",upuparrows="",urcorn="",urcorner="",urcrop="",Uring="",uring="",urtri="",Uscr="",uscr="",utdot="",Utilde="",utilde="",utri="",utrif="",uuarr="",Uuml="",uuml="",uwangle="",vangrt="",varepsilon="",varkappa="",varnothing="",varphi="",varpi="",varpropto="",varr="",vArr="",varrho="",varsigma="",varsubsetneq="",varsubsetneqq="",varsupsetneq="",varsupsetneqq="",vartheta="",vartriangleleft="",vartriangleright="",vBar="",Vbar="",vBarv="",Vcy="",vcy="",vdash="",vDash="",Vdash="",VDash="",Vdashl="",veebar="",vee="",Vee="",veeeq="",vellip="",verbar="|",Verbar="",vert="|",Vert="",VerticalBar="",VerticalLine="|",VerticalSeparator="",VerticalTilde="",VeryThinSpace="",Vfr="",vfr="",vltri="",vnsub="",vnsup="",Vopf="",vopf="",vprop="",vrtri="",Vscr="",vscr="",vsubnE="",vsubne="",vsupnE="",vsupne="",Vvdash="",vzigzag="",Wcirc="",wcirc="",wedbar="",wedge="",Wedge="",wedgeq="",weierp="",Wfr="",wfr="",Wopf="",wopf="",wp="",wr="",wreath="",Wscr="",wscr="",xcap="",xcirc="",xcup="",xdtri="",Xfr="",xfr="",xharr="",xhArr="",Xi="",xi="",xlarr="",xlArr="",xmap="",xnis="",xodot="",Xopf="",xopf="",xoplus="",xotime="",xrarr="",xrArr="",Xscr="",xscr="",xsqcup="",xuplus="",xutri="",xvee="",xwedge="",Yacute="",yacute="",YAcy="",yacy="",Ycirc="",ycirc="",Ycy="",ycy="",yen="",Yfr="",yfr="",YIcy="",yicy="",Yopf="",yopf="",Yscr="",yscr="",YUcy="",yucy="",yuml="",Yuml="",Zacute="",zacute="",Zcaron="",zcaron="",Zcy="",zcy="",Zdot="",zdot="",zeetrf="",ZeroWidthSpace="",Zeta="",zeta="",zfr="",Zfr="",ZHcy="",zhcy="",zigrarr="",zopf="",Zopf="",Zscr="",zscr="",zwj="",zwnj="",require$$0={Aacute,aacute,Abreve,abreve,ac,acd,acE,Acirc,acirc,acute,Acy,acy,AElig,aelig,af,Afr,afr,Agrave,agrave,alefsym,aleph,Alpha,alpha,Amacr,amacr,amalg,amp,AMP,andand,And,and,andd,andslope,andv,ang,ange,angle,angmsdaa,angmsdab,angmsdac,angmsdad,angmsdae,angmsdaf,angmsdag,angmsdah,angmsd,angrt,angrtvb,angrtvbd,angsph,angst,angzarr,Aogon,aogon,Aopf,aopf,apacir,ap,apE,ape,apid,apos,ApplyFunction,approx,approxeq,Aring,aring,Ascr,ascr,Assign,ast,asymp,asympeq,Atilde,atilde,Auml,auml,awconint,awint,backcong,backepsilon,backprime,backsim,backsimeq,Backslash,Barv,barvee,barwed,Barwed,barwedge,bbrk,bbrktbrk,bcong,Bcy,bcy,bdquo,becaus,because,Because,bemptyv,bepsi,bernou,Bernoullis,Beta,beta,beth,between,Bfr,bfr,bigcap,bigcirc,bigcup,bigodot,bigoplus,bigotimes,bigsqcup,bigstar,bigtriangledown,bigtriangleup,biguplus,bigvee,bigwedge,bkarow,blacklozenge,blacksquare,blacktriangle,blacktriangledown,blacktriangleleft,blacktriangleright,blank,blk12,blk14,blk34,block:block$4,bne,bnequiv,bNot,bnot,Bopf,bopf,bot,bottom,bowtie,boxbox,boxdl,boxdL,boxDl,boxDL,boxdr,boxdR,boxDr,boxDR,boxh,boxH,boxhd,boxHd,boxhD,boxHD,boxhu,boxHu,boxhU,boxHU,boxminus,boxplus,boxtimes,boxul,boxuL,boxUl,boxUL,boxur,boxuR,boxUr,boxUR,boxv,boxV,boxvh,boxvH,boxVh,boxVH,boxvl,boxvL,boxVl,boxVL,boxvr,boxvR,boxVr,boxVR,bprime,breve,Breve,brvbar,bscr,Bscr,bsemi,bsim,bsime,bsolb,bsol,bsolhsub,bull,bullet,bump,bumpE,bumpe,Bumpeq,bumpeq,Cacute,cacute,capand,capbrcup,capcap,cap,Cap,capcup,capdot,CapitalDifferentialD,caps,caret,caron,Cayleys,ccaps,Ccaron,ccaron,Ccedil,ccedil,Ccirc,ccirc,Cconint,ccups,ccupssm,Cdot,cdot,cedil,Cedilla,cemptyv,cent,centerdot,CenterDot,cfr,Cfr,CHcy,chcy,check,checkmark,Chi,chi,circ,circeq,circlearrowleft,circlearrowright,circledast,circledcirc,circleddash,CircleDot,circledR,circledS,CircleMinus,CirclePlus,CircleTimes,cir,cirE,cire,cirfnint,cirmid,cirscir,ClockwiseContourIntegral,CloseCurlyDoubleQuote,CloseCurlyQuote,clubs,clubsuit,colon:colon$1,Colon,Colone,colone,coloneq,comma:comma$1,commat,comp,compfn,complement,complexes,cong,congdot,Congruent,conint,Conint,ContourIntegral,copf,Copf,coprod,Coproduct,copy,COPY,copysr,CounterClockwiseContourIntegral,crarr,cross,Cross,Cscr,cscr,csub,csube,csup,csupe,ctdot,cudarrl,cudarrr,cuepr,cuesc,cularr,cularrp,cupbrcap,cupcap,CupCap,cup,Cup,cupcup,cupdot,cupor,cups,curarr,curarrm,curlyeqprec,curlyeqsucc,curlyvee,curlywedge,curren,curvearrowleft,curvearrowright,cuvee,cuwed,cwconint,cwint,cylcty,dagger,Dagger,daleth,darr,Darr,dArr,dash:dash$2,Dashv,dashv,dbkarow,dblac,Dcaron,dcaron,Dcy,dcy,ddagger,ddarr,DD,dd,DDotrahd,ddotseq,deg,Del,Delta,delta,demptyv,dfisht,Dfr,dfr,dHar,dharl,dharr,DiacriticalAcute,DiacriticalDot,DiacriticalDoubleAcute,DiacriticalGrave,DiacriticalTilde,diam,diamond,Diamond,diamondsuit,diams,die,DifferentialD,digamma,disin,div,divide,divideontimes,divonx,DJcy,djcy,dlcorn,dlcrop,dollar,Dopf,dopf,Dot,dot:dot$1,DotDot,doteq,doteqdot,DotEqual,dotminus,dotplus,dotsquare,doublebarwedge,DoubleContourIntegral,DoubleDot,DoubleDownArrow,DoubleLeftArrow,DoubleLeftRightArrow,DoubleLeftTee,DoubleLongLeftArrow,DoubleLongLeftRightArrow,DoubleLongRightArrow,DoubleRightArrow,DoubleRightTee,DoubleUpArrow,DoubleUpDownArrow,DoubleVerticalBar,DownArrowBar,downarrow,DownArrow,Downarrow,DownArrowUpArrow,DownBreve,downdownarrows,downharpoonleft,downharpoonright,DownLeftRightVector,DownLeftTeeVector,DownLeftVectorBar,DownLeftVector,DownRightTeeVector,DownRightVectorBar,DownRightVector,DownTeeArrow,DownTee,drbkarow,drcorn,drcrop,Dscr,dscr,DScy,dscy,dsol,Dstrok,dstrok,dtdot,dtri,dtrif,duarr,duhar,dwangle,DZcy,dzcy,dzigrarr,Eacute,eacute,easter,Ecaron,ecaron,Ecirc,ecirc,ecir,ecolon,Ecy,ecy,eDDot,Edot,edot,eDot,ee,efDot,Efr,efr,eg,Egrave,egrave,egs,egsdot,el,Element:Element$4,elinters,ell,els,elsdot,Emacr,emacr,empty:empty$2,emptyset,EmptySmallSquare,emptyv,EmptyVerySmallSquare,emsp13,emsp14,emsp,ENG,eng,ensp,Eogon,eogon,Eopf,eopf,epar,eparsl,eplus,epsi,Epsilon:Epsilon$1,epsilon,epsiv,eqcirc,eqcolon,eqsim,eqslantgtr,eqslantless,Equal,equals,EqualTilde,equest,Equilibrium,equiv,equivDD,eqvparsl,erarr,erDot,escr,Escr,esdot,Esim,esim,Eta,eta,ETH,eth,Euml,euml,euro,excl,exist,Exists,expectation,exponentiale,ExponentialE,fallingdotseq,Fcy,fcy,female,ffilig,fflig,ffllig,Ffr,ffr,filig,FilledSmallSquare,FilledVerySmallSquare,fjlig,flat,fllig,fltns,fnof,Fopf,fopf,forall,ForAll,fork,forkv,Fouriertrf,fpartint,frac12,frac13,frac14,frac15,frac16,frac18,frac23,frac25,frac34,frac35,frac38,frac45,frac56,frac58,frac78,frasl,frown,fscr,Fscr,gacute,Gamma,gamma,Gammad,gammad,gap,Gbreve,gbreve,Gcedil,Gcirc,gcirc,Gcy,gcy,Gdot,gdot,ge,gE,gEl,gel,geq,geqq,geqslant,gescc,ges,gesdot,gesdoto,gesdotol,gesl,gesles,Gfr,gfr,gg,Gg,ggg,gimel,GJcy,gjcy,gla,gl,glE,glj,gnap,gnapprox,gne,gnE,gneq,gneqq,gnsim,Gopf,gopf,grave,GreaterEqual,GreaterEqualLess,GreaterFullEqual,GreaterGreater,GreaterLess,GreaterSlantEqual,GreaterTilde,Gscr,gscr,gsim,gsime,gsiml,gtcc,gtcir,gt,GT,Gt,gtdot,gtlPar,gtquest,gtrapprox,gtrarr,gtrdot,gtreqless,gtreqqless,gtrless,gtrsim,gvertneqq,gvnE,Hacek,hairsp,half,hamilt,HARDcy,hardcy,harrcir,harr,hArr,harrw,Hat,hbar,Hcirc,hcirc,hearts,heartsuit,hellip,hercon,hfr,Hfr,HilbertSpace,hksearow,hkswarow,hoarr,homtht,hookleftarrow,hookrightarrow,hopf,Hopf,horbar,HorizontalLine,hscr,Hscr,hslash,Hstrok,hstrok,HumpDownHump,HumpEqual,hybull,hyphen,Iacute,iacute,ic,Icirc,icirc,Icy,icy,Idot,IEcy,iecy,iexcl,iff,ifr,Ifr,Igrave,igrave,ii,iiiint,iiint,iinfin,iiota,IJlig,ijlig,Imacr,imacr,image:image$5,ImaginaryI,imagline,imagpart,imath,Im,imof,imped,Implies,incare,in:"",infin,infintie,inodot,intcal,int,Int,integers,Integral,intercal,Intersection,intlarhk,intprod,InvisibleComma,InvisibleTimes,IOcy,iocy,Iogon,iogon,Iopf,iopf,Iota,iota,iprod,iquest,iscr,Iscr,isin,isindot,isinE,isins,isinsv,isinv,it,Itilde,itilde,Iukcy,iukcy,Iuml,iuml,Jcirc,jcirc,Jcy,jcy,Jfr,jfr,jmath,Jopf,jopf,Jscr,jscr,Jsercy,jsercy,Jukcy,jukcy,Kappa,kappa,kappav,Kcedil,kcedil,Kcy,kcy,Kfr,kfr,kgreen,KHcy,khcy,KJcy,kjcy,Kopf,kopf,Kscr,kscr,lAarr,Lacute,lacute,laemptyv,lagran,Lambda,lambda,lang,Lang:Lang$1,langd,langle,lap,Laplacetrf,laquo,larrb,larrbfs,larr,Larr,lArr,larrfs,larrhk,larrlp,larrpl,larrsim,larrtl,latail,lAtail,lat,late,lates,lbarr,lBarr,lbbrk,lbrace,lbrack,lbrke,lbrksld,lbrkslu,Lcaron,lcaron,Lcedil,lcedil,lceil,lcub,Lcy,lcy,ldca,ldquo,ldquor,ldrdhar,ldrushar,ldsh,le,lE,LeftAngleBracket,LeftArrowBar,leftarrow,LeftArrow,Leftarrow,LeftArrowRightArrow,leftarrowtail,LeftCeiling,LeftDoubleBracket,LeftDownTeeVector,LeftDownVectorBar,LeftDownVector,LeftFloor,leftharpoondown,leftharpoonup,leftleftarrows,leftrightarrow,LeftRightArrow,Leftrightarrow,leftrightarrows,leftrightharpoons,leftrightsquigarrow,LeftRightVector,LeftTeeArrow,LeftTee,LeftTeeVector,leftthreetimes,LeftTriangleBar,LeftTriangle,LeftTriangleEqual,LeftUpDownVector,LeftUpTeeVector,LeftUpVectorBar,LeftUpVector,LeftVectorBar,LeftVector,lEg,leg,leq,leqq,leqslant,lescc,les,lesdot,lesdoto,lesdotor,lesg,lesges,lessapprox,lessdot,lesseqgtr,lesseqqgtr,LessEqualGreater,LessFullEqual,LessGreater,lessgtr,LessLess,lesssim,LessSlantEqual,LessTilde,lfisht,lfloor,Lfr,lfr,lg,lgE,lHar,lhard,lharu,lharul,lhblk,LJcy,ljcy,llarr,ll,Ll,llcorner,Lleftarrow,llhard,lltri,Lmidot,lmidot,lmoustache,lmoust,lnap,lnapprox,lne,lnE,lneq,lneqq,lnsim,loang,loarr,lobrk,longleftarrow,LongLeftArrow,Longleftarrow,longleftrightarrow,LongLeftRightArrow,Longleftrightarrow,longmapsto,longrightarrow,LongRightArrow,Longrightarrow,looparrowleft,looparrowright,lopar,Lopf,lopf,loplus,lotimes,lowast,lowbar,LowerLeftArrow,LowerRightArrow,loz,lozenge,lozf,lpar,lparlt,lrarr,lrcorner,lrhar,lrhard,lrm,lrtri,lsaquo,lscr,Lscr,lsh,Lsh,lsim,lsime,lsimg,lsqb,lsquo,lsquor,Lstrok,lstrok,ltcc,ltcir,lt:lt$1,LT,Lt,ltdot,lthree,ltimes,ltlarr,ltquest,ltri,ltrie,ltrif,ltrPar,lurdshar,luruhar,lvertneqq,lvnE,macr,male,malt,maltese,Map:"",map:map$1,mapsto,mapstodown,mapstoleft,mapstoup,marker,mcomma,Mcy,mcy,mdash,mDDot,measuredangle,MediumSpace,Mellintrf,Mfr,mfr,mho,micro,midast,midcir,mid,middot,minusb,minus:minus$1,minusd,minusdu,MinusPlus,mlcp,mldr,mnplus,models,Mopf,mopf,mp,mscr,Mscr,mstpos,Mu,mu,multimap,mumap,nabla,Nacute,nacute,nang,nap,napE,napid,napos,napprox,natural,naturals,natur,nbsp,nbump,nbumpe,ncap,Ncaron,ncaron,Ncedil,ncedil,ncong,ncongdot,ncup,Ncy,ncy,ndash,nearhk,nearr,neArr,nearrow,ne,nedot,NegativeMediumSpace,NegativeThickSpace,NegativeThinSpace,NegativeVeryThinSpace,nequiv,nesear,nesim,NestedGreaterGreater,NestedLessLess,NewLine,nexist,nexists,Nfr,nfr,ngE,nge,ngeq,ngeqq,ngeqslant,nges,nGg,ngsim,nGt,ngt,ngtr,nGtv,nharr,nhArr,nhpar,ni,nis,nisd,niv,NJcy,njcy,nlarr,nlArr,nldr,nlE,nle,nleftarrow,nLeftarrow,nleftrightarrow,nLeftrightarrow,nleq,nleqq,nleqslant,nles,nless,nLl,nlsim,nLt,nlt,nltri,nltrie,nLtv,nmid,NoBreak,NonBreakingSpace,nopf,Nopf,Not,not:not$1,NotCongruent,NotCupCap,NotDoubleVerticalBar,NotElement,NotEqual,NotEqualTilde,NotExists,NotGreater,NotGreaterEqual,NotGreaterFullEqual,NotGreaterGreater,NotGreaterLess,NotGreaterSlantEqual,NotGreaterTilde,NotHumpDownHump,NotHumpEqual,notin,notindot,notinE,notinva,notinvb,notinvc,NotLeftTriangleBar,NotLeftTriangle,NotLeftTriangleEqual,NotLess,NotLessEqual,NotLessGreater,NotLessLess,NotLessSlantEqual,NotLessTilde,NotNestedGreaterGreater,NotNestedLessLess,notni,notniva,notnivb,notnivc,NotPrecedes,NotPrecedesEqual,NotPrecedesSlantEqual,NotReverseElement,NotRightTriangleBar,NotRightTriangle,NotRightTriangleEqual,NotSquareSubset,NotSquareSubsetEqual,NotSquareSuperset,NotSquareSupersetEqual,NotSubset,NotSubsetEqual,NotSucceeds,NotSucceedsEqual,NotSucceedsSlantEqual,NotSucceedsTilde,NotSuperset,NotSupersetEqual,NotTilde,NotTildeEqual,NotTildeFullEqual,NotTildeTilde,NotVerticalBar,nparallel,npar,nparsl,npart,npolint,npr,nprcue,nprec,npreceq,npre,nrarrc,nrarr,nrArr,nrarrw,nrightarrow,nRightarrow,nrtri,nrtrie,nsc,nsccue,nsce,Nscr,nscr,nshortmid,nshortparallel,nsim,nsime,nsimeq,nsmid,nspar,nsqsube,nsqsupe,nsub,nsubE,nsube,nsubset,nsubseteq,nsubseteqq,nsucc,nsucceq,nsup,nsupE,nsupe,nsupset,nsupseteq,nsupseteqq,ntgl,Ntilde,ntilde,ntlg,ntriangleleft,ntrianglelefteq,ntriangleright,ntrianglerighteq,Nu,nu,num,numero,numsp,nvap,nvdash,nvDash,nVdash,nVDash,nvge,nvgt,nvHarr,nvinfin,nvlArr,nvle,nvlt,nvltrie,nvrArr,nvrtrie,nvsim,nwarhk,nwarr,nwArr,nwarrow,nwnear,Oacute,oacute,oast,Ocirc,ocirc,ocir,Ocy,ocy,odash,Odblac,odblac,odiv,odot,odsold,OElig,oelig,ofcir,Ofr,ofr,ogon,Ograve,ograve,ogt,ohbar,ohm,oint,olarr,olcir,olcross,oline,olt,Omacr,omacr,Omega,omega,Omicron,omicron,omid,ominus,Oopf,oopf,opar,OpenCurlyDoubleQuote,OpenCurlyQuote,operp,oplus,orarr,Or,or,ord,order,orderof,ordf,ordm,origof,oror,orslope,orv,oS,Oscr,oscr,Oslash,oslash,osol,Otilde,otilde,otimesas,Otimes,otimes,Ouml,ouml,ovbar,OverBar,OverBrace,OverBracket,OverParenthesis,para,parallel,par,parsim,parsl,part,PartialD,Pcy,pcy,percnt,period:period$1,permil,perp,pertenk,Pfr,pfr,Phi,phi,phiv,phmmat,phone,Pi,pi,pitchfork,piv,planck,planckh,plankv,plusacir,plusb,pluscir,plus:plus$1,plusdo,plusdu,pluse,PlusMinus,plusmn,plussim,plustwo,pm,Poincareplane,pointint,popf,Popf,pound,prap,Pr,pr,prcue,precapprox,prec:prec$1,preccurlyeq,Precedes,PrecedesEqual,PrecedesSlantEqual,PrecedesTilde,preceq,precnapprox,precneqq,precnsim,pre,prE,precsim,prime,Prime,primes,prnap,prnE,prnsim,prod,Product,profalar,profline,profsurf,prop:prop$1,Proportional,Proportion,propto,prsim,prurel,Pscr,pscr,Psi,psi,puncsp,Qfr,qfr,qint,qopf,Qopf,qprime,Qscr,qscr,quaternions,quatint,quest,questeq,quot,QUOT,rAarr,race,Racute,racute,radic,raemptyv,rang,Rang,rangd,range:range$2,rangle,raquo,rarrap,rarrb,rarrbfs,rarrc,rarr,Rarr,rArr,rarrfs,rarrhk,rarrlp,rarrpl,rarrsim,Rarrtl,rarrtl,rarrw,ratail,rAtail,ratio,rationals,rbarr,rBarr,RBarr,rbbrk,rbrace:rbrace$1,rbrack,rbrke,rbrksld,rbrkslu,Rcaron,rcaron,Rcedil,rcedil,rceil,rcub,Rcy,rcy,rdca,rdldhar,rdquo,rdquor,rdsh,real,realine,realpart,reals,Re,rect,reg,REG,ReverseElement,ReverseEquilibrium,ReverseUpEquilibrium,rfisht,rfloor,rfr,Rfr,rHar,rhard,rharu,rharul,Rho,rho,rhov,RightAngleBracket,RightArrowBar,rightarrow,RightArrow,Rightarrow,RightArrowLeftArrow,rightarrowtail,RightCeiling,RightDoubleBracket,RightDownTeeVector,RightDownVectorBar,RightDownVector,RightFloor,rightharpoondown,rightharpoonup,rightleftarrows,rightleftharpoons,rightrightarrows,rightsquigarrow,RightTeeArrow,RightTee,RightTeeVector,rightthreetimes,RightTriangleBar,RightTriangle,RightTriangleEqual,RightUpDownVector,RightUpTeeVector,RightUpVectorBar,RightUpVector,RightVectorBar,RightVector,ring,risingdotseq,rlarr,rlhar,rlm,rmoustache,rmoust,rnmid,roang,roarr,robrk,ropar,ropf,Ropf,roplus,rotimes,RoundImplies,rpar,rpargt,rppolint,rrarr,Rrightarrow,rsaquo,rscr,Rscr,rsh,Rsh,rsqb,rsquo,rsquor,rthree,rtimes,rtri,rtrie,rtrif,rtriltri,RuleDelayed,ruluhar,rx,Sacute,sacute,sbquo,scap,Scaron,scaron,Sc,sc,sccue,sce,scE,Scedil,scedil,Scirc,scirc,scnap,scnE,scnsim,scpolint,scsim,Scy,scy,sdotb,sdot,sdote,searhk,searr,seArr,searrow,sect,semi,seswar,setminus,setmn,sext,Sfr,sfr,sfrown,sharp,SHCHcy,shchcy,SHcy,shcy,ShortDownArrow,ShortLeftArrow,shortmid,shortparallel,ShortRightArrow,ShortUpArrow,shy,Sigma,sigma,sigmaf,sigmav,sim,simdot,sime,simeq,simg,simgE,siml,simlE,simne,simplus,simrarr,slarr,SmallCircle,smallsetminus,smashp,smeparsl,smid,smile,smt,smte,smtes,SOFTcy,softcy,solbar,solb,sol,Sopf,sopf,spades,spadesuit,spar,sqcap,sqcaps,sqcup,sqcups,Sqrt,sqsub,sqsube,sqsubset,sqsubseteq,sqsup,sqsupe,sqsupset,sqsupseteq,square,Square,SquareIntersection,SquareSubset,SquareSubsetEqual,SquareSuperset,SquareSupersetEqual,SquareUnion,squarf,squ,squf,srarr,Sscr,sscr,ssetmn,ssmile,sstarf,Star,star:star$1,starf,straightepsilon,straightphi,strns,sub,Sub,subdot,subE,sube,subedot,submult,subnE,subne,subplus,subrarr,subset,Subset,subseteq,subseteqq,SubsetEqual,subsetneq,subsetneqq,subsim,subsub,subsup,succapprox,succ,succcurlyeq,Succeeds,SucceedsEqual,SucceedsSlantEqual,SucceedsTilde,succeq,succnapprox,succneqq,succnsim,succsim,SuchThat,sum,Sum,sung,sup1,sup2,sup3,sup:sup$2,Sup,supdot,supdsub,supE,supe,supedot,Superset,SupersetEqual,suphsol,suphsub,suplarr,supmult,supnE,supne,supplus,supset,Supset,supseteq,supseteqq,supsetneq,supsetneqq,supsim,supsub,supsup,swarhk,swarr,swArr,swarrow,swnwar,szlig,Tab,target,Tau,tau,tbrk,Tcaron,tcaron,Tcedil,tcedil,Tcy,tcy,tdot,telrec,Tfr,tfr,there4,therefore,Therefore,Theta,theta,thetasym,thetav,thickapprox,thicksim,ThickSpace,ThinSpace,thinsp,thkap,thksim,THORN,thorn,tilde,Tilde,TildeEqual,TildeFullEqual,TildeTilde,timesbar,timesb,times,timesd,tint,toea,topbot,topcir,top:top$1,Topf,topf,topfork,tosa,tprime,trade,TRADE,triangle,triangledown,triangleleft,trianglelefteq,triangleq,triangleright,trianglerighteq,tridot,trie,triminus,TripleDot,triplus,trisb,tritime,trpezium,Tscr,tscr,TScy,tscy,TSHcy,tshcy,Tstrok,tstrok,twixt,twoheadleftarrow,twoheadrightarrow,Uacute,uacute,uarr,Uarr,uArr,Uarrocir,Ubrcy,ubrcy,Ubreve,ubreve,Ucirc,ucirc,Ucy,ucy,udarr,Udblac,udblac,udhar,ufisht,Ufr,ufr,Ugrave,ugrave,uHar,uharl,uharr,uhblk,ulcorn,ulcorner,ulcrop,ultri,Umacr,umacr,uml,UnderBar,UnderBrace,UnderBracket,UnderParenthesis,Union,UnionPlus,Uogon,uogon,Uopf,uopf,UpArrowBar,uparrow,UpArrow,Uparrow,UpArrowDownArrow,updownarrow,UpDownArrow,Updownarrow,UpEquilibrium,upharpoonleft,upharpoonright,uplus,UpperLeftArrow,UpperRightArrow,upsi,Upsi,upsih,Upsilon,upsilon,UpTeeArrow,UpTee,upuparrows,urcorn,urcorner,urcrop,Uring,uring,urtri,Uscr,uscr,utdot,Utilde,utilde,utri,utrif,uuarr,Uuml,uuml,uwangle,vangrt,varepsilon,varkappa,varnothing,varphi,varpi,varpropto,varr,vArr,varrho,varsigma,varsubsetneq,varsubsetneqq,varsupsetneq,varsupsetneqq,vartheta,vartriangleleft,vartriangleright,vBar,Vbar,vBarv,Vcy,vcy,vdash,vDash,Vdash,VDash,Vdashl,veebar,vee,Vee,veeeq,vellip,verbar,Verbar,vert,Vert,VerticalBar,VerticalLine,VerticalSeparator,VerticalTilde,VeryThinSpace,Vfr,vfr,vltri,vnsub,vnsup,Vopf,vopf,vprop,vrtri,Vscr,vscr,vsubnE,vsubne,vsupnE,vsupne,Vvdash,vzigzag,Wcirc,wcirc,wedbar,wedge,Wedge,wedgeq,weierp,Wfr,wfr,Wopf,wopf,wp,wr,wreath,Wscr,wscr,xcap,xcirc,xcup,xdtri,Xfr,xfr,xharr,xhArr,Xi,xi,xlarr,xlArr,xmap,xnis,xodot,Xopf,xopf,xoplus,xotime,xrarr,xrArr,Xscr,xscr,xsqcup,xuplus,xutri,xvee,xwedge,Yacute,yacute,YAcy,yacy,Ycirc,ycirc,Ycy,ycy,yen,Yfr,yfr,YIcy,yicy,Yopf,yopf,Yscr,yscr,YUcy,yucy,yuml,Yuml,Zacute,zacute,Zcaron,zcaron,Zcy,zcy,Zdot,zdot,zeetrf,ZeroWidthSpace,Zeta,zeta,zfr,Zfr,ZHcy,zhcy,zigrarr,zopf,Zopf,Zscr,zscr,zwj,zwnj};var entities,hasRequiredEntities;function requireEntities(){return hasRequiredEntities||(hasRequiredEntities=1,entities=require$$0),entities}var regex$4,hasRequiredRegex$4;function requireRegex$4(){return hasRequiredRegex$4||(hasRequiredRegex$4=1,regex$4=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/),regex$4}var mdurl={},encode_1,hasRequiredEncode$1;function requireEncode$1(){if(hasRequiredEncode$1)return encode_1;hasRequiredEncode$1=1;var o={};function e(a){var l,u,c=o[a];if(c)return c;for(c=o[a]=[],l=0;l<128;l++)u=String.fromCharCode(l),/^[0-9a-z]$/i.test(u)?c.push(u):c.push("%"+("0"+l.toString(16).toUpperCase()).slice(-2));for(l=0;l<a.length;l++)c[a.charCodeAt(l)]=a[l];return c}function s(a,l,u){var c,d,h,p,m,g="";for(typeof l!="string"&&(u=l,l=s.defaultChars),typeof u>"u"&&(u=!0),m=e(l),c=0,d=a.length;c<d;c++){if(h=a.charCodeAt(c),u&&h===37&&c+2<d&&/^[0-9a-f]{2}$/i.test(a.slice(c+1,c+3))){g+=a.slice(c,c+3),c+=2;continue}if(h<128){g+=m[h];continue}if(h>=55296&&h<=57343){if(h>=55296&&h<=56319&&c+1<d&&(p=a.charCodeAt(c+1),p>=56320&&p<=57343)){g+=encodeURIComponent(a[c]+a[c+1]),c++;continue}g+="%EF%BF%BD";continue}g+=encodeURIComponent(a[c])}return g}return s.defaultChars=";/?:@&=+$,-_.!~*'()#",s.componentChars="-_.!~*'()",encode_1=s,encode_1}var decode_1,hasRequiredDecode$1;function requireDecode$1(){if(hasRequiredDecode$1)return decode_1;hasRequiredDecode$1=1;var o={};function e(a){var l,u,c=o[a];if(c)return c;for(c=o[a]=[],l=0;l<128;l++)u=String.fromCharCode(l),c.push(u);for(l=0;l<a.length;l++)u=a.charCodeAt(l),c[u]="%"+("0"+u.toString(16).toUpperCase()).slice(-2);return c}function s(a,l){var u;return typeof l!="string"&&(l=s.defaultChars),u=e(l),a.replace(/(%[a-f0-9]{2})+/gi,function(c){var d,h,p,m,g,y,A,T="";for(d=0,h=c.length;d<h;d+=3){if(p=parseInt(c.slice(d+1,d+3),16),p<128){T+=u[p];continue}if((p&224)===192&&d+3<h&&(m=parseInt(c.slice(d+4,d+6),16),(m&192)===128)){A=p<<6&1984|m&63,A<128?T+="":T+=String.fromCharCode(A),d+=3;continue}if((p&240)===224&&d+6<h&&(m=parseInt(c.slice(d+4,d+6),16),g=parseInt(c.slice(d+7,d+9),16),(m&192)===128&&(g&192)===128)){A=p<<12&61440|m<<6&4032|g&63,A<2048||A>=55296&&A<=57343?T+="":T+=String.fromCharCode(A),d+=6;continue}if((p&248)===240&&d+9<h&&(m=parseInt(c.slice(d+4,d+6),16),g=parseInt(c.slice(d+7,d+9),16),y=parseInt(c.slice(d+10,d+12),16),(m&192)===128&&(g&192)===128&&(y&192)===128)){A=p<<18&1835008|m<<12&258048|g<<6&4032|y&63,A<65536||A>1114111?T+="":(A-=65536,T+=String.fromCharCode(55296+(A>>10),56320+(A&1023))),d+=9;continue}T+=""}return T})}return s.defaultChars=";/?:@&=+$,#",s.componentChars="",decode_1=s,decode_1}var format,hasRequiredFormat;function requireFormat(){return hasRequiredFormat||(hasRequiredFormat=1,format=function(e){var s="";return s+=e.protocol||"",s+=e.slashes?"//":"",s+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?s+="["+e.hostname+"]":s+=e.hostname||"",s+=e.port?":"+e.port:"",s+=e.pathname||"",s+=e.search||"",s+=e.hash||"",s}),format}var parse$8,hasRequiredParse$3;function requireParse$3(){if(hasRequiredParse$3)return parse$8;hasRequiredParse$3=1;function o(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var e=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["<",">",'"',"`"," ","\r",`
`,"	"],u=["{","}","|","\\","^","`"].concat(l),c=["'"].concat(u),d=["%","/","?",";","#"].concat(c),h=["/","?","#"],p=255,m=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function T(E,v){if(E&&E instanceof o)return E;var _=new o;return _.parse(E,v),_}return o.prototype.parse=function(E,v){var _,w,R,k,I,P=E;if(P=P.trim(),!v&&E.split("#").length===1){var N=a.exec(P);if(N)return this.pathname=N[1],N[2]&&(this.search=N[2]),this}var L=e.exec(P);if(L&&(L=L[0],R=L.toLowerCase(),this.protocol=L,P=P.substr(L.length)),(v||L||P.match(/^\/\/[^@\/]+@[^@\/]+/))&&(I=P.substr(0,2)==="//",I&&!(L&&y[L])&&(P=P.substr(2),this.slashes=!0)),!y[L]&&(I||L&&!A[L])){var Q=-1;for(_=0;_<h.length;_++)k=P.indexOf(h[_]),k!==-1&&(Q===-1||k<Q)&&(Q=k);var j,F;for(Q===-1?F=P.lastIndexOf("@"):F=P.lastIndexOf("@",Q),F!==-1&&(j=P.slice(0,F),P=P.slice(F+1),this.auth=j),Q=-1,_=0;_<d.length;_++)k=P.indexOf(d[_]),k!==-1&&(Q===-1||k<Q)&&(Q=k);Q===-1&&(Q=P.length),P[Q-1]===":"&&Q--;var V=P.slice(0,Q);P=P.slice(Q),this.parseHost(V),this.hostname=this.hostname||"";var J=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!J){var z=this.hostname.split(/\./);for(_=0,w=z.length;_<w;_++){var Y=z[_];if(Y&&!Y.match(m)){for(var fe="",de=0,X=Y.length;de<X;de++)Y.charCodeAt(de)>127?fe+="x":fe+=Y[de];if(!fe.match(m)){var he=z.slice(0,_),ue=z.slice(_+1),G=Y.match(g);G&&(he.push(G[1]),ue.unshift(G[2])),ue.length&&(P=ue.join(".")+P),this.hostname=he.join(".");break}}}}this.hostname.length>p&&(this.hostname=""),J&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var K=P.indexOf("#");K!==-1&&(this.hash=P.substr(K),P=P.slice(0,K));var q=P.indexOf("?");return q!==-1&&(this.search=P.substr(q),P=P.slice(0,q)),P&&(this.pathname=P),A[R]&&this.hostname&&!this.pathname&&(this.pathname=""),this},o.prototype.parseHost=function(E){var v=s.exec(E);v&&(v=v[0],v!==":"&&(this.port=v.substr(1)),E=E.substr(0,E.length-v.length)),E&&(this.hostname=E)},parse$8=T,parse$8}var hasRequiredMdurl;function requireMdurl(){return hasRequiredMdurl||(hasRequiredMdurl=1,mdurl.encode=requireEncode$1(),mdurl.decode=requireDecode$1(),mdurl.format=requireFormat(),mdurl.parse=requireParse$3()),mdurl}var uc_micro={},regex$3,hasRequiredRegex$3;function requireRegex$3(){return hasRequiredRegex$3||(hasRequiredRegex$3=1,regex$3=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),regex$3}var regex$2,hasRequiredRegex$2;function requireRegex$2(){return hasRequiredRegex$2||(hasRequiredRegex$2=1,regex$2=/[\0-\x1F\x7F-\x9F]/),regex$2}var regex$1,hasRequiredRegex$1;function requireRegex$1(){return hasRequiredRegex$1||(hasRequiredRegex$1=1,regex$1=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/),regex$1}var regex,hasRequiredRegex;function requireRegex(){return hasRequiredRegex||(hasRequiredRegex=1,regex=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/),regex}var hasRequiredUc_micro;function requireUc_micro(){return hasRequiredUc_micro||(hasRequiredUc_micro=1,uc_micro.Any=requireRegex$3(),uc_micro.Cc=requireRegex$2(),uc_micro.Cf=requireRegex$1(),uc_micro.P=requireRegex$4(),uc_micro.Z=requireRegex()),uc_micro}var hasRequiredUtils$4;function requireUtils$4(){return hasRequiredUtils$4||(hasRequiredUtils$4=1,(function(o){function e(z){return Object.prototype.toString.call(z)}function s(z){return e(z)==="[object String]"}var a=Object.prototype.hasOwnProperty;function l(z,Y){return a.call(z,Y)}function u(z){var Y=Array.prototype.slice.call(arguments,1);return Y.forEach(function(fe){if(fe){if(typeof fe!="object")throw new TypeError(fe+"must be object");Object.keys(fe).forEach(function(de){z[de]=fe[de]})}}),z}function c(z,Y,fe){return[].concat(z.slice(0,Y),fe,z.slice(Y+1))}function d(z){return!(z>=55296&&z<=57343||z>=64976&&z<=65007||(z&65535)===65535||(z&65535)===65534||z>=0&&z<=8||z===11||z>=14&&z<=31||z>=127&&z<=159||z>1114111)}function h(z){if(z>65535){z-=65536;var Y=55296+(z>>10),fe=56320+(z&1023);return String.fromCharCode(Y,fe)}return String.fromCharCode(z)}var p=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,m=/&([a-z#][a-z0-9]{1,31});/gi,g=new RegExp(p.source+"|"+m.source,"gi"),y=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i,A=requireEntities();function T(z,Y){var fe;return l(A,Y)?A[Y]:Y.charCodeAt(0)===35&&y.test(Y)&&(fe=Y[1].toLowerCase()==="x"?parseInt(Y.slice(2),16):parseInt(Y.slice(1),10),d(fe))?h(fe):z}function E(z){return z.indexOf("\\")<0?z:z.replace(p,"$1")}function v(z){return z.indexOf("\\")<0&&z.indexOf("&")<0?z:z.replace(g,function(Y,fe,de){return fe||T(Y,de)})}var _=/[&<>"]/,w=/[&<>"]/g,R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function k(z){return R[z]}function I(z){return _.test(z)?z.replace(w,k):z}var P=/[.?*+^$[\]\\(){}|-]/g;function N(z){return z.replace(P,"\\$&")}function L(z){switch(z){case 9:case 32:return!0}return!1}function Q(z){if(z>=8192&&z<=8202)return!0;switch(z){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var j=requireRegex$4();function F(z){return j.test(z)}function V(z){switch(z){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function J(z){return z=z.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(z=z.replace(//g,"")),z.toLowerCase().toUpperCase()}o.lib={},o.lib.mdurl=requireMdurl(),o.lib.ucmicro=requireUc_micro(),o.assign=u,o.isString=s,o.has=l,o.unescapeMd=E,o.unescapeAll=v,o.isValidEntityCode=d,o.fromCodePoint=h,o.escapeHtml=I,o.arrayReplaceAt=c,o.isSpace=L,o.isWhiteSpace=Q,o.isMdAsciiPunct=V,o.isPunctChar=F,o.escapeRE=N,o.normalizeReference=J})(utils$4)),utils$4}var helpers$2={},parse_link_label,hasRequiredParse_link_label;function requireParse_link_label(){return hasRequiredParse_link_label||(hasRequiredParse_link_label=1,parse_link_label=function(e,s,a){var l,u,c,d,h=-1,p=e.posMax,m=e.pos;for(e.pos=s+1,l=1;e.pos<p;){if(c=e.src.charCodeAt(e.pos),c===93&&(l--,l===0)){u=!0;break}if(d=e.pos,e.md.inline.skipToken(e),c===91){if(d===e.pos-1)l++;else if(a)return e.pos=m,-1}}return u&&(h=e.pos),e.pos=m,h}),parse_link_label}var parse_link_destination,hasRequiredParse_link_destination;function requireParse_link_destination(){if(hasRequiredParse_link_destination)return parse_link_destination;hasRequiredParse_link_destination=1;var o=requireUtils$4().unescapeAll;return parse_link_destination=function(s,a,l){var u,c,d=a,h={ok:!1,pos:0,lines:0,str:""};if(s.charCodeAt(d)===60){for(d++;d<l;){if(u=s.charCodeAt(d),u===10||u===60)return h;if(u===62)return h.pos=d+1,h.str=o(s.slice(a+1,d)),h.ok=!0,h;if(u===92&&d+1<l){d+=2;continue}d++}return h}for(c=0;d<l&&(u=s.charCodeAt(d),!(u===32||u<32||u===127));){if(u===92&&d+1<l){if(s.charCodeAt(d+1)===32)break;d+=2;continue}if(u===40&&(c++,c>32))return h;if(u===41){if(c===0)break;c--}d++}return a===d||c!==0||(h.str=o(s.slice(a,d)),h.pos=d,h.ok=!0),h},parse_link_destination}var parse_link_title,hasRequiredParse_link_title;function requireParse_link_title(){if(hasRequiredParse_link_title)return parse_link_title;hasRequiredParse_link_title=1;var o=requireUtils$4().unescapeAll;return parse_link_title=function(s,a,l){var u,c,d=0,h=a,p={ok:!1,pos:0,lines:0,str:""};if(h>=l||(c=s.charCodeAt(h),c!==34&&c!==39&&c!==40))return p;for(h++,c===40&&(c=41);h<l;){if(u=s.charCodeAt(h),u===c)return p.pos=h+1,p.lines=d,p.str=o(s.slice(a+1,h)),p.ok=!0,p;if(u===40&&c===41)return p;u===10?d++:u===92&&h+1<l&&(h++,s.charCodeAt(h)===10&&d++),h++}return p},parse_link_title}var hasRequiredHelpers$2;function requireHelpers$2(){return hasRequiredHelpers$2||(hasRequiredHelpers$2=1,helpers$2.parseLinkLabel=requireParse_link_label(),helpers$2.parseLinkDestination=requireParse_link_destination(),helpers$2.parseLinkTitle=requireParse_link_title()),helpers$2}var renderer,hasRequiredRenderer;function requireRenderer(){if(hasRequiredRenderer)return renderer;hasRequiredRenderer=1;var o=requireUtils$4().assign,e=requireUtils$4().unescapeAll,s=requireUtils$4().escapeHtml,a={};a.code_inline=function(u,c,d,h,p){var m=u[c];return"<code"+p.renderAttrs(m)+">"+s(m.content)+"</code>"},a.code_block=function(u,c,d,h,p){var m=u[c];return"<pre"+p.renderAttrs(m)+"><code>"+s(u[c].content)+`</code></pre>
`},a.fence=function(u,c,d,h,p){var m=u[c],g=m.info?e(m.info).trim():"",y="",A="",T,E,v,_,w;return g&&(v=g.split(/(\s+)/g),y=v[0],A=v.slice(2).join("")),d.highlight?T=d.highlight(m.content,y,A)||s(m.content):T=s(m.content),T.indexOf("<pre")===0?T+`
`:g?(E=m.attrIndex("class"),_=m.attrs?m.attrs.slice():[],E<0?_.push(["class",d.langPrefix+y]):(_[E]=_[E].slice(),_[E][1]+=" "+d.langPrefix+y),w={attrs:_},"<pre><code"+p.renderAttrs(w)+">"+T+`</code></pre>
`):"<pre><code"+p.renderAttrs(m)+">"+T+`</code></pre>
`},a.image=function(u,c,d,h,p){var m=u[c];return m.attrs[m.attrIndex("alt")][1]=p.renderInlineAsText(m.children,d,h),p.renderToken(u,c,d)},a.hardbreak=function(u,c,d){return d.xhtmlOut?`<br />
`:`<br>
`},a.softbreak=function(u,c,d){return d.breaks?d.xhtmlOut?`<br />
`:`<br>
`:`
`},a.text=function(u,c){return s(u[c].content)},a.html_block=function(u,c){return u[c].content},a.html_inline=function(u,c){return u[c].content};function l(){this.rules=o({},a)}return l.prototype.renderAttrs=function(c){var d,h,p;if(!c.attrs)return"";for(p="",d=0,h=c.attrs.length;d<h;d++)p+=" "+s(c.attrs[d][0])+'="'+s(c.attrs[d][1])+'"';return p},l.prototype.renderToken=function(c,d,h){var p,m="",g=!1,y=c[d];return y.hidden?"":(y.block&&y.nesting!==-1&&d&&c[d-1].hidden&&(m+=`
`),m+=(y.nesting===-1?"</":"<")+y.tag,m+=this.renderAttrs(y),y.nesting===0&&h.xhtmlOut&&(m+=" /"),y.block&&(g=!0,y.nesting===1&&d+1<c.length&&(p=c[d+1],(p.type==="inline"||p.hidden||p.nesting===-1&&p.tag===y.tag)&&(g=!1))),m+=g?`>
`:">",m)},l.prototype.renderInline=function(u,c,d){for(var h,p="",m=this.rules,g=0,y=u.length;g<y;g++)h=u[g].type,typeof m[h]<"u"?p+=m[h](u,g,c,d,this):p+=this.renderToken(u,g,c);return p},l.prototype.renderInlineAsText=function(u,c,d){for(var h="",p=0,m=u.length;p<m;p++)u[p].type==="text"?h+=u[p].content:u[p].type==="image"?h+=this.renderInlineAsText(u[p].children,c,d):u[p].type==="softbreak"&&(h+=`
`);return h},l.prototype.render=function(u,c,d){var h,p,m,g="",y=this.rules;for(h=0,p=u.length;h<p;h++)m=u[h].type,m==="inline"?g+=this.renderInline(u[h].children,c,d):typeof y[m]<"u"?g+=y[m](u,h,c,d,this):g+=this.renderToken(u,h,c,d);return g},renderer=l,renderer}var ruler,hasRequiredRuler;function requireRuler(){if(hasRequiredRuler)return ruler;hasRequiredRuler=1;function o(){this.__rules__=[],this.__cache__=null}return o.prototype.__find__=function(e){for(var s=0;s<this.__rules__.length;s++)if(this.__rules__[s].name===e)return s;return-1},o.prototype.__compile__=function(){var e=this,s=[""];e.__rules__.forEach(function(a){a.enabled&&a.alt.forEach(function(l){s.indexOf(l)<0&&s.push(l)})}),e.__cache__={},s.forEach(function(a){e.__cache__[a]=[],e.__rules__.forEach(function(l){l.enabled&&(a&&l.alt.indexOf(a)<0||e.__cache__[a].push(l.fn))})})},o.prototype.at=function(e,s,a){var l=this.__find__(e),u=a||{};if(l===-1)throw new Error("Parser rule not found: "+e);this.__rules__[l].fn=s,this.__rules__[l].alt=u.alt||[],this.__cache__=null},o.prototype.before=function(e,s,a,l){var u=this.__find__(e),c=l||{};if(u===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(u,0,{name:s,enabled:!0,fn:a,alt:c.alt||[]}),this.__cache__=null},o.prototype.after=function(e,s,a,l){var u=this.__find__(e),c=l||{};if(u===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(u+1,0,{name:s,enabled:!0,fn:a,alt:c.alt||[]}),this.__cache__=null},o.prototype.push=function(e,s,a){var l=a||{};this.__rules__.push({name:e,enabled:!0,fn:s,alt:l.alt||[]}),this.__cache__=null},o.prototype.enable=function(e,s){Array.isArray(e)||(e=[e]);var a=[];return e.forEach(function(l){var u=this.__find__(l);if(u<0){if(s)return;throw new Error("Rules manager: invalid rule name "+l)}this.__rules__[u].enabled=!0,a.push(l)},this),this.__cache__=null,a},o.prototype.enableOnly=function(e,s){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(a){a.enabled=!1}),this.enable(e,s)},o.prototype.disable=function(e,s){Array.isArray(e)||(e=[e]);var a=[];return e.forEach(function(l){var u=this.__find__(l);if(u<0){if(s)return;throw new Error("Rules manager: invalid rule name "+l)}this.__rules__[u].enabled=!1,a.push(l)},this),this.__cache__=null,a},o.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]},ruler=o,ruler}var normalize$1,hasRequiredNormalize;function requireNormalize(){if(hasRequiredNormalize)return normalize$1;hasRequiredNormalize=1;var o=/\r\n?|\n/g,e=/\0/g;return normalize$1=function(a){var l;l=a.src.replace(o,`
`),l=l.replace(e,""),a.src=l},normalize$1}var block$3,hasRequiredBlock;function requireBlock(){return hasRequiredBlock||(hasRequiredBlock=1,block$3=function(e){var s;e.inlineMode?(s=new e.Token("inline","",0),s.content=e.src,s.map=[0,1],s.children=[],e.tokens.push(s)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}),block$3}var inline,hasRequiredInline;function requireInline(){return hasRequiredInline||(hasRequiredInline=1,inline=function(e){var s=e.tokens,a,l,u;for(l=0,u=s.length;l<u;l++)a=s[l],a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}),inline}var linkify$1,hasRequiredLinkify$1;function requireLinkify$1(){if(hasRequiredLinkify$1)return linkify$1;hasRequiredLinkify$1=1;var o=requireUtils$4().arrayReplaceAt;function e(a){return/^<a[>\s]/i.test(a)}function s(a){return/^<\/a\s*>/i.test(a)}return linkify$1=function(l){var u,c,d,h,p,m,g,y,A,T,E,v,_,w,R,k,I=l.tokens,P;if(l.md.options.linkify){for(c=0,d=I.length;c<d;c++)if(!(I[c].type!=="inline"||!l.md.linkify.pretest(I[c].content)))for(h=I[c].children,_=0,u=h.length-1;u>=0;u--){if(m=h[u],m.type==="link_close"){for(u--;h[u].level!==m.level&&h[u].type!=="link_open";)u--;continue}if(m.type==="html_inline"&&(e(m.content)&&_>0&&_--,s(m.content)&&_++),!(_>0)&&m.type==="text"&&l.md.linkify.test(m.content)){for(A=m.content,P=l.md.linkify.match(A),g=[],v=m.level,E=0,P.length>0&&P[0].index===0&&u>0&&h[u-1].type==="text_special"&&(P=P.slice(1)),y=0;y<P.length;y++)w=P[y].url,R=l.md.normalizeLink(w),l.md.validateLink(R)&&(k=P[y].text,P[y].schema?P[y].schema==="mailto:"&&!/^mailto:/i.test(k)?k=l.md.normalizeLinkText("mailto:"+k).replace(/^mailto:/,""):k=l.md.normalizeLinkText(k):k=l.md.normalizeLinkText("http://"+k).replace(/^http:\/\//,""),T=P[y].index,T>E&&(p=new l.Token("text","",0),p.content=A.slice(E,T),p.level=v,g.push(p)),p=new l.Token("link_open","a",1),p.attrs=[["href",R]],p.level=v++,p.markup="linkify",p.info="auto",g.push(p),p=new l.Token("text","",0),p.content=k,p.level=v,g.push(p),p=new l.Token("link_close","a",-1),p.level=--v,p.markup="linkify",p.info="auto",g.push(p),E=P[y].lastIndex);E<A.length&&(p=new l.Token("text","",0),p.content=A.slice(E),p.level=v,g.push(p)),I[c].children=h=o(h,u,g)}}}},linkify$1}var replacements,hasRequiredReplacements;function requireReplacements(){if(hasRequiredReplacements)return replacements;hasRequiredReplacements=1;var o=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,e=/\((c|tm|r)\)/i,s=/\((c|tm|r)\)/ig,a={c:"",r:"",tm:""};function l(d,h){return a[h.toLowerCase()]}function u(d){var h,p,m=0;for(h=d.length-1;h>=0;h--)p=d[h],p.type==="text"&&!m&&(p.content=p.content.replace(s,l)),p.type==="link_open"&&p.info==="auto"&&m--,p.type==="link_close"&&p.info==="auto"&&m++}function c(d){var h,p,m=0;for(h=d.length-1;h>=0;h--)p=d[h],p.type==="text"&&!m&&o.test(p.content)&&(p.content=p.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),p.type==="link_open"&&p.info==="auto"&&m--,p.type==="link_close"&&p.info==="auto"&&m++}return replacements=function(h){var p;if(h.md.options.typographer)for(p=h.tokens.length-1;p>=0;p--)h.tokens[p].type==="inline"&&(e.test(h.tokens[p].content)&&u(h.tokens[p].children),o.test(h.tokens[p].content)&&c(h.tokens[p].children))},replacements}var smartquotes,hasRequiredSmartquotes;function requireSmartquotes(){if(hasRequiredSmartquotes)return smartquotes;hasRequiredSmartquotes=1;var o=requireUtils$4().isWhiteSpace,e=requireUtils$4().isPunctChar,s=requireUtils$4().isMdAsciiPunct,a=/['"]/,l=/['"]/g,u="";function c(h,p,m){return h.slice(0,p)+m+h.slice(p+1)}function d(h,p){var m,g,y,A,T,E,v,_,w,R,k,I,P,N,L,Q,j,F,V,J,z;for(V=[],m=0;m<h.length;m++){for(g=h[m],v=h[m].level,j=V.length-1;j>=0&&!(V[j].level<=v);j--);if(V.length=j+1,g.type==="text"){y=g.content,T=0,E=y.length;e:for(;T<E&&(l.lastIndex=T,A=l.exec(y),!!A);){if(L=Q=!0,T=A.index+1,F=A[0]==="'",w=32,A.index-1>=0)w=y.charCodeAt(A.index-1);else for(j=m-1;j>=0&&!(h[j].type==="softbreak"||h[j].type==="hardbreak");j--)if(h[j].content){w=h[j].content.charCodeAt(h[j].content.length-1);break}if(R=32,T<E)R=y.charCodeAt(T);else for(j=m+1;j<h.length&&!(h[j].type==="softbreak"||h[j].type==="hardbreak");j++)if(h[j].content){R=h[j].content.charCodeAt(0);break}if(k=s(w)||e(String.fromCharCode(w)),I=s(R)||e(String.fromCharCode(R)),P=o(w),N=o(R),N?L=!1:I&&(P||k||(L=!1)),P?Q=!1:k&&(N||I||(Q=!1)),R===34&&A[0]==='"'&&w>=48&&w<=57&&(Q=L=!1),L&&Q&&(L=k,Q=I),!L&&!Q){F&&(g.content=c(g.content,A.index,u));continue}if(Q){for(j=V.length-1;j>=0&&(_=V[j],!(V[j].level<v));j--)if(_.single===F&&V[j].level===v){_=V[j],F?(J=p.md.options.quotes[2],z=p.md.options.quotes[3]):(J=p.md.options.quotes[0],z=p.md.options.quotes[1]),g.content=c(g.content,A.index,z),h[_.token].content=c(h[_.token].content,_.pos,J),T+=z.length-1,_.token===m&&(T+=J.length-1),y=g.content,E=y.length,V.length=j;continue e}}L?V.push({token:m,pos:A.index,single:F,level:v}):Q&&F&&(g.content=c(g.content,A.index,u))}}}}return smartquotes=function(p){var m;if(p.md.options.typographer)for(m=p.tokens.length-1;m>=0;m--)p.tokens[m].type!=="inline"||!a.test(p.tokens[m].content)||d(p.tokens[m].children,p)},smartquotes}var text_join,hasRequiredText_join;function requireText_join(){return hasRequiredText_join||(hasRequiredText_join=1,text_join=function(e){var s,a,l,u,c,d,h=e.tokens;for(s=0,a=h.length;s<a;s++)if(h[s].type==="inline"){for(l=h[s].children,c=l.length,u=0;u<c;u++)l[u].type==="text_special"&&(l[u].type="text");for(u=d=0;u<c;u++)l[u].type==="text"&&u+1<c&&l[u+1].type==="text"?l[u+1].content=l[u].content+l[u+1].content:(u!==d&&(l[d]=l[u]),d++);u!==d&&(l.length=d)}}),text_join}var token,hasRequiredToken;function requireToken(){if(hasRequiredToken)return token;hasRequiredToken=1;function o(e,s,a){this.type=e,this.tag=s,this.attrs=null,this.map=null,this.nesting=a,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}return o.prototype.attrIndex=function(s){var a,l,u;if(!this.attrs)return-1;for(a=this.attrs,l=0,u=a.length;l<u;l++)if(a[l][0]===s)return l;return-1},o.prototype.attrPush=function(s){this.attrs?this.attrs.push(s):this.attrs=[s]},o.prototype.attrSet=function(s,a){var l=this.attrIndex(s),u=[s,a];l<0?this.attrPush(u):this.attrs[l]=u},o.prototype.attrGet=function(s){var a=this.attrIndex(s),l=null;return a>=0&&(l=this.attrs[a][1]),l},o.prototype.attrJoin=function(s,a){var l=this.attrIndex(s);l<0?this.attrPush([s,a]):this.attrs[l][1]=this.attrs[l][1]+" "+a},token=o,token}var state_core,hasRequiredState_core;function requireState_core(){if(hasRequiredState_core)return state_core;hasRequiredState_core=1;var o=requireToken();function e(s,a,l){this.src=s,this.env=l,this.tokens=[],this.inlineMode=!1,this.md=a}return e.prototype.Token=o,state_core=e,state_core}var parser_core,hasRequiredParser_core;function requireParser_core(){if(hasRequiredParser_core)return parser_core;hasRequiredParser_core=1;var o=requireRuler(),e=[["normalize",requireNormalize()],["block",requireBlock()],["inline",requireInline()],["linkify",requireLinkify$1()],["replacements",requireReplacements()],["smartquotes",requireSmartquotes()],["text_join",requireText_join()]];function s(){this.ruler=new o;for(var a=0;a<e.length;a++)this.ruler.push(e[a][0],e[a][1])}return s.prototype.process=function(a){var l,u,c;for(c=this.ruler.getRules(""),l=0,u=c.length;l<u;l++)c[l](a)},s.prototype.State=requireState_core(),parser_core=s,parser_core}var table$3,hasRequiredTable$1;function requireTable$1(){if(hasRequiredTable$1)return table$3;hasRequiredTable$1=1;var o=requireUtils$4().isSpace;function e(a,l){var u=a.bMarks[l]+a.tShift[l],c=a.eMarks[l];return a.src.slice(u,c)}function s(a){var l=[],u=0,c=a.length,d,h=!1,p=0,m="";for(d=a.charCodeAt(u);u<c;)d===124&&(h?(m+=a.substring(p,u-1),p=u):(l.push(m+a.substring(p,u)),m="",p=u+1)),h=d===92,u++,d=a.charCodeAt(u);return l.push(m+a.substring(p)),l}return table$3=function(l,u,c,d){var h,p,m,g,y,A,T,E,v,_,w,R,k,I,P,N,L,Q;if(u+2>c||(A=u+1,l.sCount[A]<l.blkIndent)||l.sCount[A]-l.blkIndent>=4||(m=l.bMarks[A]+l.tShift[A],m>=l.eMarks[A])||(L=l.src.charCodeAt(m++),L!==124&&L!==45&&L!==58)||m>=l.eMarks[A]||(Q=l.src.charCodeAt(m++),Q!==124&&Q!==45&&Q!==58&&!o(Q))||L===45&&o(Q))return!1;for(;m<l.eMarks[A];){if(h=l.src.charCodeAt(m),h!==124&&h!==45&&h!==58&&!o(h))return!1;m++}for(p=e(l,u+1),T=p.split("|"),_=[],g=0;g<T.length;g++){if(w=T[g].trim(),!w){if(g===0||g===T.length-1)continue;return!1}if(!/^:?-+:?$/.test(w))return!1;w.charCodeAt(w.length-1)===58?_.push(w.charCodeAt(0)===58?"center":"right"):w.charCodeAt(0)===58?_.push("left"):_.push("")}if(p=e(l,u).trim(),p.indexOf("|")===-1||l.sCount[u]-l.blkIndent>=4||(T=s(p),T.length&&T[0]===""&&T.shift(),T.length&&T[T.length-1]===""&&T.pop(),E=T.length,E===0||E!==_.length))return!1;if(d)return!0;for(I=l.parentType,l.parentType="table",N=l.md.block.ruler.getRules("blockquote"),v=l.push("table_open","table",1),v.map=R=[u,0],v=l.push("thead_open","thead",1),v.map=[u,u+1],v=l.push("tr_open","tr",1),v.map=[u,u+1],g=0;g<T.length;g++)v=l.push("th_open","th",1),_[g]&&(v.attrs=[["style","text-align:"+_[g]]]),v=l.push("inline","",0),v.content=T[g].trim(),v.children=[],v=l.push("th_close","th",-1);for(v=l.push("tr_close","tr",-1),v=l.push("thead_close","thead",-1),A=u+2;A<c&&!(l.sCount[A]<l.blkIndent);A++){for(P=!1,g=0,y=N.length;g<y;g++)if(N[g](l,A,c,!0)){P=!0;break}if(P||(p=e(l,A).trim(),!p)||l.sCount[A]-l.blkIndent>=4)break;for(T=s(p),T.length&&T[0]===""&&T.shift(),T.length&&T[T.length-1]===""&&T.pop(),A===u+2&&(v=l.push("tbody_open","tbody",1),v.map=k=[u+2,0]),v=l.push("tr_open","tr",1),v.map=[A,A+1],g=0;g<E;g++)v=l.push("td_open","td",1),_[g]&&(v.attrs=[["style","text-align:"+_[g]]]),v=l.push("inline","",0),v.content=T[g]?T[g].trim():"",v.children=[],v=l.push("td_close","td",-1);v=l.push("tr_close","tr",-1)}return k&&(v=l.push("tbody_close","tbody",-1),k[1]=A),v=l.push("table_close","table",-1),R[1]=A,l.parentType=I,l.line=A,!0},table$3}var code$4,hasRequiredCode;function requireCode(){return hasRequiredCode||(hasRequiredCode=1,code$4=function(e,s,a){var l,u,c;if(e.sCount[s]-e.blkIndent<4)return!1;for(u=l=s+1;l<a;){if(e.isEmpty(l)){l++;continue}if(e.sCount[l]-e.blkIndent>=4){l++,u=l;continue}break}return e.line=u,c=e.push("code_block","code",0),c.content=e.getLines(s,u,4+e.blkIndent,!1)+`
`,c.map=[s,e.line],!0}),code$4}var fence,hasRequiredFence;function requireFence(){return hasRequiredFence||(hasRequiredFence=1,fence=function(e,s,a,l){var u,c,d,h,p,m,g,y=!1,A=e.bMarks[s]+e.tShift[s],T=e.eMarks[s];if(e.sCount[s]-e.blkIndent>=4||A+3>T||(u=e.src.charCodeAt(A),u!==126&&u!==96)||(p=A,A=e.skipChars(A,u),c=A-p,c<3)||(g=e.src.slice(p,A),d=e.src.slice(A,T),u===96&&d.indexOf(String.fromCharCode(u))>=0))return!1;if(l)return!0;for(h=s;h++,!(h>=a||(A=p=e.bMarks[h]+e.tShift[h],T=e.eMarks[h],A<T&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(A)===u&&!(e.sCount[h]-e.blkIndent>=4)&&(A=e.skipChars(A,u),!(A-p<c)&&(A=e.skipSpaces(A),!(A<T)))){y=!0;break}return c=e.sCount[s],e.line=h+(y?1:0),m=e.push("fence","code",0),m.info=d,m.content=e.getLines(s+1,h,c,!0),m.markup=g,m.map=[s,e.line],!0}),fence}var blockquote,hasRequiredBlockquote;function requireBlockquote(){if(hasRequiredBlockquote)return blockquote;hasRequiredBlockquote=1;var o=requireUtils$4().isSpace;return blockquote=function(s,a,l,u){var c,d,h,p,m,g,y,A,T,E,v,_,w,R,k,I,P,N,L,Q,j=s.lineMax,F=s.bMarks[a]+s.tShift[a],V=s.eMarks[a];if(s.sCount[a]-s.blkIndent>=4||s.src.charCodeAt(F)!==62)return!1;if(u)return!0;for(E=[],v=[],R=[],k=[],N=s.md.block.ruler.getRules("blockquote"),w=s.parentType,s.parentType="blockquote",A=a;A<l&&(Q=s.sCount[A]<s.blkIndent,F=s.bMarks[A]+s.tShift[A],V=s.eMarks[A],!(F>=V));A++){if(s.src.charCodeAt(F++)===62&&!Q){for(p=s.sCount[A]+1,s.src.charCodeAt(F)===32?(F++,p++,c=!1,I=!0):s.src.charCodeAt(F)===9?(I=!0,(s.bsCount[A]+p)%4===3?(F++,p++,c=!1):c=!0):I=!1,T=p,E.push(s.bMarks[A]),s.bMarks[A]=F;F<V&&(d=s.src.charCodeAt(F),o(d));){d===9?T+=4-(T+s.bsCount[A]+(c?1:0))%4:T++;F++}g=F>=V,v.push(s.bsCount[A]),s.bsCount[A]=s.sCount[A]+1+(I?1:0),R.push(s.sCount[A]),s.sCount[A]=T-p,k.push(s.tShift[A]),s.tShift[A]=F-s.bMarks[A];continue}if(g)break;for(P=!1,h=0,m=N.length;h<m;h++)if(N[h](s,A,l,!0)){P=!0;break}if(P){s.lineMax=A,s.blkIndent!==0&&(E.push(s.bMarks[A]),v.push(s.bsCount[A]),k.push(s.tShift[A]),R.push(s.sCount[A]),s.sCount[A]-=s.blkIndent);break}E.push(s.bMarks[A]),v.push(s.bsCount[A]),k.push(s.tShift[A]),R.push(s.sCount[A]),s.sCount[A]=-1}for(_=s.blkIndent,s.blkIndent=0,L=s.push("blockquote_open","blockquote",1),L.markup=">",L.map=y=[a,0],s.md.block.tokenize(s,a,A),L=s.push("blockquote_close","blockquote",-1),L.markup=">",s.lineMax=j,s.parentType=w,y[1]=s.line,h=0;h<k.length;h++)s.bMarks[h+a]=E[h],s.tShift[h+a]=k[h],s.sCount[h+a]=R[h],s.bsCount[h+a]=v[h];return s.blkIndent=_,!0},blockquote}var hr,hasRequiredHr;function requireHr(){if(hasRequiredHr)return hr;hasRequiredHr=1;var o=requireUtils$4().isSpace;return hr=function(s,a,l,u){var c,d,h,p,m=s.bMarks[a]+s.tShift[a],g=s.eMarks[a];if(s.sCount[a]-s.blkIndent>=4||(c=s.src.charCodeAt(m++),c!==42&&c!==45&&c!==95))return!1;for(d=1;m<g;){if(h=s.src.charCodeAt(m++),h!==c&&!o(h))return!1;h===c&&d++}return d<3?!1:(u||(s.line=a+1,p=s.push("hr","hr",0),p.map=[a,s.line],p.markup=Array(d+1).join(String.fromCharCode(c))),!0)},hr}var list$2,hasRequiredList$1;function requireList$1(){if(hasRequiredList$1)return list$2;hasRequiredList$1=1;var o=requireUtils$4().isSpace;function e(l,u){var c,d,h,p;return d=l.bMarks[u]+l.tShift[u],h=l.eMarks[u],c=l.src.charCodeAt(d++),c!==42&&c!==45&&c!==43||d<h&&(p=l.src.charCodeAt(d),!o(p))?-1:d}function s(l,u){var c,d=l.bMarks[u]+l.tShift[u],h=d,p=l.eMarks[u];if(h+1>=p||(c=l.src.charCodeAt(h++),c<48||c>57))return-1;for(;;){if(h>=p)return-1;if(c=l.src.charCodeAt(h++),c>=48&&c<=57){if(h-d>=10)return-1;continue}if(c===41||c===46)break;return-1}return h<p&&(c=l.src.charCodeAt(h),!o(c))?-1:h}function a(l,u){var c,d,h=l.level+2;for(c=u+2,d=l.tokens.length-2;c<d;c++)l.tokens[c].level===h&&l.tokens[c].type==="paragraph_open"&&(l.tokens[c+2].hidden=!0,l.tokens[c].hidden=!0,c+=2)}return list$2=function(u,c,d,h){var p,m,g,y,A,T,E,v,_,w,R,k,I,P,N,L,Q,j,F,V,J,z,Y,fe,de,X,he,ue=c,G=!1,K=!0;if(u.sCount[ue]-u.blkIndent>=4||u.listIndent>=0&&u.sCount[ue]-u.listIndent>=4&&u.sCount[ue]<u.blkIndent)return!1;if(h&&u.parentType==="paragraph"&&u.sCount[ue]>=u.blkIndent&&(G=!0),(z=s(u,ue))>=0){if(E=!0,fe=u.bMarks[ue]+u.tShift[ue],I=Number(u.src.slice(fe,z-1)),G&&I!==1)return!1}else if((z=e(u,ue))>=0)E=!1;else return!1;if(G&&u.skipSpaces(z)>=u.eMarks[ue])return!1;if(h)return!0;for(k=u.src.charCodeAt(z-1),R=u.tokens.length,E?(he=u.push("ordered_list_open","ol",1),I!==1&&(he.attrs=[["start",I]])):he=u.push("bullet_list_open","ul",1),he.map=w=[ue,0],he.markup=String.fromCharCode(k),Y=!1,X=u.md.block.ruler.getRules("list"),Q=u.parentType,u.parentType="list";ue<d;){for(J=z,P=u.eMarks[ue],T=N=u.sCount[ue]+z-(u.bMarks[ue]+u.tShift[ue]);J<P;){if(p=u.src.charCodeAt(J),p===9)N+=4-(N+u.bsCount[ue])%4;else if(p===32)N++;else break;J++}if(m=J,m>=P?A=1:A=N-T,A>4&&(A=1),y=T+A,he=u.push("list_item_open","li",1),he.markup=String.fromCharCode(k),he.map=v=[ue,0],E&&(he.info=u.src.slice(fe,z-1)),V=u.tight,F=u.tShift[ue],j=u.sCount[ue],L=u.listIndent,u.listIndent=u.blkIndent,u.blkIndent=y,u.tight=!0,u.tShift[ue]=m-u.bMarks[ue],u.sCount[ue]=N,m>=P&&u.isEmpty(ue+1)?u.line=Math.min(u.line+2,d):u.md.block.tokenize(u,ue,d,!0),(!u.tight||Y)&&(K=!1),Y=u.line-ue>1&&u.isEmpty(u.line-1),u.blkIndent=u.listIndent,u.listIndent=L,u.tShift[ue]=F,u.sCount[ue]=j,u.tight=V,he=u.push("list_item_close","li",-1),he.markup=String.fromCharCode(k),ue=u.line,v[1]=ue,ue>=d||u.sCount[ue]<u.blkIndent||u.sCount[ue]-u.blkIndent>=4)break;for(de=!1,g=0,_=X.length;g<_;g++)if(X[g](u,ue,d,!0)){de=!0;break}if(de)break;if(E){if(z=s(u,ue),z<0)break;fe=u.bMarks[ue]+u.tShift[ue]}else if(z=e(u,ue),z<0)break;if(k!==u.src.charCodeAt(z-1))break}return E?he=u.push("ordered_list_close","ol",-1):he=u.push("bullet_list_close","ul",-1),he.markup=String.fromCharCode(k),w[1]=ue,u.line=ue,u.parentType=Q,K&&a(u,R),!0},list$2}var reference,hasRequiredReference;function requireReference(){if(hasRequiredReference)return reference;hasRequiredReference=1;var o=requireUtils$4().normalizeReference,e=requireUtils$4().isSpace;return reference=function(a,l,u,c){var d,h,p,m,g,y,A,T,E,v,_,w,R,k,I,P,N=0,L=a.bMarks[l]+a.tShift[l],Q=a.eMarks[l],j=l+1;if(a.sCount[l]-a.blkIndent>=4||a.src.charCodeAt(L)!==91)return!1;for(;++L<Q;)if(a.src.charCodeAt(L)===93&&a.src.charCodeAt(L-1)!==92){if(L+1===Q||a.src.charCodeAt(L+1)!==58)return!1;break}for(m=a.lineMax,I=a.md.block.ruler.getRules("reference"),v=a.parentType,a.parentType="reference";j<m&&!a.isEmpty(j);j++)if(!(a.sCount[j]-a.blkIndent>3)&&!(a.sCount[j]<0)){for(k=!1,y=0,A=I.length;y<A;y++)if(I[y](a,j,m,!0)){k=!0;break}if(k)break}for(R=a.getLines(l,j,a.blkIndent,!1).trim(),Q=R.length,L=1;L<Q;L++){if(d=R.charCodeAt(L),d===91)return!1;if(d===93){E=L;break}else d===10?N++:d===92&&(L++,L<Q&&R.charCodeAt(L)===10&&N++)}if(E<0||R.charCodeAt(E+1)!==58)return!1;for(L=E+2;L<Q;L++)if(d=R.charCodeAt(L),d===10)N++;else if(!e(d))break;if(_=a.md.helpers.parseLinkDestination(R,L,Q),!_.ok||(g=a.md.normalizeLink(_.str),!a.md.validateLink(g)))return!1;for(L=_.pos,N+=_.lines,h=L,p=N,w=L;L<Q;L++)if(d=R.charCodeAt(L),d===10)N++;else if(!e(d))break;for(_=a.md.helpers.parseLinkTitle(R,L,Q),L<Q&&w!==L&&_.ok?(P=_.str,L=_.pos,N+=_.lines):(P="",L=h,N=p);L<Q&&(d=R.charCodeAt(L),!!e(d));)L++;if(L<Q&&R.charCodeAt(L)!==10&&P)for(P="",L=h,N=p;L<Q&&(d=R.charCodeAt(L),!!e(d));)L++;return L<Q&&R.charCodeAt(L)!==10||(T=o(R.slice(1,E)),!T)?!1:(c||(typeof a.env.references>"u"&&(a.env.references={}),typeof a.env.references[T]>"u"&&(a.env.references[T]={title:P,href:g}),a.parentType=v,a.line=l+N+1),!0)},reference}var html_blocks,hasRequiredHtml_blocks;function requireHtml_blocks(){return hasRequiredHtml_blocks||(hasRequiredHtml_blocks=1,html_blocks=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]),html_blocks}var html_re={},hasRequiredHtml_re;function requireHtml_re(){if(hasRequiredHtml_re)return html_re;hasRequiredHtml_re=1;var o="[a-zA-Z_:][a-zA-Z0-9:._-]*",e="[^\"'=<>`\\x00-\\x20]+",s="'[^']*'",a='"[^"]*"',l="(?:"+e+"|"+s+"|"+a+")",u="(?:\\s+"+o+"(?:\\s*=\\s*"+l+")?)",c="<[A-Za-z][A-Za-z0-9\\-]*"+u+"*\\s*\\/?>",d="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",h="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",p="<[?][\\s\\S]*?[?]>",m="<![A-Z]+\\s+[^>]*>",g="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",y=new RegExp("^(?:"+c+"|"+d+"|"+h+"|"+p+"|"+m+"|"+g+")"),A=new RegExp("^(?:"+c+"|"+d+")");return html_re.HTML_TAG_RE=y,html_re.HTML_OPEN_CLOSE_TAG_RE=A,html_re}var html_block,hasRequiredHtml_block;function requireHtml_block(){if(hasRequiredHtml_block)return html_block;hasRequiredHtml_block=1;var o=requireHtml_blocks(),e=requireHtml_re().HTML_OPEN_CLOSE_TAG_RE,s=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+o.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(e.source+"\\s*$"),/^$/,!1]];return html_block=function(l,u,c,d){var h,p,m,g,y=l.bMarks[u]+l.tShift[u],A=l.eMarks[u];if(l.sCount[u]-l.blkIndent>=4||!l.md.options.html||l.src.charCodeAt(y)!==60)return!1;for(g=l.src.slice(y,A),h=0;h<s.length&&!s[h][0].test(g);h++);if(h===s.length)return!1;if(d)return s[h][2];if(p=u+1,!s[h][1].test(g)){for(;p<c&&!(l.sCount[p]<l.blkIndent);p++)if(y=l.bMarks[p]+l.tShift[p],A=l.eMarks[p],g=l.src.slice(y,A),s[h][1].test(g)){g.length!==0&&p++;break}}return l.line=p,m=l.push("html_block","",0),m.map=[u,p],m.content=l.getLines(u,p,l.blkIndent,!0),!0},html_block}var heading$7,hasRequiredHeading;function requireHeading(){if(hasRequiredHeading)return heading$7;hasRequiredHeading=1;var o=requireUtils$4().isSpace;return heading$7=function(s,a,l,u){var c,d,h,p,m=s.bMarks[a]+s.tShift[a],g=s.eMarks[a];if(s.sCount[a]-s.blkIndent>=4||(c=s.src.charCodeAt(m),c!==35||m>=g))return!1;for(d=1,c=s.src.charCodeAt(++m);c===35&&m<g&&d<=6;)d++,c=s.src.charCodeAt(++m);return d>6||m<g&&!o(c)?!1:(u||(g=s.skipSpacesBack(g,m),h=s.skipCharsBack(g,35,m),h>m&&o(s.src.charCodeAt(h-1))&&(g=h),s.line=a+1,p=s.push("heading_open","h"+String(d),1),p.markup="########".slice(0,d),p.map=[a,s.line],p=s.push("inline","",0),p.content=s.src.slice(m,g).trim(),p.map=[a,s.line],p.children=[],p=s.push("heading_close","h"+String(d),-1),p.markup="########".slice(0,d)),!0)},heading$7}var lheading,hasRequiredLheading;function requireLheading(){return hasRequiredLheading||(hasRequiredLheading=1,lheading=function(e,s,a){var l,u,c,d,h,p,m,g,y,A=s+1,T,E=e.md.block.ruler.getRules("paragraph");if(e.sCount[s]-e.blkIndent>=4)return!1;for(T=e.parentType,e.parentType="paragraph";A<a&&!e.isEmpty(A);A++)if(!(e.sCount[A]-e.blkIndent>3)){if(e.sCount[A]>=e.blkIndent&&(p=e.bMarks[A]+e.tShift[A],m=e.eMarks[A],p<m&&(y=e.src.charCodeAt(p),(y===45||y===61)&&(p=e.skipChars(p,y),p=e.skipSpaces(p),p>=m)))){g=y===61?1:2;break}if(!(e.sCount[A]<0)){for(u=!1,c=0,d=E.length;c<d;c++)if(E[c](e,A,a,!0)){u=!0;break}if(u)break}}return g?(l=e.getLines(s,A,e.blkIndent,!1).trim(),e.line=A+1,h=e.push("heading_open","h"+String(g),1),h.markup=String.fromCharCode(y),h.map=[s,e.line],h=e.push("inline","",0),h.content=l,h.map=[s,e.line-1],h.children=[],h=e.push("heading_close","h"+String(g),-1),h.markup=String.fromCharCode(y),e.parentType=T,!0):!1}),lheading}var paragraph,hasRequiredParagraph;function requireParagraph(){return hasRequiredParagraph||(hasRequiredParagraph=1,paragraph=function(e,s,a){var l,u,c,d,h,p,m=s+1,g=e.md.block.ruler.getRules("paragraph");for(p=e.parentType,e.parentType="paragraph";m<a&&!e.isEmpty(m);m++)if(!(e.sCount[m]-e.blkIndent>3)&&!(e.sCount[m]<0)){for(u=!1,c=0,d=g.length;c<d;c++)if(g[c](e,m,a,!0)){u=!0;break}if(u)break}return l=e.getLines(s,m,e.blkIndent,!1).trim(),e.line=m,h=e.push("paragraph_open","p",1),h.map=[s,e.line],h=e.push("inline","",0),h.content=l,h.map=[s,e.line],h.children=[],h=e.push("paragraph_close","p",-1),e.parentType=p,!0}),paragraph}var state_block,hasRequiredState_block;function requireState_block(){if(hasRequiredState_block)return state_block;hasRequiredState_block=1;var o=requireToken(),e=requireUtils$4().isSpace;function s(a,l,u,c){var d,h,p,m,g,y,A,T;for(this.src=a,this.md=l,this.env=u,this.tokens=c,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",h=this.src,T=!1,p=m=y=A=0,g=h.length;m<g;m++){if(d=h.charCodeAt(m),!T)if(e(d)){y++,d===9?A+=4-A%4:A++;continue}else T=!0;(d===10||m===g-1)&&(d!==10&&m++,this.bMarks.push(p),this.eMarks.push(m),this.tShift.push(y),this.sCount.push(A),this.bsCount.push(0),T=!1,y=0,A=0,p=m+1)}this.bMarks.push(h.length),this.eMarks.push(h.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}return s.prototype.push=function(a,l,u){var c=new o(a,l,u);return c.block=!0,u<0&&this.level--,c.level=this.level,u>0&&this.level++,this.tokens.push(c),c},s.prototype.isEmpty=function(l){return this.bMarks[l]+this.tShift[l]>=this.eMarks[l]},s.prototype.skipEmptyLines=function(l){for(var u=this.lineMax;l<u&&!(this.bMarks[l]+this.tShift[l]<this.eMarks[l]);l++);return l},s.prototype.skipSpaces=function(l){for(var u,c=this.src.length;l<c&&(u=this.src.charCodeAt(l),!!e(u));l++);return l},s.prototype.skipSpacesBack=function(l,u){if(l<=u)return l;for(;l>u;)if(!e(this.src.charCodeAt(--l)))return l+1;return l},s.prototype.skipChars=function(l,u){for(var c=this.src.length;l<c&&this.src.charCodeAt(l)===u;l++);return l},s.prototype.skipCharsBack=function(l,u,c){if(l<=c)return l;for(;l>c;)if(u!==this.src.charCodeAt(--l))return l+1;return l},s.prototype.getLines=function(l,u,c,d){var h,p,m,g,y,A,T,E=l;if(l>=u)return"";for(A=new Array(u-l),h=0;E<u;E++,h++){for(p=0,T=g=this.bMarks[E],E+1<u||d?y=this.eMarks[E]+1:y=this.eMarks[E];g<y&&p<c;){if(m=this.src.charCodeAt(g),e(m))m===9?p+=4-(p+this.bsCount[E])%4:p++;else if(g-T<this.tShift[E])p++;else break;g++}p>c?A[h]=new Array(p-c+1).join(" ")+this.src.slice(g,y):A[h]=this.src.slice(g,y)}return A.join("")},s.prototype.Token=o,state_block=s,state_block}var parser_block,hasRequiredParser_block;function requireParser_block(){if(hasRequiredParser_block)return parser_block;hasRequiredParser_block=1;var o=requireRuler(),e=[["table",requireTable$1(),["paragraph","reference"]],["code",requireCode()],["fence",requireFence(),["paragraph","reference","blockquote","list"]],["blockquote",requireBlockquote(),["paragraph","reference","blockquote","list"]],["hr",requireHr(),["paragraph","reference","blockquote","list"]],["list",requireList$1(),["paragraph","reference","blockquote"]],["reference",requireReference()],["html_block",requireHtml_block(),["paragraph","reference","blockquote"]],["heading",requireHeading(),["paragraph","reference","blockquote"]],["lheading",requireLheading()],["paragraph",requireParagraph()]];function s(){this.ruler=new o;for(var a=0;a<e.length;a++)this.ruler.push(e[a][0],e[a][1],{alt:(e[a][2]||[]).slice()})}return s.prototype.tokenize=function(a,l,u){for(var c,d,h,p=this.ruler.getRules(""),m=p.length,g=l,y=!1,A=a.md.options.maxNesting;g<u&&(a.line=g=a.skipEmptyLines(g),!(g>=u||a.sCount[g]<a.blkIndent));){if(a.level>=A){a.line=u;break}for(h=a.line,d=0;d<m;d++)if(c=p[d](a,g,u,!1),c){if(h>=a.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");a.tight=!y,a.isEmpty(a.line-1)&&(y=!0),g=a.line,g<u&&a.isEmpty(g)&&(y=!0,g++,a.line=g)}},s.prototype.parse=function(a,l,u,c){var d;a&&(d=new this.State(a,l,u,c),this.tokenize(d,d.line,d.lineMax))},s.prototype.State=requireState_block(),parser_block=s,parser_block}var text$6,hasRequiredText;function requireText(){if(hasRequiredText)return text$6;hasRequiredText=1;function o(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}return text$6=function(s,a){for(var l=s.pos;l<s.posMax&&!o(s.src.charCodeAt(l));)l++;return l===s.pos?!1:(a||(s.pending+=s.src.slice(s.pos,l)),s.pos=l,!0)},text$6}var linkify,hasRequiredLinkify;function requireLinkify(){if(hasRequiredLinkify)return linkify;hasRequiredLinkify=1;var o=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;return linkify=function(s,a){var l,u,c,d,h,p,m,g;return!s.md.options.linkify||s.linkLevel>0||(l=s.pos,u=s.posMax,l+3>u)||s.src.charCodeAt(l)!==58||s.src.charCodeAt(l+1)!==47||s.src.charCodeAt(l+2)!==47||(c=s.pending.match(o),!c)||(d=c[1],h=s.md.linkify.matchAtStart(s.src.slice(l-d.length)),!h)||(p=h.url,p.length<=d.length)||(p=p.replace(/\*+$/,""),m=s.md.normalizeLink(p),!s.md.validateLink(m))?!1:(a||(s.pending=s.pending.slice(0,-d.length),g=s.push("link_open","a",1),g.attrs=[["href",m]],g.markup="linkify",g.info="auto",g=s.push("text","",0),g.content=s.md.normalizeLinkText(p),g=s.push("link_close","a",-1),g.markup="linkify",g.info="auto"),s.pos+=p.length-d.length,!0)},linkify}var newline$2,hasRequiredNewline;function requireNewline(){if(hasRequiredNewline)return newline$2;hasRequiredNewline=1;var o=requireUtils$4().isSpace;return newline$2=function(s,a){var l,u,c,d=s.pos;if(s.src.charCodeAt(d)!==10)return!1;if(l=s.pending.length-1,u=s.posMax,!a)if(l>=0&&s.pending.charCodeAt(l)===32)if(l>=1&&s.pending.charCodeAt(l-1)===32){for(c=l-1;c>=1&&s.pending.charCodeAt(c-1)===32;)c--;s.pending=s.pending.slice(0,c),s.push("hardbreak","br",0)}else s.pending=s.pending.slice(0,-1),s.push("softbreak","br",0);else s.push("softbreak","br",0);for(d++;d<u&&o(s.src.charCodeAt(d));)d++;return s.pos=d,!0},newline$2}var _escape$1,hasRequired_escape$1;function require_escape$1(){if(hasRequired_escape$1)return _escape$1;hasRequired_escape$1=1;for(var o=requireUtils$4().isSpace,e=[],s=0;s<256;s++)e.push(0);return"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(a){e[a.charCodeAt(0)]=1}),_escape$1=function(l,u){var c,d,h,p,m,g=l.pos,y=l.posMax;if(l.src.charCodeAt(g)!==92||(g++,g>=y))return!1;if(c=l.src.charCodeAt(g),c===10){for(u||l.push("hardbreak","br",0),g++;g<y&&(c=l.src.charCodeAt(g),!!o(c));)g++;return l.pos=g,!0}return p=l.src[g],c>=55296&&c<=56319&&g+1<y&&(d=l.src.charCodeAt(g+1),d>=56320&&d<=57343&&(p+=l.src[g+1],g++)),h="\\"+p,u||(m=l.push("text_special","",0),c<256&&e[c]!==0?m.content=p:m.content=h,m.markup=h,m.info="escape"),l.pos=g+1,!0},_escape$1}var backticks,hasRequiredBackticks;function requireBackticks(){return hasRequiredBackticks||(hasRequiredBackticks=1,backticks=function(e,s){var a,l,u,c,d,h,p,m,g=e.pos,y=e.src.charCodeAt(g);if(y!==96)return!1;for(a=g,g++,l=e.posMax;g<l&&e.src.charCodeAt(g)===96;)g++;if(u=e.src.slice(a,g),p=u.length,e.backticksScanned&&(e.backticks[p]||0)<=a)return s||(e.pending+=u),e.pos+=p,!0;for(h=g;(d=e.src.indexOf("`",h))!==-1;){for(h=d+1;h<l&&e.src.charCodeAt(h)===96;)h++;if(m=h-d,m===p)return s||(c=e.push("code_inline","code",0),c.markup=u,c.content=e.src.slice(g,d).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=h,!0;e.backticks[m]=d}return e.backticksScanned=!0,s||(e.pending+=u),e.pos+=p,!0}),backticks}var strikethrough={},hasRequiredStrikethrough;function requireStrikethrough(){if(hasRequiredStrikethrough)return strikethrough;hasRequiredStrikethrough=1,strikethrough.tokenize=function(s,a){var l,u,c,d,h,p=s.pos,m=s.src.charCodeAt(p);if(a||m!==126||(u=s.scanDelims(s.pos,!0),d=u.length,h=String.fromCharCode(m),d<2))return!1;for(d%2&&(c=s.push("text","",0),c.content=h,d--),l=0;l<d;l+=2)c=s.push("text","",0),c.content=h+h,s.delimiters.push({marker:m,length:0,token:s.tokens.length-1,end:-1,open:u.can_open,close:u.can_close});return s.pos+=u.length,!0};function o(e,s){var a,l,u,c,d,h=[],p=s.length;for(a=0;a<p;a++)u=s[a],u.marker===126&&u.end!==-1&&(c=s[u.end],d=e.tokens[u.token],d.type="s_open",d.tag="s",d.nesting=1,d.markup="~~",d.content="",d=e.tokens[c.token],d.type="s_close",d.tag="s",d.nesting=-1,d.markup="~~",d.content="",e.tokens[c.token-1].type==="text"&&e.tokens[c.token-1].content==="~"&&h.push(c.token-1));for(;h.length;){for(a=h.pop(),l=a+1;l<e.tokens.length&&e.tokens[l].type==="s_close";)l++;l--,a!==l&&(d=e.tokens[l],e.tokens[l]=e.tokens[a],e.tokens[a]=d)}}return strikethrough.postProcess=function(s){var a,l=s.tokens_meta,u=s.tokens_meta.length;for(o(s,s.delimiters),a=0;a<u;a++)l[a]&&l[a].delimiters&&o(s,l[a].delimiters)},strikethrough}var emphasis={},hasRequiredEmphasis;function requireEmphasis(){if(hasRequiredEmphasis)return emphasis;hasRequiredEmphasis=1,emphasis.tokenize=function(s,a){var l,u,c,d=s.pos,h=s.src.charCodeAt(d);if(a||h!==95&&h!==42)return!1;for(u=s.scanDelims(s.pos,h===42),l=0;l<u.length;l++)c=s.push("text","",0),c.content=String.fromCharCode(h),s.delimiters.push({marker:h,length:u.length,token:s.tokens.length-1,end:-1,open:u.can_open,close:u.can_close});return s.pos+=u.length,!0};function o(e,s){var a,l,u,c,d,h,p=s.length;for(a=p-1;a>=0;a--)l=s[a],!(l.marker!==95&&l.marker!==42)&&l.end!==-1&&(u=s[l.end],h=a>0&&s[a-1].end===l.end+1&&s[a-1].marker===l.marker&&s[a-1].token===l.token-1&&s[l.end+1].token===u.token+1,d=String.fromCharCode(l.marker),c=e.tokens[l.token],c.type=h?"strong_open":"em_open",c.tag=h?"strong":"em",c.nesting=1,c.markup=h?d+d:d,c.content="",c=e.tokens[u.token],c.type=h?"strong_close":"em_close",c.tag=h?"strong":"em",c.nesting=-1,c.markup=h?d+d:d,c.content="",h&&(e.tokens[s[a-1].token].content="",e.tokens[s[l.end+1].token].content="",a--))}return emphasis.postProcess=function(s){var a,l=s.tokens_meta,u=s.tokens_meta.length;for(o(s,s.delimiters),a=0;a<u;a++)l[a]&&l[a].delimiters&&o(s,l[a].delimiters)},emphasis}var link$4,hasRequiredLink;function requireLink(){if(hasRequiredLink)return link$4;hasRequiredLink=1;var o=requireUtils$4().normalizeReference,e=requireUtils$4().isSpace;return link$4=function(a,l){var u,c,d,h,p,m,g,y,A,T="",E="",v=a.pos,_=a.posMax,w=a.pos,R=!0;if(a.src.charCodeAt(a.pos)!==91||(p=a.pos+1,h=a.md.helpers.parseLinkLabel(a,a.pos,!0),h<0))return!1;if(m=h+1,m<_&&a.src.charCodeAt(m)===40){for(R=!1,m++;m<_&&(c=a.src.charCodeAt(m),!(!e(c)&&c!==10));m++);if(m>=_)return!1;if(w=m,g=a.md.helpers.parseLinkDestination(a.src,m,a.posMax),g.ok){for(T=a.md.normalizeLink(g.str),a.md.validateLink(T)?m=g.pos:T="",w=m;m<_&&(c=a.src.charCodeAt(m),!(!e(c)&&c!==10));m++);if(g=a.md.helpers.parseLinkTitle(a.src,m,a.posMax),m<_&&w!==m&&g.ok)for(E=g.str,m=g.pos;m<_&&(c=a.src.charCodeAt(m),!(!e(c)&&c!==10));m++);}(m>=_||a.src.charCodeAt(m)!==41)&&(R=!0),m++}if(R){if(typeof a.env.references>"u")return!1;if(m<_&&a.src.charCodeAt(m)===91?(w=m+1,m=a.md.helpers.parseLinkLabel(a,m),m>=0?d=a.src.slice(w,m++):m=h+1):m=h+1,d||(d=a.src.slice(p,h)),y=a.env.references[o(d)],!y)return a.pos=v,!1;T=y.href,E=y.title}return l||(a.pos=p,a.posMax=h,A=a.push("link_open","a",1),A.attrs=u=[["href",T]],E&&u.push(["title",E]),a.linkLevel++,a.md.inline.tokenize(a),a.linkLevel--,A=a.push("link_close","a",-1)),a.pos=m,a.posMax=_,!0},link$4}var image$4,hasRequiredImage;function requireImage(){if(hasRequiredImage)return image$4;hasRequiredImage=1;var o=requireUtils$4().normalizeReference,e=requireUtils$4().isSpace;return image$4=function(a,l){var u,c,d,h,p,m,g,y,A,T,E,v,_,w="",R=a.pos,k=a.posMax;if(a.src.charCodeAt(a.pos)!==33||a.src.charCodeAt(a.pos+1)!==91||(m=a.pos+2,p=a.md.helpers.parseLinkLabel(a,a.pos+1,!1),p<0))return!1;if(g=p+1,g<k&&a.src.charCodeAt(g)===40){for(g++;g<k&&(c=a.src.charCodeAt(g),!(!e(c)&&c!==10));g++);if(g>=k)return!1;for(_=g,A=a.md.helpers.parseLinkDestination(a.src,g,a.posMax),A.ok&&(w=a.md.normalizeLink(A.str),a.md.validateLink(w)?g=A.pos:w=""),_=g;g<k&&(c=a.src.charCodeAt(g),!(!e(c)&&c!==10));g++);if(A=a.md.helpers.parseLinkTitle(a.src,g,a.posMax),g<k&&_!==g&&A.ok)for(T=A.str,g=A.pos;g<k&&(c=a.src.charCodeAt(g),!(!e(c)&&c!==10));g++);else T="";if(g>=k||a.src.charCodeAt(g)!==41)return a.pos=R,!1;g++}else{if(typeof a.env.references>"u")return!1;if(g<k&&a.src.charCodeAt(g)===91?(_=g+1,g=a.md.helpers.parseLinkLabel(a,g),g>=0?h=a.src.slice(_,g++):g=p+1):g=p+1,h||(h=a.src.slice(m,p)),y=a.env.references[o(h)],!y)return a.pos=R,!1;w=y.href,T=y.title}return l||(d=a.src.slice(m,p),a.md.inline.parse(d,a.md,a.env,v=[]),E=a.push("image","img",0),E.attrs=u=[["src",w],["alt",""]],E.children=v,E.content=d,T&&u.push(["title",T])),a.pos=g,a.posMax=k,!0},image$4}var autolink,hasRequiredAutolink;function requireAutolink(){if(hasRequiredAutolink)return autolink;hasRequiredAutolink=1;var o=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,e=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;return autolink=function(a,l){var u,c,d,h,p,m,g=a.pos;if(a.src.charCodeAt(g)!==60)return!1;for(p=a.pos,m=a.posMax;;){if(++g>=m||(h=a.src.charCodeAt(g),h===60))return!1;if(h===62)break}return u=a.src.slice(p+1,g),e.test(u)?(c=a.md.normalizeLink(u),a.md.validateLink(c)?(l||(d=a.push("link_open","a",1),d.attrs=[["href",c]],d.markup="autolink",d.info="auto",d=a.push("text","",0),d.content=a.md.normalizeLinkText(u),d=a.push("link_close","a",-1),d.markup="autolink",d.info="auto"),a.pos+=u.length+2,!0):!1):o.test(u)?(c=a.md.normalizeLink("mailto:"+u),a.md.validateLink(c)?(l||(d=a.push("link_open","a",1),d.attrs=[["href",c]],d.markup="autolink",d.info="auto",d=a.push("text","",0),d.content=a.md.normalizeLinkText(u),d=a.push("link_close","a",-1),d.markup="autolink",d.info="auto"),a.pos+=u.length+2,!0):!1):!1},autolink}var html_inline,hasRequiredHtml_inline;function requireHtml_inline(){if(hasRequiredHtml_inline)return html_inline;hasRequiredHtml_inline=1;var o=requireHtml_re().HTML_TAG_RE;function e(l){return/^<a[>\s]/i.test(l)}function s(l){return/^<\/a\s*>/i.test(l)}function a(l){var u=l|32;return u>=97&&u<=122}return html_inline=function(u,c){var d,h,p,m,g=u.pos;return!u.md.options.html||(p=u.posMax,u.src.charCodeAt(g)!==60||g+2>=p)||(d=u.src.charCodeAt(g+1),d!==33&&d!==63&&d!==47&&!a(d))||(h=u.src.slice(g).match(o),!h)?!1:(c||(m=u.push("html_inline","",0),m.content=h[0],e(m.content)&&u.linkLevel++,s(m.content)&&u.linkLevel--),u.pos+=h[0].length,!0)},html_inline}var entity,hasRequiredEntity;function requireEntity(){if(hasRequiredEntity)return entity;hasRequiredEntity=1;var o=requireEntities(),e=requireUtils$4().has,s=requireUtils$4().isValidEntityCode,a=requireUtils$4().fromCodePoint,l=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,u=/^&([a-z][a-z0-9]{1,31});/i;return entity=function(d,h){var p,m,g,y,A=d.pos,T=d.posMax;if(d.src.charCodeAt(A)!==38||A+1>=T)return!1;if(p=d.src.charCodeAt(A+1),p===35){if(g=d.src.slice(A).match(l),g)return h||(m=g[1][0].toLowerCase()==="x"?parseInt(g[1].slice(1),16):parseInt(g[1],10),y=d.push("text_special","",0),y.content=s(m)?a(m):a(65533),y.markup=g[0],y.info="entity"),d.pos+=g[0].length,!0}else if(g=d.src.slice(A).match(u),g&&e(o,g[1]))return h||(y=d.push("text_special","",0),y.content=o[g[1]],y.markup=g[0],y.info="entity"),d.pos+=g[0].length,!0;return!1},entity}var balance_pairs,hasRequiredBalance_pairs;function requireBalance_pairs(){if(hasRequiredBalance_pairs)return balance_pairs;hasRequiredBalance_pairs=1;function o(e){var s,a,l,u,c,d,h,p,m={},g=e.length;if(g){var y=0,A=-2,T=[];for(s=0;s<g;s++)if(l=e[s],T.push(0),(e[y].marker!==l.marker||A!==l.token-1)&&(y=s),A=l.token,l.length=l.length||0,!!l.close){for(m.hasOwnProperty(l.marker)||(m[l.marker]=[-1,-1,-1,-1,-1,-1]),c=m[l.marker][(l.open?3:0)+l.length%3],a=y-T[y]-1,d=a;a>c;a-=T[a]+1)if(u=e[a],u.marker===l.marker&&u.open&&u.end<0&&(h=!1,(u.close||l.open)&&(u.length+l.length)%3===0&&(u.length%3!==0||l.length%3!==0)&&(h=!0),!h)){p=a>0&&!e[a-1].open?T[a-1]+1:0,T[s]=s-a+p,T[a]=p,l.open=!1,u.end=s,u.close=!1,d=-1,A=-2;break}d!==-1&&(m[l.marker][(l.open?3:0)+(l.length||0)%3]=d)}}}return balance_pairs=function(s){var a,l=s.tokens_meta,u=s.tokens_meta.length;for(o(s.delimiters),a=0;a<u;a++)l[a]&&l[a].delimiters&&o(l[a].delimiters)},balance_pairs}var fragments_join,hasRequiredFragments_join;function requireFragments_join(){return hasRequiredFragments_join||(hasRequiredFragments_join=1,fragments_join=function(e){var s,a,l=0,u=e.tokens,c=e.tokens.length;for(s=a=0;s<c;s++)u[s].nesting<0&&l--,u[s].level=l,u[s].nesting>0&&l++,u[s].type==="text"&&s+1<c&&u[s+1].type==="text"?u[s+1].content=u[s].content+u[s+1].content:(s!==a&&(u[a]=u[s]),a++);s!==a&&(u.length=a)}),fragments_join}var state_inline,hasRequiredState_inline;function requireState_inline(){if(hasRequiredState_inline)return state_inline;hasRequiredState_inline=1;var o=requireToken(),e=requireUtils$4().isWhiteSpace,s=requireUtils$4().isPunctChar,a=requireUtils$4().isMdAsciiPunct;function l(u,c,d,h){this.src=u,this.env=d,this.md=c,this.tokens=h,this.tokens_meta=Array(h.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}return l.prototype.pushPending=function(){var u=new o("text","",0);return u.content=this.pending,u.level=this.pendingLevel,this.tokens.push(u),this.pending="",u},l.prototype.push=function(u,c,d){this.pending&&this.pushPending();var h=new o(u,c,d),p=null;return d<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),h.level=this.level,d>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],p={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(h),this.tokens_meta.push(p),h},l.prototype.scanDelims=function(u,c){var d=u,h,p,m,g,y,A,T,E,v,_=!0,w=!0,R=this.posMax,k=this.src.charCodeAt(u);for(h=u>0?this.src.charCodeAt(u-1):32;d<R&&this.src.charCodeAt(d)===k;)d++;return m=d-u,p=d<R?this.src.charCodeAt(d):32,T=a(h)||s(String.fromCharCode(h)),v=a(p)||s(String.fromCharCode(p)),A=e(h),E=e(p),E?_=!1:v&&(A||T||(_=!1)),A?w=!1:T&&(E||v||(w=!1)),c?(g=_,y=w):(g=_&&(!w||T),y=w&&(!_||v)),{can_open:g,can_close:y,length:m}},l.prototype.Token=o,state_inline=l,state_inline}var parser_inline,hasRequiredParser_inline;function requireParser_inline(){if(hasRequiredParser_inline)return parser_inline;hasRequiredParser_inline=1;var o=requireRuler(),e=[["text",requireText()],["linkify",requireLinkify()],["newline",requireNewline()],["escape",require_escape$1()],["backticks",requireBackticks()],["strikethrough",requireStrikethrough().tokenize],["emphasis",requireEmphasis().tokenize],["link",requireLink()],["image",requireImage()],["autolink",requireAutolink()],["html_inline",requireHtml_inline()],["entity",requireEntity()]],s=[["balance_pairs",requireBalance_pairs()],["strikethrough",requireStrikethrough().postProcess],["emphasis",requireEmphasis().postProcess],["fragments_join",requireFragments_join()]];function a(){var l;for(this.ruler=new o,l=0;l<e.length;l++)this.ruler.push(e[l][0],e[l][1]);for(this.ruler2=new o,l=0;l<s.length;l++)this.ruler2.push(s[l][0],s[l][1])}return a.prototype.skipToken=function(l){var u,c,d=l.pos,h=this.ruler.getRules(""),p=h.length,m=l.md.options.maxNesting,g=l.cache;if(typeof g[d]<"u"){l.pos=g[d];return}if(l.level<m){for(c=0;c<p;c++)if(l.level++,u=h[c](l,!0),l.level--,u){if(d>=l.pos)throw new Error("inline rule didn't increment state.pos");break}}else l.pos=l.posMax;u||l.pos++,g[d]=l.pos},a.prototype.tokenize=function(l){for(var u,c,d,h=this.ruler.getRules(""),p=h.length,m=l.posMax,g=l.md.options.maxNesting;l.pos<m;){if(d=l.pos,l.level<g){for(c=0;c<p;c++)if(u=h[c](l,!1),u){if(d>=l.pos)throw new Error("inline rule didn't increment state.pos");break}}if(u){if(l.pos>=m)break;continue}l.pending+=l.src[l.pos++]}l.pending&&l.pushPending()},a.prototype.parse=function(l,u,c,d){var h,p,m,g=new this.State(l,u,c,d);for(this.tokenize(g),p=this.ruler2.getRules(""),m=p.length,h=0;h<m;h++)p[h](g)},a.prototype.State=requireState_inline(),parser_inline=a,parser_inline}var re,hasRequiredRe;function requireRe(){return hasRequiredRe||(hasRequiredRe=1,re=function(o){var e={};o=o||{},e.src_Any=requireRegex$3().source,e.src_Cc=requireRegex$2().source,e.src_Z=requireRegex().source,e.src_P=requireRegex$4().source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var s="[><]";return e.src_pseudo_letter="(?:(?!"+s+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+s+"|"+e.src_ZPCc+")(?!"+(o["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+s+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(o["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+s+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}),re}var linkifyIt,hasRequiredLinkifyIt;function requireLinkifyIt(){if(hasRequiredLinkifyIt)return linkifyIt;hasRequiredLinkifyIt=1;function o(R){var k=Array.prototype.slice.call(arguments,1);return k.forEach(function(I){I&&Object.keys(I).forEach(function(P){R[P]=I[P]})}),R}function e(R){return Object.prototype.toString.call(R)}function s(R){return e(R)==="[object String]"}function a(R){return e(R)==="[object Object]"}function l(R){return e(R)==="[object RegExp]"}function u(R){return e(R)==="[object Function]"}function c(R){return R.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var d={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function h(R){return Object.keys(R||{}).reduce(function(k,I){return k||d.hasOwnProperty(I)},!1)}var p={"http:":{validate:function(R,k,I){var P=R.slice(k);return I.re.http||(I.re.http=new RegExp("^\\/\\/"+I.re.src_auth+I.re.src_host_port_strict+I.re.src_path,"i")),I.re.http.test(P)?P.match(I.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(R,k,I){var P=R.slice(k);return I.re.no_http||(I.re.no_http=new RegExp("^"+I.re.src_auth+"(?:localhost|(?:(?:"+I.re.src_domain+")\\.)+"+I.re.src_domain_root+")"+I.re.src_port+I.re.src_host_terminator+I.re.src_path,"i")),I.re.no_http.test(P)?k>=3&&R[k-3]===":"||k>=3&&R[k-3]==="/"?0:P.match(I.re.no_http)[0].length:0}},"mailto:":{validate:function(R,k,I){var P=R.slice(k);return I.re.mailto||(I.re.mailto=new RegExp("^"+I.re.src_email_name+"@"+I.re.src_host_strict,"i")),I.re.mailto.test(P)?P.match(I.re.mailto)[0].length:0}}},m="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",g="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function y(R){R.__index__=-1,R.__text_cache__=""}function A(R){return function(k,I){var P=k.slice(I);return R.test(P)?P.match(R)[0].length:0}}function T(){return function(R,k){k.normalize(R)}}function E(R){var k=R.re=requireRe()(R.__opts__),I=R.__tlds__.slice();R.onCompile(),R.__tlds_replaced__||I.push(m),I.push(k.src_xn),k.src_tlds=I.join("|");function P(j){return j.replace("%TLDS%",k.src_tlds)}k.email_fuzzy=RegExp(P(k.tpl_email_fuzzy),"i"),k.link_fuzzy=RegExp(P(k.tpl_link_fuzzy),"i"),k.link_no_ip_fuzzy=RegExp(P(k.tpl_link_no_ip_fuzzy),"i"),k.host_fuzzy_test=RegExp(P(k.tpl_host_fuzzy_test),"i");var N=[];R.__compiled__={};function L(j,F){throw new Error('(LinkifyIt) Invalid schema "'+j+'": '+F)}Object.keys(R.__schemas__).forEach(function(j){var F=R.__schemas__[j];if(F!==null){var V={validate:null,link:null};if(R.__compiled__[j]=V,a(F)){l(F.validate)?V.validate=A(F.validate):u(F.validate)?V.validate=F.validate:L(j,F),u(F.normalize)?V.normalize=F.normalize:F.normalize?L(j,F):V.normalize=T();return}if(s(F)){N.push(j);return}L(j,F)}}),N.forEach(function(j){R.__compiled__[R.__schemas__[j]]&&(R.__compiled__[j].validate=R.__compiled__[R.__schemas__[j]].validate,R.__compiled__[j].normalize=R.__compiled__[R.__schemas__[j]].normalize)}),R.__compiled__[""]={validate:null,normalize:T()};var Q=Object.keys(R.__compiled__).filter(function(j){return j.length>0&&R.__compiled__[j]}).map(c).join("|");R.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+k.src_ZPCc+"))("+Q+")","i"),R.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+k.src_ZPCc+"))("+Q+")","ig"),R.re.schema_at_start=RegExp("^"+R.re.schema_search.source,"i"),R.re.pretest=RegExp("("+R.re.schema_test.source+")|("+R.re.host_fuzzy_test.source+")|@","i"),y(R)}function v(R,k){var I=R.__index__,P=R.__last_index__,N=R.__text_cache__.slice(I,P);this.schema=R.__schema__.toLowerCase(),this.index=I+k,this.lastIndex=P+k,this.raw=N,this.text=N,this.url=N}function _(R,k){var I=new v(R,k);return R.__compiled__[I.schema].normalize(I,R),I}function w(R,k){if(!(this instanceof w))return new w(R,k);k||h(R)&&(k=R,R={}),this.__opts__=o({},d,k),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=o({},p,R),this.__compiled__={},this.__tlds__=g,this.__tlds_replaced__=!1,this.re={},E(this)}return w.prototype.add=function(k,I){return this.__schemas__[k]=I,E(this),this},w.prototype.set=function(k){return this.__opts__=o(this.__opts__,k),this},w.prototype.test=function(k){if(this.__text_cache__=k,this.__index__=-1,!k.length)return!1;var I,P,N,L,Q,j,F,V,J;if(this.re.schema_test.test(k)){for(F=this.re.schema_search,F.lastIndex=0;(I=F.exec(k))!==null;)if(L=this.testSchemaAt(k,I[2],F.lastIndex),L){this.__schema__=I[2],this.__index__=I.index+I[1].length,this.__last_index__=I.index+I[0].length+L;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(V=k.search(this.re.host_fuzzy_test),V>=0&&(this.__index__<0||V<this.__index__)&&(P=k.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(Q=P.index+P[1].length,(this.__index__<0||Q<this.__index__)&&(this.__schema__="",this.__index__=Q,this.__last_index__=P.index+P[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(J=k.indexOf("@"),J>=0&&(N=k.match(this.re.email_fuzzy))!==null&&(Q=N.index+N[1].length,j=N.index+N[0].length,(this.__index__<0||Q<this.__index__||Q===this.__index__&&j>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=Q,this.__last_index__=j))),this.__index__>=0},w.prototype.pretest=function(k){return this.re.pretest.test(k)},w.prototype.testSchemaAt=function(k,I,P){return this.__compiled__[I.toLowerCase()]?this.__compiled__[I.toLowerCase()].validate(k,P,this):0},w.prototype.match=function(k){var I=0,P=[];this.__index__>=0&&this.__text_cache__===k&&(P.push(_(this,I)),I=this.__last_index__);for(var N=I?k.slice(I):k;this.test(N);)P.push(_(this,I)),N=N.slice(this.__last_index__),I+=this.__last_index__;return P.length?P:null},w.prototype.matchAtStart=function(k){if(this.__text_cache__=k,this.__index__=-1,!k.length)return null;var I=this.re.schema_at_start.exec(k);if(!I)return null;var P=this.testSchemaAt(k,I[2],I[0].length);return P?(this.__schema__=I[2],this.__index__=I.index+I[1].length,this.__last_index__=I.index+I[0].length+P,_(this,0)):null},w.prototype.tlds=function(k,I){return k=Array.isArray(k)?k:[k],I?(this.__tlds__=this.__tlds__.concat(k).sort().filter(function(P,N,L){return P!==L[N-1]}).reverse(),E(this),this):(this.__tlds__=k.slice(),this.__tlds_replaced__=!0,E(this),this)},w.prototype.normalize=function(k){k.schema||(k.url="http://"+k.url),k.schema==="mailto:"&&!/^mailto:/i.test(k.url)&&(k.url="mailto:"+k.url)},w.prototype.onCompile=function(){},linkifyIt=w,linkifyIt}var punycode$1={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var punycode=punycode$1.exports,hasRequiredPunycode;function requirePunycode(){return hasRequiredPunycode||(hasRequiredPunycode=1,(function(o,e){(function(s){var a=e&&!e.nodeType&&e,l=o&&!o.nodeType&&o,u=typeof commonjsGlobal=="object"&&commonjsGlobal;(u.global===u||u.window===u||u.self===u)&&(s=u);var c,d=2147483647,h=36,p=1,m=26,g=38,y=700,A=72,T=128,E="-",v=/^xn--/,_=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=h-p,I=Math.floor,P=String.fromCharCode,N;function L(ue){throw new RangeError(R[ue])}function Q(ue,G){for(var K=ue.length,q=[];K--;)q[K]=G(ue[K]);return q}function j(ue,G){var K=ue.split("@"),q="";K.length>1&&(q=K[0]+"@",ue=K[1]),ue=ue.replace(w,".");var te=ue.split("."),Z=Q(te,G).join(".");return q+Z}function F(ue){for(var G=[],K=0,q=ue.length,te,Z;K<q;)te=ue.charCodeAt(K++),te>=55296&&te<=56319&&K<q?(Z=ue.charCodeAt(K++),(Z&64512)==56320?G.push(((te&1023)<<10)+(Z&1023)+65536):(G.push(te),K--)):G.push(te);return G}function V(ue){return Q(ue,function(G){var K="";return G>65535&&(G-=65536,K+=P(G>>>10&1023|55296),G=56320|G&1023),K+=P(G),K}).join("")}function J(ue){return ue-48<10?ue-22:ue-65<26?ue-65:ue-97<26?ue-97:h}function z(ue,G){return ue+22+75*(ue<26)-((G!=0)<<5)}function Y(ue,G,K){var q=0;for(ue=K?I(ue/y):ue>>1,ue+=I(ue/G);ue>k*m>>1;q+=h)ue=I(ue/k);return I(q+(k+1)*ue/(ue+g))}function fe(ue){var G=[],K=ue.length,q,te=0,Z=T,ce=A,be,Ee,Se,ke,Ae,Te,xe,Pe,Le;for(be=ue.lastIndexOf(E),be<0&&(be=0),Ee=0;Ee<be;++Ee)ue.charCodeAt(Ee)>=128&&L("not-basic"),G.push(ue.charCodeAt(Ee));for(Se=be>0?be+1:0;Se<K;){for(ke=te,Ae=1,Te=h;Se>=K&&L("invalid-input"),xe=J(ue.charCodeAt(Se++)),(xe>=h||xe>I((d-te)/Ae))&&L("overflow"),te+=xe*Ae,Pe=Te<=ce?p:Te>=ce+m?m:Te-ce,!(xe<Pe);Te+=h)Le=h-Pe,Ae>I(d/Le)&&L("overflow"),Ae*=Le;q=G.length+1,ce=Y(te-ke,q,ke==0),I(te/q)>d-Z&&L("overflow"),Z+=I(te/q),te%=q,G.splice(te++,0,Z)}return V(G)}function de(ue){var G,K,q,te,Z,ce,be,Ee,Se,ke,Ae,Te=[],xe,Pe,Le,Ue;for(ue=F(ue),xe=ue.length,G=T,K=0,Z=A,ce=0;ce<xe;++ce)Ae=ue[ce],Ae<128&&Te.push(P(Ae));for(q=te=Te.length,te&&Te.push(E);q<xe;){for(be=d,ce=0;ce<xe;++ce)Ae=ue[ce],Ae>=G&&Ae<be&&(be=Ae);for(Pe=q+1,be-G>I((d-K)/Pe)&&L("overflow"),K+=(be-G)*Pe,G=be,ce=0;ce<xe;++ce)if(Ae=ue[ce],Ae<G&&++K>d&&L("overflow"),Ae==G){for(Ee=K,Se=h;ke=Se<=Z?p:Se>=Z+m?m:Se-Z,!(Ee<ke);Se+=h)Ue=Ee-ke,Le=h-ke,Te.push(P(z(ke+Ue%Le,0))),Ee=I(Ue/Le);Te.push(P(z(Ee,0))),Z=Y(K,Pe,q==te),K=0,++q}++K,++G}return Te.join("")}function X(ue){return j(ue,function(G){return v.test(G)?fe(G.slice(4).toLowerCase()):G})}function he(ue){return j(ue,function(G){return _.test(G)?"xn--"+de(G):G})}if(c={version:"1.4.1",ucs2:{decode:F,encode:V},decode:fe,encode:de,toASCII:he,toUnicode:X},a&&l)if(o.exports==a)l.exports=c;else for(N in c)c.hasOwnProperty(N)&&(a[N]=c[N]);else s.punycode=c})(punycode)})(punycode$1,punycode$1.exports)),punycode$1.exports}var _default$1,hasRequired_default$1;function require_default$1(){return hasRequired_default$1||(hasRequired_default$1=1,_default$1={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}),_default$1}var zero$1,hasRequiredZero;function requireZero(){return hasRequiredZero||(hasRequiredZero=1,zero$1={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}}),zero$1}var commonmark$2,hasRequiredCommonmark;function requireCommonmark(){return hasRequiredCommonmark||(hasRequiredCommonmark=1,commonmark$2={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}),commonmark$2}var lib$8,hasRequiredLib$8;function requireLib$8(){if(hasRequiredLib$8)return lib$8;hasRequiredLib$8=1;var o=requireUtils$4(),e=requireHelpers$2(),s=requireRenderer(),a=requireParser_core(),l=requireParser_block(),u=requireParser_inline(),c=requireLinkifyIt(),d=requireMdurl(),h=requirePunycode(),p={default:require_default$1(),zero:requireZero(),commonmark:requireCommonmark()},m=/^(vbscript|javascript|file|data):/,g=/^data:image\/(gif|png|jpeg|webp);/;function y(_){var w=_.trim().toLowerCase();return m.test(w)?!!g.test(w):!0}var A=["http:","https:","mailto:"];function T(_){var w=d.parse(_,!0);if(w.hostname&&(!w.protocol||A.indexOf(w.protocol)>=0))try{w.hostname=h.toASCII(w.hostname)}catch{}return d.encode(d.format(w))}function E(_){var w=d.parse(_,!0);if(w.hostname&&(!w.protocol||A.indexOf(w.protocol)>=0))try{w.hostname=h.toUnicode(w.hostname)}catch{}return d.decode(d.format(w),d.decode.defaultChars+"%")}function v(_,w){if(!(this instanceof v))return new v(_,w);w||o.isString(_)||(w=_||{},_="default"),this.inline=new u,this.block=new l,this.core=new a,this.renderer=new s,this.linkify=new c,this.validateLink=y,this.normalizeLink=T,this.normalizeLinkText=E,this.utils=o,this.helpers=o.assign({},e),this.options={},this.configure(_),w&&this.set(w)}return v.prototype.set=function(_){return o.assign(this.options,_),this},v.prototype.configure=function(_){var w=this,R;if(o.isString(_)&&(R=_,_=p[R],!_))throw new Error('Wrong `markdown-it` preset "'+R+'", check name');if(!_)throw new Error("Wrong `markdown-it` preset, can't be empty");return _.options&&w.set(_.options),_.components&&Object.keys(_.components).forEach(function(k){_.components[k].rules&&w[k].ruler.enableOnly(_.components[k].rules),_.components[k].rules2&&w[k].ruler2.enableOnly(_.components[k].rules2)}),this},v.prototype.enable=function(_,w){var R=[];Array.isArray(_)||(_=[_]),["core","block","inline"].forEach(function(I){R=R.concat(this[I].ruler.enable(_,!0))},this),R=R.concat(this.inline.ruler2.enable(_,!0));var k=_.filter(function(I){return R.indexOf(I)<0});if(k.length&&!w)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+k);return this},v.prototype.disable=function(_,w){var R=[];Array.isArray(_)||(_=[_]),["core","block","inline"].forEach(function(I){R=R.concat(this[I].ruler.disable(_,!0))},this),R=R.concat(this.inline.ruler2.disable(_,!0));var k=_.filter(function(I){return R.indexOf(I)<0});if(k.length&&!w)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+k);return this},v.prototype.use=function(_){var w=[this].concat(Array.prototype.slice.call(arguments,1));return _.apply(_,w),this},v.prototype.parse=function(_,w){if(typeof _!="string")throw new Error("Input data should be a String");var R=new this.core.State(_,this,w);return this.core.process(R),R.tokens},v.prototype.render=function(_,w){return w=w||{},this.renderer.render(this.parse(_,w),this.options,w)},v.prototype.parseInline=function(_,w){var R=new this.core.State(_,this,w);return R.inlineMode=!0,this.core.process(R),R.tokens},v.prototype.renderInline=function(_,w){return w=w||{},this.renderer.render(this.parseInline(_,w),this.options,w)},lib$8=v,lib$8}var markdownIt,hasRequiredMarkdownIt;function requireMarkdownIt(){return hasRequiredMarkdownIt||(hasRequiredMarkdownIt=1,markdownIt=requireLib$8()),markdownIt}var markdownItExports=requireMarkdownIt();const MarkdownIt=getDefaultExportFromCjs$1(markdownItExports);class ActionsManager{constructor(e){qe(this,Kr);$e(this,Kr,e??{})}get actions(){return pe(this,Kr)}action(e){return pe(this,Kr)[e]}setActions(e){return $e(this,Kr,e),this}}Kr=new WeakMap;class InputRule{constructor(e,s,a={}){this.match=e,this.match=e,this.handler=typeof s=="string"?stringHandler(s):s,this.undoable=a.undoable!==!1,this.inCode=a.inCode||!1,this.inCodeMark=a.inCodeMark!==!1}}function stringHandler(o){return function(e,s,a,l){let u=o;if(s[1]){let c=s[0].lastIndexOf(s[1]);u+=s[0].slice(c+s[1].length),a+=c;let d=a-l;d>0&&(u=s[0].slice(c-d,c)+u,a=l)}return e.tr.insertText(u,a,l)}}const MAX_MATCH$1=500;function inputRules({rules:o}){let e=new Plugin({state:{init(){return null},apply(s,a){let l=s.getMeta(this);return l||(s.selectionSet||s.docChanged?null:a)}},props:{handleTextInput(s,a,l,u){return run$1(s,a,l,u,o,e)},handleDOMEvents:{compositionend:s=>{setTimeout(()=>{let{$cursor:a}=s.state.selection;a&&run$1(s,a.pos,a.pos,"",o,e)})}}},isInputRules:!0});return e}function run$1(o,e,s,a,l,u){if(o.composing)return!1;let c=o.state,d=c.doc.resolve(e),h=d.parent.textBetween(Math.max(0,d.parentOffset-MAX_MATCH$1),d.parentOffset,null,"")+a;for(let p=0;p<l.length;p++){let m=l[p];if(!m.inCodeMark&&d.marks().some(T=>T.type.spec.code))continue;if(d.parent.type.spec.code){if(!m.inCode)continue}else if(m.inCode==="only")continue;let g=m.match.exec(h);if(!g||g[0].length<a.length)continue;let y=e-(g[0].length-a.length);if(!m.inCodeMark){let T=!1;if(c.doc.nodesBetween(y,d.pos,E=>{E.isInline&&E.marks.some(v=>v.type.spec.code)&&(T=!0)}),T)continue}let A=m.handler(c,g,y,s);if(A)return m.undoable&&A.setMeta(u,{transform:A,from:e,to:s,text:a}),o.dispatch(A),!0}return!1}const undoInputRule=(o,e)=>{let s=o.plugins;for(let a=0;a<s.length;a++){let l=s[a],u;if(l.spec.isInputRules&&(u=l.getState(o))){if(e){let c=o.tr,d=u.transform;for(let h=d.steps.length-1;h>=0;h--)c.step(d.steps[h].invert(d.docs[h]));if(u.text){let h=c.doc.resolve(u.from).marks();c.replaceWith(u.from,u.to,o.schema.text(u.text,h))}else c.delete(u.from,u.to);e(c)}return!0}}return!1};new InputRule(/--$/,"",{inCodeMark:!1});const ellipsis=new InputRule(/\.\.\.$/,"",{inCodeMark:!1});new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"",{inCodeMark:!1}),new InputRule(/"$/,"",{inCodeMark:!1}),new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"",{inCodeMark:!1}),new InputRule(/'$/,"",{inCodeMark:!1});for(var base$1={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$2=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),i$2=0;i$2<10;i$2++)base$1[48+i$2]=base$1[96+i$2]=String(i$2);for(var i$2=1;i$2<=24;i$2++)base$1[i$2+111]="F"+i$2;for(var i$2=65;i$2<=90;i$2++)base$1[i$2]=String.fromCharCode(i$2+32),shift[i$2]=String.fromCharCode(i$2);for(var code$3 in base$1)shift.hasOwnProperty(code$3)||(shift[code$3]=base$1[code$3]);function keyName(o){var e=mac$2&&o.metaKey&&o.shiftKey&&!o.ctrlKey&&!o.altKey||ie$1&&o.shiftKey&&o.key&&o.key.length==1||o.key=="Unidentified",s=!e&&o.key||(o.shiftKey?shift:base$1)[o.keyCode]||o.key||"Unidentified";return s=="Esc"&&(s="Escape"),s=="Del"&&(s="Delete"),s=="Left"&&(s="ArrowLeft"),s=="Up"&&(s="ArrowUp"),s=="Right"&&(s="ArrowRight"),s=="Down"&&(s="ArrowDown"),s}const mac$1=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),windows$1=typeof navigator<"u"&&/Win/.test(navigator.platform);function normalizeKeyName$1(o){let e=o.split(/-(?!$)/),s=e[e.length-1];s=="Space"&&(s=" ");let a,l,u,c;for(let d=0;d<e.length-1;d++){let h=e[d];if(/^(cmd|meta|m)$/i.test(h))c=!0;else if(/^a(lt)?$/i.test(h))a=!0;else if(/^(c|ctrl|control)$/i.test(h))l=!0;else if(/^s(hift)?$/i.test(h))u=!0;else if(/^mod$/i.test(h))mac$1?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+h)}return a&&(s="Alt-"+s),l&&(s="Ctrl-"+s),c&&(s="Meta-"+s),u&&(s="Shift-"+s),s}function normalize(o){let e=Object.create(null);for(let s in o)e[normalizeKeyName$1(s)]=o[s];return e}function modifiers$1(o,e,s=!0){return e.altKey&&(o="Alt-"+o),e.ctrlKey&&(o="Ctrl-"+o),e.metaKey&&(o="Meta-"+o),s&&e.shiftKey&&(o="Shift-"+o),o}function keymap$1(o){return new Plugin({props:{handleKeyDown:keydownHandler(o)}})}function keydownHandler(o){let e=normalize(o);return function(s,a){let l=keyName(a),u,c=e[modifiers$1(l,a)];if(c&&c(s.state,s.dispatch,s))return!0;if(l.length==1&&l!=" "){if(a.shiftKey){let d=e[modifiers$1(l,a,!1)];if(d&&d(s.state,s.dispatch,s))return!0}if((a.altKey||a.metaKey||a.ctrlKey)&&!(windows$1&&a.ctrlKey&&a.altKey)&&(u=base$1[a.keyCode])&&u!=l){let d=e[modifiers$1(u,a)];if(d&&d(s.state,s.dispatch,s))return!0}}return!1}}var Priority;(function(o){o[o.Highest=1e6]="Highest",o[o.VeryHigh=1e5]="VeryHigh",o[o.High=1e4]="High",o[o.Medium=1e3]="Medium",o[o.Low=100]="Low",o[o.VeryLow=10]="VeryLow",o[o.Lowest=0]="Lowest"})(Priority||(Priority={}));const DEFAULT_PRIORITY=Priority.Medium,xo=class xo{constructor(e,s){oe(this,"Priority",xo.Priority);qe(this,Oo);qe(this,To,[]);qe(this,wi,{});qe(this,ki,{});qe(this,Zr,[]);qe(this,Ii,[]);oe(this,"context");$e(this,Oo,e),this.context=s??xo.createContext()}static createContext(){return new Map}get logger(){return pe(this,Oo)}use(e,...s){return e(this,...s),this}configureMd(e,s={}){return pe(this,To).push({cb:e,params:{text:s.text??!0,markup:s.markup??!0}}),this}addNode(e,s){if(pe(this,wi)[e])throw new Error(`ProseMirror node with this name "${e}" already exist`);return pe(this,wi)[e]={name:e,cb:s},this}addMark(e,s,a=DEFAULT_PRIORITY){if(pe(this,ki)[e])throw new Error(`ProseMirror mark with this name "${e}" already exist`);return pe(this,ki)[e]={name:e,cb:s,priority:a},this}addPlugin(e,s=DEFAULT_PRIORITY){return pe(this,Zr).push({cb:e,priority:s}),this}addKeymap(e,s=DEFAULT_PRIORITY){return pe(this,Zr).push({cb:(...a)=>keymap$1(e(...a)),priority:s}),this}addInputRules(e,s=DEFAULT_PRIORITY){return pe(this,Zr).push({cb:(...a)=>inputRules(e(...a)),priority:s}),this}addAction(e,s){if(pe(this,Ii).some(([a])=>a===e))throw new Error(`[Markdown Wysiwyg Editor] action with this name "${e}" already exist`);return pe(this,Ii).push([e,s]),this}build(){const e=pe(this,To).slice(),s={...pe(this,wi)},a={...pe(this,ki)},l=pe(this,Zr).slice(),u=pe(this,Ii).slice();return{configureMd:(c,d)=>e.reduce((h,{cb:p,params:m})=>d==="text"&&m.text||d==="markup"&&m.markup?p(h):h,c),nodes:()=>{let c=OrderedMap.from({});for(const{name:d,cb:h}of Object.values(s))c=c.addToEnd(d,h());return c},marks:()=>{const c=Object.values(a).sort((h,p)=>p.priority-h.priority);let d=OrderedMap.from({});for(const{name:h,cb:p}of c)d=d.addToEnd(h,p());return d},plugins:c=>l.sort((d,h)=>h.priority-d.priority).reduce((d,{cb:h})=>{const p=h(c);return Array.isArray(p)?d.push(...p):d.push(p),d},[]),actions:c=>u.reduce((d,[h,p])=>(d[h]=p(c),d),{})}}};Oo=new WeakMap,To=new WeakMap,wi=new WeakMap,ki=new WeakMap,Zr=new WeakMap,Ii=new WeakMap,oe(xo,"Priority",Priority);let ExtensionBuilder=xo;class ProseMirrorTransformer{constructor(e){oe(this,"_transformers");this._transformers=e}transform(e){const s=e.toJSON();return this.transformJSON(s),Node$2.fromJSON(e.type.schema,s)}transformJSON(e){for(const s of this._transformers)s(e);if(e.content)for(const s of e.content)this.transformJSON(s)}}const openSuffix="_open",closeSuffix="_close";var TokenType$1;(function(o){o.open="open",o.close="close",o.default="default"})(TokenType$1||(TokenType$1={}));function cropNodeName(o,e,s){const a=new RegExp(`(${e})$|(${s})$`);return o.replace(a,"")}let MarkdownParser$1=class{constructor(e,s,a,l){oe(this,"schema");oe(this,"stack",[]);oe(this,"marks");oe(this,"tokens");oe(this,"tokenizer");oe(this,"pmTransformers");oe(this,"dynamicModifier");oe(this,"logger");this.schema=e,this.marks=Mark$1.none,this.tokens=a,this.tokenizer=s,this.pmTransformers=l.pmTransformers,this.dynamicModifier=l.dynamicModifier??null,this.logger=l.logger.nested({module:"markdown-parser"})}validateLink(e){return this.tokenizer.validateLink(e)}normalizeLink(e){return this.tokenizer.normalizeLink(e)}normalizeLinkText(e){return this.tokenizer.normalizeLinkText(e)}matchLinks(e){return this.tokenizer.linkify.match(e)}parse(e){const s=Date.now();try{this.stack=[{type:this.schema.topNodeType,content:[]}];let a;try{a=typeof e=="string"?this.tokenizer.parse(e,{}):e,this.dynamicModifier&&(a=this.dynamicModifier.processTokens(a,typeof e=="string"?e:null))}catch(c){const d=c;throw d.message="Unable to parse your markup. Please check for errors. "+d.message,this.logger.error(d),d}this.parseTokens(a);let l;do l=this.closeNode();while(this.stack.length);const u=new ProseMirrorTransformer(this.pmTransformers);return l?u.transform(l):this.schema.topNodeType.createAndFill()}finally{logger.metrics({component:"parser",event:"parse",duration:Date.now()-s}),this.logger.metrics({component:"parser",event:"parse",duration:Date.now()-s})}}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}getTokenAttrs(e,s,a,l){let u={};return s.getAttrs?u=s.getAttrs(e,a,l):s.attrs instanceof Function?u=s.attrs(e):u=s.attrs,this.dynamicModifier&&(u=this.dynamicModifier.processAttrs(e,u??{})),u}getTokenSpec(e){var l;let s=((l=e.meta)==null?void 0:l["pm-node"])||e.type;s=cropNodeName(s,openSuffix,closeSuffix);let a;if(s in this.tokens&&(a=this.tokens[s]),!a)throw new RangeError(`No token spec for token: ${JSON.stringify(e)}`);return a}getTokenType({type:e}){return e.endsWith(openSuffix)?TokenType$1.open:e.endsWith(closeSuffix)?TokenType$1.close:TokenType$1.default}handlePrimitiveToken(e){switch(e.type){case"text":return this.addText(withoutTrailingNewline(e.content)),!0;case"inline":return this.parseTokens(e.children||[]),!0;case"softbreak":return this.tokens.softbreak?!1:(this.addText(`
`),!0)}return!1}handleMark(e,s,a){const l=this.schema.marks[s.name];if(s.noCloseToken){this.openMark(l.create(a));let{content:u}=e;s.code||(u=withoutTrailingNewline(u)),this.addText(u),this.closeMark(l);return}switch(this.getTokenType(e)){case"open":{this.openMark(l.create(a));break}case"close":{this.closeMark(l);break}}}getNodeSchema(e){return this.schema.nodes[e.name]}handleNode(e,s,a){const l=this.getNodeSchema(s);this.addNode(l,a)}handleBlock(e,s,a){var u;const l=this.getNodeSchema(s);if(s.noCloseToken){if(this.openNode(l,a),s.contentField==="children"&&((u=e.children)!=null&&u.length))this.parseTokens(e.children);else{let{content:c}=e;s.prepareContent&&(c=s.prepareContent(c)),this.addText(c)}this.closeNode();return}switch(this.getTokenType(e)){case"open":{this.openNode(l,a);break}case"close":{this.closeNode();break}}}handleToken(e,s,a){switch(s.type){case"mark":this.handleMark(e,s,a);break;case"node":this.handleNode(e,s,a);break;case"block":this.handleBlock(e,s,a);break}}addNode(e,s,a){let l=e.createAndFill(s,a,this.marks);return l?(this.dynamicModifier&&(l=this.dynamicModifier.processNodes(l)),this.push(l),l):null}openNode(e,s){this.stack.push({type:e,attrs:s,content:[]})}closeNode(){this.marks.length&&(this.marks=Mark$1.none);const e=this.stack.pop();return e?this.addNode(e.type,e.attrs,e.content):null}addText(e){if(!e)return;const s=this.top().content,a=s[s.length-1],l=this.schema.text(e,this.marks);let u;a&&(u=maybeMerge(a,l))?s[s.length-1]=u:s.push(l)}openMark(e){this.marks=e.addToSet(this.marks)}closeMark(e){this.marks=e.removeFromSet(this.marks)}parseTokens(e){for(let s=0;s<e.length;s++){const a=e[s];if(this.handlePrimitiveToken(a))continue;const l=this.getTokenSpec(a);if(l.ignore)continue;const u=this.getTokenAttrs(a,l,e,s);this.handleToken(a,l,u)}}};function maybeMerge(o,e){if(o.isText&&e.isText&&Mark$1.sameSet(o.marks,e.marks))return o.withText(o.text+e.text)}function withoutTrailingNewline(o){return o[o.length-1]===`
`||o.endsWith("\\n")?o.slice(0,o.length-1):o}class MarkdownParserDynamicModifier{constructor(e){oe(this,"elementProcessors");this.elementProcessors=new Map(Object.entries(e))}processTokens(e,s){return e.map((a,l)=>{var d;const u=this.elementProcessors.get(cropNodeName(a.type,openSuffix,"")),c=((d=u==null?void 0:u.processToken)==null?void 0:d.reduce((h,p)=>p(h,l,s),a))||a;return c.children&&(c.children=this.processTokens(c.children,s)),c})}processAttrs(e,s){const a=this.elementProcessors.get(cropNodeName(e.type,openSuffix,""));return!a||!a.processNodeAttrs||a.processNodeAttrs.length===0?s:a.processNodeAttrs.reduce((l,u)=>u(e,l),s)}processNodes(e){const s=this.elementProcessors.get(e.type.name);return!s||!s.processNode||s.processNode.length===0?e:s.processNode.reduce((a,l)=>l(a),e)}}class ParserTokensRegistry{constructor(e){qe(this,So,{});qe(this,Eo);$e(this,Eo,e.logger)}addToken(e,s){return pe(this,So)[e]=s,this}createParser(e,s,a,l){return new MarkdownParser$1(e,s,pe(this,So),{logger:pe(this,Eo),pmTransformers:a,dynamicModifier:l})}}So=new WeakMap,Eo=new WeakMap;class SchemaSpecRegistry{constructor(e,s){qe(this,Xr);qe(this,Ri);$e(this,Xr,{topNode:e,nodes:{},marks:{}}),$e(this,Ri,s)}addNode(e,s){const a=pe(this,Ri)?pe(this,Ri).processNodeSpec(e,s):s;return pe(this,Xr).nodes[e]=a,this}addMark(e,s){return pe(this,Xr).marks[e]=s,this}createSchema(){return new Schema$1(pe(this,Xr))}}Xr=new WeakMap,Ri=new WeakMap;class MarkdownSerializer{constructor(e,s,a){oe(this,"nodes");oe(this,"marks");oe(this,"dynamicModifier");this.nodes=e,this.marks=s,this.dynamicModifier=a}serialize(e,s={}){const a=new MarkdownSerializerState(this.nodes,this.marks,s,this.dynamicModifier);return a.renderContent(e),a.out}containsNode(e){return e in this.nodes}containsMark(e){return e in this.marks}}class MarkdownSerializerState{constructor(e,s,a={},l){oe(this,"out");oe(this,"inTightList");oe(this,"noAutoBlank");oe(this,"isAutolink");oe(this,"escapeWhitespace");oe(this,"escapeCharacters");oe(this,"nodes");oe(this,"marks");oe(this,"options");oe(this,"delim");oe(this,"closed");oe(this,"dynamicModifier");this.nodes=e,this.marks=s,this.delim=this.out="",this.closed=!1,this.inTightList=!1,this.noAutoBlank=!1,this.isAutolink=void 0,this.escapeWhitespace=!1,this.options=a||{},this.dynamicModifier=l,typeof this.options.tightLists>"u"&&(this.options.tightLists=!1)}setNoAutoBlank(){this.noAutoBlank=!0}unsetNoAutoBlank(){this.noAutoBlank=!1}flushClose(e){if(this.closed){if(!this.atBlank()&&!this.noAutoBlank&&(this.out+=`
`),e==null&&(e=2),e>1){let s=this.delim;const a=/\s+$/.exec(s);if(a&&(s=s.slice(0,s.length-a[0].length)),!this.noAutoBlank)for(let l=1;l<e;l++)this.out+=s+`
`}this.closed=!1}}wrapBlock(e,s,a,l){const u=this.delim;this.write(s||e),this.delim+=e,l(),this.delim=u,this.closeBlock(a)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e??!1}text(e,s){const a=e.split(`
`);for(let l=0;l<a.length;l++){const u=this.atBlank()||this.closed;this.write();let c=a[l];s!==!1&&this.options.escape!==!1&&(c=this.esc(c,u)),this.escapeWhitespace&&(c=this.escWhitespace(c)),this.out+=c,l!=a.length-1&&(this.out+=`
`)}}render(e,s,a){if(typeof s=="number")throw new Error("!");if(!this.nodes[e.type.name])throw new Error("Token type `"+e.type.name+"` not supported by Markdown renderer");const l=this.nodes[e.type.name];this.dynamicModifier?this.dynamicModifier.processNode(this,e,s,a,l):l(this,e,s,a)}renderContent(e){e.forEach((s,a,l)=>this.render(s,e,l))}renderInline(e){const s=[];let a="";const l=(u,c,d)=>{let h=u?u.marks:[];u&&u.type.spec.isBreak&&(h=h.filter(T=>{if(d===0||d+1==e.childCount)return!1;const E=e.child(d-1),v=e.child(d+1);return T.isInSet(E.marks)&&(!E.isText||/\S/.test(E.text??""))&&T.isInSet(v.marks)&&(!v.isText||/\S/.test(v.text??""))}));let p=a;if(a="",u&&u.isText&&h.some(T=>{const E=this.marks[T.type.name];return E&&E.expelEnclosingWhitespace})){const[T,E,v,_]=/^(\s*)(.*?)(\s*)$/m.exec(u.text??"");p+=E,a=_,(E||_)&&(u=v?u.withText(v):null,u||(h=s))}const m=h.length&&h[h.length-1],g=m&&this.marks[m.type.name].escape===!1,y=h.length-(g?1:0);e:for(let T=0;T<y;T++){const E=h[T];if(!this.marks[E.type.name].mixable)break;for(let v=0;v<s.length;v++){const _=s[v];if(!this.marks[_.type.name].mixable)break;if(E.eq(_)){T>v?h=h.slice(0,v).concat(E).concat(h.slice(v,T)).concat(h.slice(T+1,y)):v>T&&(h=h.slice(0,T).concat(h.slice(T+1,v)).concat(E).concat(h.slice(v,y)));continue e}}}let A=0;for(;A<Math.min(s.length,y)&&h[A].eq(s[A]);)++A;for(;A<s.length;)this.text(this.markString(s.pop(),!1,e,d),!1);if(p&&this.text(p),u){for(;s.length<y;){const T=h[s.length];s.push(T),this.text(this.markString(T,!0,e,d),!1)}g&&u.isText?this.text(this.markString(m,!0,e,d)+u.text+this.markString(m,!1,e,d+1),!1):this.render(u,e,d)}};e.forEach(l),l(null,null,e.childCount)}renderList(e,s,a){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);const l=typeof e.attrs.tight<"u"?e.attrs.tight:this.options.tightLists,u=this.inTightList;this.inTightList=l,e.forEach((c,d,h)=>{h&&l&&this.flushClose(1),this.wrapBlock(s,a(h,c),e,()=>this.render(c,e,h))}),this.inTightList=u}esc(e,s=!1){var d,h,p;const a=/[`\^+*\\\|~\[\]\{\}<>\$_]/g,l=(d=this.escapeCharacters)!=null&&d.length?this.escapeCharacters.map(m=>"\\"+m).join(""):"",u=((h=this.options)==null?void 0:h.commonEscape)||new RegExp(a.source+(l?`|[${l}]`:""),"g"),c=((p=this.options)==null?void 0:p.startOfLineEscape)||/^[:#\-*+>]/;return e=e.replace(u,"\\$&"),s&&(e=e.replace(c,"\\$&").replace(/^(\s*\d+)\./,"$1\\.")),e}escWhitespace(e){return e.replace(/ /g,"\\ ")}quote(e){const s=e.indexOf('"')==-1?'""':e.indexOf("'")==-1?"''":"()";return s[0]+e+s[1]}repeat(e,s){let a="";for(let l=0;l<s;l++)a+=e;return a}markString(e,s,a,l){const u=this.marks[e.type.name],c=s?u.open:u.close;return typeof c=="string"?c:c(this,e,a,l)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[])[0],trailing:(e.match(/(\s+)$/)||[])[0]}}}class SerializerTokensRegistry{constructor(){qe(this,vo,{});qe(this,_o,{})}addNode(e,s){return pe(this,vo)[e]=s,this}addMark(e,s){return pe(this,_o)[e]=s,this}createSerializer(e){return new MarkdownSerializer(pe(this,vo),pe(this,_o),e)}}vo=new WeakMap,_o=new WeakMap;class ExtensionsManager{constructor({extensions:e,options:s={},logger:a=new Logger2}){qe(this,Jr);qe(this,ei);qe(this,ti);qe(this,Co,new Map);qe(this,wo,new Map);qe(this,ko,[]);qe(this,br);qe(this,yr);qe(this,Io);qe(this,Ro);qe(this,Vn);qe(this,Mn);qe(this,Do,[]);qe(this,No,{});qe(this,Po,{});qe(this,Mo,{});qe(this,Lo);qe(this,$o);oe(this,"processNode",(e,{spec:s,fromMd:a,toMd:l,view:u})=>{pe(this,Jr).addNode(e,s),pe(this,ei).addToken(a.tokenName||e,a.tokenSpec),pe(this,ti).addNode(e,l),u&&pe(this,Co).set(e,u)});oe(this,"processMark",(e,{spec:s,fromMd:a,toMd:l,view:u})=>{pe(this,Jr).addMark(e,s),pe(this,ei).addToken(a.tokenName||e,a.tokenSpec),pe(this,ti).addMark(e,l),u&&pe(this,wo).set(e,u)});var u,c,d,h;$e(this,Jr,new SchemaSpecRegistry(void 0,(u=s.dynamicModifiers)==null?void 0:u.schema)),$e(this,ei,new ParserTokensRegistry({logger:a})),$e(this,ti,new SerializerTokensRegistry),s.dynamicModifiers&&($e(this,$o,(c=s.dynamicModifiers)==null?void 0:c.parser),$e(this,Lo,(d=s.dynamicModifiers)==null?void 0:d.serializer)),$e(this,Io,e);const l=((h=s.mdOpts)==null?void 0:h.preset)??"default";$e(this,br,new MarkdownIt(l,s.mdOpts??{})),$e(this,yr,new MarkdownIt(l,s.mdOpts??{})),s.linkifyTlds&&(pe(this,br).linkify.tlds(s.linkifyTlds,!0),pe(this,yr).linkify.tlds(s.linkifyTlds,!0)),s.pmTransformers&&$e(this,ko,s.pmTransformers),$e(this,Ro,new ExtensionBuilder(a))}static process(e,s,a){return new this({extensions:e,options:s,logger:a}).build()}build(){return this.processExtensions(),this.createDeps(),this.createDerived(),{...pe(this,Mn),actions:pe(this,Mn).actions,rawActions:pe(this,No),plugins:pe(this,Do),nodeViews:pe(this,Po),markViews:pe(this,Mo)}}buildDeps(){return this.processExtensions(),this.createDeps(),pe(this,Mn)}processExtensions(){$e(this,Vn,pe(this,Ro).use(pe(this,Io)).build()),$e(this,br,pe(this,Vn).configureMd(pe(this,br),"markup")),$e(this,yr,pe(this,Vn).configureMd(pe(this,yr),"text")),pe(this,Vn).nodes().forEach(this.processNode),pe(this,Vn).marks().forEach(this.processMark)}createParser(e,s){return pe(this,ei).createParser(e,s,pe(this,ko),pe(this,$o))}createDeps(){const e=new ActionsManager,s=pe(this,Jr).createSchema(),a=this.createParser(s,pe(this,br)),l=this.createParser(s,pe(this,yr)),u=pe(this,ti).createSerializer(pe(this,Lo));$e(this,Mn,{schema:s,actions:e,markupParser:a,textParser:l,serializer:u})}createDerived(){$e(this,Do,pe(this,Vn).plugins(pe(this,Mn))),Object.assign(pe(this,No),pe(this,Vn).actions(pe(this,Mn)));for(const[e,s]of pe(this,Co))pe(this,Po)[e]=s(pe(this,Mn));for(const[e,s]of pe(this,wo))pe(this,Mo)[e]=s(pe(this,Mn))}}Jr=new WeakMap,ei=new WeakMap,ti=new WeakMap,Co=new WeakMap,wo=new WeakMap,ko=new WeakMap,br=new WeakMap,yr=new WeakMap,Io=new WeakMap,Ro=new WeakMap,Vn=new WeakMap,Mn=new WeakMap,Do=new WeakMap,No=new WeakMap,Po=new WeakMap,Mo=new WeakMap,Lo=new WeakMap,$o=new WeakMap;class SchemaDynamicModifier{constructor(e){oe(this,"nodeSpecsProcessors");this.nodeSpecsProcessors=new Map(Object.entries(e))}processNodeSpec(e,s){let a=s;return this.nodeSpecsProcessors.forEach((l,u)=>{e===u&&l.allowedAttrs&&l.allowedAttrs.length>0&&s&&(a={...s,attrs:{...s.attrs,...l.allowedAttrs.reduce((c,d)=>(c[d]={default:null},c),{})}})}),a}}class MarkdownSerializerDynamicModifier{constructor(e){oe(this,"nodeProcessors");this.nodeProcessors=new Map(Object.entries(e))}processNode(e,s,a,l,u){const c=this.nodeProcessors.get(s.type.name);!c||!c.processNode||c.processNode.length===0?u(e,s,a,l):c.processNode.forEach(d=>{d(e,s,a,l,u)})}}function bindActions(o){return function(e){return Object.entries(o).reduce((s,[a,l])=>(s[a]={isActive:()=>{var u;return((u=l.isActive)==null?void 0:u.call(l,e.state))??!1},isEnable:u=>l.isEnable(e.state,void 0,e,u),run:u=>l.run(e.state,e.dispatch,e,u),meta:()=>{var u;return(u=l.meta)==null?void 0:u.call(l,e.state)}},s),{})}}function convertDynamicModifiersConfigs(o){const e={},s={},a={};return o.forEach(l=>{var u,c,d,h;switch(l.type){case"parserToken":{const{tokenName:p,process:m}=l;e[p]=e[p]||{},e[p].processToken=e[p].processToken||[],(u=e[p].processToken)==null||u.push(m);break}case"parserNodeAttrs":{const{tokenName:p,process:m}=l;e[p]=e[p]||{},e[p].processNodeAttrs=e[p].processNodeAttrs||[],(c=e[p].processNodeAttrs)==null||c.push(m);break}case"parserNode":{const{nodeName:p,process:m}=l;e[p]=e[p]||{},e[p].processNode=e[p].processNode||[],(d=e[p].processNode)==null||d.push(m);break}case"serializerNode":{const{nodeName:p,process:m}=l;a[p]=a[p]||{},a[p].processNode=a[p].processNode||[],(h=a[p].processNode)==null||h.push(m);break}case"schemaNodeSpec":{const{nodeName:p,allowedAttrs:m}=l;s[p]={allowedAttrs:m};break}}}),{parser:e,schema:s,serializer:a}}var _baseClamp,hasRequired_baseClamp;function require_baseClamp(){if(hasRequired_baseClamp)return _baseClamp;hasRequired_baseClamp=1;function o(e,s,a){return e===e&&(a!==void 0&&(e=e<=a?e:a),s!==void 0&&(e=e>=s?e:s)),e}return _baseClamp=o,_baseClamp}var clamp_1,hasRequiredClamp;function requireClamp(){if(hasRequiredClamp)return clamp_1;hasRequiredClamp=1;var o=require_baseClamp(),e=requireToNumber();function s(a,l,u){return u===void 0&&(u=l,l=void 0),u!==void 0&&(u=e(u),u=u===u?u:0),l!==void 0&&(l=e(l),l=l===l?l:0),o(e(a),l,u)}return clamp_1=s,clamp_1}var clampExports=requireClamp();const clamp=getDefaultExportFromCjs$1(clampExports);var _arrayEach,hasRequired_arrayEach;function require_arrayEach(){if(hasRequired_arrayEach)return _arrayEach;hasRequired_arrayEach=1;function o(e,s){for(var a=-1,l=e==null?0:e.length;++a<l&&s(e[a],a,e)!==!1;);return e}return _arrayEach=o,_arrayEach}var _baseAssign,hasRequired_baseAssign;function require_baseAssign(){if(hasRequired_baseAssign)return _baseAssign;hasRequired_baseAssign=1;var o=require_copyObject(),e=requireKeys();function s(a,l){return a&&o(l,e(l),a)}return _baseAssign=s,_baseAssign}var _baseAssignIn,hasRequired_baseAssignIn;function require_baseAssignIn(){if(hasRequired_baseAssignIn)return _baseAssignIn;hasRequired_baseAssignIn=1;var o=require_copyObject(),e=requireKeysIn();function s(a,l){return a&&o(l,e(l),a)}return _baseAssignIn=s,_baseAssignIn}var _copySymbols,hasRequired_copySymbols;function require_copySymbols(){if(hasRequired_copySymbols)return _copySymbols;hasRequired_copySymbols=1;var o=require_copyObject(),e=require_getSymbols();function s(a,l){return o(a,e(a),l)}return _copySymbols=s,_copySymbols}var _getSymbolsIn,hasRequired_getSymbolsIn;function require_getSymbolsIn(){if(hasRequired_getSymbolsIn)return _getSymbolsIn;hasRequired_getSymbolsIn=1;var o=require_arrayPush(),e=require_getPrototype(),s=require_getSymbols(),a=requireStubArray(),l=Object.getOwnPropertySymbols,u=l?function(c){for(var d=[];c;)o(d,s(c)),c=e(c);return d}:a;return _getSymbolsIn=u,_getSymbolsIn}var _copySymbolsIn,hasRequired_copySymbolsIn;function require_copySymbolsIn(){if(hasRequired_copySymbolsIn)return _copySymbolsIn;hasRequired_copySymbolsIn=1;var o=require_copyObject(),e=require_getSymbolsIn();function s(a,l){return o(a,e(a),l)}return _copySymbolsIn=s,_copySymbolsIn}var _getAllKeysIn,hasRequired_getAllKeysIn;function require_getAllKeysIn(){if(hasRequired_getAllKeysIn)return _getAllKeysIn;hasRequired_getAllKeysIn=1;var o=require_baseGetAllKeys(),e=require_getSymbolsIn(),s=requireKeysIn();function a(l){return o(l,s,e)}return _getAllKeysIn=a,_getAllKeysIn}var _initCloneArray,hasRequired_initCloneArray;function require_initCloneArray(){if(hasRequired_initCloneArray)return _initCloneArray;hasRequired_initCloneArray=1;var o=Object.prototype,e=o.hasOwnProperty;function s(a){var l=a.length,u=new a.constructor(l);return l&&typeof a[0]=="string"&&e.call(a,"index")&&(u.index=a.index,u.input=a.input),u}return _initCloneArray=s,_initCloneArray}var _cloneDataView,hasRequired_cloneDataView;function require_cloneDataView(){if(hasRequired_cloneDataView)return _cloneDataView;hasRequired_cloneDataView=1;var o=require_cloneArrayBuffer();function e(s,a){var l=a?o(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.byteLength)}return _cloneDataView=e,_cloneDataView}var _cloneRegExp,hasRequired_cloneRegExp;function require_cloneRegExp(){if(hasRequired_cloneRegExp)return _cloneRegExp;hasRequired_cloneRegExp=1;var o=/\w*$/;function e(s){var a=new s.constructor(s.source,o.exec(s));return a.lastIndex=s.lastIndex,a}return _cloneRegExp=e,_cloneRegExp}var _cloneSymbol,hasRequired_cloneSymbol;function require_cloneSymbol(){if(hasRequired_cloneSymbol)return _cloneSymbol;hasRequired_cloneSymbol=1;var o=require_Symbol(),e=o?o.prototype:void 0,s=e?e.valueOf:void 0;function a(l){return s?Object(s.call(l)):{}}return _cloneSymbol=a,_cloneSymbol}var _initCloneByTag,hasRequired_initCloneByTag;function require_initCloneByTag(){if(hasRequired_initCloneByTag)return _initCloneByTag;hasRequired_initCloneByTag=1;var o=require_cloneArrayBuffer(),e=require_cloneDataView(),s=require_cloneRegExp(),a=require_cloneSymbol(),l=require_cloneTypedArray(),u="[object Boolean]",c="[object Date]",d="[object Map]",h="[object Number]",p="[object RegExp]",m="[object Set]",g="[object String]",y="[object Symbol]",A="[object ArrayBuffer]",T="[object DataView]",E="[object Float32Array]",v="[object Float64Array]",_="[object Int8Array]",w="[object Int16Array]",R="[object Int32Array]",k="[object Uint8Array]",I="[object Uint8ClampedArray]",P="[object Uint16Array]",N="[object Uint32Array]";function L(Q,j,F){var V=Q.constructor;switch(j){case A:return o(Q);case u:case c:return new V(+Q);case T:return e(Q,F);case E:case v:case _:case w:case R:case k:case I:case P:case N:return l(Q,F);case d:return new V;case h:case g:return new V(Q);case p:return s(Q);case m:return new V;case y:return a(Q)}}return _initCloneByTag=L,_initCloneByTag}var _baseIsMap,hasRequired_baseIsMap;function require_baseIsMap(){if(hasRequired_baseIsMap)return _baseIsMap;hasRequired_baseIsMap=1;var o=require_getTag(),e=requireIsObjectLike(),s="[object Map]";function a(l){return e(l)&&o(l)==s}return _baseIsMap=a,_baseIsMap}var isMap_1,hasRequiredIsMap;function requireIsMap(){if(hasRequiredIsMap)return isMap_1;hasRequiredIsMap=1;var o=require_baseIsMap(),e=require_baseUnary(),s=require_nodeUtil(),a=s&&s.isMap,l=a?e(a):o;return isMap_1=l,isMap_1}var _baseIsSet,hasRequired_baseIsSet;function require_baseIsSet(){if(hasRequired_baseIsSet)return _baseIsSet;hasRequired_baseIsSet=1;var o=require_getTag(),e=requireIsObjectLike(),s="[object Set]";function a(l){return e(l)&&o(l)==s}return _baseIsSet=a,_baseIsSet}var isSet_1,hasRequiredIsSet;function requireIsSet(){if(hasRequiredIsSet)return isSet_1;hasRequiredIsSet=1;var o=require_baseIsSet(),e=require_baseUnary(),s=require_nodeUtil(),a=s&&s.isSet,l=a?e(a):o;return isSet_1=l,isSet_1}var _baseClone,hasRequired_baseClone;function require_baseClone(){if(hasRequired_baseClone)return _baseClone;hasRequired_baseClone=1;var o=require_Stack(),e=require_arrayEach(),s=require_assignValue(),a=require_baseAssign(),l=require_baseAssignIn(),u=require_cloneBuffer(),c=require_copyArray(),d=require_copySymbols(),h=require_copySymbolsIn(),p=require_getAllKeys(),m=require_getAllKeysIn(),g=require_getTag(),y=require_initCloneArray(),A=require_initCloneByTag(),T=require_initCloneObject(),E=requireIsArray(),v=requireIsBuffer(),_=requireIsMap(),w=requireIsObject(),R=requireIsSet(),k=requireKeys(),I=requireKeysIn(),P=1,N=2,L=4,Q="[object Arguments]",j="[object Array]",F="[object Boolean]",V="[object Date]",J="[object Error]",z="[object Function]",Y="[object GeneratorFunction]",fe="[object Map]",de="[object Number]",X="[object Object]",he="[object RegExp]",ue="[object Set]",G="[object String]",K="[object Symbol]",q="[object WeakMap]",te="[object ArrayBuffer]",Z="[object DataView]",ce="[object Float32Array]",be="[object Float64Array]",Ee="[object Int8Array]",Se="[object Int16Array]",ke="[object Int32Array]",Ae="[object Uint8Array]",Te="[object Uint8ClampedArray]",xe="[object Uint16Array]",Pe="[object Uint32Array]",Le={};Le[Q]=Le[j]=Le[te]=Le[Z]=Le[F]=Le[V]=Le[ce]=Le[be]=Le[Ee]=Le[Se]=Le[ke]=Le[fe]=Le[de]=Le[X]=Le[he]=Le[ue]=Le[G]=Le[K]=Le[Ae]=Le[Te]=Le[xe]=Le[Pe]=!0,Le[J]=Le[z]=Le[q]=!1;function Ue(Be,Ze,We,Ge,Ye,Ve){var He,at=Ze&P,dt=Ze&N,bt=Ze&L;if(We&&(He=Ye?We(Be,Ge,Ye,Ve):We(Be)),He!==void 0)return He;if(!w(Be))return Be;var Ct=E(Be);if(Ct){if(He=y(Be),!at)return c(Be,He)}else{var ht=g(Be),pt=ht==z||ht==Y;if(v(Be))return u(Be,at);if(ht==X||ht==Q||pt&&!Ye){if(He=dt||pt?{}:T(Be),!at)return dt?h(Be,l(He,Be)):d(Be,a(He,Be))}else{if(!Le[ht])return Ye?Be:{};He=A(Be,ht,at)}}Ve||(Ve=new o);var ae=Ve.get(Be);if(ae)return ae;Ve.set(Be,He),R(Be)?Be.forEach(function(me){He.add(Ue(me,Ze,We,me,Be,Ve))}):_(Be)&&Be.forEach(function(me,_e){He.set(_e,Ue(me,Ze,We,_e,Be,Ve))});var H=bt?dt?m:p:dt?I:k,W=Ct?void 0:H(Be);return e(W||Be,function(me,_e){W&&(_e=me,me=Be[_e]),s(He,_e,Ue(me,Ze,We,_e,Be,Ve))}),He}return _baseClone=Ue,_baseClone}var cloneDeep_1,hasRequiredCloneDeep;function requireCloneDeep(){if(hasRequiredCloneDeep)return cloneDeep_1;hasRequiredCloneDeep=1;var o=require_baseClone(),e=1,s=4;function a(l){return o(l,e|s)}return cloneDeep_1=a,cloneDeep_1}requireCloneDeep();var isFunctionExports=requireIsFunction();const isFunction=getDefaultExportFromCjs$1(isFunctionExports);var isString_1,hasRequiredIsString;function requireIsString(){if(hasRequiredIsString)return isString_1;hasRequiredIsString=1;var o=require_baseGetTag(),e=requireIsArray(),s=requireIsObjectLike(),a="[object String]";function l(u){return typeof u=="string"||!e(u)&&s(u)&&o(u)==a}return isString_1=l,isString_1}var isStringExports=requireIsString();const isString$1=getDefaultExportFromCjs$1(isStringExports);var noopExports=requireNoop();const noop$5=getDefaultExportFromCjs$1(noopExports);var last_1,hasRequiredLast;function requireLast(){if(hasRequiredLast)return last_1;hasRequiredLast=1;function o(e){var s=e==null?0:e.length;return s?e[s-1]:void 0}return last_1=o,last_1}var _parent,hasRequired_parent;function require_parent(){if(hasRequired_parent)return _parent;hasRequired_parent=1;var o=require_baseGet(),e=require_baseSlice();function s(a,l){return l.length<2?a:o(a,e(l,0,-1))}return _parent=s,_parent}var _baseUnset,hasRequired_baseUnset;function require_baseUnset(){if(hasRequired_baseUnset)return _baseUnset;hasRequired_baseUnset=1;var o=require_castPath(),e=requireLast(),s=require_parent(),a=require_toKey(),l=Object.prototype,u=l.hasOwnProperty;function c(d,h){h=o(h,d);var p=-1,m=h.length;if(!m)return!0;for(var g=d==null||typeof d!="object"&&typeof d!="function";++p<m;){var y=h[p];if(typeof y=="string"){if(y==="__proto__"&&!u.call(d,"__proto__"))return!1;if(y==="constructor"&&p+1<m&&typeof h[p+1]=="string"&&h[p+1]==="prototype"){if(g&&p===0)continue;return!1}}}var A=s(d,h);return A==null||delete A[a(e(h))]}return _baseUnset=c,_baseUnset}var _customOmitClone,hasRequired_customOmitClone;function require_customOmitClone(){if(hasRequired_customOmitClone)return _customOmitClone;hasRequired_customOmitClone=1;var o=requireIsPlainObject$1();function e(s){return o(s)?void 0:s}return _customOmitClone=e,_customOmitClone}var flatten_1,hasRequiredFlatten;function requireFlatten(){if(hasRequiredFlatten)return flatten_1;hasRequiredFlatten=1;var o=require_baseFlatten();function e(s){var a=s==null?0:s.length;return a?o(s,1):[]}return flatten_1=e,flatten_1}var _flatRest,hasRequired_flatRest;function require_flatRest(){if(hasRequired_flatRest)return _flatRest;hasRequired_flatRest=1;var o=requireFlatten(),e=require_overRest(),s=require_setToString();function a(l){return s(e(l,void 0,o),l+"")}return _flatRest=a,_flatRest}var omit_1,hasRequiredOmit;function requireOmit(){if(hasRequiredOmit)return omit_1;hasRequiredOmit=1;var o=require_arrayMap(),e=require_baseClone(),s=require_baseUnset(),a=require_castPath(),l=require_copyObject(),u=require_customOmitClone(),c=require_flatRest(),d=require_getAllKeysIn(),h=1,p=2,m=4,g=c(function(y,A){var T={};if(y==null)return T;var E=!1;A=o(A,function(_){return _=a(_,y),E||(E=_.length>1),_}),l(y,d(y),T),E&&(T=e(T,h|p|m,u));for(var v=A.length;v--;)s(T,A[v]);return T});return omit_1=g,omit_1}requireOmit();var _metaMap,hasRequired_metaMap;function require_metaMap(){if(hasRequired_metaMap)return _metaMap;hasRequired_metaMap=1;var o=require_WeakMap(),e=o&&new o;return _metaMap=e,_metaMap}var _baseSetData,hasRequired_baseSetData;function require_baseSetData(){if(hasRequired_baseSetData)return _baseSetData;hasRequired_baseSetData=1;var o=requireIdentity$1(),e=require_metaMap(),s=e?function(a,l){return e.set(a,l),a}:o;return _baseSetData=s,_baseSetData}var _createCtor,hasRequired_createCtor;function require_createCtor(){if(hasRequired_createCtor)return _createCtor;hasRequired_createCtor=1;var o=require_baseCreate(),e=requireIsObject();function s(a){return function(){var l=arguments;switch(l.length){case 0:return new a;case 1:return new a(l[0]);case 2:return new a(l[0],l[1]);case 3:return new a(l[0],l[1],l[2]);case 4:return new a(l[0],l[1],l[2],l[3]);case 5:return new a(l[0],l[1],l[2],l[3],l[4]);case 6:return new a(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new a(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var u=o(a.prototype),c=a.apply(u,l);return e(c)?c:u}}return _createCtor=s,_createCtor}var _createBind,hasRequired_createBind;function require_createBind(){if(hasRequired_createBind)return _createBind;hasRequired_createBind=1;var o=require_createCtor(),e=require_root(),s=1;function a(l,u,c){var d=u&s,h=o(l);function p(){var m=this&&this!==e&&this instanceof p?h:l;return m.apply(d?c:this,arguments)}return p}return _createBind=a,_createBind}var _composeArgs,hasRequired_composeArgs;function require_composeArgs(){if(hasRequired_composeArgs)return _composeArgs;hasRequired_composeArgs=1;var o=Math.max;function e(s,a,l,u){for(var c=-1,d=s.length,h=l.length,p=-1,m=a.length,g=o(d-h,0),y=Array(m+g),A=!u;++p<m;)y[p]=a[p];for(;++c<h;)(A||c<d)&&(y[l[c]]=s[c]);for(;g--;)y[p++]=s[c++];return y}return _composeArgs=e,_composeArgs}var _composeArgsRight,hasRequired_composeArgsRight;function require_composeArgsRight(){if(hasRequired_composeArgsRight)return _composeArgsRight;hasRequired_composeArgsRight=1;var o=Math.max;function e(s,a,l,u){for(var c=-1,d=s.length,h=-1,p=l.length,m=-1,g=a.length,y=o(d-p,0),A=Array(y+g),T=!u;++c<y;)A[c]=s[c];for(var E=c;++m<g;)A[E+m]=a[m];for(;++h<p;)(T||c<d)&&(A[E+l[h]]=s[c++]);return A}return _composeArgsRight=e,_composeArgsRight}var _countHolders,hasRequired_countHolders;function require_countHolders(){if(hasRequired_countHolders)return _countHolders;hasRequired_countHolders=1;function o(e,s){for(var a=e.length,l=0;a--;)e[a]===s&&++l;return l}return _countHolders=o,_countHolders}var _baseLodash,hasRequired_baseLodash;function require_baseLodash(){if(hasRequired_baseLodash)return _baseLodash;hasRequired_baseLodash=1;function o(){}return _baseLodash=o,_baseLodash}var _LazyWrapper,hasRequired_LazyWrapper;function require_LazyWrapper(){if(hasRequired_LazyWrapper)return _LazyWrapper;hasRequired_LazyWrapper=1;var o=require_baseCreate(),e=require_baseLodash(),s=4294967295;function a(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=s,this.__views__=[]}return a.prototype=o(e.prototype),a.prototype.constructor=a,_LazyWrapper=a,_LazyWrapper}var _getData,hasRequired_getData;function require_getData(){if(hasRequired_getData)return _getData;hasRequired_getData=1;var o=require_metaMap(),e=requireNoop(),s=o?function(a){return o.get(a)}:e;return _getData=s,_getData}var _realNames,hasRequired_realNames;function require_realNames(){if(hasRequired_realNames)return _realNames;hasRequired_realNames=1;var o={};return _realNames=o,_realNames}var _getFuncName,hasRequired_getFuncName;function require_getFuncName(){if(hasRequired_getFuncName)return _getFuncName;hasRequired_getFuncName=1;var o=require_realNames(),e=Object.prototype,s=e.hasOwnProperty;function a(l){for(var u=l.name+"",c=o[u],d=s.call(o,u)?c.length:0;d--;){var h=c[d],p=h.func;if(p==null||p==l)return h.name}return u}return _getFuncName=a,_getFuncName}var _LodashWrapper,hasRequired_LodashWrapper;function require_LodashWrapper(){if(hasRequired_LodashWrapper)return _LodashWrapper;hasRequired_LodashWrapper=1;var o=require_baseCreate(),e=require_baseLodash();function s(a,l){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=void 0}return s.prototype=o(e.prototype),s.prototype.constructor=s,_LodashWrapper=s,_LodashWrapper}var _wrapperClone,hasRequired_wrapperClone;function require_wrapperClone(){if(hasRequired_wrapperClone)return _wrapperClone;hasRequired_wrapperClone=1;var o=require_LazyWrapper(),e=require_LodashWrapper(),s=require_copyArray();function a(l){if(l instanceof o)return l.clone();var u=new e(l.__wrapped__,l.__chain__);return u.__actions__=s(l.__actions__),u.__index__=l.__index__,u.__values__=l.__values__,u}return _wrapperClone=a,_wrapperClone}var wrapperLodash,hasRequiredWrapperLodash;function requireWrapperLodash(){if(hasRequiredWrapperLodash)return wrapperLodash;hasRequiredWrapperLodash=1;var o=require_LazyWrapper(),e=require_LodashWrapper(),s=require_baseLodash(),a=requireIsArray(),l=requireIsObjectLike(),u=require_wrapperClone(),c=Object.prototype,d=c.hasOwnProperty;function h(p){if(l(p)&&!a(p)&&!(p instanceof o)){if(p instanceof e)return p;if(d.call(p,"__wrapped__"))return u(p)}return new e(p)}return h.prototype=s.prototype,h.prototype.constructor=h,wrapperLodash=h,wrapperLodash}var _isLaziable,hasRequired_isLaziable;function require_isLaziable(){if(hasRequired_isLaziable)return _isLaziable;hasRequired_isLaziable=1;var o=require_LazyWrapper(),e=require_getData(),s=require_getFuncName(),a=requireWrapperLodash();function l(u){var c=s(u),d=a[c];if(typeof d!="function"||!(c in o.prototype))return!1;if(u===d)return!0;var h=e(d);return!!h&&u===h[0]}return _isLaziable=l,_isLaziable}var _setData,hasRequired_setData;function require_setData(){if(hasRequired_setData)return _setData;hasRequired_setData=1;var o=require_baseSetData(),e=require_shortOut(),s=e(o);return _setData=s,_setData}var _getWrapDetails,hasRequired_getWrapDetails;function require_getWrapDetails(){if(hasRequired_getWrapDetails)return _getWrapDetails;hasRequired_getWrapDetails=1;var o=/\{\n\/\* \[wrapped with (.+)\] \*/,e=/,? & /;function s(a){var l=a.match(o);return l?l[1].split(e):[]}return _getWrapDetails=s,_getWrapDetails}var _insertWrapDetails,hasRequired_insertWrapDetails;function require_insertWrapDetails(){if(hasRequired_insertWrapDetails)return _insertWrapDetails;hasRequired_insertWrapDetails=1;var o=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function e(s,a){var l=a.length;if(!l)return s;var u=l-1;return a[u]=(l>1?"& ":"")+a[u],a=a.join(l>2?", ":" "),s.replace(o,`{
/* [wrapped with `+a+`] */
`)}return _insertWrapDetails=e,_insertWrapDetails}var _updateWrapDetails,hasRequired_updateWrapDetails;function require_updateWrapDetails(){if(hasRequired_updateWrapDetails)return _updateWrapDetails;hasRequired_updateWrapDetails=1;var o=require_arrayEach(),e=require_arrayIncludes(),s=1,a=2,l=8,u=16,c=32,d=64,h=128,p=256,m=512,g=[["ary",h],["bind",s],["bindKey",a],["curry",l],["curryRight",u],["flip",m],["partial",c],["partialRight",d],["rearg",p]];function y(A,T){return o(g,function(E){var v="_."+E[0];T&E[1]&&!e(A,v)&&A.push(v)}),A.sort()}return _updateWrapDetails=y,_updateWrapDetails}var _setWrapToString,hasRequired_setWrapToString;function require_setWrapToString(){if(hasRequired_setWrapToString)return _setWrapToString;hasRequired_setWrapToString=1;var o=require_getWrapDetails(),e=require_insertWrapDetails(),s=require_setToString(),a=require_updateWrapDetails();function l(u,c,d){var h=c+"";return s(u,e(h,a(o(h),d)))}return _setWrapToString=l,_setWrapToString}var _createRecurry,hasRequired_createRecurry;function require_createRecurry(){if(hasRequired_createRecurry)return _createRecurry;hasRequired_createRecurry=1;var o=require_isLaziable(),e=require_setData(),s=require_setWrapToString(),a=4,l=8,u=32,c=64;function d(h,p,m,g,y,A,T,E,v,_){var w=p&l,R=w?T:void 0,k=w?void 0:T,I=w?A:void 0,P=w?void 0:A;p|=w?u:c,p&=~(w?c:u),p&a||(p&=-4);var N=[h,p,y,I,R,P,k,E,v,_],L=m.apply(void 0,N);return o(h)&&e(L,N),L.placeholder=g,s(L,h,p)}return _createRecurry=d,_createRecurry}var _getHolder,hasRequired_getHolder;function require_getHolder(){if(hasRequired_getHolder)return _getHolder;hasRequired_getHolder=1;function o(e){var s=e;return s.placeholder}return _getHolder=o,_getHolder}var _reorder,hasRequired_reorder;function require_reorder(){if(hasRequired_reorder)return _reorder;hasRequired_reorder=1;var o=require_copyArray(),e=require_isIndex(),s=Math.min;function a(l,u){for(var c=l.length,d=s(u.length,c),h=o(l);d--;){var p=u[d];l[d]=e(p,c)?h[p]:void 0}return l}return _reorder=a,_reorder}var _replaceHolders,hasRequired_replaceHolders;function require_replaceHolders(){if(hasRequired_replaceHolders)return _replaceHolders;hasRequired_replaceHolders=1;var o="__lodash_placeholder__";function e(s,a){for(var l=-1,u=s.length,c=0,d=[];++l<u;){var h=s[l];(h===a||h===o)&&(s[l]=o,d[c++]=l)}return d}return _replaceHolders=e,_replaceHolders}var _createHybrid,hasRequired_createHybrid;function require_createHybrid(){if(hasRequired_createHybrid)return _createHybrid;hasRequired_createHybrid=1;var o=require_composeArgs(),e=require_composeArgsRight(),s=require_countHolders(),a=require_createCtor(),l=require_createRecurry(),u=require_getHolder(),c=require_reorder(),d=require_replaceHolders(),h=require_root(),p=1,m=2,g=8,y=16,A=128,T=512;function E(v,_,w,R,k,I,P,N,L,Q){var j=_&A,F=_&p,V=_&m,J=_&(g|y),z=_&T,Y=V?void 0:a(v);function fe(){for(var de=arguments.length,X=Array(de),he=de;he--;)X[he]=arguments[he];if(J)var ue=u(fe),G=s(X,ue);if(R&&(X=o(X,R,k,J)),I&&(X=e(X,I,P,J)),de-=G,J&&de<Q){var K=d(X,ue);return l(v,_,E,fe.placeholder,w,X,K,N,L,Q-de)}var q=F?w:this,te=V?q[v]:v;return de=X.length,N?X=c(X,N):z&&de>1&&X.reverse(),j&&L<de&&(X.length=L),this&&this!==h&&this instanceof fe&&(te=Y||a(te)),te.apply(q,X)}return fe}return _createHybrid=E,_createHybrid}var _createCurry,hasRequired_createCurry;function require_createCurry(){if(hasRequired_createCurry)return _createCurry;hasRequired_createCurry=1;var o=require_apply(),e=require_createCtor(),s=require_createHybrid(),a=require_createRecurry(),l=require_getHolder(),u=require_replaceHolders(),c=require_root();function d(h,p,m){var g=e(h);function y(){for(var A=arguments.length,T=Array(A),E=A,v=l(y);E--;)T[E]=arguments[E];var _=A<3&&T[0]!==v&&T[A-1]!==v?[]:u(T,v);if(A-=_.length,A<m)return a(h,p,s,y.placeholder,void 0,T,_,void 0,void 0,m-A);var w=this&&this!==c&&this instanceof y?g:h;return o(w,this,T)}return y}return _createCurry=d,_createCurry}var _createPartial,hasRequired_createPartial;function require_createPartial(){if(hasRequired_createPartial)return _createPartial;hasRequired_createPartial=1;var o=require_apply(),e=require_createCtor(),s=require_root(),a=1;function l(u,c,d,h){var p=c&a,m=e(u);function g(){for(var y=-1,A=arguments.length,T=-1,E=h.length,v=Array(E+A),_=this&&this!==s&&this instanceof g?m:u;++T<E;)v[T]=h[T];for(;A--;)v[T++]=arguments[++y];return o(_,p?d:this,v)}return g}return _createPartial=l,_createPartial}var _mergeData,hasRequired_mergeData;function require_mergeData(){if(hasRequired_mergeData)return _mergeData;hasRequired_mergeData=1;var o=require_composeArgs(),e=require_composeArgsRight(),s=require_replaceHolders(),a="__lodash_placeholder__",l=1,u=2,c=4,d=8,h=128,p=256,m=Math.min;function g(y,A){var T=y[1],E=A[1],v=T|E,_=v<(l|u|h),w=E==h&&T==d||E==h&&T==p&&y[7].length<=A[8]||E==(h|p)&&A[7].length<=A[8]&&T==d;if(!(_||w))return y;E&l&&(y[2]=A[2],v|=T&l?0:c);var R=A[3];if(R){var k=y[3];y[3]=k?o(k,R,A[4]):R,y[4]=k?s(y[3],a):A[4]}return R=A[5],R&&(k=y[5],y[5]=k?e(k,R,A[6]):R,y[6]=k?s(y[5],a):A[6]),R=A[7],R&&(y[7]=R),E&h&&(y[8]=y[8]==null?A[8]:m(y[8],A[8])),y[9]==null&&(y[9]=A[9]),y[0]=A[0],y[1]=v,y}return _mergeData=g,_mergeData}var _createWrap,hasRequired_createWrap;function require_createWrap(){if(hasRequired_createWrap)return _createWrap;hasRequired_createWrap=1;var o=require_baseSetData(),e=require_createBind(),s=require_createCurry(),a=require_createHybrid(),l=require_createPartial(),u=require_getData(),c=require_mergeData(),d=require_setData(),h=require_setWrapToString(),p=requireToInteger(),m="Expected a function",g=1,y=2,A=8,T=16,E=32,v=64,_=Math.max;function w(R,k,I,P,N,L,Q,j){var F=k&y;if(!F&&typeof R!="function")throw new TypeError(m);var V=P?P.length:0;if(V||(k&=-97,P=N=void 0),Q=Q===void 0?Q:_(p(Q),0),j=j===void 0?j:p(j),V-=N?N.length:0,k&v){var J=P,z=N;P=N=void 0}var Y=F?void 0:u(R),fe=[R,k,I,P,N,J,z,L,Q,j];if(Y&&c(fe,Y),R=fe[0],k=fe[1],I=fe[2],P=fe[3],N=fe[4],j=fe[9]=fe[9]===void 0?F?0:R.length:_(fe[9]-V,0),!j&&k&(A|T)&&(k&=-25),!k||k==g)var de=e(R,k,I);else k==A||k==T?de=s(R,k,j):(k==E||k==(g|E))&&!N.length?de=l(R,k,I,P):de=a.apply(void 0,fe);var X=Y?o:d;return h(X(de,fe),R,k)}return _createWrap=w,_createWrap}var partial_1,hasRequiredPartial;function requirePartial(){if(hasRequiredPartial)return partial_1;hasRequiredPartial=1;var o=require_baseRest(),e=require_createWrap(),s=require_getHolder(),a=require_replaceHolders(),l=32,u=o(function(c,d){var h=a(d,s(u));return e(c,l,void 0,d,h)});return u.placeholder={},partial_1=u,partial_1}requirePartial();var _baseRange,hasRequired_baseRange;function require_baseRange(){if(hasRequired_baseRange)return _baseRange;hasRequired_baseRange=1;var o=Math.ceil,e=Math.max;function s(a,l,u,c){for(var d=-1,h=e(o((l-a)/(u||1)),0),p=Array(h);h--;)p[c?h:++d]=a,a+=u;return p}return _baseRange=s,_baseRange}var _createRange,hasRequired_createRange;function require_createRange(){if(hasRequired_createRange)return _createRange;hasRequired_createRange=1;var o=require_baseRange(),e=require_isIterateeCall(),s=requireToFinite();function a(l){return function(u,c,d){return d&&typeof d!="number"&&e(u,c,d)&&(c=d=void 0),u=s(u),c===void 0?(c=u,u=0):c=s(c),d=d===void 0?u<c?1:-1:s(d),o(u,c,d,l)}}return _createRange=a,_createRange}var range_1,hasRequiredRange$1;function requireRange$1(){if(hasRequiredRange$1)return range_1;hasRequiredRange$1=1;var o=require_createRange(),e=o();return range_1=e,range_1}var rangeExports=requireRange$1();const range$1=getDefaultExportFromCjs$1(rangeExports);var uniqWith_1,hasRequiredUniqWith;function requireUniqWith(){if(hasRequiredUniqWith)return uniqWith_1;hasRequiredUniqWith=1;var o=require_baseUniq();function e(s,a){return a=typeof a=="function"?a:void 0,s&&s.length?o(s,void 0,a):[]}return uniqWith_1=e,uniqWith_1}var uniqWithExports=requireUniqWith();const uniqWith=getDefaultExportFromCjs$1(uniqWithExports);var uniqueId_1,hasRequiredUniqueId;function requireUniqueId(){if(hasRequiredUniqueId)return uniqueId_1;hasRequiredUniqueId=1;var o=requireToString(),e=0;function s(a){var l=++e;return o(a)+l}return uniqueId_1=s,uniqueId_1}var uniqueIdExports=requireUniqueId();const uniqueId=getDefaultExportFromCjs$1(uniqueIdExports);let Facet$1=class{constructor(e){oe(this,"_combine");oe(this,"_key");this._combine=e.combine,this._key=new PluginKey(`Facet${e.static?"_static":""}:${e.name||""}:${uniqueId()}`)}static define(e){return new this(e)}of(e){const s=this._combine([e]);return new Plugin({key:this._key,state:{init:()=>s,apply:()=>s}})}getState(e){return this._key.getState(e)}};const LoggerFacet$1=Facet$1.define({combine:o=>o[0],static:!0}),getLoggerFromState=o=>LoggerFacet$1.getState(o),METRICS_KEY="metrics",trackTransactionMetrics=(o,e,s)=>(o.setMeta(METRICS_KEY,{type:e,meta:s}),o),logTransactionMetrics=(o,e)=>{const s=o.getMeta(METRICS_KEY);s&&(globalLogger.metrics({component:"transaction",event:s.type,duration:Date.now()-o.time,meta:s.meta}),e.metrics({component:"transaction",event:s.type,duration:Date.now()-o.time,meta:s.meta}))};class WysiwygEditor{constructor({domElem:e,initialContent:s="",extensions:a=()=>{},allowHTML:l,mdPreset:u,linkify:c,pmTransformers:d,linkifyTlds:h,escapeConfig:p,onChange:m,onDocChange:g,modifiers:y,logger:A=new Logger2}){qe(this,mn);qe(this,Di);qe(this,Bo);qe(this,Ni);qe(this,tr);qe(this,Fo);const T=y?convertDynamicModifiersConfigs(y):void 0,E=T?{schema:new SchemaDynamicModifier(T.schema),parser:new MarkdownParserDynamicModifier(T.parser),serializer:new MarkdownSerializerDynamicModifier(T.serializer)}:void 0,{schema:v,markupParser:_,serializer:w,nodeViews:R,markViews:k,plugins:I,rawActions:P,actions:N}=ExtensionsManager.process(a,{mdOpts:{html:l,linkify:c,breaks:!0,preset:u},linkifyTlds:h,pmTransformers:d,dynamicModifiers:E},A);I.unshift(LoggerFacet$1.of(A));const L=EditorState$1.create({schema:v,doc:_.parse(s),plugins:I}),Q=()=>this.tryOnChange(m),j=()=>this.tryOnChange(g);$e(this,mn,new EditorView$1(e??null,{state:L,nodeViews:R,markViews:k,dispatchTransaction(F){const V=this.state.apply(F);this.updateState(V),Q(),F.docChanged&&j(),logTransactionMetrics(F,A)}})),$e(this,Ni,N.setActions(bindActions(P)(pe(this,mn)))),$e(this,Di,w),$e(this,Bo,_),$e(this,tr,new WysiwygContentHandler(pe(this,mn),_)),$e(this,Fo,p)}get dom(){return pe(this,mn).dom}get serializer(){return pe(this,Di)}get parser(){return pe(this,Bo)}get actions(){return pe(this,Ni).actions}get view(){return pe(this,mn)}action(e){return pe(this,Ni).action(e)}focus(){return pe(this,mn).focus()}hasFocus(){return pe(this,mn).hasFocus()}getValue(){return pe(this,Di).serialize(pe(this,mn).state.doc,pe(this,Fo))}isEmpty(){var s;const{doc:e}=pe(this,mn).state;return e.childCount===1&&((s=e.firstChild)==null?void 0:s.type.name)==="paragraph"&&e.firstChild.childCount===0}clear(){return pe(this,tr).clear()}replace(e){return pe(this,tr).replace(e)}prepend(e){return pe(this,tr).prepend(e)}append(e){return pe(this,tr).append(e)}moveCursor(e){return pe(this,tr).moveCursor(e)}destroy(){pe(this,mn).destroy()}tryOnChange(e){if(e)try{e(this)}catch(s){console.error(s)}}}mn=new WeakMap,Di=new WeakMap,Bo=new WeakMap,Ni=new WeakMap,tr=new WeakMap,Fo=new WeakMap;var ToolbarTooltipDelay;(function(o){o[o.Open=250]="Open",o[o.Close=150]="Close"})(ToolbarTooltipDelay||(ToolbarTooltipDelay={}));var ToolbarDataType;(function(o){o.SingleButton="s-button",o.ListButton="list-b",o.ButtonPopup="b-popup",o.ReactNode="r-node",o.ReactNodeFn="r-node-fn",o.ReactComponent="r-component"})(ToolbarDataType||(ToolbarDataType={}));const cn=r({n:"g-md-",e:"__",m:"_",v:"_"});var Lang;(function(o){o.Ru="ru",o.En="en"})(Lang||(Lang={}));let subs=[];const config={},configure=o=>{Object.assign(config,o),subs.forEach(e=>{e(config)})},subscribeConfigure=o=>(subs.push(o),()=>{subs=subs.filter(e=>e!==o)}),getConfig$1=()=>config,i18n$f=new I18N;i18n$f.setLang(getConfig$1().lang||Lang.En),subscribeConfigure(o=>{o.lang&&i18n$f.setLang(o.lang)});function registerKeyset(o,e){return i18n$f.registerKeyset(Lang.En,o,e.en),i18n$f.registerKeyset(Lang.Ru,o,e.ru),i18n$f.keyset(o)}const cancel$1="Cancel",close$1="Close",edit$1="Edit",preview$1="Preview",remove$7="Remove",save$1="Save",actions$2="Actions",toolbar_action_disabled$1="Incompatible markup element",en$j={cancel:cancel$1,close:close$1,delete:"Delete",edit:edit$1,preview:preview$1,remove:remove$7,save:save$1,actions:actions$2,toolbar_action_disabled:toolbar_action_disabled$1},cancel="",close="",edit="",preview="",remove$6="",save="",actions$1="",toolbar_action_disabled="  ",ru$j={cancel,close,delete:"",edit,preview,remove:remove$6,save,actions:actions$1,toolbar_action_disabled},KEYSET$e="common",i18n$e=registerKeyset(KEYSET$e,{en:en$j,ru:ru$j}),b$J=cn("toolbar-button"),DEFAULT_ICON_SIZE=16,ToolbarButtonView=reactExports.forwardRef(function({title:e,hint:s,hotkey:a,theme:l="normal",hintWhenDisabled:u,active:c,enabled:d,onClick:h,className:p,qa:m,id:g,disableTooltip:y,...A},T){const E=!c&&!d,v=isFunction(e)?e():e,_=isFunction(s)?s():s,w=u===!1||!E,R=typeof u=="string"?u:typeof u=="function"?u():i18n$e("toolbar_action_disabled");return jsxRuntimeExports.jsx(Popover$1,{content:jsxRuntimeExports.jsx("div",{className:b$J("action-disabled-tooltip"),children:R}),disabled:w,placement:["bottom"],children:(k,I)=>jsxRuntimeExports.jsx(ActionTooltip,{openDelay:ToolbarTooltipDelay.Open,closeDelay:ToolbarTooltipDelay.Close,description:_,title:v,hotkey:a,disabled:y,children:(P,N)=>jsxRuntimeExports.jsx(Button,{qa:m,size:"m",ref:L=>{setRef(T,L),setRef(I,L),setRef(N,L)},selected:c,disabled:E,view:l==="danger"?"flat-danger":c?"normal":"flat",onClick:h,className:b$J(null,[p]),"aria-label":v,"data-toolbar-item":g,children:"icon"in A?jsxRuntimeExports.jsx(Icon,{data:A.icon.data,size:A.icon.size??DEFAULT_ICON_SIZE}):A.children})})})});function ToolbarButton(o){const{id:e,editor:s,focus:a,isActive:l,isEnable:u,exec:c,onClick:d}=o,h=l(s),p=u(s),m=()=>{a(),c(s),d==null||d(e)};return jsxRuntimeExports.jsx(ToolbarButtonView,{...o,active:h,enabled:p,onClick:m})}function useMountedState(){var o=reactExports.useRef(!1),e=reactExports.useCallback(function(){return o.current},[]);return reactExports.useEffect(function(){return o.current=!0,function(){o.current=!1}},[]),e}var noop$4=function(){};function on(o){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];o&&o.addEventListener&&o.addEventListener.apply(o,e)}function off(o){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];o&&o.removeEventListener&&o.removeEventListener.apply(o,e)}var isBrowser=typeof window<"u",updateReducer=function(o){return(o+1)%1e6};function useUpdate(){var o=reactExports.useReducer(updateReducer,0),e=o[1];return e}var useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,useEffectOnce=function(o){reactExports.useEffect(o,[])};function useEnsuredForwardedRef(o){var e=reactExports.useRef(o&&o.current);return reactExports.useEffect(function(){o&&(o.current=e.current)},[o]),e}var defaultTarget=isBrowser?window:null,isListenerType1=function(o){return!!o.addEventListener},isListenerType2=function(o){return!!o.on},useEvent=function(o,e,s,a){s===void 0&&(s=defaultTarget),reactExports.useEffect(function(){if(e&&s)return isListenerType1(s)?on(s,o,e,a):isListenerType2(s)&&s.on(o,e,a),function(){isListenerType1(s)?off(s,o,e,a):isListenerType2(s)&&s.off(o,e,a)}},[o,e,s,JSON.stringify(a)])},createKeyPredicate=function(o){return typeof o=="function"?o:typeof o=="string"?function(e){return e.key===o}:o?function(){return!0}:function(){return!1}},useKey=function(o,e,s,a){e===void 0&&(e=noop$4),s===void 0&&(s={}),a===void 0&&(a=[o]);var l=s.event,u=l===void 0?"keydown":l,c=s.target,d=s.options,h=reactExports.useMemo(function(){var p=createKeyPredicate(o),m=function(g){if(p(g))return e(g)};return m},a);useEvent(u,h,c,d)},useLatest=function(o){var e=reactExports.useRef(o);return e.current=o,e},defaultState={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function useMeasure(){var o=reactExports.useState(null),e=o[0],s=o[1],a=reactExports.useState(defaultState),l=a[0],u=a[1],c=reactExports.useMemo(function(){return new window.ResizeObserver(function(d){if(d[0]){var h=d[0].contentRect,p=h.x,m=h.y,g=h.width,y=h.height,A=h.top,T=h.left,E=h.bottom,v=h.right;u({x:p,y:m,width:g,height:y,top:A,left:T,bottom:E,right:v})}})},[]);return useIsomorphicLayoutEffect(function(){if(e)return c.observe(e),function(){c.disconnect()}},[e]),[s,l]}const useMeasure$1=isBrowser&&typeof window.ResizeObserver<"u"?useMeasure:(function(){return[noop$4,defaultState]}),useElementState=()=>reactExports.useState(null);function useBooleanState(o){const[e,s]=reactExports.useState(o);return[e,reactExports.useCallback(()=>s(!0),[]),reactExports.useCallback(()=>s(!1),[]),reactExports.useCallback(()=>s(a=>!a),[])]}const useComponentWillMount=o=>{const e=reactExports.useRef(!0);e.current&&o(),e.current=!1},useRenderTime=o=>{let e=0;useComponentWillMount(()=>{e=Date.now()}),useEffectOnce(()=>{o(Date.now()-e)})};function ToolbarButtonPopup(o){const{className:e,editor:s,isActive:a,isEnable:l,renderPopup:u,disableTooltip:c,...d}=o,[h,p]=useElementState(),[m,,g,y]=useBooleanState(!1),A=a(s),T=l(s);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ToolbarButtonView,{...d,ref:p,active:A,enabled:T,className:e,onClick:y,disableTooltip:c||m}),m&&u({...o,anchorElement:h,hide:g})]})}const LAYOUT={STICKY_TOOLBAR:"sticky-toolbar"};var changedArray=function(e,s){return e===void 0&&(e=[]),s===void 0&&(s=[]),e.length!==s.length||e.some(function(a,l){return!Object.is(a,s[l])})},initialState={error:null},ErrorBoundary=(function(o){_inheritsLoose(e,o);function e(){for(var a,l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a=o.call.apply(o,[this].concat(u))||this,a.state=initialState,a.resetErrorBoundary=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];a.props.onReset==null||(d=a.props).onReset.apply(d,p),a.reset()},a}e.getDerivedStateFromError=function(l){return{error:l}};var s=e.prototype;return s.reset=function(){this.setState(initialState)},s.componentDidCatch=function(l,u){var c,d;(c=(d=this.props).onError)==null||c.call(d,l,u)},s.componentDidUpdate=function(l,u){var c=this.state.error,d=this.props.resetKeys;if(c!==null&&u.error!==null&&changedArray(l.resetKeys,d)){var h,p;(h=(p=this.props).onResetKeysChange)==null||h.call(p,l.resetKeys,d),this.reset()}},s.render=function(){var l=this.state.error,u=this.props,c=u.fallbackRender,d=u.FallbackComponent,h=u.fallback;if(l!==null){var p={error:l,resetErrorBoundary:this.resetErrorBoundary};if(reactExports.isValidElement(h))return h;if(typeof c=="function")return c(p);if(d)return reactExports.createElement(d,p);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},e})(reactExports.Component);const ErrorLoggerBoundary=({children:o})=>jsxRuntimeExports.jsx(ErrorBoundary,{onError:e=>{logger.error(e)},fallbackRender:()=>null,children:o}),Renderer=reactExports.memo(({storage:o})=>{const e=useUpdate();return reactExports.useEffect(()=>(o.on("update",e),()=>{o.off("update",e)}),[o,e]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o.getItems().map(s=>jsxRuntimeExports.jsx(ItemRenderer,{item:s},s.id))})});Renderer.displayName="ReactRenderer";const ItemRenderer=reactExports.memo(({item:o})=>{const e=useUpdate();return reactExports.useEffect(()=>(o.on("rerender",e),()=>{o.off("rerender",e)}),[o,e]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o.render()})});ItemRenderer.displayName="ReactItemRenderer";const key$4=new PluginKey("reactrenderer");function getReactRendererFromState(o){const e=key$4.getState(o);if(!e)throw new Error("ReactRenderer is missing in the editor state. Probably, you forgot to use ReactRendererExtension");return e}const ReactRendererExtension=(o,e)=>{o.context.set("reactrenderer",e),o.addPlugin(()=>new Plugin({key:key$4,state:{init:()=>e,apply:()=>e}}),o.Priority.Highest)},Zs=class Zs extends EventEmitter{constructor(){super(...arguments);qe(this,nr,[])}getItems(){return pe(this,nr)}createItem(s,a){const l=new Zs.Item(s,a,this.removeItem.bind(this));return pe(this,nr).push(l),this.emit("update",null),l}removeItem(s){typeof s=="string"?$e(this,nr,pe(this,nr).filter(a=>a.id!==s)):$e(this,nr,pe(this,nr).filter(a=>a!==s)),this.emit("update",null)}};nr=new WeakMap,oe(Zs,"Item",(ri=class extends EventEmitter{constructor(l,u,c){super();oe(this,"id");oe(this,"renderFn");oe(this,"removeFn");this.id=l+ri.getNextId(),this.renderFn=u,this.removeFn=c}static getNextId(){return this.GlobalId++}render(){return this.renderFn()}remove(){this.removeFn(this)}rerender(){this.emit("rerender",null)}},oe(ri,"GlobalId",0),ri));let ReactRenderStorage=Zs;const ReactNodeStopEventCn="prosemirror-stop-event";class ReactNodeView{constructor(e,s){oe(this,"dom");oe(this,"node");oe(this,"view");oe(this,"serializer");oe(this,"renderItem");oe(this,"getPos");const{getPos:a,node:l,serializer:u,view:c,options:d}=s;this.node=l,this.dom=d!=null&&d.isInline?document.createElement("span"):document.createElement("div"),this.dom.contentEditable="false",this.dom.classList.add("react-node-container");const h=document.createElement(d!=null&&d.isInline?"span":"div");h.classList.add("react-node-wrapper"),d!=null&&d.reactNodeWrapperCn&&h.classList.add(d==null?void 0:d.reactNodeWrapperCn),this.dom.appendChild(h),this.serializer=u,this.view=c,this.getPos=a,this.renderItem=getReactRendererFromState(c.state).createItem(`${e.displayName||this.node.type.name}-view`,()=>jsxRuntimeExports.jsx(Portal,{container:h,children:jsxRuntimeExports.jsx(e,{dom:h,view:this.view,updateAttributes:this.updateAttributes.bind(this),node:this.node,getPos:this.getPos.bind(this),serializer:this.serializer,extensionOptions:d==null?void 0:d.extensionOptions})}))}update(e){return e.type!==this.node.type?!1:(this.node===e||(this.node=e,this.renderItem.rerender()),!0)}destroy(){this.renderItem.remove()}ignoreMutation(e){return!0}updateAttributes(e,s=[]){const a=this.getPos();if(a===void 0)return;const{tr:l}=this.view.state;l.setNodeMarkup(a,void 0,{...this.node.attrs,...e},s),this.view.dispatch(l)}stopEvent(e){const s=e.target;return["INPUT","BUTTON","SELECT","TEXTAREA"].includes(s.tagName)||s.classList.contains(ReactNodeStopEventCn)}}const reactNodeViewFactory=(o,e)=>({serializer:s})=>(a,l,u)=>new ReactNodeView(o,{node:a,view:l,getPos:u,serializer:s,options:e}),useNodeEditing=({nodeRef:o,view:e})=>{const s=useBooleanState(!1),[,,a,l]=s;return reactExports.useEffect(()=>{const{current:u}=o;return u==null||u.addEventListener("dblclick",l),e.dom.addEventListener("focus",a),()=>{u==null||u.removeEventListener("dblclick",l),e.dom.removeEventListener("focus",a)}},[e.dom,l,a,o.current]),s},useNodeHovered=o=>{const[e,s,a]=useBooleanState(!1);return reactExports.useEffect(()=>{const{current:l}=o;return l==null||l.addEventListener("mouseenter",s),l==null||l.addEventListener("mouseleave",a),()=>{l==null||l.removeEventListener("mouseenter",s),l==null||l.removeEventListener("mouseleave",a)}},[o.current,s,a]),e},REFLOW_EVENTS=new Set(["resize","scroll","touchstart","touchmove","touchend","pageshow","load","orientationchange"]);function isElementInViewport(o){const e=o.ownerDocument,s=o.getBoundingClientRect();return s.top>=0&&s.left>=0&&s.bottom<=(window.innerHeight||e.documentElement.clientHeight)&&s.right<=(window.innerWidth||e.documentElement.clientWidth)}function areElementsIntersecting(o,e){const s=o.getBoundingClientRect(),a=e.getBoundingClientRect();return!(s.right<a.left||s.left>a.right||s.bottom<a.top||s.top>a.bottom)}function useSticky(o){const[e,s]=reactExports.useState(!1),a=useLatest(e);return useEffectOnce(()=>{let l=null;c();for(const d of REFLOW_EVENTS)window.addEventListener(d,u,!0);return()=>{l!==null&&cancelAnimationFrame(l);for(const d of REFLOW_EVENTS)window.removeEventListener(d,u,!0)};function u(){l!==null&&cancelAnimationFrame(l),l=requestAnimationFrame(c)}function c(){if(l=null,!o.current)return;const d=o.current.getBoundingClientRect().top,h=parseInt(getComputedStyle(o.current).top,10),p=d<=h;p&&!a.current?s(!0):!p&&a.current&&s(!1)}}),e}const DEFAULT_OFFSET=10;function getTargetZIndex(o,e=DEFAULT_OFFSET){const s=document.querySelector(`[data-layout="${o}"]`);if(!s)return;const a=window.getComputedStyle(s),l=parseInt(a.zIndex,10);if(!(!Number.isFinite(l)||l<=0))return l+e}const events=new Set(["resize","scroll","touchstart","touchmove","touchend","pageshow","load","orientationchange"]);function useTargetZIndex(o,e=10){const[s,a]=reactExports.useState(()=>getTargetZIndex(o,e)),l=useLatest(s);return useEffectOnce(()=>{let u=null;d();for(const h of events)window.addEventListener(h,c,!0);return()=>{u!==null&&cancelAnimationFrame(u);for(const h of events)window.removeEventListener(h,c,!0)};function c(){u!==null&&cancelAnimationFrame(u),u=requestAnimationFrame(d)}function d(){u=null;const h=getTargetZIndex(o,e);h!==l.current&&a(h)}}),s}const b$I=cn("preview-tooltip"),PreviewTooltip=({preview:o,children:e,disabled:s})=>!o||s?e:jsxRuntimeExports.jsx(Tooltip,{placement:["right","left"],className:b$I(),openDelay:ToolbarTooltipDelay.Open,closeDelay:ToolbarTooltipDelay.Close,content:jsxRuntimeExports.jsx("div",{className:b$I("content"),children:o}),children:e}),b$H=cn("toolbar-list-button");function ToolbarListButton({className:o,editor:e,focus:s,onClick:a,icon:l,title:u,withArrow:c,data:d,alwaysActive:h,replaceActiveIcon:p,qa:m,qaMenu:g,qaActionDisabledPopover:y="g-md-toolbar-action-disabled-hint",disableHotkey:A,disablePreview:T,disableTooltip:E}){const[v,_]=useElementState(),[w,,R,k]=useBooleanState(!1),[I,P]=reactExports.useState(),N=useTargetZIndex(LAYOUT.STICKY_TOOLBAR),L=h?!1:d.every(Y=>!Y.isEnable(e)),Q=L?!1:w,j=w&&!Q;if(reactExports.useEffect(()=>{j&&R()},[R,j]),d.length===0)return null;const F=d.find(Y=>Y.isActive(e)&&!Y.doNotActivateList),V=h?!1:!!F;p&&V&&F&&(l=F.icon);const J=[jsxRuntimeExports.jsx(Icon,{data:l.data,size:l.size??16},1)];c&&(J.push(jsxRuntimeExports.jsx(reactExports.Fragment,{children:""},2)),J.push(jsxRuntimeExports.jsx(Icon,{data:ChevronDown,size:16},3)));const z=isFunction(u)?u():u;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ToolbarButtonView,{qa:m,ref:_,active:V,enabled:!L,title:u,className:b$H({arrow:c},[o]),onClick:()=>{I?P(void 0):k()},disableTooltip:E||Q,children:J}),jsxRuntimeExports.jsx(Popup,{anchorElement:v,open:Q,onOpenChange:R,zIndex:typeof N=="number"?N:void 0,children:jsxRuntimeExports.jsx(Menu,{size:"l",className:b$H("menu"),qa:g,"data-toolbar-menu-for":z,children:d.map(Y=>{const{id:fe,title:de,icon:X,hotkey:he,isActive:ue,isEnable:G,exec:K,hint:q,hintWhenDisabled:te,preview:Z}=Y,ce=isFunction(de)?de():de,be=isFunction(q)?q():q,Ee=!G(e),Se=te===!1||!Ee,ke=typeof te=="string"?te:typeof te=="function"?te():i18n$e("toolbar_action_disabled"),Ae=()=>{R(),isPopupItem(Y)?P(Y):(P(void 0),s(),K(e),a==null||a(fe))};return jsxRuntimeExports.jsx(Popover$1,{className:b$H("action-disabled-popover"),content:jsxRuntimeExports.jsx("div",{className:b$H("action-disabled-tooltip"),children:ke}),placement:"left",modal:!1,disabled:Se,qa:y,children:(Te,xe)=>jsxRuntimeExports.jsx(PreviewTooltip,{preview:Z,disabled:T,children:jsxRuntimeExports.jsx(Menu.Item,{ref:xe,active:ue(e),disabled:!G(e),onClick:Ae,iconStart:jsxRuntimeExports.jsx(Icon,{data:X.data,size:X.size??16}),extraProps:{...Te,"aria-label":ce},children:jsxRuntimeExports.jsxs("div",{className:b$H("item"),children:[ce,!A&&jsxRuntimeExports.jsxs("div",{className:b$H("extra"),children:[he&&jsxRuntimeExports.jsx(Hotkey,{value:he}),be&&jsxRuntimeExports.jsx(HelpMark,{className:b$H("hint"),popoverProps:{modal:!1},children:be})]})]})},fe)})},fe)}).filter(Boolean)})}),I?I.renderPopup({...I,editor:e,focus:s,onClick:a,anchorElement:v,hide:()=>P(void 0)}):null]})}function isPopupItem(o){return!!o.renderPopup}const b$G=cn("toolbar-group");function ToolbarButtonGroup({className:o,editor:e,data:s,focus:a,onClick:l,disableTooltip:u,disablePreview:c,disableHotkey:d}){return jsxRuntimeExports.jsx("div",{className:b$G(null,[o]),children:s.map(h=>{if(h.type===ToolbarDataType.SingleButton)return reactExports.createElement(ToolbarButton,{...h,key:h.id,editor:e,focus:a,onClick:l,className:b$G(h.type,{id:h.id},[h.className]),disableTooltip:u});if(h.type===ToolbarDataType.ButtonPopup)return reactExports.createElement(ToolbarButtonPopup,{...h,key:h.id,editor:e,focus:a,onClick:l,className:b$G(h.type,{id:h.id},h.className),disableTooltip:u});if(h.type===ToolbarDataType.ListButton)return reactExports.createElement(ToolbarListButton,{...h,qaMenu:"g-md-toolbar-menu",key:h.id,editor:e,focus:a,onClick:l,className:b$G(h.type,{id:h.id},[h.className]),disablePreview:c,disableHotkey:d,disableTooltip:u});if(h.type===ToolbarDataType.ReactComponent){const p=h.component;return reactExports.createElement(p,{...h.props,key:h.id,editor:e,focus:a,onClick:l,className:b$G(h.type,{id:h.id},[h.className])})}return h.type===ToolbarDataType.ReactNode?jsxRuntimeExports.jsx(reactExports.Fragment,{children:h.content},h.id):h.type===ToolbarDataType.ReactNodeFn?jsxRuntimeExports.jsx(reactExports.Fragment,{children:h.content(e)},h.id):null})})}const b$F=cn("toolbar");function Toolbar({editor:o,data:e,className:s,focus:a,onClick:l,display:u,qa:c,disableHotkey:d,disablePreview:h,disableTooltip:p}){return jsxRuntimeExports.jsx("div",{className:b$F({display:u},[s]),"data-qa":c,children:e.map((m,g)=>{const y=g===e.length-1;return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ToolbarButtonGroup,{data:m,editor:o,focus:a,onClick:l,className:b$F("group"),disableHotkey:d,disablePreview:h,disableTooltip:p}),y||jsxRuntimeExports.jsx("div",{className:b$F("group-separator")})]},g)})})}const H_GAP=17,B_WIDTH=28,B_WITH_ARROW_WIDTH=42,BG_H_GAP=2,B_DOTS_WIDTH=B_WIDTH,B_DOTS_LEFT_GAP=8,dotsWidth=B_DOTS_LEFT_GAP+B_DOTS_WIDTH;function shrinkToolbarData({availableWidth:o,data:e,hiddenActions:s=[]}){const a=[],l=[];let u=0;const c=e.length-1,d=(p,m)=>p===c&&m===e[c].length-1;let h=!1;return e.forEach((p,m)=>{const g=[];p.forEach((y,A)=>{u+=getItemWidth(y,m,A,p.length),h||(!s.length&&d(m,A)?u>o:u+dotsWidth>o)?(h=!0,y.type===ToolbarDataType.SingleButton||y.type===ToolbarDataType.ButtonPopup?l.push(y):y.type===ToolbarDataType.ListButton&&l.push(...y.data)):g.push(p[A])}),g.length&&a.push(g)}),l.push(...s),{data:a,dots:l.length?l:void 0}}function getItemWidth(o,e,s,a){let l=0;return e>0&&s===0&&(l+=H_GAP),s>0&&s<a&&(l+=BG_H_GAP),o.type===ToolbarDataType.SingleButton||o.type===ToolbarDataType.ButtonPopup?B_WIDTH+l:o.type===ToolbarDataType.ListButton?B_WITH_ARROW_WIDTH+l:(o.width||0)+l}const b$E=cn("flex-toolbar");function FlexToolbar(o){useRenderTime(y=>{logger.metrics({component:"toolbar",event:"render",duration:y})});const{data:e,className:s,hiddenActions:a,disableTooltip:l,disablePreview:u,disableHotkey:c,display:d="shrink"}=o,[h,{width:p}]=useMeasure$1(),{data:m,dots:g}=reactExports.useMemo(()=>{const y=e.reduce((T,E)=>[...T,...E.map(v=>v.type===ToolbarDataType.ListButton?v.data.map(_=>_.id):v.id).flat()],[]),A=a==null?void 0:a.filter(T=>!y.includes(T.id));return d==="scroll"?{data:e,dots:A!=null&&A.length?A:void 0}:shrinkToolbarData({data:e,availableWidth:p,hiddenActions:A})},[e,d,a,p]);return jsxRuntimeExports.jsx("div",{ref:h,className:b$E(null,[s]),children:jsxRuntimeExports.jsxs("div",{className:b$E("container"),children:[jsxRuntimeExports.jsx(Toolbar,{...o,data:m,className:b$E("bar")}),(g==null?void 0:g.length)&&jsxRuntimeExports.jsx(ToolbarListButton,{qa:"g-md-toolbar-more-action",qaMenu:"g-md-toolbar-additional",data:g,icon:{data:Ellipsis},title:o.dotsTitle,editor:o.editor,focus:o.focus,onClick:o.onClick,className:b$E("dots"),alwaysActive:!0,disableTooltip:l,disableHotkey:u,disablePreview:c})]})})}const deleteSelection=(o,e)=>o.selection.empty?!1:(e&&e(o.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(o,e){let{$cursor:s}=o.selection;return!s||(e?!e.endOfTextblock("backward",o):s.parentOffset>0)?null:s}const joinBackward=(o,e,s)=>{let a=atBlockStart(o,s);if(!a)return!1;let l=findCutBefore(a);if(!l){let c=a.blockRange(),d=c&&liftTarget(c);return d==null?!1:(e&&e(o.tr.lift(c,d).scrollIntoView()),!0)}let u=l.nodeBefore;if(deleteBarrier(o,l,e,-1))return!0;if(a.parent.content.size==0&&(textblockAt(u,"end")||NodeSelection.isSelectable(u)))for(let c=a.depth;;c--){let d=replaceStep(o.doc,a.before(c),a.after(c),Slice.empty);if(d&&d.slice.size<d.to-d.from){if(e){let h=o.tr.step(d);h.setSelection(textblockAt(u,"end")?Selection$1.findFrom(h.doc.resolve(h.mapping.map(l.pos,-1)),-1):NodeSelection.create(h.doc,l.pos-u.nodeSize)),e(h.scrollIntoView())}return!0}if(c==1||a.node(c-1).childCount>1)break}return u.isAtom&&l.depth==a.depth-1?(e&&e(o.tr.delete(l.pos-u.nodeSize,l.pos).scrollIntoView()),!0):!1};function textblockAt(o,e,s=!1){for(let a=o;a;a=e=="start"?a.firstChild:a.lastChild){if(a.isTextblock)return!0;if(s&&a.childCount!=1)return!1}return!1}const selectNodeBackward=(o,e,s)=>{let{$head:a,empty:l}=o.selection,u=a;if(!l)return!1;if(a.parent.isTextblock){if(s?!s.endOfTextblock("backward",o):a.parentOffset>0)return!1;u=findCutBefore(a)}let c=u&&u.nodeBefore;return!c||!NodeSelection.isSelectable(c)?!1:(e&&e(o.tr.setSelection(NodeSelection.create(o.doc,u.pos-c.nodeSize)).scrollIntoView()),!0)};function findCutBefore(o){if(!o.parent.type.spec.isolating)for(let e=o.depth-1;e>=0;e--){if(o.index(e)>0)return o.doc.resolve(o.before(e+1));if(o.node(e).type.spec.isolating)break}return null}function atBlockEnd(o,e){let{$cursor:s}=o.selection;return!s||(e?!e.endOfTextblock("forward",o):s.parentOffset<s.parent.content.size)?null:s}const joinForward=(o,e,s)=>{let a=atBlockEnd(o,s);if(!a)return!1;let l=findCutAfter(a);if(!l)return!1;let u=l.nodeAfter;if(deleteBarrier(o,l,e,1))return!0;if(a.parent.content.size==0&&(textblockAt(u,"start")||NodeSelection.isSelectable(u))){let c=replaceStep(o.doc,a.before(),a.after(),Slice.empty);if(c&&c.slice.size<c.to-c.from){if(e){let d=o.tr.step(c);d.setSelection(textblockAt(u,"start")?Selection$1.findFrom(d.doc.resolve(d.mapping.map(l.pos)),1):NodeSelection.create(d.doc,d.mapping.map(l.pos))),e(d.scrollIntoView())}return!0}}return u.isAtom&&l.depth==a.depth-1?(e&&e(o.tr.delete(l.pos,l.pos+u.nodeSize).scrollIntoView()),!0):!1},selectNodeForward=(o,e,s)=>{let{$head:a,empty:l}=o.selection,u=a;if(!l)return!1;if(a.parent.isTextblock){if(s?!s.endOfTextblock("forward",o):a.parentOffset<a.parent.content.size)return!1;u=findCutAfter(a)}let c=u&&u.nodeAfter;return!c||!NodeSelection.isSelectable(c)?!1:(e&&e(o.tr.setSelection(NodeSelection.create(o.doc,u.pos)).scrollIntoView()),!0)};function findCutAfter(o){if(!o.parent.type.spec.isolating)for(let e=o.depth-1;e>=0;e--){let s=o.node(e);if(o.index(e)+1<s.childCount)return o.doc.resolve(o.after(e+1));if(s.type.spec.isolating)break}return null}const lift=(o,e)=>{let{$from:s,$to:a}=o.selection,l=s.blockRange(a),u=l&&liftTarget(l);return u==null?!1:(e&&e(o.tr.lift(l,u).scrollIntoView()),!0)},newlineInCode=(o,e)=>{let{$head:s,$anchor:a}=o.selection;return!s.parent.type.spec.code||!s.sameParent(a)?!1:(e&&e(o.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt(o){for(let e=0;e<o.edgeCount;e++){let{type:s}=o.edge(e);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}const exitCode=(o,e)=>{let{$head:s,$anchor:a}=o.selection;if(!s.parent.type.spec.code||!s.sameParent(a))return!1;let l=s.node(-1),u=s.indexAfter(-1),c=defaultBlockAt(l.contentMatchAt(u));if(!c||!l.canReplaceWith(u,u,c))return!1;if(e){let d=s.after(),h=o.tr.replaceWith(d,d,c.createAndFill());h.setSelection(Selection$1.near(h.doc.resolve(d),1)),e(h.scrollIntoView())}return!0},createParagraphNear=(o,e)=>{let s=o.selection,{$from:a,$to:l}=s;if(s instanceof AllSelection||a.parent.inlineContent||l.parent.inlineContent)return!1;let u=defaultBlockAt(l.parent.contentMatchAt(l.indexAfter()));if(!u||!u.isTextblock)return!1;if(e){let c=(!a.parentOffset&&l.index()<l.parent.childCount?a:l).pos,d=o.tr.insert(c,u.createAndFill());d.setSelection(TextSelection.create(d.doc,c+1)),e(d.scrollIntoView())}return!0},liftEmptyBlock=(o,e)=>{let{$cursor:s}=o.selection;if(!s||s.parent.content.size)return!1;if(s.depth>1&&s.after()!=s.end(-1)){let u=s.before();if(canSplit(o.doc,u))return e&&e(o.tr.split(u).scrollIntoView()),!0}let a=s.blockRange(),l=a&&liftTarget(a);return l==null?!1:(e&&e(o.tr.lift(a,l).scrollIntoView()),!0)};function splitBlockAs(o){return(e,s)=>{let{$from:a,$to:l}=e.selection;if(e.selection instanceof NodeSelection&&e.selection.node.isBlock)return!a.parentOffset||!canSplit(e.doc,a.pos)?!1:(s&&s(e.tr.split(a.pos).scrollIntoView()),!0);if(!a.depth)return!1;let u=[],c,d,h=!1,p=!1;for(let A=a.depth;;A--)if(a.node(A).isBlock){h=a.end(A)==a.pos+(a.depth-A),p=a.start(A)==a.pos-(a.depth-A),d=defaultBlockAt(a.node(A-1).contentMatchAt(a.indexAfter(A-1))),u.unshift(h&&d?{type:d}:null),c=A;break}else{if(A==1)return!1;u.unshift(null)}let m=e.tr;(e.selection instanceof TextSelection||e.selection instanceof AllSelection)&&m.deleteSelection();let g=m.mapping.map(a.pos),y=canSplit(m.doc,g,u.length,u);if(y||(u[0]=d?{type:d}:null,y=canSplit(m.doc,g,u.length,u)),!y)return!1;if(m.split(g,u.length,u),!h&&p&&a.node(c).type!=d){let A=m.mapping.map(a.before(c)),T=m.doc.resolve(A);d&&a.node(c-1).canReplaceWith(T.index(),T.index()+1,d)&&m.setNodeMarkup(m.mapping.map(a.before(c)),d)}return s&&s(m.scrollIntoView()),!0}}const splitBlock=splitBlockAs(),selectParentNode=(o,e)=>{let{$from:s,to:a}=o.selection,l,u=s.sharedDepth(a);return u==0?!1:(l=s.before(u),e&&e(o.tr.setSelection(NodeSelection.create(o.doc,l))),!0)},selectAll$1=(o,e)=>(e&&e(o.tr.setSelection(new AllSelection(o.doc))),!0);function joinMaybeClear(o,e,s){let a=e.nodeBefore,l=e.nodeAfter,u=e.index();return!a||!l||!a.type.compatibleContent(l.type)?!1:!a.content.size&&e.parent.canReplace(u-1,u)?(s&&s(o.tr.delete(e.pos-a.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(u,u+1)||!(l.isTextblock||canJoin(o.doc,e.pos))?!1:(s&&s(o.tr.join(e.pos).scrollIntoView()),!0)}function deleteBarrier(o,e,s,a){let l=e.nodeBefore,u=e.nodeAfter,c,d,h=l.type.spec.isolating||u.type.spec.isolating;if(!h&&joinMaybeClear(o,e,s))return!0;let p=!h&&e.parent.canReplace(e.index(),e.index()+1);if(p&&(c=(d=l.contentMatchAt(l.childCount)).findWrapping(u.type))&&d.matchType(c[0]||u.type).validEnd){if(s){let A=e.pos+u.nodeSize,T=Fragment.empty;for(let _=c.length-1;_>=0;_--)T=Fragment.from(c[_].create(null,T));T=Fragment.from(l.copy(T));let E=o.tr.step(new ReplaceAroundStep(e.pos-1,A,e.pos,A,new Slice(T,1,0),c.length,!0)),v=E.doc.resolve(A+2*c.length);v.nodeAfter&&v.nodeAfter.type==l.type&&canJoin(E.doc,v.pos)&&E.join(v.pos),s(E.scrollIntoView())}return!0}let m=u.type.spec.isolating||a>0&&h?null:Selection$1.findFrom(e,1),g=m&&m.$from.blockRange(m.$to),y=g&&liftTarget(g);if(y!=null&&y>=e.depth)return s&&s(o.tr.lift(g,y).scrollIntoView()),!0;if(p&&textblockAt(u,"start",!0)&&textblockAt(l,"end")){let A=l,T=[];for(;T.push(A),!A.isTextblock;)A=A.lastChild;let E=u,v=1;for(;!E.isTextblock;E=E.firstChild)v++;if(A.canReplace(A.childCount,A.childCount,E.content)){if(s){let _=Fragment.empty;for(let R=T.length-1;R>=0;R--)_=Fragment.from(T[R].copy(_));let w=o.tr.step(new ReplaceAroundStep(e.pos-T.length,e.pos+u.nodeSize,e.pos+v,e.pos+u.nodeSize-v,new Slice(_,T.length,0),0,!0));s(w.scrollIntoView())}return!0}}return!1}function selectTextblockSide(o){return function(e,s){let a=e.selection,l=o<0?a.$from:a.$to,u=l.depth;for(;l.node(u).isInline;){if(!u)return!1;u--}return l.node(u).isTextblock?(s&&s(e.tr.setSelection(TextSelection.create(e.doc,o<0?l.start(u):l.end(u)))),!0):!1}}const selectTextblockStart=selectTextblockSide(-1),selectTextblockEnd=selectTextblockSide(1);function wrapIn(o,e=null){return function(s,a){let{$from:l,$to:u}=s.selection,c=l.blockRange(u),d=c&&findWrapping(c,o,e);return d?(a&&a(s.tr.wrap(c,d).scrollIntoView()),!0):!1}}function setBlockType(o,e=null){return function(s,a){let l=!1;for(let u=0;u<s.selection.ranges.length&&!l;u++){let{$from:{pos:c},$to:{pos:d}}=s.selection.ranges[u];s.doc.nodesBetween(c,d,(h,p)=>{if(l)return!1;if(!(!h.isTextblock||h.hasMarkup(o,e)))if(h.type==o)l=!0;else{let m=s.doc.resolve(p),g=m.index();l=m.parent.canReplaceWith(g,g+1,o)}})}if(!l)return!1;if(a){let u=s.tr;for(let c=0;c<s.selection.ranges.length;c++){let{$from:{pos:d},$to:{pos:h}}=s.selection.ranges[c];u.setBlockType(d,h,o,e)}a(u.scrollIntoView())}return!0}}function markApplies(o,e,s,a){for(let l=0;l<e.length;l++){let{$from:u,$to:c}=e[l],d=u.depth==0?o.inlineContent&&o.type.allowsMarkType(s):!1;if(o.nodesBetween(u.pos,c.pos,(h,p)=>{if(d)return!1;d=h.inlineContent&&h.type.allowsMarkType(s)}),d)return!0}return!1}function toggleMark(o,e=null,s){return function(a,l){let{empty:u,$cursor:c,ranges:d}=a.selection;if(u&&!c||!markApplies(a.doc,d,o))return!1;if(l)if(c)o.isInSet(a.storedMarks||c.marks())?l(a.tr.removeStoredMark(o)):l(a.tr.addStoredMark(o.create(e)));else{let h,p=a.tr;h=!d.some(m=>a.doc.rangeHasMark(m.$from.pos,m.$to.pos,o));for(let m=0;m<d.length;m++){let{$from:g,$to:y}=d[m];if(!h)p.removeMark(g.pos,y.pos,o);else{let A=g.pos,T=y.pos,E=g.nodeAfter,v=y.nodeBefore,_=E&&E.isText?/^\s*/.exec(E.text)[0].length:0,w=v&&v.isText?/\s*$/.exec(v.text)[0].length:0;A+_<T&&(A+=_,T-=w),p.addMark(A,T,o.create(e))}}l(p.scrollIntoView())}return!0}}function chainCommands(...o){return function(e,s,a){for(let l=0;l<o.length;l++)if(o[l](e,s,a))return!0;return!1}}let backspace$1=chainCommands(deleteSelection,joinBackward,selectNodeBackward),del=chainCommands(deleteSelection,joinForward,selectNodeForward);const pcBaseKeymap={Enter:chainCommands(newlineInCode,createParagraphNear,liftEmptyBlock,splitBlock),"Mod-Enter":exitCode,Backspace:backspace$1,"Mod-Backspace":backspace$1,"Shift-Backspace":backspace$1,Delete:del,"Mod-Delete":del,"Mod-a":selectAll$1},macBaseKeymap={"Ctrl-h":pcBaseKeymap.Backspace,"Alt-Backspace":pcBaseKeymap["Mod-Backspace"],"Ctrl-d":pcBaseKeymap.Delete,"Ctrl-Alt-Backspace":pcBaseKeymap["Mod-Delete"],"Alt-Delete":pcBaseKeymap["Mod-Delete"],"Alt-d":pcBaseKeymap["Mod-Delete"],"Ctrl-a":selectTextblockStart,"Ctrl-e":selectTextblockEnd};for(let o in pcBaseKeymap)macBaseKeymap[o]=pcBaseKeymap[o];const mac=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,baseKeymap=mac?macBaseKeymap:pcBaseKeymap;var removeParentNodeOfType=o=>e=>{const s=findParentNodeOfType(o)(e.selection);return s?removeNodeAtPos(s.pos)(e):e},replaceParentNodeOfType=(o,e)=>s=>{Array.isArray(o)||(o=[o]);for(let a=0,l=o.length;a<l;a++){const u=findParentNodeOfType(o[a])(s.selection);if(u){const c=replaceNodeAtPos(u.pos,e)(s);if(c!==s)return c}}return s},setTextSelection=(o,e=1)=>s=>{const a=Selection$1.findFrom(s.doc.resolve(o),e,!0);return a?s.setSelection(a):s},isNodeSelection$1=o=>o instanceof NodeSelection,equalNodeType=(o,e)=>Array.isArray(o)&&o.indexOf(e.type)>-1||e.type===o,cloneTr=o=>Object.assign(Object.create(o),o).setTime(Date.now()),replaceNodeAtPos=(o,e)=>s=>{const a=s.doc.nodeAt(o),l=s.doc.resolve(o);if(!a)return s;if(canReplace(l,e)){s=s.replaceWith(o,o+a.nodeSize,e);const u=s.selection.$from.pos-1;return s=setTextSelection(Math.max(u,0),-1)(s),s=setTextSelection(s.selection.$from.start())(s),cloneTr(s)}return s},canReplace=(o,e)=>{const s=o.node(o.depth);return s&&s.type.validContent(e instanceof Fragment?e:Fragment.from(e))},removeNodeAtPos=o=>e=>{const s=e.doc.nodeAt(o);return s?cloneTr(e.delete(o,o+s.nodeSize)):e},findParentNode=o=>({$from:e,$to:s},a=!1)=>{if(a&&!e.sameParent(s)){let l=Math.min(e.depth,s.depth);for(;l>=0;){const u=e.node(l);if(s.node(l)===u&&o(u))return{pos:l>0?e.before(l):0,start:e.start(l),depth:l,node:u};l=l-1}return}return findParentNodeClosestToPos(e,o)},findParentNodeClosestToPos=(o,e)=>{for(let s=o.depth;s>0;s--){const a=o.node(s);if(e(a))return{pos:s>0?o.before(s):0,start:o.start(s),depth:s,node:a}}},findParentDomRef=(o,e)=>s=>{const a=findParentNode(o)(s);if(a)return findDomRefAtPos(a.pos,e)},hasParentNode=o=>e=>!!findParentNode(o)(e),findParentNodeOfType=o=>e=>findParentNode(s=>equalNodeType(o,s))(e),findParentNodeOfTypeClosestToPos=(o,e)=>findParentNodeClosestToPos(o,s=>equalNodeType(e,s)),hasParentNodeOfType=o=>e=>hasParentNode(s=>equalNodeType(o,s))(e),findParentDomRefOfType=(o,e)=>s=>findParentDomRef(a=>equalNodeType(o,a),e)(s),findSelectedNodeOfType=o=>e=>{if(isNodeSelection$1(e)){const{node:s,$from:a}=e;if(equalNodeType(o,s))return{node:s,start:a.start(),pos:a.pos,depth:a.depth}}},findDomRefAtPos=(o,e)=>{const s=e(o),a=s.node.childNodes[s.offset];return s.node.nodeType===Node.TEXT_NODE&&s.node.parentNode?s.node.parentNode:!a||a.nodeType===Node.TEXT_NODE?s.node:a},flatten$1=(o,e=!0)=>{if(!o)throw new Error('Invalid "node" parameter');const s=[];return o.descendants((a,l)=>{if(s.push({node:a,pos:l}),!e)return!1}),s},findChildren=(o,e,s=!0)=>{if(o){if(!e)throw new Error('Invalid "predicate" parameter')}else throw new Error('Invalid "node" parameter');return flatten$1(o,s).filter(a=>e(a.node))},findChildrenByType=(o,e,s=!0)=>findChildren(o,a=>a.type===e,s),findChildrenByMark=(o,e,s=!0)=>findChildren(o,a=>!!e.isInSet(a.marks),s);function withLogAction(o,e){return(...s)=>{const a=e(...s);if(a){const[l]=s;getLoggerFromState(l).action({action:o,source:"keymap"}),globalLogger.action({action:o,source:"keymap",mode:"wysiwyg"})}return a}}function findFirstTextblockChild(o){if(o instanceof Node$2&&(!o.isBlock||o.isAtom))return null;for(const e of getChildrenOfNode(o)){if(e.node.isTextblock)return e;const s=findFirstTextblockChild(e.node);if(s)return{node:s.node,offset:e.offset+s.offset}}return null}const isNodeEmpty=o=>{const e=findChildren(o,a=>!a.isText&&!a.isAtom&&a.content.size===0&&a.type.name==="paragraph"||a.isText&&!a.textContent,!0);let s=0;return o.descendants(()=>{s++}),e.length===s},isSelectableNode=o=>!(o.type.spec.selectable===!1||o.type.isText&&o.type.spec.selectable!==!0);function isCodeBlock(o){return o.isTextblock&&!!o.type.spec.code}function getChildrenOfNode(o){const e=[];return o.forEach((s,a,l)=>e.push({node:s,offset:a,index:l})),e}function getLastChildOfNode(o){const e=getChildrenOfNode(o);return e[e.length-1]}const isEmptyString=o=>{var e;return o.type.name==="paragraph"&&!o.content.size||o.childCount===1&&o.child(0).type.name==="text"&&((e=o.child(0).text)==null?void 0:e.trim())===""},nodeTypeFactory=o=>e=>e.nodes[o],markTypeFactory=o=>e=>e.marks[o];function isSameNodeType(o,e){const s=o instanceof Node$2?o.type:o,a=e instanceof Node$2?e.type:e;return s===a}var BaseNode$1;(function(o){o.Doc="doc",o.Text="text",o.Paragraph="paragraph"})(BaseNode$1||(BaseNode$1={}));const paragraphLineNumberAttr="data-line",pType=nodeTypeFactory(BaseNode$1.Paragraph),BaseSchemaSpecs=(o,e)=>{o.addNode(BaseNode$1.Doc,()=>({spec:{content:"block+"},fromMd:{tokenSpec:{name:BaseNode$1.Doc,type:"block",ignore:!0}},toMd:()=>{throw new Error("Unexpected toMd() call on doc node")}})).addNode(BaseNode$1.Text,()=>({spec:{group:"inline"},fromMd:{tokenSpec:{name:BaseNode$1.Text,type:"node",ignore:!0}},toMd:(s,a,l)=>{const{escapeText:u}=l.type.spec;s.text(a.text??"",u??!s.isAutolink)}})).addNode(BaseNode$1.Paragraph,()=>({spec:{attrs:{[paragraphLineNumberAttr]:{default:null}},content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(s){const a=s.attrs[paragraphLineNumberAttr];return["p",a===null?{}:{[paragraphLineNumberAttr]:a},0]},selectable:!0,placeholder:e.paragraphPlaceholder?{content:e.paragraphPlaceholder,alwaysVisible:!1}:void 0},fromMd:{tokenSpec:{name:BaseNode$1.Paragraph,type:"block",getAttrs(s){return Object.fromEntries(s.attrs||[])}}},toMd:(s,a,l)=>{if(e.preserveEmptyRows&&isEmptyString(a)){let u=!0;for(let c=0;c<l.content.childCount;c++){const d=l.content.child(c);(d.content.size!==0||d.type.name!=="paragraph")&&(u=!1)}u||(s.write(`&nbsp;
`),s.write(`
`))}else s.renderInline(a),s.closeBlock(a)}}))},pAction="toParagraph",toParagraph=(o,e)=>setBlockType(pType(o.schema))(o,e),BaseSchema=(o,e)=>{o.use(BaseSchemaSpecs,e);const{paragraphKey:s}=e;s&&o.addKeymap(({schema:a})=>({[s]:withLogAction("paragraph",setBlockType(pType(a)))})),o.addAction(pAction,({schema:a})=>{const l=pType(a),u=setBlockType(l),c=d=>hasParentNodeOfType(l)(d.selection);return{isActive:c,isEnable:chainCommands(c,u),run:u}})},CLASSNAME="g-md-editor",BaseStyles=(o,e)=>{const{attributes:s={}}=e;o.addPlugin(()=>new Plugin({props:{attributes:{...s,class:[CLASSNAME,s.class].filter(Boolean).join(" ")}}}))},BaseKeymap=o=>{o.addKeymap(()=>({Backspace:undoInputRule,"Mod-BracketLeft":lift,"Alt-Shift-Escape":selectParentNode}),o.Priority.Lowest).addKeymap(()=>baseKeymap,o.Priority.Lowest)},BaseInputRules=o=>{o.addInputRules(()=>({rules:[ellipsis]}))},addParagraphToStart=(o,e)=>{const{firstChild:s}=o.doc;if((s==null?void 0:s.type)===pType(o.schema)){if(e){const l=o.tr;l.setSelection(TextSelection.create(l.doc,1)),e(l.scrollIntoView())}return!0}return insertParagraph(0,o,e),!0},addParagraphToEnd=(o,e)=>{const{lastChild:s}=o.doc;if(!s)return!1;if(s.type===pType(o.schema)&&s.nodeSize===2){if(e){const a=o.doc.nodeSize-3,l=o.tr;l.setSelection(TextSelection.create(l.doc,a)),e(l.scrollIntoView())}return!0}return insertParagraph(o.doc.nodeSize-2,o,e),!0};function insertParagraph(o,e,s){if(!s)return;const a=e.tr;a.insert(o,pType(e.schema).create()),a.setSelection(TextSelection.create(a.doc,o+1)),s(a.scrollIntoView())}const startActionName="addEmptyDefaultTextblockToStartOfDocument",endActionName="addEmptyDefaultTextblockToEndOfDocument",ClicksOnEdges=o=>{o.addAction(startActionName,()=>({isEnable:addParagraphToStart,run:addParagraphToStart})),o.addAction(endActionName,()=>({isEnable:addParagraphToEnd,run:addParagraphToEnd})),o.addPlugin(()=>new Plugin({props:{handleClick(e,s,a){if(a.target!==e.dom)return!1;const{firstChild:l,lastChild:u}=a.target;if(!l||!u)return!1;const c=a.target.getBoundingClientRect(),d=l.getBoundingClientRect(),h=u.getBoundingClientRect(),p=d.top-c.y,m=h.bottom-c.y;return a.offsetY<p?addParagraphToStart(e.state,e.dispatch):a.offsetY>m?addParagraphToEnd(e.state,e.dispatch):!1}}}))};function tryCatch(o){try{return{success:!0,result:o()}}catch(e){return console.error(e),{success:!1,error:e}}}const isTextSelection=o=>o instanceof TextSelection,isNodeSelection=o=>o instanceof NodeSelection,isWholeSelection=o=>o instanceof AllSelection,get$Cursor=o=>isTextSelection(o)?o.$cursor:null;function get$CursorAtBlockStart(o){const e=get$Cursor(o);return!e||e.parentOffset>0||e.parent.isInline?null:e}function dedent(o){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];var a=Array.from(typeof o=="string"?[o]:o);a[a.length-1]=a[a.length-1].replace(/\r?\n([\t ]*)$/,"");var l=a.reduce(function(d,h){var p=h.match(/\n([\t ]+|(?!\s).)/g);return p?d.concat(p.map(function(m){var g,y;return(y=(g=m.match(/[\t ]/g))===null||g===void 0?void 0:g.length)!==null&&y!==void 0?y:0})):d},[]);if(l.length){var u=new RegExp(`
[	 ]{`+Math.min.apply(Math,l)+"}","g");a=a.map(function(d){return d.replace(u,`
`)})}a[0]=a[0].replace(/^\r?\n/,"");var c=a[0];return e.forEach(function(d,h){var p=c.match(/(?:^|\n)( *)$/),m=p?p[1]:"",g=d;typeof d=="string"&&d.includes(`
`)&&(g=String(d).split(`
`).map(function(y,A){return A===0?y:""+m+y}).join(`
`)),c+=g+a[h+1]}),c}var ListNode;(function(o){o.ListItem="list_item",o.BulletList="bullet_list",o.OrderedList="ordered_list"})(ListNode||(ListNode={}));var ListsAttr;(function(o){o.Tight="tight",o.Order="order",o.Markup="markup",o.Line="data-line"})(ListsAttr||(ListsAttr={}));const Markup={bullet:{values:["-","+","*"],default:"*"},ordered:{values:[".",")"],default:"."}},parserTokens$8={[ListNode.ListItem]:{name:ListNode.ListItem,type:"block",getAttrs:o=>({[ListsAttr.Markup]:o.markup,[ListsAttr.Line]:o.attrGet("data-line")})},[ListNode.BulletList]:{name:ListNode.BulletList,type:"block",getAttrs:(o,e,s)=>({[ListsAttr.Tight]:listIsTight(e,s),[ListsAttr.Markup]:o.markup})},[ListNode.OrderedList]:{name:ListNode.OrderedList,type:"block",getAttrs:(o,e,s)=>({[ListsAttr.Order]:Number(o.attrGet("start"))||1,[ListsAttr.Tight]:listIsTight(e,s),[ListsAttr.Markup]:o.markup})}};function listIsTight(o,e){for(;++e<o.length;)if(o[e].type!=="list_item_open")return o[e].hidden;return!1}const schemaSpecs$2={[ListNode.ListItem]:{attrs:{[ListsAttr.Markup]:{default:null},[ListsAttr.Line]:{default:null}},content:"(paragraph|block)+",defining:!0,parseDOM:[{tag:"li"}],toDOM(o){return["li",o.attrs,0]},selectable:!0,allowSelection:!1,disableGapCursor:!0,complex:"leaf"},[ListNode.BulletList]:{content:`${ListNode.ListItem}+`,group:"block",attrs:{[ListsAttr.Tight]:{default:!0},[ListsAttr.Markup]:{default:Markup.bullet.default}},parseDOM:[{tag:"ul",getAttrs:o=>({[ListsAttr.Tight]:o.hasAttribute("data-tight")})}],toDOM(o){return["ul",{"data-tight":o.attrs[ListsAttr.Tight]?"true":null},0]},selectable:!1,allowSelection:!1,complex:"root"},[ListNode.OrderedList]:{attrs:{[ListsAttr.Order]:{default:1},[ListsAttr.Tight]:{default:!0},[ListsAttr.Markup]:{default:Markup.ordered.default}},content:`${ListNode.ListItem}+`,group:"block",parseDOM:[{tag:"ol",getAttrs(o){return{[ListsAttr.Order]:o.hasAttribute("start")?Number(o.getAttribute("start")):1,[ListsAttr.Tight]:o.hasAttribute("data-tight")}}}],toDOM(o){return["ol",{start:o.attrs[ListsAttr.Order]===1?null:o.attrs[ListsAttr.Order],"data-tight":o.attrs[ListsAttr.Tight]?"true":null},0]},selectable:!1,allowSelection:!1,complex:"root"}},serializerTokens$7={[ListNode.ListItem]:(o,e)=>{o.renderContent(e)},[ListNode.BulletList]:(o,e)=>{o.renderList(e,"  ",(s,a)=>getMarkup$2({item:a,list:e,type:"bullet"})+" ")},[ListNode.OrderedList]:(o,e)=>{const s=e.attrs[ListsAttr.Order]||1,a=String(s+e.childCount-1).length,l=o.repeat(" ",a+2);o.renderList(e,l,(u,c)=>{const d=String(s+u),h=getMarkup$2({item:c,list:e,type:"ordered"});return o.repeat(" ",a-d.length)+d+h+" "})}};function getMarkup$2({item:o,list:e,type:s}){const a=Markup[s];let l=o.attrs[ListsAttr.Markup];return a.values.includes(l)||(l=e.attrs[ListsAttr.Markup]),a.values.includes(l)||(l=a.default),l}const liType=nodeTypeFactory(ListNode.ListItem),blType=nodeTypeFactory(ListNode.BulletList),olType=nodeTypeFactory(ListNode.OrderedList),ListsSpecs=o=>{o.addNode(ListNode.ListItem,()=>({spec:schemaSpecs$2[ListNode.ListItem],toMd:serializerTokens$7[ListNode.ListItem],fromMd:{tokenSpec:parserTokens$8[ListNode.ListItem]}})).addNode(ListNode.BulletList,()=>({spec:schemaSpecs$2[ListNode.BulletList],toMd:serializerTokens$7[ListNode.BulletList],fromMd:{tokenSpec:parserTokens$8[ListNode.BulletList]}})).addNode(ListNode.OrderedList,()=>({spec:schemaSpecs$2[ListNode.OrderedList],toMd:serializerTokens$7[ListNode.OrderedList],fromMd:{tokenSpec:parserTokens$8[ListNode.OrderedList]}}))},findAnyParentList=o=>findParentNodeOfType([blType(o),olType(o)]),isIntoListOfType=o=>e=>{var s;return((s=findAnyParentList(e.schema)(e.selection))==null?void 0:s.node.type.name)===o},isListNode=({type:o})=>o===blType(o.schema)||o===olType(o.schema),isListItemNode=o=>o.type===liType(o.type.schema),isListOrItemNode=o=>isListNode(o)||isListItemNode(o),findMark=(o,e)=>o.marks.find(s=>s.type.name===e.name);function isMarkActive(o,e){const{from:s,$from:a,to:l,empty:u}=o.selection;return u?e.isInSet(o.storedMarks||a.marks()):o.doc.rangeHasMark(s,l,e)}function defineActions(o){return o}function createToggleMarkAction(o){const e=toggleMark(o);return{isActive:s=>!!isMarkActive(s,o),isEnable:e,run:e}}const KEEP_OPEN="KEEP_OPEN";var ActionKind;(function(o){o.open="open",o.close="close",o.filter="filter",o.up="ArrowUp",o.down="ArrowDown",o.left="ArrowLeft",o.right="ArrowRight",o.enter="enter"})(ActionKind||(ActionKind={}));const pluginKey$8=new PluginKey("autocomplete");function inSuggestion(o,e){return e.find(o.from,o.to).length>0}function openAutocomplete(o,e,s){const a=pluginKey$8.get(o.state),l={action:"add",trigger:e,filter:s,type:null},u=o.state.tr.insertText(`${e}${s??""}`).scrollIntoView().setMeta(a,l);o.dispatch(u)}function closeAutocomplete(o){const e=pluginKey$8.get(o.state),s={action:"remove"},a=o.state.tr.setMeta(e,s);return o.dispatch(a),!0}const inactiveAutocompleteState={active:!1,decorations:DecorationSet.empty};function actionFromEvent(o){switch(o.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":return o.key;case"Tab":case"Enter":return ActionKind.enter;case"Escape":return ActionKind.close;default:return null}}function cancelIfInsideAndPass(o){const e=pluginKey$8.get(o.state),{decorations:s}=e.getState(o.state);return inSuggestion(o.state.selection,s)&&closeAutocomplete(o),!1}function getDecorationPlugin$1(o){const e=new Plugin({key:pluginKey$8,view(){return{update:(s,a)=>{var l,u,c,d;const h=e.getState(a),p=e.getState(s.state),m=!h.active&&p.active,g=h.active&&!p.active,y=p.active&&!m&&!g&&h.filter!==p.filter,A={view:s,trigger:(l=p.trigger)!==null&&l!==void 0?l:h.trigger,filter:(u=p.filter)!==null&&u!==void 0?u:h.filter,range:(c=p.range)!==null&&c!==void 0?c:h.range,type:(d=p.type)!==null&&d!==void 0?d:h.type};m&&o(Object.assign(Object.assign({},A),{kind:ActionKind.open})),y&&o(Object.assign(Object.assign({},A),{kind:ActionKind.filter})),g&&o(Object.assign(Object.assign({},A),{kind:ActionKind.close}))}}},state:{init:()=>inactiveAutocompleteState,apply(s,a){var l,u,c;const d=s.getMeta(e);if((d==null?void 0:d.action)==="add"){const{trigger:_,filter:w,type:R}=d,k=s.selection.from-_.length-((l=w==null?void 0:w.length)!==null&&l!==void 0?l:0),I=s.selection.from,P=!((u=R==null?void 0:R.decorationAttrs)===null||u===void 0)&&u.class?["autocomplete",(c=R==null?void 0:R.decorationAttrs)===null||c===void 0?void 0:c.class].join(" "):"autocomplete",N=Object.assign(Object.assign({},R==null?void 0:R.decorationAttrs),{class:P}),L=Decoration$1.inline(k,I,N,{inclusiveStart:!1,inclusiveEnd:!0});return{active:!0,trigger:d.trigger,decorations:DecorationSet.create(s.doc,[L]),filter:w??"",range:{from:k,to:I},type:R}}const{decorations:h}=a,p=h.map(s.mapping,s.doc),m=p.find().length>0;if((d==null?void 0:d.action)==="remove"||!inSuggestion(s.selection,p)||!m)return inactiveAutocompleteState;const{active:g,trigger:y,type:A}=a,{from:T,to:E}=p.find()[0],v=s.doc.textBetween(T,E);return v.startsWith(y)?{active:g,trigger:y,decorations:p,filter:v.slice(y.length),range:{from:T,to:E},type:A}:inactiveAutocompleteState}},props:{decorations:s=>{var a;return(a=e.getState(s))===null||a===void 0?void 0:a.decorations},handlePaste:s=>cancelIfInsideAndPass(s),handleDrop:s=>cancelIfInsideAndPass(s),handleKeyDown(s,a){var l,u;const{trigger:c,active:d,decorations:h,type:p}=e.getState(s.state);if(!d||!inSuggestion(s.state.selection,h))return!1;const{from:m,to:g}=h.find()[0],A=s.state.doc.textBetween(m,g).slice((l=c==null?void 0:c.length)!==null&&l!==void 0?l:1);if(((u=p==null?void 0:p.cancelOnFirstSpace)!==null&&u!==void 0?u:!0)&&A.length===0&&(a.key===" "||a.key==="Spacebar"))return closeAutocomplete(s),s.dispatch(s.state.tr.insertText(" ").scrollIntoView()),!0;if(A.length===0&&a.key==="Backspace")return undoInputRule(s.state,s.dispatch),closeAutocomplete(s),!0;const E=actionFromEvent(a),v={view:s,trigger:c,filter:A,range:{from:m,to:g},type:p,event:a};switch(E){case ActionKind.close:return closeAutocomplete(s);case ActionKind.enter:{const _=o(Object.assign(Object.assign({},v),{kind:ActionKind.enter}));return _===KEEP_OPEN?!0:_||closeAutocomplete(s)}case ActionKind.up:case ActionKind.down:return!!o(Object.assign(Object.assign({},v),{kind:E}));case ActionKind.left:case ActionKind.right:return p!=null&&p.allArrowKeys?!!o(Object.assign(Object.assign({},v),{kind:E})):!1}return!1}}});return e}function createInputRule$1(o,e){const s=typeof e.trigger=="string"?RegExp(`(?:^|\\s|\\n|[^\\d\\w])(${e.trigger.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})$`):e.trigger;return new InputRule(s,(a,l)=>{const{decorations:u}=o.getState(a);if(inSuggestion(a.selection,u))return null;const c=a.tr.insertText(l[1][l[1].length-1]).scrollIntoView(),d={action:"add",trigger:l[1],type:e};return c.setMeta(o,d),c})}function defaultReducer(o){return e=>{var s,a,l,u,c,d,h,p,m,g;switch(e.kind){case ActionKind.open:return(a=(s=o.onOpen)===null||s===void 0?void 0:s.call(o,e))!==null&&a!==void 0?a:!1;case ActionKind.close:return(u=(l=o.onClose)===null||l===void 0?void 0:l.call(o,e))!==null&&u!==void 0?u:!1;case ActionKind.up:case ActionKind.down:case ActionKind.left:case ActionKind.right:return(d=(c=o.onArrow)===null||c===void 0?void 0:c.call(o,e))!==null&&d!==void 0?d:!1;case ActionKind.filter:return(p=(h=o.onFilter)===null||h===void 0?void 0:h.call(o,e))!==null&&p!==void 0?p:!1;case ActionKind.enter:return(g=(m=o.onEnter)===null||m===void 0?void 0:m.call(o,e))!==null&&g!==void 0?g:!1;default:return!1}}}function autocomplete(o={}){const e=Object.assign({triggers:[],reducer:defaultReducer(o)},o),{reducer:s,triggers:a}=e,l=getDecorationPlugin$1(s);return[l,inputRules({rules:a.map(c=>createInputRule$1(l,c))})]}class MainHandler{constructor(e,s){oe(this,"config");oe(this,"logger");this.config=e,this.logger=s.nested({module:"autocomplete-main-handler"})}static log(e,s){const a="[Autocomplete]";if(s.event==="destroy"){e.log(`${a} Destroy`),globalLogger.log(`${a} Destroy`);return}const{action:l,item:u}=s,c=[a,capitalize(s.event),`Trigger="${l.trigger}"`,`Filter=${l.filter!==void 0?`"${l.filter}"`:"None"}`,`Type=${l.type?`"${l.type.name}"`:"None"}`,`Handler=${u?`"${u.trigger.name}"`:"None"}`].join(" ");e.log(c),globalLogger.log(c)}onOpen(e){var a,l;const s=this.getItem(e);return MainHandler.log(this.logger,{event:"open",action:e,item:s}),((l=s==null?void 0:(a=s.handler).onOpen)==null?void 0:l.call(a,e))??!1}onClose(e){var a,l;const s=this.getItem(e);return MainHandler.log(this.logger,{event:"close",action:e,item:s}),((l=s==null?void 0:(a=s.handler).onClose)==null?void 0:l.call(a,e))??!1}onArrow(e){var a,l;const s=this.getItem(e);return MainHandler.log(this.logger,{event:"arrow",action:e,item:s}),((l=s==null?void 0:(a=s.handler).onArrow)==null?void 0:l.call(a,e))??!1}onEnter(e){var a,l;const s=this.getItem(e);return MainHandler.log(this.logger,{event:"enter",action:e,item:s}),((l=s==null?void 0:(a=s.handler).onEnter)==null?void 0:l.call(a,e))??!1}onFilter(e){var a,l;const s=this.getItem(e);return MainHandler.log(this.logger,{event:"filter",action:e,item:s}),((l=s==null?void 0:(a=s.handler).onFilter)==null?void 0:l.call(a,e))??!1}onDestroy(){var e,s;MainHandler.log(this.logger,{event:"destroy"});for(const a of this.config)(s=(e=a.handler).onDestroy)==null||s.call(e)}getItem({trigger:e,type:s}){let a;return s?a=l=>l.trigger.name===s.name:a=l=>{const u=l.trigger.trigger;return isString$1(u)?u===e:u.test(e)},this.config.find(a)}}function getAutocompleteState(o){return pluginKey$8.getState(o)||null}const AutocompleteDecoClassName="autocomplete",Autocomplete=o=>{const e=new Set;o.context.set("autocomplete",e),o.addPlugin(s=>{const a=[],l=[];for(const d of e){const h=isFunction(d)?d(s):d;a.push(h.trigger),l.push(h)}const u=new MainHandler(l,o.logger);return autocomplete({triggers:a,onOpen:u.onOpen.bind(u),onClose:u.onClose.bind(u),onFilter:u.onFilter.bind(u),onArrow:u.onArrow.bind(u),onEnter:u.onEnter.bind(u)}).concat(new Plugin({view:()=>({destroy:()=>u.onDestroy()})}))},o.Priority.VeryHigh)};class AutocompletePopupCloser{constructor(e){qe(this,oi);qe(this,Ar);oe(this,"popupOpenChangeHandler",(e,s,a)=>{if(a==="escape-key"){this.closeAutocomplete();return}pe(this,oi).hasFocus()||$e(this,Ar,setTimeout(()=>{$e(this,Ar,void 0),pe(this,oi).hasFocus()||this.closeAutocomplete()},20))});$e(this,oi,e)}closeAutocomplete(){closeAutocomplete(pe(this,oi))}cancelTimer(){pe(this,Ar)!==void 0&&(clearTimeout(pe(this,Ar)),$e(this,Ar,void 0))}}oi=new WeakMap,Ar=new WeakMap;class IndexCarousel{constructor(e,s){oe(this,"length");oe(this,"_current",0);if(!IndexCarousel.isValidLength(e))throw new Error("IndexCarousel: length must be greater or equal zero");if(this.length=e,s!==void 0){if(!Number.isSafeInteger(s))throw new Error("IndexCarousel: start must be safe integer");if(s<0)throw new Error("IndexCarousel: start must be greater or equal zero");if(s>=e)throw new Error("IndexCarousel: start must be lower than length");this.current=s}}static isValidLength(e){return Number.isSafeInteger(length)&&e>=0}get current(){return this.length<=0?-1:this._current}set current(e){if(e<0||e>=this.length)throw new Error("IndexCarousel: new current must be in the range from 0 to length-1");this._current=e}next(){if(this.length<=0)return-1;let e=this.current+1;return e%=this.length,this.current=e,e}prev(){if(this.length<=0)return-1;let e=this.current-1;return e+=this.length,e%=this.length,this.current=e,e}reset(e){if(e!==void 0){if(!IndexCarousel.isValidLength(e))throw new Error("IndexCarousel: newLength must be greater or equal zero");this.length=e}this.current=0}}class ArrayCarousel{constructor(e){oe(this,"_array");oe(this,"indexCarousel");if(!Array.isArray(e))throw new Error('ArrayCarousel: "array" argument must be array');this._array=e,this.indexCarousel=new IndexCarousel(e.length)}get array(){return this._array}get currentIndex(){return this.indexCarousel.current}set currentIndex(e){this.indexCarousel.current=e}get currentItem(){return this.array[this.currentIndex]}next(){return this.indexCarousel.next(),this}prev(){return this.indexCarousel.prev(),this}}var DataTransferType$1;(function(o){o.Text="text/plain",o.Html="text/html",o.Yfm="text/yfm",o.Rtf="text/rtf",o.UriList="text/uri-list",o.VSCodeData="vscode-editor-data",o.Files="Files"})(DataTransferType$1||(DataTransferType$1={}));function isFilesOnly$3({types:o}){return o.length===1&&o[0]===DataTransferType$1.Files}function isFilesFromHtml$3({types:o}){return o.length===2&&o.includes(DataTransferType$1.Files)&&o.includes(DataTransferType$1.Html)}function isImageFile$3(o){return o.type.startsWith("image/")}function isVSCode(o){return o.types.includes(DataTransferType$1.VSCodeData)}function isJetBrains(o){return o.types.includes(DataTransferType$1.Rtf)?o.getData(DataTransferType$1.Rtf).indexOf("\\fmodern JetBrains")>0:!1}function tryParseVSCodeData(o){try{return JSON.parse(o.getData(DataTransferType$1.VSCodeData))}catch(e){console.error(e);return}}function shouldSkipHtmlConversion(o){return o.types.includes(DataTransferType$1.Html)?o.types.length===1||o.types.length===2?!1:o.types.length===3?o.getData(DataTransferType$1.Rtf).indexOf("\fmodern JetBrains")>0:!0:!0}const reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);function escapeRegExp(o){return o&&reHasRegExpChar.test(o)?o.replace(reRegExpChar,"\\$&"):o||""}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function validate(o){return typeof o=="string"&&REGEX.test(o)}function parse$7(o){if(!validate(o))throw TypeError("Invalid UUID");let e;return Uint8Array.of((e=parseInt(o.slice(0,8),16))>>>24,e>>>16&255,e>>>8&255,e&255,(e=parseInt(o.slice(9,13),16))>>>8,e&255,(e=parseInt(o.slice(14,18),16))>>>8,e&255,(e=parseInt(o.slice(19,23),16))>>>8,e&255,(e=parseInt(o.slice(24,36),16))/1099511627776&255,e/4294967296&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255)}const byteToHex=[];for(let o=0;o<256;++o)byteToHex.push((o+256).toString(16).slice(1));function unsafeStringify(o,e=0){return(byteToHex[o[e+0]]+byteToHex[o[e+1]]+byteToHex[o[e+2]]+byteToHex[o[e+3]]+"-"+byteToHex[o[e+4]]+byteToHex[o[e+5]]+"-"+byteToHex[o[e+6]]+byteToHex[o[e+7]]+"-"+byteToHex[o[e+8]]+byteToHex[o[e+9]]+"-"+byteToHex[o[e+10]]+byteToHex[o[e+11]]+byteToHex[o[e+12]]+byteToHex[o[e+13]]+byteToHex[o[e+14]]+byteToHex[o[e+15]]).toLowerCase()}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");getRandomValues=crypto.getRandomValues.bind(crypto)}return getRandomValues(rnds8)}function stringToBytes(o){o=unescape(encodeURIComponent(o));const e=new Uint8Array(o.length);for(let s=0;s<o.length;++s)e[s]=o.charCodeAt(s);return e}const DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(o,e,s,a,l,u){const c=typeof s=="string"?stringToBytes(s):s,d=typeof a=="string"?parse$7(a):a;if(typeof a=="string"&&(a=parse$7(a)),(a==null?void 0:a.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let h=new Uint8Array(16+c.length);if(h.set(d),h.set(c,d.length),h=e(h),h[6]=h[6]&15|o,h[8]=h[8]&63|128,l){u=u||0;for(let p=0;p<16;++p)l[u+p]=h[p];return l}return unsafeStringify(h)}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(o,e,s){var l;if(native.randomUUID&&!o)return native.randomUUID();o=o||{};const a=o.random??((l=o.rng)==null?void 0:l.call(o))??rng();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,unsafeStringify(a)}function f(o,e,s,a){switch(o){case 0:return e&s^~e&a;case 1:return e^s^a;case 2:return e&s^e&a^s&a;case 3:return e^s^a}}function ROTL(o,e){return o<<e|o>>>32-e}function sha1(o){const e=[1518500249,1859775393,2400959708,3395469782],s=[1732584193,4023233417,2562383102,271733878,3285377520],a=new Uint8Array(o.length+1);a.set(o),a[o.length]=128,o=a;const l=o.length/4+2,u=Math.ceil(l/16),c=new Array(u);for(let d=0;d<u;++d){const h=new Uint32Array(16);for(let p=0;p<16;++p)h[p]=o[d*64+p*4]<<24|o[d*64+p*4+1]<<16|o[d*64+p*4+2]<<8|o[d*64+p*4+3];c[d]=h}c[u-1][14]=(o.length-1)*8/Math.pow(2,32),c[u-1][14]=Math.floor(c[u-1][14]),c[u-1][15]=(o.length-1)*8&4294967295;for(let d=0;d<u;++d){const h=new Uint32Array(80);for(let T=0;T<16;++T)h[T]=c[d][T];for(let T=16;T<80;++T)h[T]=ROTL(h[T-3]^h[T-8]^h[T-14]^h[T-16],1);let p=s[0],m=s[1],g=s[2],y=s[3],A=s[4];for(let T=0;T<80;++T){const E=Math.floor(T/20),v=ROTL(p,5)+f(E,m,g,y)+A+e[E]+h[T]>>>0;A=y,y=g,g=ROTL(m,30)>>>0,m=p,p=v}s[0]=s[0]+p>>>0,s[1]=s[1]+m>>>0,s[2]=s[2]+g>>>0,s[3]=s[3]+y>>>0,s[4]=s[4]+A>>>0}return Uint8Array.of(s[0]>>24,s[0]>>16,s[0]>>8,s[0],s[1]>>24,s[1]>>16,s[1]>>8,s[1],s[2]>>24,s[2]>>16,s[2]>>8,s[2],s[3]>>24,s[3]>>16,s[3]>>8,s[3],s[4]>>24,s[4]>>16,s[4]>>8,s[4])}function v5(o,e,s,a){return v35(80,sha1,o,e,s,a)}v5.DNS=DNS,v5.URL=URL$1;const boldMarkName="strong",boldType=markTypeFactory(boldMarkName),BoldAttrs={Markup:"data-markup"},defaultMarkup$1="**",BoldSpecs=o=>{o.addMark(boldMarkName,()=>({spec:{attrs:{[BoldAttrs.Markup]:{default:defaultMarkup$1}},parseDOM:[{tag:"b"},{tag:"strong",getAttrs:e=>({[BoldAttrs.Markup]:e.getAttribute(BoldAttrs.Markup)})},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM(e){return["strong",e.attrs]}},fromMd:{tokenSpec:{name:boldMarkName,type:"mark",getAttrs:e=>({[BoldAttrs.Markup]:e.markup})}},toMd:{open:getMarkup$1,close:getMarkup$1,mixable:!0,expelEnclosingWhitespace:!0}}))};function getMarkup$1(o,e){return e.attrs[BoldAttrs.Markup]||defaultMarkup$1}const codeMarkName="code",codeType=markTypeFactory(codeMarkName),CodeSpecs=o=>{o.addMark(codeMarkName,()=>({spec:{code:!0,parseDOM:[{tag:"code"}],toDOM(){return["code"]}},toMd:{open(e,s,a,l){return backticksFor(a.child(l),-1)},close(e,s,a,l){return backticksFor(a.child(l-1),1)},escape:!1},fromMd:{tokenSpec:{name:codeMarkName,type:"mark",code:!0,noCloseToken:!0},tokenName:"code_inline"}}),o.Priority.Lowest)};function backticksFor(o,e){const s=/`+/g;let a,l=0;if(o.isText)for(;a=s.exec(o.text||"");)l=Math.max(l,a[0].length);let u=l>0&&e>0?" `":"`";for(let c=0;c<l;c++)u+="`";return l>0&&e<0&&(u+=" "),u}const linkMarkName="link",linkType=markTypeFactory(linkMarkName);var LinkAttr;(function(o){o.Href="href",o.Title="title",o.IsPlaceholder="is-placeholder",o.RawLink="raw-link"})(LinkAttr||(LinkAttr={}));const LinkSpecs=o=>{o.addMark(linkMarkName,()=>({spec:{attrs:{[LinkAttr.Href]:{},[LinkAttr.Title]:{default:null},[LinkAttr.IsPlaceholder]:{default:!1},[LinkAttr.RawLink]:{default:!1}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(e){return{href:e.getAttribute(LinkAttr.Href),title:e.getAttribute(LinkAttr.Title)}}}],toDOM(e){return["a",e.attrs]}},toMd:{open(e,s,a,l){return e.isAutolink=isPlainURL(s,a,l),e.isAutolink?s.attrs[LinkAttr.RawLink]?"":"<":"["},close(e,s){return e.isAutolink?(e.isAutolink=void 0,s.attrs[LinkAttr.RawLink]?"":">"):(e.isAutolink=void 0,"]("+escapeParenthesesInUrl(s.attrs[LinkAttr.Href])+(s.attrs[LinkAttr.Title]?" "+e.quote(s.attrs[LinkAttr.Title]):"")+")")}},fromMd:{tokenSpec:{name:linkMarkName,type:"mark",getAttrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})}}}),o.Priority.High)};function isPlainURL(o,e,s,a){if(o.attrs.title||!/^\w+:/.test(o.attrs[LinkAttr.Href]))return!1;const l=e.child(s+0);if(!l.isText||l.text!==o.attrs[LinkAttr.Href]||l.marks[l.marks.length-1]!==o)return!1;if(s===e.childCount-1)return!0;const u=e.child(s+1);return!o.isInSet(u.marks)}function escapeParenthesesInUrl(o){return o.replaceAll(/\(|\)/g,e=>"\\"+e)}const italicMarkName="em",italicType=markTypeFactory(italicMarkName),ItalicAttrs={Markup:"data-markup"},defaultMarkup="*",ItalicSpecs=o=>{o.addMark(italicMarkName,()=>({spec:{attrs:{[ItalicAttrs.Markup]:{default:defaultMarkup}},parseDOM:[{tag:"i"},{tag:"em",getAttrs:e=>({[ItalicAttrs.Markup]:e.getAttribute(ItalicAttrs.Markup)})},{style:"font-style",getAttrs:e=>e==="italic"&&null}],toDOM(e){return["em",e.attrs]}},toMd:{open:getMarkup,close:getMarkup,mixable:!0,expelEnclosingWhitespace:!0},fromMd:{tokenSpec:{name:italicMarkName,type:"mark",getAttrs:e=>({[ItalicAttrs.Markup]:e.markup})}}}))};function getMarkup(o,e){return e.attrs[ItalicAttrs.Markup]||defaultMarkup}const strikeMarkName="strike",strikeType=markTypeFactory(strikeMarkName),StrikeSpecs=o=>{o.addMark(strikeMarkName,()=>({spec:{parseDOM:[{tag:"strike"},{tag:"s"}],toDOM(){return["strike"]}},fromMd:{tokenSpec:{name:strikeMarkName,type:"mark"},tokenName:"s"},toMd:{open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0}}))};var markdownItIns,hasRequiredMarkdownItIns;function requireMarkdownItIns(){return hasRequiredMarkdownItIns||(hasRequiredMarkdownItIns=1,markdownItIns=function(e){function s(l,u){var c,d,h,p,m,g=l.pos,y=l.src.charCodeAt(g);if(u||y!==43||(d=l.scanDelims(l.pos,!0),p=d.length,m=String.fromCharCode(y),p<2))return!1;for(p%2&&(h=l.push("text","",0),h.content=m,p--),c=0;c<p;c+=2)h=l.push("text","",0),h.content=m+m,!(!d.can_open&&!d.can_close)&&l.delimiters.push({marker:y,length:0,jump:c/2,token:l.tokens.length-1,end:-1,open:d.can_open,close:d.can_close});return l.pos+=d.length,!0}function a(l,u){var c,d,h,p,m,g=[],y=u.length;for(c=0;c<y;c++)h=u[c],h.marker===43&&h.end!==-1&&(p=u[h.end],m=l.tokens[h.token],m.type="ins_open",m.tag="ins",m.nesting=1,m.markup="++",m.content="",m=l.tokens[p.token],m.type="ins_close",m.tag="ins",m.nesting=-1,m.markup="++",m.content="",l.tokens[p.token-1].type==="text"&&l.tokens[p.token-1].content==="+"&&g.push(p.token-1));for(;g.length;){for(c=g.pop(),d=c+1;d<l.tokens.length&&l.tokens[d].type==="ins_close";)d++;d--,c!==d&&(m=l.tokens[d],l.tokens[d]=l.tokens[c],l.tokens[c]=m)}}e.inline.ruler.before("emphasis","ins",s),e.inline.ruler2.before("emphasis","ins",function(l){var u,c=l.tokens_meta,d=(l.tokens_meta||[]).length;for(a(l,l.delimiters),u=0;u<d;u++)c[u]&&c[u].delimiters&&a(l,c[u].delimiters)})}),markdownItIns}var markdownItInsExports=requireMarkdownItIns();const insPlugin=getDefaultExportFromCjs$1(markdownItInsExports),underlineMarkName="ins",underlineType=markTypeFactory(underlineMarkName),UnderlineSpecs=o=>{o.configureMd(e=>e.use(insPlugin)).addMark(underlineMarkName,()=>({spec:{parseDOM:[{tag:"ins"},{tag:"u"}],toDOM(){return["ins"]}},toMd:{open:"++",close:"++",mixable:!0,expelEnclosingWhitespace:!0},fromMd:{tokenSpec:{name:underlineMarkName,type:"mark"}}}))};var markdownItMark,hasRequiredMarkdownItMark;function requireMarkdownItMark(){return hasRequiredMarkdownItMark||(hasRequiredMarkdownItMark=1,markdownItMark=function(e){function s(l,u){var c,d,h,p,m,g=l.pos,y=l.src.charCodeAt(g);if(u||y!==61||(d=l.scanDelims(l.pos,!0),p=d.length,m=String.fromCharCode(y),p<2))return!1;for(p%2&&(h=l.push("text","",0),h.content=m,p--),c=0;c<p;c+=2)h=l.push("text","",0),h.content=m+m,!(!d.can_open&&!d.can_close)&&l.delimiters.push({marker:y,length:0,jump:c/2,token:l.tokens.length-1,end:-1,open:d.can_open,close:d.can_close});return l.pos+=d.length,!0}function a(l,u){var c,d,h,p,m,g=[],y=u.length;for(c=0;c<y;c++)h=u[c],h.marker===61&&h.end!==-1&&(p=u[h.end],m=l.tokens[h.token],m.type="mark_open",m.tag="mark",m.nesting=1,m.markup="==",m.content="",m=l.tokens[p.token],m.type="mark_close",m.tag="mark",m.nesting=-1,m.markup="==",m.content="",l.tokens[p.token-1].type==="text"&&l.tokens[p.token-1].content==="="&&g.push(p.token-1));for(;g.length;){for(c=g.pop(),d=c+1;d<l.tokens.length&&l.tokens[d].type==="mark_close";)d++;d--,c!==d&&(m=l.tokens[d],l.tokens[d]=l.tokens[c],l.tokens[c]=m)}}e.inline.ruler.before("emphasis","mark",s),e.inline.ruler2.before("emphasis","mark",function(l){var u,c=l.tokens_meta,d=(l.tokens_meta||[]).length;for(a(l,l.delimiters),u=0;u<d;u++)c[u]&&c[u].delimiters&&a(l,c[u].delimiters)})}),markdownItMark}var markdownItMarkExports=requireMarkdownItMark();const markPlugin=getDefaultExportFromCjs$1(markdownItMarkExports),markMarkName="mark",markMarkType=markTypeFactory(markMarkName),MarkSpecs=o=>{o.configureMd(e=>e.use(markPlugin)).addMark(markMarkName,()=>({spec:{parseDOM:[{tag:"mark"}],toDOM(){return["mark"]}},fromMd:{tokenSpec:{name:markMarkName,type:"mark"}},toMd:{open:"==",close:"==",mixable:!0,expelEnclosingWhitespace:!0}}))};var markdownItSub,hasRequiredMarkdownItSub;function requireMarkdownItSub(){if(hasRequiredMarkdownItSub)return markdownItSub;hasRequiredMarkdownItSub=1;var o=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function e(s,a){var l,u,c,d=s.posMax,h=s.pos;if(s.src.charCodeAt(h)!==126||a||h+2>=d)return!1;for(s.pos=h+1;s.pos<d;){if(s.src.charCodeAt(s.pos)===126){l=!0;break}s.md.inline.skipToken(s)}return!l||h+1===s.pos||(u=s.src.slice(h+1,s.pos),u.match(/(^|[^\\])(\\\\)*\s/))?(s.pos=h,!1):(s.posMax=s.pos,s.pos=h+1,c=s.push("sub_open","sub",1),c.markup="~",c=s.push("text","",0),c.content=u.replace(o,"$1"),c=s.push("sub_close","sub",-1),c.markup="~",s.pos=s.posMax+1,s.posMax=d,!0)}return markdownItSub=function(a){a.inline.ruler.after("emphasis","sub",e)},markdownItSub}var markdownItSubExports=requireMarkdownItSub();const subPlugin=getDefaultExportFromCjs$1(markdownItSubExports),subscriptMarkName="sub",subscriptType=markTypeFactory(subscriptMarkName),SubscriptSpecs=o=>{o.configureMd(e=>e.use(subPlugin)).addMark(subscriptMarkName,()=>({spec:{excludes:"_",parseDOM:[{tag:"sub"}],toDOM(){return["sub"]}},toMd:{open:e=>(e.escapeWhitespace=!0,"~"),close:e=>(e.escapeWhitespace=!1,"~"),mixable:!1,expelEnclosingWhitespace:!0},fromMd:{tokenSpec:{name:subscriptMarkName,type:"mark"}}}))};var log={},ansiStyles={exports:{}},colorName,hasRequiredColorName;function requireColorName(){return hasRequiredColorName||(hasRequiredColorName=1,colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),colorName}var conversions,hasRequiredConversions;function requireConversions(){if(hasRequiredConversions)return conversions;hasRequiredConversions=1;const o=requireColorName(),e={};for(const l of Object.keys(o))e[o[l]]=l;const s={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};conversions=s;for(const l of Object.keys(s)){if(!("channels"in s[l]))throw new Error("missing channels property: "+l);if(!("labels"in s[l]))throw new Error("missing channel labels property: "+l);if(s[l].labels.length!==s[l].channels)throw new Error("channel and label counts mismatch: "+l);const{channels:u,labels:c}=s[l];delete s[l].channels,delete s[l].labels,Object.defineProperty(s[l],"channels",{value:u}),Object.defineProperty(s[l],"labels",{value:c})}s.rgb.hsl=function(l){const u=l[0]/255,c=l[1]/255,d=l[2]/255,h=Math.min(u,c,d),p=Math.max(u,c,d),m=p-h;let g,y;p===h?g=0:u===p?g=(c-d)/m:c===p?g=2+(d-u)/m:d===p&&(g=4+(u-c)/m),g=Math.min(g*60,360),g<0&&(g+=360);const A=(h+p)/2;return p===h?y=0:A<=.5?y=m/(p+h):y=m/(2-p-h),[g,y*100,A*100]},s.rgb.hsv=function(l){let u,c,d,h,p;const m=l[0]/255,g=l[1]/255,y=l[2]/255,A=Math.max(m,g,y),T=A-Math.min(m,g,y),E=function(v){return(A-v)/6/T+1/2};return T===0?(h=0,p=0):(p=T/A,u=E(m),c=E(g),d=E(y),m===A?h=d-c:g===A?h=1/3+u-d:y===A&&(h=2/3+c-u),h<0?h+=1:h>1&&(h-=1)),[h*360,p*100,A*100]},s.rgb.hwb=function(l){const u=l[0],c=l[1];let d=l[2];const h=s.rgb.hsl(l)[0],p=1/255*Math.min(u,Math.min(c,d));return d=1-1/255*Math.max(u,Math.max(c,d)),[h,p*100,d*100]},s.rgb.cmyk=function(l){const u=l[0]/255,c=l[1]/255,d=l[2]/255,h=Math.min(1-u,1-c,1-d),p=(1-u-h)/(1-h)||0,m=(1-c-h)/(1-h)||0,g=(1-d-h)/(1-h)||0;return[p*100,m*100,g*100,h*100]};function a(l,u){return(l[0]-u[0])**2+(l[1]-u[1])**2+(l[2]-u[2])**2}return s.rgb.keyword=function(l){const u=e[l];if(u)return u;let c=1/0,d;for(const h of Object.keys(o)){const p=o[h],m=a(l,p);m<c&&(c=m,d=h)}return d},s.keyword.rgb=function(l){return o[l]},s.rgb.xyz=function(l){let u=l[0]/255,c=l[1]/255,d=l[2]/255;u=u>.04045?((u+.055)/1.055)**2.4:u/12.92,c=c>.04045?((c+.055)/1.055)**2.4:c/12.92,d=d>.04045?((d+.055)/1.055)**2.4:d/12.92;const h=u*.4124+c*.3576+d*.1805,p=u*.2126+c*.7152+d*.0722,m=u*.0193+c*.1192+d*.9505;return[h*100,p*100,m*100]},s.rgb.lab=function(l){const u=s.rgb.xyz(l);let c=u[0],d=u[1],h=u[2];c/=95.047,d/=100,h/=108.883,c=c>.008856?c**(1/3):7.787*c+16/116,d=d>.008856?d**(1/3):7.787*d+16/116,h=h>.008856?h**(1/3):7.787*h+16/116;const p=116*d-16,m=500*(c-d),g=200*(d-h);return[p,m,g]},s.hsl.rgb=function(l){const u=l[0]/360,c=l[1]/100,d=l[2]/100;let h,p,m;if(c===0)return m=d*255,[m,m,m];d<.5?h=d*(1+c):h=d+c-d*c;const g=2*d-h,y=[0,0,0];for(let A=0;A<3;A++)p=u+1/3*-(A-1),p<0&&p++,p>1&&p--,6*p<1?m=g+(h-g)*6*p:2*p<1?m=h:3*p<2?m=g+(h-g)*(2/3-p)*6:m=g,y[A]=m*255;return y},s.hsl.hsv=function(l){const u=l[0];let c=l[1]/100,d=l[2]/100,h=c;const p=Math.max(d,.01);d*=2,c*=d<=1?d:2-d,h*=p<=1?p:2-p;const m=(d+c)/2,g=d===0?2*h/(p+h):2*c/(d+c);return[u,g*100,m*100]},s.hsv.rgb=function(l){const u=l[0]/60,c=l[1]/100;let d=l[2]/100;const h=Math.floor(u)%6,p=u-Math.floor(u),m=255*d*(1-c),g=255*d*(1-c*p),y=255*d*(1-c*(1-p));switch(d*=255,h){case 0:return[d,y,m];case 1:return[g,d,m];case 2:return[m,d,y];case 3:return[m,g,d];case 4:return[y,m,d];case 5:return[d,m,g]}},s.hsv.hsl=function(l){const u=l[0],c=l[1]/100,d=l[2]/100,h=Math.max(d,.01);let p,m;m=(2-c)*d;const g=(2-c)*h;return p=c*h,p/=g<=1?g:2-g,p=p||0,m/=2,[u,p*100,m*100]},s.hwb.rgb=function(l){const u=l[0]/360;let c=l[1]/100,d=l[2]/100;const h=c+d;let p;h>1&&(c/=h,d/=h);const m=Math.floor(6*u),g=1-d;p=6*u-m,(m&1)!==0&&(p=1-p);const y=c+p*(g-c);let A,T,E;switch(m){default:case 6:case 0:A=g,T=y,E=c;break;case 1:A=y,T=g,E=c;break;case 2:A=c,T=g,E=y;break;case 3:A=c,T=y,E=g;break;case 4:A=y,T=c,E=g;break;case 5:A=g,T=c,E=y;break}return[A*255,T*255,E*255]},s.cmyk.rgb=function(l){const u=l[0]/100,c=l[1]/100,d=l[2]/100,h=l[3]/100,p=1-Math.min(1,u*(1-h)+h),m=1-Math.min(1,c*(1-h)+h),g=1-Math.min(1,d*(1-h)+h);return[p*255,m*255,g*255]},s.xyz.rgb=function(l){const u=l[0]/100,c=l[1]/100,d=l[2]/100;let h,p,m;return h=u*3.2406+c*-1.5372+d*-.4986,p=u*-.9689+c*1.8758+d*.0415,m=u*.0557+c*-.204+d*1.057,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,p=p>.0031308?1.055*p**(1/2.4)-.055:p*12.92,m=m>.0031308?1.055*m**(1/2.4)-.055:m*12.92,h=Math.min(Math.max(0,h),1),p=Math.min(Math.max(0,p),1),m=Math.min(Math.max(0,m),1),[h*255,p*255,m*255]},s.xyz.lab=function(l){let u=l[0],c=l[1],d=l[2];u/=95.047,c/=100,d/=108.883,u=u>.008856?u**(1/3):7.787*u+16/116,c=c>.008856?c**(1/3):7.787*c+16/116,d=d>.008856?d**(1/3):7.787*d+16/116;const h=116*c-16,p=500*(u-c),m=200*(c-d);return[h,p,m]},s.lab.xyz=function(l){const u=l[0],c=l[1],d=l[2];let h,p,m;p=(u+16)/116,h=c/500+p,m=p-d/200;const g=p**3,y=h**3,A=m**3;return p=g>.008856?g:(p-16/116)/7.787,h=y>.008856?y:(h-16/116)/7.787,m=A>.008856?A:(m-16/116)/7.787,h*=95.047,p*=100,m*=108.883,[h,p,m]},s.lab.lch=function(l){const u=l[0],c=l[1],d=l[2];let h;h=Math.atan2(d,c)*360/2/Math.PI,h<0&&(h+=360);const m=Math.sqrt(c*c+d*d);return[u,m,h]},s.lch.lab=function(l){const u=l[0],c=l[1],h=l[2]/360*2*Math.PI,p=c*Math.cos(h),m=c*Math.sin(h);return[u,p,m]},s.rgb.ansi16=function(l,u=null){const[c,d,h]=l;let p=u===null?s.rgb.hsv(l)[2]:u;if(p=Math.round(p/50),p===0)return 30;let m=30+(Math.round(h/255)<<2|Math.round(d/255)<<1|Math.round(c/255));return p===2&&(m+=60),m},s.hsv.ansi16=function(l){return s.rgb.ansi16(s.hsv.rgb(l),l[2])},s.rgb.ansi256=function(l){const u=l[0],c=l[1],d=l[2];return u===c&&c===d?u<8?16:u>248?231:Math.round((u-8)/247*24)+232:16+36*Math.round(u/255*5)+6*Math.round(c/255*5)+Math.round(d/255*5)},s.ansi16.rgb=function(l){let u=l%10;if(u===0||u===7)return l>50&&(u+=3.5),u=u/10.5*255,[u,u,u];const c=(~~(l>50)+1)*.5,d=(u&1)*c*255,h=(u>>1&1)*c*255,p=(u>>2&1)*c*255;return[d,h,p]},s.ansi256.rgb=function(l){if(l>=232){const p=(l-232)*10+8;return[p,p,p]}l-=16;let u;const c=Math.floor(l/36)/5*255,d=Math.floor((u=l%36)/6)/5*255,h=u%6/5*255;return[c,d,h]},s.rgb.hex=function(l){const c=(((Math.round(l[0])&255)<<16)+((Math.round(l[1])&255)<<8)+(Math.round(l[2])&255)).toString(16).toUpperCase();return"000000".substring(c.length)+c},s.hex.rgb=function(l){const u=l.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!u)return[0,0,0];let c=u[0];u[0].length===3&&(c=c.split("").map(g=>g+g).join(""));const d=parseInt(c,16),h=d>>16&255,p=d>>8&255,m=d&255;return[h,p,m]},s.rgb.hcg=function(l){const u=l[0]/255,c=l[1]/255,d=l[2]/255,h=Math.max(Math.max(u,c),d),p=Math.min(Math.min(u,c),d),m=h-p;let g,y;return m<1?g=p/(1-m):g=0,m<=0?y=0:h===u?y=(c-d)/m%6:h===c?y=2+(d-u)/m:y=4+(u-c)/m,y/=6,y%=1,[y*360,m*100,g*100]},s.hsl.hcg=function(l){const u=l[1]/100,c=l[2]/100,d=c<.5?2*u*c:2*u*(1-c);let h=0;return d<1&&(h=(c-.5*d)/(1-d)),[l[0],d*100,h*100]},s.hsv.hcg=function(l){const u=l[1]/100,c=l[2]/100,d=u*c;let h=0;return d<1&&(h=(c-d)/(1-d)),[l[0],d*100,h*100]},s.hcg.rgb=function(l){const u=l[0]/360,c=l[1]/100,d=l[2]/100;if(c===0)return[d*255,d*255,d*255];const h=[0,0,0],p=u%1*6,m=p%1,g=1-m;let y=0;switch(Math.floor(p)){case 0:h[0]=1,h[1]=m,h[2]=0;break;case 1:h[0]=g,h[1]=1,h[2]=0;break;case 2:h[0]=0,h[1]=1,h[2]=m;break;case 3:h[0]=0,h[1]=g,h[2]=1;break;case 4:h[0]=m,h[1]=0,h[2]=1;break;default:h[0]=1,h[1]=0,h[2]=g}return y=(1-c)*d,[(c*h[0]+y)*255,(c*h[1]+y)*255,(c*h[2]+y)*255]},s.hcg.hsv=function(l){const u=l[1]/100,c=l[2]/100,d=u+c*(1-u);let h=0;return d>0&&(h=u/d),[l[0],h*100,d*100]},s.hcg.hsl=function(l){const u=l[1]/100,d=l[2]/100*(1-u)+.5*u;let h=0;return d>0&&d<.5?h=u/(2*d):d>=.5&&d<1&&(h=u/(2*(1-d))),[l[0],h*100,d*100]},s.hcg.hwb=function(l){const u=l[1]/100,c=l[2]/100,d=u+c*(1-u);return[l[0],(d-u)*100,(1-d)*100]},s.hwb.hcg=function(l){const u=l[1]/100,d=1-l[2]/100,h=d-u;let p=0;return h<1&&(p=(d-h)/(1-h)),[l[0],h*100,p*100]},s.apple.rgb=function(l){return[l[0]/65535*255,l[1]/65535*255,l[2]/65535*255]},s.rgb.apple=function(l){return[l[0]/255*65535,l[1]/255*65535,l[2]/255*65535]},s.gray.rgb=function(l){return[l[0]/100*255,l[0]/100*255,l[0]/100*255]},s.gray.hsl=function(l){return[0,0,l[0]]},s.gray.hsv=s.gray.hsl,s.gray.hwb=function(l){return[0,100,l[0]]},s.gray.cmyk=function(l){return[0,0,0,l[0]]},s.gray.lab=function(l){return[l[0],0,0]},s.gray.hex=function(l){const u=Math.round(l[0]/100*255)&255,d=((u<<16)+(u<<8)+u).toString(16).toUpperCase();return"000000".substring(d.length)+d},s.rgb.gray=function(l){return[(l[0]+l[1]+l[2])/3/255*100]},conversions}var route,hasRequiredRoute;function requireRoute(){if(hasRequiredRoute)return route;hasRequiredRoute=1;const o=requireConversions();function e(){const u={},c=Object.keys(o);for(let d=c.length,h=0;h<d;h++)u[c[h]]={distance:-1,parent:null};return u}function s(u){const c=e(),d=[u];for(c[u].distance=0;d.length;){const h=d.pop(),p=Object.keys(o[h]);for(let m=p.length,g=0;g<m;g++){const y=p[g],A=c[y];A.distance===-1&&(A.distance=c[h].distance+1,A.parent=h,d.unshift(y))}}return c}function a(u,c){return function(d){return c(u(d))}}function l(u,c){const d=[c[u].parent,u];let h=o[c[u].parent][u],p=c[u].parent;for(;c[p].parent;)d.unshift(c[p].parent),h=a(o[c[p].parent][p],h),p=c[p].parent;return h.conversion=d,h}return route=function(u){const c=s(u),d={},h=Object.keys(c);for(let p=h.length,m=0;m<p;m++){const g=h[m];c[g].parent!==null&&(d[g]=l(g,c))}return d},route}var colorConvert,hasRequiredColorConvert;function requireColorConvert(){if(hasRequiredColorConvert)return colorConvert;hasRequiredColorConvert=1;const o=requireConversions(),e=requireRoute(),s={},a=Object.keys(o);function l(c){const d=function(...h){const p=h[0];return p==null?p:(p.length>1&&(h=p),c(h))};return"conversion"in c&&(d.conversion=c.conversion),d}function u(c){const d=function(...h){const p=h[0];if(p==null)return p;p.length>1&&(h=p);const m=c(h);if(typeof m=="object")for(let g=m.length,y=0;y<g;y++)m[y]=Math.round(m[y]);return m};return"conversion"in c&&(d.conversion=c.conversion),d}return a.forEach(c=>{s[c]={},Object.defineProperty(s[c],"channels",{value:o[c].channels}),Object.defineProperty(s[c],"labels",{value:o[c].labels});const d=e(c);Object.keys(d).forEach(p=>{const m=d[p];s[c][p]=u(m),s[c][p].raw=l(m)})}),colorConvert=s,colorConvert}ansiStyles.exports;var hasRequiredAnsiStyles;function requireAnsiStyles(){return hasRequiredAnsiStyles||(hasRequiredAnsiStyles=1,(function(o){const e=(m,g)=>(...y)=>`\x1B[${m(...y)+g}m`,s=(m,g)=>(...y)=>{const A=m(...y);return`\x1B[${38+g};5;${A}m`},a=(m,g)=>(...y)=>{const A=m(...y);return`\x1B[${38+g};2;${A[0]};${A[1]};${A[2]}m`},l=m=>m,u=(m,g,y)=>[m,g,y],c=(m,g,y)=>{Object.defineProperty(m,g,{get:()=>{const A=y();return Object.defineProperty(m,g,{value:A,enumerable:!0,configurable:!0}),A},enumerable:!0,configurable:!0})};let d;const h=(m,g,y,A)=>{d===void 0&&(d=requireColorConvert());const T=A?10:0,E={};for(const[v,_]of Object.entries(d)){const w=v==="ansi16"?"ansi":v;v===g?E[w]=m(y,T):typeof _=="object"&&(E[w]=m(_[g],T))}return E};function p(){const m=new Map,g={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};g.color.gray=g.color.blackBright,g.bgColor.bgGray=g.bgColor.bgBlackBright,g.color.grey=g.color.blackBright,g.bgColor.bgGrey=g.bgColor.bgBlackBright;for(const[y,A]of Object.entries(g)){for(const[T,E]of Object.entries(A))g[T]={open:`\x1B[${E[0]}m`,close:`\x1B[${E[1]}m`},A[T]=g[T],m.set(E[0],E[1]);Object.defineProperty(g,y,{value:A,enumerable:!1})}return Object.defineProperty(g,"codes",{value:m,enumerable:!1}),g.color.close="\x1B[39m",g.bgColor.close="\x1B[49m",c(g.color,"ansi",()=>h(e,"ansi16",l,!1)),c(g.color,"ansi256",()=>h(s,"ansi256",l,!1)),c(g.color,"ansi16m",()=>h(a,"rgb",u,!1)),c(g.bgColor,"ansi",()=>h(e,"ansi16",l,!0)),c(g.bgColor,"ansi256",()=>h(s,"ansi256",l,!0)),c(g.bgColor,"ansi16m",()=>h(a,"rgb",u,!0)),g}Object.defineProperty(o,"exports",{enumerable:!0,get:p})})(ansiStyles)),ansiStyles.exports}var browser$3,hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,browser$3={stdout:!1,stderr:!1}),browser$3}var util$2,hasRequiredUtil$2;function requireUtil$2(){return hasRequiredUtil$2||(hasRequiredUtil$2=1,util$2={stringReplaceAll:(s,a,l)=>{let u=s.indexOf(a);if(u===-1)return s;const c=a.length;let d=0,h="";do h+=s.substr(d,u-d)+a+l,d=u+c,u=s.indexOf(a,d);while(u!==-1);return h+=s.substr(d),h},stringEncaseCRLFWithFirstIndex:(s,a,l,u)=>{let c=0,d="";do{const h=s[u-1]==="\r";d+=s.substr(c,(h?u-1:u)-c)+a+(h?`\r
`:`
`)+l,c=u+1,u=s.indexOf(`
`,c)}while(u!==-1);return d+=s.substr(c),d}}),util$2}var templates,hasRequiredTemplates;function requireTemplates(){if(hasRequiredTemplates)return templates;hasRequiredTemplates=1;const o=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,e=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,s=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,a=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,l=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function u(p){const m=p[0]==="u",g=p[1]==="{";return m&&!g&&p.length===5||p[0]==="x"&&p.length===3?String.fromCharCode(parseInt(p.slice(1),16)):m&&g?String.fromCodePoint(parseInt(p.slice(2,-1),16)):l.get(p)||p}function c(p,m){const g=[],y=m.trim().split(/\s*,\s*/g);let A;for(const T of y){const E=Number(T);if(!Number.isNaN(E))g.push(E);else if(A=T.match(s))g.push(A[2].replace(a,(v,_,w)=>_?u(_):w));else throw new Error(`Invalid Chalk template style argument: ${T} (in style '${p}')`)}return g}function d(p){e.lastIndex=0;const m=[];let g;for(;(g=e.exec(p))!==null;){const y=g[1];if(g[2]){const A=c(y,g[2]);m.push([y].concat(A))}else m.push([y])}return m}function h(p,m){const g={};for(const A of m)for(const T of A.styles)g[T[0]]=A.inverse?null:T.slice(1);let y=p;for(const[A,T]of Object.entries(g))if(Array.isArray(T)){if(!(A in y))throw new Error(`Unknown Chalk style: ${A}`);y=T.length>0?y[A](...T):y[A]}return y}return templates=(p,m)=>{const g=[],y=[];let A=[];if(m.replace(o,(T,E,v,_,w,R)=>{if(E)A.push(u(E));else if(_){const k=A.join("");A=[],y.push(g.length===0?k:h(p,g)(k)),g.push({inverse:v,styles:d(_)})}else if(w){if(g.length===0)throw new Error("Found extraneous } in Chalk template literal");y.push(h(p,g)(A.join(""))),A=[],g.pop()}else A.push(R)}),y.push(A.join("")),g.length>0){const T=`Chalk template literal is missing ${g.length} closing bracket${g.length===1?"":"s"} (\`}\`)`;throw new Error(T)}return y.join("")},templates}var source,hasRequiredSource;function requireSource(){if(hasRequiredSource)return source;hasRequiredSource=1;const o=requireAnsiStyles(),{stdout:e,stderr:s}=requireBrowser(),{stringReplaceAll:a,stringEncaseCRLFWithFirstIndex:l}=requireUtil$2(),{isArray:u}=Array,c=["ansi","ansi","ansi256","ansi16m"],d=Object.create(null),h=(k,I={})=>{if(I.level&&!(Number.isInteger(I.level)&&I.level>=0&&I.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const P=e?e.level:0;k.level=I.level===void 0?P:I.level};class p{constructor(I){return m(I)}}const m=k=>{const I={};return h(I,k),I.template=(...P)=>w(I.template,...P),Object.setPrototypeOf(I,g.prototype),Object.setPrototypeOf(I.template,I),I.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},I.template.Instance=p,I.template};function g(k){return m(k)}for(const[k,I]of Object.entries(o))d[k]={get(){const P=E(this,T(I.open,I.close,this._styler),this._isEmpty);return Object.defineProperty(this,k,{value:P}),P}};d.visible={get(){const k=E(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:k}),k}};const y=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const k of y)d[k]={get(){const{level:I}=this;return function(...P){const N=T(o.color[c[I]][k](...P),o.color.close,this._styler);return E(this,N,this._isEmpty)}}};for(const k of y){const I="bg"+k[0].toUpperCase()+k.slice(1);d[I]={get(){const{level:P}=this;return function(...N){const L=T(o.bgColor[c[P]][k](...N),o.bgColor.close,this._styler);return E(this,L,this._isEmpty)}}}}const A=Object.defineProperties(()=>{},{...d,level:{enumerable:!0,get(){return this._generator.level},set(k){this._generator.level=k}}}),T=(k,I,P)=>{let N,L;return P===void 0?(N=k,L=I):(N=P.openAll+k,L=I+P.closeAll),{open:k,close:I,openAll:N,closeAll:L,parent:P}},E=(k,I,P)=>{const N=(...L)=>u(L[0])&&u(L[0].raw)?v(N,w(N,...L)):v(N,L.length===1?""+L[0]:L.join(" "));return Object.setPrototypeOf(N,A),N._generator=k,N._styler=I,N._isEmpty=P,N},v=(k,I)=>{if(k.level<=0||!I)return k._isEmpty?"":I;let P=k._styler;if(P===void 0)return I;const{openAll:N,closeAll:L}=P;if(I.indexOf("\x1B")!==-1)for(;P!==void 0;)I=a(I,P.close,P.open),P=P.parent;const Q=I.indexOf(`
`);return Q!==-1&&(I=l(I,L,N,Q)),N+I+L};let _;const w=(k,...I)=>{const[P]=I;if(!u(P)||!u(P.raw))return I.join(" ");const N=I.slice(1),L=[P.raw[0]];for(let Q=1;Q<P.length;Q++)L.push(String(N[Q-1]).replace(/[{}\\]/g,"\\$&"),String(P.raw[Q]));return _===void 0&&(_=requireTemplates()),_(k,L.join(""))};Object.defineProperties(g.prototype,d);const R=g();return R.supportsColor=e,R.stderr=g({level:s?s.level:0}),R.stderr.supportsColor=s,source=R,source}var hasRequiredLog;function requireLog(){return hasRequiredLog||(hasRequiredLog=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.log=o.LogLevels=void 0;const e=requireSource();var s;(function(u){u.INFO="info",u.WARN="warn",u.ERROR="error",u.DISABLED="disabled"})(s||(o.LogLevels=s={}));const a={[s.INFO]:[],[s.WARN]:[],[s.ERROR]:[],[s.DISABLED]:[]};function l(u){const c={[s.INFO]:d=>`${(0,e.green)("INFO")} ${d}`,[s.WARN]:d=>`${(0,e.yellow)("WARN")} ${d}`,[s.ERROR]:d=>`${(0,e.red)("ERR")} ${d}`};return function(h){const p=c[u](h);a[u].includes(p)||a[u].push(p)}}o.log={[s.INFO]:l(s.INFO),[s.WARN]:l(s.WARN),[s.ERROR]:l(s.ERROR),LogLevels:s,get:()=>a,add:u=>{a[s.INFO]=a[s.INFO].concat(u[s.INFO]),a[s.WARN]=a[s.WARN].concat(u[s.WARN]),a[s.ERROR]=a[s.ERROR].concat(u[s.ERROR])},clear:()=>{a[s.INFO]=[],a[s.WARN]=[],a[s.ERROR]=[]},isEmpty:()=>!(a[s.INFO].length||a[s.WARN].length||a[s.ERROR].length)},o.default=o.log})(log)),log}var logExports=requireLog(),markdownItSup,hasRequiredMarkdownItSup;function requireMarkdownItSup(){if(hasRequiredMarkdownItSup)return markdownItSup;hasRequiredMarkdownItSup=1;var o=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function e(s,a){var l,u,c,d=s.posMax,h=s.pos;if(s.src.charCodeAt(h)!==94||a||h+2>=d)return!1;for(s.pos=h+1;s.pos<d;){if(s.src.charCodeAt(s.pos)===94){l=!0;break}s.md.inline.skipToken(s)}return!l||h+1===s.pos||(u=s.src.slice(h+1,s.pos),u.match(/(^|[^\\])(\\\\)*\s/))?(s.pos=h,!1):(s.posMax=s.pos,s.pos=h+1,c=s.push("sup_open","sup",1),c.markup="^",c=s.push("text","",0),c.content=u.replace(o,"$1"),c=s.push("sup_close","sup",-1),c.markup="^",s.pos=s.posMax+1,s.posMax=d,!0)}return markdownItSup=function(a){a.inline.ruler.after("emphasis","sup",e)},markdownItSup}var sup$1,hasRequiredSup;function requireSup(){if(hasRequiredSup)return sup$1;hasRequiredSup=1;var o=sup$1&&sup$1.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};return sup$1=o(requireMarkdownItSup()).default,sup$1}var supExports=requireSup();const sup=getDefaultExportFromCjs$1(supExports),superscriptMarkName="sup",superscriptType=markTypeFactory(superscriptMarkName),SuperscriptSpecs=o=>{o.configureMd(e=>e.use(sup,{log:logExports.log})).addMark(superscriptMarkName,()=>({spec:{excludes:"_",parseDOM:[{tag:"sup"}],toDOM(){return["sup"]}},toMd:{open:e=>(e.escapeWhitespace=!0,"^"),close:e=>(e.escapeWhitespace=!1,"^"),mixable:!0,expelEnclosingWhitespace:!0},fromMd:{tokenSpec:{name:superscriptMarkName,type:"mark"}}}))};var HtmlNode;(function(o){o.Block="html_block",o.Inline="html_inline"})(HtmlNode||(HtmlNode={}));var HtmlAttr;(function(o){o.Content="html-content"})(HtmlAttr||(HtmlAttr={}));const parserTokens$7={[HtmlNode.Block]:{name:HtmlNode.Block,type:"node",noCloseToken:!0,getAttrs:o=>({[HtmlAttr.Content]:o.content})},[HtmlNode.Inline]:{name:HtmlNode.Inline,type:"node",noCloseToken:!0,getAttrs:o=>({[HtmlAttr.Content]:o.content})}};var sanitize$2={},lib$7={},Parser$3={},Tokenizer$2={},decode$1={},decodeDataHtml={},hasRequiredDecodeDataHtml;function requireDecodeDataHtml(){return hasRequiredDecodeDataHtml||(hasRequiredDecodeDataHtml=1,Object.defineProperty(decodeDataHtml,"__esModule",{value:!0}),decodeDataHtml.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(o){return o.charCodeAt(0)}))),decodeDataHtml}var decodeDataXml={},hasRequiredDecodeDataXml;function requireDecodeDataXml(){return hasRequiredDecodeDataXml||(hasRequiredDecodeDataXml=1,Object.defineProperty(decodeDataXml,"__esModule",{value:!0}),decodeDataXml.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(o){return o.charCodeAt(0)}))),decodeDataXml}var decode_codepoint={},hasRequiredDecode_codepoint;function requireDecode_codepoint(){return hasRequiredDecode_codepoint||(hasRequiredDecode_codepoint=1,(function(o){var e;Object.defineProperty(o,"__esModule",{value:!0}),o.replaceCodePoint=o.fromCodePoint=void 0;var s=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);o.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:function(u){var c="";return u>65535&&(u-=65536,c+=String.fromCharCode(u>>>10&1023|55296),u=56320|u&1023),c+=String.fromCharCode(u),c};function a(u){var c;return u>=55296&&u<=57343||u>1114111?65533:(c=s.get(u))!==null&&c!==void 0?c:u}o.replaceCodePoint=a;function l(u){return(0,o.fromCodePoint)(a(u))}o.default=l})(decode_codepoint)),decode_codepoint}var hasRequiredDecode;function requireDecode(){return hasRequiredDecode||(hasRequiredDecode=1,(function(o){var e=decode$1&&decode$1.__createBinding||(Object.create?(function(F,V,J,z){z===void 0&&(z=J);var Y=Object.getOwnPropertyDescriptor(V,J);(!Y||("get"in Y?!V.__esModule:Y.writable||Y.configurable))&&(Y={enumerable:!0,get:function(){return V[J]}}),Object.defineProperty(F,z,Y)}):(function(F,V,J,z){z===void 0&&(z=J),F[z]=V[J]})),s=decode$1&&decode$1.__setModuleDefault||(Object.create?(function(F,V){Object.defineProperty(F,"default",{enumerable:!0,value:V})}):function(F,V){F.default=V}),a=decode$1&&decode$1.__importStar||function(F){if(F&&F.__esModule)return F;var V={};if(F!=null)for(var J in F)J!=="default"&&Object.prototype.hasOwnProperty.call(F,J)&&e(V,F,J);return s(V,F),V},l=decode$1&&decode$1.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(o,"__esModule",{value:!0}),o.decodeXML=o.decodeHTMLStrict=o.decodeHTMLAttribute=o.decodeHTML=o.determineBranch=o.EntityDecoder=o.DecodingMode=o.BinTrieFlags=o.fromCodePoint=o.replaceCodePoint=o.decodeCodePoint=o.xmlDecodeTree=o.htmlDecodeTree=void 0;var u=l(requireDecodeDataHtml());o.htmlDecodeTree=u.default;var c=l(requireDecodeDataXml());o.xmlDecodeTree=c.default;var d=a(requireDecode_codepoint());o.decodeCodePoint=d.default;var h=requireDecode_codepoint();Object.defineProperty(o,"replaceCodePoint",{enumerable:!0,get:function(){return h.replaceCodePoint}}),Object.defineProperty(o,"fromCodePoint",{enumerable:!0,get:function(){return h.fromCodePoint}});var p;(function(F){F[F.NUM=35]="NUM",F[F.SEMI=59]="SEMI",F[F.EQUALS=61]="EQUALS",F[F.ZERO=48]="ZERO",F[F.NINE=57]="NINE",F[F.LOWER_A=97]="LOWER_A",F[F.LOWER_F=102]="LOWER_F",F[F.LOWER_X=120]="LOWER_X",F[F.LOWER_Z=122]="LOWER_Z",F[F.UPPER_A=65]="UPPER_A",F[F.UPPER_F=70]="UPPER_F",F[F.UPPER_Z=90]="UPPER_Z"})(p||(p={}));var m=32,g;(function(F){F[F.VALUE_LENGTH=49152]="VALUE_LENGTH",F[F.BRANCH_LENGTH=16256]="BRANCH_LENGTH",F[F.JUMP_TABLE=127]="JUMP_TABLE"})(g=o.BinTrieFlags||(o.BinTrieFlags={}));function y(F){return F>=p.ZERO&&F<=p.NINE}function A(F){return F>=p.UPPER_A&&F<=p.UPPER_F||F>=p.LOWER_A&&F<=p.LOWER_F}function T(F){return F>=p.UPPER_A&&F<=p.UPPER_Z||F>=p.LOWER_A&&F<=p.LOWER_Z||y(F)}function E(F){return F===p.EQUALS||T(F)}var v;(function(F){F[F.EntityStart=0]="EntityStart",F[F.NumericStart=1]="NumericStart",F[F.NumericDecimal=2]="NumericDecimal",F[F.NumericHex=3]="NumericHex",F[F.NamedEntity=4]="NamedEntity"})(v||(v={}));var _;(function(F){F[F.Legacy=0]="Legacy",F[F.Strict=1]="Strict",F[F.Attribute=2]="Attribute"})(_=o.DecodingMode||(o.DecodingMode={}));var w=(function(){function F(V,J,z){this.decodeTree=V,this.emitCodePoint=J,this.errors=z,this.state=v.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=_.Strict}return F.prototype.startEntity=function(V){this.decodeMode=V,this.state=v.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},F.prototype.write=function(V,J){switch(this.state){case v.EntityStart:return V.charCodeAt(J)===p.NUM?(this.state=v.NumericStart,this.consumed+=1,this.stateNumericStart(V,J+1)):(this.state=v.NamedEntity,this.stateNamedEntity(V,J));case v.NumericStart:return this.stateNumericStart(V,J);case v.NumericDecimal:return this.stateNumericDecimal(V,J);case v.NumericHex:return this.stateNumericHex(V,J);case v.NamedEntity:return this.stateNamedEntity(V,J)}},F.prototype.stateNumericStart=function(V,J){return J>=V.length?-1:(V.charCodeAt(J)|m)===p.LOWER_X?(this.state=v.NumericHex,this.consumed+=1,this.stateNumericHex(V,J+1)):(this.state=v.NumericDecimal,this.stateNumericDecimal(V,J))},F.prototype.addToNumericResult=function(V,J,z,Y){if(J!==z){var fe=z-J;this.result=this.result*Math.pow(Y,fe)+parseInt(V.substr(J,fe),Y),this.consumed+=fe}},F.prototype.stateNumericHex=function(V,J){for(var z=J;J<V.length;){var Y=V.charCodeAt(J);if(y(Y)||A(Y))J+=1;else return this.addToNumericResult(V,z,J,16),this.emitNumericEntity(Y,3)}return this.addToNumericResult(V,z,J,16),-1},F.prototype.stateNumericDecimal=function(V,J){for(var z=J;J<V.length;){var Y=V.charCodeAt(J);if(y(Y))J+=1;else return this.addToNumericResult(V,z,J,10),this.emitNumericEntity(Y,2)}return this.addToNumericResult(V,z,J,10),-1},F.prototype.emitNumericEntity=function(V,J){var z;if(this.consumed<=J)return(z=this.errors)===null||z===void 0||z.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(V===p.SEMI)this.consumed+=1;else if(this.decodeMode===_.Strict)return 0;return this.emitCodePoint((0,d.replaceCodePoint)(this.result),this.consumed),this.errors&&(V!==p.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},F.prototype.stateNamedEntity=function(V,J){for(var z=this.decodeTree,Y=z[this.treeIndex],fe=(Y&g.VALUE_LENGTH)>>14;J<V.length;J++,this.excess++){var de=V.charCodeAt(J);if(this.treeIndex=k(z,Y,this.treeIndex+Math.max(1,fe),de),this.treeIndex<0)return this.result===0||this.decodeMode===_.Attribute&&(fe===0||E(de))?0:this.emitNotTerminatedNamedEntity();if(Y=z[this.treeIndex],fe=(Y&g.VALUE_LENGTH)>>14,fe!==0){if(de===p.SEMI)return this.emitNamedEntityData(this.treeIndex,fe,this.consumed+this.excess);this.decodeMode!==_.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},F.prototype.emitNotTerminatedNamedEntity=function(){var V,J=this,z=J.result,Y=J.decodeTree,fe=(Y[z]&g.VALUE_LENGTH)>>14;return this.emitNamedEntityData(z,fe,this.consumed),(V=this.errors)===null||V===void 0||V.missingSemicolonAfterCharacterReference(),this.consumed},F.prototype.emitNamedEntityData=function(V,J,z){var Y=this.decodeTree;return this.emitCodePoint(J===1?Y[V]&~g.VALUE_LENGTH:Y[V+1],z),J===3&&this.emitCodePoint(Y[V+2],z),z},F.prototype.end=function(){var V;switch(this.state){case v.NamedEntity:return this.result!==0&&(this.decodeMode!==_.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case v.NumericDecimal:return this.emitNumericEntity(0,2);case v.NumericHex:return this.emitNumericEntity(0,3);case v.NumericStart:return(V=this.errors)===null||V===void 0||V.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case v.EntityStart:return 0}},F})();o.EntityDecoder=w;function R(F){var V="",J=new w(F,function(z){return V+=(0,d.fromCodePoint)(z)});return function(Y,fe){for(var de=0,X=0;(X=Y.indexOf("&",X))>=0;){V+=Y.slice(de,X),J.startEntity(fe);var he=J.write(Y,X+1);if(he<0){de=X+J.end();break}de=X+he,X=he===0?de+1:de}var ue=V+Y.slice(de);return V="",ue}}function k(F,V,J,z){var Y=(V&g.BRANCH_LENGTH)>>7,fe=V&g.JUMP_TABLE;if(Y===0)return fe!==0&&z===fe?J:-1;if(fe){var de=z-fe;return de<0||de>=Y?-1:F[J+de]-1}for(var X=J,he=X+Y-1;X<=he;){var ue=X+he>>>1,G=F[ue];if(G<z)X=ue+1;else if(G>z)he=ue-1;else return F[ue+Y]}return-1}o.determineBranch=k;var I=R(u.default),P=R(c.default);function N(F,V){return V===void 0&&(V=_.Legacy),I(F,V)}o.decodeHTML=N;function L(F){return I(F,_.Attribute)}o.decodeHTMLAttribute=L;function Q(F){return I(F,_.Strict)}o.decodeHTMLStrict=Q;function j(F){return P(F,_.Strict)}o.decodeXML=j})(decode$1)),decode$1}var hasRequiredTokenizer;function requireTokenizer(){return hasRequiredTokenizer||(hasRequiredTokenizer=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.QuoteType=void 0;var e=requireDecode(),s;(function(y){y[y.Tab=9]="Tab",y[y.NewLine=10]="NewLine",y[y.FormFeed=12]="FormFeed",y[y.CarriageReturn=13]="CarriageReturn",y[y.Space=32]="Space",y[y.ExclamationMark=33]="ExclamationMark",y[y.Number=35]="Number",y[y.Amp=38]="Amp",y[y.SingleQuote=39]="SingleQuote",y[y.DoubleQuote=34]="DoubleQuote",y[y.Dash=45]="Dash",y[y.Slash=47]="Slash",y[y.Zero=48]="Zero",y[y.Nine=57]="Nine",y[y.Semi=59]="Semi",y[y.Lt=60]="Lt",y[y.Eq=61]="Eq",y[y.Gt=62]="Gt",y[y.Questionmark=63]="Questionmark",y[y.UpperA=65]="UpperA",y[y.LowerA=97]="LowerA",y[y.UpperF=70]="UpperF",y[y.LowerF=102]="LowerF",y[y.UpperZ=90]="UpperZ",y[y.LowerZ=122]="LowerZ",y[y.LowerX=120]="LowerX",y[y.OpeningSquareBracket=91]="OpeningSquareBracket"})(s||(s={}));var a;(function(y){y[y.Text=1]="Text",y[y.BeforeTagName=2]="BeforeTagName",y[y.InTagName=3]="InTagName",y[y.InSelfClosingTag=4]="InSelfClosingTag",y[y.BeforeClosingTagName=5]="BeforeClosingTagName",y[y.InClosingTagName=6]="InClosingTagName",y[y.AfterClosingTagName=7]="AfterClosingTagName",y[y.BeforeAttributeName=8]="BeforeAttributeName",y[y.InAttributeName=9]="InAttributeName",y[y.AfterAttributeName=10]="AfterAttributeName",y[y.BeforeAttributeValue=11]="BeforeAttributeValue",y[y.InAttributeValueDq=12]="InAttributeValueDq",y[y.InAttributeValueSq=13]="InAttributeValueSq",y[y.InAttributeValueNq=14]="InAttributeValueNq",y[y.BeforeDeclaration=15]="BeforeDeclaration",y[y.InDeclaration=16]="InDeclaration",y[y.InProcessingInstruction=17]="InProcessingInstruction",y[y.BeforeComment=18]="BeforeComment",y[y.CDATASequence=19]="CDATASequence",y[y.InSpecialComment=20]="InSpecialComment",y[y.InCommentLike=21]="InCommentLike",y[y.BeforeSpecialS=22]="BeforeSpecialS",y[y.SpecialStartSequence=23]="SpecialStartSequence",y[y.InSpecialTag=24]="InSpecialTag",y[y.BeforeEntity=25]="BeforeEntity",y[y.BeforeNumericEntity=26]="BeforeNumericEntity",y[y.InNamedEntity=27]="InNamedEntity",y[y.InNumericEntity=28]="InNumericEntity",y[y.InHexEntity=29]="InHexEntity"})(a||(a={}));function l(y){return y===s.Space||y===s.NewLine||y===s.Tab||y===s.FormFeed||y===s.CarriageReturn}function u(y){return y===s.Slash||y===s.Gt||l(y)}function c(y){return y>=s.Zero&&y<=s.Nine}function d(y){return y>=s.LowerA&&y<=s.LowerZ||y>=s.UpperA&&y<=s.UpperZ}function h(y){return y>=s.UpperA&&y<=s.UpperF||y>=s.LowerA&&y<=s.LowerF}var p;(function(y){y[y.NoValue=0]="NoValue",y[y.Unquoted=1]="Unquoted",y[y.Single=2]="Single",y[y.Double=3]="Double"})(p=o.QuoteType||(o.QuoteType={}));var m={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},g=(function(){function y(A,T){var E=A.xmlMode,v=E===void 0?!1:E,_=A.decodeEntities,w=_===void 0?!0:_;this.cbs=T,this.state=a.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=a.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=v,this.decodeEntities=w,this.entityTrie=v?e.xmlDecodeTree:e.htmlDecodeTree}return y.prototype.reset=function(){this.state=a.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=a.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},y.prototype.write=function(A){this.offset+=this.buffer.length,this.buffer=A,this.parse()},y.prototype.end=function(){this.running&&this.finish()},y.prototype.pause=function(){this.running=!1},y.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},y.prototype.getIndex=function(){return this.index},y.prototype.getSectionStart=function(){return this.sectionStart},y.prototype.stateText=function(A){A===s.Lt||!this.decodeEntities&&this.fastForwardTo(s.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=a.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&A===s.Amp&&(this.state=a.BeforeEntity)},y.prototype.stateSpecialStartSequence=function(A){var T=this.sequenceIndex===this.currentSequence.length,E=T?u(A):(A|32)===this.currentSequence[this.sequenceIndex];if(!E)this.isSpecial=!1;else if(!T){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=a.InTagName,this.stateInTagName(A)},y.prototype.stateInSpecialTag=function(A){if(this.sequenceIndex===this.currentSequence.length){if(A===s.Gt||l(A)){var T=this.index-this.currentSequence.length;if(this.sectionStart<T){var E=this.index;this.index=T,this.cbs.ontext(this.sectionStart,T),this.index=E}this.isSpecial=!1,this.sectionStart=T+2,this.stateInClosingTagName(A);return}this.sequenceIndex=0}(A|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===m.TitleEnd?this.decodeEntities&&A===s.Amp&&(this.state=a.BeforeEntity):this.fastForwardTo(s.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(A===s.Lt)},y.prototype.stateCDATASequence=function(A){A===m.Cdata[this.sequenceIndex]?++this.sequenceIndex===m.Cdata.length&&(this.state=a.InCommentLike,this.currentSequence=m.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=a.InDeclaration,this.stateInDeclaration(A))},y.prototype.fastForwardTo=function(A){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===A)return!0;return this.index=this.buffer.length+this.offset-1,!1},y.prototype.stateInCommentLike=function(A){A===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===m.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=a.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):A!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},y.prototype.isTagStartChar=function(A){return this.xmlMode?!u(A):d(A)},y.prototype.startSpecial=function(A,T){this.isSpecial=!0,this.currentSequence=A,this.sequenceIndex=T,this.state=a.SpecialStartSequence},y.prototype.stateBeforeTagName=function(A){if(A===s.ExclamationMark)this.state=a.BeforeDeclaration,this.sectionStart=this.index+1;else if(A===s.Questionmark)this.state=a.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(A)){var T=A|32;this.sectionStart=this.index,!this.xmlMode&&T===m.TitleEnd[2]?this.startSpecial(m.TitleEnd,3):this.state=!this.xmlMode&&T===m.ScriptEnd[2]?a.BeforeSpecialS:a.InTagName}else A===s.Slash?this.state=a.BeforeClosingTagName:(this.state=a.Text,this.stateText(A))},y.prototype.stateInTagName=function(A){u(A)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=a.BeforeAttributeName,this.stateBeforeAttributeName(A))},y.prototype.stateBeforeClosingTagName=function(A){l(A)||(A===s.Gt?this.state=a.Text:(this.state=this.isTagStartChar(A)?a.InClosingTagName:a.InSpecialComment,this.sectionStart=this.index))},y.prototype.stateInClosingTagName=function(A){(A===s.Gt||l(A))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=a.AfterClosingTagName,this.stateAfterClosingTagName(A))},y.prototype.stateAfterClosingTagName=function(A){(A===s.Gt||this.fastForwardTo(s.Gt))&&(this.state=a.Text,this.baseState=a.Text,this.sectionStart=this.index+1)},y.prototype.stateBeforeAttributeName=function(A){A===s.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=a.InSpecialTag,this.sequenceIndex=0):this.state=a.Text,this.baseState=this.state,this.sectionStart=this.index+1):A===s.Slash?this.state=a.InSelfClosingTag:l(A)||(this.state=a.InAttributeName,this.sectionStart=this.index)},y.prototype.stateInSelfClosingTag=function(A){A===s.Gt?(this.cbs.onselfclosingtag(this.index),this.state=a.Text,this.baseState=a.Text,this.sectionStart=this.index+1,this.isSpecial=!1):l(A)||(this.state=a.BeforeAttributeName,this.stateBeforeAttributeName(A))},y.prototype.stateInAttributeName=function(A){(A===s.Eq||u(A))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=a.AfterAttributeName,this.stateAfterAttributeName(A))},y.prototype.stateAfterAttributeName=function(A){A===s.Eq?this.state=a.BeforeAttributeValue:A===s.Slash||A===s.Gt?(this.cbs.onattribend(p.NoValue,this.index),this.state=a.BeforeAttributeName,this.stateBeforeAttributeName(A)):l(A)||(this.cbs.onattribend(p.NoValue,this.index),this.state=a.InAttributeName,this.sectionStart=this.index)},y.prototype.stateBeforeAttributeValue=function(A){A===s.DoubleQuote?(this.state=a.InAttributeValueDq,this.sectionStart=this.index+1):A===s.SingleQuote?(this.state=a.InAttributeValueSq,this.sectionStart=this.index+1):l(A)||(this.sectionStart=this.index,this.state=a.InAttributeValueNq,this.stateInAttributeValueNoQuotes(A))},y.prototype.handleInAttributeValue=function(A,T){A===T||!this.decodeEntities&&this.fastForwardTo(T)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(T===s.DoubleQuote?p.Double:p.Single,this.index),this.state=a.BeforeAttributeName):this.decodeEntities&&A===s.Amp&&(this.baseState=this.state,this.state=a.BeforeEntity)},y.prototype.stateInAttributeValueDoubleQuotes=function(A){this.handleInAttributeValue(A,s.DoubleQuote)},y.prototype.stateInAttributeValueSingleQuotes=function(A){this.handleInAttributeValue(A,s.SingleQuote)},y.prototype.stateInAttributeValueNoQuotes=function(A){l(A)||A===s.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(p.Unquoted,this.index),this.state=a.BeforeAttributeName,this.stateBeforeAttributeName(A)):this.decodeEntities&&A===s.Amp&&(this.baseState=this.state,this.state=a.BeforeEntity)},y.prototype.stateBeforeDeclaration=function(A){A===s.OpeningSquareBracket?(this.state=a.CDATASequence,this.sequenceIndex=0):this.state=A===s.Dash?a.BeforeComment:a.InDeclaration},y.prototype.stateInDeclaration=function(A){(A===s.Gt||this.fastForwardTo(s.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=a.Text,this.sectionStart=this.index+1)},y.prototype.stateInProcessingInstruction=function(A){(A===s.Gt||this.fastForwardTo(s.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=a.Text,this.sectionStart=this.index+1)},y.prototype.stateBeforeComment=function(A){A===s.Dash?(this.state=a.InCommentLike,this.currentSequence=m.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=a.InDeclaration},y.prototype.stateInSpecialComment=function(A){(A===s.Gt||this.fastForwardTo(s.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=a.Text,this.sectionStart=this.index+1)},y.prototype.stateBeforeSpecialS=function(A){var T=A|32;T===m.ScriptEnd[3]?this.startSpecial(m.ScriptEnd,4):T===m.StyleEnd[3]?this.startSpecial(m.StyleEnd,4):(this.state=a.InTagName,this.stateInTagName(A))},y.prototype.stateBeforeEntity=function(A){this.entityExcess=1,this.entityResult=0,A===s.Number?this.state=a.BeforeNumericEntity:A===s.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=a.InNamedEntity,this.stateInNamedEntity(A))},y.prototype.stateInNamedEntity=function(A){if(this.entityExcess+=1,this.trieIndex=(0,e.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,A),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var T=this.trieCurrent&e.BinTrieFlags.VALUE_LENGTH;if(T){var E=(T>>14)-1;if(!this.allowLegacyEntity()&&A!==s.Semi)this.trieIndex+=E;else{var v=this.index-this.entityExcess+1;v>this.sectionStart&&this.emitPartial(this.sectionStart,v),this.entityResult=this.trieIndex,this.trieIndex+=E,this.entityExcess=0,this.sectionStart=this.index+1,E===0&&this.emitNamedEntity()}}},y.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var A=(this.entityTrie[this.entityResult]&e.BinTrieFlags.VALUE_LENGTH)>>14;switch(A){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~e.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},y.prototype.stateBeforeNumericEntity=function(A){(A|32)===s.LowerX?(this.entityExcess++,this.state=a.InHexEntity):(this.state=a.InNumericEntity,this.stateInNumericEntity(A))},y.prototype.emitNumericEntity=function(A){var T=this.index-this.entityExcess-1,E=T+2+ +(this.state===a.InHexEntity);E!==this.index&&(T>this.sectionStart&&this.emitPartial(this.sectionStart,T),this.sectionStart=this.index+Number(A),this.emitCodePoint((0,e.replaceCodePoint)(this.entityResult))),this.state=this.baseState},y.prototype.stateInNumericEntity=function(A){A===s.Semi?this.emitNumericEntity(!0):c(A)?(this.entityResult=this.entityResult*10+(A-s.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},y.prototype.stateInHexEntity=function(A){A===s.Semi?this.emitNumericEntity(!0):c(A)?(this.entityResult=this.entityResult*16+(A-s.Zero),this.entityExcess++):h(A)?(this.entityResult=this.entityResult*16+((A|32)-s.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},y.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===a.Text||this.baseState===a.InSpecialTag)},y.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===a.Text||this.state===a.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===a.InAttributeValueDq||this.state===a.InAttributeValueSq||this.state===a.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},y.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},y.prototype.parse=function(){for(;this.shouldContinue();){var A=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case a.Text:{this.stateText(A);break}case a.SpecialStartSequence:{this.stateSpecialStartSequence(A);break}case a.InSpecialTag:{this.stateInSpecialTag(A);break}case a.CDATASequence:{this.stateCDATASequence(A);break}case a.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(A);break}case a.InAttributeName:{this.stateInAttributeName(A);break}case a.InCommentLike:{this.stateInCommentLike(A);break}case a.InSpecialComment:{this.stateInSpecialComment(A);break}case a.BeforeAttributeName:{this.stateBeforeAttributeName(A);break}case a.InTagName:{this.stateInTagName(A);break}case a.InClosingTagName:{this.stateInClosingTagName(A);break}case a.BeforeTagName:{this.stateBeforeTagName(A);break}case a.AfterAttributeName:{this.stateAfterAttributeName(A);break}case a.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(A);break}case a.BeforeAttributeValue:{this.stateBeforeAttributeValue(A);break}case a.BeforeClosingTagName:{this.stateBeforeClosingTagName(A);break}case a.AfterClosingTagName:{this.stateAfterClosingTagName(A);break}case a.BeforeSpecialS:{this.stateBeforeSpecialS(A);break}case a.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(A);break}case a.InSelfClosingTag:{this.stateInSelfClosingTag(A);break}case a.InDeclaration:{this.stateInDeclaration(A);break}case a.BeforeDeclaration:{this.stateBeforeDeclaration(A);break}case a.BeforeComment:{this.stateBeforeComment(A);break}case a.InProcessingInstruction:{this.stateInProcessingInstruction(A);break}case a.InNamedEntity:{this.stateInNamedEntity(A);break}case a.BeforeEntity:{this.stateBeforeEntity(A);break}case a.InHexEntity:{this.stateInHexEntity(A);break}case a.InNumericEntity:{this.stateInNumericEntity(A);break}default:this.stateBeforeNumericEntity(A)}this.index++}this.cleanup()},y.prototype.finish=function(){this.state===a.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},y.prototype.handleTrailingData=function(){var A=this.buffer.length+this.offset;this.state===a.InCommentLike?this.currentSequence===m.CdataEnd?this.cbs.oncdata(this.sectionStart,A,0):this.cbs.oncomment(this.sectionStart,A,0):this.state===a.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===a.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===a.InTagName||this.state===a.BeforeAttributeName||this.state===a.BeforeAttributeValue||this.state===a.AfterAttributeName||this.state===a.InAttributeName||this.state===a.InAttributeValueSq||this.state===a.InAttributeValueDq||this.state===a.InAttributeValueNq||this.state===a.InClosingTagName||this.cbs.ontext(this.sectionStart,A)},y.prototype.emitPartial=function(A,T){this.baseState!==a.Text&&this.baseState!==a.InSpecialTag?this.cbs.onattribdata(A,T):this.cbs.ontext(A,T)},y.prototype.emitCodePoint=function(A){this.baseState!==a.Text&&this.baseState!==a.InSpecialTag?this.cbs.onattribentity(A):this.cbs.ontextentity(A)},y})();o.default=g})(Tokenizer$2)),Tokenizer$2}var hasRequiredParser$2;function requireParser$2(){if(hasRequiredParser$2)return Parser$3;hasRequiredParser$2=1;var o=Parser$3&&Parser$3.__createBinding||(Object.create?(function(v,_,w,R){R===void 0&&(R=w);var k=Object.getOwnPropertyDescriptor(_,w);(!k||("get"in k?!_.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return _[w]}}),Object.defineProperty(v,R,k)}):(function(v,_,w,R){R===void 0&&(R=w),v[R]=_[w]})),e=Parser$3&&Parser$3.__setModuleDefault||(Object.create?(function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}):function(v,_){v.default=_}),s=Parser$3&&Parser$3.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var w in v)w!=="default"&&Object.prototype.hasOwnProperty.call(v,w)&&o(_,v,w);return e(_,v),_};Object.defineProperty(Parser$3,"__esModule",{value:!0}),Parser$3.Parser=void 0;var a=s(requireTokenizer()),l=requireDecode(),u=new Set(["input","option","optgroup","select","button","datalist","textarea"]),c=new Set(["p"]),d=new Set(["thead","tbody"]),h=new Set(["dd","dt"]),p=new Set(["rt","rp"]),m=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",c],["h1",c],["h2",c],["h3",c],["h4",c],["h5",c],["h6",c],["select",u],["input",u],["output",u],["button",u],["datalist",u],["textarea",u],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",h],["dt",h],["address",c],["article",c],["aside",c],["blockquote",c],["details",c],["div",c],["dl",c],["fieldset",c],["figcaption",c],["figure",c],["footer",c],["form",c],["header",c],["hr",c],["main",c],["nav",c],["ol",c],["pre",c],["section",c],["table",c],["ul",c],["rt",p],["rp",p],["tbody",d],["tfoot",d]]),g=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),y=new Set(["math","svg"]),A=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),T=/\s|\//,E=(function(){function v(_,w){w===void 0&&(w={});var R,k,I,P,N;this.options=w,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=_??{},this.lowerCaseTagNames=(R=w.lowerCaseTags)!==null&&R!==void 0?R:!w.xmlMode,this.lowerCaseAttributeNames=(k=w.lowerCaseAttributeNames)!==null&&k!==void 0?k:!w.xmlMode,this.tokenizer=new((I=w.Tokenizer)!==null&&I!==void 0?I:a.default)(this.options,this),(N=(P=this.cbs).onparserinit)===null||N===void 0||N.call(P,this)}return v.prototype.ontext=function(_,w){var R,k,I=this.getSlice(_,w);this.endIndex=w-1,(k=(R=this.cbs).ontext)===null||k===void 0||k.call(R,I),this.startIndex=w},v.prototype.ontextentity=function(_){var w,R,k=this.tokenizer.getSectionStart();this.endIndex=k-1,(R=(w=this.cbs).ontext)===null||R===void 0||R.call(w,(0,l.fromCodePoint)(_)),this.startIndex=k},v.prototype.isVoidElement=function(_){return!this.options.xmlMode&&g.has(_)},v.prototype.onopentagname=function(_,w){this.endIndex=w;var R=this.getSlice(_,w);this.lowerCaseTagNames&&(R=R.toLowerCase()),this.emitOpenTag(R)},v.prototype.emitOpenTag=function(_){var w,R,k,I;this.openTagStart=this.startIndex,this.tagname=_;var P=!this.options.xmlMode&&m.get(_);if(P)for(;this.stack.length>0&&P.has(this.stack[this.stack.length-1]);){var N=this.stack.pop();(R=(w=this.cbs).onclosetag)===null||R===void 0||R.call(w,N,!0)}this.isVoidElement(_)||(this.stack.push(_),y.has(_)?this.foreignContext.push(!0):A.has(_)&&this.foreignContext.push(!1)),(I=(k=this.cbs).onopentagname)===null||I===void 0||I.call(k,_),this.cbs.onopentag&&(this.attribs={})},v.prototype.endOpenTag=function(_){var w,R;this.startIndex=this.openTagStart,this.attribs&&((R=(w=this.cbs).onopentag)===null||R===void 0||R.call(w,this.tagname,this.attribs,_),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},v.prototype.onopentagend=function(_){this.endIndex=_,this.endOpenTag(!1),this.startIndex=_+1},v.prototype.onclosetag=function(_,w){var R,k,I,P,N,L;this.endIndex=w;var Q=this.getSlice(_,w);if(this.lowerCaseTagNames&&(Q=Q.toLowerCase()),(y.has(Q)||A.has(Q))&&this.foreignContext.pop(),this.isVoidElement(Q))!this.options.xmlMode&&Q==="br"&&((k=(R=this.cbs).onopentagname)===null||k===void 0||k.call(R,"br"),(P=(I=this.cbs).onopentag)===null||P===void 0||P.call(I,"br",{},!0),(L=(N=this.cbs).onclosetag)===null||L===void 0||L.call(N,"br",!1));else{var j=this.stack.lastIndexOf(Q);if(j!==-1)if(this.cbs.onclosetag)for(var F=this.stack.length-j;F--;)this.cbs.onclosetag(this.stack.pop(),F!==0);else this.stack.length=j;else!this.options.xmlMode&&Q==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=w+1},v.prototype.onselfclosingtag=function(_){this.endIndex=_,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=_+1):this.onopentagend(_)},v.prototype.closeCurrentTag=function(_){var w,R,k=this.tagname;this.endOpenTag(_),this.stack[this.stack.length-1]===k&&((R=(w=this.cbs).onclosetag)===null||R===void 0||R.call(w,k,!_),this.stack.pop())},v.prototype.onattribname=function(_,w){this.startIndex=_;var R=this.getSlice(_,w);this.attribname=this.lowerCaseAttributeNames?R.toLowerCase():R},v.prototype.onattribdata=function(_,w){this.attribvalue+=this.getSlice(_,w)},v.prototype.onattribentity=function(_){this.attribvalue+=(0,l.fromCodePoint)(_)},v.prototype.onattribend=function(_,w){var R,k;this.endIndex=w,(k=(R=this.cbs).onattribute)===null||k===void 0||k.call(R,this.attribname,this.attribvalue,_===a.QuoteType.Double?'"':_===a.QuoteType.Single?"'":_===a.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},v.prototype.getInstructionName=function(_){var w=_.search(T),R=w<0?_:_.substr(0,w);return this.lowerCaseTagNames&&(R=R.toLowerCase()),R},v.prototype.ondeclaration=function(_,w){this.endIndex=w;var R=this.getSlice(_,w);if(this.cbs.onprocessinginstruction){var k=this.getInstructionName(R);this.cbs.onprocessinginstruction("!".concat(k),"!".concat(R))}this.startIndex=w+1},v.prototype.onprocessinginstruction=function(_,w){this.endIndex=w;var R=this.getSlice(_,w);if(this.cbs.onprocessinginstruction){var k=this.getInstructionName(R);this.cbs.onprocessinginstruction("?".concat(k),"?".concat(R))}this.startIndex=w+1},v.prototype.oncomment=function(_,w,R){var k,I,P,N;this.endIndex=w,(I=(k=this.cbs).oncomment)===null||I===void 0||I.call(k,this.getSlice(_,w-R)),(N=(P=this.cbs).oncommentend)===null||N===void 0||N.call(P),this.startIndex=w+1},v.prototype.oncdata=function(_,w,R){var k,I,P,N,L,Q,j,F,V,J;this.endIndex=w;var z=this.getSlice(_,w-R);this.options.xmlMode||this.options.recognizeCDATA?((I=(k=this.cbs).oncdatastart)===null||I===void 0||I.call(k),(N=(P=this.cbs).ontext)===null||N===void 0||N.call(P,z),(Q=(L=this.cbs).oncdataend)===null||Q===void 0||Q.call(L)):((F=(j=this.cbs).oncomment)===null||F===void 0||F.call(j,"[CDATA[".concat(z,"]]")),(J=(V=this.cbs).oncommentend)===null||J===void 0||J.call(V)),this.startIndex=w+1},v.prototype.onend=function(){var _,w;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var R=this.stack.length;R>0;this.cbs.onclosetag(this.stack[--R],!0));}(w=(_=this.cbs).onend)===null||w===void 0||w.call(_)},v.prototype.reset=function(){var _,w,R,k;(w=(_=this.cbs).onreset)===null||w===void 0||w.call(_),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(k=(R=this.cbs).onparserinit)===null||k===void 0||k.call(R,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},v.prototype.parseComplete=function(_){this.reset(),this.end(_)},v.prototype.getSlice=function(_,w){for(;_-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var R=this.buffers[0].slice(_-this.bufferOffset,w-this.bufferOffset);w-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),R+=this.buffers[0].slice(0,w-this.bufferOffset);return R},v.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},v.prototype.write=function(_){var w,R;if(this.ended){(R=(w=this.cbs).onerror)===null||R===void 0||R.call(w,new Error(".write() after done!"));return}this.buffers.push(_),this.tokenizer.running&&(this.tokenizer.write(_),this.writeIndex++)},v.prototype.end=function(_){var w,R;if(this.ended){(R=(w=this.cbs).onerror)===null||R===void 0||R.call(w,new Error(".end() after done!"));return}_&&this.write(_),this.ended=!0,this.tokenizer.end()},v.prototype.pause=function(){this.tokenizer.pause()},v.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},v.prototype.parseChunk=function(_){this.write(_)},v.prototype.done=function(_){this.end(_)},v})();return Parser$3.Parser=E,Parser$3}var lib$6={},lib$5={},hasRequiredLib$7;function requireLib$7(){return hasRequiredLib$7||(hasRequiredLib$7=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Doctype=o.CDATA=o.Tag=o.Style=o.Script=o.Comment=o.Directive=o.Text=o.Root=o.isTag=o.ElementType=void 0;var e;(function(a){a.Root="root",a.Text="text",a.Directive="directive",a.Comment="comment",a.Script="script",a.Style="style",a.Tag="tag",a.CDATA="cdata",a.Doctype="doctype"})(e=o.ElementType||(o.ElementType={}));function s(a){return a.type===e.Tag||a.type===e.Script||a.type===e.Style}o.isTag=s,o.Root=e.Root,o.Text=e.Text,o.Directive=e.Directive,o.Comment=e.Comment,o.Script=e.Script,o.Style=e.Style,o.Tag=e.Tag,o.CDATA=e.CDATA,o.Doctype=e.Doctype})(lib$5)),lib$5}var node$1={},hasRequiredNode$1;function requireNode$1(){if(hasRequiredNode$1)return node$1;hasRequiredNode$1=1;var o=node$1&&node$1.__extends||(function(){var I=function(P,N){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Q){L.__proto__=Q}||function(L,Q){for(var j in Q)Object.prototype.hasOwnProperty.call(Q,j)&&(L[j]=Q[j])},I(P,N)};return function(P,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");I(P,N);function L(){this.constructor=P}P.prototype=N===null?Object.create(N):(L.prototype=N.prototype,new L)}})(),e=node$1&&node$1.__assign||function(){return e=Object.assign||function(I){for(var P,N=1,L=arguments.length;N<L;N++){P=arguments[N];for(var Q in P)Object.prototype.hasOwnProperty.call(P,Q)&&(I[Q]=P[Q])}return I},e.apply(this,arguments)};Object.defineProperty(node$1,"__esModule",{value:!0}),node$1.cloneNode=node$1.hasChildren=node$1.isDocument=node$1.isDirective=node$1.isComment=node$1.isText=node$1.isCDATA=node$1.isTag=node$1.Element=node$1.Document=node$1.CDATA=node$1.NodeWithChildren=node$1.ProcessingInstruction=node$1.Comment=node$1.Text=node$1.DataNode=node$1.Node=void 0;var s=requireLib$7(),a=(function(){function I(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(I.prototype,"parentNode",{get:function(){return this.parent},set:function(P){this.parent=P},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"previousSibling",{get:function(){return this.prev},set:function(P){this.prev=P},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"nextSibling",{get:function(){return this.next},set:function(P){this.next=P},enumerable:!1,configurable:!0}),I.prototype.cloneNode=function(P){return P===void 0&&(P=!1),R(this,P)},I})();node$1.Node=a;var l=(function(I){o(P,I);function P(N){var L=I.call(this)||this;return L.data=N,L}return Object.defineProperty(P.prototype,"nodeValue",{get:function(){return this.data},set:function(N){this.data=N},enumerable:!1,configurable:!0}),P})(a);node$1.DataNode=l;var u=(function(I){o(P,I);function P(){var N=I!==null&&I.apply(this,arguments)||this;return N.type=s.ElementType.Text,N}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),P})(l);node$1.Text=u;var c=(function(I){o(P,I);function P(){var N=I!==null&&I.apply(this,arguments)||this;return N.type=s.ElementType.Comment,N}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),P})(l);node$1.Comment=c;var d=(function(I){o(P,I);function P(N,L){var Q=I.call(this,L)||this;return Q.name=N,Q.type=s.ElementType.Directive,Q}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),P})(l);node$1.ProcessingInstruction=d;var h=(function(I){o(P,I);function P(N){var L=I.call(this)||this;return L.children=N,L}return Object.defineProperty(P.prototype,"firstChild",{get:function(){var N;return(N=this.children[0])!==null&&N!==void 0?N:null},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"childNodes",{get:function(){return this.children},set:function(N){this.children=N},enumerable:!1,configurable:!0}),P})(a);node$1.NodeWithChildren=h;var p=(function(I){o(P,I);function P(){var N=I!==null&&I.apply(this,arguments)||this;return N.type=s.ElementType.CDATA,N}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),P})(h);node$1.CDATA=p;var m=(function(I){o(P,I);function P(){var N=I!==null&&I.apply(this,arguments)||this;return N.type=s.ElementType.Root,N}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),P})(h);node$1.Document=m;var g=(function(I){o(P,I);function P(N,L,Q,j){Q===void 0&&(Q=[]),j===void 0&&(j=N==="script"?s.ElementType.Script:N==="style"?s.ElementType.Style:s.ElementType.Tag);var F=I.call(this,Q)||this;return F.name=N,F.attribs=L,F.type=j,F}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"tagName",{get:function(){return this.name},set:function(N){this.name=N},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"attributes",{get:function(){var N=this;return Object.keys(this.attribs).map(function(L){var Q,j;return{name:L,value:N.attribs[L],namespace:(Q=N["x-attribsNamespace"])===null||Q===void 0?void 0:Q[L],prefix:(j=N["x-attribsPrefix"])===null||j===void 0?void 0:j[L]}})},enumerable:!1,configurable:!0}),P})(h);node$1.Element=g;function y(I){return(0,s.isTag)(I)}node$1.isTag=y;function A(I){return I.type===s.ElementType.CDATA}node$1.isCDATA=A;function T(I){return I.type===s.ElementType.Text}node$1.isText=T;function E(I){return I.type===s.ElementType.Comment}node$1.isComment=E;function v(I){return I.type===s.ElementType.Directive}node$1.isDirective=v;function _(I){return I.type===s.ElementType.Root}node$1.isDocument=_;function w(I){return Object.prototype.hasOwnProperty.call(I,"children")}node$1.hasChildren=w;function R(I,P){P===void 0&&(P=!1);var N;if(T(I))N=new u(I.data);else if(E(I))N=new c(I.data);else if(y(I)){var L=P?k(I.children):[],Q=new g(I.name,e({},I.attribs),L);L.forEach(function(J){return J.parent=Q}),I.namespace!=null&&(Q.namespace=I.namespace),I["x-attribsNamespace"]&&(Q["x-attribsNamespace"]=e({},I["x-attribsNamespace"])),I["x-attribsPrefix"]&&(Q["x-attribsPrefix"]=e({},I["x-attribsPrefix"])),N=Q}else if(A(I)){var L=P?k(I.children):[],j=new p(L);L.forEach(function(z){return z.parent=j}),N=j}else if(_(I)){var L=P?k(I.children):[],F=new m(L);L.forEach(function(z){return z.parent=F}),I["x-mode"]&&(F["x-mode"]=I["x-mode"]),N=F}else if(v(I)){var V=new d(I.name,I.data);I["x-name"]!=null&&(V["x-name"]=I["x-name"],V["x-publicId"]=I["x-publicId"],V["x-systemId"]=I["x-systemId"]),N=V}else throw new Error("Not implemented yet: ".concat(I.type));return N.startIndex=I.startIndex,N.endIndex=I.endIndex,I.sourceCodeLocation!=null&&(N.sourceCodeLocation=I.sourceCodeLocation),N}node$1.cloneNode=R;function k(I){for(var P=I.map(function(L){return R(L,!0)}),N=1;N<P.length;N++)P[N].prev=P[N-1],P[N-1].next=P[N];return P}return node$1}var hasRequiredLib$6;function requireLib$6(){return hasRequiredLib$6||(hasRequiredLib$6=1,(function(o){var e=lib$6&&lib$6.__createBinding||(Object.create?(function(d,h,p,m){m===void 0&&(m=p);var g=Object.getOwnPropertyDescriptor(h,p);(!g||("get"in g?!h.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return h[p]}}),Object.defineProperty(d,m,g)}):(function(d,h,p,m){m===void 0&&(m=p),d[m]=h[p]})),s=lib$6&&lib$6.__exportStar||function(d,h){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(h,p)&&e(h,d,p)};Object.defineProperty(o,"__esModule",{value:!0}),o.DomHandler=void 0;var a=requireLib$7(),l=requireNode$1();s(requireNode$1(),o);var u={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},c=(function(){function d(h,p,m){this.dom=[],this.root=new l.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof p=="function"&&(m=p,p=u),typeof h=="object"&&(p=h,h=void 0),this.callback=h??null,this.options=p??u,this.elementCB=m??null}return d.prototype.onparserinit=function(h){this.parser=h},d.prototype.onreset=function(){this.dom=[],this.root=new l.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},d.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},d.prototype.onerror=function(h){this.handleCallback(h)},d.prototype.onclosetag=function(){this.lastNode=null;var h=this.tagStack.pop();this.options.withEndIndices&&(h.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(h)},d.prototype.onopentag=function(h,p){var m=this.options.xmlMode?a.ElementType.Tag:void 0,g=new l.Element(h,p,void 0,m);this.addNode(g),this.tagStack.push(g)},d.prototype.ontext=function(h){var p=this.lastNode;if(p&&p.type===a.ElementType.Text)p.data+=h,this.options.withEndIndices&&(p.endIndex=this.parser.endIndex);else{var m=new l.Text(h);this.addNode(m),this.lastNode=m}},d.prototype.oncomment=function(h){if(this.lastNode&&this.lastNode.type===a.ElementType.Comment){this.lastNode.data+=h;return}var p=new l.Comment(h);this.addNode(p),this.lastNode=p},d.prototype.oncommentend=function(){this.lastNode=null},d.prototype.oncdatastart=function(){var h=new l.Text(""),p=new l.CDATA([h]);this.addNode(p),h.parent=p,this.lastNode=h},d.prototype.oncdataend=function(){this.lastNode=null},d.prototype.onprocessinginstruction=function(h,p){var m=new l.ProcessingInstruction(h,p);this.addNode(m)},d.prototype.handleCallback=function(h){if(typeof this.callback=="function")this.callback(h,this.dom);else if(h)throw h},d.prototype.addNode=function(h){var p=this.tagStack[this.tagStack.length-1],m=p.children[p.children.length-1];this.options.withStartIndices&&(h.startIndex=this.parser.startIndex),this.options.withEndIndices&&(h.endIndex=this.parser.endIndex),p.children.push(h),m&&(h.prev=m,m.next=h),h.parent=p,this.lastNode=null},d})();o.DomHandler=c,o.default=c})(lib$6)),lib$6}var lib$4={},stringify$2={},lib$3={},lib$2={},encode={},encodeHtml={},hasRequiredEncodeHtml;function requireEncodeHtml(){if(hasRequiredEncodeHtml)return encodeHtml;hasRequiredEncodeHtml=1,Object.defineProperty(encodeHtml,"__esModule",{value:!0});function o(e){for(var s=1;s<e.length;s++)e[s][0]+=e[s-1][0]+1;return e}return encodeHtml.default=new Map(o([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(o([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(o([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(o([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]])),encodeHtml}var _escape={},hasRequired_escape;function require_escape(){return hasRequired_escape||(hasRequired_escape=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.escapeText=o.escapeAttribute=o.escapeUTF8=o.escape=o.encodeXML=o.getCodePoint=o.xmlReplacer=void 0,o.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var e=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);o.getCodePoint=String.prototype.codePointAt!=null?function(l,u){return l.codePointAt(u)}:function(l,u){return(l.charCodeAt(u)&64512)===55296?(l.charCodeAt(u)-55296)*1024+l.charCodeAt(u+1)-56320+65536:l.charCodeAt(u)};function s(l){for(var u="",c=0,d;(d=o.xmlReplacer.exec(l))!==null;){var h=d.index,p=l.charCodeAt(h),m=e.get(p);m!==void 0?(u+=l.substring(c,h)+m,c=h+1):(u+="".concat(l.substring(c,h),"&#x").concat((0,o.getCodePoint)(l,h).toString(16),";"),c=o.xmlReplacer.lastIndex+=+((p&64512)===55296))}return u+l.substr(c)}o.encodeXML=s,o.escape=s;function a(l,u){return function(d){for(var h,p=0,m="";h=l.exec(d);)p!==h.index&&(m+=d.substring(p,h.index)),m+=u.get(h[0].charCodeAt(0)),p=h.index+1;return m+d.substring(p)}}o.escapeUTF8=a(/[&<>'"]/g,e),o.escapeAttribute=a(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),o.escapeText=a(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(_escape)),_escape}var hasRequiredEncode;function requireEncode(){if(hasRequiredEncode)return encode;hasRequiredEncode=1;var o=encode&&encode.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(encode,"__esModule",{value:!0}),encode.encodeNonAsciiHTML=encode.encodeHTML=void 0;var e=o(requireEncodeHtml()),s=require_escape(),a=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function l(d){return c(a,d)}encode.encodeHTML=l;function u(d){return c(s.xmlReplacer,d)}encode.encodeNonAsciiHTML=u;function c(d,h){for(var p="",m=0,g;(g=d.exec(h))!==null;){var y=g.index;p+=h.substring(m,y);var A=h.charCodeAt(y),T=e.default.get(A);if(typeof T=="object"){if(y+1<h.length){var E=h.charCodeAt(y+1),v=typeof T.n=="number"?T.n===E?T.o:void 0:T.n.get(E);if(v!==void 0){p+=v,m=d.lastIndex+=1;continue}}T=T.v}if(T!==void 0)p+=T,m=y+1;else{var _=(0,s.getCodePoint)(h,y);p+="&#x".concat(_.toString(16),";"),m=d.lastIndex+=+(_!==A)}}return p+h.substr(m)}return encode}var hasRequiredLib$5;function requireLib$5(){return hasRequiredLib$5||(hasRequiredLib$5=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.decodeXMLStrict=o.decodeHTML5Strict=o.decodeHTML4Strict=o.decodeHTML5=o.decodeHTML4=o.decodeHTMLAttribute=o.decodeHTMLStrict=o.decodeHTML=o.decodeXML=o.DecodingMode=o.EntityDecoder=o.encodeHTML5=o.encodeHTML4=o.encodeNonAsciiHTML=o.encodeHTML=o.escapeText=o.escapeAttribute=o.escapeUTF8=o.escape=o.encodeXML=o.encode=o.decodeStrict=o.decode=o.EncodingMode=o.EntityLevel=void 0;var e=requireDecode(),s=requireEncode(),a=require_escape(),l;(function(y){y[y.XML=0]="XML",y[y.HTML=1]="HTML"})(l=o.EntityLevel||(o.EntityLevel={}));var u;(function(y){y[y.UTF8=0]="UTF8",y[y.ASCII=1]="ASCII",y[y.Extensive=2]="Extensive",y[y.Attribute=3]="Attribute",y[y.Text=4]="Text"})(u=o.EncodingMode||(o.EncodingMode={}));function c(y,A){A===void 0&&(A=l.XML);var T=typeof A=="number"?A:A.level;if(T===l.HTML){var E=typeof A=="object"?A.mode:void 0;return(0,e.decodeHTML)(y,E)}return(0,e.decodeXML)(y)}o.decode=c;function d(y,A){var T;A===void 0&&(A=l.XML);var E=typeof A=="number"?{level:A}:A;return(T=E.mode)!==null&&T!==void 0||(E.mode=e.DecodingMode.Strict),c(y,E)}o.decodeStrict=d;function h(y,A){A===void 0&&(A=l.XML);var T=typeof A=="number"?{level:A}:A;return T.mode===u.UTF8?(0,a.escapeUTF8)(y):T.mode===u.Attribute?(0,a.escapeAttribute)(y):T.mode===u.Text?(0,a.escapeText)(y):T.level===l.HTML?T.mode===u.ASCII?(0,s.encodeNonAsciiHTML)(y):(0,s.encodeHTML)(y):(0,a.encodeXML)(y)}o.encode=h;var p=require_escape();Object.defineProperty(o,"encodeXML",{enumerable:!0,get:function(){return p.encodeXML}}),Object.defineProperty(o,"escape",{enumerable:!0,get:function(){return p.escape}}),Object.defineProperty(o,"escapeUTF8",{enumerable:!0,get:function(){return p.escapeUTF8}}),Object.defineProperty(o,"escapeAttribute",{enumerable:!0,get:function(){return p.escapeAttribute}}),Object.defineProperty(o,"escapeText",{enumerable:!0,get:function(){return p.escapeText}});var m=requireEncode();Object.defineProperty(o,"encodeHTML",{enumerable:!0,get:function(){return m.encodeHTML}}),Object.defineProperty(o,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return m.encodeNonAsciiHTML}}),Object.defineProperty(o,"encodeHTML4",{enumerable:!0,get:function(){return m.encodeHTML}}),Object.defineProperty(o,"encodeHTML5",{enumerable:!0,get:function(){return m.encodeHTML}});var g=requireDecode();Object.defineProperty(o,"EntityDecoder",{enumerable:!0,get:function(){return g.EntityDecoder}}),Object.defineProperty(o,"DecodingMode",{enumerable:!0,get:function(){return g.DecodingMode}}),Object.defineProperty(o,"decodeXML",{enumerable:!0,get:function(){return g.decodeXML}}),Object.defineProperty(o,"decodeHTML",{enumerable:!0,get:function(){return g.decodeHTML}}),Object.defineProperty(o,"decodeHTMLStrict",{enumerable:!0,get:function(){return g.decodeHTMLStrict}}),Object.defineProperty(o,"decodeHTMLAttribute",{enumerable:!0,get:function(){return g.decodeHTMLAttribute}}),Object.defineProperty(o,"decodeHTML4",{enumerable:!0,get:function(){return g.decodeHTML}}),Object.defineProperty(o,"decodeHTML5",{enumerable:!0,get:function(){return g.decodeHTML}}),Object.defineProperty(o,"decodeHTML4Strict",{enumerable:!0,get:function(){return g.decodeHTMLStrict}}),Object.defineProperty(o,"decodeHTML5Strict",{enumerable:!0,get:function(){return g.decodeHTMLStrict}}),Object.defineProperty(o,"decodeXMLStrict",{enumerable:!0,get:function(){return g.decodeXML}})})(lib$2)),lib$2}var foreignNames={},hasRequiredForeignNames;function requireForeignNames(){return hasRequiredForeignNames||(hasRequiredForeignNames=1,Object.defineProperty(foreignNames,"__esModule",{value:!0}),foreignNames.attributeNames=foreignNames.elementNames=void 0,foreignNames.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(o){return[o.toLowerCase(),o]})),foreignNames.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(o){return[o.toLowerCase(),o]}))),foreignNames}var hasRequiredLib$4;function requireLib$4(){if(hasRequiredLib$4)return lib$3;hasRequiredLib$4=1;var o=lib$3&&lib$3.__assign||function(){return o=Object.assign||function(k){for(var I,P=1,N=arguments.length;P<N;P++){I=arguments[P];for(var L in I)Object.prototype.hasOwnProperty.call(I,L)&&(k[L]=I[L])}return k},o.apply(this,arguments)},e=lib$3&&lib$3.__createBinding||(Object.create?(function(k,I,P,N){N===void 0&&(N=P);var L=Object.getOwnPropertyDescriptor(I,P);(!L||("get"in L?!I.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return I[P]}}),Object.defineProperty(k,N,L)}):(function(k,I,P,N){N===void 0&&(N=P),k[N]=I[P]})),s=lib$3&&lib$3.__setModuleDefault||(Object.create?(function(k,I){Object.defineProperty(k,"default",{enumerable:!0,value:I})}):function(k,I){k.default=I}),a=lib$3&&lib$3.__importStar||function(k){if(k&&k.__esModule)return k;var I={};if(k!=null)for(var P in k)P!=="default"&&Object.prototype.hasOwnProperty.call(k,P)&&e(I,k,P);return s(I,k),I};Object.defineProperty(lib$3,"__esModule",{value:!0}),lib$3.render=void 0;var l=a(requireLib$7()),u=requireLib$5(),c=requireForeignNames(),d=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function h(k){return k.replace(/"/g,"&quot;")}function p(k,I){var P;if(k){var N=((P=I.encodeEntities)!==null&&P!==void 0?P:I.decodeEntities)===!1?h:I.xmlMode||I.encodeEntities!=="utf8"?u.encodeXML:u.escapeAttribute;return Object.keys(k).map(function(L){var Q,j,F=(Q=k[L])!==null&&Q!==void 0?Q:"";return I.xmlMode==="foreign"&&(L=(j=c.attributeNames.get(L))!==null&&j!==void 0?j:L),!I.emptyAttrs&&!I.xmlMode&&F===""?L:"".concat(L,'="').concat(N(F),'"')}).join(" ")}}var m=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function g(k,I){I===void 0&&(I={});for(var P=("length"in k)?k:[k],N="",L=0;L<P.length;L++)N+=y(P[L],I);return N}lib$3.render=g,lib$3.default=g;function y(k,I){switch(k.type){case l.Root:return g(k.children,I);case l.Doctype:case l.Directive:return v(k);case l.Comment:return R(k);case l.CDATA:return w(k);case l.Script:case l.Style:case l.Tag:return E(k,I);case l.Text:return _(k,I)}}var A=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),T=new Set(["svg","math"]);function E(k,I){var P;I.xmlMode==="foreign"&&(k.name=(P=c.elementNames.get(k.name))!==null&&P!==void 0?P:k.name,k.parent&&A.has(k.parent.name)&&(I=o(o({},I),{xmlMode:!1}))),!I.xmlMode&&T.has(k.name)&&(I=o(o({},I),{xmlMode:"foreign"}));var N="<".concat(k.name),L=p(k.attribs,I);return L&&(N+=" ".concat(L)),k.children.length===0&&(I.xmlMode?I.selfClosingTags!==!1:I.selfClosingTags&&m.has(k.name))?(I.xmlMode||(N+=" "),N+="/>"):(N+=">",k.children.length>0&&(N+=g(k.children,I)),(I.xmlMode||!m.has(k.name))&&(N+="</".concat(k.name,">"))),N}function v(k){return"<".concat(k.data,">")}function _(k,I){var P,N=k.data||"";return((P=I.encodeEntities)!==null&&P!==void 0?P:I.decodeEntities)!==!1&&!(!I.xmlMode&&k.parent&&d.has(k.parent.name))&&(N=I.xmlMode||I.encodeEntities!=="utf8"?(0,u.encodeXML)(N):(0,u.escapeText)(N)),N}function w(k){return"<![CDATA[".concat(k.children[0].data,"]]>")}function R(k){return"<!--".concat(k.data,"-->")}return lib$3}var hasRequiredStringify$3;function requireStringify$3(){if(hasRequiredStringify$3)return stringify$2;hasRequiredStringify$3=1;var o=stringify$2&&stringify$2.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(stringify$2,"__esModule",{value:!0}),stringify$2.getOuterHTML=l,stringify$2.getInnerHTML=u,stringify$2.getText=c,stringify$2.textContent=d,stringify$2.innerText=h;var e=requireLib$6(),s=o(requireLib$4()),a=requireLib$7();function l(p,m){return(0,s.default)(p,m)}function u(p,m){return(0,e.hasChildren)(p)?p.children.map(function(g){return l(g,m)}).join(""):""}function c(p){return Array.isArray(p)?p.map(c).join(""):(0,e.isTag)(p)?p.name==="br"?`
`:c(p.children):(0,e.isCDATA)(p)?c(p.children):(0,e.isText)(p)?p.data:""}function d(p){return Array.isArray(p)?p.map(d).join(""):(0,e.hasChildren)(p)&&!(0,e.isComment)(p)?d(p.children):(0,e.isText)(p)?p.data:""}function h(p){return Array.isArray(p)?p.map(h).join(""):(0,e.hasChildren)(p)&&(p.type===a.ElementType.Tag||(0,e.isCDATA)(p))?h(p.children):(0,e.isText)(p)?p.data:""}return stringify$2}var traversal={},hasRequiredTraversal;function requireTraversal(){if(hasRequiredTraversal)return traversal;hasRequiredTraversal=1,Object.defineProperty(traversal,"__esModule",{value:!0}),traversal.getChildren=e,traversal.getParent=s,traversal.getSiblings=a,traversal.getAttributeValue=l,traversal.hasAttrib=u,traversal.getName=c,traversal.nextElementSibling=d,traversal.prevElementSibling=h;var o=requireLib$6();function e(p){return(0,o.hasChildren)(p)?p.children:[]}function s(p){return p.parent||null}function a(p){var m,g,y=s(p);if(y!=null)return e(y);for(var A=[p],T=p.prev,E=p.next;T!=null;)A.unshift(T),m=T,T=m.prev;for(;E!=null;)A.push(E),g=E,E=g.next;return A}function l(p,m){var g;return(g=p.attribs)===null||g===void 0?void 0:g[m]}function u(p,m){return p.attribs!=null&&Object.prototype.hasOwnProperty.call(p.attribs,m)&&p.attribs[m]!=null}function c(p){return p.name}function d(p){for(var m,g=p.next;g!==null&&!(0,o.isTag)(g);)m=g,g=m.next;return g}function h(p){for(var m,g=p.prev;g!==null&&!(0,o.isTag)(g);)m=g,g=m.prev;return g}return traversal}var manipulation={},hasRequiredManipulation;function requireManipulation(){if(hasRequiredManipulation)return manipulation;hasRequiredManipulation=1,Object.defineProperty(manipulation,"__esModule",{value:!0}),manipulation.removeElement=o,manipulation.replaceElement=e,manipulation.appendChild=s,manipulation.append=a,manipulation.prependChild=l,manipulation.prepend=u;function o(c){if(c.prev&&(c.prev.next=c.next),c.next&&(c.next.prev=c.prev),c.parent){var d=c.parent.children,h=d.lastIndexOf(c);h>=0&&d.splice(h,1)}c.next=null,c.prev=null,c.parent=null}function e(c,d){var h=d.prev=c.prev;h&&(h.next=d);var p=d.next=c.next;p&&(p.prev=d);var m=d.parent=c.parent;if(m){var g=m.children;g[g.lastIndexOf(c)]=d,c.parent=null}}function s(c,d){if(o(d),d.next=null,d.parent=c,c.children.push(d)>1){var h=c.children[c.children.length-2];h.next=d,d.prev=h}else d.prev=null}function a(c,d){o(d);var h=c.parent,p=c.next;if(d.next=p,d.prev=c,c.next=d,d.parent=h,p){if(p.prev=d,h){var m=h.children;m.splice(m.lastIndexOf(p),0,d)}}else h&&h.children.push(d)}function l(c,d){if(o(d),d.parent=c,d.prev=null,c.children.unshift(d)!==1){var h=c.children[1];h.prev=d,d.next=h}else d.next=null}function u(c,d){o(d);var h=c.parent;if(h){var p=h.children;p.splice(p.indexOf(c),0,d)}c.prev&&(c.prev.next=d),d.parent=h,d.prev=c.prev,d.next=c,c.prev=d}return manipulation}var querying={},hasRequiredQuerying;function requireQuerying(){if(hasRequiredQuerying)return querying;hasRequiredQuerying=1,Object.defineProperty(querying,"__esModule",{value:!0}),querying.filter=e,querying.find=s,querying.findOneChild=a,querying.findOne=l,querying.existsOne=u,querying.findAll=c;var o=requireLib$6();function e(d,h,p,m){return p===void 0&&(p=!0),m===void 0&&(m=1/0),s(d,Array.isArray(h)?h:[h],p,m)}function s(d,h,p,m){for(var g=[],y=[Array.isArray(h)?h:[h]],A=[0];;){if(A[0]>=y[0].length){if(A.length===1)return g;y.shift(),A.shift();continue}var T=y[0][A[0]++];if(d(T)&&(g.push(T),--m<=0))return g;p&&(0,o.hasChildren)(T)&&T.children.length>0&&(A.unshift(0),y.unshift(T.children))}}function a(d,h){return h.find(d)}function l(d,h,p){p===void 0&&(p=!0);for(var m=Array.isArray(h)?h:[h],g=0;g<m.length;g++){var y=m[g];if((0,o.isTag)(y)&&d(y))return y;if(p&&(0,o.hasChildren)(y)&&y.children.length>0){var A=l(d,y.children,!0);if(A)return A}}return null}function u(d,h){return(Array.isArray(h)?h:[h]).some(function(p){return(0,o.isTag)(p)&&d(p)||(0,o.hasChildren)(p)&&u(d,p.children)})}function c(d,h){for(var p=[],m=[Array.isArray(h)?h:[h]],g=[0];;){if(g[0]>=m[0].length){if(m.length===1)return p;m.shift(),g.shift();continue}var y=m[0][g[0]++];(0,o.isTag)(y)&&d(y)&&p.push(y),(0,o.hasChildren)(y)&&y.children.length>0&&(g.unshift(0),m.unshift(y.children))}}return querying}var legacy={},hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1,Object.defineProperty(legacy,"__esModule",{value:!0}),legacy.testElement=c,legacy.getElements=d,legacy.getElementById=h,legacy.getElementsByTagName=p,legacy.getElementsByClassName=m,legacy.getElementsByTagType=g;var o=requireLib$6(),e=requireQuerying(),s={tag_name:function(y){return typeof y=="function"?function(A){return(0,o.isTag)(A)&&y(A.name)}:y==="*"?o.isTag:function(A){return(0,o.isTag)(A)&&A.name===y}},tag_type:function(y){return typeof y=="function"?function(A){return y(A.type)}:function(A){return A.type===y}},tag_contains:function(y){return typeof y=="function"?function(A){return(0,o.isText)(A)&&y(A.data)}:function(A){return(0,o.isText)(A)&&A.data===y}}};function a(y,A){return typeof A=="function"?function(T){return(0,o.isTag)(T)&&A(T.attribs[y])}:function(T){return(0,o.isTag)(T)&&T.attribs[y]===A}}function l(y,A){return function(T){return y(T)||A(T)}}function u(y){var A=Object.keys(y).map(function(T){var E=y[T];return Object.prototype.hasOwnProperty.call(s,T)?s[T](E):a(T,E)});return A.length===0?null:A.reduce(l)}function c(y,A){var T=u(y);return T?T(A):!0}function d(y,A,T,E){E===void 0&&(E=1/0);var v=u(y);return v?(0,e.filter)(v,A,T,E):[]}function h(y,A,T){return T===void 0&&(T=!0),Array.isArray(A)||(A=[A]),(0,e.findOne)(a("id",y),A,T)}function p(y,A,T,E){return T===void 0&&(T=!0),E===void 0&&(E=1/0),(0,e.filter)(s.tag_name(y),A,T,E)}function m(y,A,T,E){return T===void 0&&(T=!0),E===void 0&&(E=1/0),(0,e.filter)(a("class",y),A,T,E)}function g(y,A,T,E){return T===void 0&&(T=!0),E===void 0&&(E=1/0),(0,e.filter)(s.tag_type(y),A,T,E)}return legacy}var helpers$1={},hasRequiredHelpers$1;function requireHelpers$1(){if(hasRequiredHelpers$1)return helpers$1;hasRequiredHelpers$1=1,Object.defineProperty(helpers$1,"__esModule",{value:!0}),helpers$1.DocumentPosition=void 0,helpers$1.removeSubsets=e,helpers$1.compareDocumentPosition=a,helpers$1.uniqueSort=l;var o=requireLib$6();function e(u){for(var c=u.length;--c>=0;){var d=u[c];if(c>0&&u.lastIndexOf(d,c-1)>=0){u.splice(c,1);continue}for(var h=d.parent;h;h=h.parent)if(u.includes(h)){u.splice(c,1);break}}return u}var s;(function(u){u[u.DISCONNECTED=1]="DISCONNECTED",u[u.PRECEDING=2]="PRECEDING",u[u.FOLLOWING=4]="FOLLOWING",u[u.CONTAINS=8]="CONTAINS",u[u.CONTAINED_BY=16]="CONTAINED_BY"})(s||(helpers$1.DocumentPosition=s={}));function a(u,c){var d=[],h=[];if(u===c)return 0;for(var p=(0,o.hasChildren)(u)?u:u.parent;p;)d.unshift(p),p=p.parent;for(p=(0,o.hasChildren)(c)?c:c.parent;p;)h.unshift(p),p=p.parent;for(var m=Math.min(d.length,h.length),g=0;g<m&&d[g]===h[g];)g++;if(g===0)return s.DISCONNECTED;var y=d[g-1],A=y.children,T=d[g],E=h[g];return A.indexOf(T)>A.indexOf(E)?y===c?s.FOLLOWING|s.CONTAINED_BY:s.FOLLOWING:y===u?s.PRECEDING|s.CONTAINS:s.PRECEDING}function l(u){return u=u.filter(function(c,d,h){return!h.includes(c,d+1)}),u.sort(function(c,d){var h=a(c,d);return h&s.PRECEDING?-1:h&s.FOLLOWING?1:0}),u}return helpers$1}var feeds={},hasRequiredFeeds;function requireFeeds(){if(hasRequiredFeeds)return feeds;hasRequiredFeeds=1,Object.defineProperty(feeds,"__esModule",{value:!0}),feeds.getFeed=s;var o=requireStringify$3(),e=requireLegacy();function s(y){var A=h(g,y);return A?A.name==="feed"?a(A):l(A):null}function a(y){var A,T=y.children,E={type:"atom",items:(0,e.getElementsByTagName)("entry",T).map(function(w){var R,k=w.children,I={media:d(k)};m(I,"id","id",k),m(I,"title","title",k);var P=(R=h("link",k))===null||R===void 0?void 0:R.attribs.href;P&&(I.link=P);var N=p("summary",k)||p("content",k);N&&(I.description=N);var L=p("updated",k);return L&&(I.pubDate=new Date(L)),I})};m(E,"id","id",T),m(E,"title","title",T);var v=(A=h("link",T))===null||A===void 0?void 0:A.attribs.href;v&&(E.link=v),m(E,"description","subtitle",T);var _=p("updated",T);return _&&(E.updated=new Date(_)),m(E,"author","email",T,!0),E}function l(y){var A,T,E=(T=(A=h("channel",y.children))===null||A===void 0?void 0:A.children)!==null&&T!==void 0?T:[],v={type:y.name.substr(0,3),id:"",items:(0,e.getElementsByTagName)("item",y.children).map(function(w){var R=w.children,k={media:d(R)};m(k,"id","guid",R),m(k,"title","title",R),m(k,"link","link",R),m(k,"description","description",R);var I=p("pubDate",R)||p("dc:date",R);return I&&(k.pubDate=new Date(I)),k})};m(v,"title","title",E),m(v,"link","link",E),m(v,"description","description",E);var _=p("lastBuildDate",E);return _&&(v.updated=new Date(_)),m(v,"author","managingEditor",E,!0),v}var u=["url","type","lang"],c=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function d(y){return(0,e.getElementsByTagName)("media:content",y).map(function(A){for(var T=A.attribs,E={medium:T.medium,isDefault:!!T.isDefault},v=0,_=u;v<_.length;v++){var w=_[v];T[w]&&(E[w]=T[w])}for(var R=0,k=c;R<k.length;R++){var w=k[R];T[w]&&(E[w]=parseInt(T[w],10))}return T.expression&&(E.expression=T.expression),E})}function h(y,A){return(0,e.getElementsByTagName)(y,A,!0,1)[0]}function p(y,A,T){return T===void 0&&(T=!1),(0,o.textContent)((0,e.getElementsByTagName)(y,A,T,1)).trim()}function m(y,A,T,E,v){v===void 0&&(v=!1);var _=p(T,E,v);_&&(y[A]=_)}function g(y){return y==="rss"||y==="feed"||y==="rdf:RDF"}return feeds}var hasRequiredLib$3;function requireLib$3(){return hasRequiredLib$3||(hasRequiredLib$3=1,(function(o){var e=lib$4&&lib$4.__createBinding||(Object.create?(function(l,u,c,d){d===void 0&&(d=c);var h=Object.getOwnPropertyDescriptor(u,c);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(l,d,h)}):(function(l,u,c,d){d===void 0&&(d=c),l[d]=u[c]})),s=lib$4&&lib$4.__exportStar||function(l,u){for(var c in l)c!=="default"&&!Object.prototype.hasOwnProperty.call(u,c)&&e(u,l,c)};Object.defineProperty(o,"__esModule",{value:!0}),o.hasChildren=o.isDocument=o.isComment=o.isText=o.isCDATA=o.isTag=void 0,s(requireStringify$3(),o),s(requireTraversal(),o),s(requireManipulation(),o),s(requireQuerying(),o),s(requireLegacy(),o),s(requireHelpers$1(),o),s(requireFeeds(),o);var a=requireLib$6();Object.defineProperty(o,"isTag",{enumerable:!0,get:function(){return a.isTag}}),Object.defineProperty(o,"isCDATA",{enumerable:!0,get:function(){return a.isCDATA}}),Object.defineProperty(o,"isText",{enumerable:!0,get:function(){return a.isText}}),Object.defineProperty(o,"isComment",{enumerable:!0,get:function(){return a.isComment}}),Object.defineProperty(o,"isDocument",{enumerable:!0,get:function(){return a.isDocument}}),Object.defineProperty(o,"hasChildren",{enumerable:!0,get:function(){return a.hasChildren}})})(lib$4)),lib$4}var hasRequiredLib$2;function requireLib$2(){return hasRequiredLib$2||(hasRequiredLib$2=1,(function(o){var e=lib$7&&lib$7.__createBinding||(Object.create?(function(_,w,R,k){k===void 0&&(k=R);var I=Object.getOwnPropertyDescriptor(w,R);(!I||("get"in I?!w.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return w[R]}}),Object.defineProperty(_,k,I)}):(function(_,w,R,k){k===void 0&&(k=R),_[k]=w[R]})),s=lib$7&&lib$7.__setModuleDefault||(Object.create?(function(_,w){Object.defineProperty(_,"default",{enumerable:!0,value:w})}):function(_,w){_.default=w}),a=lib$7&&lib$7.__importStar||function(_){if(_&&_.__esModule)return _;var w={};if(_!=null)for(var R in _)R!=="default"&&Object.prototype.hasOwnProperty.call(_,R)&&e(w,_,R);return s(w,_),w},l=lib$7&&lib$7.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomUtils=o.parseFeed=o.getFeed=o.ElementType=o.Tokenizer=o.createDomStream=o.parseDOM=o.parseDocument=o.DefaultHandler=o.DomHandler=o.Parser=void 0;var u=requireParser$2(),c=requireParser$2();Object.defineProperty(o,"Parser",{enumerable:!0,get:function(){return c.Parser}});var d=requireLib$6(),h=requireLib$6();Object.defineProperty(o,"DomHandler",{enumerable:!0,get:function(){return h.DomHandler}}),Object.defineProperty(o,"DefaultHandler",{enumerable:!0,get:function(){return h.DomHandler}});function p(_,w){var R=new d.DomHandler(void 0,w);return new u.Parser(R,w).end(_),R.root}o.parseDocument=p;function m(_,w){return p(_,w).children}o.parseDOM=m;function g(_,w,R){var k=new d.DomHandler(_,w,R);return new u.Parser(k,w)}o.createDomStream=g;var y=requireTokenizer();Object.defineProperty(o,"Tokenizer",{enumerable:!0,get:function(){return l(y).default}}),o.ElementType=a(requireLib$7());var A=requireLib$3(),T=requireLib$3();Object.defineProperty(o,"getFeed",{enumerable:!0,get:function(){return T.getFeed}});var E={xmlMode:!0};function v(_,w){return w===void 0&&(w=E),(0,A.getFeed)(m(_,w))}o.parseFeed=v,o.DomUtils=a(requireLib$3())})(lib$7)),lib$7}var escapeStringRegexp,hasRequiredEscapeStringRegexp;function requireEscapeStringRegexp(){return hasRequiredEscapeStringRegexp||(hasRequiredEscapeStringRegexp=1,escapeStringRegexp=o=>{if(typeof o!="string")throw new TypeError("Expected a string");return o.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}),escapeStringRegexp}var isPlainObject={},hasRequiredIsPlainObject;function requireIsPlainObject(){if(hasRequiredIsPlainObject)return isPlainObject;hasRequiredIsPlainObject=1,Object.defineProperty(isPlainObject,"__esModule",{value:!0});/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function o(s){return Object.prototype.toString.call(s)==="[object Object]"}function e(s){var a,l;return o(s)===!1?!1:(a=s.constructor,a===void 0?!0:(l=a.prototype,!(o(l)===!1||l.hasOwnProperty("isPrototypeOf")===!1)))}return isPlainObject.isPlainObject=e,isPlainObject}var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var o=function(w){return e(w)&&!s(w)};function e(_){return!!_&&typeof _=="object"}function s(_){var w=Object.prototype.toString.call(_);return w==="[object RegExp]"||w==="[object Date]"||u(_)}var a=typeof Symbol=="function"&&Symbol.for,l=a?Symbol.for("react.element"):60103;function u(_){return _.$$typeof===l}function c(_){return Array.isArray(_)?[]:{}}function d(_,w){return w.clone!==!1&&w.isMergeableObject(_)?E(c(_),_,w):_}function h(_,w,R){return _.concat(w).map(function(k){return d(k,R)})}function p(_,w){if(!w.customMerge)return E;var R=w.customMerge(_);return typeof R=="function"?R:E}function m(_){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(_).filter(function(w){return Object.propertyIsEnumerable.call(_,w)}):[]}function g(_){return Object.keys(_).concat(m(_))}function y(_,w){try{return w in _}catch{return!1}}function A(_,w){return y(_,w)&&!(Object.hasOwnProperty.call(_,w)&&Object.propertyIsEnumerable.call(_,w))}function T(_,w,R){var k={};return R.isMergeableObject(_)&&g(_).forEach(function(I){k[I]=d(_[I],R)}),g(w).forEach(function(I){A(_,I)||(y(_,I)&&R.isMergeableObject(w[I])?k[I]=p(I,R)(_[I],w[I],R):k[I]=d(w[I],R))}),k}function E(_,w,R){R=R||{},R.arrayMerge=R.arrayMerge||h,R.isMergeableObject=R.isMergeableObject||o,R.cloneUnlessOtherwiseSpecified=d;var k=Array.isArray(w),I=Array.isArray(_),P=k===I;return P?k?R.arrayMerge(_,w,R):T(_,w,R):d(w,R)}E.all=function(w,R){if(!Array.isArray(w))throw new Error("first argument should be an array");return w.reduce(function(k,I){return E(k,I,R)},{})};var v=E;return cjs=v,cjs}var parseSrcset$1={exports:{}},parseSrcset=parseSrcset$1.exports,hasRequiredParseSrcset;function requireParseSrcset(){return hasRequiredParseSrcset||(hasRequiredParseSrcset=1,(function(o){(function(e,s){o.exports?o.exports=s():e.parseSrcset=s()})(parseSrcset,function(){return function(e){function s(k){return k===" "||k==="	"||k===`
`||k==="\f"||k==="\r"}function a(k){var I,P=k.exec(e.substring(v));if(P)return I=P[0],v+=I.length,I}for(var l=e.length,u=/^[ \t\n\r\u000c]+/,c=/^[, \t\n\r\u000c]+/,d=/^[^ \t\n\r\u000c]+/,h=/[,]+$/,p=/^\d+$/,m=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,g,y,A,T,E,v=0,_=[];;){if(a(c),v>=l)return _;g=a(d),y=[],g.slice(-1)===","?(g=g.replace(h,""),R()):w()}function w(){for(a(u),A="",T="in descriptor";;){if(E=e.charAt(v),T==="in descriptor")if(s(E))A&&(y.push(A),A="",T="after descriptor");else if(E===","){v+=1,A&&y.push(A),R();return}else if(E==="(")A=A+E,T="in parens";else if(E===""){A&&y.push(A),R();return}else A=A+E;else if(T==="in parens")if(E===")")A=A+E,T="in descriptor";else if(E===""){y.push(A),R();return}else A=A+E;else if(T==="after descriptor"&&!s(E))if(E===""){R();return}else T="in descriptor",v-=1;v+=1}}function R(){var k=!1,I,P,N,L,Q={},j,F,V,J,z;for(L=0;L<y.length;L++)j=y[L],F=j[j.length-1],V=j.substring(0,j.length-1),J=parseInt(V,10),z=parseFloat(V),p.test(V)&&F==="w"?((I||P)&&(k=!0),J===0?k=!0:I=J):m.test(V)&&F==="x"?((I||P||N)&&(k=!0),z<0?k=!0:P=z):p.test(V)&&F==="h"?((N||P)&&(k=!0),J===0?k=!0:N=J):k=!0;k?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+j+"'."):(Q.url=g,I&&(Q.w=I),P&&(Q.d=P),N&&(Q.h=N),_.push(Q))}}})})(parseSrcset$1)),parseSrcset$1.exports}var picocolors_browser={exports:{}},hasRequiredPicocolors_browser;function requirePicocolors_browser(){if(hasRequiredPicocolors_browser)return picocolors_browser.exports;hasRequiredPicocolors_browser=1;var o=String,e=function(){return{isColorSupported:!1,reset:o,bold:o,dim:o,italic:o,underline:o,inverse:o,hidden:o,strikethrough:o,black:o,red:o,green:o,yellow:o,blue:o,magenta:o,cyan:o,white:o,gray:o,bgBlack:o,bgRed:o,bgGreen:o,bgYellow:o,bgBlue:o,bgMagenta:o,bgCyan:o,bgWhite:o,blackBright:o,redBright:o,greenBright:o,yellowBright:o,blueBright:o,magentaBright:o,cyanBright:o,whiteBright:o,bgBlackBright:o,bgRedBright:o,bgGreenBright:o,bgYellowBright:o,bgBlueBright:o,bgMagentaBright:o,bgCyanBright:o,bgWhiteBright:o}};return picocolors_browser.exports=e(),picocolors_browser.exports.createColors=e,picocolors_browser.exports}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(__viteBrowserExternal$1);var cssSyntaxError,hasRequiredCssSyntaxError;function requireCssSyntaxError(){if(hasRequiredCssSyntaxError)return cssSyntaxError;hasRequiredCssSyntaxError=1;let o=requirePicocolors_browser(),e=require$$3;class s extends Error{constructor(l,u,c,d,h,p){super(l),this.name="CssSyntaxError",this.reason=l,h&&(this.file=h),d&&(this.source=d),p&&(this.plugin=p),typeof u<"u"&&typeof c<"u"&&(typeof u=="number"?(this.line=u,this.column=c):(this.line=u.line,this.column=u.column,this.endLine=c.line,this.endColumn=c.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,s)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(l){if(!this.source)return"";let u=this.source;l==null&&(l=o.isColorSupported);let c=A=>A,d=A=>A,h=A=>A;if(l){let{bold:A,gray:T,red:E}=o.createColors(!0);d=v=>A(E(v)),c=v=>T(v),e&&(h=v=>e(v))}let p=u.split(/\r?\n/),m=Math.max(this.line-3,0),g=Math.min(this.line+2,p.length),y=String(g).length;return p.slice(m,g).map((A,T)=>{let E=m+1+T,v=" "+(" "+E).slice(-y)+" | ";if(E===this.line){if(A.length>160){let w=20,R=Math.max(0,this.column-w),k=Math.max(this.column+w,this.endColumn+w),I=A.slice(R,k),P=c(v.replace(/\d/g," "))+A.slice(0,Math.min(this.column-1,w-1)).replace(/[^\t]/g," ");return d(">")+c(v)+h(I)+`
 `+P+d("^")}let _=c(v.replace(/\d/g," "))+A.slice(0,this.column-1).replace(/[^\t]/g," ");return d(">")+c(v)+h(A)+`
 `+_+d("^")}return" "+c(v)+h(A)}).join(`
`)}toString(){let l=this.showSourceCode();return l&&(l=`

`+l+`
`),this.name+": "+this.message+l}}return cssSyntaxError=s,s.default=s,cssSyntaxError}var stringifier,hasRequiredStringifier;function requireStringifier(){if(hasRequiredStringifier)return stringifier;hasRequiredStringifier=1;const o={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function e(a){return a[0].toUpperCase()+a.slice(1)}class s{constructor(l){this.builder=l}atrule(l,u){let c="@"+l.name,d=l.params?this.rawValue(l,"params"):"";if(typeof l.raws.afterName<"u"?c+=l.raws.afterName:d&&(c+=" "),l.nodes)this.block(l,c+d);else{let h=(l.raws.between||"")+(u?";":"");this.builder(c+d+h,l)}}beforeAfter(l,u){let c;l.type==="decl"?c=this.raw(l,null,"beforeDecl"):l.type==="comment"?c=this.raw(l,null,"beforeComment"):u==="before"?c=this.raw(l,null,"beforeRule"):c=this.raw(l,null,"beforeClose");let d=l.parent,h=0;for(;d&&d.type!=="root";)h+=1,d=d.parent;if(c.includes(`
`)){let p=this.raw(l,null,"indent");if(p.length)for(let m=0;m<h;m++)c+=p}return c}block(l,u){let c=this.raw(l,"between","beforeOpen");this.builder(u+c+"{",l,"start");let d;l.nodes&&l.nodes.length?(this.body(l),d=this.raw(l,"after")):d=this.raw(l,"after","emptyBody"),d&&this.builder(d),this.builder("}",l,"end")}body(l){let u=l.nodes.length-1;for(;u>0&&l.nodes[u].type==="comment";)u-=1;let c=this.raw(l,"semicolon");for(let d=0;d<l.nodes.length;d++){let h=l.nodes[d],p=this.raw(h,"before");p&&this.builder(p),this.stringify(h,u!==d||c)}}comment(l){let u=this.raw(l,"left","commentLeft"),c=this.raw(l,"right","commentRight");this.builder("/*"+u+l.text+c+"*/",l)}decl(l,u){let c=this.raw(l,"between","colon"),d=l.prop+c+this.rawValue(l,"value");l.important&&(d+=l.raws.important||" !important"),u&&(d+=";"),this.builder(d,l)}document(l){this.body(l)}raw(l,u,c){let d;if(c||(c=u),u&&(d=l.raws[u],typeof d<"u"))return d;let h=l.parent;if(c==="before"&&(!h||h.type==="root"&&h.first===l||h&&h.type==="document"))return"";if(!h)return o[c];let p=l.root();if(p.rawCache||(p.rawCache={}),typeof p.rawCache[c]<"u")return p.rawCache[c];if(c==="before"||c==="after")return this.beforeAfter(l,c);{let m="raw"+e(c);this[m]?d=this[m](p,l):p.walk(g=>{if(d=g.raws[u],typeof d<"u")return!1})}return typeof d>"u"&&(d=o[c]),p.rawCache[c]=d,d}rawBeforeClose(l){let u;return l.walk(c=>{if(c.nodes&&c.nodes.length>0&&typeof c.raws.after<"u")return u=c.raws.after,u.includes(`
`)&&(u=u.replace(/[^\n]+$/,"")),!1}),u&&(u=u.replace(/\S/g,"")),u}rawBeforeComment(l,u){let c;return l.walkComments(d=>{if(typeof d.raws.before<"u")return c=d.raws.before,c.includes(`
`)&&(c=c.replace(/[^\n]+$/,"")),!1}),typeof c>"u"?c=this.raw(u,null,"beforeDecl"):c&&(c=c.replace(/\S/g,"")),c}rawBeforeDecl(l,u){let c;return l.walkDecls(d=>{if(typeof d.raws.before<"u")return c=d.raws.before,c.includes(`
`)&&(c=c.replace(/[^\n]+$/,"")),!1}),typeof c>"u"?c=this.raw(u,null,"beforeRule"):c&&(c=c.replace(/\S/g,"")),c}rawBeforeOpen(l){let u;return l.walk(c=>{if(c.type!=="decl"&&(u=c.raws.between,typeof u<"u"))return!1}),u}rawBeforeRule(l){let u;return l.walk(c=>{if(c.nodes&&(c.parent!==l||l.first!==c)&&typeof c.raws.before<"u")return u=c.raws.before,u.includes(`
`)&&(u=u.replace(/[^\n]+$/,"")),!1}),u&&(u=u.replace(/\S/g,"")),u}rawColon(l){let u;return l.walkDecls(c=>{if(typeof c.raws.between<"u")return u=c.raws.between.replace(/[^\s:]/g,""),!1}),u}rawEmptyBody(l){let u;return l.walk(c=>{if(c.nodes&&c.nodes.length===0&&(u=c.raws.after,typeof u<"u"))return!1}),u}rawIndent(l){if(l.raws.indent)return l.raws.indent;let u;return l.walk(c=>{let d=c.parent;if(d&&d!==l&&d.parent&&d.parent===l&&typeof c.raws.before<"u"){let h=c.raws.before.split(`
`);return u=h[h.length-1],u=u.replace(/\S/g,""),!1}}),u}rawSemicolon(l){let u;return l.walk(c=>{if(c.nodes&&c.nodes.length&&c.last.type==="decl"&&(u=c.raws.semicolon,typeof u<"u"))return!1}),u}rawValue(l,u){let c=l[u],d=l.raws[u];return d&&d.value===c?d.raw:c}root(l){this.body(l),l.raws.after&&this.builder(l.raws.after)}rule(l){this.block(l,this.rawValue(l,"selector")),l.raws.ownSemicolon&&this.builder(l.raws.ownSemicolon,l,"end")}stringify(l,u){if(!this[l.type])throw new Error("Unknown AST node type "+l.type+". Maybe you need to change PostCSS stringifier.");this[l.type](l,u)}}return stringifier=s,s.default=s,stringifier}var stringify_1$1,hasRequiredStringify$2;function requireStringify$2(){if(hasRequiredStringify$2)return stringify_1$1;hasRequiredStringify$2=1;let o=requireStringifier();function e(s,a){new o(a).stringify(s)}return stringify_1$1=e,e.default=e,stringify_1$1}var symbols={},hasRequiredSymbols;function requireSymbols(){return hasRequiredSymbols||(hasRequiredSymbols=1,symbols.isClean=Symbol("isClean"),symbols.my=Symbol("my")),symbols}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;let o=requireCssSyntaxError(),e=requireStringifier(),s=requireStringify$2(),{isClean:a,my:l}=requireSymbols();function u(h,p){let m=new h.constructor;for(let g in h){if(!Object.prototype.hasOwnProperty.call(h,g)||g==="proxyCache")continue;let y=h[g],A=typeof y;g==="parent"&&A==="object"?p&&(m[g]=p):g==="source"?m[g]=y:Array.isArray(y)?m[g]=y.map(T=>u(T,m)):(A==="object"&&y!==null&&(y=u(y)),m[g]=y)}return m}function c(h,p){if(p&&typeof p.offset<"u")return p.offset;let m=1,g=1,y=0;for(let A=0;A<h.length;A++){if(g===p.line&&m===p.column){y=A;break}h[A]===`
`?(m=1,g+=1):m+=1}return y}class d{get proxyOf(){return this}constructor(p={}){this.raws={},this[a]=!1,this[l]=!0;for(let m in p)if(m==="nodes"){this.nodes=[];for(let g of p[m])typeof g.clone=="function"?this.append(g.clone()):this.append(g)}else this[m]=p[m]}addToError(p){if(p.postcssNode=this,p.stack&&this.source&&/\n\s{4}at /.test(p.stack)){let m=this.source;p.stack=p.stack.replace(/\n\s{4}at /,`$&${m.input.from}:${m.start.line}:${m.start.column}$&`)}return p}after(p){return this.parent.insertAfter(this,p),this}assign(p={}){for(let m in p)this[m]=p[m];return this}before(p){return this.parent.insertBefore(this,p),this}cleanRaws(p){delete this.raws.before,delete this.raws.after,p||delete this.raws.between}clone(p={}){let m=u(this);for(let g in p)m[g]=p[g];return m}cloneAfter(p={}){let m=this.clone(p);return this.parent.insertAfter(this,m),m}cloneBefore(p={}){let m=this.clone(p);return this.parent.insertBefore(this,m),m}error(p,m={}){if(this.source){let{end:g,start:y}=this.rangeBy(m);return this.source.input.error(p,{column:y.column,line:y.line},{column:g.column,line:g.line},m)}return new o(p)}getProxyProcessor(){return{get(p,m){return m==="proxyOf"?p:m==="root"?()=>p.root().toProxy():p[m]},set(p,m,g){return p[m]===g||(p[m]=g,(m==="prop"||m==="value"||m==="name"||m==="params"||m==="important"||m==="text")&&p.markDirty()),!0}}}markClean(){this[a]=!0}markDirty(){if(this[a]){this[a]=!1;let p=this;for(;p=p.parent;)p[a]=!1}}next(){if(!this.parent)return;let p=this.parent.index(this);return this.parent.nodes[p+1]}positionBy(p={}){let m=this.source.start;if(p.index)m=this.positionInside(p.index);else if(p.word){let g="document"in this.source.input?this.source.input.document:this.source.input.css,A=g.slice(c(g,this.source.start),c(g,this.source.end)).indexOf(p.word);A!==-1&&(m=this.positionInside(A))}return m}positionInside(p){let m=this.source.start.column,g=this.source.start.line,y="document"in this.source.input?this.source.input.document:this.source.input.css,A=c(y,this.source.start),T=A+p;for(let E=A;E<T;E++)y[E]===`
`?(m=1,g+=1):m+=1;return{column:m,line:g,offset:T}}prev(){if(!this.parent)return;let p=this.parent.index(this);return this.parent.nodes[p-1]}rangeBy(p={}){let m="document"in this.source.input?this.source.input.document:this.source.input.css,g={column:this.source.start.column,line:this.source.start.line,offset:c(m,this.source.start)},y=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:typeof this.source.end.offset=="number"?this.source.end.offset:c(m,this.source.end)+1}:{column:g.column+1,line:g.line,offset:g.offset+1};if(p.word){let T=m.slice(c(m,this.source.start),c(m,this.source.end)).indexOf(p.word);T!==-1&&(g=this.positionInside(T),y=this.positionInside(T+p.word.length))}else p.start?g={column:p.start.column,line:p.start.line,offset:c(m,p.start)}:p.index&&(g=this.positionInside(p.index)),p.end?y={column:p.end.column,line:p.end.line,offset:c(m,p.end)}:typeof p.endIndex=="number"?y=this.positionInside(p.endIndex):p.index&&(y=this.positionInside(p.index+1));return(y.line<g.line||y.line===g.line&&y.column<=g.column)&&(y={column:g.column+1,line:g.line,offset:g.offset+1}),{end:y,start:g}}raw(p,m){return new e().raw(this,p,m)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...p){if(this.parent){let m=this,g=!1;for(let y of p)y===this?g=!0:g?(this.parent.insertAfter(m,y),m=y):this.parent.insertBefore(m,y);g||this.remove()}return this}root(){let p=this;for(;p.parent&&p.parent.type!=="document";)p=p.parent;return p}toJSON(p,m){let g={},y=m==null;m=m||new Map;let A=0;for(let T in this){if(!Object.prototype.hasOwnProperty.call(this,T)||T==="parent"||T==="proxyCache")continue;let E=this[T];if(Array.isArray(E))g[T]=E.map(v=>typeof v=="object"&&v.toJSON?v.toJSON(null,m):v);else if(typeof E=="object"&&E.toJSON)g[T]=E.toJSON(null,m);else if(T==="source"){if(E==null)continue;let v=m.get(E.input);v==null&&(v=A,m.set(E.input,A),A++),g[T]={end:E.end,inputId:v,start:E.start}}else g[T]=E}return y&&(g.inputs=[...m.keys()].map(T=>T.toJSON())),g}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(p=s){p.stringify&&(p=p.stringify);let m="";return p(this,g=>{m+=g}),m}warn(p,m,g={}){let y={node:this};for(let A in g)y[A]=g[A];return p.warn(m,y)}}return node=d,d.default=d,node}var comment$1,hasRequiredComment;function requireComment(){if(hasRequiredComment)return comment$1;hasRequiredComment=1;let o=requireNode();class e extends o{constructor(a){super(a),this.type="comment"}}return comment$1=e,e.default=e,comment$1}var declaration,hasRequiredDeclaration;function requireDeclaration(){if(hasRequiredDeclaration)return declaration;hasRequiredDeclaration=1;let o=requireNode();class e extends o{get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}constructor(a){a&&typeof a.value<"u"&&typeof a.value!="string"&&(a={...a,value:String(a.value)}),super(a),this.type="decl"}}return declaration=e,e.default=e,declaration}var container,hasRequiredContainer;function requireContainer(){if(hasRequiredContainer)return container;hasRequiredContainer=1;let o=requireComment(),e=requireDeclaration(),s=requireNode(),{isClean:a,my:l}=requireSymbols(),u,c,d,h;function p(y){return y.map(A=>(A.nodes&&(A.nodes=p(A.nodes)),delete A.source,A))}function m(y){if(y[a]=!1,y.proxyOf.nodes)for(let A of y.proxyOf.nodes)m(A)}class g extends s{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...A){for(let T of A){let E=this.normalize(T,this.last);for(let v of E)this.proxyOf.nodes.push(v)}return this.markDirty(),this}cleanRaws(A){if(super.cleanRaws(A),this.nodes)for(let T of this.nodes)T.cleanRaws(A)}each(A){if(!this.proxyOf.nodes)return;let T=this.getIterator(),E,v;for(;this.indexes[T]<this.proxyOf.nodes.length&&(E=this.indexes[T],v=A(this.proxyOf.nodes[E],E),v!==!1);)this.indexes[T]+=1;return delete this.indexes[T],v}every(A){return this.nodes.every(A)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let A=this.lastEach;return this.indexes[A]=0,A}getProxyProcessor(){return{get(A,T){return T==="proxyOf"?A:A[T]?T==="each"||typeof T=="string"&&T.startsWith("walk")?(...E)=>A[T](...E.map(v=>typeof v=="function"?(_,w)=>v(_.toProxy(),w):v)):T==="every"||T==="some"?E=>A[T]((v,..._)=>E(v.toProxy(),..._)):T==="root"?()=>A.root().toProxy():T==="nodes"?A.nodes.map(E=>E.toProxy()):T==="first"||T==="last"?A[T].toProxy():A[T]:A[T]},set(A,T,E){return A[T]===E||(A[T]=E,(T==="name"||T==="params"||T==="selector")&&A.markDirty()),!0}}}index(A){return typeof A=="number"?A:(A.proxyOf&&(A=A.proxyOf),this.proxyOf.nodes.indexOf(A))}insertAfter(A,T){let E=this.index(A),v=this.normalize(T,this.proxyOf.nodes[E]).reverse();E=this.index(A);for(let w of v)this.proxyOf.nodes.splice(E+1,0,w);let _;for(let w in this.indexes)_=this.indexes[w],E<_&&(this.indexes[w]=_+v.length);return this.markDirty(),this}insertBefore(A,T){let E=this.index(A),v=E===0?"prepend":!1,_=this.normalize(T,this.proxyOf.nodes[E],v).reverse();E=this.index(A);for(let R of _)this.proxyOf.nodes.splice(E,0,R);let w;for(let R in this.indexes)w=this.indexes[R],E<=w&&(this.indexes[R]=w+_.length);return this.markDirty(),this}normalize(A,T){if(typeof A=="string")A=p(c(A).nodes);else if(typeof A>"u")A=[];else if(Array.isArray(A)){A=A.slice(0);for(let v of A)v.parent&&v.parent.removeChild(v,"ignore")}else if(A.type==="root"&&this.type!=="document"){A=A.nodes.slice(0);for(let v of A)v.parent&&v.parent.removeChild(v,"ignore")}else if(A.type)A=[A];else if(A.prop){if(typeof A.value>"u")throw new Error("Value field is missed in node creation");typeof A.value!="string"&&(A.value=String(A.value)),A=[new e(A)]}else if(A.selector||A.selectors)A=[new h(A)];else if(A.name)A=[new u(A)];else if(A.text)A=[new o(A)];else throw new Error("Unknown node type in node creation");return A.map(v=>(v[l]||g.rebuild(v),v=v.proxyOf,v.parent&&v.parent.removeChild(v),v[a]&&m(v),v.raws||(v.raws={}),typeof v.raws.before>"u"&&T&&typeof T.raws.before<"u"&&(v.raws.before=T.raws.before.replace(/\S/g,"")),v.parent=this.proxyOf,v))}prepend(...A){A=A.reverse();for(let T of A){let E=this.normalize(T,this.first,"prepend").reverse();for(let v of E)this.proxyOf.nodes.unshift(v);for(let v in this.indexes)this.indexes[v]=this.indexes[v]+E.length}return this.markDirty(),this}push(A){return A.parent=this,this.proxyOf.nodes.push(A),this}removeAll(){for(let A of this.proxyOf.nodes)A.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(A){A=this.index(A),this.proxyOf.nodes[A].parent=void 0,this.proxyOf.nodes.splice(A,1);let T;for(let E in this.indexes)T=this.indexes[E],T>=A&&(this.indexes[E]=T-1);return this.markDirty(),this}replaceValues(A,T,E){return E||(E=T,T={}),this.walkDecls(v=>{T.props&&!T.props.includes(v.prop)||T.fast&&!v.value.includes(T.fast)||(v.value=v.value.replace(A,E))}),this.markDirty(),this}some(A){return this.nodes.some(A)}walk(A){return this.each((T,E)=>{let v;try{v=A(T,E)}catch(_){throw T.addToError(_)}return v!==!1&&T.walk&&(v=T.walk(A)),v})}walkAtRules(A,T){return T?A instanceof RegExp?this.walk((E,v)=>{if(E.type==="atrule"&&A.test(E.name))return T(E,v)}):this.walk((E,v)=>{if(E.type==="atrule"&&E.name===A)return T(E,v)}):(T=A,this.walk((E,v)=>{if(E.type==="atrule")return T(E,v)}))}walkComments(A){return this.walk((T,E)=>{if(T.type==="comment")return A(T,E)})}walkDecls(A,T){return T?A instanceof RegExp?this.walk((E,v)=>{if(E.type==="decl"&&A.test(E.prop))return T(E,v)}):this.walk((E,v)=>{if(E.type==="decl"&&E.prop===A)return T(E,v)}):(T=A,this.walk((E,v)=>{if(E.type==="decl")return T(E,v)}))}walkRules(A,T){return T?A instanceof RegExp?this.walk((E,v)=>{if(E.type==="rule"&&A.test(E.selector))return T(E,v)}):this.walk((E,v)=>{if(E.type==="rule"&&E.selector===A)return T(E,v)}):(T=A,this.walk((E,v)=>{if(E.type==="rule")return T(E,v)}))}}return g.registerParse=y=>{c=y},g.registerRule=y=>{h=y},g.registerAtRule=y=>{u=y},g.registerRoot=y=>{d=y},container=g,g.default=g,g.rebuild=y=>{y.type==="atrule"?Object.setPrototypeOf(y,u.prototype):y.type==="rule"?Object.setPrototypeOf(y,h.prototype):y.type==="decl"?Object.setPrototypeOf(y,e.prototype):y.type==="comment"?Object.setPrototypeOf(y,o.prototype):y.type==="root"&&Object.setPrototypeOf(y,d.prototype),y[l]=!0,y.nodes&&y.nodes.forEach(A=>{g.rebuild(A)})},container}var atRule,hasRequiredAtRule;function requireAtRule(){if(hasRequiredAtRule)return atRule;hasRequiredAtRule=1;let o=requireContainer();class e extends o{constructor(a){super(a),this.type="atrule"}append(...a){return this.proxyOf.nodes||(this.nodes=[]),super.append(...a)}prepend(...a){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...a)}}return atRule=e,e.default=e,o.registerAtRule(e),atRule}var document$1,hasRequiredDocument;function requireDocument(){if(hasRequiredDocument)return document$1;hasRequiredDocument=1;let o=requireContainer(),e,s;class a extends o{constructor(u){super({type:"document",...u}),this.nodes||(this.nodes=[])}toResult(u={}){return new e(new s,this,u).stringify()}}return a.registerLazyResult=l=>{e=l},a.registerProcessor=l=>{s=l},document$1=a,a.default=a,document$1}var nonSecure,hasRequiredNonSecure;function requireNonSecure(){if(hasRequiredNonSecure)return nonSecure;hasRequiredNonSecure=1;let o="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";return nonSecure={nanoid:(a=21)=>{let l="",u=a|0;for(;u--;)l+=o[Math.random()*64|0];return l},customAlphabet:(a,l=21)=>(u=l)=>{let c="",d=u|0;for(;d--;)c+=a[Math.random()*a.length|0];return c}},nonSecure}var buffer={},base64Js={};base64Js.byteLength=byteLength,base64Js.toByteArray=toByteArray,base64Js.fromByteArray=fromByteArray;for(var lookup$1=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i$1=0,len=code$2.length;i$1<len;++i$1)lookup$1[i$1]=code$2[i$1],revLookup[code$2.charCodeAt(i$1)]=i$1;revLookup[45]=62,revLookup[95]=63;function getLens(o){var e=o.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=o.indexOf("=");s===-1&&(s=e);var a=s===e?0:4-s%4;return[s,a]}function byteLength(o){var e=getLens(o),s=e[0],a=e[1];return(s+a)*3/4-a}function _byteLength(o,e,s){return(e+s)*3/4-s}function toByteArray(o){var e,s=getLens(o),a=s[0],l=s[1],u=new Arr(_byteLength(o,a,l)),c=0,d=l>0?a-4:a,h;for(h=0;h<d;h+=4)e=revLookup[o.charCodeAt(h)]<<18|revLookup[o.charCodeAt(h+1)]<<12|revLookup[o.charCodeAt(h+2)]<<6|revLookup[o.charCodeAt(h+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=e&255;return l===2&&(e=revLookup[o.charCodeAt(h)]<<2|revLookup[o.charCodeAt(h+1)]>>4,u[c++]=e&255),l===1&&(e=revLookup[o.charCodeAt(h)]<<10|revLookup[o.charCodeAt(h+1)]<<4|revLookup[o.charCodeAt(h+2)]>>2,u[c++]=e>>8&255,u[c++]=e&255),u}function tripletToBase64(o){return lookup$1[o>>18&63]+lookup$1[o>>12&63]+lookup$1[o>>6&63]+lookup$1[o&63]}function encodeChunk(o,e,s){for(var a,l=[],u=e;u<s;u+=3)a=(o[u]<<16&16711680)+(o[u+1]<<8&65280)+(o[u+2]&255),l.push(tripletToBase64(a));return l.join("")}function fromByteArray(o){for(var e,s=o.length,a=s%3,l=[],u=16383,c=0,d=s-a;c<d;c+=u)l.push(encodeChunk(o,c,c+u>d?d:c+u));return a===1?(e=o[s-1],l.push(lookup$1[e>>2]+lookup$1[e<<4&63]+"==")):a===2&&(e=(o[s-2]<<8)+o[s-1],l.push(lookup$1[e>>10]+lookup$1[e>>4&63]+lookup$1[e<<2&63]+"=")),l.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(o,e,s,a,l){var u,c,d=l*8-a-1,h=(1<<d)-1,p=h>>1,m=-7,g=s?l-1:0,y=s?-1:1,A=o[e+g];for(g+=y,u=A&(1<<-m)-1,A>>=-m,m+=d;m>0;u=u*256+o[e+g],g+=y,m-=8);for(c=u&(1<<-m)-1,u>>=-m,m+=a;m>0;c=c*256+o[e+g],g+=y,m-=8);if(u===0)u=1-p;else{if(u===h)return c?NaN:(A?-1:1)*(1/0);c=c+Math.pow(2,a),u=u-p}return(A?-1:1)*c*Math.pow(2,u-a)},ieee754.write=function(o,e,s,a,l,u){var c,d,h,p=u*8-l-1,m=(1<<p)-1,g=m>>1,y=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=a?0:u-1,T=a?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(d=isNaN(e)?1:0,c=m):(c=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-c))<1&&(c--,h*=2),c+g>=1?e+=y/h:e+=y*Math.pow(2,1-g),e*h>=2&&(c++,h/=2),c+g>=m?(d=0,c=m):c+g>=1?(d=(e*h-1)*Math.pow(2,l),c=c+g):(d=e*Math.pow(2,g-1)*Math.pow(2,l),c=0));l>=8;o[s+A]=d&255,A+=T,d/=256,l-=8);for(c=c<<l|d,p+=l;p>0;o[s+A]=c&255,A+=T,c/=256,p-=8);o[s+A-T]|=E*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(o){const e=base64Js,s=ieee754,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;o.Buffer=m,o.SlowBuffer=I,o.INSPECT_MAX_BYTES=50;const l=2147483647;o.kMaxLength=l;const{Uint8Array:u,ArrayBuffer:c,SharedArrayBuffer:d}=globalThis;m.TYPED_ARRAY_SUPPORT=h(),!m.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{const ae=new u(1),H={foo:function(){return 42}};return Object.setPrototypeOf(H,u.prototype),Object.setPrototypeOf(ae,H),ae.foo()===42}catch{return!1}}Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}});function p(ae){if(ae>l)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const H=new u(ae);return Object.setPrototypeOf(H,m.prototype),H}function m(ae,H,W){if(typeof ae=="number"){if(typeof H=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return T(ae)}return g(ae,H,W)}m.poolSize=8192;function g(ae,H,W){if(typeof ae=="string")return E(ae,H);if(c.isView(ae))return _(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(dt(ae,c)||ae&&dt(ae.buffer,c)||typeof d<"u"&&(dt(ae,d)||ae&&dt(ae.buffer,d)))return w(ae,H,W);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const me=ae.valueOf&&ae.valueOf();if(me!=null&&me!==ae)return m.from(me,H,W);const _e=R(ae);if(_e)return _e;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return m.from(ae[Symbol.toPrimitive]("string"),H,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}m.from=function(ae,H,W){return g(ae,H,W)},Object.setPrototypeOf(m.prototype,u.prototype),Object.setPrototypeOf(m,u);function y(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function A(ae,H,W){return y(ae),ae<=0?p(ae):H!==void 0?typeof W=="string"?p(ae).fill(H,W):p(ae).fill(H):p(ae)}m.alloc=function(ae,H,W){return A(ae,H,W)};function T(ae){return y(ae),p(ae<0?0:k(ae)|0)}m.allocUnsafe=function(ae){return T(ae)},m.allocUnsafeSlow=function(ae){return T(ae)};function E(ae,H){if((typeof H!="string"||H==="")&&(H="utf8"),!m.isEncoding(H))throw new TypeError("Unknown encoding: "+H);const W=P(ae,H)|0;let me=p(W);const _e=me.write(ae,H);return _e!==W&&(me=me.slice(0,_e)),me}function v(ae){const H=ae.length<0?0:k(ae.length)|0,W=p(H);for(let me=0;me<H;me+=1)W[me]=ae[me]&255;return W}function _(ae){if(dt(ae,u)){const H=new u(ae);return w(H.buffer,H.byteOffset,H.byteLength)}return v(ae)}function w(ae,H,W){if(H<0||ae.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<H+(W||0))throw new RangeError('"length" is outside of buffer bounds');let me;return H===void 0&&W===void 0?me=new u(ae):W===void 0?me=new u(ae,H):me=new u(ae,H,W),Object.setPrototypeOf(me,m.prototype),me}function R(ae){if(m.isBuffer(ae)){const H=k(ae.length)|0,W=p(H);return W.length===0||ae.copy(W,0,0,H),W}if(ae.length!==void 0)return typeof ae.length!="number"||bt(ae.length)?p(0):v(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return v(ae.data)}function k(ae){if(ae>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return ae|0}function I(ae){return+ae!=ae&&(ae=0),m.alloc(+ae)}m.isBuffer=function(H){return H!=null&&H._isBuffer===!0&&H!==m.prototype},m.compare=function(H,W){if(dt(H,u)&&(H=m.from(H,H.offset,H.byteLength)),dt(W,u)&&(W=m.from(W,W.offset,W.byteLength)),!m.isBuffer(H)||!m.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===W)return 0;let me=H.length,_e=W.length;for(let De=0,ye=Math.min(me,_e);De<ye;++De)if(H[De]!==W[De]){me=H[De],_e=W[De];break}return me<_e?-1:_e<me?1:0},m.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(H,W){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(H.length===0)return m.alloc(0);let me;if(W===void 0)for(W=0,me=0;me<H.length;++me)W+=H[me].length;const _e=m.allocUnsafe(W);let De=0;for(me=0;me<H.length;++me){let ye=H[me];if(dt(ye,u))De+ye.length>_e.length?(m.isBuffer(ye)||(ye=m.from(ye)),ye.copy(_e,De)):u.prototype.set.call(_e,ye,De);else if(m.isBuffer(ye))ye.copy(_e,De);else throw new TypeError('"list" argument must be an Array of Buffers');De+=ye.length}return _e};function P(ae,H){if(m.isBuffer(ae))return ae.length;if(c.isView(ae)||dt(ae,c))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const W=ae.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&W===0)return 0;let _e=!1;for(;;)switch(H){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return Ge(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return He(ae).length;default:if(_e)return me?-1:Ge(ae).length;H=(""+H).toLowerCase(),_e=!0}}m.byteLength=P;function N(ae,H,W){let me=!1;if((H===void 0||H<0)&&(H=0),H>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,H>>>=0,W<=H))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return K(this,H,W);case"utf8":case"utf-8":return de(this,H,W);case"ascii":return ue(this,H,W);case"latin1":case"binary":return G(this,H,W);case"base64":return fe(this,H,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,H,W);default:if(me)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),me=!0}}m.prototype._isBuffer=!0;function L(ae,H,W){const me=ae[H];ae[H]=ae[W],ae[W]=me}m.prototype.swap16=function(){const H=this.length;if(H%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let W=0;W<H;W+=2)L(this,W,W+1);return this},m.prototype.swap32=function(){const H=this.length;if(H%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let W=0;W<H;W+=4)L(this,W,W+3),L(this,W+1,W+2);return this},m.prototype.swap64=function(){const H=this.length;if(H%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let W=0;W<H;W+=8)L(this,W,W+7),L(this,W+1,W+6),L(this,W+2,W+5),L(this,W+3,W+4);return this},m.prototype.toString=function(){const H=this.length;return H===0?"":arguments.length===0?de(this,0,H):N.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(H){if(!m.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H?!0:m.compare(this,H)===0},m.prototype.inspect=function(){let H="";const W=o.INSPECT_MAX_BYTES;return H=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(H+=" ... "),"<Buffer "+H+">"},a&&(m.prototype[a]=m.prototype.inspect),m.prototype.compare=function(H,W,me,_e,De){if(dt(H,u)&&(H=m.from(H,H.offset,H.byteLength)),!m.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(W===void 0&&(W=0),me===void 0&&(me=H?H.length:0),_e===void 0&&(_e=0),De===void 0&&(De=this.length),W<0||me>H.length||_e<0||De>this.length)throw new RangeError("out of range index");if(_e>=De&&W>=me)return 0;if(_e>=De)return-1;if(W>=me)return 1;if(W>>>=0,me>>>=0,_e>>>=0,De>>>=0,this===H)return 0;let ye=De-_e,we=me-W;const et=Math.min(ye,we),ot=this.slice(_e,De),st=H.slice(W,me);for(let Ke=0;Ke<et;++Ke)if(ot[Ke]!==st[Ke]){ye=ot[Ke],we=st[Ke];break}return ye<we?-1:we<ye?1:0};function Q(ae,H,W,me,_e){if(ae.length===0)return-1;if(typeof W=="string"?(me=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,bt(W)&&(W=_e?0:ae.length-1),W<0&&(W=ae.length+W),W>=ae.length){if(_e)return-1;W=ae.length-1}else if(W<0)if(_e)W=0;else return-1;if(typeof H=="string"&&(H=m.from(H,me)),m.isBuffer(H))return H.length===0?-1:j(ae,H,W,me,_e);if(typeof H=="number")return H=H&255,typeof u.prototype.indexOf=="function"?_e?u.prototype.indexOf.call(ae,H,W):u.prototype.lastIndexOf.call(ae,H,W):j(ae,[H],W,me,_e);throw new TypeError("val must be string, number or Buffer")}function j(ae,H,W,me,_e){let De=1,ye=ae.length,we=H.length;if(me!==void 0&&(me=String(me).toLowerCase(),me==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(ae.length<2||H.length<2)return-1;De=2,ye/=2,we/=2,W/=2}function et(st,Ke){return De===1?st[Ke]:st.readUInt16BE(Ke*De)}let ot;if(_e){let st=-1;for(ot=W;ot<ye;ot++)if(et(ae,ot)===et(H,st===-1?0:ot-st)){if(st===-1&&(st=ot),ot-st+1===we)return st*De}else st!==-1&&(ot-=ot-st),st=-1}else for(W+we>ye&&(W=ye-we),ot=W;ot>=0;ot--){let st=!0;for(let Ke=0;Ke<we;Ke++)if(et(ae,ot+Ke)!==et(H,Ke)){st=!1;break}if(st)return ot}return-1}m.prototype.includes=function(H,W,me){return this.indexOf(H,W,me)!==-1},m.prototype.indexOf=function(H,W,me){return Q(this,H,W,me,!0)},m.prototype.lastIndexOf=function(H,W,me){return Q(this,H,W,me,!1)};function F(ae,H,W,me){W=Number(W)||0;const _e=ae.length-W;me?(me=Number(me),me>_e&&(me=_e)):me=_e;const De=H.length;me>De/2&&(me=De/2);let ye;for(ye=0;ye<me;++ye){const we=parseInt(H.substr(ye*2,2),16);if(bt(we))return ye;ae[W+ye]=we}return ye}function V(ae,H,W,me){return at(Ge(H,ae.length-W),ae,W,me)}function J(ae,H,W,me){return at(Ye(H),ae,W,me)}function z(ae,H,W,me){return at(He(H),ae,W,me)}function Y(ae,H,W,me){return at(Ve(H,ae.length-W),ae,W,me)}m.prototype.write=function(H,W,me,_e){if(W===void 0)_e="utf8",me=this.length,W=0;else if(me===void 0&&typeof W=="string")_e=W,me=this.length,W=0;else if(isFinite(W))W=W>>>0,isFinite(me)?(me=me>>>0,_e===void 0&&(_e="utf8")):(_e=me,me=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const De=this.length-W;if((me===void 0||me>De)&&(me=De),H.length>0&&(me<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");_e||(_e="utf8");let ye=!1;for(;;)switch(_e){case"hex":return F(this,H,W,me);case"utf8":case"utf-8":return V(this,H,W,me);case"ascii":case"latin1":case"binary":return J(this,H,W,me);case"base64":return z(this,H,W,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,H,W,me);default:if(ye)throw new TypeError("Unknown encoding: "+_e);_e=(""+_e).toLowerCase(),ye=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function fe(ae,H,W){return H===0&&W===ae.length?e.fromByteArray(ae):e.fromByteArray(ae.slice(H,W))}function de(ae,H,W){W=Math.min(ae.length,W);const me=[];let _e=H;for(;_e<W;){const De=ae[_e];let ye=null,we=De>239?4:De>223?3:De>191?2:1;if(_e+we<=W){let et,ot,st,Ke;switch(we){case 1:De<128&&(ye=De);break;case 2:et=ae[_e+1],(et&192)===128&&(Ke=(De&31)<<6|et&63,Ke>127&&(ye=Ke));break;case 3:et=ae[_e+1],ot=ae[_e+2],(et&192)===128&&(ot&192)===128&&(Ke=(De&15)<<12|(et&63)<<6|ot&63,Ke>2047&&(Ke<55296||Ke>57343)&&(ye=Ke));break;case 4:et=ae[_e+1],ot=ae[_e+2],st=ae[_e+3],(et&192)===128&&(ot&192)===128&&(st&192)===128&&(Ke=(De&15)<<18|(et&63)<<12|(ot&63)<<6|st&63,Ke>65535&&Ke<1114112&&(ye=Ke))}}ye===null?(ye=65533,we=1):ye>65535&&(ye-=65536,me.push(ye>>>10&1023|55296),ye=56320|ye&1023),me.push(ye),_e+=we}return he(me)}const X=4096;function he(ae){const H=ae.length;if(H<=X)return String.fromCharCode.apply(String,ae);let W="",me=0;for(;me<H;)W+=String.fromCharCode.apply(String,ae.slice(me,me+=X));return W}function ue(ae,H,W){let me="";W=Math.min(ae.length,W);for(let _e=H;_e<W;++_e)me+=String.fromCharCode(ae[_e]&127);return me}function G(ae,H,W){let me="";W=Math.min(ae.length,W);for(let _e=H;_e<W;++_e)me+=String.fromCharCode(ae[_e]);return me}function K(ae,H,W){const me=ae.length;(!H||H<0)&&(H=0),(!W||W<0||W>me)&&(W=me);let _e="";for(let De=H;De<W;++De)_e+=Ct[ae[De]];return _e}function q(ae,H,W){const me=ae.slice(H,W);let _e="";for(let De=0;De<me.length-1;De+=2)_e+=String.fromCharCode(me[De]+me[De+1]*256);return _e}m.prototype.slice=function(H,W){const me=this.length;H=~~H,W=W===void 0?me:~~W,H<0?(H+=me,H<0&&(H=0)):H>me&&(H=me),W<0?(W+=me,W<0&&(W=0)):W>me&&(W=me),W<H&&(W=H);const _e=this.subarray(H,W);return Object.setPrototypeOf(_e,m.prototype),_e};function te(ae,H,W){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+H>W)throw new RangeError("Trying to access beyond buffer length")}m.prototype.readUintLE=m.prototype.readUIntLE=function(H,W,me){H=H>>>0,W=W>>>0,me||te(H,W,this.length);let _e=this[H],De=1,ye=0;for(;++ye<W&&(De*=256);)_e+=this[H+ye]*De;return _e},m.prototype.readUintBE=m.prototype.readUIntBE=function(H,W,me){H=H>>>0,W=W>>>0,me||te(H,W,this.length);let _e=this[H+--W],De=1;for(;W>0&&(De*=256);)_e+=this[H+--W]*De;return _e},m.prototype.readUint8=m.prototype.readUInt8=function(H,W){return H=H>>>0,W||te(H,1,this.length),this[H]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(H,W){return H=H>>>0,W||te(H,2,this.length),this[H]|this[H+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(H,W){return H=H>>>0,W||te(H,2,this.length),this[H]<<8|this[H+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(H,W){return H=H>>>0,W||te(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+this[H+3]*16777216},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(H,W){return H=H>>>0,W||te(H,4,this.length),this[H]*16777216+(this[H+1]<<16|this[H+2]<<8|this[H+3])},m.prototype.readBigUInt64LE=ht(function(H){H=H>>>0,Ue(H,"offset");const W=this[H],me=this[H+7];(W===void 0||me===void 0)&&Be(H,this.length-8);const _e=W+this[++H]*2**8+this[++H]*2**16+this[++H]*2**24,De=this[++H]+this[++H]*2**8+this[++H]*2**16+me*2**24;return BigInt(_e)+(BigInt(De)<<BigInt(32))}),m.prototype.readBigUInt64BE=ht(function(H){H=H>>>0,Ue(H,"offset");const W=this[H],me=this[H+7];(W===void 0||me===void 0)&&Be(H,this.length-8);const _e=W*2**24+this[++H]*2**16+this[++H]*2**8+this[++H],De=this[++H]*2**24+this[++H]*2**16+this[++H]*2**8+me;return(BigInt(_e)<<BigInt(32))+BigInt(De)}),m.prototype.readIntLE=function(H,W,me){H=H>>>0,W=W>>>0,me||te(H,W,this.length);let _e=this[H],De=1,ye=0;for(;++ye<W&&(De*=256);)_e+=this[H+ye]*De;return De*=128,_e>=De&&(_e-=Math.pow(2,8*W)),_e},m.prototype.readIntBE=function(H,W,me){H=H>>>0,W=W>>>0,me||te(H,W,this.length);let _e=W,De=1,ye=this[H+--_e];for(;_e>0&&(De*=256);)ye+=this[H+--_e]*De;return De*=128,ye>=De&&(ye-=Math.pow(2,8*W)),ye},m.prototype.readInt8=function(H,W){return H=H>>>0,W||te(H,1,this.length),this[H]&128?(255-this[H]+1)*-1:this[H]},m.prototype.readInt16LE=function(H,W){H=H>>>0,W||te(H,2,this.length);const me=this[H]|this[H+1]<<8;return me&32768?me|4294901760:me},m.prototype.readInt16BE=function(H,W){H=H>>>0,W||te(H,2,this.length);const me=this[H+1]|this[H]<<8;return me&32768?me|4294901760:me},m.prototype.readInt32LE=function(H,W){return H=H>>>0,W||te(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},m.prototype.readInt32BE=function(H,W){return H=H>>>0,W||te(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},m.prototype.readBigInt64LE=ht(function(H){H=H>>>0,Ue(H,"offset");const W=this[H],me=this[H+7];(W===void 0||me===void 0)&&Be(H,this.length-8);const _e=this[H+4]+this[H+5]*2**8+this[H+6]*2**16+(me<<24);return(BigInt(_e)<<BigInt(32))+BigInt(W+this[++H]*2**8+this[++H]*2**16+this[++H]*2**24)}),m.prototype.readBigInt64BE=ht(function(H){H=H>>>0,Ue(H,"offset");const W=this[H],me=this[H+7];(W===void 0||me===void 0)&&Be(H,this.length-8);const _e=(W<<24)+this[++H]*2**16+this[++H]*2**8+this[++H];return(BigInt(_e)<<BigInt(32))+BigInt(this[++H]*2**24+this[++H]*2**16+this[++H]*2**8+me)}),m.prototype.readFloatLE=function(H,W){return H=H>>>0,W||te(H,4,this.length),s.read(this,H,!0,23,4)},m.prototype.readFloatBE=function(H,W){return H=H>>>0,W||te(H,4,this.length),s.read(this,H,!1,23,4)},m.prototype.readDoubleLE=function(H,W){return H=H>>>0,W||te(H,8,this.length),s.read(this,H,!0,52,8)},m.prototype.readDoubleBE=function(H,W){return H=H>>>0,W||te(H,8,this.length),s.read(this,H,!1,52,8)};function Z(ae,H,W,me,_e,De){if(!m.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>_e||H<De)throw new RangeError('"value" argument is out of bounds');if(W+me>ae.length)throw new RangeError("Index out of range")}m.prototype.writeUintLE=m.prototype.writeUIntLE=function(H,W,me,_e){if(H=+H,W=W>>>0,me=me>>>0,!_e){const we=Math.pow(2,8*me)-1;Z(this,H,W,me,we,0)}let De=1,ye=0;for(this[W]=H&255;++ye<me&&(De*=256);)this[W+ye]=H/De&255;return W+me},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(H,W,me,_e){if(H=+H,W=W>>>0,me=me>>>0,!_e){const we=Math.pow(2,8*me)-1;Z(this,H,W,me,we,0)}let De=me-1,ye=1;for(this[W+De]=H&255;--De>=0&&(ye*=256);)this[W+De]=H/ye&255;return W+me},m.prototype.writeUint8=m.prototype.writeUInt8=function(H,W,me){return H=+H,W=W>>>0,me||Z(this,H,W,1,255,0),this[W]=H&255,W+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(H,W,me){return H=+H,W=W>>>0,me||Z(this,H,W,2,65535,0),this[W]=H&255,this[W+1]=H>>>8,W+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(H,W,me){return H=+H,W=W>>>0,me||Z(this,H,W,2,65535,0),this[W]=H>>>8,this[W+1]=H&255,W+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(H,W,me){return H=+H,W=W>>>0,me||Z(this,H,W,4,4294967295,0),this[W+3]=H>>>24,this[W+2]=H>>>16,this[W+1]=H>>>8,this[W]=H&255,W+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(H,W,me){return H=+H,W=W>>>0,me||Z(this,H,W,4,4294967295,0),this[W]=H>>>24,this[W+1]=H>>>16,this[W+2]=H>>>8,this[W+3]=H&255,W+4};function ce(ae,H,W,me,_e){Le(H,me,_e,ae,W,7);let De=Number(H&BigInt(4294967295));ae[W++]=De,De=De>>8,ae[W++]=De,De=De>>8,ae[W++]=De,De=De>>8,ae[W++]=De;let ye=Number(H>>BigInt(32)&BigInt(4294967295));return ae[W++]=ye,ye=ye>>8,ae[W++]=ye,ye=ye>>8,ae[W++]=ye,ye=ye>>8,ae[W++]=ye,W}function be(ae,H,W,me,_e){Le(H,me,_e,ae,W,7);let De=Number(H&BigInt(4294967295));ae[W+7]=De,De=De>>8,ae[W+6]=De,De=De>>8,ae[W+5]=De,De=De>>8,ae[W+4]=De;let ye=Number(H>>BigInt(32)&BigInt(4294967295));return ae[W+3]=ye,ye=ye>>8,ae[W+2]=ye,ye=ye>>8,ae[W+1]=ye,ye=ye>>8,ae[W]=ye,W+8}m.prototype.writeBigUInt64LE=ht(function(H,W=0){return ce(this,H,W,BigInt(0),BigInt("0xffffffffffffffff"))}),m.prototype.writeBigUInt64BE=ht(function(H,W=0){return be(this,H,W,BigInt(0),BigInt("0xffffffffffffffff"))}),m.prototype.writeIntLE=function(H,W,me,_e){if(H=+H,W=W>>>0,!_e){const et=Math.pow(2,8*me-1);Z(this,H,W,me,et-1,-et)}let De=0,ye=1,we=0;for(this[W]=H&255;++De<me&&(ye*=256);)H<0&&we===0&&this[W+De-1]!==0&&(we=1),this[W+De]=(H/ye>>0)-we&255;return W+me},m.prototype.writeIntBE=function(H,W,me,_e){if(H=+H,W=W>>>0,!_e){const et=Math.pow(2,8*me-1);Z(this,H,W,me,et-1,-et)}let De=me-1,ye=1,we=0;for(this[W+De]=H&255;--De>=0&&(ye*=256);)H<0&&we===0&&this[W+De+1]!==0&&(we=1),this[W+De]=(H/ye>>0)-we&255;return W+me},m.prototype.writeInt8=function(H,W,me){return H=+H,W=W>>>0,me||Z(this,H,W,1,127,-128),H<0&&(H=255+H+1),this[W]=H&255,W+1},m.prototype.writeInt16LE=function(H,W,me){return H=+H,W=W>>>0,me||Z(this,H,W,2,32767,-32768),this[W]=H&255,this[W+1]=H>>>8,W+2},m.prototype.writeInt16BE=function(H,W,me){return H=+H,W=W>>>0,me||Z(this,H,W,2,32767,-32768),this[W]=H>>>8,this[W+1]=H&255,W+2},m.prototype.writeInt32LE=function(H,W,me){return H=+H,W=W>>>0,me||Z(this,H,W,4,2147483647,-2147483648),this[W]=H&255,this[W+1]=H>>>8,this[W+2]=H>>>16,this[W+3]=H>>>24,W+4},m.prototype.writeInt32BE=function(H,W,me){return H=+H,W=W>>>0,me||Z(this,H,W,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[W]=H>>>24,this[W+1]=H>>>16,this[W+2]=H>>>8,this[W+3]=H&255,W+4},m.prototype.writeBigInt64LE=ht(function(H,W=0){return ce(this,H,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),m.prototype.writeBigInt64BE=ht(function(H,W=0){return be(this,H,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ee(ae,H,W,me,_e,De){if(W+me>ae.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function Se(ae,H,W,me,_e){return H=+H,W=W>>>0,_e||Ee(ae,H,W,4),s.write(ae,H,W,me,23,4),W+4}m.prototype.writeFloatLE=function(H,W,me){return Se(this,H,W,!0,me)},m.prototype.writeFloatBE=function(H,W,me){return Se(this,H,W,!1,me)};function ke(ae,H,W,me,_e){return H=+H,W=W>>>0,_e||Ee(ae,H,W,8),s.write(ae,H,W,me,52,8),W+8}m.prototype.writeDoubleLE=function(H,W,me){return ke(this,H,W,!0,me)},m.prototype.writeDoubleBE=function(H,W,me){return ke(this,H,W,!1,me)},m.prototype.copy=function(H,W,me,_e){if(!m.isBuffer(H))throw new TypeError("argument should be a Buffer");if(me||(me=0),!_e&&_e!==0&&(_e=this.length),W>=H.length&&(W=H.length),W||(W=0),_e>0&&_e<me&&(_e=me),_e===me||H.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(_e<0)throw new RangeError("sourceEnd out of bounds");_e>this.length&&(_e=this.length),H.length-W<_e-me&&(_e=H.length-W+me);const De=_e-me;return this===H&&typeof u.prototype.copyWithin=="function"?this.copyWithin(W,me,_e):u.prototype.set.call(H,this.subarray(me,_e),W),De},m.prototype.fill=function(H,W,me,_e){if(typeof H=="string"){if(typeof W=="string"?(_e=W,W=0,me=this.length):typeof me=="string"&&(_e=me,me=this.length),_e!==void 0&&typeof _e!="string")throw new TypeError("encoding must be a string");if(typeof _e=="string"&&!m.isEncoding(_e))throw new TypeError("Unknown encoding: "+_e);if(H.length===1){const ye=H.charCodeAt(0);(_e==="utf8"&&ye<128||_e==="latin1")&&(H=ye)}}else typeof H=="number"?H=H&255:typeof H=="boolean"&&(H=Number(H));if(W<0||this.length<W||this.length<me)throw new RangeError("Out of range index");if(me<=W)return this;W=W>>>0,me=me===void 0?this.length:me>>>0,H||(H=0);let De;if(typeof H=="number")for(De=W;De<me;++De)this[De]=H;else{const ye=m.isBuffer(H)?H:m.from(H,_e),we=ye.length;if(we===0)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(De=0;De<me-W;++De)this[De+W]=ye[De%we]}return this};const Ae={};function Te(ae,H,W){Ae[ae]=class extends W{constructor(){super(),Object.defineProperty(this,"message",{value:H.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(_e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_e,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}Te("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Te("ERR_INVALID_ARG_TYPE",function(ae,H){return`The "${ae}" argument must be of type number. Received type ${typeof H}`},TypeError),Te("ERR_OUT_OF_RANGE",function(ae,H,W){let me=`The value of "${ae}" is out of range.`,_e=W;return Number.isInteger(W)&&Math.abs(W)>2**32?_e=xe(String(W)):typeof W=="bigint"&&(_e=String(W),(W>BigInt(2)**BigInt(32)||W<-(BigInt(2)**BigInt(32)))&&(_e=xe(_e)),_e+="n"),me+=` It must be ${H}. Received ${_e}`,me},RangeError);function xe(ae){let H="",W=ae.length;const me=ae[0]==="-"?1:0;for(;W>=me+4;W-=3)H=`_${ae.slice(W-3,W)}${H}`;return`${ae.slice(0,W)}${H}`}function Pe(ae,H,W){Ue(H,"offset"),(ae[H]===void 0||ae[H+W]===void 0)&&Be(H,ae.length-(W+1))}function Le(ae,H,W,me,_e,De){if(ae>W||ae<H){const ye=typeof H=="bigint"?"n":"";let we;throw H===0||H===BigInt(0)?we=`>= 0${ye} and < 2${ye} ** ${(De+1)*8}${ye}`:we=`>= -(2${ye} ** ${(De+1)*8-1}${ye}) and < 2 ** ${(De+1)*8-1}${ye}`,new Ae.ERR_OUT_OF_RANGE("value",we,ae)}Pe(me,_e,De)}function Ue(ae,H){if(typeof ae!="number")throw new Ae.ERR_INVALID_ARG_TYPE(H,"number",ae)}function Be(ae,H,W){throw Math.floor(ae)!==ae?(Ue(ae,W),new Ae.ERR_OUT_OF_RANGE("offset","an integer",ae)):H<0?new Ae.ERR_BUFFER_OUT_OF_BOUNDS:new Ae.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${H}`,ae)}const Ze=/[^+/0-9A-Za-z-_]/g;function We(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(Ze,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function Ge(ae,H){H=H||1/0;let W;const me=ae.length;let _e=null;const De=[];for(let ye=0;ye<me;++ye){if(W=ae.charCodeAt(ye),W>55295&&W<57344){if(!_e){if(W>56319){(H-=3)>-1&&De.push(239,191,189);continue}else if(ye+1===me){(H-=3)>-1&&De.push(239,191,189);continue}_e=W;continue}if(W<56320){(H-=3)>-1&&De.push(239,191,189),_e=W;continue}W=(_e-55296<<10|W-56320)+65536}else _e&&(H-=3)>-1&&De.push(239,191,189);if(_e=null,W<128){if((H-=1)<0)break;De.push(W)}else if(W<2048){if((H-=2)<0)break;De.push(W>>6|192,W&63|128)}else if(W<65536){if((H-=3)<0)break;De.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if((H-=4)<0)break;De.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return De}function Ye(ae){const H=[];for(let W=0;W<ae.length;++W)H.push(ae.charCodeAt(W)&255);return H}function Ve(ae,H){let W,me,_e;const De=[];for(let ye=0;ye<ae.length&&!((H-=2)<0);++ye)W=ae.charCodeAt(ye),me=W>>8,_e=W%256,De.push(_e),De.push(me);return De}function He(ae){return e.toByteArray(We(ae))}function at(ae,H,W,me){let _e;for(_e=0;_e<me&&!(_e+W>=H.length||_e>=ae.length);++_e)H[_e+W]=ae[_e];return _e}function dt(ae,H){return ae instanceof H||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===H.name}function bt(ae){return ae!==ae}const Ct=(function(){const ae="0123456789abcdef",H=new Array(256);for(let W=0;W<16;++W){const me=W*16;for(let _e=0;_e<16;++_e)H[me+_e]=ae[W]+ae[_e]}return H})();function ht(ae){return typeof BigInt>"u"?pt:ae}function pt(){throw new Error("BigInt not supported")}})(buffer);const Buffer$1=buffer.Buffer;var previousMap,hasRequiredPreviousMap;function requirePreviousMap(){if(hasRequiredPreviousMap)return previousMap;hasRequiredPreviousMap=1;let{existsSync:o,readFileSync:e}=require$$3,{dirname:s,join:a}=require$$3,{SourceMapConsumer:l,SourceMapGenerator:u}=require$$3;function c(h){return Buffer$1?Buffer$1.from(h,"base64").toString():window.atob(h)}class d{constructor(p,m){if(m.map===!1)return;this.loadAnnotation(p),this.inline=this.startWith(this.annotation,"data:");let g=m.map?m.map.prev:void 0,y=this.loadMap(m.from,g);!this.mapFile&&m.from&&(this.mapFile=m.from),this.mapFile&&(this.root=s(this.mapFile)),y&&(this.text=y)}consumer(){return this.consumerCache||(this.consumerCache=new l(this.text)),this.consumerCache}decodeInline(p){let m=/^data:application\/json;charset=utf-?8;base64,/,g=/^data:application\/json;base64,/,y=/^data:application\/json;charset=utf-?8,/,A=/^data:application\/json,/,T=p.match(y)||p.match(A);if(T)return decodeURIComponent(p.substr(T[0].length));let E=p.match(m)||p.match(g);if(E)return c(p.substr(E[0].length));let v=p.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+v)}getAnnotationURL(p){return p.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(p){return typeof p!="object"?!1:typeof p.mappings=="string"||typeof p._mappings=="string"||Array.isArray(p.sections)}loadAnnotation(p){let m=p.match(/\/\*\s*# sourceMappingURL=/g);if(!m)return;let g=p.lastIndexOf(m.pop()),y=p.indexOf("*/",g);g>-1&&y>-1&&(this.annotation=this.getAnnotationURL(p.substring(g,y)))}loadFile(p){if(this.root=s(p),o(p))return this.mapFile=p,e(p,"utf-8").toString().trim()}loadMap(p,m){if(m===!1)return!1;if(m){if(typeof m=="string")return m;if(typeof m=="function"){let g=m(p);if(g){let y=this.loadFile(g);if(!y)throw new Error("Unable to load previous source map: "+g.toString());return y}}else{if(m instanceof l)return u.fromSourceMap(m).toString();if(m instanceof u)return m.toString();if(this.isMap(m))return JSON.stringify(m);throw new Error("Unsupported previous source map format: "+m.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let g=this.annotation;return p&&(g=a(s(p),g)),this.loadFile(g)}}}startWith(p,m){return p?p.substr(0,m.length)===m:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}return previousMap=d,d.default=d,previousMap}var input,hasRequiredInput;function requireInput(){if(hasRequiredInput)return input;hasRequiredInput=1;let{nanoid:o}=requireNonSecure(),{isAbsolute:e,resolve:s}=require$$3,{SourceMapConsumer:a,SourceMapGenerator:l}=require$$3,{fileURLToPath:u,pathToFileURL:c}=require$$3,d=requireCssSyntaxError(),h=requirePreviousMap(),p=require$$3,m=Symbol("lineToIndexCache"),g=!!(a&&l),y=!!(s&&e);function A(E){if(E[m])return E[m];let v=E.css.split(`
`),_=new Array(v.length),w=0;for(let R=0,k=v.length;R<k;R++)_[R]=w,w+=v[R].length+1;return E[m]=_,_}class T{get from(){return this.file||this.id}constructor(v,_={}){if(v===null||typeof v>"u"||typeof v=="object"&&!v.toString)throw new Error(`PostCSS received ${v} instead of CSS string`);if(this.css=v.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,_.document&&(this.document=_.document.toString()),_.from&&(!y||/^\w+:\/\//.test(_.from)||e(_.from)?this.file=_.from:this.file=s(_.from)),y&&g){let w=new h(this.css,_);if(w.text){this.map=w;let R=w.consumer().file;!this.file&&R&&(this.file=this.mapResolve(R))}}this.file||(this.id="<input css "+o(6)+">"),this.map&&(this.map.file=this.from)}error(v,_,w,R={}){let k,I,P,N,L;if(_&&typeof _=="object"){let j=_,F=w;if(typeof j.offset=="number"){N=j.offset;let V=this.fromOffset(N);_=V.line,w=V.col}else _=j.line,w=j.column,N=this.fromLineAndColumn(_,w);if(typeof F.offset=="number"){P=F.offset;let V=this.fromOffset(P);I=V.line,k=V.col}else I=F.line,k=F.column,P=this.fromLineAndColumn(F.line,F.column)}else if(w)N=this.fromLineAndColumn(_,w);else{N=_;let j=this.fromOffset(N);_=j.line,w=j.col}let Q=this.origin(_,w,I,k);return Q?L=new d(v,Q.endLine===void 0?Q.line:{column:Q.column,line:Q.line},Q.endLine===void 0?Q.column:{column:Q.endColumn,line:Q.endLine},Q.source,Q.file,R.plugin):L=new d(v,I===void 0?_:{column:w,line:_},I===void 0?w:{column:k,line:I},this.css,this.file,R.plugin),L.input={column:w,endColumn:k,endLine:I,endOffset:P,line:_,offset:N,source:this.css},this.file&&(c&&(L.input.url=c(this.file).toString()),L.input.file=this.file),L}fromLineAndColumn(v,_){return A(this)[v-1]+_-1}fromOffset(v){let _=A(this),w=_[_.length-1],R=0;if(v>=w)R=_.length-1;else{let k=_.length-2,I;for(;R<k;)if(I=R+(k-R>>1),v<_[I])k=I-1;else if(v>=_[I+1])R=I+1;else{R=I;break}}return{col:v-_[R]+1,line:R+1}}mapResolve(v){return/^\w+:\/\//.test(v)?v:s(this.map.consumer().sourceRoot||this.map.root||".",v)}origin(v,_,w,R){if(!this.map)return!1;let k=this.map.consumer(),I=k.originalPositionFor({column:_,line:v});if(!I.source)return!1;let P;typeof w=="number"&&(P=k.originalPositionFor({column:R,line:w}));let N;e(I.source)?N=c(I.source):N=new URL(I.source,this.map.consumer().sourceRoot||c(this.map.mapFile));let L={column:I.column,endColumn:P&&P.column,endLine:P&&P.line,line:I.line,url:N.toString()};if(N.protocol==="file:")if(u)L.file=u(N);else throw new Error("file: protocol is not available in this PostCSS build");let Q=k.sourceContentFor(I.source);return Q&&(L.source=Q),L}toJSON(){let v={};for(let _ of["hasBOM","css","file","id"])this[_]!=null&&(v[_]=this[_]);return this.map&&(v.map={...this.map},v.map.consumerCache&&(v.map.consumerCache=void 0)),v}}return input=T,T.default=T,p&&p.registerInput&&p.registerInput(T),input}var root$1,hasRequiredRoot;function requireRoot(){if(hasRequiredRoot)return root$1;hasRequiredRoot=1;let o=requireContainer(),e,s;class a extends o{constructor(u){super(u),this.type="root",this.nodes||(this.nodes=[])}normalize(u,c,d){let h=super.normalize(u);if(c){if(d==="prepend")this.nodes.length>1?c.raws.before=this.nodes[1].raws.before:delete c.raws.before;else if(this.first!==c)for(let p of h)p.raws.before=c.raws.before}return h}removeChild(u,c){let d=this.index(u);return!c&&d===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[d].raws.before),super.removeChild(u)}toResult(u={}){return new e(new s,this,u).stringify()}}return a.registerLazyResult=l=>{e=l},a.registerProcessor=l=>{s=l},root$1=a,a.default=a,o.registerRoot(a),root$1}var list_1,hasRequiredList;function requireList(){if(hasRequiredList)return list_1;hasRequiredList=1;let o={comma(e){return o.split(e,[","],!0)},space(e){let s=[" ",`
`,"	"];return o.split(e,s)},split(e,s,a){let l=[],u="",c=!1,d=0,h=!1,p="",m=!1;for(let g of e)m?m=!1:g==="\\"?m=!0:h?g===p&&(h=!1):g==='"'||g==="'"?(h=!0,p=g):g==="("?d+=1:g===")"?d>0&&(d-=1):d===0&&s.includes(g)&&(c=!0),c?(u!==""&&l.push(u.trim()),u="",c=!1):u+=g;return(a||u!=="")&&l.push(u.trim()),l}};return list_1=o,o.default=o,list_1}var rule,hasRequiredRule;function requireRule(){if(hasRequiredRule)return rule;hasRequiredRule=1;let o=requireContainer(),e=requireList();class s extends o{get selectors(){return e.comma(this.selector)}set selectors(l){let u=this.selector?this.selector.match(/,\s*/):null,c=u?u[0]:","+this.raw("between","beforeOpen");this.selector=l.join(c)}constructor(l){super(l),this.type="rule",this.nodes||(this.nodes=[])}}return rule=s,s.default=s,o.registerRule(s),rule}var fromJSON_1,hasRequiredFromJSON;function requireFromJSON(){if(hasRequiredFromJSON)return fromJSON_1;hasRequiredFromJSON=1;let o=requireAtRule(),e=requireComment(),s=requireDeclaration(),a=requireInput(),l=requirePreviousMap(),u=requireRoot(),c=requireRule();function d(h,p){if(Array.isArray(h))return h.map(y=>d(y));let{inputs:m,...g}=h;if(m){p=[];for(let y of m){let A={...y,__proto__:a.prototype};A.map&&(A.map={...A.map,__proto__:l.prototype}),p.push(A)}}if(g.nodes&&(g.nodes=h.nodes.map(y=>d(y,p))),g.source){let{inputId:y,...A}=g.source;g.source=A,y!=null&&(g.source.input=p[y])}if(g.type==="root")return new u(g);if(g.type==="decl")return new s(g);if(g.type==="rule")return new c(g);if(g.type==="comment")return new e(g);if(g.type==="atrule")return new o(g);throw new Error("Unknown node type: "+h.type)}return fromJSON_1=d,d.default=d,fromJSON_1}var mapGenerator,hasRequiredMapGenerator;function requireMapGenerator(){if(hasRequiredMapGenerator)return mapGenerator;hasRequiredMapGenerator=1;let{dirname:o,relative:e,resolve:s,sep:a}=require$$3,{SourceMapConsumer:l,SourceMapGenerator:u}=require$$3,{pathToFileURL:c}=require$$3,d=requireInput(),h=!!(l&&u),p=!!(o&&s&&e&&a);class m{constructor(y,A,T,E){this.stringify=y,this.mapOpts=T.map||{},this.root=A,this.opts=T,this.css=E,this.originalCSS=E,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let y;this.isInline()?y="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?y=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?y=this.mapOpts.annotation(this.opts.to,this.root):y=this.outputFile()+".map";let A=`
`;this.css.includes(`\r
`)&&(A=`\r
`),this.css+=A+"/*# sourceMappingURL="+y+" */"}applyPrevMaps(){for(let y of this.previous()){let A=this.toUrl(this.path(y.file)),T=y.root||o(y.file),E;this.mapOpts.sourcesContent===!1?(E=new l(y.text),E.sourcesContent&&(E.sourcesContent=null)):E=y.consumer(),this.map.applySourceMap(E,A,this.toUrl(this.path(T)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let y;for(let A=this.root.nodes.length-1;A>=0;A--)y=this.root.nodes[A],y.type==="comment"&&y.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(A)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),p&&h&&this.isMap())return this.generateMap();{let y="";return this.stringify(this.root,A=>{y+=A}),[y]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let y=this.previous()[0].consumer();y.file=this.outputFile(),this.map=u.fromSourceMap(y,{ignoreInvalidMapping:!0})}else this.map=new u({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new u({file:this.outputFile(),ignoreInvalidMapping:!0});let y=1,A=1,T="<no source>",E={generated:{column:0,line:0},original:{column:0,line:0},source:""},v,_;this.stringify(this.root,(w,R,k)=>{if(this.css+=w,R&&k!=="end"&&(E.generated.line=y,E.generated.column=A-1,R.source&&R.source.start?(E.source=this.sourcePath(R),E.original.line=R.source.start.line,E.original.column=R.source.start.column-1,this.map.addMapping(E)):(E.source=T,E.original.line=1,E.original.column=0,this.map.addMapping(E))),_=w.match(/\n/g),_?(y+=_.length,v=w.lastIndexOf(`
`),A=w.length-v):A+=w.length,R&&k!=="start"){let I=R.parent||{raws:{}};(!(R.type==="decl"||R.type==="atrule"&&!R.nodes)||R!==I.last||I.raws.semicolon)&&(R.source&&R.source.end?(E.source=this.sourcePath(R),E.original.line=R.source.end.line,E.original.column=R.source.end.column-1,E.generated.line=y,E.generated.column=A-2,this.map.addMapping(E)):(E.source=T,E.original.line=1,E.original.column=0,E.generated.line=y,E.generated.column=A-1,this.map.addMapping(E)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(y=>y.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let y=this.mapOpts.annotation;return typeof y<"u"&&y!==!0?!1:this.previous().length?this.previous().some(A=>A.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(y=>y.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(y){if(this.mapOpts.absolute||y.charCodeAt(0)===60||/^\w+:\/\//.test(y))return y;let A=this.memoizedPaths.get(y);if(A)return A;let T=this.opts.to?o(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(T=o(s(T,this.mapOpts.annotation)));let E=e(T,y);return this.memoizedPaths.set(y,E),E}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(y=>{if(y.source&&y.source.input.map){let A=y.source.input.map;this.previousMaps.includes(A)||this.previousMaps.push(A)}});else{let y=new d(this.originalCSS,this.opts);y.map&&this.previousMaps.push(y.map)}return this.previousMaps}setSourcesContent(){let y={};if(this.root)this.root.walk(A=>{if(A.source){let T=A.source.input.from;if(T&&!y[T]){y[T]=!0;let E=this.usesFileUrls?this.toFileUrl(T):this.toUrl(this.path(T));this.map.setSourceContent(E,A.source.input.css)}}});else if(this.css){let A=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(A,this.css)}}sourcePath(y){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(y.source.input.from):this.toUrl(this.path(y.source.input.from))}toBase64(y){return Buffer$1?Buffer$1.from(y).toString("base64"):window.btoa(unescape(encodeURIComponent(y)))}toFileUrl(y){let A=this.memoizedFileURLs.get(y);if(A)return A;if(c){let T=c(y).toString();return this.memoizedFileURLs.set(y,T),T}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(y){let A=this.memoizedURLs.get(y);if(A)return A;a==="\\"&&(y=y.replace(/\\/g,"/"));let T=encodeURI(y).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(y,T),T}}return mapGenerator=m,mapGenerator}var tokenize,hasRequiredTokenize;function requireTokenize(){if(hasRequiredTokenize)return tokenize;hasRequiredTokenize=1;const o=39,e=34,s=92,a=47,l=10,u=32,c=12,d=9,h=13,p=91,m=93,g=40,y=41,A=123,T=125,E=59,v=42,_=58,w=64,R=/[\t\n\f\r "#'()/;[\\\]{}]/g,k=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,I=/.[\r\n"'(/\\]/,P=/[\da-f]/i;return tokenize=function(L,Q={}){let j=L.css.valueOf(),F=Q.ignoreErrors,V,J,z,Y,fe,de,X,he,ue,G,K=j.length,q=0,te=[],Z=[];function ce(){return q}function be(Ae){throw L.error("Unclosed "+Ae,q)}function Ee(){return Z.length===0&&q>=K}function Se(Ae){if(Z.length)return Z.pop();if(q>=K)return;let Te=Ae?Ae.ignoreUnclosed:!1;switch(V=j.charCodeAt(q),V){case l:case u:case d:case h:case c:{Y=q;do Y+=1,V=j.charCodeAt(Y);while(V===u||V===l||V===d||V===h||V===c);de=["space",j.slice(q,Y)],q=Y-1;break}case p:case m:case A:case T:case _:case E:case y:{let xe=String.fromCharCode(V);de=[xe,xe,q];break}case g:{if(G=te.length?te.pop()[1]:"",ue=j.charCodeAt(q+1),G==="url"&&ue!==o&&ue!==e&&ue!==u&&ue!==l&&ue!==d&&ue!==c&&ue!==h){Y=q;do{if(X=!1,Y=j.indexOf(")",Y+1),Y===-1)if(F||Te){Y=q;break}else be("bracket");for(he=Y;j.charCodeAt(he-1)===s;)he-=1,X=!X}while(X);de=["brackets",j.slice(q,Y+1),q,Y],q=Y}else Y=j.indexOf(")",q+1),J=j.slice(q,Y+1),Y===-1||I.test(J)?de=["(","(",q]:(de=["brackets",J,q,Y],q=Y);break}case o:case e:{fe=V===o?"'":'"',Y=q;do{if(X=!1,Y=j.indexOf(fe,Y+1),Y===-1)if(F||Te){Y=q+1;break}else be("string");for(he=Y;j.charCodeAt(he-1)===s;)he-=1,X=!X}while(X);de=["string",j.slice(q,Y+1),q,Y],q=Y;break}case w:{R.lastIndex=q+1,R.test(j),R.lastIndex===0?Y=j.length-1:Y=R.lastIndex-2,de=["at-word",j.slice(q,Y+1),q,Y],q=Y;break}case s:{for(Y=q,z=!0;j.charCodeAt(Y+1)===s;)Y+=1,z=!z;if(V=j.charCodeAt(Y+1),z&&V!==a&&V!==u&&V!==l&&V!==d&&V!==h&&V!==c&&(Y+=1,P.test(j.charAt(Y)))){for(;P.test(j.charAt(Y+1));)Y+=1;j.charCodeAt(Y+1)===u&&(Y+=1)}de=["word",j.slice(q,Y+1),q,Y],q=Y;break}default:{V===a&&j.charCodeAt(q+1)===v?(Y=j.indexOf("*/",q+2)+1,Y===0&&(F||Te?Y=j.length:be("comment")),de=["comment",j.slice(q,Y+1),q,Y],q=Y):(k.lastIndex=q+1,k.test(j),k.lastIndex===0?Y=j.length-1:Y=k.lastIndex-2,de=["word",j.slice(q,Y+1),q,Y],te.push(de),q=Y);break}}return q++,de}function ke(Ae){Z.push(Ae)}return{back:ke,endOfFile:Ee,nextToken:Se,position:ce}},tokenize}var parser$5,hasRequiredParser$1;function requireParser$1(){if(hasRequiredParser$1)return parser$5;hasRequiredParser$1=1;let o=requireAtRule(),e=requireComment(),s=requireDeclaration(),a=requireRoot(),l=requireRule(),u=requireTokenize();const c={empty:!0,space:!0};function d(p){for(let m=p.length-1;m>=0;m--){let g=p[m],y=g[3]||g[2];if(y)return y}}class h{constructor(m){this.input=m,this.root=new a,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:m,start:{column:1,line:1,offset:0}}}atrule(m){let g=new o;g.name=m[1].slice(1),g.name===""&&this.unnamedAtrule(g,m),this.init(g,m[2]);let y,A,T,E=!1,v=!1,_=[],w=[];for(;!this.tokenizer.endOfFile();){if(m=this.tokenizer.nextToken(),y=m[0],y==="("||y==="["?w.push(y==="("?")":"]"):y==="{"&&w.length>0?w.push("}"):y===w[w.length-1]&&w.pop(),w.length===0)if(y===";"){g.source.end=this.getPosition(m[2]),g.source.end.offset++,this.semicolon=!0;break}else if(y==="{"){v=!0;break}else if(y==="}"){if(_.length>0){for(T=_.length-1,A=_[T];A&&A[0]==="space";)A=_[--T];A&&(g.source.end=this.getPosition(A[3]||A[2]),g.source.end.offset++)}this.end(m);break}else _.push(m);else _.push(m);if(this.tokenizer.endOfFile()){E=!0;break}}g.raws.between=this.spacesAndCommentsFromEnd(_),_.length?(g.raws.afterName=this.spacesAndCommentsFromStart(_),this.raw(g,"params",_),E&&(m=_[_.length-1],g.source.end=this.getPosition(m[3]||m[2]),g.source.end.offset++,this.spaces=g.raws.between,g.raws.between="")):(g.raws.afterName="",g.params=""),v&&(g.nodes=[],this.current=g)}checkMissedSemicolon(m){let g=this.colon(m);if(g===!1)return;let y=0,A;for(let T=g-1;T>=0&&(A=m[T],!(A[0]!=="space"&&(y+=1,y===2)));T--);throw this.input.error("Missed semicolon",A[0]==="word"?A[3]+1:A[2])}colon(m){let g=0,y,A,T;for(let[E,v]of m.entries()){if(A=v,T=A[0],T==="("&&(g+=1),T===")"&&(g-=1),g===0&&T===":")if(!y)this.doubleColon(A);else{if(y[0]==="word"&&y[1]==="progid")continue;return E}y=A}return!1}comment(m){let g=new e;this.init(g,m[2]),g.source.end=this.getPosition(m[3]||m[2]),g.source.end.offset++;let y=m[1].slice(2,-2);if(/^\s*$/.test(y))g.text="",g.raws.left=y,g.raws.right="";else{let A=y.match(/^(\s*)([^]*\S)(\s*)$/);g.text=A[2],g.raws.left=A[1],g.raws.right=A[3]}}createTokenizer(){this.tokenizer=u(this.input)}decl(m,g){let y=new s;this.init(y,m[0][2]);let A=m[m.length-1];for(A[0]===";"&&(this.semicolon=!0,m.pop()),y.source.end=this.getPosition(A[3]||A[2]||d(m)),y.source.end.offset++;m[0][0]!=="word";)m.length===1&&this.unknownWord(m),y.raws.before+=m.shift()[1];for(y.source.start=this.getPosition(m[0][2]),y.prop="";m.length;){let w=m[0][0];if(w===":"||w==="space"||w==="comment")break;y.prop+=m.shift()[1]}y.raws.between="";let T;for(;m.length;)if(T=m.shift(),T[0]===":"){y.raws.between+=T[1];break}else T[0]==="word"&&/\w/.test(T[1])&&this.unknownWord([T]),y.raws.between+=T[1];(y.prop[0]==="_"||y.prop[0]==="*")&&(y.raws.before+=y.prop[0],y.prop=y.prop.slice(1));let E=[],v;for(;m.length&&(v=m[0][0],!(v!=="space"&&v!=="comment"));)E.push(m.shift());this.precheckMissedSemicolon(m);for(let w=m.length-1;w>=0;w--){if(T=m[w],T[1].toLowerCase()==="!important"){y.important=!0;let R=this.stringFrom(m,w);R=this.spacesFromEnd(m)+R,R!==" !important"&&(y.raws.important=R);break}else if(T[1].toLowerCase()==="important"){let R=m.slice(0),k="";for(let I=w;I>0;I--){let P=R[I][0];if(k.trim().startsWith("!")&&P!=="space")break;k=R.pop()[1]+k}k.trim().startsWith("!")&&(y.important=!0,y.raws.important=k,m=R)}if(T[0]!=="space"&&T[0]!=="comment")break}m.some(w=>w[0]!=="space"&&w[0]!=="comment")&&(y.raws.between+=E.map(w=>w[1]).join(""),E=[]),this.raw(y,"value",E.concat(m),g),y.value.includes(":")&&!g&&this.checkMissedSemicolon(m)}doubleColon(m){throw this.input.error("Double colon",{offset:m[2]},{offset:m[2]+m[1].length})}emptyRule(m){let g=new l;this.init(g,m[2]),g.selector="",g.raws.between="",this.current=g}end(m){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(m[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(m)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(m){if(this.spaces+=m[1],this.current.nodes){let g=this.current.nodes[this.current.nodes.length-1];g&&g.type==="rule"&&!g.raws.ownSemicolon&&(g.raws.ownSemicolon=this.spaces,this.spaces="",g.source.end=this.getPosition(m[2]),g.source.end.offset+=g.raws.ownSemicolon.length)}}getPosition(m){let g=this.input.fromOffset(m);return{column:g.col,line:g.line,offset:m}}init(m,g){this.current.push(m),m.source={input:this.input,start:this.getPosition(g)},m.raws.before=this.spaces,this.spaces="",m.type!=="comment"&&(this.semicolon=!1)}other(m){let g=!1,y=null,A=!1,T=null,E=[],v=m[1].startsWith("--"),_=[],w=m;for(;w;){if(y=w[0],_.push(w),y==="("||y==="[")T||(T=w),E.push(y==="("?")":"]");else if(v&&A&&y==="{")T||(T=w),E.push("}");else if(E.length===0)if(y===";")if(A){this.decl(_,v);return}else break;else if(y==="{"){this.rule(_);return}else if(y==="}"){this.tokenizer.back(_.pop()),g=!0;break}else y===":"&&(A=!0);else y===E[E.length-1]&&(E.pop(),E.length===0&&(T=null));w=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(g=!0),E.length>0&&this.unclosedBracket(T),g&&A){if(!v)for(;_.length&&(w=_[_.length-1][0],!(w!=="space"&&w!=="comment"));)this.tokenizer.back(_.pop());this.decl(_,v)}else this.unknownWord(_)}parse(){let m;for(;!this.tokenizer.endOfFile();)switch(m=this.tokenizer.nextToken(),m[0]){case"space":this.spaces+=m[1];break;case";":this.freeSemicolon(m);break;case"}":this.end(m);break;case"comment":this.comment(m);break;case"at-word":this.atrule(m);break;case"{":this.emptyRule(m);break;default:this.other(m);break}this.endFile()}precheckMissedSemicolon(){}raw(m,g,y,A){let T,E,v=y.length,_="",w=!0,R,k;for(let I=0;I<v;I+=1)T=y[I],E=T[0],E==="space"&&I===v-1&&!A?w=!1:E==="comment"?(k=y[I-1]?y[I-1][0]:"empty",R=y[I+1]?y[I+1][0]:"empty",!c[k]&&!c[R]?_.slice(-1)===","?w=!1:_+=T[1]:w=!1):_+=T[1];if(!w){let I=y.reduce((P,N)=>P+N[1],"");m.raws[g]={raw:I,value:_}}m[g]=_}rule(m){m.pop();let g=new l;this.init(g,m[0][2]),g.raws.between=this.spacesAndCommentsFromEnd(m),this.raw(g,"selector",m),this.current=g}spacesAndCommentsFromEnd(m){let g,y="";for(;m.length&&(g=m[m.length-1][0],!(g!=="space"&&g!=="comment"));)y=m.pop()[1]+y;return y}spacesAndCommentsFromStart(m){let g,y="";for(;m.length&&(g=m[0][0],!(g!=="space"&&g!=="comment"));)y+=m.shift()[1];return y}spacesFromEnd(m){let g,y="";for(;m.length&&(g=m[m.length-1][0],g==="space");)y=m.pop()[1]+y;return y}stringFrom(m,g){let y="";for(let A=g;A<m.length;A++)y+=m[A][1];return m.splice(g,m.length-g),y}unclosedBlock(){let m=this.current.source.start;throw this.input.error("Unclosed block",m.line,m.column)}unclosedBracket(m){throw this.input.error("Unclosed bracket",{offset:m[2]},{offset:m[2]+1})}unexpectedClose(m){throw this.input.error("Unexpected }",{offset:m[2]},{offset:m[2]+1})}unknownWord(m){throw this.input.error("Unknown word "+m[0][1],{offset:m[0][2]},{offset:m[0][2]+m[0][1].length})}unnamedAtrule(m,g){throw this.input.error("At-rule without name",{offset:g[2]},{offset:g[2]+g[1].length})}}return parser$5=h,parser$5}var parse_1,hasRequiredParse$2;function requireParse$2(){if(hasRequiredParse$2)return parse_1;hasRequiredParse$2=1;let o=requireContainer(),e=requireInput(),s=requireParser$1();function a(l,u){let c=new e(l,u),d=new s(c);try{d.parse()}catch(h){throw h}return d.root}return parse_1=a,a.default=a,o.registerParse(a),parse_1}var warning$2,hasRequiredWarning;function requireWarning(){if(hasRequiredWarning)return warning$2;hasRequiredWarning=1;class o{constructor(s,a={}){if(this.type="warning",this.text=s,a.node&&a.node.source){let l=a.node.rangeBy(a);this.line=l.start.line,this.column=l.start.column,this.endLine=l.end.line,this.endColumn=l.end.column}for(let l in a)this[l]=a[l]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}return warning$2=o,o.default=o,warning$2}var result,hasRequiredResult;function requireResult(){if(hasRequiredResult)return result;hasRequiredResult=1;let o=requireWarning();class e{get content(){return this.css}constructor(a,l,u){this.processor=a,this.messages=[],this.root=l,this.opts=u,this.css="",this.map=void 0}toString(){return this.css}warn(a,l={}){l.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(l.plugin=this.lastPlugin.postcssPlugin);let u=new o(a,l);return this.messages.push(u),u}warnings(){return this.messages.filter(a=>a.type==="warning")}}return result=e,e.default=e,result}var lazyResult,hasRequiredLazyResult;function requireLazyResult(){if(hasRequiredLazyResult)return lazyResult;hasRequiredLazyResult=1;let o=requireContainer(),e=requireDocument(),s=requireMapGenerator(),a=requireParse$2(),l=requireResult(),u=requireRoot(),c=requireStringify$2(),{isClean:d,my:h}=requireSymbols();const p={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},m={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},g={Once:!0,postcssPlugin:!0,prepare:!0},y=0;function A(R){return typeof R=="object"&&typeof R.then=="function"}function T(R){let k=!1,I=p[R.type];return R.type==="decl"?k=R.prop.toLowerCase():R.type==="atrule"&&(k=R.name.toLowerCase()),k&&R.append?[I,I+"-"+k,y,I+"Exit",I+"Exit-"+k]:k?[I,I+"-"+k,I+"Exit",I+"Exit-"+k]:R.append?[I,y,I+"Exit"]:[I,I+"Exit"]}function E(R){let k;return R.type==="document"?k=["Document",y,"DocumentExit"]:R.type==="root"?k=["Root",y,"RootExit"]:k=T(R),{eventIndex:0,events:k,iterator:0,node:R,visitorIndex:0,visitors:[]}}function v(R){return R[d]=!1,R.nodes&&R.nodes.forEach(k=>v(k)),R}let _={};class w{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(k,I,P){this.stringified=!1,this.processed=!1;let N;if(typeof I=="object"&&I!==null&&(I.type==="root"||I.type==="document"))N=v(I);else if(I instanceof w||I instanceof l)N=v(I.root),I.map&&(typeof P.map>"u"&&(P.map={}),P.map.inline||(P.map.inline=!1),P.map.prev=I.map);else{let L=a;P.syntax&&(L=P.syntax.parse),P.parser&&(L=P.parser),L.parse&&(L=L.parse);try{N=L(I,P)}catch(Q){this.processed=!0,this.error=Q}N&&!N[h]&&o.rebuild(N)}this.result=new l(k,N,P),this.helpers={..._,postcss:_,result:this.result},this.plugins=this.processor.plugins.map(L=>typeof L=="object"&&L.prepare?{...L,...L.prepare(this.result)}:L)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(k){return this.async().catch(k)}finally(k){return this.async().then(k,k)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(k,I){let P=this.result.lastPlugin;try{I&&I.addToError(k),this.error=k,k.name==="CssSyntaxError"&&!k.plugin?(k.plugin=P.postcssPlugin,k.setMessage()):P.postcssVersion}catch(N){console&&console.error&&console.error(N)}return k}prepareVisitors(){this.listeners={};let k=(I,P,N)=>{this.listeners[P]||(this.listeners[P]=[]),this.listeners[P].push([I,N])};for(let I of this.plugins)if(typeof I=="object")for(let P in I){if(!m[P]&&/^[A-Z]/.test(P))throw new Error(`Unknown event ${P} in ${I.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!g[P])if(typeof I[P]=="object")for(let N in I[P])N==="*"?k(I,P,I[P][N]):k(I,P+"-"+N.toLowerCase(),I[P][N]);else typeof I[P]=="function"&&k(I,P,I[P])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let k=0;k<this.plugins.length;k++){let I=this.plugins[k],P=this.runOnRoot(I);if(A(P))try{await P}catch(N){throw this.handleError(N)}}if(this.prepareVisitors(),this.hasListener){let k=this.result.root;for(;!k[d];){k[d]=!0;let I=[E(k)];for(;I.length>0;){let P=this.visitTick(I);if(A(P))try{await P}catch(N){let L=I[I.length-1].node;throw this.handleError(N,L)}}}if(this.listeners.OnceExit)for(let[I,P]of this.listeners.OnceExit){this.result.lastPlugin=I;try{if(k.type==="document"){let N=k.nodes.map(L=>P(L,this.helpers));await Promise.all(N)}else await P(k,this.helpers)}catch(N){throw this.handleError(N)}}}return this.processed=!0,this.stringify()}runOnRoot(k){this.result.lastPlugin=k;try{if(typeof k=="object"&&k.Once){if(this.result.root.type==="document"){let I=this.result.root.nodes.map(P=>k.Once(P,this.helpers));return A(I[0])?Promise.all(I):I}return k.Once(this.result.root,this.helpers)}else if(typeof k=="function")return k(this.result.root,this.result)}catch(I){throw this.handleError(I)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let k=this.result.opts,I=c;k.syntax&&(I=k.syntax.stringify),k.stringifier&&(I=k.stringifier),I.stringify&&(I=I.stringify);let N=new s(I,this.result.root,this.result.opts).generate();return this.result.css=N[0],this.result.map=N[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let k of this.plugins){let I=this.runOnRoot(k);if(A(I))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let k=this.result.root;for(;!k[d];)k[d]=!0,this.walkSync(k);if(this.listeners.OnceExit)if(k.type==="document")for(let I of k.nodes)this.visitSync(this.listeners.OnceExit,I);else this.visitSync(this.listeners.OnceExit,k)}return this.result}then(k,I){return this.async().then(k,I)}toString(){return this.css}visitSync(k,I){for(let[P,N]of k){this.result.lastPlugin=P;let L;try{L=N(I,this.helpers)}catch(Q){throw this.handleError(Q,I.proxyOf)}if(I.type!=="root"&&I.type!=="document"&&!I.parent)return!0;if(A(L))throw this.getAsyncError()}}visitTick(k){let I=k[k.length-1],{node:P,visitors:N}=I;if(P.type!=="root"&&P.type!=="document"&&!P.parent){k.pop();return}if(N.length>0&&I.visitorIndex<N.length){let[Q,j]=N[I.visitorIndex];I.visitorIndex+=1,I.visitorIndex===N.length&&(I.visitors=[],I.visitorIndex=0),this.result.lastPlugin=Q;try{return j(P.toProxy(),this.helpers)}catch(F){throw this.handleError(F,P)}}if(I.iterator!==0){let Q=I.iterator,j;for(;j=P.nodes[P.indexes[Q]];)if(P.indexes[Q]+=1,!j[d]){j[d]=!0,k.push(E(j));return}I.iterator=0,delete P.indexes[Q]}let L=I.events;for(;I.eventIndex<L.length;){let Q=L[I.eventIndex];if(I.eventIndex+=1,Q===y){P.nodes&&P.nodes.length&&(P[d]=!0,I.iterator=P.getIterator());return}else if(this.listeners[Q]){I.visitors=this.listeners[Q];return}}k.pop()}walkSync(k){k[d]=!0;let I=T(k);for(let P of I)if(P===y)k.nodes&&k.each(N=>{N[d]||this.walkSync(N)});else{let N=this.listeners[P];if(N&&this.visitSync(N,k.toProxy()))return}}warnings(){return this.sync().warnings()}}return w.registerPostcss=R=>{_=R},lazyResult=w,w.default=w,u.registerLazyResult(w),e.registerLazyResult(w),lazyResult}var noWorkResult,hasRequiredNoWorkResult;function requireNoWorkResult(){if(hasRequiredNoWorkResult)return noWorkResult;hasRequiredNoWorkResult=1;let o=requireMapGenerator(),e=requireParse$2();const s=requireResult();let a=requireStringify$2();class l{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let c,d=e;try{c=d(this._css,this._opts)}catch(h){this.error=h}if(this.error)throw this.error;return this._root=c,c}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(c,d,h){d=d.toString(),this.stringified=!1,this._processor=c,this._css=d,this._opts=h,this._map=void 0;let p,m=a;this.result=new s(this._processor,p,this._opts),this.result.css=d;let g=this;Object.defineProperty(this.result,"root",{get(){return g.root}});let y=new o(m,p,this._opts,d);if(y.isMap()){let[A,T]=y.generate();A&&(this.result.css=A),T&&(this.result.map=T)}else y.clearAnnotation(),this.result.css=y.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(c){return this.async().catch(c)}finally(c){return this.async().then(c,c)}sync(){if(this.error)throw this.error;return this.result}then(c,d){return this.async().then(c,d)}toString(){return this._css}warnings(){return[]}}return noWorkResult=l,l.default=l,noWorkResult}var processor,hasRequiredProcessor;function requireProcessor(){if(hasRequiredProcessor)return processor;hasRequiredProcessor=1;let o=requireDocument(),e=requireLazyResult(),s=requireNoWorkResult(),a=requireRoot();class l{constructor(c=[]){this.version="8.5.6",this.plugins=this.normalize(c)}normalize(c){let d=[];for(let h of c)if(h.postcss===!0?h=h():h.postcss&&(h=h.postcss),typeof h=="object"&&Array.isArray(h.plugins))d=d.concat(h.plugins);else if(typeof h=="object"&&h.postcssPlugin)d.push(h);else if(typeof h=="function")d.push(h);else if(!(typeof h=="object"&&(h.parse||h.stringify)))throw new Error(h+" is not a PostCSS plugin");return d}process(c,d={}){return!this.plugins.length&&!d.parser&&!d.stringifier&&!d.syntax?new s(this,c,d):new e(this,c,d)}use(c){return this.plugins=this.plugins.concat(this.normalize([c])),this}}return processor=l,l.default=l,a.registerProcessor(l),o.registerProcessor(l),processor}var postcss_1,hasRequiredPostcss;function requirePostcss(){if(hasRequiredPostcss)return postcss_1;hasRequiredPostcss=1;var o={};let e=requireAtRule(),s=requireComment(),a=requireContainer(),l=requireCssSyntaxError(),u=requireDeclaration(),c=requireDocument(),d=requireFromJSON(),h=requireInput(),p=requireLazyResult(),m=requireList(),g=requireNode(),y=requireParse$2(),A=requireProcessor(),T=requireResult(),E=requireRoot(),v=requireRule(),_=requireStringify$2(),w=requireWarning();function R(...k){return k.length===1&&Array.isArray(k[0])&&(k=k[0]),new A(k)}return R.plugin=function(I,P){let N=!1;function L(...j){console&&console.warn&&!N&&(N=!0,console.warn(I+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),o.LANG&&o.LANG.startsWith("cn")&&console.warn(I+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let F=P(...j);return F.postcssPlugin=I,F.postcssVersion=new A().version,F}let Q;return Object.defineProperty(L,"postcss",{get(){return Q||(Q=L()),Q}}),L.process=function(j,F,V){return R([L(V)]).process(j,F)},L},R.stringify=_,R.parse=y,R.fromJSON=d,R.list=m,R.comment=k=>new s(k),R.atRule=k=>new e(k),R.decl=k=>new u(k),R.rule=k=>new v(k),R.root=k=>new E(k),R.document=k=>new c(k),R.CssSyntaxError=l,R.Declaration=u,R.Container=a,R.Processor=A,R.Document=c,R.Comment=s,R.Warning=w,R.AtRule=e,R.Result=T,R.Input=h,R.Rule=v,R.Root=E,R.Node=g,p.registerPostcss(R),postcss_1=R,R.default=R,postcss_1}var sanitizeHtml_1,hasRequiredSanitizeHtml;function requireSanitizeHtml(){if(hasRequiredSanitizeHtml)return sanitizeHtml_1;hasRequiredSanitizeHtml=1;const o=requireLib$2(),e=requireEscapeStringRegexp(),{isPlainObject:s}=requireIsPlainObject(),a=requireCjs(),l=requireParseSrcset(),{parse:u}=requirePostcss(),c=["img","audio","video","picture","svg","object","map","iframe","embed"],d=["script","style"];function h(v,_){v&&Object.keys(v).forEach(function(w){_(v[w],w)})}function p(v,_){return{}.hasOwnProperty.call(v,_)}function m(v,_){const w=[];return h(v,function(R){_(R)&&w.push(R)}),w}function g(v){for(const _ in v)if(p(v,_))return!1;return!0}function y(v){return v.map(function(_){if(!_.url)throw new Error("URL missing");return _.url+(_.w?` ${_.w}w`:"")+(_.h?` ${_.h}h`:"")+(_.d?` ${_.d}x`:"")}).join(", ")}sanitizeHtml_1=T;const A=/^[^\0\t\n\f\r /<=>]+$/;function T(v,_,w){if(v==null)return"";typeof v=="number"&&(v=v.toString());let R="",k="";function I(Ae,Te){const xe=this;this.tag=Ae,this.attribs=Te||{},this.tagPosition=R.length,this.text="",this.openingTagLength=0,this.mediaChildren=[],this.updateParentNodeText=function(){if(fe.length){const Pe=fe[fe.length-1];Pe.text+=xe.text}},this.updateParentNodeMediaChildren=function(){fe.length&&c.includes(this.tag)&&fe[fe.length-1].mediaChildren.push(this.tag)}}_=Object.assign({},T.defaults,_),_.parser=Object.assign({},E,_.parser);const P=function(Ae){return _.allowedTags===!1||(_.allowedTags||[]).indexOf(Ae)>-1};d.forEach(function(Ae){P(Ae)&&!_.allowVulnerableTags&&console.warn(`

 Your \`allowedTags\` option includes, \`${Ae}\`, which is inherently
vulnerable to XSS attacks. Please remove it from \`allowedTags\`.
Or, to disable this warning, add the \`allowVulnerableTags\` option
and ensure you are accounting for this risk.

`)});const N=_.nonTextTags||["script","style","textarea","option"];let L,Q;_.allowedAttributes&&(L={},Q={},h(_.allowedAttributes,function(Ae,Te){L[Te]=[];const xe=[];Ae.forEach(function(Pe){typeof Pe=="string"&&Pe.indexOf("*")>=0?xe.push(e(Pe).replace(/\\\*/g,".*")):L[Te].push(Pe)}),xe.length&&(Q[Te]=new RegExp("^("+xe.join("|")+")$"))}));const j={},F={},V={};h(_.allowedClasses,function(Ae,Te){if(L&&(p(L,Te)||(L[Te]=[]),L[Te].push("class")),j[Te]=Ae,Array.isArray(Ae)){const xe=[];j[Te]=[],V[Te]=[],Ae.forEach(function(Pe){typeof Pe=="string"&&Pe.indexOf("*")>=0?xe.push(e(Pe).replace(/\\\*/g,".*")):Pe instanceof RegExp?V[Te].push(Pe):j[Te].push(Pe)}),xe.length&&(F[Te]=new RegExp("^("+xe.join("|")+")$"))}});const J={};let z;h(_.transformTags,function(Ae,Te){let xe;typeof Ae=="function"?xe=Ae:typeof Ae=="string"&&(xe=T.simpleTransform(Ae)),Te==="*"?z=xe:J[Te]=xe});let Y,fe,de,X,he,ue,G=!1;q();const K=new o.Parser({onopentag:function(Ae,Te){if(_.onOpenTag&&_.onOpenTag(Ae,Te),_.enforceHtmlBoundary&&Ae==="html"&&q(),he){ue++;return}const xe=new I(Ae,Te);fe.push(xe);let Pe=!1;const Le=!!xe.text;let Ue;if(p(J,Ae)&&(Ue=J[Ae](Ae,Te),xe.attribs=Te=Ue.attribs,Ue.text!==void 0&&(xe.innerText=Ue.text),Ae!==Ue.tagName&&(xe.name=Ae=Ue.tagName,X[Y]=Ue.tagName)),z&&(Ue=z(Ae,Te),xe.attribs=Te=Ue.attribs,Ae!==Ue.tagName&&(xe.name=Ae=Ue.tagName,X[Y]=Ue.tagName)),(!P(Ae)||_.disallowedTagsMode==="recursiveEscape"&&!g(de)||_.nestingLimit!=null&&Y>=_.nestingLimit)&&(Pe=!0,de[Y]=!0,(_.disallowedTagsMode==="discard"||_.disallowedTagsMode==="completelyDiscard")&&N.indexOf(Ae)!==-1&&(he=!0,ue=1)),Y++,Pe){if(_.disallowedTagsMode==="discard"||_.disallowedTagsMode==="completelyDiscard"){if(xe.innerText&&!Le){const We=te(xe.innerText);_.textFilter?R+=_.textFilter(We,Ae):R+=We,G=!0}return}k=R,R=""}R+="<"+Ae,Ae==="script"&&(_.allowedScriptHostnames||_.allowedScriptDomains)&&(xe.innerText=""),Pe&&(_.disallowedTagsMode==="escape"||_.disallowedTagsMode==="recursiveEscape")&&_.preserveEscapedAttributes?h(Te,function(We,Ge){R+=" "+Ge+'="'+te(We||"",!0)+'"'}):(!L||p(L,Ae)||L["*"])&&h(Te,function(We,Ge){if(!A.test(Ge)){delete xe.attribs[Ge];return}if(We===""&&!_.allowedEmptyAttributes.includes(Ge)&&(_.nonBooleanAttributes.includes(Ge)||_.nonBooleanAttributes.includes("*"))){delete xe.attribs[Ge];return}let Ye=!1;if(!L||p(L,Ae)&&L[Ae].indexOf(Ge)!==-1||L["*"]&&L["*"].indexOf(Ge)!==-1||p(Q,Ae)&&Q[Ae].test(Ge)||Q["*"]&&Q["*"].test(Ge))Ye=!0;else if(L&&L[Ae]){for(const Ve of L[Ae])if(s(Ve)&&Ve.name&&Ve.name===Ge){Ye=!0;let He="";if(Ve.multiple===!0){const at=We.split(" ");for(const dt of at)Ve.values.indexOf(dt)!==-1&&(He===""?He=dt:He+=" "+dt)}else Ve.values.indexOf(We)>=0&&(He=We);We=He}}if(Ye){if(_.allowedSchemesAppliedToAttributes.indexOf(Ge)!==-1&&Z(Ae,We)){delete xe.attribs[Ge];return}if(Ae==="script"&&Ge==="src"){let Ve=!0;try{const He=ce(We);if(_.allowedScriptHostnames||_.allowedScriptDomains){const at=(_.allowedScriptHostnames||[]).find(function(bt){return bt===He.url.hostname}),dt=(_.allowedScriptDomains||[]).find(function(bt){return He.url.hostname===bt||He.url.hostname.endsWith(`.${bt}`)});Ve=at||dt}}catch{Ve=!1}if(!Ve){delete xe.attribs[Ge];return}}if(Ae==="iframe"&&Ge==="src"){let Ve=!0;try{const He=ce(We);if(He.isRelativeUrl)Ve=p(_,"allowIframeRelativeUrls")?_.allowIframeRelativeUrls:!_.allowedIframeHostnames&&!_.allowedIframeDomains;else if(_.allowedIframeHostnames||_.allowedIframeDomains){const at=(_.allowedIframeHostnames||[]).find(function(bt){return bt===He.url.hostname}),dt=(_.allowedIframeDomains||[]).find(function(bt){return He.url.hostname===bt||He.url.hostname.endsWith(`.${bt}`)});Ve=at||dt}}catch{Ve=!1}if(!Ve){delete xe.attribs[Ge];return}}if(Ge==="srcset")try{let Ve=l(We);if(Ve.forEach(function(He){Z("srcset",He.url)&&(He.evil=!0)}),Ve=m(Ve,function(He){return!He.evil}),Ve.length)We=y(m(Ve,function(He){return!He.evil})),xe.attribs[Ge]=We;else{delete xe.attribs[Ge];return}}catch{delete xe.attribs[Ge];return}if(Ge==="class"){const Ve=j[Ae],He=j["*"],at=F[Ae],dt=V[Ae],bt=V["*"],Ct=F["*"],ht=[at,Ct].concat(dt,bt).filter(function(pt){return pt});if(Ve&&He?We=ke(We,a(Ve,He),ht):We=ke(We,Ve||He,ht),!We.length){delete xe.attribs[Ge];return}}if(Ge==="style"){if(_.parseStyleAttributes)try{const Ve=u(Ae+" {"+We+"}",{map:!1}),He=be(Ve,_.allowedStyles);if(We=Ee(He),We.length===0){delete xe.attribs[Ge];return}}catch{typeof window<"u"&&console.warn('Failed to parse "'+Ae+" {"+We+`}", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547`),delete xe.attribs[Ge];return}else if(_.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.")}R+=" "+Ge,We&&We.length?R+='="'+te(We,!0)+'"':_.allowedEmptyAttributes.includes(Ge)&&(R+='=""')}else delete xe.attribs[Ge]}),_.selfClosing.indexOf(Ae)!==-1?R+=" />":(R+=">",xe.innerText&&!Le&&!_.textFilter&&(R+=te(xe.innerText),G=!0)),Pe&&(R=k+te(R),k=""),xe.openingTagLength=R.length-xe.tagPosition},ontext:function(Ae){if(he)return;const Te=fe[fe.length-1];let xe;if(Te&&(xe=Te.tag,Ae=Te.innerText!==void 0?Te.innerText:Ae),_.disallowedTagsMode==="completelyDiscard"&&!P(xe))Ae="";else if((_.disallowedTagsMode==="discard"||_.disallowedTagsMode==="completelyDiscard")&&(xe==="script"||xe==="style"))R+=Ae;else if(!G){const Pe=te(Ae,!1);_.textFilter?R+=_.textFilter(Pe,xe):R+=Pe}if(fe.length){const Pe=fe[fe.length-1];Pe.text+=Ae}},onclosetag:function(Ae,Te){if(_.onCloseTag&&_.onCloseTag(Ae,Te),he)if(ue--,!ue)he=!1;else return;const xe=fe.pop();if(!xe)return;if(xe.tag!==Ae){fe.push(xe);return}he=_.enforceHtmlBoundary?Ae==="html":!1,Y--;const Pe=de[Y];if(Pe){if(delete de[Y],_.disallowedTagsMode==="discard"||_.disallowedTagsMode==="completelyDiscard"){xe.updateParentNodeText();return}k=R,R=""}if(X[Y]&&(Ae=X[Y],delete X[Y]),_.exclusiveFilter){const Le=_.exclusiveFilter(xe);if(Le==="excludeTag"){Pe&&(R=k,k=""),R=R.substring(0,xe.tagPosition)+R.substring(xe.tagPosition+xe.openingTagLength);return}else if(Le){R=R.substring(0,xe.tagPosition);return}}if(xe.updateParentNodeMediaChildren(),xe.updateParentNodeText(),_.selfClosing.indexOf(Ae)!==-1||Te&&!P(Ae)&&["escape","recursiveEscape"].indexOf(_.disallowedTagsMode)>=0){Pe&&(R=k,k="");return}R+="</"+Ae+">",Pe&&(R=k+te(R),k=""),G=!1}},_.parser);if(K.write(v),K.end(),_.disallowedTagsMode==="escape"||_.disallowedTagsMode==="recursiveEscape"){const Ae=K.endIndex;if(Ae!=null&&Ae>=0&&Ae<v.length){const Te=v.substring(Ae);R+=te(Te)}else(Ae==null||Ae<0)&&v.length>0&&R===""&&(R=te(v))}return R;function q(){R="",Y=0,fe=[],de={},X={},he=!1,ue=0}function te(Ae,Te){return typeof Ae!="string"&&(Ae=Ae+""),_.parser.decodeEntities&&(Ae=Ae.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Te&&(Ae=Ae.replace(/"/g,"&quot;"))),Ae=Ae.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Te&&(Ae=Ae.replace(/"/g,"&quot;")),Ae}function Z(Ae,Te){for(Te=Te.replace(/[\x00-\x20]+/g,"");;){const Le=Te.indexOf("<!--");if(Le===-1)break;const Ue=Te.indexOf("-->",Le+4);if(Ue===-1)break;Te=Te.substring(0,Le)+Te.substring(Ue+3)}const xe=Te.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!xe)return Te.match(/^[/\\]{2}/)?!_.allowProtocolRelative:!1;const Pe=xe[1].toLowerCase();return p(_.allowedSchemesByTag,Ae)?_.allowedSchemesByTag[Ae].indexOf(Pe)===-1:!_.allowedSchemes||_.allowedSchemes.indexOf(Pe)===-1}function ce(Ae){if(Ae=Ae.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//"),Ae.startsWith("relative:"))throw new Error("relative: exploit attempt");let Te="relative://relative-site";for(let Le=0;Le<100;Le++)Te+=`/${Le}`;const xe=new URL(Ae,Te);return{isRelativeUrl:xe&&xe.hostname==="relative-site"&&xe.protocol==="relative:",url:xe}}function be(Ae,Te){if(!Te)return Ae;const xe=Ae.nodes[0];let Pe;return Te[xe.selector]&&Te["*"]?Pe=a(Te[xe.selector],Te["*"]):Pe=Te[xe.selector]||Te["*"],Pe&&(Ae.nodes[0].nodes=xe.nodes.reduce(Se(Pe),[])),Ae}function Ee(Ae){return Ae.nodes[0].nodes.reduce(function(Te,xe){return Te.push(`${xe.prop}:${xe.value}${xe.important?" !important":""}`),Te},[]).join(";")}function Se(Ae){return function(Te,xe){return p(Ae,xe.prop)&&Ae[xe.prop].some(function(Le){return Le.test(xe.value)})&&Te.push(xe),Te}}function ke(Ae,Te,xe){return Te?(Ae=Ae.split(/\s+/),Ae.filter(function(Pe){return Te.indexOf(Pe)!==-1||xe.some(function(Le){return Le.test(Pe)})}).join(" ")):Ae}}const E={decodeEntities:!0};return T.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","menu","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},allowedEmptyAttributes:["alt"],selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0,preserveEscapedAttributes:!1},T.simpleTransform=function(v,_,w){return w=w===void 0?!0:w,_=_||{},function(R,k){let I;if(w)for(I in _)k[I]=_[I];else k=_;return{tagName:v,attribs:k}}},sanitizeHtml_1}var lib$1={exports:{}},_default={},hasRequired_default;function require_default(){if(hasRequired_default)return _default;hasRequired_default=1;function o(){var u={};return u["align-content"]=!1,u["align-items"]=!1,u["align-self"]=!1,u["alignment-adjust"]=!1,u["alignment-baseline"]=!1,u.all=!1,u["anchor-point"]=!1,u.animation=!1,u["animation-delay"]=!1,u["animation-direction"]=!1,u["animation-duration"]=!1,u["animation-fill-mode"]=!1,u["animation-iteration-count"]=!1,u["animation-name"]=!1,u["animation-play-state"]=!1,u["animation-timing-function"]=!1,u.azimuth=!1,u["backface-visibility"]=!1,u.background=!0,u["background-attachment"]=!0,u["background-clip"]=!0,u["background-color"]=!0,u["background-image"]=!0,u["background-origin"]=!0,u["background-position"]=!0,u["background-repeat"]=!0,u["background-size"]=!0,u["baseline-shift"]=!1,u.binding=!1,u.bleed=!1,u["bookmark-label"]=!1,u["bookmark-level"]=!1,u["bookmark-state"]=!1,u.border=!0,u["border-bottom"]=!0,u["border-bottom-color"]=!0,u["border-bottom-left-radius"]=!0,u["border-bottom-right-radius"]=!0,u["border-bottom-style"]=!0,u["border-bottom-width"]=!0,u["border-collapse"]=!0,u["border-color"]=!0,u["border-image"]=!0,u["border-image-outset"]=!0,u["border-image-repeat"]=!0,u["border-image-slice"]=!0,u["border-image-source"]=!0,u["border-image-width"]=!0,u["border-left"]=!0,u["border-left-color"]=!0,u["border-left-style"]=!0,u["border-left-width"]=!0,u["border-radius"]=!0,u["border-right"]=!0,u["border-right-color"]=!0,u["border-right-style"]=!0,u["border-right-width"]=!0,u["border-spacing"]=!0,u["border-style"]=!0,u["border-top"]=!0,u["border-top-color"]=!0,u["border-top-left-radius"]=!0,u["border-top-right-radius"]=!0,u["border-top-style"]=!0,u["border-top-width"]=!0,u["border-width"]=!0,u.bottom=!1,u["box-decoration-break"]=!0,u["box-shadow"]=!0,u["box-sizing"]=!0,u["box-snap"]=!0,u["box-suppress"]=!0,u["break-after"]=!0,u["break-before"]=!0,u["break-inside"]=!0,u["caption-side"]=!1,u.chains=!1,u.clear=!0,u.clip=!1,u["clip-path"]=!1,u["clip-rule"]=!1,u.color=!0,u["color-interpolation-filters"]=!0,u["column-count"]=!1,u["column-fill"]=!1,u["column-gap"]=!1,u["column-rule"]=!1,u["column-rule-color"]=!1,u["column-rule-style"]=!1,u["column-rule-width"]=!1,u["column-span"]=!1,u["column-width"]=!1,u.columns=!1,u.contain=!1,u.content=!1,u["counter-increment"]=!1,u["counter-reset"]=!1,u["counter-set"]=!1,u.crop=!1,u.cue=!1,u["cue-after"]=!1,u["cue-before"]=!1,u.cursor=!1,u.direction=!1,u.display=!0,u["display-inside"]=!0,u["display-list"]=!0,u["display-outside"]=!0,u["dominant-baseline"]=!1,u.elevation=!1,u["empty-cells"]=!1,u.filter=!1,u.flex=!1,u["flex-basis"]=!1,u["flex-direction"]=!1,u["flex-flow"]=!1,u["flex-grow"]=!1,u["flex-shrink"]=!1,u["flex-wrap"]=!1,u.float=!1,u["float-offset"]=!1,u["flood-color"]=!1,u["flood-opacity"]=!1,u["flow-from"]=!1,u["flow-into"]=!1,u.font=!0,u["font-family"]=!0,u["font-feature-settings"]=!0,u["font-kerning"]=!0,u["font-language-override"]=!0,u["font-size"]=!0,u["font-size-adjust"]=!0,u["font-stretch"]=!0,u["font-style"]=!0,u["font-synthesis"]=!0,u["font-variant"]=!0,u["font-variant-alternates"]=!0,u["font-variant-caps"]=!0,u["font-variant-east-asian"]=!0,u["font-variant-ligatures"]=!0,u["font-variant-numeric"]=!0,u["font-variant-position"]=!0,u["font-weight"]=!0,u.grid=!1,u["grid-area"]=!1,u["grid-auto-columns"]=!1,u["grid-auto-flow"]=!1,u["grid-auto-rows"]=!1,u["grid-column"]=!1,u["grid-column-end"]=!1,u["grid-column-start"]=!1,u["grid-row"]=!1,u["grid-row-end"]=!1,u["grid-row-start"]=!1,u["grid-template"]=!1,u["grid-template-areas"]=!1,u["grid-template-columns"]=!1,u["grid-template-rows"]=!1,u["hanging-punctuation"]=!1,u.height=!0,u.hyphens=!1,u.icon=!1,u["image-orientation"]=!1,u["image-resolution"]=!1,u["ime-mode"]=!1,u["initial-letters"]=!1,u["inline-box-align"]=!1,u["justify-content"]=!1,u["justify-items"]=!1,u["justify-self"]=!1,u.left=!1,u["letter-spacing"]=!0,u["lighting-color"]=!0,u["line-box-contain"]=!1,u["line-break"]=!1,u["line-grid"]=!1,u["line-height"]=!1,u["line-snap"]=!1,u["line-stacking"]=!1,u["line-stacking-ruby"]=!1,u["line-stacking-shift"]=!1,u["line-stacking-strategy"]=!1,u["list-style"]=!0,u["list-style-image"]=!0,u["list-style-position"]=!0,u["list-style-type"]=!0,u.margin=!0,u["margin-bottom"]=!0,u["margin-left"]=!0,u["margin-right"]=!0,u["margin-top"]=!0,u["marker-offset"]=!1,u["marker-side"]=!1,u.marks=!1,u.mask=!1,u["mask-box"]=!1,u["mask-box-outset"]=!1,u["mask-box-repeat"]=!1,u["mask-box-slice"]=!1,u["mask-box-source"]=!1,u["mask-box-width"]=!1,u["mask-clip"]=!1,u["mask-image"]=!1,u["mask-origin"]=!1,u["mask-position"]=!1,u["mask-repeat"]=!1,u["mask-size"]=!1,u["mask-source-type"]=!1,u["mask-type"]=!1,u["max-height"]=!0,u["max-lines"]=!1,u["max-width"]=!0,u["min-height"]=!0,u["min-width"]=!0,u["move-to"]=!1,u["nav-down"]=!1,u["nav-index"]=!1,u["nav-left"]=!1,u["nav-right"]=!1,u["nav-up"]=!1,u["object-fit"]=!1,u["object-position"]=!1,u.opacity=!1,u.order=!1,u.orphans=!1,u.outline=!1,u["outline-color"]=!1,u["outline-offset"]=!1,u["outline-style"]=!1,u["outline-width"]=!1,u.overflow=!1,u["overflow-wrap"]=!1,u["overflow-x"]=!1,u["overflow-y"]=!1,u.padding=!0,u["padding-bottom"]=!0,u["padding-left"]=!0,u["padding-right"]=!0,u["padding-top"]=!0,u.page=!1,u["page-break-after"]=!1,u["page-break-before"]=!1,u["page-break-inside"]=!1,u["page-policy"]=!1,u.pause=!1,u["pause-after"]=!1,u["pause-before"]=!1,u.perspective=!1,u["perspective-origin"]=!1,u.pitch=!1,u["pitch-range"]=!1,u["play-during"]=!1,u.position=!1,u["presentation-level"]=!1,u.quotes=!1,u["region-fragment"]=!1,u.resize=!1,u.rest=!1,u["rest-after"]=!1,u["rest-before"]=!1,u.richness=!1,u.right=!1,u.rotation=!1,u["rotation-point"]=!1,u["ruby-align"]=!1,u["ruby-merge"]=!1,u["ruby-position"]=!1,u["shape-image-threshold"]=!1,u["shape-outside"]=!1,u["shape-margin"]=!1,u.size=!1,u.speak=!1,u["speak-as"]=!1,u["speak-header"]=!1,u["speak-numeral"]=!1,u["speak-punctuation"]=!1,u["speech-rate"]=!1,u.stress=!1,u["string-set"]=!1,u["tab-size"]=!1,u["table-layout"]=!1,u["text-align"]=!0,u["text-align-last"]=!0,u["text-combine-upright"]=!0,u["text-decoration"]=!0,u["text-decoration-color"]=!0,u["text-decoration-line"]=!0,u["text-decoration-skip"]=!0,u["text-decoration-style"]=!0,u["text-emphasis"]=!0,u["text-emphasis-color"]=!0,u["text-emphasis-position"]=!0,u["text-emphasis-style"]=!0,u["text-height"]=!0,u["text-indent"]=!0,u["text-justify"]=!0,u["text-orientation"]=!0,u["text-overflow"]=!0,u["text-shadow"]=!0,u["text-space-collapse"]=!0,u["text-transform"]=!0,u["text-underline-position"]=!0,u["text-wrap"]=!0,u.top=!1,u.transform=!1,u["transform-origin"]=!1,u["transform-style"]=!1,u.transition=!1,u["transition-delay"]=!1,u["transition-duration"]=!1,u["transition-property"]=!1,u["transition-timing-function"]=!1,u["unicode-bidi"]=!1,u["vertical-align"]=!1,u.visibility=!1,u["voice-balance"]=!1,u["voice-duration"]=!1,u["voice-family"]=!1,u["voice-pitch"]=!1,u["voice-range"]=!1,u["voice-rate"]=!1,u["voice-stress"]=!1,u["voice-volume"]=!1,u.volume=!1,u["white-space"]=!1,u.widows=!1,u.width=!0,u["will-change"]=!1,u["word-break"]=!0,u["word-spacing"]=!0,u["word-wrap"]=!0,u["wrap-flow"]=!1,u["wrap-through"]=!1,u["writing-mode"]=!1,u["z-index"]=!1,u}function e(u,c,d){}function s(u,c,d){}var a=/javascript\s*\:/img;function l(u,c){return a.test(c)?"":c}return _default.whiteList=o(),_default.getDefaultWhiteList=o,_default.onAttr=e,_default.onIgnoreAttr=s,_default.safeAttrValue=l,_default}var util$1,hasRequiredUtil$1;function requireUtil$1(){return hasRequiredUtil$1||(hasRequiredUtil$1=1,util$1={indexOf:function(o,e){var s,a;if(Array.prototype.indexOf)return o.indexOf(e);for(s=0,a=o.length;s<a;s++)if(o[s]===e)return s;return-1},forEach:function(o,e,s){var a,l;if(Array.prototype.forEach)return o.forEach(e,s);for(a=0,l=o.length;a<l;a++)e.call(s,o[a],a,o)},trim:function(o){return String.prototype.trim?o.trim():o.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(o){return String.prototype.trimRight?o.trimRight():o.replace(/(\s*$)/g,"")}}),util$1}var parser$4,hasRequiredParser;function requireParser(){if(hasRequiredParser)return parser$4;hasRequiredParser=1;var o=requireUtil$1();function e(s,a){s=o.trimRight(s),s[s.length-1]!==";"&&(s+=";");var l=s.length,u=!1,c=0,d=0,h="";function p(){if(!u){var y=o.trim(s.slice(c,d)),A=y.indexOf(":");if(A!==-1){var T=o.trim(y.slice(0,A)),E=o.trim(y.slice(A+1));if(T){var v=a(c,h.length,T,E,y);v&&(h+=v+"; ")}}}c=d+1}for(;d<l;d++){var m=s[d];if(m==="/"&&s[d+1]==="*"){var g=s.indexOf("*/",d+2);if(g===-1)break;d=g+1,c=d+1,u=!1}else m==="("?u=!0:m===")"?u=!1:m===";"?u||p():m===`
`&&p()}return o.trim(h)}return parser$4=e,parser$4}var css$3,hasRequiredCss$1;function requireCss$1(){if(hasRequiredCss$1)return css$3;hasRequiredCss$1=1;var o=require_default(),e=requireParser();requireUtil$1();function s(u){return u==null}function a(u){var c={};for(var d in u)c[d]=u[d];return c}function l(u){u=a(u||{}),u.whiteList=u.whiteList||o.whiteList,u.onAttr=u.onAttr||o.onAttr,u.onIgnoreAttr=u.onIgnoreAttr||o.onIgnoreAttr,u.safeAttrValue=u.safeAttrValue||o.safeAttrValue,this.options=u}return l.prototype.process=function(u){if(u=u||"",u=u.toString(),!u)return"";var c=this,d=c.options,h=d.whiteList,p=d.onAttr,m=d.onIgnoreAttr,g=d.safeAttrValue,y=e(u,function(A,T,E,v,_){var w=h[E],R=!1;if(w===!0?R=w:typeof w=="function"?R=w(v):w instanceof RegExp&&(R=w.test(v)),R!==!0&&(R=!1),v=g(E,v),!!v){var k={position:T,sourcePosition:A,source:_,isWhite:R};if(R){var I=p(E,v,k);return s(I)?E+":"+v:I}else{var I=m(E,v,k);if(!s(I))return I}}});return y},css$3=l,css$3}var hasRequiredLib$1;function requireLib$1(){return hasRequiredLib$1||(hasRequiredLib$1=1,(function(o,e){var s=require_default(),a=requireCss$1();function l(c,d){var h=new a(d);return h.process(c)}e=o.exports=l,e.FilterCSS=a;for(var u in s)e[u]=s[u];typeof window<"u"&&(window.filterCSS=o.exports)})(lib$1,lib$1.exports)),lib$1.exports}var ElementType;(function(o){o.Root="root",o.Text="text",o.Directive="directive",o.Comment="comment",o.Script="script",o.Style="style",o.Tag="tag",o.CDATA="cdata",o.Doctype="doctype"})(ElementType||(ElementType={}));function isTag$1(o){return o.type===ElementType.Tag||o.type===ElementType.Script||o.type===ElementType.Style}const Root=ElementType.Root,Text$2=ElementType.Text,Directive=ElementType.Directive,Comment$1=ElementType.Comment,Script=ElementType.Script,Style=ElementType.Style,Tag$1=ElementType.Tag,CDATA$1=ElementType.CDATA,Doctype=ElementType.Doctype;let Node$1=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return cloneNode(this,e)}};class DataNode extends Node$1{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}}let Text$1=class extends DataNode{constructor(){super(...arguments),this.type=ElementType.Text}get nodeType(){return 3}};class Comment extends DataNode{constructor(){super(...arguments),this.type=ElementType.Comment}get nodeType(){return 8}}class ProcessingInstruction extends DataNode{constructor(e,s){super(s),this.name=e,this.type=ElementType.Directive}get nodeType(){return 1}}class NodeWithChildren extends Node$1{constructor(e){super(),this.children=e}get firstChild(){var e;return(e=this.children[0])!==null&&e!==void 0?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}}class CDATA extends NodeWithChildren{constructor(){super(...arguments),this.type=ElementType.CDATA}get nodeType(){return 4}}class Document extends NodeWithChildren{constructor(){super(...arguments),this.type=ElementType.Root}get nodeType(){return 9}}let Element$3=class extends NodeWithChildren{constructor(e,s,a=[],l=e==="script"?ElementType.Script:e==="style"?ElementType.Style:ElementType.Tag){super(a),this.name=e,this.attribs=s,this.type=l}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map(e=>{var s,a;return{name:e,value:this.attribs[e],namespace:(s=this["x-attribsNamespace"])===null||s===void 0?void 0:s[e],prefix:(a=this["x-attribsPrefix"])===null||a===void 0?void 0:a[e]}})}};function isTag(o){return isTag$1(o)}function isCDATA(o){return o.type===ElementType.CDATA}function isText(o){return o.type===ElementType.Text}function isComment(o){return o.type===ElementType.Comment}function isDirective(o){return o.type===ElementType.Directive}function isDocument(o){return o.type===ElementType.Root}function hasChildren(o){return Object.prototype.hasOwnProperty.call(o,"children")}function cloneNode(o,e=!1){let s;if(isText(o))s=new Text$1(o.data);else if(isComment(o))s=new Comment(o.data);else if(isTag(o)){const a=e?cloneChildren(o.children):[],l=new Element$3(o.name,{...o.attribs},a);a.forEach(u=>u.parent=l),o.namespace!=null&&(l.namespace=o.namespace),o["x-attribsNamespace"]&&(l["x-attribsNamespace"]={...o["x-attribsNamespace"]}),o["x-attribsPrefix"]&&(l["x-attribsPrefix"]={...o["x-attribsPrefix"]}),s=l}else if(isCDATA(o)){const a=e?cloneChildren(o.children):[],l=new CDATA(a);a.forEach(u=>u.parent=l),s=l}else if(isDocument(o)){const a=e?cloneChildren(o.children):[],l=new Document(a);a.forEach(u=>u.parent=l),o["x-mode"]&&(l["x-mode"]=o["x-mode"]),s=l}else if(isDirective(o)){const a=new ProcessingInstruction(o.name,o.data);o["x-name"]!=null&&(a["x-name"]=o["x-name"],a["x-publicId"]=o["x-publicId"],a["x-systemId"]=o["x-systemId"]),s=a}else throw new Error(`Not implemented yet: ${o.type}`);return s.startIndex=o.startIndex,s.endIndex=o.endIndex,o.sourceCodeLocation!=null&&(s.sourceCodeLocation=o.sourceCodeLocation),s}function cloneChildren(o){const e=o.map(s=>cloneNode(s,!0));for(let s=1;s<e.length;s++)e[s].prev=e[s-1],e[s-1].next=e[s];return e}const defaultOpts$2={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class DomHandler{constructor(e,s,a){this.dom=[],this.root=new Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof s=="function"&&(a=s,s=defaultOpts$2),typeof e=="object"&&(s=e,e=void 0),this.callback=e??null,this.options=s??defaultOpts$2,this.elementCB=a??null}onparserinit(e){this.parser=e}onreset(){this.dom=[],this.root=new Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(e){this.handleCallback(e)}onclosetag(){this.lastNode=null;const e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)}onopentag(e,s){const a=this.options.xmlMode?ElementType.Tag:void 0,l=new Element$3(e,s,void 0,a);this.addNode(l),this.tagStack.push(l)}ontext(e){const{lastNode:s}=this;if(s&&s.type===ElementType.Text)s.data+=e,this.options.withEndIndices&&(s.endIndex=this.parser.endIndex);else{const a=new Text$1(e);this.addNode(a),this.lastNode=a}}oncomment(e){if(this.lastNode&&this.lastNode.type===ElementType.Comment){this.lastNode.data+=e;return}const s=new Comment(e);this.addNode(s),this.lastNode=s}oncommentend(){this.lastNode=null}oncdatastart(){const e=new Text$1(""),s=new CDATA([e]);this.addNode(s),e.parent=s,this.lastNode=e}oncdataend(){this.lastNode=null}onprocessinginstruction(e,s){const a=new ProcessingInstruction(e,s);this.addNode(a)}handleCallback(e){if(typeof this.callback=="function")this.callback(e,this.dom);else if(e)throw e}addNode(e){const s=this.tagStack[this.tagStack.length-1],a=s.children[s.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),s.children.push(e),a&&(e.prev=a,a.next=e),e.parent=s,this.lastNode=null}}const xmlReplacer=/["&'<>$\x80-\uFFFF]/g,xmlCodeMap=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),getCodePoint=String.prototype.codePointAt!=null?(o,e)=>o.codePointAt(e):(o,e)=>(o.charCodeAt(e)&64512)===55296?(o.charCodeAt(e)-55296)*1024+o.charCodeAt(e+1)-56320+65536:o.charCodeAt(e);function encodeXML(o){let e="",s=0,a;for(;(a=xmlReplacer.exec(o))!==null;){const l=a.index,u=o.charCodeAt(l),c=xmlCodeMap.get(u);c!==void 0?(e+=o.substring(s,l)+c,s=l+1):(e+=`${o.substring(s,l)}&#x${getCodePoint(o,l).toString(16)};`,s=xmlReplacer.lastIndex+=+((u&64512)===55296))}return e+o.substr(s)}function getEscaper$1(o,e){return function(a){let l,u=0,c="";for(;l=o.exec(a);)u!==l.index&&(c+=a.substring(u,l.index)),c+=e.get(l[0].charCodeAt(0)),u=l.index+1;return c+a.substring(u)}}const escapeAttribute$1=getEscaper$1(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),escapeText$1=getEscaper$1(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(o=>[o.toLowerCase(),o])),attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(o=>[o.toLowerCase(),o])),unencodedElements=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function replaceQuotes(o){return o.replace(/"/g,"&quot;")}function formatAttributes(o,e){var s;if(!o)return;const a=((s=e.encodeEntities)!==null&&s!==void 0?s:e.decodeEntities)===!1?replaceQuotes:e.xmlMode||e.encodeEntities!=="utf8"?encodeXML:escapeAttribute$1;return Object.keys(o).map(l=>{var u,c;const d=(u=o[l])!==null&&u!==void 0?u:"";return e.xmlMode==="foreign"&&(l=(c=attributeNames.get(l))!==null&&c!==void 0?c:l),!e.emptyAttrs&&!e.xmlMode&&d===""?l:`${l}="${a(d)}"`}).join(" ")}const singleTag=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function render$4(o,e={}){const s="length"in o?o:[o];let a="";for(let l=0;l<s.length;l++)a+=renderNode(s[l],e);return a}function renderNode(o,e){switch(o.type){case Root:return render$4(o.children,e);case Doctype:case Directive:return renderDirective(o);case Comment$1:return renderComment(o);case CDATA$1:return renderCdata(o);case Script:case Style:case Tag$1:return renderTag(o,e);case Text$2:return renderText(o,e)}}const foreignModeIntegrationPoints=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),foreignElements=new Set(["svg","math"]);function renderTag(o,e){var s;e.xmlMode==="foreign"&&(o.name=(s=elementNames.get(o.name))!==null&&s!==void 0?s:o.name,o.parent&&foreignModeIntegrationPoints.has(o.parent.name)&&(e={...e,xmlMode:!1})),!e.xmlMode&&foreignElements.has(o.name)&&(e={...e,xmlMode:"foreign"});let a=`<${o.name}`;const l=formatAttributes(o.attribs,e);return l&&(a+=` ${l}`),o.children.length===0&&(e.xmlMode?e.selfClosingTags!==!1:e.selfClosingTags&&singleTag.has(o.name))?(e.xmlMode||(a+=" "),a+="/>"):(a+=">",o.children.length>0&&(a+=render$4(o.children,e)),(e.xmlMode||!singleTag.has(o.name))&&(a+=`</${o.name}>`)),a}function renderDirective(o){return`<${o.data}>`}function renderText(o,e){var s;let a=o.data||"";return((s=e.encodeEntities)!==null&&s!==void 0?s:e.decodeEntities)!==!1&&!(!e.xmlMode&&o.parent&&unencodedElements.has(o.parent.name))&&(a=e.xmlMode||e.encodeEntities!=="utf8"?encodeXML(a):escapeText$1(a)),a}function renderCdata(o){return`<![CDATA[${o.children[0].data}]]>`}function renderComment(o){return`<!--${o.data}-->`}function getOuterHTML(o,e){return render$4(o,e)}function getInnerHTML(o,e){return hasChildren(o)?o.children.map(s=>getOuterHTML(s,e)).join(""):""}function getText(o){return Array.isArray(o)?o.map(getText).join(""):isTag(o)?o.name==="br"?`
`:getText(o.children):isCDATA(o)?getText(o.children):isText(o)?o.data:""}function textContent$1(o){return Array.isArray(o)?o.map(textContent$1).join(""):hasChildren(o)&&!isComment(o)?textContent$1(o.children):isText(o)?o.data:""}function innerText(o){return Array.isArray(o)?o.map(innerText).join(""):hasChildren(o)&&(o.type===ElementType.Tag||isCDATA(o))?innerText(o.children):isText(o)?o.data:""}function getChildren$1(o){return hasChildren(o)?o.children:[]}function getParent(o){return o.parent||null}function getSiblings(o){const e=getParent(o);if(e!=null)return getChildren$1(e);const s=[o];let{prev:a,next:l}=o;for(;a!=null;)s.unshift(a),{prev:a}=a;for(;l!=null;)s.push(l),{next:l}=l;return s}function getAttributeValue(o,e){var s;return(s=o.attribs)===null||s===void 0?void 0:s[e]}function hasAttrib(o,e){return o.attribs!=null&&Object.prototype.hasOwnProperty.call(o.attribs,e)&&o.attribs[e]!=null}function getName(o){return o.name}function nextElementSibling(o){let{next:e}=o;for(;e!==null&&!isTag(e);)({next:e}=e);return e}function prevElementSibling(o){let{prev:e}=o;for(;e!==null&&!isTag(e);)({prev:e}=e);return e}function removeElement(o){if(o.prev&&(o.prev.next=o.next),o.next&&(o.next.prev=o.prev),o.parent){const e=o.parent.children,s=e.lastIndexOf(o);s>=0&&e.splice(s,1)}o.next=null,o.prev=null,o.parent=null}function replaceElement(o,e){const s=e.prev=o.prev;s&&(s.next=e);const a=e.next=o.next;a&&(a.prev=e);const l=e.parent=o.parent;if(l){const u=l.children;u[u.lastIndexOf(o)]=e,o.parent=null}}function appendChild(o,e){if(removeElement(e),e.next=null,e.parent=o,o.children.push(e)>1){const s=o.children[o.children.length-2];s.next=e,e.prev=s}else e.prev=null}function append$1(o,e){removeElement(e);const{parent:s}=o,a=o.next;if(e.next=a,e.prev=o,o.next=e,e.parent=s,a){if(a.prev=e,s){const l=s.children;l.splice(l.lastIndexOf(a),0,e)}}else s&&s.children.push(e)}function prependChild(o,e){if(removeElement(e),e.parent=o,e.prev=null,o.children.unshift(e)!==1){const s=o.children[1];s.prev=e,e.next=s}else e.next=null}function prepend$1(o,e){removeElement(e);const{parent:s}=o;if(s){const a=s.children;a.splice(a.indexOf(o),0,e)}o.prev&&(o.prev.next=e),e.parent=s,e.prev=o.prev,e.next=o,o.prev=e}function filter$2(o,e,s=!0,a=1/0){return find$3(o,Array.isArray(e)?e:[e],s,a)}function find$3(o,e,s,a){const l=[],u=[Array.isArray(e)?e:[e]],c=[0];for(;;){if(c[0]>=u[0].length){if(c.length===1)return l;u.shift(),c.shift();continue}const d=u[0][c[0]++];if(o(d)&&(l.push(d),--a<=0))return l;s&&hasChildren(d)&&d.children.length>0&&(c.unshift(0),u.unshift(d.children))}}function findOneChild(o,e){return e.find(o)}function findOne(o,e,s=!0){const a=Array.isArray(e)?e:[e];for(let l=0;l<a.length;l++){const u=a[l];if(isTag(u)&&o(u))return u;if(s&&hasChildren(u)&&u.children.length>0){const c=findOne(o,u.children,!0);if(c)return c}}return null}function existsOne(o,e){return(Array.isArray(e)?e:[e]).some(s=>isTag(s)&&o(s)||hasChildren(s)&&existsOne(o,s.children))}function findAll(o,e){const s=[],a=[Array.isArray(e)?e:[e]],l=[0];for(;;){if(l[0]>=a[0].length){if(a.length===1)return s;a.shift(),l.shift();continue}const u=a[0][l[0]++];isTag(u)&&o(u)&&s.push(u),hasChildren(u)&&u.children.length>0&&(l.unshift(0),a.unshift(u.children))}}const Checks={tag_name(o){return typeof o=="function"?e=>isTag(e)&&o(e.name):o==="*"?isTag:e=>isTag(e)&&e.name===o},tag_type(o){return typeof o=="function"?e=>o(e.type):e=>e.type===o},tag_contains(o){return typeof o=="function"?e=>isText(e)&&o(e.data):e=>isText(e)&&e.data===o}};function getAttribCheck(o,e){return typeof e=="function"?s=>isTag(s)&&e(s.attribs[o]):s=>isTag(s)&&s.attribs[o]===e}function combineFuncs(o,e){return s=>o(s)||e(s)}function compileTest(o){const e=Object.keys(o).map(s=>{const a=o[s];return Object.prototype.hasOwnProperty.call(Checks,s)?Checks[s](a):getAttribCheck(s,a)});return e.length===0?null:e.reduce(combineFuncs)}function testElement(o,e){const s=compileTest(o);return s?s(e):!0}function getElements(o,e,s,a=1/0){const l=compileTest(o);return l?filter$2(l,e,s,a):[]}function getElementById(o,e,s=!0){return Array.isArray(e)||(e=[e]),findOne(getAttribCheck("id",o),e,s)}function getElementsByTagName(o,e,s=!0,a=1/0){return filter$2(Checks.tag_name(o),e,s,a)}function getElementsByClassName(o,e,s=!0,a=1/0){return filter$2(getAttribCheck("class",o),e,s,a)}function getElementsByTagType(o,e,s=!0,a=1/0){return filter$2(Checks.tag_type(o),e,s,a)}function removeSubsets(o){let e=o.length;for(;--e>=0;){const s=o[e];if(e>0&&o.lastIndexOf(s,e-1)>=0){o.splice(e,1);continue}for(let a=s.parent;a;a=a.parent)if(o.includes(a)){o.splice(e,1);break}}return o}var DocumentPosition;(function(o){o[o.DISCONNECTED=1]="DISCONNECTED",o[o.PRECEDING=2]="PRECEDING",o[o.FOLLOWING=4]="FOLLOWING",o[o.CONTAINS=8]="CONTAINS",o[o.CONTAINED_BY=16]="CONTAINED_BY"})(DocumentPosition||(DocumentPosition={}));function compareDocumentPosition(o,e){const s=[],a=[];if(o===e)return 0;let l=hasChildren(o)?o:o.parent;for(;l;)s.unshift(l),l=l.parent;for(l=hasChildren(e)?e:e.parent;l;)a.unshift(l),l=l.parent;const u=Math.min(s.length,a.length);let c=0;for(;c<u&&s[c]===a[c];)c++;if(c===0)return DocumentPosition.DISCONNECTED;const d=s[c-1],h=d.children,p=s[c],m=a[c];return h.indexOf(p)>h.indexOf(m)?d===e?DocumentPosition.FOLLOWING|DocumentPosition.CONTAINED_BY:DocumentPosition.FOLLOWING:d===o?DocumentPosition.PRECEDING|DocumentPosition.CONTAINS:DocumentPosition.PRECEDING}function uniqueSort(o){return o=o.filter((e,s,a)=>!a.includes(e,s+1)),o.sort((e,s)=>{const a=compareDocumentPosition(e,s);return a&DocumentPosition.PRECEDING?-1:a&DocumentPosition.FOLLOWING?1:0}),o}function getFeed(o){const e=getOneElement(isValidFeed,o);return e?e.name==="feed"?getAtomFeed(e):getRssFeed(e):null}function getAtomFeed(o){var e;const s=o.children,a={type:"atom",items:getElementsByTagName("entry",s).map(c=>{var d;const{children:h}=c,p={media:getMediaElements(h)};addConditionally(p,"id","id",h),addConditionally(p,"title","title",h);const m=(d=getOneElement("link",h))===null||d===void 0?void 0:d.attribs.href;m&&(p.link=m);const g=fetch("summary",h)||fetch("content",h);g&&(p.description=g);const y=fetch("updated",h);return y&&(p.pubDate=new Date(y)),p})};addConditionally(a,"id","id",s),addConditionally(a,"title","title",s);const l=(e=getOneElement("link",s))===null||e===void 0?void 0:e.attribs.href;l&&(a.link=l),addConditionally(a,"description","subtitle",s);const u=fetch("updated",s);return u&&(a.updated=new Date(u)),addConditionally(a,"author","email",s,!0),a}function getRssFeed(o){var e,s;const a=(s=(e=getOneElement("channel",o.children))===null||e===void 0?void 0:e.children)!==null&&s!==void 0?s:[],l={type:o.name.substr(0,3),id:"",items:getElementsByTagName("item",o.children).map(c=>{const{children:d}=c,h={media:getMediaElements(d)};addConditionally(h,"id","guid",d),addConditionally(h,"title","title",d),addConditionally(h,"link","link",d),addConditionally(h,"description","description",d);const p=fetch("pubDate",d)||fetch("dc:date",d);return p&&(h.pubDate=new Date(p)),h})};addConditionally(l,"title","title",a),addConditionally(l,"link","link",a),addConditionally(l,"description","description",a);const u=fetch("lastBuildDate",a);return u&&(l.updated=new Date(u)),addConditionally(l,"author","managingEditor",a,!0),l}const MEDIA_KEYS_STRING=["url","type","lang"],MEDIA_KEYS_INT=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function getMediaElements(o){return getElementsByTagName("media:content",o).map(e=>{const{attribs:s}=e,a={medium:s.medium,isDefault:!!s.isDefault};for(const l of MEDIA_KEYS_STRING)s[l]&&(a[l]=s[l]);for(const l of MEDIA_KEYS_INT)s[l]&&(a[l]=parseInt(s[l],10));return s.expression&&(a.expression=s.expression),a})}function getOneElement(o,e){return getElementsByTagName(o,e,!0,1)[0]}function fetch(o,e,s=!1){return textContent$1(getElementsByTagName(o,e,s,1)).trim()}function addConditionally(o,e,s,a,l=!1){const u=fetch(s,a,l);u&&(o[e]=u)}function isValidFeed(o){return o==="rss"||o==="feed"||o==="rdf:RDF"}const DomUtils=Object.freeze(Object.defineProperty({__proto__:null,get DocumentPosition(){return DocumentPosition},append:append$1,appendChild,compareDocumentPosition,existsOne,filter:filter$2,find:find$3,findAll,findOne,findOneChild,getAttributeValue,getChildren:getChildren$1,getElementById,getElements,getElementsByClassName,getElementsByTagName,getElementsByTagType,getFeed,getInnerHTML,getName,getOuterHTML,getParent,getSiblings,getText,hasAttrib,hasChildren,innerText,isCDATA,isComment,isDocument,isTag,isText,nextElementSibling,prepend:prepend$1,prependChild,prevElementSibling,removeElement,removeSubsets,replaceElement,testElement,textContent:textContent$1,uniqueSort},Symbol.toStringTag,{value:"Module"})),defaultOpts$1={_useHtmlParser2:!1};function flattenOptions(o,e){if(!o)return e??defaultOpts$1;const s={_useHtmlParser2:!!o.xmlMode,...e,...o};return o.xml?(s._useHtmlParser2=!0,s.xmlMode=!0,o.xml!==!0&&Object.assign(s,o.xml)):o.xmlMode&&(s._useHtmlParser2=!0),s}function render$3(o,e,s){return o?o(e??o._root.children,null,void 0,s).toString():""}function isOptions(o,e){return typeof o=="object"&&o!=null&&!("length"in o)&&!("type"in o)}function html$4(o,e){const s=isOptions(o)?(e=o,void 0):o,a={...this===null||this===void 0?void 0:this._options,...flattenOptions(e)};return render$3(this,s,a)}function xml(o){const e={...this._options,xmlMode:!0};return render$3(this,o,e)}function text$5(o){const e=o??(this?this.root():[]);let s="";for(let a=0;a<e.length;a++)s+=textContent$1(e[a]);return s}function parseHTML(o,e,s=typeof e=="boolean"?e:!1){if(!o||typeof o!="string")return null;typeof e=="boolean"&&(s=e);const a=this.load(o,this._options,!1);return s||a("script").remove(),[...a.root()[0].children]}function root(){return this(this._root)}function contains$1(o,e){if(e===o)return!1;let s=e;for(;s&&s!==s.parent;)if(s=s.parent,s===o)return!0;return!1}function extract$1(o){return this.root().extract(o)}function merge(o,e){if(!isArrayLike(o)||!isArrayLike(e))return;let s=o.length;const a=+e.length;for(let l=0;l<a;l++)o[s++]=e[l];return o.length=s,o}function isArrayLike(o){if(Array.isArray(o))return!0;if(typeof o!="object"||o===null||!("length"in o)||typeof o.length!="number"||o.length<0)return!1;for(let e=0;e<o.length;e++)if(!(e in o))return!1;return!0}const staticMethods=Object.freeze(Object.defineProperty({__proto__:null,contains:contains$1,extract:extract$1,html:html$4,merge,parseHTML,root,text:text$5,xml},Symbol.toStringTag,{value:"Module"}));function isCheerio(o){return o.cheerio!=null}function camelCase(o){return o.replace(/[._-](\w|$)/g,(e,s)=>s.toUpperCase())}function cssCase(o){return o.replace(/[A-Z]/g,"-$&").toLowerCase()}function domEach(o,e){const s=o.length;for(let a=0;a<s;a++)e(o[a],a);return o}var CharacterCode;(function(o){o[o.LowerA=97]="LowerA",o[o.LowerZ=122]="LowerZ",o[o.UpperA=65]="UpperA",o[o.UpperZ=90]="UpperZ",o[o.Exclamation=33]="Exclamation"})(CharacterCode||(CharacterCode={}));function isHtml(o){if(typeof o!="string")return!1;const e=o.indexOf("<");if(e===-1||e>o.length-3)return!1;const s=o.charCodeAt(e+1);return(s>=CharacterCode.LowerA&&s<=CharacterCode.LowerZ||s>=CharacterCode.UpperA&&s<=CharacterCode.UpperZ||s===CharacterCode.Exclamation)&&o.includes(">",e+2)}var _a$2;const decodeMap$1=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),fromCodePoint$1=(_a$2=String.fromCodePoint)!==null&&_a$2!==void 0?_a$2:(o=>{let e="";return o>65535&&(o-=65536,e+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),e+=String.fromCharCode(o),e});function replaceCodePoint$1(o){var e;return o>=55296&&o<=57343||o>1114111?65533:(e=decodeMap$1.get(o))!==null&&e!==void 0?e:o}function decodeBase64(o){const e=typeof atob=="function"?atob(o):typeof Buffer$1.from=="function"?Buffer$1.from(o,"base64").toString("binary"):new Buffer$1(o,"base64").toString("binary"),s=e.length&-2,a=new Uint16Array(s/2);for(let l=0,u=0;l<s;l+=2){const c=e.charCodeAt(l),d=e.charCodeAt(l+1);a[u++]=c|d<<8}return a}const htmlDecodeTree$1=decodeBase64("QR08ALkAAgH6AYsDNQR2BO0EPgXZBQEGLAbdBxMISQrvCmQLfQurDKQNLw4fD4YPpA+6D/IPAAAAAAAAAAAAAAAAKhBMEY8TmxUWF2EYLBkxGuAa3RsJHDscWR8YIC8jSCSIJcMl6ie3Ku8rEC0CLjoupS7kLgAIRU1hYmNmZ2xtbm9wcnN0dVQAWgBeAGUAaQBzAHcAfgCBAIQAhwCSAJoAoACsALMAbABpAGcAO4DGAMZAUAA7gCYAJkBjAHUAdABlADuAwQDBQHIiZXZlAAJhAAFpeW0AcgByAGMAO4DCAMJAEGRyAADgNdgE3XIAYQB2AGUAO4DAAMBA8CFoYZFj4SFjcgBhZAAAoFMqAAFncIsAjgBvAG4ABGFmAADgNdg43fAlbHlGdW5jdGlvbgCgYSBpAG4AZwA7gMUAxUAAAWNzpACoAHIAAOA12Jzc6SFnbgCgVCJpAGwAZABlADuAwwDDQG0AbAA7gMQAxEAABGFjZWZvcnN1xQDYANoA7QDxAPYA+QD8AAABY3LJAM8AayNzbGFzaAAAoBYidgHTANUAAKDnKmUAZAAAoAYjeQARZIABY3J0AOAA5QDrAGEidXNlAACgNSLuI291bGxpcwCgLCFhAJJjcgAA4DXYBd1wAGYAAOA12Dnd5SF2ZdhiYwDyAOoAbSJwZXEAAKBOIgAHSE9hY2RlZmhpbG9yc3UXARoBHwE6AVIBVQFiAWQBZgGCAakB6QHtAfIBYwB5ACdkUABZADuAqQCpQIABY3B5ACUBKAE1AfUhdGUGYWmg0iJ0KGFsRGlmZmVyZW50aWFsRAAAoEUhbCJleXMAAKAtIQACYWVpb0EBRAFKAU0B8iFvbgxhZABpAGwAO4DHAMdAcgBjAAhhbiJpbnQAAKAwIm8AdAAKYQABZG5ZAV0BaSJsbGEAuGB0I2VyRG90ALdg8gA5AWkAp2NyImNsZQAAAkRNUFRwAXQBeQF9AW8AdAAAoJkiaSJudXMAAKCWIuwhdXMAoJUiaSJtZXMAAKCXIm8AAAFjc4cBlAFrKndpc2VDb250b3VySW50ZWdyYWwAAKAyImUjQ3VybHkAAAFEUZwBpAFvJXVibGVRdW90ZQAAoB0gdSJvdGUAAKAZIAACbG5wdbABtgHNAdgBbwBuAGWgNyIAoHQqgAFnaXQAvAHBAcUB8iJ1ZW50AKBhIm4AdAAAoC8i7yV1ckludGVncmFsAKAuIgABZnLRAdMBAKACIe8iZHVjdACgECJuLnRlckNsb2Nrd2lzZUNvbnRvdXJJbnRlZ3JhbAAAoDMi7yFzcwCgLypjAHIAAOA12J7ccABDoNMiYQBwAACgTSKABURKU1phY2VmaW9zAAsCEgIVAhgCGwIsAjQCOQI9AnMCfwNvoEUh9CJyYWhkAKARKWMAeQACZGMAeQAFZGMAeQAPZIABZ3JzACECJQIoAuchZXIAoCEgcgAAoKEhaAB2AACg5CoAAWF5MAIzAvIhb24OYRRkbAB0oAciYQCUY3IAAOA12AfdAAFhZkECawIAAWNtRQJnAvIjaXRpY2FsAAJBREdUUAJUAl8CYwJjInV0ZQC0YG8AdAFZAloC2WJiJGxlQWN1dGUA3WJyImF2ZQBgYGkibGRlANxi7yFuZACgxCJmJWVyZW50aWFsRAAAoEYhcAR9AgAAAAAAAIECjgIAABoDZgAA4DXYO91EoagAhQKJAm8AdAAAoNwgcSJ1YWwAAKBQIuIhbGUAA0NETFJVVpkCqAK1Au8C/wIRA28AbgB0AG8AdQByAEkAbgB0AGUAZwByAGEA7ADEAW8AdAKvAgAAAACwAqhgbiNBcnJvdwAAoNMhAAFlb7kC0AJmAHQAgAFBUlQAwQLGAs0CciJyb3cAAKDQIekkZ2h0QXJyb3cAoNQhZQDlACsCbgBnAAABTFLWAugC5SFmdAABQVLcAuECciJyb3cAAKD4J+kkZ2h0QXJyb3cAoPon6SRnaHRBcnJvdwCg+SdpImdodAAAAUFU9gL7AnIicm93AACg0iFlAGUAAKCoInAAQQIGAwAAAAALA3Iicm93AACg0SFvJHduQXJyb3cAAKDVIWUlcnRpY2FsQmFyAACgJSJuAAADQUJMUlRhJAM2AzoDWgNxA3oDciJyb3cAAKGTIUJVLAMwA2EAcgAAoBMpcCNBcnJvdwAAoPUhciJldmUAEWPlIWZ00gJDAwAASwMAAFIDaSVnaHRWZWN0b3IAAKBQKWUkZVZlY3RvcgAAoF4p5SJjdG9yQqC9IWEAcgAAoFYpaSJnaHQA1AFiAwAAaQNlJGVWZWN0b3IAAKBfKeUiY3RvckKgwSFhAHIAAKBXKWUAZQBBoKQiciJyb3cAAKCnIXIAcgBvAPcAtAIAAWN0gwOHA3IAAOA12J/c8iFvaxBhAAhOVGFjZGZnbG1vcHFzdHV4owOlA6kDsAO/A8IDxgPNA9ID8gP9AwEEFAQeBCAEJQRHAEphSAA7gNAA0EBjAHUAdABlADuAyQDJQIABYWl5ALYDuQO+A/Ihb24aYXIAYwA7gMoAykAtZG8AdAAWYXIAAOA12AjdcgBhAHYAZQA7gMgAyEDlIm1lbnQAoAgiAAFhcNYD2QNjAHIAEmF0AHkAUwLhAwAAAADpA20lYWxsU3F1YXJlAACg+yVlJ3J5U21hbGxTcXVhcmUAAKCrJQABZ3D2A/kDbwBuABhhZgAA4DXYPN3zImlsb26VY3UAAAFhaQYEDgRsAFSgdSppImxkZQAAoEIi7CNpYnJpdW0AoMwhAAFjaRgEGwRyAACgMCFtAACgcyphAJdjbQBsADuAywDLQAABaXApBC0E8yF0cwCgAyLvJG5lbnRpYWxFAKBHIYACY2Zpb3MAPQQ/BEMEXQRyBHkAJGRyAADgNdgJ3WwibGVkAFMCTAQAAAAAVARtJWFsbFNxdWFyZQAAoPwlZSdyeVNtYWxsU3F1YXJlAACgqiVwA2UEAABpBAAAAABtBGYAAOA12D3dwSFsbACgACLyI2llcnRyZgCgMSFjAPIAcQQABkpUYWJjZGZnb3JzdIgEiwSOBJMElwSkBKcEqwStBLIE5QTqBGMAeQADZDuAPgA+QO0hbWFkoJMD3GNyImV2ZQAeYYABZWl5AJ0EoASjBOQhaWwiYXIAYwAcYRNkbwB0ACBhcgAA4DXYCt0AoNkicABmAADgNdg+3eUiYXRlcgADRUZHTFNUvwTIBM8E1QTZBOAEcSJ1YWwATKBlIuUhc3MAoNsidSRsbEVxdWFsAACgZyJyI2VhdGVyAACgoirlIXNzAKB3IuwkYW50RXF1YWwAoH4qaSJsZGUAAKBzImMAcgAA4DXYotwAoGsiAARBYWNmaW9zdfkE/QQFBQgFCwUTBSIFKwVSIkRjeQAqZAABY3QBBQQFZQBrAMdiXmDpIXJjJGFyAACgDCFsJWJlcnRTcGFjZQAAoAsh8AEYBQAAGwVmAACgDSHpJXpvbnRhbExpbmUAoAAlAAFjdCYFKAXyABIF8iFvayZhbQBwAEQBMQU5BW8AdwBuAEgAdQBtAPAAAAFxInVhbAAAoE8iAAdFSk9hY2RmZ21ub3N0dVMFVgVZBVwFYwVtBXAFcwV6BZAFtgXFBckFzQVjAHkAFWTsIWlnMmFjAHkAAWRjAHUAdABlADuAzQDNQAABaXlnBWwFcgBjADuAzgDOQBhkbwB0ADBhcgAAoBEhcgBhAHYAZQA7gMwAzEAAoREhYXB/BYsFAAFjZ4MFhQVyACphaSNuYXJ5SQAAoEghbABpAGUA8wD6AvQBlQUAAKUFZaAsIgABZ3KaBZ4F8iFhbACgKyLzI2VjdGlvbgCgwiJpI3NpYmxlAAABQ1SsBbEFbyJtbWEAAKBjIGkibWVzAACgYiCAAWdwdAC8Bb8FwwVvAG4ALmFmAADgNdhA3WEAmWNjAHIAAKAQIWkibGRlAChh6wHSBQAA1QVjAHkABmRsADuAzwDPQIACY2Zvc3UA4QXpBe0F8gX9BQABaXnlBegFcgBjADRhGWRyAADgNdgN3XAAZgAA4DXYQd3jAfcFAAD7BXIAAOA12KXc8iFjeQhk6yFjeQRkgANISmFjZm9zAAwGDwYSBhUGHQYhBiYGYwB5ACVkYwB5AAxk8CFwYZpjAAFleRkGHAbkIWlsNmEaZHIAAOA12A7dcABmAADgNdhC3WMAcgAA4DXYptyABUpUYWNlZmxtb3N0AD0GQAZDBl4GawZkB2gHcAd0B80H2gdjAHkACWQ7gDwAPECAAmNtbnByAEwGTwZSBlUGWwb1IXRlOWHiIWRhm2NnAACg6ifsI2FjZXRyZgCgEiFyAACgniGAAWFleQBkBmcGagbyIW9uPWHkIWlsO2EbZAABZnNvBjQHdAAABUFDREZSVFVWYXKABp4GpAbGBssG3AYDByEHwQIqBwABbnKEBowGZyVsZUJyYWNrZXQAAKDoJ/Ihb3cAoZAhQlKTBpcGYQByAACg5CHpJGdodEFycm93AKDGIWUjaWxpbmcAAKAII28A9QGqBgAAsgZiJWxlQnJhY2tldAAAoOYnbgDUAbcGAAC+BmUkZVZlY3RvcgAAoGEp5SJjdG9yQqDDIWEAcgAAoFkpbCJvb3IAAKAKI2kiZ2h0AAABQVbSBtcGciJyb3cAAKCUIeUiY3RvcgCgTikAAWVy4AbwBmUAAKGjIkFW5gbrBnIicm93AACgpCHlImN0b3IAoFopaSNhbmdsZQBCorIi+wYAAAAA/wZhAHIAAKDPKXEidWFsAACgtCJwAIABRFRWAAoHEQcYB+8kd25WZWN0b3IAoFEpZSRlVmVjdG9yAACgYCnlImN0b3JCoL8hYQByAACgWCnlImN0b3JCoLwhYQByAACgUilpAGcAaAB0AGEAcgByAG8A9wDMAnMAAANFRkdMU1Q/B0cHTgdUB1gHXwfxJXVhbEdyZWF0ZXIAoNoidSRsbEVxdWFsAACgZiJyI2VhdGVyAACgdiLlIXNzAKChKuwkYW50RXF1YWwAoH0qaSJsZGUAAKByInIAAOA12A/dZaDYIuYjdGFycm93AKDaIWkiZG90AD9hgAFucHcAege1B7kHZwAAAkxSbHKCB5QHmwerB+UhZnQAAUFSiAeNB3Iicm93AACg9SfpJGdodEFycm93AKD3J+kkZ2h0QXJyb3cAoPYn5SFmdAABYXLcAqEHaQBnAGgAdABhAHIAcgBvAPcA5wJpAGcAaAB0AGEAcgByAG8A9wDuAmYAAOA12EPdZQByAAABTFK/B8YHZSRmdEFycm93AACgmSHpJGdodEFycm93AKCYIYABY2h0ANMH1QfXB/IAWgYAoLAh8iFva0FhAKBqIgAEYWNlZmlvc3XpB+wH7gf/BwMICQgOCBEIcAAAoAUpeQAcZAABZGzyB/kHaSR1bVNwYWNlAACgXyBsI2ludHJmAACgMyFyAADgNdgQ3e4jdXNQbHVzAKATInAAZgAA4DXYRN1jAPIA/gecY4AESmFjZWZvc3R1ACEIJAgoCDUIgQiFCDsKQApHCmMAeQAKZGMidXRlAENhgAFhZXkALggxCDQI8iFvbkdh5CFpbEVhHWSAAWdzdwA7CGEIfQjhInRpdmWAAU1UVgBECEwIWQhlJWRpdW1TcGFjZQAAoAsgaABpAAABY25SCFMIawBTAHAAYQBjAOUASwhlAHIAeQBUAGgAaQDuAFQI9CFlZAABR0xnCHUIcgBlAGEAdABlAHIARwByAGUAYQB0AGUA8gDrBGUAcwBzAEwAZQBzAPMA2wdMImluZQAKYHIAAOA12BHdAAJCbnB0jAiRCJkInAhyImVhawAAoGAgwiZyZWFraW5nU3BhY2WgYGYAAKAVIUOq7CqzCMIIzQgAAOcIGwkAAAAAAAAtCQAAbwkAAIcJAACdCcAJGQoAADQKAAFvdbYIvAjuI2dydWVudACgYiJwIkNhcAAAoG0ibyh1YmxlVmVydGljYWxCYXIAAKAmIoABbHF4ANII1wjhCOUibWVudACgCSL1IWFsVKBgImkibGRlAADgQiI4A2kic3RzAACgBCJyI2VhdGVyAACjbyJFRkdMU1T1CPoIAgkJCQ0JFQlxInVhbAAAoHEidSRsbEVxdWFsAADgZyI4A3IjZWF0ZXIAAOBrIjgD5SFzcwCgeSLsJGFudEVxdWFsAOB+KjgDaSJsZGUAAKB1IvUhbXBEASAJJwnvI3duSHVtcADgTiI4A3EidWFsAADgTyI4A2UAAAFmczEJRgn0JFRyaWFuZ2xlQqLqIj0JAAAAAEIJYQByAADgzyk4A3EidWFsAACg7CJzAICibiJFR0xTVABRCVYJXAlhCWkJcSJ1YWwAAKBwInIjZWF0ZXIAAKB4IuUhc3MA4GoiOAPsJGFudEVxdWFsAOB9KjgDaSJsZGUAAKB0IuUic3RlZAABR0x1CX8J8iZlYXRlckdyZWF0ZXIA4KIqOAPlI3NzTGVzcwDgoSo4A/IjZWNlZGVzAKGAIkVTjwmVCXEidWFsAADgryo4A+wkYW50RXF1YWwAoOAiAAFlaaAJqQl2JmVyc2VFbGVtZW50AACgDCLnJWh0VHJpYW5nbGVCousitgkAAAAAuwlhAHIAAODQKTgDcSJ1YWwAAKDtIgABcXXDCeAJdSNhcmVTdQAAAWJwywnVCfMhZXRF4I8iOANxInVhbAAAoOIi5SJyc2V0ReCQIjgDcSJ1YWwAAKDjIoABYmNwAOYJ8AkNCvMhZXRF4IIi0iBxInVhbAAAoIgi4yJlZWRzgKGBIkVTVAD6CQAKBwpxInVhbAAA4LAqOAPsJGFudEVxdWFsAKDhImkibGRlAADgfyI4A+UicnNldEXggyLSIHEidWFsAACgiSJpImxkZQCAoUEiRUZUACIKJwouCnEidWFsAACgRCJ1JGxsRXF1YWwAAKBHImkibGRlAACgSSJlJXJ0aWNhbEJhcgAAoCQiYwByAADgNdip3GkAbABkAGUAO4DRANFAnWMAB0VhY2RmZ21vcHJzdHV2XgphCmgKcgp2CnoKgQqRCpYKqwqtCrsKyArNCuwhaWdSYWMAdQB0AGUAO4DTANNAAAFpeWwKcQpyAGMAO4DUANRAHmRiImxhYwBQYXIAAOA12BLdcgBhAHYAZQA7gNIA0kCAAWFlaQCHCooKjQpjAHIATGFnAGEAqWNjInJvbgCfY3AAZgAA4DXYRt3lI25DdXJseQABRFGeCqYKbyV1YmxlUXVvdGUAAKAcIHUib3RlAACgGCAAoFQqAAFjbLEKtQpyAADgNdiq3GEAcwBoADuA2ADYQGkAbAHACsUKZABlADuA1QDVQGUAcwAAoDcqbQBsADuA1gDWQGUAcgAAAUJQ0wrmCgABYXLXCtoKcgAAoD4gYQBjAAABZWvgCuIKAKDeI2UAdAAAoLQjYSVyZW50aGVzaXMAAKDcI4AEYWNmaGlsb3JzAP0KAwsFCwkLCwsMCxELIwtaC3IjdGlhbEQAAKACInkAH2RyAADgNdgT3WkApmOgY/Ujc01pbnVzsWAAAWlwFQsgC24AYwBhAHIAZQBwAGwAYQBuAOUACgVmAACgGSGAobsqZWlvACoLRQtJC+MiZWRlc4CheiJFU1QANAs5C0ALcSJ1YWwAAKCvKuwkYW50RXF1YWwAoHwiaSJsZGUAAKB+Im0AZQAAoDMgAAFkcE0LUQv1IWN0AKAPIm8jcnRpb24AYaA3ImwAAKAdIgABY2leC2ILcgAA4DXYq9yoYwACVWZvc2oLbwtzC3cLTwBUADuAIgAiQHIAAOA12BTdcABmAACgGiFjAHIAAOA12KzcAAZCRWFjZWZoaW9yc3WPC5MLlwupC7YL2AvbC90LhQyTDJoMowzhIXJyAKAQKUcAO4CuAK5AgAFjbnIAnQugC6ML9SF0ZVRhZwAAoOsncgB0oKAhbAAAoBYpgAFhZXkArwuyC7UL8iFvblhh5CFpbFZhIGR2oBwhZSJyc2UAAAFFVb8LzwsAAWxxwwvIC+UibWVudACgCyL1JGlsaWJyaXVtAKDLIXAmRXF1aWxpYnJpdW0AAKBvKXIAAKAcIW8AoWPnIWh0AARBQ0RGVFVWYewLCgwQDDIMNwxeDHwM9gIAAW5y8Av4C2clbGVCcmFja2V0AACg6SfyIW93AKGSIUJM/wsDDGEAcgAAoOUhZSRmdEFycm93AACgxCFlI2lsaW5nAACgCSNvAPUBFgwAAB4MYiVsZUJyYWNrZXQAAKDnJ24A1AEjDAAAKgxlJGVWZWN0b3IAAKBdKeUiY3RvckKgwiFhAHIAAKBVKWwib29yAACgCyMAAWVyOwxLDGUAAKGiIkFWQQxGDHIicm93AACgpiHlImN0b3IAoFspaSNhbmdsZQBCorMiVgwAAAAAWgxhAHIAAKDQKXEidWFsAACgtSJwAIABRFRWAGUMbAxzDO8kd25WZWN0b3IAoE8pZSRlVmVjdG9yAACgXCnlImN0b3JCoL4hYQByAACgVCnlImN0b3JCoMAhYQByAACgUykAAXB1iQyMDGYAAKAdIe4kZEltcGxpZXMAoHAp6SRnaHRhcnJvdwCg2yEAAWNongyhDHIAAKAbIQCgsSHsJGVEZWxheWVkAKD0KYAGSE9hY2ZoaW1vcXN0dQC/DMgMzAzQDOIM5gwKDQ0NFA0ZDU8NVA1YDQABQ2PDDMYMyCFjeSlkeQAoZEYiVGN5ACxkYyJ1dGUAWmEAorwqYWVpedgM2wzeDOEM8iFvbmBh5CFpbF5hcgBjAFxhIWRyAADgNdgW3e8hcnQAAkRMUlXvDPYM/QwEDW8kd25BcnJvdwAAoJMhZSRmdEFycm93AACgkCHpJGdodEFycm93AKCSIXAjQXJyb3cAAKCRIechbWGjY+EkbGxDaXJjbGUAoBgicABmAADgNdhK3XICHw0AAAAAIg10AACgGiLhIXJlgKGhJUlTVQAqDTINSg3uJXRlcnNlY3Rpb24AoJMidQAAAWJwNw1ADfMhZXRFoI8icSJ1YWwAAKCRIuUicnNldEWgkCJxInVhbAAAoJIibiJpb24AAKCUImMAcgAA4DXYrtxhAHIAAKDGIgACYmNtcF8Nag2ODZANc6DQImUAdABFoNAicSJ1YWwAAKCGIgABY2huDYkNZSJlZHMAgKF7IkVTVAB4DX0NhA1xInVhbAAAoLAq7CRhbnRFcXVhbACgfSJpImxkZQAAoH8iVABoAGEA9ADHCwCgESIAodEiZXOVDZ8NciJzZXQARaCDInEidWFsAACghyJlAHQAAKDRIoAFSFJTYWNmaGlvcnMAtQ27Db8NyA3ODdsN3w3+DRgOHQ4jDk8AUgBOADuA3gDeQMEhREUAoCIhAAFIY8MNxg1jAHkAC2R5ACZkAAFidcwNzQ0JYKRjgAFhZXkA1A3XDdoN8iFvbmRh5CFpbGJhImRyAADgNdgX3QABZWnjDe4N8gHoDQAA7Q3lImZvcmUAoDQiYQCYYwABY27yDfkNayNTcGFjZQAA4F8gCiDTInBhY2UAoAkg7CFkZYChPCJFRlQABw4MDhMOcSJ1YWwAAKBDInUkbGxFcXVhbAAAoEUiaSJsZGUAAKBIInAAZgAA4DXYS93pI3BsZURvdACg2yAAAWN0Jw4rDnIAAOA12K/c8iFva2Zh4QpFDlYOYA5qDgAAbg5yDgAAAAAAAAAAAAB5DnwOqA6zDgAADg8RDxYPGg8AAWNySA5ODnUAdABlADuA2gDaQHIAb6CfIeMhaXIAoEkpcgDjAVsOAABdDnkADmR2AGUAbGEAAWl5Yw5oDnIAYwA7gNsA20AjZGIibGFjAHBhcgAA4DXYGN1yAGEAdgBlADuA2QDZQOEhY3JqYQABZGl/Dp8OZQByAAABQlCFDpcOAAFhcokOiw5yAF9gYQBjAAABZWuRDpMOAKDfI2UAdAAAoLUjYSVyZW50aGVzaXMAAKDdI28AbgBQoMMi7CF1cwCgjiIAAWdwqw6uDm8AbgByYWYAAOA12EzdAARBREVUYWRwc78O0g7ZDuEOBQPqDvMOBw9yInJvdwDCoZEhyA4AAMwOYQByAACgEilvJHduQXJyb3cAAKDFIW8kd25BcnJvdwAAoJUhcSV1aWxpYnJpdW0AAKBuKWUAZQBBoKUiciJyb3cAAKClIW8AdwBuAGEAcgByAG8A9wAQA2UAcgAAAUxS+Q4AD2UkZnRBcnJvdwAAoJYh6SRnaHRBcnJvdwCglyFpAGyg0gNvAG4ApWPpIW5nbmFjAHIAAOA12LDcaSJsZGUAaGFtAGwAO4DcANxAgAREYmNkZWZvc3YALQ8xDzUPNw89D3IPdg97D4AP4SFzaACgqyJhAHIAAKDrKnkAEmThIXNobKCpIgCg5ioAAWVyQQ9DDwCgwSKAAWJ0eQBJD00Paw9hAHIAAKAWIGmgFiDjIWFsAAJCTFNUWA9cD18PZg9hAHIAAKAjIukhbmV8YGUkcGFyYXRvcgAAoFgnaSJsZGUAAKBAItQkaGluU3BhY2UAoAogcgAA4DXYGd1wAGYAAOA12E3dYwByAADgNdix3GQiYXNoAACgqiKAAmNlZm9zAI4PkQ+VD5kPng/pIXJjdGHkIWdlAKDAInIAAOA12BrdcABmAADgNdhO3WMAcgAA4DXYstwAAmZpb3OqD64Prw+0D3IAAOA12BvdnmNwAGYAAOA12E/dYwByAADgNdiz3IAEQUlVYWNmb3N1AMgPyw/OD9EP2A/gD+QP6Q/uD2MAeQAvZGMAeQAHZGMAeQAuZGMAdQB0AGUAO4DdAN1AAAFpedwP3w9yAGMAdmErZHIAAOA12BzdcABmAADgNdhQ3WMAcgAA4DXYtNxtAGwAeGEABEhhY2RlZm9z/g8BEAUQDRAQEB0QIBAkEGMAeQAWZGMidXRlAHlhAAFheQkQDBDyIW9ufWEXZG8AdAB7YfIBFRAAABwQbwBXAGkAZAB0AOgAVAhhAJZjcgAAoCghcABmAACgJCFjAHIAAOA12LXc4QtCEEkQTRAAAGcQbRByEAAAAAAAAAAAeRCKEJcQ8hD9EAAAGxEhETIROREAAD4RYwB1AHQAZQA7gOEA4UByImV2ZQADYYCiPiJFZGl1eQBWEFkQWxBgEGUQAOA+IjMDAKA/InIAYwA7gOIA4kB0AGUAO4C0ALRAMGRsAGkAZwA7gOYA5kByoGEgAOA12B7dcgBhAHYAZQA7gOAA4EAAAWVwfBCGEAABZnCAEIQQ8yF5bQCgNSHoAIMQaABhALFjAAFhcI0QWwAAAWNskRCTEHIAAWFnAACgPypkApwQAAAAALEQAKInImFkc3ajEKcQqRCuEG4AZAAAoFUqAKBcKmwib3BlAACgWCoAoFoqAKMgImVsbXJzersQvRDAEN0Q5RDtEACgpCllAACgICJzAGQAYaAhImEEzhDQENIQ1BDWENgQ2hDcEACgqCkAoKkpAKCqKQCgqykAoKwpAKCtKQCgrikAoK8pdAB2oB8iYgBkoL4iAKCdKQABcHTpEOwQaAAAoCIixWDhIXJyAKB8IwABZ3D1EPgQbwBuAAVhZgAA4DXYUt0Ao0giRWFlaW9wBxEJEQ0RDxESERQRAKBwKuMhaXIAoG8qAKBKImQAAKBLInMAJ2DyIW94ZaBIIvEADhFpAG4AZwA7gOUA5UCAAWN0eQAmESoRKxFyAADgNdi23CpgbQBwAGWgSCLxAPgBaQBsAGQAZQA7gOMA40BtAGwAO4DkAORAAAFjaUERRxFvAG4AaQBuAPQA6AFuAHQAAKARKgAITmFiY2RlZmlrbG5vcHJzdWQRaBGXEZ8RpxGrEdIR1hErEjASexKKEn0RThNbE3oTbwB0AACg7SoAAWNybBGJEWsAAAJjZXBzdBF4EX0RghHvIW5nAKBMInAjc2lsb24A9mNyImltZQAAoDUgaQBtAGWgPSJxAACgzSJ2AY0RkRFlAGUAAKC9ImUAZABnoAUjZQAAoAUjcgBrAHSgtSPiIXJrAKC2IwABb3mjEaYRbgDnAHcRMWTxIXVvAKAeIIACY21wcnQAtBG5Eb4RwRHFEeEhdXPloDUi5ABwInR5dgAAoLApcwDpAH0RbgBvAPUA6gCAAWFodwDLEcwRzhGyYwCgNiHlIWVuAKBsInIAAOA12B/dZwCAA2Nvc3R1dncA4xHyEQUSEhIhEiYSKRKAAWFpdQDpEesR7xHwAKMFcgBjAACg7yVwAACgwyKAAWRwdAD4EfwRABJvAHQAAKAAKuwhdXMAoAEqaSJtZXMAAKACKnECCxIAAAAADxLjIXVwAKAGKmEAcgAAoAUm8iNpYW5nbGUAAWR1GhIeEu8hd24AoL0lcAAAoLMlcCJsdXMAAKAEKmUA5QBCD+UAkg9hInJvdwAAoA0pgAFha28ANhJoEncSAAFjbjoSZRJrAIABbHN0AEESRxJNEm8jemVuZ2UAAKDrKXEAdQBhAHIA5QBcBPIjaWFuZ2xlgKG0JWRscgBYElwSYBLvIXduAKC+JeUhZnQAoMIlaSJnaHQAAKC4JWsAAKAjJLEBbRIAAHUSsgFxEgAAcxIAoJIlAKCRJTQAAKCTJWMAawAAoIglAAFlb38ShxJx4D0A5SD1IWl2AOBhIuUgdAAAoBAjAAJwdHd4kRKVEpsSnxJmAADgNdhT3XSgpSJvAG0AAKClIvQhaWUAoMgiAAZESFVWYmRobXB0dXayEsES0RLgEvcS+xIKExoTHxMjEygTNxMAAkxSbHK5ErsSvRK/EgCgVyUAoFQlAKBWJQCgUyUAolAlRFVkdckSyxLNEs8SAKBmJQCgaSUAoGQlAKBnJQACTFJsctgS2hLcEt4SAKBdJQCgWiUAoFwlAKBZJQCjUSVITFJobHLrEu0S7xLxEvMS9RIAoGwlAKBjJQCgYCUAoGslAKBiJQCgXyVvAHgAAKDJKQACTFJscgITBBMGEwgTAKBVJQCgUiUAoBAlAKAMJQCiACVEVWR1EhMUExYTGBMAoGUlAKBoJQCgLCUAoDQlaSJudXMAAKCfIuwhdXMAoJ4iaSJtZXMAAKCgIgACTFJsci8TMRMzEzUTAKBbJQCgWCUAoBglAKAUJQCjAiVITFJobHJCE0QTRhNIE0oTTBMAoGolAKBhJQCgXiUAoDwlAKAkJQCgHCUAAWV2UhNVE3YA5QD5AGIAYQByADuApgCmQAACY2Vpb2ITZhNqE24TcgAA4DXYt9xtAGkAAKBPIG0A5aA9IogRbAAAoVwAYmh0E3YTAKDFKfMhdWIAoMgnbAF+E4QTbABloCIgdAAAoCIgcAAAoU4iRWWJE4sTAKCuKvGgTyI8BeEMqRMAAN8TABQDFB8UAAAjFDQUAAAAAIUUAAAAAI0UAAAAANcU4xT3FPsUAACIFQAAlhWAAWNwcgCuE7ET1RP1IXRlB2GAoikiYWJjZHMAuxO/E8QTzhPSE24AZAAAoEQqciJjdXAAAKBJKgABYXXIE8sTcAAAoEsqcAAAoEcqbwB0AACgQCoA4CkiAP4AAWVv2RPcE3QAAKBBIO4ABAUAAmFlaXXlE+8T9RP4E/AB6hMAAO0TcwAAoE0qbwBuAA1hZABpAGwAO4DnAOdAcgBjAAlhcABzAHOgTCptAACgUCpvAHQAC2GAAWRtbgAIFA0UEhRpAGwAO4C4ALhAcCJ0eXYAAKCyKXQAAIGiADtlGBQZFKJAcgBkAG8A9ABiAXIAAOA12CDdgAFjZWkAKBQqFDIUeQBHZGMAawBtoBMn4SFyawCgEyfHY3IAAKPLJUVjZWZtcz8UQRRHFHcUfBSAFACgwykAocYCZWxGFEkUcQAAoFciZQBhAlAUAAAAAGAUciJyb3cAAAFsclYUWhTlIWZ0AKC6IWkiZ2h0AACguyGAAlJTYWNkAGgUaRRrFG8UcxSuYACgyCRzAHQAAKCbIukhcmMAoJoi4SFzaACgnSJuImludAAAoBAqaQBkAACg7yrjIWlyAKDCKfUhYnN1oGMmaQB0AACgYybsApMUmhS2FAAAwxRvAG4AZaA6APGgVCKrAG0CnxQAAAAAoxRhAHSgLABAYAChASJmbKcUqRTuABMNZQAAAW14rhSyFOUhbnQAoAEiZQDzANIB5wG6FAAAwBRkoEUibwB0AACgbSpuAPQAzAGAAWZyeQDIFMsUzhQA4DXYVN1vAOQA1wEAgakAO3MeAdMUcgAAoBchAAFhb9oU3hRyAHIAAKC1IXMAcwAAoBcnAAFjdeYU6hRyAADgNdi43AABYnDuFPIUZaDPKgCg0SploNAqAKDSKuQhb3QAoO8igANkZWxwcnZ3AAYVEBUbFSEVRBVlFYQV4SFycgABbHIMFQ4VAKA4KQCgNSlwAhYVAAAAABkVcgAAoN4iYwAAoN8i4SFycnCgtiEAoD0pgKIqImJjZG9zACsVMBU6FT4VQRVyImNhcAAAoEgqAAFhdTQVNxVwAACgRipwAACgSipvAHQAAKCNInIAAKBFKgDgKiIA/gACYWxydksVURVuFXMVcgByAG2gtyEAoDwpeQCAAWV2dwBYFWUVaRVxAHACXxUAAAAAYxVyAGUA4wAXFXUA4wAZFWUAZQAAoM4iZSJkZ2UAAKDPImUAbgA7gKQApEBlI2Fycm93AAABbHJ7FX8V5SFmdACgtiFpImdodAAAoLchZQDkAG0VAAFjaYsVkRVvAG4AaQBuAPQAkwFuAHQAAKAxImwiY3R5AACgLSOACUFIYWJjZGVmaGlqbG9yc3R1d3oAuBW7Fb8V1RXgFegV+RUKFhUWHxZUFlcWZRbFFtsW7xb7FgUXChdyAPIAtAJhAHIAAKBlKQACZ2xyc8YVyhXOFdAV5yFlcgCgICDlIXRoAKA4IfIA9QxoAHagECAAoKMiawHZFd4VYSJyb3cAAKAPKWEA4wBfAgABYXnkFecV8iFvbg9hNGQAoUYhYW/tFfQVAAFnciEC8RVyAACgyiF0InNlcQAAoHcqgAFnbG0A/xUCFgUWO4CwALBAdABhALRjcCJ0eXYAAKCxKQABaXIOFhIW8yFodACgfykA4DXYId1hAHIAAAFschsWHRYAoMMhAKDCIYACYWVnc3YAKBauAjYWOhY+Fm0AAKHEIm9zLhY0Fm4AZABzoMQi9SFpdACgZiZhIm1tYQDdY2kAbgAAoPIiAKH3AGlvQxZRFmQAZQAAgfcAO29KFksW90BuI3RpbWVzAACgxyJuAPgAUBZjAHkAUmRjAG8CXhYAAAAAYhZyAG4AAKAeI28AcAAAoA0jgAJscHR1dwBuFnEWdRaSFp4W7CFhciRgZgAA4DXYVd0AotkCZW1wc30WhBaJFo0WcQBkoFAibwB0AACgUSJpIm51cwAAoDgi7CF1cwCgFCLxInVhcmUAoKEiYgBsAGUAYgBhAHIAdwBlAGQAZwDlANcAbgCAAWFkaAClFqoWtBZyAHIAbwD3APUMbwB3AG4AYQByAHIAbwB3APMA8xVhI3Jwb29uAAABbHK8FsAWZQBmAPQAHBZpAGcAaAD0AB4WYgHJFs8WawBhAHIAbwD3AJILbwLUFgAAAADYFnIAbgAAoB8jbwBwAACgDCOAAWNvdADhFukW7BYAAXJ55RboFgDgNdi53FVkbAAAoPYp8iFvaxFhAAFkcvMW9xZvAHQAAKDxImkA5qC/JVsSAAFhaP8WAhdyAPIANQNhAPIA1wvhIm5nbGUAoKYpAAFjaQ4XEBd5AF9k5yJyYXJyAKD/JwAJRGFjZGVmZ2xtbm9wcXJzdHV4MRc4F0YXWxcyBF4XaRd5F40XrBe0F78X2RcVGCEYLRg1GEAYAAFEbzUXgRZvAPQA+BUAAWNzPBdCF3UAdABlADuA6QDpQPQhZXIAoG4qAAJhaW95TRdQF1YXWhfyIW9uG2FyAGOgViI7gOoA6kDsIW9uAKBVIk1kbwB0ABdhAAFEcmIXZhdvAHQAAKBSIgDgNdgi3XKhmipuF3QXYQB2AGUAO4DoAOhAZKCWKm8AdAAAoJgqgKGZKmlscwCAF4UXhxfuInRlcnMAoOcjAKATIWSglSpvAHQAAKCXKoABYXBzAJMXlheiF2MAcgATYXQAeQBzogUinxcAAAAAoRdlAHQAAKAFInAAMaADIDMBqRerFwCgBCAAoAUgAAFnc7AXsRdLYXAAAKACIAABZ3C4F7sXbwBuABlhZgAA4DXYVt2AAWFscwDFF8sXzxdyAHOg1SJsAACg4yl1AHMAAKBxKmkAAKG1A2x21RfYF28AbgC1Y/VjAAJjc3V24BfoF/0XEBgAAWlv5BdWF3IAYwAAoFYiaQLuFwAAAADwF+0ADQThIW50AAFnbPUX+Rd0AHIAAKCWKuUhc3MAoJUqgAFhZWkAAxgGGAoYbABzAD1gcwB0AACgXyJ2AESgYSJEAACgeCrwImFyc2wAoOUpAAFEYRkYHRhvAHQAAKBTInIAcgAAoHEpgAFjZGkAJxgqGO0XcgAAoC8hbwD0AIwCAAFhaDEYMhi3YzuA8ADwQAABbXI5GD0YbAA7gOsA60BvAACgrCCAAWNpcABGGEgYSxhsACFgcwD0ACwEAAFlb08YVxhjAHQAYQB0AGkAbwDuABoEbgBlAG4AdABpAGEAbADlADME4Ql1GAAAgRgAAIMYiBgAAAAAoRilGAAAqhgAALsYvhjRGAAA1xgnGWwAbABpAG4AZwBkAG8AdABzAGUA8QBlF3kARGRtImFsZQAAoEAmgAFpbHIAjRiRGJ0Y7CFpZwCgA/tpApcYAAAAAJoYZwAAoAD7aQBnAACgBPsA4DXYI93sIWlnAKAB++whaWcA4GYAagCAAWFsdACvGLIYthh0AACgbSZpAGcAAKAC+24AcwAAoLElbwBmAJJh8AHCGAAAxhhmAADgNdhX3QABYWvJGMwYbADsAGsEdqDUIgCg2SphI3J0aW50AACgDSoAAWFv2hgiGQABY3PeGB8ZsQPnGP0YBRkSGRUZAAAdGbID7xjyGPQY9xj5GAAA+xg7gL0AvUAAoFMhO4C8ALxAAKBVIQCgWSEAoFshswEBGQAAAxkAoFQhAKBWIbQCCxkOGQAAAAAQGTuAvgC+QACgVyEAoFwhNQAAoFghtgEZGQAAGxkAoFohAKBdITgAAKBeIWwAAKBEIHcAbgAAoCIjYwByAADgNdi73IAIRWFiY2RlZmdpamxub3JzdHYARhlKGVoZXhlmGWkZkhmWGZkZnRmgGa0ZxhnLGc8Z4BkjGmygZyIAoIwqgAFjbXAAUBlTGVgZ9SF0ZfVhbQBhAOSgswM6FgCghipyImV2ZQAfYQABaXliGWUZcgBjAB1hM2RvAHQAIWGAoWUibHFzAMYEcBl6GfGhZSLOBAAAdhlsAGEAbgD0AN8EgKF+KmNkbACBGYQZjBljAACgqSpvAHQAb6CAKmyggioAoIQqZeDbIgD+cwAAoJQqcgAA4DXYJN3noGsirATtIWVsAKA3IWMAeQBTZIChdyJFYWoApxmpGasZAKCSKgCgpSoAoKQqAAJFYWVztBm2Gb0ZwhkAoGkicABwoIoq8iFveACgiipxoIgq8aCIKrUZaQBtAACg5yJwAGYAAOA12FjdYQB2AOUAYwIAAWNp0xnWGXIAAKAKIW0AAKFzImVs3BneGQCgjioAoJAqAIM+ADtjZGxxco0E6xn0GfgZ/BkBGgABY2nvGfEZAKCnKnIAAKB6Km8AdAAAoNci0CFhcgCglSl1ImVzdAAAoHwqgAJhZGVscwAKGvQZFhrVBCAa8AEPGgAAFBpwAHIAbwD4AFkZcgAAoHgpcQAAAWxxxAQbGmwAZQBzAPMASRlpAO0A5AQAAWVuJxouGnIjdG5lcXEAAOBpIgD+xQAsGgAFQWFiY2Vma29zeUAaQxpmGmoabRqDGocalhrCGtMacgDyAMwCAAJpbG1yShpOGlAaVBpyAHMA8ABxD2YAvWBpAGwA9AASBQABZHJYGlsaYwB5AEpkAKGUIWN3YBpkGmkAcgAAoEgpAKCtIWEAcgAAoA8h6SFyYyVhgAFhbHIAcxp7Gn8a8iF0c3WgZSZpAHQAAKBlJuwhaXAAoCYg4yFvbgCguSJyAADgNdgl3XMAAAFld4wakRphInJvdwAAoCUpYSJyb3cAAKAmKYACYW1vcHIAnxqjGqcauhq+GnIAcgAAoP8h9CFodACgOyJrAAABbHKsGrMaZSRmdGFycm93AACgqSHpJGdodGFycm93AKCqIWYAAOA12Fnd4iFhcgCgFSCAAWNsdADIGswa0BpyAADgNdi93GEAcwDoAGka8iFvaydhAAFicNca2xr1IWxsAKBDIOghZW4AoBAg4Qr2GgAA/RoAAAgbExsaGwAAIRs7GwAAAAA+G2IbmRuVG6sbAACyG80b0htjAHUAdABlADuA7QDtQAChYyBpeQEbBhtyAGMAO4DuAO5AOGQAAWN4CxsNG3kANWRjAGwAO4ChAKFAAAFmcssCFhsA4DXYJt1yAGEAdgBlADuA7ADsQIChSCFpbm8AJxsyGzYbAAFpbisbLxtuAHQAAKAMKnQAAKAtIuYhaW4AoNwpdABhAACgKSHsIWlnM2GAAWFvcABDG1sbXhuAAWNndABJG0sbWRtyACthgAFlbHAAcQVRG1UbaQBuAOUAyAVhAHIA9AByBWgAMWFmAACgtyJlAGQAtWEAoggiY2ZvdGkbbRt1G3kb4SFyZQCgBSFpAG4AdKAeImkAZQAAoN0pZABvAPQAWxsAoisiY2VscIEbhRuPG5QbYQBsAACguiIAAWdyiRuNG2UAcgDzACMQ4wCCG2EicmhrAACgFyryIW9kAKA8KgACY2dwdJ8boRukG6gbeQBRZG8AbgAvYWYAAOA12FrdYQC5Y3UAZQBzAHQAO4C/AL9AAAFjabUbuRtyAADgNdi+3G4AAKIIIkVkc3bCG8QbyBvQAwCg+SJvAHQAAKD1Inag9CIAoPMiaaBiIOwhZGUpYesB1hsAANkbYwB5AFZkbAA7gO8A70AAA2NmbW9zdeYb7hvyG/Ub+hsFHAABaXnqG+0bcgBjADVhOWRyAADgNdgn3eEhdGg3YnAAZgAA4DXYW93jAf8bAAADHHIAAOA12L/c8iFjeVhk6yFjeVRkAARhY2ZnaGpvcxUcGhwiHCYcKhwtHDAcNRzwIXBhdqC6A/BjAAFleR4cIRzkIWlsN2E6ZHIAAOA12CjdciJlZW4AOGFjAHkARWRjAHkAXGRwAGYAAOA12FzdYwByAADgNdjA3IALQUJFSGFiY2RlZmdoamxtbm9wcnN0dXYAXhxtHHEcdRx5HN8cBx0dHTwd3B3tHfEdAR4EHh0eLB5FHrwewx7hHgkfPR9LH4ABYXJ0AGQcZxxpHHIA8gBvB/IAxQLhIWlsAKAbKeEhcnIAoA4pZ6BmIgCgiyphAHIAAKBiKWMJjRwAAJAcAACVHAAAAAAAAAAAAACZHJwcAACmHKgcrRwAANIc9SF0ZTph7SJwdHl2AKC0KXIAYQDuAFoG4iFkYbtjZwAAoegnZGyhHKMcAKCRKeUAiwYAoIUqdQBvADuAqwCrQHIAgKOQIWJmaGxwc3QAuhy/HMIcxBzHHMoczhxmoOQhcwAAoB8pcwAAoB0p6wCyGnAAAKCrIWwAAKA5KWkAbQAAoHMpbAAAoKIhAKGrKmFl1hzaHGkAbAAAoBkpc6CtKgDgrSoA/oABYWJyAOUc6RztHHIAcgAAoAwpcgBrAACgcicAAWFr8Rz4HGMAAAFla/Yc9xx7YFtgAAFlc/wc/hwAoIspbAAAAWR1Ax0FHQCgjykAoI0pAAJhZXV5Dh0RHRodHB3yIW9uPmEAAWRpFR0YHWkAbAA8YewAowbiAPccO2QAAmNxcnMkHScdLB05HWEAAKA2KXUAbwDyoBwgqhEAAWR1MB00HeghYXIAoGcpcyJoYXIAAKBLKWgAAKCyIQCiZCJmZ3FzRB1FB5Qdnh10AIACYWhscnQATh1WHWUdbB2NHXIicm93AHSgkCFhAOkAzxxhI3Jwb29uAAABZHVeHWId7yF3bgCgvSFwAACgvCHlJGZ0YXJyb3dzAKDHIWkiZ2h0AIABYWhzAHUdex2DHXIicm93APOglCGdBmEAcgBwAG8AbwBuAPMAzgtxAHUAaQBnAGEAcgByAG8A9wBlGugkcmVldGltZXMAoMsi8aFkIk0HAACaHWwAYQBuAPQAXgcAon0qY2Rnc6YdqR2xHbcdYwAAoKgqbwB0AG+gfypyoIEqAKCDKmXg2iIA/nMAAKCTKoACYWRlZ3MAwB3GHcod1h3ZHXAAcAByAG8A+ACmHG8AdAAAoNYicQAAAWdxzx3SHXQA8gBGB2cAdADyAHQcdADyAFMHaQDtAGMHgAFpbHIA4h3mHeod8yFodACgfClvAG8A8gDKBgDgNdgp3UWgdiIAoJEqYQH1Hf4dcgAAAWR1YB35HWygvCEAoGopbABrAACghCVjAHkAWWQAomoiYWNodAweDx4VHhkecgDyAGsdbwByAG4AZQDyAGAW4SFyZACgaylyAGkAAKD6JQABaW8hHiQe5CFvdEBh9SFzdGGgsCPjIWhlAKCwIwACRWFlczMeNR48HkEeAKBoInAAcKCJKvIhb3gAoIkqcaCHKvGghyo0HmkAbQAAoOYiAARhYm5vcHR3elIeXB5fHoUelh6mHqsetB4AAW5yVh5ZHmcAAKDsJ3IAAKD9IXIA6wCwBmcAgAFsbXIAZh52Hnse5SFmdAABYXKIB2weaQBnAGgAdABhAHIAcgBvAPcAkwfhInBzdG8AoPwnaQBnAGgAdABhAHIAcgBvAPcAmgdwI2Fycm93AAABbHKNHpEeZQBmAPQAxhxpImdodAAAoKwhgAFhZmwAnB6fHqIecgAAoIUpAOA12F3ddQBzAACgLSppIm1lcwAAoDQqYQGvHrMecwB0AACgFyLhAIoOZaHKJbkeRhLuIWdlAKDKJWEAcgBsoCgAdAAAoJMpgAJhY2htdADMHs8e1R7bHt0ecgDyAJ0GbwByAG4AZQDyANYWYQByAGSgyyEAoG0pAKAOIHIAaQAAoL8iAANhY2hpcXTrHu8e1QfzHv0eBh/xIXVvAKA5IHIAAOA12MHcbQDloXIi+h4AAPweAKCNKgCgjyoAAWJ19xwBH28AcqAYIACgGiDyIW9rQmEAhDwAO2NkaGlscXJCBhcfxh0gHyQfKB8sHzEfAAFjaRsfHR8AoKYqcgAAoHkqcgBlAOUAkx3tIWVzAKDJIuEhcnIAoHYpdSJlc3QAAKB7KgABUGk1HzkfYQByAACglillocMlAgdfEnIAAAFkdUIfRx9zImhhcgAAoEop6CFhcgCgZikAAWVuTx9WH3IjdG5lcXEAAOBoIgD+xQBUHwAHRGFjZGVmaGlsbm9wc3VuH3Ifoh+rH68ftx+7H74f5h/uH/MfBwj/HwsgxCFvdACgOiIAAmNscHJ5H30fiR+eH3IAO4CvAK9AAAFldIEfgx8AoEImZaAgJ3MAZQAAoCAnc6CmIXQAbwCAoaYhZGx1AJQfmB+cH28AdwDuAHkDZQBmAPQA6gbwAOkO6yFlcgCgriUAAW95ph+qH+0hbWEAoCkqPGThIXNoAKAUIOElc3VyZWRhbmdsZQCgISJyAADgNdgq3W8AAKAnIYABY2RuAMQfyR/bH3IAbwA7gLUAtUBhoiMi0B8AANMf1x9zAPQAKxFpAHIAAKDwKm8AdAA7gLcAt0B1AHMA4qESIh4TAADjH3WgOCIAoCoqYwHqH+0fcAAAoNsq8gB+GnAAbAB1APMACAgAAWRw9x/7H+UhbHMAoKciZgAA4DXYXt0AAWN0AyAHIHIAAOA12MLc8CFvcwCgPiJsobwDECAVIPQiaW1hcACguCJhAPAAEyAADEdMUlZhYmNkZWZnaGlqbG1vcHJzdHV2dzwgRyBmIG0geSCqILgg2iDeIBEhFSEyIUMhTSFQIZwhnyHSIQAiIyKLIrEivyIUIwABZ3RAIEMgAODZIjgD9uBrItIgBwmAAWVsdABNIF8gYiBmAHQAAAFhclMgWCByInJvdwAAoM0h6SRnaHRhcnJvdwCgziEA4NgiOAP24Goi0iBfCekkZ2h0YXJyb3cAoM8hAAFEZHEgdSDhIXNoAKCvIuEhc2gAoK4igAJiY25wdACCIIYgiSCNIKIgbABhAACgByL1IXRlRGFnAADgICLSIACiSSJFaW9wlSCYIJwgniAA4HAqOANkAADgSyI4A3MASWFyAG8A+AAyCnUAcgBhoG4mbADzoG4mmwjzAa8gAACzIHAAO4CgAKBAbQBwAOXgTiI4AyoJgAJhZW91eQDBIMogzSDWINkg8AHGIAAAyCAAoEMqbwBuAEhh5CFpbEZhbgBnAGSgRyJvAHQAAOBtKjgDcAAAoEIqPWThIXNoAKATIACjYCJBYWRxc3jpIO0g+SD+IAIhDCFyAHIAAKDXIXIAAAFocvIg9SBrAACgJClvoJch9wAGD28AdAAA4FAiOAN1AGkA9gC7CAABZWkGIQohYQByAACgKCntAN8I6SFzdPOgBCLlCHIAAOA12CvdAAJFZXN0/wgcISshLiHxoXEiIiEAABMJ8aFxIgAJAAAnIWwAYQBuAPQAEwlpAO0AGQlyoG8iAKBvIoABQWFwADghOyE/IXIA8gBeIHIAcgAAoK4hYQByAACg8ipzogsiSiEAAAAAxwtkoPwiAKD6ImMAeQBaZIADQUVhZGVzdABcIV8hYiFmIWkhkyGWIXIA8gBXIADgZiI4A3IAcgAAoJohcgAAoCUggKFwImZxcwBwIYQhjiF0AAABYXJ1IXohcgByAG8A9wBlIWkAZwBoAHQAYQByAHIAbwD3AD4h8aFwImAhAACKIWwAYQBuAPQAZwlz4H0qOAMAoG4iaQDtAG0JcqBuImkA5aDqIkUJaQDkADoKAAFwdKMhpyFmAADgNdhf3YCBrAA7aW4AriGvIcchrEBuAIChCSJFZHYAtyG6Ib8hAOD5IjgDbwB0AADg9SI4A+EB1gjEIcYhAKD3IgCg9iJpAHagDCLhAagJzyHRIQCg/iIAoP0igAFhb3IA2CHsIfEhcgCAoSYiYXN0AOAh5SHpIWwAbABlAOwAywhsAADg/SrlIADgAiI4A2wiaW50AACgFCrjoYAi9yEAAPohdQDlAJsJY+CvKjgDZaCAIvEAkwkAAkFhaXQHIgoiFyIeInIA8gBsIHIAcgAAoZshY3cRIhQiAOAzKTgDAOCdITgDZyRodGFycm93AACgmyFyAGkA5aDrIr4JgANjaGltcHF1AC8iPCJHIpwhTSJQIloigKGBImNlcgA2Iv0JOSJ1AOUABgoA4DXYw9zvIXJ0bQKdIQAAAABEImEAcgDhAOEhbQBloEEi8aBEIiYKYQDyAMsIcwB1AAABYnBWIlgi5QDUCeUA3wmAAWJjcABgInMieCKAoYQiRWVzAGci7glqIgDgxSo4A2UAdABl4IIi0iBxAPGgiCJoImMAZaCBIvEA/gmAoYUiRWVzAH8iFgqCIgDgxio4A2UAdABl4IMi0iBxAPGgiSKAIgACZ2lscpIilCKaIpwi7AAMCWwAZABlADuA8QDxQOcAWwlpI2FuZ2xlAAABbHKkIqoi5SFmdGWg6iLxAEUJaSJnaHQAZaDrIvEAvgltoL0DAKEjAGVzuCK8InIAbwAAoBYhcAAAoAcggARESGFkZ2lscnMAziLSItYi2iLeIugi7SICIw8j4SFzaACgrSLhIXJyAKAEKXAAAOBNItIg4SFzaACgrCIAAWV04iLlIgDgZSLSIADgPgDSIG4iZmluAACg3imAAUFldADzIvci+iJyAHIAAKACKQDgZCLSIHLgPADSIGkAZQAA4LQi0iAAAUF0BiMKI3IAcgAAoAMp8iFpZQDgtSLSIGkAbQAA4Dwi0iCAAUFhbgAaIx4jKiNyAHIAAKDWIXIAAAFociMjJiNrAACgIylvoJYh9wD/DuUhYXIAoCcpUxJqFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVCMAAF4jaSN/I4IjjSOeI8AUAAAAAKYjwCMAANoj3yMAAO8jHiQvJD8kRCQAAWNzVyNsFHUAdABlADuA8wDzQAABaXlhI2cjcgBjoJoiO4D0APRAPmSAAmFiaW9zAHEjdCN3I3EBeiNzAOgAdhTsIWFjUWF2AACgOCrvIWxkAKC8KewhaWdTYQABY3KFI4kjaQByAACgvykA4DXYLN1vA5QjAAAAAJYjAACcI24A22JhAHYAZQA7gPIA8kAAoMEpAAFibaEjjAphAHIAAKC1KQACYWNpdKwjryO6I70jcgDyAFkUAAFpcrMjtiNyAACgvinvIXNzAKC7KW4A5QDZCgCgwCmAAWFlaQDFI8gjyyNjAHIATWFnAGEAyWOAAWNkbgDRI9Qj1iPyIW9uv2MAoLYpdQDzAHgBcABmAADgNdhg3YABYWVsAOQj5yPrI3IAAKC3KXIAcAAAoLkpdQDzAHwBAKMoImFkaW9zdvkj/CMPJBMkFiQbJHIA8gBeFIChXSplZm0AAyQJJAwkcgBvoDQhZgAAoDQhO4CqAKpAO4C6ALpA5yFvZgCgtiJyAACgVipsIm9wZQAAoFcqAKBbKoABY2xvACMkJSQrJPIACCRhAHMAaAA7gPgA+EBsAACgmCJpAGwBMyQ4JGQAZQA7gPUA9UBlAHMAYaCXInMAAKA2Km0AbAA7gPYA9kDiIWFyAKA9I+EKXiQAAHokAAB8JJQkAACYJKkkAAAAALUkEQsAAPAkAAAAAAQleiUAAIMlcgCAoSUiYXN0AGUkbyQBCwCBtgA7bGokayS2QGwAZQDsABgDaQJ1JAAAAAB4JG0AAKDzKgCg/Sp5AD9kcgCAAmNpbXB0AIUkiCSLJJkSjyRuAHQAJWBvAGQALmBpAGwAAKAwIOUhbmsAoDEgcgAA4DXYLd2AAWltbwCdJKAkpCR2oMYD1WNtAGEA9AD+B24AZQAAoA4m9KHAA64kAAC0JGMjaGZvcmsAAKDUItZjAAFhdbgkxCRuAAABY2u9JMIkawBooA8hAKAOIfYAaRpzAACkKwBhYmNkZW1zdNMkIRPXJNsk4STjJOck6yTjIWlyAKAjKmkAcgAAoCIqAAFvdYsW3yQAoCUqAKByKm4AO4CxALFAaQBtAACgJip3AG8AAKAnKoABaXB1APUk+iT+JO4idGludACgFSpmAADgNdhh3W4AZAA7gKMAo0CApHoiRWFjZWlub3N1ABMlFSUYJRslTCVRJVklSSV1JQCgsypwAACgtyp1AOUAPwtjoK8qgKJ6ImFjZW5zACclLSU0JTYlSSVwAHAAcgBvAPgAFyV1AHIAbAB5AGUA8QA/C/EAOAuAAWFlcwA8JUElRSXwInByb3gAoLkqcQBxAACgtSppAG0AAKDoImkA7QBEC20AZQDzoDIgIguAAUVhcwBDJVclRSXwAEAlgAFkZnAATwtfJXElgAFhbHMAZSVpJW0l7CFhcgCgLiPpIW5lAKASI/UhcmYAoBMjdKAdIu8AWQvyIWVsAKCwIgABY2l9JYElcgAA4DXYxdzIY24iY3NwAACgCCAAA2Zpb3BzdZElKxuVJZolnyWkJXIAAOA12C7dcABmAADgNdhi3XIiaW1lAACgVyBjAHIAAOA12MbcgAFhZW8AqiW6JcAldAAAAWVpryW2JXIAbgBpAG8AbgDzABkFbgB0AACgFipzAHQAZaA/APEACRj0AG0LgApBQkhhYmNkZWZoaWxtbm9wcnN0dXgA4yXyJfYl+iVpJpAmpia9JtUm5ib4JlonaCdxJ3UnnietJ7EnyCfiJ+cngAFhcnQA6SXsJe4lcgDyAJkM8gD6AuEhaWwAoBwpYQByAPIA3BVhAHIAAKBkKYADY2RlbnFydAAGJhAmEyYYJiYmKyZaJgABZXUKJg0mAOA9IjEDdABlAFVhaQDjACAN7SJwdHl2AKCzKWcAgKHpJ2RlbAAgJiImJCYAoJIpAKClKeUA9wt1AG8AO4C7ALtAcgAApZIhYWJjZmhscHN0dz0mQCZFJkcmSiZMJk4mUSZVJlgmcAAAoHUpZqDlIXMAAKAgKQCgMylzAACgHinrALka8ACVHmwAAKBFKWkAbQAAoHQpbAAAoKMhAKCdIQABYWleJmImaQBsAACgGilvAG6gNiJhAGwA8wB2C4ABYWJyAG8mciZ2JnIA8gAvEnIAawAAoHMnAAFha3omgSZjAAABZWt/JoAmfWBdYAABZXOFJocmAKCMKWwAAAFkdYwmjiYAoI4pAKCQKQACYWV1eZcmmiajJqUm8iFvbllhAAFkaZ4moSZpAGwAV2HsAA8M4gCAJkBkAAJjbHFzrSawJrUmuiZhAACgNylkImhhcgAAoGkpdQBvAPKgHSCjAWgAAKCzIYABYWNnAMMm0iaUC2wAgKEcIWlwcwDLJs4migxuAOUAoAxhAHIA9ADaC3QAAKCtJYABaWxyANsm3ybjJvMhaHQAoH0pbwBvAPIANgwA4DXYL90AAWFv6ib1JnIAAAFkde8m8SYAoMEhbKDAIQCgbCl2oMED8WOAAWducwD+Jk4nUCdoAHQAAANhaGxyc3QKJxInISc1Jz0nRydyInJvdwB0oJIhYQDpAFYmYSNycG9vbgAAAWR1GiceJ28AdwDuAPAmcAAAoMAh5SFmdAABYWgnJy0ncgByAG8AdwDzAAkMYQByAHAAbwBvAG4A8wATBGklZ2h0YXJyb3dzAACgySFxAHUAaQBnAGEAcgByAG8A9wBZJugkcmVldGltZXMAoMwiZwDaYmkAbgBnAGQAbwB0AHMAZQDxABwYgAFhaG0AYCdjJ2YncgDyAAkMYQDyABMEAKAPIG8idXN0AGGgsSPjIWhlAKCxI+0haWQAoO4qAAJhYnB0fCeGJ4knmScAAW5ygCeDJ2cAAKDtJ3IAAKD+IXIA6wAcDIABYWZsAI8nkieVJ3IAAKCGKQDgNdhj3XUAcwAAoC4qaSJtZXMAAKA1KgABYXCiJ6gncgBnoCkAdAAAoJQp7yJsaW50AKASKmEAcgDyADwnAAJhY2hxuCe8J6EMwCfxIXVvAKA6IHIAAOA12MfcAAFidYAmxCdvAPKgGSCoAYABaGlyAM4n0ifWJ3IAZQDlAE0n7SFlcwCgyiJpAIChuSVlZmwAXAxjEt4n9CFyaQCgzinsInVoYXIAoGgpAKAeIWENBSgJKA0oSyhVKIYoAACLKLAoAAAAAOMo5ygAABApJCkxKW0pcSmHKaYpAACYKgAAAACxKmMidXRlAFthcQB1AO8ABR+ApHsiRWFjZWlucHN5ABwoHignKCooLygyKEEoRihJKACgtCrwASMoAAAlKACguCpvAG4AYWF1AOUAgw1koLAqaQBsAF9hcgBjAF1hgAFFYXMAOCg6KD0oAKC2KnAAAKC6KmkAbQAAoOki7yJsaW50AKATKmkA7QCIDUFkbwB0AGKixSKRFgAAAABTKACgZiqAA0FhY21zdHgAYChkKG8ocyh1KHkogihyAHIAAKDYIXIAAAFocmkoayjrAJAab6CYIfcAzAd0ADuApwCnQGkAO2D3IWFyAKApKW0AAAFpbn4ozQBuAHUA8wDOAHQAAKA2J3IA7+A12DDdIxkAAmFjb3mRKJUonSisKHIAcAAAoG8mAAFoeZkonChjAHkASWRIZHIAdABtAqUoAAAAAKgoaQDkAFsPYQByAGEA7ABsJDuArQCtQAABZ22zKLsobQBhAAChwwNmdroouijCY4CjPCJkZWdsbnByAMgozCjPKNMo1yjaKN4obwB0AACgairxoEMiCw5FoJ4qAKCgKkWgnSoAoJ8qZQAAoEYi7CF1cwCgJCrhIXJyAKByKWEAcgDyAPwMAAJhZWl07Sj8KAEpCCkAAWxz8Sj4KGwAcwBlAHQAbQDpAH8oaABwAACgMyrwImFyc2wAoOQpAAFkbFoPBSllAACgIyNloKoqc6CsKgDgrCoA/oABZmxwABUpGCkfKfQhY3lMZGKgLwBhoMQpcgAAoD8jZgAA4DXYZN1hAAABZHIoKRcDZQBzAHWgYCZpAHQAAKBgJoABY3N1ADYpRilhKQABYXU6KUApcABzoJMiAOCTIgD+cABzoJQiAOCUIgD+dQAAAWJwSylWKQChjyJlcz4NUCllAHQAZaCPIvEAPw0AoZAiZXNIDVspZQB0AGWgkCLxAEkNAKGhJWFmZilbBHIAZQFrKVwEAKChJWEAcgDyAAMNAAJjZW10dyl7KX8pgilyAADgNdjI3HQAbQDuAM4AaQDsAAYpYQByAOYAVw0AAWFyiimOKXIA5qAGJhESAAFhbpIpoylpImdodAAAAWVwmSmgKXAAcwBpAGwAbwDuANkXaADpAKAkcwCvYIACYmNtbnAArin8KY4NJSooKgCkgiJFZGVtbnByc7wpvinCKcgpzCnUKdgp3CkAoMUqbwB0AACgvSpkoIYibwB0AACgwyr1IWx0AKDBKgABRWXQKdIpAKDLKgCgiiLsIXVzAKC/KuEhcnIAoHkpgAFlaXUA4inxKfQpdAAAoYIiZW7oKewpcQDxoIYivSllAHEA8aCKItEpbQAAoMcqAAFicPgp+ikAoNUqAKDTKmMAgKJ7ImFjZW5zAAcqDSoUKhYqRihwAHAAcgBvAPgAIyh1AHIAbAB5AGUA8QCDDfEAfA2AAWFlcwAcKiIqPShwAHAAcgBvAPgAPChxAPEAOShnAACgaiYApoMiMTIzRWRlaGxtbnBzPCo/KkIqRSpHKlIqWCpjKmcqaypzKncqO4C5ALlAO4CyALJAO4CzALNAAKDGKgABb3NLKk4qdAAAoL4qdQBiAACg2CpkoIcibwB0AACgxCpzAAABb3VdKmAqbAAAoMknYgAAoNcq4SFycgCgeyn1IWx0AKDCKgABRWVvKnEqAKDMKgCgiyLsIXVzAKDAKoABZWl1AH0qjCqPKnQAAKGDImVugyqHKnEA8aCHIkYqZQBxAPGgiyJwKm0AAKDIKgABYnCTKpUqAKDUKgCg1iqAAUFhbgCdKqEqrCpyAHIAAKDZIXIAAAFocqYqqCrrAJUab6CZIfcAxQf3IWFyAKAqKWwAaQBnADuA3wDfQOELzyrZKtwq6SrsKvEqAAD1KjQrAAAAAAAAAAAAAEwrbCsAAHErvSsAAAAAAADRK3IC1CoAAAAA2CrnIWV0AKAWI8RjcgDrAOUKgAFhZXkA4SrkKucq8iFvbmVh5CFpbGNhQmRvAPQAIg5sInJlYwAAoBUjcgAA4DXYMd0AAmVpa2/7KhIrKCsuK/IBACsAAAkrZQAAATRm6g0EK28AcgDlAOsNYQBzorgDECsAAAAAEit5AG0A0WMAAWNuFislK2sAAAFhcxsrIStwAHAAcgBvAPgAFw5pAG0AAKA8InMA8AD9DQABYXMsKyEr8AAXDnIAbgA7gP4A/kDsATgrOyswG2QA5QBnAmUAcwCAgdcAO2JkAEMrRCtJK9dAYaCgInIAAKAxKgCgMCqAAWVwcwBRK1MraSvhAAkh4qKkIlsrXysAAAAAYytvAHQAAKA2I2kAcgAAoPEqb+A12GXdcgBrAACg2irhAHgociJpbWUAAKA0IIABYWlwAHYreSu3K2QA5QC+DYADYWRlbXBzdACFK6MrmiunK6wrsCuzK24iZ2xlAACitSVkbHFykCuUK5ornCvvIXduAKC/JeUhZnRloMMl8QACBwCgXCJpImdodABloLkl8QBdDG8AdAAAoOwlaSJudXMAAKA6KuwhdXMAoDkqYgAAoM0p6SFtZQCgOyrlInppdW0AoOIjgAFjaHQAwivKK80rAAFyecYrySsA4DXYydxGZGMAeQBbZPIhb2tnYQABaW/UK9creAD0ANERaCJlYWQAAAFsct4r5ytlAGYAdABhAHIAcgBvAPcAXQbpJGdodGFycm93AKCgIQAJQUhhYmNkZmdobG1vcHJzdHV3CiwNLBEsHSwnLDEsQCxLLFIsYix6LIQsjyzLLOgs7Sz/LAotcgDyAAkDYQByAACgYykAAWNyFSwbLHUAdABlADuA+gD6QPIACQ1yAOMBIywAACUseQBeZHYAZQBtYQABaXkrLDAscgBjADuA+wD7QENkgAFhYmgANyw6LD0scgDyANEO7CFhY3FhYQDyAOAOAAFpckQsSCzzIWh0AKB+KQDgNdgy3XIAYQB2AGUAO4D5APlAYQFWLF8scgAAAWxyWixcLACgvyEAoL4hbABrAACggCUAAWN0Zix2LG8CbCwAAAAAcyxyAG4AZaAcI3IAAKAcI28AcAAAoA8jcgBpAACg+CUAAWFsfiyBLGMAcgBrYTuAqACoQAABZ3CILIssbwBuAHNhZgAA4DXYZt0AA2FkaGxzdZksniynLLgsuyzFLHIAcgBvAPcACQ1vAHcAbgBhAHIAcgBvAPcA2A5hI3Jwb29uAAABbHKvLLMsZQBmAPQAWyxpAGcAaAD0AF0sdQDzAKYOaQAAocUDaGzBLMIs0mNvAG4AxWPwI2Fycm93cwCgyCGAAWNpdADRLOEs5CxvAtcsAAAAAN4scgBuAGWgHSNyAACgHSNvAHAAAKAOI24AZwBvYXIAaQAAoPklYwByAADgNdjK3IABZGlyAPMs9yz6LG8AdAAAoPAi7CFkZWlhaQBmoLUlAKC0JQABYW0DLQYtcgDyAMosbAA7gPwA/EDhIm5nbGUAoKcpgAdBQkRhY2RlZmxub3Byc3oAJy0qLTAtNC2bLZ0toS2/LcMtxy3TLdgt3C3gLfwtcgDyABADYQByAHag6CoAoOkqYQBzAOgA/gIAAW5yOC08LechcnQAoJwpgANla25wcnN0AJkpSC1NLVQtXi1iLYItYQBwAHAA4QAaHG8AdABoAGkAbgDnAKEXgAFoaXIAoSmzJFotbwBwAPQAdCVooJUh7wD4JgABaXVmLWotZwBtAOEAuygAAWJwbi14LXMjZXRuZXEAceCKIgD+AODLKgD+cyNldG5lcQBx4IsiAP4A4MwqAP4AAWhyhi2KLWUAdADhABIraSNhbmdsZQAAAWxyki2WLeUhZnQAoLIiaSJnaHQAAKCzInkAMmThIXNoAKCiIoABZWxyAKcttC24LWKiKCKuLQAAAACyLWEAcgAAoLsicQAAoFoi7CFpcACg7iIAAWJ0vC1eD2EA8gBfD3IAAOA12DPddAByAOkAlS1zAHUAAAFicM0t0C0A4IIi0iAA4IMi0iBwAGYAAOA12GfdcgBvAPAAWQt0AHIA6QCaLQABY3XkLegtcgAA4DXYy9wAAWJw7C30LW4AAAFFZXUt8S0A4IoiAP5uAAABRWV/LfktAOCLIgD+6SJnemFnAKCaKYADY2Vmb3BycwANLhAuJS4pLiMuLi40LukhcmN1YQABZGkULiEuAAFiZxguHC5hAHIAAKBfKmUAcaAnIgCgWSLlIXJwAKAYIXIAAOA12DTdcABmAADgNdho3WWgQCJhAHQA6ABqD2MAcgAA4DXYzNzjCuQRUC4AAFQuAABYLmIuAAAAAGMubS5wLnQuAAAAAIguki4AAJouJxIqEnQAcgDpAB0ScgAA4DXYNd0AAUFhWy5eLnIA8gDnAnIA8gCTB75jAAFBYWYuaS5yAPIA4AJyAPIAjAdhAPAAeh5pAHMAAKD7IoABZHB0APgReS6DLgABZmx9LoAuAOA12GnddQDzAP8RaQBtAOUABBIAAUFhiy6OLnIA8gDuAnIA8gCaBwABY3GVLgoScgAA4DXYzdwAAXB0nS6hLmwAdQDzACUScgDpACASAARhY2VmaW9zdbEuvC7ELsguzC7PLtQu2S5jAAABdXm2LrsudABlADuA/QD9QE9kAAFpecAuwy5yAGMAd2FLZG4AO4ClAKVAcgAA4DXYNt1jAHkAV2RwAGYAAOA12GrdYwByAADgNdjO3AABY23dLt8ueQBOZGwAO4D/AP9AAAVhY2RlZmhpb3N38y73Lv8uAi8MLxAvEy8YLx0vIi9jInV0ZQB6YQABYXn7Lv4u8iFvbn5hN2RvAHQAfGEAAWV0Bi8KL3QAcgDmAB8QYQC2Y3IAAOA12DfdYwB5ADZk5yJyYXJyAKDdIXAAZgAA4DXYa91jAHIAAOA12M/cAAFqbiYvKC8AoA0gagAAoAwg"),xmlDecodeTree=decodeBase64("AAJhZ2xxBwARABMAFQBtAg0AAAAAAA8AcAAmYG8AcwAnYHQAPmB0ADxg9SFvdCJg");var BinTrieFlags$1;(function(o){o[o.VALUE_LENGTH=49152]="VALUE_LENGTH",o[o.FLAG13=8192]="FLAG13",o[o.BRANCH_LENGTH=8064]="BRANCH_LENGTH",o[o.JUMP_TABLE=127]="JUMP_TABLE"})(BinTrieFlags$1||(BinTrieFlags$1={}));var CharCodes$2;(function(o){o[o.NUM=35]="NUM",o[o.SEMI=59]="SEMI",o[o.EQUALS=61]="EQUALS",o[o.ZERO=48]="ZERO",o[o.NINE=57]="NINE",o[o.LOWER_A=97]="LOWER_A",o[o.LOWER_F=102]="LOWER_F",o[o.LOWER_X=120]="LOWER_X",o[o.LOWER_Z=122]="LOWER_Z",o[o.UPPER_A=65]="UPPER_A",o[o.UPPER_F=70]="UPPER_F",o[o.UPPER_Z=90]="UPPER_Z"})(CharCodes$2||(CharCodes$2={}));const TO_LOWER_BIT$1=32;function isNumber$3(o){return o>=CharCodes$2.ZERO&&o<=CharCodes$2.NINE}function isHexadecimalCharacter$1(o){return o>=CharCodes$2.UPPER_A&&o<=CharCodes$2.UPPER_F||o>=CharCodes$2.LOWER_A&&o<=CharCodes$2.LOWER_F}function isAsciiAlphaNumeric$2(o){return o>=CharCodes$2.UPPER_A&&o<=CharCodes$2.UPPER_Z||o>=CharCodes$2.LOWER_A&&o<=CharCodes$2.LOWER_Z||isNumber$3(o)}function isEntityInAttributeInvalidEnd$1(o){return o===CharCodes$2.EQUALS||isAsciiAlphaNumeric$2(o)}var EntityDecoderState$1;(function(o){o[o.EntityStart=0]="EntityStart",o[o.NumericStart=1]="NumericStart",o[o.NumericDecimal=2]="NumericDecimal",o[o.NumericHex=3]="NumericHex",o[o.NamedEntity=4]="NamedEntity"})(EntityDecoderState$1||(EntityDecoderState$1={}));var DecodingMode$1;(function(o){o[o.Legacy=0]="Legacy",o[o.Strict=1]="Strict",o[o.Attribute=2]="Attribute"})(DecodingMode$1||(DecodingMode$1={}));let EntityDecoder$1=class{constructor(e,s,a){this.decodeTree=e,this.emitCodePoint=s,this.errors=a,this.state=EntityDecoderState$1.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=DecodingMode$1.Strict,this.runConsumed=0}startEntity(e){this.decodeMode=e,this.state=EntityDecoderState$1.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1,this.runConsumed=0}write(e,s){switch(this.state){case EntityDecoderState$1.EntityStart:return e.charCodeAt(s)===CharCodes$2.NUM?(this.state=EntityDecoderState$1.NumericStart,this.consumed+=1,this.stateNumericStart(e,s+1)):(this.state=EntityDecoderState$1.NamedEntity,this.stateNamedEntity(e,s));case EntityDecoderState$1.NumericStart:return this.stateNumericStart(e,s);case EntityDecoderState$1.NumericDecimal:return this.stateNumericDecimal(e,s);case EntityDecoderState$1.NumericHex:return this.stateNumericHex(e,s);case EntityDecoderState$1.NamedEntity:return this.stateNamedEntity(e,s)}}stateNumericStart(e,s){return s>=e.length?-1:(e.charCodeAt(s)|TO_LOWER_BIT$1)===CharCodes$2.LOWER_X?(this.state=EntityDecoderState$1.NumericHex,this.consumed+=1,this.stateNumericHex(e,s+1)):(this.state=EntityDecoderState$1.NumericDecimal,this.stateNumericDecimal(e,s))}stateNumericHex(e,s){for(;s<e.length;){const a=e.charCodeAt(s);if(isNumber$3(a)||isHexadecimalCharacter$1(a)){const l=a<=CharCodes$2.NINE?a-CharCodes$2.ZERO:(a|TO_LOWER_BIT$1)-CharCodes$2.LOWER_A+10;this.result=this.result*16+l,this.consumed++,s++}else return this.emitNumericEntity(a,3)}return-1}stateNumericDecimal(e,s){for(;s<e.length;){const a=e.charCodeAt(s);if(isNumber$3(a))this.result=this.result*10+(a-CharCodes$2.ZERO),this.consumed++,s++;else return this.emitNumericEntity(a,2)}return-1}emitNumericEntity(e,s){var a;if(this.consumed<=s)return(a=this.errors)===null||a===void 0||a.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===CharCodes$2.SEMI)this.consumed+=1;else if(this.decodeMode===DecodingMode$1.Strict)return 0;return this.emitCodePoint(replaceCodePoint$1(this.result),this.consumed),this.errors&&(e!==CharCodes$2.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,s){const{decodeTree:a}=this;let l=a[this.treeIndex],u=(l&BinTrieFlags$1.VALUE_LENGTH)>>14;for(;s<e.length;){if(u===0&&(l&BinTrieFlags$1.FLAG13)!==0){const d=(l&BinTrieFlags$1.BRANCH_LENGTH)>>7;if(this.runConsumed===0){const h=l&BinTrieFlags$1.JUMP_TABLE;if(e.charCodeAt(s)!==h)return this.result===0?0:this.emitNotTerminatedNamedEntity();s++,this.excess++,this.runConsumed++}for(;this.runConsumed<d;){if(s>=e.length)return-1;const h=this.runConsumed-1,p=a[this.treeIndex+1+(h>>1)],m=h%2===0?p&255:p>>8&255;if(e.charCodeAt(s)!==m)return this.runConsumed=0,this.result===0?0:this.emitNotTerminatedNamedEntity();s++,this.excess++,this.runConsumed++}this.runConsumed=0,this.treeIndex+=1+(d>>1),l=a[this.treeIndex],u=(l&BinTrieFlags$1.VALUE_LENGTH)>>14}if(s>=e.length)break;const c=e.charCodeAt(s);if(c===CharCodes$2.SEMI&&u!==0&&(l&BinTrieFlags$1.FLAG13)!==0)return this.emitNamedEntityData(this.treeIndex,u,this.consumed+this.excess);if(this.treeIndex=determineBranch$1(a,l,this.treeIndex+Math.max(1,u),c),this.treeIndex<0)return this.result===0||this.decodeMode===DecodingMode$1.Attribute&&(u===0||isEntityInAttributeInvalidEnd$1(c))?0:this.emitNotTerminatedNamedEntity();if(l=a[this.treeIndex],u=(l&BinTrieFlags$1.VALUE_LENGTH)>>14,u!==0){if(c===CharCodes$2.SEMI)return this.emitNamedEntityData(this.treeIndex,u,this.consumed+this.excess);this.decodeMode!==DecodingMode$1.Strict&&(l&BinTrieFlags$1.FLAG13)===0&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}s++,this.excess++}return-1}emitNotTerminatedNamedEntity(){var e;const{result:s,decodeTree:a}=this,l=(a[s]&BinTrieFlags$1.VALUE_LENGTH)>>14;return this.emitNamedEntityData(s,l,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,s,a){const{decodeTree:l}=this;return this.emitCodePoint(s===1?l[e]&~(BinTrieFlags$1.VALUE_LENGTH|BinTrieFlags$1.FLAG13):l[e+1],a),s===3&&this.emitCodePoint(l[e+2],a),a}end(){var e;switch(this.state){case EntityDecoderState$1.NamedEntity:return this.result!==0&&(this.decodeMode!==DecodingMode$1.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case EntityDecoderState$1.NumericDecimal:return this.emitNumericEntity(0,2);case EntityDecoderState$1.NumericHex:return this.emitNumericEntity(0,3);case EntityDecoderState$1.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case EntityDecoderState$1.EntityStart:return 0}}};function determineBranch$1(o,e,s,a){const l=(e&BinTrieFlags$1.BRANCH_LENGTH)>>7,u=e&BinTrieFlags$1.JUMP_TABLE;if(l===0)return u!==0&&a===u?s:-1;if(u){const p=a-u;return p<0||p>=l?-1:o[s+p]-1}const c=l+1>>1;let d=0,h=l-1;for(;d<=h;){const p=d+h>>>1,m=p>>1,y=o[s+m]>>(p&1)*8&255;if(y<a)d=p+1;else if(y>a)h=p-1;else return o[s+c+p]}return-1}var CharCodes$1;(function(o){o[o.Tab=9]="Tab",o[o.NewLine=10]="NewLine",o[o.FormFeed=12]="FormFeed",o[o.CarriageReturn=13]="CarriageReturn",o[o.Space=32]="Space",o[o.ExclamationMark=33]="ExclamationMark",o[o.Number=35]="Number",o[o.Amp=38]="Amp",o[o.SingleQuote=39]="SingleQuote",o[o.DoubleQuote=34]="DoubleQuote",o[o.Dash=45]="Dash",o[o.Slash=47]="Slash",o[o.Zero=48]="Zero",o[o.Nine=57]="Nine",o[o.Semi=59]="Semi",o[o.Lt=60]="Lt",o[o.Eq=61]="Eq",o[o.Gt=62]="Gt",o[o.Questionmark=63]="Questionmark",o[o.UpperA=65]="UpperA",o[o.LowerA=97]="LowerA",o[o.UpperF=70]="UpperF",o[o.LowerF=102]="LowerF",o[o.UpperZ=90]="UpperZ",o[o.LowerZ=122]="LowerZ",o[o.LowerX=120]="LowerX",o[o.OpeningSquareBracket=91]="OpeningSquareBracket"})(CharCodes$1||(CharCodes$1={}));var State$1;(function(o){o[o.Text=1]="Text",o[o.BeforeTagName=2]="BeforeTagName",o[o.InTagName=3]="InTagName",o[o.InSelfClosingTag=4]="InSelfClosingTag",o[o.BeforeClosingTagName=5]="BeforeClosingTagName",o[o.InClosingTagName=6]="InClosingTagName",o[o.AfterClosingTagName=7]="AfterClosingTagName",o[o.BeforeAttributeName=8]="BeforeAttributeName",o[o.InAttributeName=9]="InAttributeName",o[o.AfterAttributeName=10]="AfterAttributeName",o[o.BeforeAttributeValue=11]="BeforeAttributeValue",o[o.InAttributeValueDq=12]="InAttributeValueDq",o[o.InAttributeValueSq=13]="InAttributeValueSq",o[o.InAttributeValueNq=14]="InAttributeValueNq",o[o.BeforeDeclaration=15]="BeforeDeclaration",o[o.InDeclaration=16]="InDeclaration",o[o.InProcessingInstruction=17]="InProcessingInstruction",o[o.BeforeComment=18]="BeforeComment",o[o.CDATASequence=19]="CDATASequence",o[o.InSpecialComment=20]="InSpecialComment",o[o.InCommentLike=21]="InCommentLike",o[o.BeforeSpecialS=22]="BeforeSpecialS",o[o.BeforeSpecialT=23]="BeforeSpecialT",o[o.SpecialStartSequence=24]="SpecialStartSequence",o[o.InSpecialTag=25]="InSpecialTag",o[o.InEntity=26]="InEntity"})(State$1||(State$1={}));function isWhitespace$2(o){return o===CharCodes$1.Space||o===CharCodes$1.NewLine||o===CharCodes$1.Tab||o===CharCodes$1.FormFeed||o===CharCodes$1.CarriageReturn}function isEndOfTagSection(o){return o===CharCodes$1.Slash||o===CharCodes$1.Gt||isWhitespace$2(o)}function isASCIIAlpha(o){return o>=CharCodes$1.LowerA&&o<=CharCodes$1.LowerZ||o>=CharCodes$1.UpperA&&o<=CharCodes$1.UpperZ}var QuoteType;(function(o){o[o.NoValue=0]="NoValue",o[o.Unquoted=1]="Unquoted",o[o.Single=2]="Single",o[o.Double=3]="Double"})(QuoteType||(QuoteType={}));const Sequences={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97]),XmpEnd:new Uint8Array([60,47,120,109,112])};let Tokenizer$1=class{constructor({xmlMode:e=!1,decodeEntities:s=!0},a){this.cbs=a,this.state=State$1.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=State$1.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=e,this.decodeEntities=s,this.entityDecoder=new EntityDecoder$1(e?xmlDecodeTree:htmlDecodeTree$1,(l,u)=>this.emitCodePoint(l,u))}reset(){this.state=State$1.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=State$1.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(e){e===CharCodes$1.Lt||!this.decodeEntities&&this.fastForwardTo(CharCodes$1.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=State$1.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===CharCodes$1.Amp&&this.startEntity()}stateSpecialStartSequence(e){const s=this.sequenceIndex===this.currentSequence.length;if(!(s?isEndOfTagSection(e):(e|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!s){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=State$1.InTagName,this.stateInTagName(e)}stateInSpecialTag(e){if(this.sequenceIndex===this.currentSequence.length){if(e===CharCodes$1.Gt||isWhitespace$2(e)){const s=this.index-this.currentSequence.length;if(this.sectionStart<s){const a=this.index;this.index=s,this.cbs.ontext(this.sectionStart,s),this.index=a}this.isSpecial=!1,this.sectionStart=s+2,this.stateInClosingTagName(e);return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Sequences.TitleEnd?this.decodeEntities&&e===CharCodes$1.Amp&&this.startEntity():this.fastForwardTo(CharCodes$1.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===CharCodes$1.Lt)}stateCDATASequence(e){e===Sequences.Cdata[this.sequenceIndex]?++this.sequenceIndex===Sequences.Cdata.length&&(this.state=State$1.InCommentLike,this.currentSequence=Sequences.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=State$1.InDeclaration,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Sequences.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=State$1.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(e){return this.xmlMode?!isEndOfTagSection(e):isASCIIAlpha(e)}startSpecial(e,s){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=s,this.state=State$1.SpecialStartSequence}stateBeforeTagName(e){if(e===CharCodes$1.ExclamationMark)this.state=State$1.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===CharCodes$1.Questionmark)this.state=State$1.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){const s=e|32;this.sectionStart=this.index,this.xmlMode?this.state=State$1.InTagName:s===Sequences.ScriptEnd[2]?this.state=State$1.BeforeSpecialS:s===Sequences.TitleEnd[2]||s===Sequences.XmpEnd[2]?this.state=State$1.BeforeSpecialT:this.state=State$1.InTagName}else e===CharCodes$1.Slash?this.state=State$1.BeforeClosingTagName:(this.state=State$1.Text,this.stateText(e))}stateInTagName(e){isEndOfTagSection(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=State$1.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateBeforeClosingTagName(e){isWhitespace$2(e)||(e===CharCodes$1.Gt?this.state=State$1.Text:(this.state=this.isTagStartChar(e)?State$1.InClosingTagName:State$1.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(e){(e===CharCodes$1.Gt||isWhitespace$2(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=State$1.AfterClosingTagName,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){(e===CharCodes$1.Gt||this.fastForwardTo(CharCodes$1.Gt))&&(this.state=State$1.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(e){e===CharCodes$1.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=State$1.InSpecialTag,this.sequenceIndex=0):this.state=State$1.Text,this.sectionStart=this.index+1):e===CharCodes$1.Slash?this.state=State$1.InSelfClosingTag:isWhitespace$2(e)||(this.state=State$1.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===CharCodes$1.Gt?(this.cbs.onselfclosingtag(this.index),this.state=State$1.Text,this.sectionStart=this.index+1,this.isSpecial=!1):isWhitespace$2(e)||(this.state=State$1.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateInAttributeName(e){(e===CharCodes$1.Eq||isEndOfTagSection(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=State$1.AfterAttributeName,this.stateAfterAttributeName(e))}stateAfterAttributeName(e){e===CharCodes$1.Eq?this.state=State$1.BeforeAttributeValue:e===CharCodes$1.Slash||e===CharCodes$1.Gt?(this.cbs.onattribend(QuoteType.NoValue,this.sectionStart),this.sectionStart=-1,this.state=State$1.BeforeAttributeName,this.stateBeforeAttributeName(e)):isWhitespace$2(e)||(this.cbs.onattribend(QuoteType.NoValue,this.sectionStart),this.state=State$1.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(e){e===CharCodes$1.DoubleQuote?(this.state=State$1.InAttributeValueDq,this.sectionStart=this.index+1):e===CharCodes$1.SingleQuote?(this.state=State$1.InAttributeValueSq,this.sectionStart=this.index+1):isWhitespace$2(e)||(this.sectionStart=this.index,this.state=State$1.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))}handleInAttributeValue(e,s){e===s||!this.decodeEntities&&this.fastForwardTo(s)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s===CharCodes$1.DoubleQuote?QuoteType.Double:QuoteType.Single,this.index+1),this.state=State$1.BeforeAttributeName):this.decodeEntities&&e===CharCodes$1.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(e){this.handleInAttributeValue(e,CharCodes$1.DoubleQuote)}stateInAttributeValueSingleQuotes(e){this.handleInAttributeValue(e,CharCodes$1.SingleQuote)}stateInAttributeValueNoQuotes(e){isWhitespace$2(e)||e===CharCodes$1.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(QuoteType.Unquoted,this.index),this.state=State$1.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===CharCodes$1.Amp&&this.startEntity()}stateBeforeDeclaration(e){e===CharCodes$1.OpeningSquareBracket?(this.state=State$1.CDATASequence,this.sequenceIndex=0):this.state=e===CharCodes$1.Dash?State$1.BeforeComment:State$1.InDeclaration}stateInDeclaration(e){(e===CharCodes$1.Gt||this.fastForwardTo(CharCodes$1.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=State$1.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===CharCodes$1.Gt||this.fastForwardTo(CharCodes$1.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=State$1.Text,this.sectionStart=this.index+1)}stateBeforeComment(e){e===CharCodes$1.Dash?(this.state=State$1.InCommentLike,this.currentSequence=Sequences.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=State$1.InDeclaration}stateInSpecialComment(e){(e===CharCodes$1.Gt||this.fastForwardTo(CharCodes$1.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=State$1.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){const s=e|32;s===Sequences.ScriptEnd[3]?this.startSpecial(Sequences.ScriptEnd,4):s===Sequences.StyleEnd[3]?this.startSpecial(Sequences.StyleEnd,4):(this.state=State$1.InTagName,this.stateInTagName(e))}stateBeforeSpecialT(e){switch(e|32){case Sequences.TitleEnd[3]:{this.startSpecial(Sequences.TitleEnd,4);break}case Sequences.TextareaEnd[3]:{this.startSpecial(Sequences.TextareaEnd,4);break}case Sequences.XmpEnd[3]:{this.startSpecial(Sequences.XmpEnd,4);break}default:this.state=State$1.InTagName,this.stateInTagName(e)}}startEntity(){this.baseState=this.state,this.state=State$1.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?DecodingMode$1.Strict:this.baseState===State$1.Text||this.baseState===State$1.InSpecialTag?DecodingMode$1.Legacy:DecodingMode$1.Attribute)}stateInEntity(){const e=this.index-this.offset,s=this.entityDecoder.write(this.buffer,e);if(s>=0)this.state=this.baseState,s===0&&(this.index-=1);else{if(e<this.buffer.length&&this.buffer.charCodeAt(e)===CharCodes$1.Amp){this.state=this.baseState,this.index-=1;return}this.index=this.offset+this.buffer.length-1}}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===State$1.Text||this.state===State$1.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===State$1.InAttributeValueDq||this.state===State$1.InAttributeValueSq||this.state===State$1.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case State$1.Text:{this.stateText(e);break}case State$1.SpecialStartSequence:{this.stateSpecialStartSequence(e);break}case State$1.InSpecialTag:{this.stateInSpecialTag(e);break}case State$1.CDATASequence:{this.stateCDATASequence(e);break}case State$1.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(e);break}case State$1.InAttributeName:{this.stateInAttributeName(e);break}case State$1.InCommentLike:{this.stateInCommentLike(e);break}case State$1.InSpecialComment:{this.stateInSpecialComment(e);break}case State$1.BeforeAttributeName:{this.stateBeforeAttributeName(e);break}case State$1.InTagName:{this.stateInTagName(e);break}case State$1.InClosingTagName:{this.stateInClosingTagName(e);break}case State$1.BeforeTagName:{this.stateBeforeTagName(e);break}case State$1.AfterAttributeName:{this.stateAfterAttributeName(e);break}case State$1.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(e);break}case State$1.BeforeAttributeValue:{this.stateBeforeAttributeValue(e);break}case State$1.BeforeClosingTagName:{this.stateBeforeClosingTagName(e);break}case State$1.AfterClosingTagName:{this.stateAfterClosingTagName(e);break}case State$1.BeforeSpecialS:{this.stateBeforeSpecialS(e);break}case State$1.BeforeSpecialT:{this.stateBeforeSpecialT(e);break}case State$1.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(e);break}case State$1.InSelfClosingTag:{this.stateInSelfClosingTag(e);break}case State$1.InDeclaration:{this.stateInDeclaration(e);break}case State$1.BeforeDeclaration:{this.stateBeforeDeclaration(e);break}case State$1.BeforeComment:{this.stateBeforeComment(e);break}case State$1.InProcessingInstruction:{this.stateInProcessingInstruction(e);break}case State$1.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===State$1.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length+this.offset;this.sectionStart>=e||(this.state===State$1.InCommentLike?this.currentSequence===Sequences.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===State$1.InTagName||this.state===State$1.BeforeAttributeName||this.state===State$1.BeforeAttributeValue||this.state===State$1.AfterAttributeName||this.state===State$1.InAttributeName||this.state===State$1.InAttributeValueSq||this.state===State$1.InAttributeValueDq||this.state===State$1.InAttributeValueNq||this.state===State$1.InClosingTagName||this.cbs.ontext(this.sectionStart,e))}emitCodePoint(e,s){this.baseState!==State$1.Text&&this.baseState!==State$1.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+s,this.index=this.sectionStart-1,this.cbs.onattribentity(e)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+s,this.index=this.sectionStart-1,this.cbs.ontextentity(e,this.sectionStart))}};const formTags=new Set(["input","option","optgroup","select","button","datalist","textarea"]),pTag=new Set(["p"]),tableSectionTags=new Set(["thead","tbody"]),ddtTags=new Set(["dd","dt"]),rtpTags=new Set(["rt","rp"]),openImpliesClose=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",pTag],["h1",pTag],["h2",pTag],["h3",pTag],["h4",pTag],["h5",pTag],["h6",pTag],["select",formTags],["input",formTags],["output",formTags],["button",formTags],["datalist",formTags],["textarea",formTags],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",ddtTags],["dt",ddtTags],["address",pTag],["article",pTag],["aside",pTag],["blockquote",pTag],["details",pTag],["div",pTag],["dl",pTag],["fieldset",pTag],["figcaption",pTag],["figure",pTag],["footer",pTag],["form",pTag],["header",pTag],["hr",pTag],["main",pTag],["nav",pTag],["ol",pTag],["pre",pTag],["section",pTag],["table",pTag],["ul",pTag],["rt",rtpTags],["rp",rtpTags],["tbody",tableSectionTags],["tfoot",tableSectionTags]]),voidElements=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),foreignContextElements=new Set(["math","svg"]),htmlIntegrationElements=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),reNameEnd=/\s|\//;let Parser$2=class{constructor(e,s={}){var a,l,u,c,d,h;this.options=s,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(a=s.lowerCaseTags)!==null&&a!==void 0?a:this.htmlMode,this.lowerCaseAttributeNames=(l=s.lowerCaseAttributeNames)!==null&&l!==void 0?l:this.htmlMode,this.recognizeSelfClosing=(u=s.recognizeSelfClosing)!==null&&u!==void 0?u:!this.htmlMode,this.tokenizer=new((c=s.Tokenizer)!==null&&c!==void 0?c:Tokenizer$1)(this.options,this),this.foreignContext=[!this.htmlMode],(h=(d=this.cbs).onparserinit)===null||h===void 0||h.call(d,this)}ontext(e,s){var a,l;const u=this.getSlice(e,s);this.endIndex=s-1,(l=(a=this.cbs).ontext)===null||l===void 0||l.call(a,u),this.startIndex=s}ontextentity(e,s){var a,l;this.endIndex=s-1,(l=(a=this.cbs).ontext)===null||l===void 0||l.call(a,fromCodePoint$1(e)),this.startIndex=s}isVoidElement(e){return this.htmlMode&&voidElements.has(e)}onopentagname(e,s){this.endIndex=s;let a=this.getSlice(e,s);this.lowerCaseTagNames&&(a=a.toLowerCase()),this.emitOpenTag(a)}emitOpenTag(e){var s,a,l,u;this.openTagStart=this.startIndex,this.tagname=e;const c=this.htmlMode&&openImpliesClose.get(e);if(c)for(;this.stack.length>0&&c.has(this.stack[0]);){const d=this.stack.shift();(a=(s=this.cbs).onclosetag)===null||a===void 0||a.call(s,d,!0)}this.isVoidElement(e)||(this.stack.unshift(e),this.htmlMode&&(foreignContextElements.has(e)?this.foreignContext.unshift(!0):htmlIntegrationElements.has(e)&&this.foreignContext.unshift(!1))),(u=(l=this.cbs).onopentagname)===null||u===void 0||u.call(l,e),this.cbs.onopentag&&(this.attribs={})}endOpenTag(e){var s,a;this.startIndex=this.openTagStart,this.attribs&&((a=(s=this.cbs).onopentag)===null||a===void 0||a.call(s,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1}onclosetag(e,s){var a,l,u,c,d,h,p,m;this.endIndex=s;let g=this.getSlice(e,s);if(this.lowerCaseTagNames&&(g=g.toLowerCase()),this.htmlMode&&(foreignContextElements.has(g)||htmlIntegrationElements.has(g))&&this.foreignContext.shift(),this.isVoidElement(g))this.htmlMode&&g==="br"&&((c=(u=this.cbs).onopentagname)===null||c===void 0||c.call(u,"br"),(h=(d=this.cbs).onopentag)===null||h===void 0||h.call(d,"br",{},!0),(m=(p=this.cbs).onclosetag)===null||m===void 0||m.call(p,"br",!1));else{const y=this.stack.indexOf(g);if(y!==-1)for(let A=0;A<=y;A++){const T=this.stack.shift();(l=(a=this.cbs).onclosetag)===null||l===void 0||l.call(a,T,A!==y)}else this.htmlMode&&g==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=s+1}onselfclosingtag(e){this.endIndex=e,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)}closeCurrentTag(e){var s,a;const l=this.tagname;this.endOpenTag(e),this.stack[0]===l&&((a=(s=this.cbs).onclosetag)===null||a===void 0||a.call(s,l,!e),this.stack.shift())}onattribname(e,s){this.startIndex=e;const a=this.getSlice(e,s);this.attribname=this.lowerCaseAttributeNames?a.toLowerCase():a}onattribdata(e,s){this.attribvalue+=this.getSlice(e,s)}onattribentity(e){this.attribvalue+=fromCodePoint$1(e)}onattribend(e,s){var a,l;this.endIndex=s,(l=(a=this.cbs).onattribute)===null||l===void 0||l.call(a,this.attribname,this.attribvalue,e===QuoteType.Double?'"':e===QuoteType.Single?"'":e===QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(e){const s=e.search(reNameEnd);let a=s<0?e:e.substr(0,s);return this.lowerCaseTagNames&&(a=a.toLowerCase()),a}ondeclaration(e,s){this.endIndex=s;const a=this.getSlice(e,s);if(this.cbs.onprocessinginstruction){const l=this.getInstructionName(a);this.cbs.onprocessinginstruction(`!${l}`,`!${a}`)}this.startIndex=s+1}onprocessinginstruction(e,s){this.endIndex=s;const a=this.getSlice(e,s);if(this.cbs.onprocessinginstruction){const l=this.getInstructionName(a);this.cbs.onprocessinginstruction(`?${l}`,`?${a}`)}this.startIndex=s+1}oncomment(e,s,a){var l,u,c,d;this.endIndex=s,(u=(l=this.cbs).oncomment)===null||u===void 0||u.call(l,this.getSlice(e,s-a)),(d=(c=this.cbs).oncommentend)===null||d===void 0||d.call(c),this.startIndex=s+1}oncdata(e,s,a){var l,u,c,d,h,p,m,g,y,A;this.endIndex=s;const T=this.getSlice(e,s-a);!this.htmlMode||this.options.recognizeCDATA?((u=(l=this.cbs).oncdatastart)===null||u===void 0||u.call(l),(d=(c=this.cbs).ontext)===null||d===void 0||d.call(c,T),(p=(h=this.cbs).oncdataend)===null||p===void 0||p.call(h)):((g=(m=this.cbs).oncomment)===null||g===void 0||g.call(m,`[CDATA[${T}]]`),(A=(y=this.cbs).oncommentend)===null||A===void 0||A.call(y)),this.startIndex=s+1}onend(){var e,s;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let a=0;a<this.stack.length;a++)this.cbs.onclosetag(this.stack[a],!0)}(s=(e=this.cbs).onend)===null||s===void 0||s.call(e)}reset(){var e,s,a,l;(s=(e=this.cbs).onreset)===null||s===void 0||s.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(l=(a=this.cbs).onparserinit)===null||l===void 0||l.call(a,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(e){this.reset(),this.end(e)}getSlice(e,s){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let a=this.buffers[0].slice(e-this.bufferOffset,s-this.bufferOffset);for(;s-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),a+=this.buffers[0].slice(0,s-this.bufferOffset);return a}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(e){var s,a;if(this.ended){(a=(s=this.cbs).onerror)===null||a===void 0||a.call(s,new Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)}end(e){var s,a;if(this.ended){(a=(s=this.cbs).onerror)===null||a===void 0||a.call(s,new Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(e){this.write(e)}done(e){this.end(e)}};function parseDocument(o,e){const s=new DomHandler(void 0,e);return new Parser$2(s,e).end(o),s.root}var _a$1;const hasOwn=(_a$1=Object.hasOwn)!==null&&_a$1!==void 0?_a$1:((o,e)=>Object.prototype.hasOwnProperty.call(o,e)),rspace=/\s+/,dataAttrPrefix="data-",rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,rbrace=/^{[^]*}$|^\[[^]*]$/;function getAttr(o,e,s){var a;if(!(!o||!isTag(o))){if((a=o.attribs)!==null&&a!==void 0||(o.attribs={}),!e)return o.attribs;if(hasOwn(o.attribs,e))return!s&&rboolean.test(e)?e:o.attribs[e];if(o.name==="option"&&e==="value")return text$5(o.children);if(o.name==="input"&&(o.attribs.type==="radio"||o.attribs.type==="checkbox")&&e==="value")return"on"}}function setAttr(o,e,s){s===null?removeAttribute(o,e):o.attribs[e]=`${s}`}function attr(o,e){if(typeof o=="object"||e!==void 0){if(typeof e=="function"){if(typeof o!="string")throw new Error("Bad combination of arguments.");return domEach(this,(s,a)=>{isTag(s)&&setAttr(s,o,e.call(s,a,s.attribs[o]))})}return domEach(this,s=>{if(isTag(s))if(typeof o=="object")for(const a of Object.keys(o)){const l=o[a];setAttr(s,a,l)}else setAttr(s,o,e)})}return arguments.length>1?this:getAttr(this[0],o,this.options.xmlMode)}function getProp(o,e,s){return e in o?o[e]:!s&&rboolean.test(e)?getAttr(o,e,!1)!==void 0:getAttr(o,e,s)}function setProp(o,e,s,a){e in o?o[e]=s:setAttr(o,e,!a&&rboolean.test(e)?s?"":null:`${s}`)}function prop(o,e){var s;if(typeof o=="string"&&e===void 0){const a=this[0];if(!a)return;switch(o){case"style":{const l=this.css(),u=Object.keys(l);for(let c=0;c<u.length;c++)l[c]=u[c];return l.length=u.length,l}case"tagName":case"nodeName":return isTag(a)?a.name.toUpperCase():void 0;case"href":case"src":{if(!isTag(a))return;const l=(s=a.attribs)===null||s===void 0?void 0:s[o];return typeof URL<"u"&&(o==="href"&&(a.tagName==="a"||a.tagName==="link")||o==="src"&&(a.tagName==="img"||a.tagName==="iframe"||a.tagName==="audio"||a.tagName==="video"||a.tagName==="source"))&&l!==void 0&&this.options.baseURI?new URL(l,this.options.baseURI).href:l}case"innerText":return innerText(a);case"textContent":return textContent$1(a);case"outerHTML":return a.type===Root?this.html():this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return isTag(a)?getProp(a,o,this.options.xmlMode):void 0}}if(typeof o=="object"||e!==void 0){if(typeof e=="function"){if(typeof o=="object")throw new TypeError("Bad combination of arguments.");return domEach(this,(a,l)=>{isTag(a)&&setProp(a,o,e.call(a,l,getProp(a,o,this.options.xmlMode)),this.options.xmlMode)})}return domEach(this,a=>{if(isTag(a))if(typeof o=="object")for(const l of Object.keys(o)){const u=o[l];setProp(a,l,u,this.options.xmlMode)}else setProp(a,o,e,this.options.xmlMode)})}}function setData(o,e,s){var a;(a=o.data)!==null&&a!==void 0||(o.data={}),typeof e=="object"?Object.assign(o.data,e):typeof e=="string"&&s!==void 0&&(o.data[e]=s)}function readAllData(o){for(const e of Object.keys(o.attribs)){if(!e.startsWith(dataAttrPrefix))continue;const s=camelCase(e.slice(dataAttrPrefix.length));hasOwn(o.data,s)||(o.data[s]=parseDataValue(o.attribs[e]))}return o.data}function readData(o,e){const s=dataAttrPrefix+cssCase(e),a=o.data;if(hasOwn(a,e))return a[e];if(hasOwn(o.attribs,s))return a[e]=parseDataValue(o.attribs[s])}function parseDataValue(o){if(o==="null")return null;if(o==="true")return!0;if(o==="false")return!1;const e=Number(o);if(o===String(e))return e;if(rbrace.test(o))try{return JSON.parse(o)}catch{}return o}function data$1(o,e){var s;const a=this[0];if(!a||!isTag(a))return;const l=a;return(s=l.data)!==null&&s!==void 0||(l.data={}),o==null?readAllData(l):typeof o=="object"||e!==void 0?(domEach(this,u=>{isTag(u)&&(typeof o=="object"?setData(u,o):setData(u,o,e))}),this):readData(l,o)}function val(o){const e=arguments.length===0,s=this[0];if(!s||!isTag(s))return e?void 0:this;switch(s.name){case"textarea":return this.text(o);case"select":{const a=this.find("option:selected");if(!e){if(this.attr("multiple")==null&&typeof o=="object")return this;this.find("option").removeAttr("selected");const l=typeof o=="object"?o:[o];for(const u of l)this.find(`option[value="${u}"]`).attr("selected","");return this}return this.attr("multiple")?a.toArray().map(l=>text$5(l.children)):a.attr("value")}case"button":case"input":case"option":return e?this.attr("value"):this.attr("value",o)}}function removeAttribute(o,e){!o.attribs||!hasOwn(o.attribs,e)||delete o.attribs[e]}function splitNames(o){return o?o.trim().split(rspace):[]}function removeAttr(o){const e=splitNames(o);for(const s of e)domEach(this,a=>{isTag(a)&&removeAttribute(a,s)});return this}function hasClass(o){return this.toArray().some(e=>{const s=isTag(e)&&e.attribs.class;let a=-1;if(s&&o.length>0)for(;(a=s.indexOf(o,a+1))>-1;){const l=a+o.length;if((a===0||rspace.test(s[a-1]))&&(l===s.length||rspace.test(s[l])))return!0}return!1})}function addClass(o){if(typeof o=="function")return domEach(this,(a,l)=>{if(isTag(a)){const u=a.attribs.class||"";addClass.call([a],o.call(a,l,u))}});if(!o||typeof o!="string")return this;const e=o.split(rspace),s=this.length;for(let a=0;a<s;a++){const l=this[a];if(!isTag(l))continue;const u=getAttr(l,"class",!1);if(u){let c=` ${u} `;for(const d of e){const h=`${d} `;c.includes(` ${h}`)||(c+=h)}setAttr(l,"class",c.trim())}else setAttr(l,"class",e.join(" ").trim())}return this}function removeClass(o){if(typeof o=="function")return domEach(this,(l,u)=>{isTag(l)&&removeClass.call([l],o.call(l,u,l.attribs.class||""))});const e=splitNames(o),s=e.length,a=arguments.length===0;return domEach(this,l=>{if(isTag(l))if(a)l.attribs.class="";else{const u=splitNames(l.attribs.class);let c=!1;for(let d=0;d<s;d++){const h=u.indexOf(e[d]);h!==-1&&(u.splice(h,1),c=!0,d--)}c&&(l.attribs.class=u.join(" "))}})}function toggleClass(o,e){if(typeof o=="function")return domEach(this,(c,d)=>{isTag(c)&&toggleClass.call([c],o.call(c,d,c.attribs.class||"",e),e)});if(!o||typeof o!="string")return this;const s=o.split(rspace),a=s.length,l=typeof e=="boolean"?e?1:-1:0,u=this.length;for(let c=0;c<u;c++){const d=this[c];if(!isTag(d))continue;const h=splitNames(d.attribs.class);for(let p=0;p<a;p++){const m=h.indexOf(s[p]);l>=0&&m===-1?h.push(s[p]):l<=0&&m!==-1&&h.splice(m,1)}d.attribs.class=h.join(" ")}return this}const Attributes=Object.freeze(Object.defineProperty({__proto__:null,addClass,attr,data:data$1,hasClass,prop,removeAttr,removeClass,toggleClass,val},Symbol.toStringTag,{value:"Module"}));var SelectorType;(function(o){o.Attribute="attribute",o.Pseudo="pseudo",o.PseudoElement="pseudo-element",o.Tag="tag",o.Universal="universal",o.Adjacent="adjacent",o.Child="child",o.Descendant="descendant",o.Parent="parent",o.Sibling="sibling",o.ColumnCombinator="column-combinator"})(SelectorType||(SelectorType={}));var AttributeAction;(function(o){o.Any="any",o.Element="element",o.End="end",o.Equals="equals",o.Exists="exists",o.Hyphen="hyphen",o.Not="not",o.Start="start"})(AttributeAction||(AttributeAction={}));const reName=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,reEscape=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,actionTypes=new Map([[126,AttributeAction.Element],[94,AttributeAction.Start],[36,AttributeAction.End],[42,AttributeAction.Any],[33,AttributeAction.Not],[124,AttributeAction.Hyphen]]),unpackPseudos=new Set(["has","not","matches","is","where","host","host-context"]);function isTraversal$1(o){switch(o.type){case SelectorType.Adjacent:case SelectorType.Child:case SelectorType.Descendant:case SelectorType.Parent:case SelectorType.Sibling:case SelectorType.ColumnCombinator:return!0;default:return!1}}const stripQuotesFromPseudos=new Set(["contains","icontains"]);function funescape(o,e,s){const a=parseInt(e,16)-65536;return a!==a||s?e:a<0?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)}function unescapeCSS(o){return o.replace(reEscape,funescape)}function isQuote(o){return o===39||o===34}function isWhitespace$1(o){return o===32||o===9||o===10||o===12||o===13}function parse$6(o){const e=[],s=parseSelector(e,`${o}`,0);if(s<o.length)throw new Error(`Unmatched selector: ${o.slice(s)}`);return e}function parseSelector(o,e,s){let a=[];function l(y){const A=e.slice(s+y).match(reName);if(!A)throw new Error(`Expected name, found ${e.slice(s)}`);const[T]=A;return s+=y+T.length,unescapeCSS(T)}function u(y){for(s+=y;s<e.length&&isWhitespace$1(e.charCodeAt(s));)s++}function c(){s+=1;const y=s;let A=1;for(;A>0&&s<e.length;s++)e.charCodeAt(s)===40&&!d(s)?A++:e.charCodeAt(s)===41&&!d(s)&&A--;if(A)throw new Error("Parenthesis not matched");return unescapeCSS(e.slice(y,s-1))}function d(y){let A=0;for(;e.charCodeAt(--y)===92;)A++;return(A&1)===1}function h(){if(a.length>0&&isTraversal$1(a[a.length-1]))throw new Error("Did not expect successive traversals.")}function p(y){if(a.length>0&&a[a.length-1].type===SelectorType.Descendant){a[a.length-1].type=y;return}h(),a.push({type:y})}function m(y,A){a.push({type:SelectorType.Attribute,name:y,action:A,value:l(1),namespace:null,ignoreCase:"quirks"})}function g(){if(a.length&&a[a.length-1].type===SelectorType.Descendant&&a.pop(),a.length===0)throw new Error("Empty sub-selector");o.push(a)}if(u(0),e.length===s)return s;e:for(;s<e.length;){const y=e.charCodeAt(s);switch(y){case 32:case 9:case 10:case 12:case 13:{(a.length===0||a[0].type!==SelectorType.Descendant)&&(h(),a.push({type:SelectorType.Descendant})),u(1);break}case 62:{p(SelectorType.Child),u(1);break}case 60:{p(SelectorType.Parent),u(1);break}case 126:{p(SelectorType.Sibling),u(1);break}case 43:{p(SelectorType.Adjacent),u(1);break}case 46:{m("class",AttributeAction.Element);break}case 35:{m("id",AttributeAction.Equals);break}case 91:{u(1);let A,T=null;e.charCodeAt(s)===124?A=l(1):e.startsWith("*|",s)?(T="*",A=l(2)):(A=l(0),e.charCodeAt(s)===124&&e.charCodeAt(s+1)!==61&&(T=A,A=l(1))),u(0);let E=AttributeAction.Exists;const v=actionTypes.get(e.charCodeAt(s));if(v){if(E=v,e.charCodeAt(s+1)!==61)throw new Error("Expected `=`");u(2)}else e.charCodeAt(s)===61&&(E=AttributeAction.Equals,u(1));let _="",w=null;if(E!=="exists"){if(isQuote(e.charCodeAt(s))){const I=e.charCodeAt(s);let P=s+1;for(;P<e.length&&(e.charCodeAt(P)!==I||d(P));)P+=1;if(e.charCodeAt(P)!==I)throw new Error("Attribute value didn't end");_=unescapeCSS(e.slice(s+1,P)),s=P+1}else{const I=s;for(;s<e.length&&(!isWhitespace$1(e.charCodeAt(s))&&e.charCodeAt(s)!==93||d(s));)s+=1;_=unescapeCSS(e.slice(I,s))}u(0);const k=e.charCodeAt(s)|32;k===115?(w=!1,u(1)):k===105&&(w=!0,u(1))}if(e.charCodeAt(s)!==93)throw new Error("Attribute selector didn't terminate");s+=1;const R={type:SelectorType.Attribute,name:A,action:E,value:_,namespace:T,ignoreCase:w};a.push(R);break}case 58:{if(e.charCodeAt(s+1)===58){a.push({type:SelectorType.PseudoElement,name:l(2).toLowerCase(),data:e.charCodeAt(s)===40?c():null});continue}const A=l(1).toLowerCase();let T=null;if(e.charCodeAt(s)===40)if(unpackPseudos.has(A)){if(isQuote(e.charCodeAt(s+1)))throw new Error(`Pseudo-selector ${A} cannot be quoted`);if(T=[],s=parseSelector(T,e,s+1),e.charCodeAt(s)!==41)throw new Error(`Missing closing parenthesis in :${A} (${e})`);s+=1}else{if(T=c(),stripQuotesFromPseudos.has(A)){const E=T.charCodeAt(0);E===T.charCodeAt(T.length-1)&&isQuote(E)&&(T=T.slice(1,-1))}T=unescapeCSS(T)}a.push({type:SelectorType.Pseudo,name:A,data:T});break}case 44:{g(),a=[],u(1);break}default:{if(e.startsWith("/*",s)){const E=e.indexOf("*/",s+2);if(E<0)throw new Error("Comment was not terminated");s=E+2,a.length===0&&u(0);break}let A=null,T;if(y===42)s+=1,T="*";else if(y===124){if(T="",e.charCodeAt(s+1)===124){p(SelectorType.ColumnCombinator),u(2);break}}else if(reName.test(e.slice(s)))T=l(0);else break e;e.charCodeAt(s)===124&&e.charCodeAt(s+1)!==124&&(A=T,e.charCodeAt(s+1)===42?(T="*",s+=2):T=l(1)),a.push(T==="*"?{type:SelectorType.Universal,namespace:A}:{type:SelectorType.Tag,name:T,namespace:A})}}}return g(),s}var boolbase$1,hasRequiredBoolbase;function requireBoolbase(){return hasRequiredBoolbase||(hasRequiredBoolbase=1,boolbase$1={trueFunc:function(){return!0},falseFunc:function(){return!1}}),boolbase$1}var boolbaseExports=requireBoolbase();const boolbase=getDefaultExportFromCjs$1(boolbaseExports),procedure=new Map([[SelectorType.Universal,50],[SelectorType.Tag,30],[SelectorType.Attribute,1],[SelectorType.Pseudo,0]]);function isTraversal(o){return!procedure.has(o.type)}const attributes=new Map([[AttributeAction.Exists,10],[AttributeAction.Equals,8],[AttributeAction.Not,7],[AttributeAction.Start,6],[AttributeAction.End,6],[AttributeAction.Any,5]]);function sortByProcedure(o){const e=o.map(getProcedure);for(let s=1;s<o.length;s++){const a=e[s];if(!(a<0))for(let l=s-1;l>=0&&a<e[l];l--){const u=o[l+1];o[l+1]=o[l],o[l]=u,e[l+1]=e[l],e[l]=a}}}function getProcedure(o){var e,s;let a=(e=procedure.get(o.type))!==null&&e!==void 0?e:-1;return o.type===SelectorType.Attribute?(a=(s=attributes.get(o.action))!==null&&s!==void 0?s:4,o.action===AttributeAction.Equals&&o.name==="id"&&(a=9),o.ignoreCase&&(a>>=1)):o.type===SelectorType.Pseudo&&(o.data?o.name==="has"||o.name==="contains"?a=0:Array.isArray(o.data)?(a=Math.min(...o.data.map(l=>Math.min(...l.map(getProcedure)))),a<0&&(a=0)):a=2:a=3),a}const reChars=/[-[\]{}()*+?.,\\^$|#\s]/g;function escapeRegex$1(o){return o.replace(reChars,"\\$&")}const caseInsensitiveAttributes=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function shouldIgnoreCase(o,e){return typeof o.ignoreCase=="boolean"?o.ignoreCase:o.ignoreCase==="quirks"?!!e.quirksMode:!e.xmlMode&&caseInsensitiveAttributes.has(o.name)}const attributeRules={equals(o,e,s){const{adapter:a}=s,{name:l}=e;let{value:u}=e;return shouldIgnoreCase(e,s)?(u=u.toLowerCase(),c=>{const d=a.getAttributeValue(c,l);return d!=null&&d.length===u.length&&d.toLowerCase()===u&&o(c)}):c=>a.getAttributeValue(c,l)===u&&o(c)},hyphen(o,e,s){const{adapter:a}=s,{name:l}=e;let{value:u}=e;const c=u.length;return shouldIgnoreCase(e,s)?(u=u.toLowerCase(),function(h){const p=a.getAttributeValue(h,l);return p!=null&&(p.length===c||p.charAt(c)==="-")&&p.substr(0,c).toLowerCase()===u&&o(h)}):function(h){const p=a.getAttributeValue(h,l);return p!=null&&(p.length===c||p.charAt(c)==="-")&&p.substr(0,c)===u&&o(h)}},element(o,e,s){const{adapter:a}=s,{name:l,value:u}=e;if(/\s/.test(u))return boolbase.falseFunc;const c=new RegExp(`(?:^|\\s)${escapeRegex$1(u)}(?:$|\\s)`,shouldIgnoreCase(e,s)?"i":"");return function(h){const p=a.getAttributeValue(h,l);return p!=null&&p.length>=u.length&&c.test(p)&&o(h)}},exists(o,{name:e},{adapter:s}){return a=>s.hasAttrib(a,e)&&o(a)},start(o,e,s){const{adapter:a}=s,{name:l}=e;let{value:u}=e;const c=u.length;return c===0?boolbase.falseFunc:shouldIgnoreCase(e,s)?(u=u.toLowerCase(),d=>{const h=a.getAttributeValue(d,l);return h!=null&&h.length>=c&&h.substr(0,c).toLowerCase()===u&&o(d)}):d=>{var h;return!!(!((h=a.getAttributeValue(d,l))===null||h===void 0)&&h.startsWith(u))&&o(d)}},end(o,e,s){const{adapter:a}=s,{name:l}=e;let{value:u}=e;const c=-u.length;return c===0?boolbase.falseFunc:shouldIgnoreCase(e,s)?(u=u.toLowerCase(),d=>{var h;return((h=a.getAttributeValue(d,l))===null||h===void 0?void 0:h.substr(c).toLowerCase())===u&&o(d)}):d=>{var h;return!!(!((h=a.getAttributeValue(d,l))===null||h===void 0)&&h.endsWith(u))&&o(d)}},any(o,e,s){const{adapter:a}=s,{name:l,value:u}=e;if(u==="")return boolbase.falseFunc;if(shouldIgnoreCase(e,s)){const c=new RegExp(escapeRegex$1(u),"i");return function(h){const p=a.getAttributeValue(h,l);return p!=null&&p.length>=u.length&&c.test(p)&&o(h)}}return c=>{var d;return!!(!((d=a.getAttributeValue(c,l))===null||d===void 0)&&d.includes(u))&&o(c)}},not(o,e,s){const{adapter:a}=s,{name:l}=e;let{value:u}=e;return u===""?c=>!!a.getAttributeValue(c,l)&&o(c):shouldIgnoreCase(e,s)?(u=u.toLowerCase(),c=>{const d=a.getAttributeValue(c,l);return(d==null||d.length!==u.length||d.toLowerCase()!==u)&&o(c)}):c=>a.getAttributeValue(c,l)!==u&&o(c)}},whitespace=new Set([9,10,12,13,32]),ZERO=48,NINE=57;function parse$5(o){if(o=o.trim().toLowerCase(),o==="even")return[2,0];if(o==="odd")return[2,1];let e=0,s=0,a=u(),l=c();if(e<o.length&&o.charAt(e)==="n"&&(e++,s=a*(l??1),d(),e<o.length?(a=u(),d(),l=c()):a=l=0),l===null||e<o.length)throw new Error(`n-th rule couldn't be parsed ('${o}')`);return[s,a*l];function u(){return o.charAt(e)==="-"?(e++,-1):(o.charAt(e)==="+"&&e++,1)}function c(){const h=e;let p=0;for(;e<o.length&&o.charCodeAt(e)>=ZERO&&o.charCodeAt(e)<=NINE;)p=p*10+(o.charCodeAt(e)-ZERO),e++;return e===h?null:p}function d(){for(;e<o.length&&whitespace.has(o.charCodeAt(e));)e++}}function compile(o){const e=o[0],s=o[1]-1;if(s<0&&e<=0)return boolbase.falseFunc;if(e===-1)return u=>u<=s;if(e===0)return u=>u===s;if(e===1)return s<0?boolbase.trueFunc:u=>u>=s;const a=Math.abs(e),l=(s%a+a)%a;return e>1?u=>u>=s&&u%a===l:u=>u<=s&&u%a===l}function nthCheck(o){return compile(parse$5(o))}function getChildFunc(o,e){return s=>{const a=e.getParent(s);return a!=null&&e.isTag(a)&&o(s)}}const filters={contains(o,e,{adapter:s}){return function(l){return o(l)&&s.getText(l).includes(e)}},icontains(o,e,{adapter:s}){const a=e.toLowerCase();return function(u){return o(u)&&s.getText(u).toLowerCase().includes(a)}},"nth-child"(o,e,{adapter:s,equals:a}){const l=nthCheck(e);return l===boolbase.falseFunc?boolbase.falseFunc:l===boolbase.trueFunc?getChildFunc(o,s):function(c){const d=s.getSiblings(c);let h=0;for(let p=0;p<d.length&&!a(c,d[p]);p++)s.isTag(d[p])&&h++;return l(h)&&o(c)}},"nth-last-child"(o,e,{adapter:s,equals:a}){const l=nthCheck(e);return l===boolbase.falseFunc?boolbase.falseFunc:l===boolbase.trueFunc?getChildFunc(o,s):function(c){const d=s.getSiblings(c);let h=0;for(let p=d.length-1;p>=0&&!a(c,d[p]);p--)s.isTag(d[p])&&h++;return l(h)&&o(c)}},"nth-of-type"(o,e,{adapter:s,equals:a}){const l=nthCheck(e);return l===boolbase.falseFunc?boolbase.falseFunc:l===boolbase.trueFunc?getChildFunc(o,s):function(c){const d=s.getSiblings(c);let h=0;for(let p=0;p<d.length;p++){const m=d[p];if(a(c,m))break;s.isTag(m)&&s.getName(m)===s.getName(c)&&h++}return l(h)&&o(c)}},"nth-last-of-type"(o,e,{adapter:s,equals:a}){const l=nthCheck(e);return l===boolbase.falseFunc?boolbase.falseFunc:l===boolbase.trueFunc?getChildFunc(o,s):function(c){const d=s.getSiblings(c);let h=0;for(let p=d.length-1;p>=0;p--){const m=d[p];if(a(c,m))break;s.isTag(m)&&s.getName(m)===s.getName(c)&&h++}return l(h)&&o(c)}},root(o,e,{adapter:s}){return a=>{const l=s.getParent(a);return(l==null||!s.isTag(l))&&o(a)}},scope(o,e,s,a){const{equals:l}=s;return!a||a.length===0?filters.root(o,e,s):a.length===1?u=>l(a[0],u)&&o(u):u=>a.includes(u)&&o(u)},hover:dynamicStatePseudo("isHovered"),visited:dynamicStatePseudo("isVisited"),active:dynamicStatePseudo("isActive")};function dynamicStatePseudo(o){return function(s,a,{adapter:l}){const u=l[o];return typeof u!="function"?boolbase.falseFunc:function(d){return u(d)&&s(d)}}}const pseudos={empty(o,{adapter:e}){return!e.getChildren(o).some(s=>e.isTag(s)||e.getText(s)!=="")},"first-child"(o,{adapter:e,equals:s}){if(e.prevElementSibling)return e.prevElementSibling(o)==null;const a=e.getSiblings(o).find(l=>e.isTag(l));return a!=null&&s(o,a)},"last-child"(o,{adapter:e,equals:s}){const a=e.getSiblings(o);for(let l=a.length-1;l>=0;l--){if(s(o,a[l]))return!0;if(e.isTag(a[l]))break}return!1},"first-of-type"(o,{adapter:e,equals:s}){const a=e.getSiblings(o),l=e.getName(o);for(let u=0;u<a.length;u++){const c=a[u];if(s(o,c))return!0;if(e.isTag(c)&&e.getName(c)===l)break}return!1},"last-of-type"(o,{adapter:e,equals:s}){const a=e.getSiblings(o),l=e.getName(o);for(let u=a.length-1;u>=0;u--){const c=a[u];if(s(o,c))return!0;if(e.isTag(c)&&e.getName(c)===l)break}return!1},"only-of-type"(o,{adapter:e,equals:s}){const a=e.getName(o);return e.getSiblings(o).every(l=>s(o,l)||!e.isTag(l)||e.getName(l)!==a)},"only-child"(o,{adapter:e,equals:s}){return e.getSiblings(o).every(a=>s(o,a)||!e.isTag(a))}};function verifyPseudoArgs(o,e,s,a){if(s===null){if(o.length>a)throw new Error(`Pseudo-class :${e} requires an argument`)}else if(o.length===a)throw new Error(`Pseudo-class :${e} doesn't have any arguments`)}const aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},PLACEHOLDER_ELEMENT={};function ensureIsTag(o,e){return o===boolbase.falseFunc?boolbase.falseFunc:s=>e.isTag(s)&&o(s)}function getNextSiblings(o,e){const s=e.getSiblings(o);if(s.length<=1)return[];const a=s.indexOf(o);return a<0||a===s.length-1?[]:s.slice(a+1).filter(e.isTag)}function copyOptions(o){return{xmlMode:!!o.xmlMode,lowerCaseAttributeNames:!!o.lowerCaseAttributeNames,lowerCaseTags:!!o.lowerCaseTags,quirksMode:!!o.quirksMode,cacheResults:!!o.cacheResults,pseudos:o.pseudos,adapter:o.adapter,equals:o.equals}}const is$2=(o,e,s,a,l)=>{const u=l(e,copyOptions(s),a);return u===boolbase.trueFunc?o:u===boolbase.falseFunc?boolbase.falseFunc:c=>u(c)&&o(c)},subselects={is:is$2,matches:is$2,where:is$2,not(o,e,s,a,l){const u=l(e,copyOptions(s),a);return u===boolbase.falseFunc?o:u===boolbase.trueFunc?boolbase.falseFunc:c=>!u(c)&&o(c)},has(o,e,s,a,l){const{adapter:u}=s,c=copyOptions(s);c.relativeSelector=!0;const d=e.some(m=>m.some(isTraversal))?[PLACEHOLDER_ELEMENT]:void 0,h=l(e,c,d);if(h===boolbase.falseFunc)return boolbase.falseFunc;const p=ensureIsTag(h,u);if(d&&h!==boolbase.trueFunc){const{shouldTestNextSiblings:m=!1}=h;return g=>{if(!o(g))return!1;d[0]=g;const y=u.getChildren(g),A=m?[...y,...getNextSiblings(g,u)]:y;return u.existsOne(p,A)}}return m=>o(m)&&u.existsOne(p,u.getChildren(m))}};function compilePseudoSelector(o,e,s,a,l){var u;const{name:c,data:d}=e;if(Array.isArray(d)){if(!(c in subselects))throw new Error(`Unknown pseudo-class :${c}(${d})`);return subselects[c](o,d,s,a,l)}const h=(u=s.pseudos)===null||u===void 0?void 0:u[c],p=typeof h=="string"?h:aliases[c];if(typeof p=="string"){if(d!=null)throw new Error(`Pseudo ${c} doesn't have any arguments`);const m=parse$6(p);return subselects.is(o,m,s,a,l)}if(typeof h=="function")return verifyPseudoArgs(h,c,d,1),m=>h(m,d)&&o(m);if(c in filters)return filters[c](o,d,s,a);if(c in pseudos){const m=pseudos[c];return verifyPseudoArgs(m,c,d,2),g=>m(g,s,d)&&o(g)}throw new Error(`Unknown pseudo-class :${c}`)}function getElementParent(o,e){const s=e.getParent(o);return s&&e.isTag(s)?s:null}function compileGeneralSelector(o,e,s,a,l){const{adapter:u,equals:c}=s;switch(e.type){case SelectorType.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case SelectorType.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case SelectorType.Attribute:{if(e.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!s.xmlMode||s.lowerCaseAttributeNames)&&(e.name=e.name.toLowerCase()),attributeRules[e.action](o,e,s)}case SelectorType.Pseudo:return compilePseudoSelector(o,e,s,a,l);case SelectorType.Tag:{if(e.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:d}=e;return(!s.xmlMode||s.lowerCaseTags)&&(d=d.toLowerCase()),function(p){return u.getName(p)===d&&o(p)}}case SelectorType.Descendant:{if(s.cacheResults===!1||typeof WeakSet>"u")return function(p){let m=p;for(;m=getElementParent(m,u);)if(o(m))return!0;return!1};const d=new WeakSet;return function(p){let m=p;for(;m=getElementParent(m,u);)if(!d.has(m)){if(u.isTag(m)&&o(m))return!0;d.add(m)}return!1}}case"_flexibleDescendant":return function(h){let p=h;do if(o(p))return!0;while(p=getElementParent(p,u));return!1};case SelectorType.Parent:return function(h){return u.getChildren(h).some(p=>u.isTag(p)&&o(p))};case SelectorType.Child:return function(h){const p=u.getParent(h);return p!=null&&u.isTag(p)&&o(p)};case SelectorType.Sibling:return function(h){const p=u.getSiblings(h);for(let m=0;m<p.length;m++){const g=p[m];if(c(h,g))break;if(u.isTag(g)&&o(g))return!0}return!1};case SelectorType.Adjacent:return u.prevElementSibling?function(h){const p=u.prevElementSibling(h);return p!=null&&o(p)}:function(h){const p=u.getSiblings(h);let m;for(let g=0;g<p.length;g++){const y=p[g];if(c(h,y))break;u.isTag(y)&&(m=y)}return!!m&&o(m)};case SelectorType.Universal:{if(e.namespace!=null&&e.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return o}}}function includesScopePseudo(o){return o.type===SelectorType.Pseudo&&(o.name==="scope"||Array.isArray(o.data)&&o.data.some(e=>e.some(includesScopePseudo)))}const DESCENDANT_TOKEN={type:SelectorType.Descendant},FLEXIBLE_DESCENDANT_TOKEN={type:"_flexibleDescendant"},SCOPE_TOKEN={type:SelectorType.Pseudo,name:"scope",data:null};function absolutize(o,{adapter:e},s){const a=!!(s!=null&&s.every(l=>{const u=e.isTag(l)&&e.getParent(l);return l===PLACEHOLDER_ELEMENT||u&&e.isTag(u)}));for(const l of o){if(!(l.length>0&&isTraversal(l[0])&&l[0].type!==SelectorType.Descendant))if(a&&!l.some(includesScopePseudo))l.unshift(DESCENDANT_TOKEN);else continue;l.unshift(SCOPE_TOKEN)}}function compileToken(o,e,s){var a;o.forEach(sortByProcedure),s=(a=e.context)!==null&&a!==void 0?a:s;const l=Array.isArray(s),u=s&&(Array.isArray(s)?s:[s]);if(e.relativeSelector!==!1)absolutize(o,e,u);else if(o.some(h=>h.length>0&&isTraversal(h[0])))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let c=!1;const d=o.map(h=>{if(h.length>=2){const[p,m]=h;p.type!==SelectorType.Pseudo||p.name!=="scope"||(l&&m.type===SelectorType.Descendant?h[1]=FLEXIBLE_DESCENDANT_TOKEN:(m.type===SelectorType.Adjacent||m.type===SelectorType.Sibling)&&(c=!0))}return compileRules(h,e,u)}).reduce(reduceRules,boolbase.falseFunc);return d.shouldTestNextSiblings=c,d}function compileRules(o,e,s){var a;return o.reduce((l,u)=>l===boolbase.falseFunc?boolbase.falseFunc:compileGeneralSelector(l,u,e,s,compileToken),(a=e.rootFunc)!==null&&a!==void 0?a:boolbase.trueFunc)}function reduceRules(o,e){return e===boolbase.falseFunc||o===boolbase.trueFunc?o:o===boolbase.falseFunc||e===boolbase.trueFunc?e:function(a){return o(a)||e(a)}}const defaultEquals=(o,e)=>o===e,defaultOptions={adapter:DomUtils,equals:defaultEquals};function convertOptionFormats(o){var e,s,a,l;const u=o??defaultOptions;return(e=u.adapter)!==null&&e!==void 0||(u.adapter=DomUtils),(s=u.equals)!==null&&s!==void 0||(u.equals=(l=(a=u.adapter)===null||a===void 0?void 0:a.equals)!==null&&l!==void 0?l:defaultEquals),u}function wrapCompile(o){return function(s,a,l){const u=convertOptionFormats(a);return o(s,u,l)}}const _compileToken=wrapCompile(compileToken);function prepareContext(o,e,s=!1){return s&&(o=appendNextSiblings(o,e)),Array.isArray(o)?e.removeSubsets(o):e.getChildren(o)}function appendNextSiblings(o,e){const s=Array.isArray(o)?o.slice(0):[o],a=s.length;for(let l=0;l<a;l++){const u=getNextSiblings(s[l],e);s.push(...u)}return s}const filterNames=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function isFilter(o){return o.type!=="pseudo"?!1:filterNames.has(o.name)?!0:o.name==="not"&&Array.isArray(o.data)?o.data.some(e=>e.some(isFilter)):!1}function getLimit(o,e,s){const a=e!=null?parseInt(e,10):NaN;switch(o){case"first":return 1;case"nth":case"eq":return isFinite(a)?a>=0?a+1:1/0:0;case"lt":return isFinite(a)?a>=0?Math.min(a,s):1/0:0;case"gt":return isFinite(a)?1/0:0;case"odd":return 2*s;case"even":return 2*s-1;case"last":case"not":return 1/0}}function getDocumentRoot(o){for(;o.parent;)o=o.parent;return o}function groupSelectors(o){const e=[],s=[];for(const a of o)a.some(isFilter)?e.push(a):s.push(a);return[s,e]}const UNIVERSAL_SELECTOR={type:SelectorType.Universal,namespace:null},SCOPE_PSEUDO={type:SelectorType.Pseudo,name:"scope",data:null};function is$1(o,e,s={}){return some([o],e,s)}function some(o,e,s={}){if(typeof e=="function")return o.some(e);const[a,l]=groupSelectors(parse$6(e));return a.length>0&&o.some(_compileToken(a,s))||l.some(u=>filterBySelector(u,o,s).length>0)}function filterByPosition(o,e,s,a){const l=typeof s=="string"?parseInt(s,10):NaN;switch(o){case"first":case"lt":return e;case"last":return e.length>0?[e[e.length-1]]:e;case"nth":case"eq":return isFinite(l)&&Math.abs(l)<e.length?[l<0?e[e.length+l]:e[l]]:[];case"gt":return isFinite(l)?e.slice(l+1):[];case"even":return e.filter((u,c)=>c%2===0);case"odd":return e.filter((u,c)=>c%2===1);case"not":{const u=new Set(filterParsed(s,e,a));return e.filter(c=>!u.has(c))}}}function filter$1(o,e,s={}){return filterParsed(parse$6(o),e,s)}function filterParsed(o,e,s){if(e.length===0)return[];const[a,l]=groupSelectors(o);let u;if(a.length){const c=filterElements(e,a,s);if(l.length===0)return c;c.length&&(u=new Set(c))}for(let c=0;c<l.length&&(u==null?void 0:u.size)!==e.length;c++){const d=l[c];if((u?e.filter(m=>isTag(m)&&!u.has(m)):e).length===0)break;const p=filterBySelector(d,e,s);if(p.length)if(u)p.forEach(m=>u.add(m));else{if(c===l.length-1)return p;u=new Set(p)}}return typeof u<"u"?u.size===e.length?e:e.filter(c=>u.has(c)):[]}function filterBySelector(o,e,s){var a;if(o.some(isTraversal$1)){const l=(a=s.root)!==null&&a!==void 0?a:getDocumentRoot(e[0]),u={...s,context:e,relativeSelector:!1};return o.push(SCOPE_PSEUDO),findFilterElements(l,o,u,!0,e.length)}return findFilterElements(e,o,s,!1,e.length)}function select(o,e,s={},a=1/0){if(typeof o=="function")return find$2(e,o);const[l,u]=groupSelectors(parse$6(o)),c=u.map(d=>findFilterElements(e,d,s,!0,a));return l.length&&c.push(findElements(e,l,s,a)),c.length===0?[]:c.length===1?c[0]:uniqueSort(c.reduce((d,h)=>[...d,...h]))}function findFilterElements(o,e,s,a,l){const u=e.findIndex(isFilter),c=e.slice(0,u),d=e[u],h=e.length-1===u?l:1/0,p=getLimit(d.name,d.data,h);if(p===0)return[];const g=(c.length===0&&!Array.isArray(o)?getChildren$1(o).filter(isTag):c.length===0?(Array.isArray(o)?o:[o]).filter(isTag):a||c.some(isTraversal$1)?findElements(o,[c],s,p):filterElements(o,[c],s)).slice(0,p);let y=filterByPosition(d.name,g,d.data,s);if(y.length===0||e.length===u+1)return y;const A=e.slice(u+1),T=A.some(isTraversal$1);if(T){if(isTraversal$1(A[0])){const{type:E}=A[0];(E===SelectorType.Sibling||E===SelectorType.Adjacent)&&(y=prepareContext(y,DomUtils,!0)),A.unshift(UNIVERSAL_SELECTOR)}s={...s,relativeSelector:!1,rootFunc:E=>y.includes(E)}}else s.rootFunc&&s.rootFunc!==boolbaseExports.trueFunc&&(s={...s,rootFunc:boolbaseExports.trueFunc});return A.some(isFilter)?findFilterElements(y,A,s,!1,l):T?findElements(y,[A],s,l):filterElements(y,[A],s)}function findElements(o,e,s,a){const l=_compileToken(e,s,o);return find$2(o,l,a)}function find$2(o,e,s=1/0){const a=prepareContext(o,DomUtils,e.shouldTestNextSiblings);return find$3(l=>isTag(l)&&e(l),a,!0,s)}function filterElements(o,e,s){const a=(Array.isArray(o)?o:[o]).filter(isTag);if(a.length===0)return a;const l=_compileToken(e,s);return l===boolbaseExports.trueFunc?a:a.filter(l)}const reContextSelector=/^\s*(?:[+~]|:scope\b)/;function find$1(o){if(!o)return this._make([]);if(typeof o!="string"){const e=isCheerio(o)?o.toArray():[o],s=this.toArray();return this._make(e.filter(a=>s.some(l=>contains$1(l,a))))}return this._findBySelector(o,Number.POSITIVE_INFINITY)}function _findBySelector(o,e){var s;const a=this.toArray(),l=reContextSelector.test(o)?a:this.children().toArray(),u={context:a,root:(s=this._root)===null||s===void 0?void 0:s[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(select(o,l,u,e))}function _getMatcher(o){return function(e,...s){return function(a){var l;let u=o(e,this);return a&&(u=filterArray(u,a,this.options.xmlMode,(l=this._root)===null||l===void 0?void 0:l[0])),this._make(this.length>1&&u.length>1?s.reduce((c,d)=>d(c),u):u)}}}const _matcher=_getMatcher((o,e)=>{let s=[];for(let a=0;a<e.length;a++){const l=o(e[a]);l.length>0&&(s=s.concat(l))}return s}),_singleMatcher=_getMatcher((o,e)=>{const s=[];for(let a=0;a<e.length;a++){const l=o(e[a]);l!==null&&s.push(l)}return s});function _matchUntil(o,...e){let s=null;const a=_getMatcher((l,u)=>{const c=[];return domEach(u,d=>{for(let h;(h=l(d))&&!(s!=null&&s(h,c.length));d=h)c.push(h)}),c})(o,...e);return function(l,u){s=typeof l=="string"?d=>is$1(d,l,this.options):l?getFilterFn(l):null;const c=a.call(this,u);return s=null,c}}function _removeDuplicates(o){return o.length>1?Array.from(new Set(o)):o}const parent=_singleMatcher(({parent:o})=>o&&!isDocument(o)?o:null,_removeDuplicates),parents=_matcher(o=>{const e=[];for(;o.parent&&!isDocument(o.parent);)e.push(o.parent),o=o.parent;return e},uniqueSort,o=>o.reverse()),parentsUntil=_matchUntil(({parent:o})=>o&&!isDocument(o)?o:null,uniqueSort,o=>o.reverse());function closest(o){var e;const s=[];if(!o)return this._make(s);const a={xmlMode:this.options.xmlMode,root:(e=this._root)===null||e===void 0?void 0:e[0]},l=typeof o=="string"?u=>is$1(u,o,a):getFilterFn(o);return domEach(this,u=>{for(u&&!isDocument(u)&&!isTag(u)&&(u=u.parent);u&&isTag(u);){if(l(u,0)){s.includes(u)||s.push(u);break}u=u.parent}}),this._make(s)}const next=_singleMatcher(o=>nextElementSibling(o)),nextAll=_matcher(o=>{const e=[];for(;o.next;)o=o.next,isTag(o)&&e.push(o);return e},_removeDuplicates),nextUntil=_matchUntil(o=>nextElementSibling(o),_removeDuplicates),prev=_singleMatcher(o=>prevElementSibling(o)),prevAll=_matcher(o=>{const e=[];for(;o.prev;)o=o.prev,isTag(o)&&e.push(o);return e},_removeDuplicates),prevUntil=_matchUntil(o=>prevElementSibling(o),_removeDuplicates),siblings=_matcher(o=>getSiblings(o).filter(e=>isTag(e)&&e!==o),uniqueSort),children=_matcher(o=>getChildren$1(o).filter(isTag),_removeDuplicates);function contents(){const o=this.toArray().reduce((e,s)=>hasChildren(s)?e.concat(s.children):e,[]);return this._make(o)}function each(o){let e=0;const s=this.length;for(;e<s&&o.call(this[e],e,this[e])!==!1;)++e;return this}function map(o){let e=[];for(let s=0;s<this.length;s++){const a=this[s],l=o.call(a,s,a);l!=null&&(e=e.concat(l))}return this._make(e)}function getFilterFn(o){return typeof o=="function"?(e,s)=>o.call(e,s,e):isCheerio(o)?e=>Array.prototype.includes.call(o,e):function(e){return o===e}}function filter(o){var e;return this._make(filterArray(this.toArray(),o,this.options.xmlMode,(e=this._root)===null||e===void 0?void 0:e[0]))}function filterArray(o,e,s,a){return typeof e=="string"?filter$1(e,o,{xmlMode:s,root:a}):o.filter(getFilterFn(e))}function is(o){const e=this.toArray();return typeof o=="string"?some(e.filter(isTag),o,this.options):o?e.some(getFilterFn(o)):!1}function not(o){let e=this.toArray();if(typeof o=="string"){const s=new Set(filter$1(o,e,this.options));e=e.filter(a=>!s.has(a))}else{const s=getFilterFn(o);e=e.filter((a,l)=>!s(a,l))}return this._make(e)}function has(o){return this.filter(typeof o=="string"?`:has(${o})`:(e,s)=>this._make(s).find(o).length>0)}function first(){return this.length>1?this._make(this[0]):this}function last(){return this.length>0?this._make(this[this.length-1]):this}function eq(o){var e;return o=+o,o===0&&this.length<=1?this:(o<0&&(o=this.length+o),this._make((e=this[o])!==null&&e!==void 0?e:[]))}function get$1(o){return o==null?this.toArray():this[o<0?this.length+o:o]}function toArray(){return Array.prototype.slice.call(this)}function index(o){let e,s;return o==null?(e=this.parent().children(),s=this[0]):typeof o=="string"?(e=this._make(o),s=this[0]):(e=this,s=isCheerio(o)?o[0]:o),Array.prototype.indexOf.call(e,s)}function slice(o,e){return this._make(Array.prototype.slice.call(this,o,e))}function end(){var o;return(o=this.prevObject)!==null&&o!==void 0?o:this._make([])}function add$1(o,e){const s=this._make(o,e),a=uniqueSort([...this.get(),...s.get()]);return this._make(a)}function addBack(o){return this.prevObject?this.add(o?this.prevObject.filter(o):this.prevObject):this}const Traversing=Object.freeze(Object.defineProperty({__proto__:null,_findBySelector,add:add$1,addBack,children,closest,contents,each,end,eq,filter,filterArray,find:find$1,first,get:get$1,has,index,is,last,map,next,nextAll,nextUntil,not,parent,parents,parentsUntil,prev,prevAll,prevUntil,siblings,slice,toArray},Symbol.toStringTag,{value:"Module"}));function getParse(o){return function(s,a,l,u){if(typeof Buffer$1<"u"&&Buffer$1.isBuffer(s)&&(s=s.toString()),typeof s=="string")return o(s,a,l,u);const c=s;if(!Array.isArray(c)&&isDocument(c))return c;const d=new Document([]);return update$1(c,d),d}}function update$1(o,e){const s=Array.isArray(o)?o:[o];e?e.children=s:e=null;for(let a=0;a<s.length;a++){const l=s[a];l.parent&&l.parent.children!==s&&removeElement(l),e?(l.prev=s[a-1]||null,l.next=s[a+1]||null):l.prev=l.next=null,l.parent=e}return e}function _makeDomArray(o,e){if(o==null)return[];if(typeof o=="string")return this._parse(o,this.options,!1,null).children.slice(0);if("length"in o){if(o.length===1)return this._makeDomArray(o[0],e);const s=[];for(let a=0;a<o.length;a++){const l=o[a];if(typeof l=="object"){if(l==null)continue;if(!("length"in l)){s.push(e?cloneNode(l,!0):l);continue}}s.push(...this._makeDomArray(l,e))}return s}return[e?cloneNode(o,!0):o]}function _insert(o){return function(...e){const s=this.length-1;return domEach(this,(a,l)=>{if(!hasChildren(a))return;const u=typeof e[0]=="function"?e[0].call(a,l,this._render(a.children)):e,c=this._makeDomArray(u,l<s);o(c,a.children,a)})}}function uniqueSplice(o,e,s,a,l){var u,c;const d=[e,s,...a],h=e===0?null:o[e-1],p=e+s>=o.length?null:o[e+s];for(let m=0;m<a.length;++m){const g=a[m],y=g.parent;if(y){const T=y.children.indexOf(g);T!==-1&&(y.children.splice(T,1),l===y&&e>T&&d[0]--)}g.parent=l,g.prev&&(g.prev.next=(u=g.next)!==null&&u!==void 0?u:null),g.next&&(g.next.prev=(c=g.prev)!==null&&c!==void 0?c:null),g.prev=m===0?h:a[m-1],g.next=m===a.length-1?p:a[m+1]}return h&&(h.next=a[0]),p&&(p.prev=a[a.length-1]),o.splice(...d)}function appendTo(o){return(isCheerio(o)?o:this._make(o)).append(this),this}function prependTo(o){return(isCheerio(o)?o:this._make(o)).prepend(this),this}const append=_insert((o,e,s)=>{uniqueSplice(e,e.length,0,o,s)}),prepend=_insert((o,e,s)=>{uniqueSplice(e,0,0,o,s)});function _wrap(o){return function(e){const s=this.length-1,a=this.parents().last();for(let l=0;l<this.length;l++){const u=this[l],c=typeof e=="function"?e.call(u,l,u):typeof e=="string"&&!isHtml(e)?a.find(e).clone():e,[d]=this._makeDomArray(c,l<s);if(!d||!hasChildren(d))continue;let h=d,p=0;for(;p<h.children.length;){const m=h.children[p];isTag(m)?(h=m,p=0):p++}o(u,h,[d])}return this}}const wrap=_wrap((o,e,s)=>{const{parent:a}=o;if(!a)return;const l=a.children,u=l.indexOf(o);update$1([o],e),uniqueSplice(l,u,0,s,a)}),wrapInner=_wrap((o,e,s)=>{hasChildren(o)&&(update$1(o.children,e),update$1(s,o))});function unwrap(o){return this.parent(o).not("body").each((e,s)=>{this._make(s).replaceWith(s.children)}),this}function wrapAll(o){const e=this[0];if(e){const s=this._make(typeof o=="function"?o.call(e,0,e):o).insertBefore(e);let a;for(let u=0;u<s.length;u++)s[u].type===Tag$1&&(a=s[u]);let l=0;for(;a&&l<a.children.length;){const u=a.children[l];u.type===Tag$1?(a=u,l=0):l++}a&&this._make(a).append(this)}return this}function after(...o){const e=this.length-1;return domEach(this,(s,a)=>{if(!hasChildren(s)||!s.parent)return;const l=s.parent.children,u=l.indexOf(s);if(u===-1)return;const c=typeof o[0]=="function"?o[0].call(s,a,this._render(s.children)):o,d=this._makeDomArray(c,a<e);uniqueSplice(l,u+1,0,d,s.parent)})}function insertAfter(o){typeof o=="string"&&(o=this._make(o)),this.remove();const e=[];for(const s of this._makeDomArray(o)){const a=this.clone().toArray(),{parent:l}=s;if(!l)continue;const u=l.children,c=u.indexOf(s);c!==-1&&(uniqueSplice(u,c+1,0,a,l),e.push(...a))}return this._make(e)}function before(...o){const e=this.length-1;return domEach(this,(s,a)=>{if(!hasChildren(s)||!s.parent)return;const l=s.parent.children,u=l.indexOf(s);if(u===-1)return;const c=typeof o[0]=="function"?o[0].call(s,a,this._render(s.children)):o,d=this._makeDomArray(c,a<e);uniqueSplice(l,u,0,d,s.parent)})}function insertBefore(o){const e=this._make(o);this.remove();const s=[];return domEach(e,a=>{const l=this.clone().toArray(),{parent:u}=a;if(!u)return;const c=u.children,d=c.indexOf(a);d!==-1&&(uniqueSplice(c,d,0,l,u),s.push(...l))}),this._make(s)}function remove$5(o){const e=o?this.filter(o):this;return domEach(e,s=>{removeElement(s),s.prev=s.next=s.parent=null}),this}function replaceWith(o){return domEach(this,(e,s)=>{const{parent:a}=e;if(!a)return;const l=a.children,u=typeof o=="function"?o.call(e,s,e):o,c=this._makeDomArray(u);update$1(c,null);const d=l.indexOf(e);uniqueSplice(l,d,1,c,a),c.includes(e)||(e.parent=e.prev=e.next=null)})}function empty$1(){return domEach(this,o=>{if(hasChildren(o)){for(const e of o.children)e.next=e.prev=e.parent=null;o.children.length=0}})}function html$3(o){if(o===void 0){const e=this[0];return!e||!hasChildren(e)?null:this._render(e.children)}return domEach(this,e=>{if(!hasChildren(e))return;for(const a of e.children)a.next=a.prev=a.parent=null;const s=isCheerio(o)?o.toArray():this._parse(`${o}`,this.options,!1,e).children;update$1(s,e)})}function toString(){return this._render(this)}function text$4(o){return o===void 0?text$5(this):typeof o=="function"?domEach(this,(e,s)=>this._make(e).text(o.call(e,s,text$5([e])))):domEach(this,e=>{if(!hasChildren(e))return;for(const a of e.children)a.next=a.prev=a.parent=null;const s=new Text$1(`${o}`);update$1(s,e)})}function clone(){const o=Array.prototype.map.call(this.get(),s=>cloneNode(s,!0)),e=new Document(o);for(const s of o)s.parent=e;return this._make(o)}const Manipulation=Object.freeze(Object.defineProperty({__proto__:null,_makeDomArray,after,append,appendTo,before,clone,empty:empty$1,html:html$3,insertAfter,insertBefore,prepend,prependTo,remove:remove$5,replaceWith,text:text$4,toString,unwrap,wrap,wrapAll,wrapInner},Symbol.toStringTag,{value:"Module"}));function css$2(o,e){if(o!=null&&e!=null||typeof o=="object"&&!Array.isArray(o))return domEach(this,(s,a)=>{isTag(s)&&setCss(s,o,e,a)});if(this.length!==0)return getCss(this[0],o)}function setCss(o,e,s,a){if(typeof e=="string"){const l=getCss(o),u=typeof s=="function"?s.call(o,a,l[e]):s;u===""?delete l[e]:u!=null&&(l[e]=u),o.attribs.style=stringify$1(l)}else if(typeof e=="object"){const l=Object.keys(e);for(let u=0;u<l.length;u++){const c=l[u];setCss(o,c,e[c],u)}}}function getCss(o,e){if(!o||!isTag(o))return;const s=parse$4(o.attribs.style);if(typeof e=="string")return s[e];if(Array.isArray(e)){const a={};for(const l of e)s[l]!=null&&(a[l]=s[l]);return a}return s}function stringify$1(o){return Object.keys(o).reduce((e,s)=>`${e}${e?" ":""}${s}: ${o[s]};`,"")}function parse$4(o){if(o=(o||"").trim(),!o)return{};const e={};let s;for(const a of o.split(";")){const l=a.indexOf(":");if(l<1||l===a.length-1){const u=a.trimEnd();u.length>0&&s!==void 0&&(e[s]+=`;${u}`)}else s=a.slice(0,l).trim(),e[s]=a.slice(l+1).trim()}return e}const Css=Object.freeze(Object.defineProperty({__proto__:null,css:css$2},Symbol.toStringTag,{value:"Module"})),submittableSelector="input,select,textarea,keygen",r20=/%20/g,rCRLF=/\r?\n/g;function serialize(){return this.serializeArray().map(s=>`${encodeURIComponent(s.name)}=${encodeURIComponent(s.value)}`).join("&").replace(r20,"+")}function serializeArray(){return this.map((o,e)=>{const s=this._make(e);return isTag(e)&&e.name==="form"?s.find(submittableSelector).toArray():s.filter(submittableSelector).toArray()}).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map((o,e)=>{var s;const a=this._make(e),l=a.attr("name"),u=(s=a.val())!==null&&s!==void 0?s:"";return Array.isArray(u)?u.map(c=>({name:l,value:c.replace(rCRLF,`\r
`)})):{name:l,value:u.replace(rCRLF,`\r
`)}}).toArray()}const Forms=Object.freeze(Object.defineProperty({__proto__:null,serialize,serializeArray},Symbol.toStringTag,{value:"Module"}));function getExtractDescr(o){var e;return typeof o=="string"?{selector:o,value:"textContent"}:{selector:o.selector,value:(e=o.value)!==null&&e!==void 0?e:"textContent"}}function extract(o){const e={};for(const s in o){const a=o[s],l=Array.isArray(a),{selector:u,value:c}=getExtractDescr(l?a[0]:a),d=typeof c=="function"?c:typeof c=="string"?h=>this._make(h).prop(c):h=>this._make(h).extract(c);if(l)e[s]=this._findBySelector(u,Number.POSITIVE_INFINITY).map((h,p)=>d(p,s,e)).get();else{const h=this._findBySelector(u,1);e[s]=h.length>0?d(h[0],s,e):void 0}}return e}const Extract=Object.freeze(Object.defineProperty({__proto__:null,extract},Symbol.toStringTag,{value:"Module"}));class Cheerio{constructor(e,s,a){if(this.length=0,this.options=a,this._root=s,e){for(let l=0;l<e.length;l++)this[l]=e[l];this.length=e.length}}}Cheerio.prototype.cheerio="[cheerio object]",Cheerio.prototype.splice=Array.prototype.splice,Cheerio.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],Object.assign(Cheerio.prototype,Attributes,Traversing,Manipulation,Css,Forms,Extract);function getLoad(o,e){return function s(a,l,u=!0){if(a==null)throw new Error("cheerio.load() expects a string");const c=flattenOptions(l),d=o(a,c,u,null);class h extends Cheerio{_make(g,y){const A=p(g,y);return A.prevObject=this,A}_parse(g,y,A,T){return o(g,y,A,T)}_render(g){return e(g,this.options)}}function p(m,g,y=d,A){if(m&&isCheerio(m))return m;const T=flattenOptions(A,c),E=typeof y=="string"?[o(y,T,!1,null)]:"length"in y?y:[y],v=isCheerio(E)?E:new h(E,null,T);if(v._root=v,!m)return new h(void 0,v,T);const _=typeof m=="string"&&isHtml(m)?o(m,T,!1,null).children:isNode(m)?[m]:Array.isArray(m)?m:void 0,w=new h(_,v,T);if(_)return w;if(typeof m!="string")throw new TypeError("Unexpected type of selector");let R=m;const k=g?typeof g=="string"?isHtml(g)?new h([o(g,T,!1,null)],v,T):(R=`${g} ${R}`,v):isCheerio(g)?g:new h(Array.isArray(g)?g:[g],v,T):v;return k?k.find(R):w}return Object.assign(p,staticMethods,{load:s,_root:d,_options:c,fn:h.prototype,prototype:h.prototype}),p}}function isNode(o){return!!o.name||o.type===Root||o.type===Text$2||o.type===Comment$1}const UNDEFINED_CODE_POINTS=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),REPLACEMENT_CHARACTER="";var CODE_POINTS;(function(o){o[o.EOF=-1]="EOF",o[o.NULL=0]="NULL",o[o.TABULATION=9]="TABULATION",o[o.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",o[o.LINE_FEED=10]="LINE_FEED",o[o.FORM_FEED=12]="FORM_FEED",o[o.SPACE=32]="SPACE",o[o.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",o[o.QUOTATION_MARK=34]="QUOTATION_MARK",o[o.AMPERSAND=38]="AMPERSAND",o[o.APOSTROPHE=39]="APOSTROPHE",o[o.HYPHEN_MINUS=45]="HYPHEN_MINUS",o[o.SOLIDUS=47]="SOLIDUS",o[o.DIGIT_0=48]="DIGIT_0",o[o.DIGIT_9=57]="DIGIT_9",o[o.SEMICOLON=59]="SEMICOLON",o[o.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",o[o.EQUALS_SIGN=61]="EQUALS_SIGN",o[o.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",o[o.QUESTION_MARK=63]="QUESTION_MARK",o[o.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",o[o.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",o[o.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",o[o.GRAVE_ACCENT=96]="GRAVE_ACCENT",o[o.LATIN_SMALL_A=97]="LATIN_SMALL_A",o[o.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(CODE_POINTS||(CODE_POINTS={}));const SEQUENCES={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function isSurrogate(o){return o>=55296&&o<=57343}function isSurrogatePair(o){return o>=56320&&o<=57343}function getSurrogatePairCodePoint(o,e){return(o-55296)*1024+9216+e}function isControlCodePoint(o){return o!==32&&o!==10&&o!==13&&o!==9&&o!==12&&o>=1&&o<=31||o>=127&&o<=159}function isUndefinedCodePoint(o){return o>=64976&&o<=65007||UNDEFINED_CODE_POINTS.has(o)}var ERR;(function(o){o.controlCharacterInInputStream="control-character-in-input-stream",o.noncharacterInInputStream="noncharacter-in-input-stream",o.surrogateInInputStream="surrogate-in-input-stream",o.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",o.endTagWithAttributes="end-tag-with-attributes",o.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",o.unexpectedSolidusInTag="unexpected-solidus-in-tag",o.unexpectedNullCharacter="unexpected-null-character",o.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",o.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",o.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",o.missingEndTagName="missing-end-tag-name",o.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",o.unknownNamedCharacterReference="unknown-named-character-reference",o.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",o.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",o.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",o.eofBeforeTagName="eof-before-tag-name",o.eofInTag="eof-in-tag",o.missingAttributeValue="missing-attribute-value",o.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",o.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",o.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",o.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",o.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",o.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",o.missingDoctypePublicIdentifier="missing-doctype-public-identifier",o.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",o.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",o.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",o.cdataInHtmlContent="cdata-in-html-content",o.incorrectlyOpenedComment="incorrectly-opened-comment",o.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",o.eofInDoctype="eof-in-doctype",o.nestedComment="nested-comment",o.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",o.eofInComment="eof-in-comment",o.incorrectlyClosedComment="incorrectly-closed-comment",o.eofInCdata="eof-in-cdata",o.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",o.nullCharacterReference="null-character-reference",o.surrogateCharacterReference="surrogate-character-reference",o.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",o.controlCharacterReference="control-character-reference",o.noncharacterCharacterReference="noncharacter-character-reference",o.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",o.missingDoctypeName="missing-doctype-name",o.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",o.duplicateAttribute="duplicate-attribute",o.nonConformingDoctype="non-conforming-doctype",o.missingDoctype="missing-doctype",o.misplacedDoctype="misplaced-doctype",o.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",o.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",o.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",o.openElementsLeftAfterEof="open-elements-left-after-eof",o.abandonedHeadElementChild="abandoned-head-element-child",o.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",o.nestedNoscriptInHead="nested-noscript-in-head",o.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ERR||(ERR={}));const DEFAULT_BUFFER_WATERLINE=65536;class Preprocessor{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=DEFAULT_BUFFER_WATERLINE,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,s){const{line:a,col:l,offset:u}=this,c=l+s,d=u+s;return{code:e,startLine:a,endLine:a,startCol:c,endCol:c,startOffset:d,endOffset:d}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const s=this.html.charCodeAt(this.pos+1);if(isSurrogatePair(s))return this.pos++,this._addGap(),getSurrogatePairCodePoint(e,s)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,CODE_POINTS.EOF;return this._err(ERR.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,s){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=s}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,s){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(s)return this.html.startsWith(e,this.pos);for(let a=0;a<e.length;a++)if((this.html.charCodeAt(this.pos+a)|32)!==e.charCodeAt(a))return!1;return!0}peek(e){const s=this.pos+e;if(s>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,CODE_POINTS.EOF;const a=this.html.charCodeAt(s);return a===CODE_POINTS.CARRIAGE_RETURN?CODE_POINTS.LINE_FEED:a}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,CODE_POINTS.EOF;let e=this.html.charCodeAt(this.pos);return e===CODE_POINTS.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,CODE_POINTS.LINE_FEED):e===CODE_POINTS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,isSurrogate(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===CODE_POINTS.LINE_FEED||e===CODE_POINTS.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){isControlCodePoint(e)?this._err(ERR.controlCharacterInInputStream):isUndefinedCodePoint(e)&&this._err(ERR.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var TokenType;(function(o){o[o.CHARACTER=0]="CHARACTER",o[o.NULL_CHARACTER=1]="NULL_CHARACTER",o[o.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",o[o.START_TAG=3]="START_TAG",o[o.END_TAG=4]="END_TAG",o[o.COMMENT=5]="COMMENT",o[o.DOCTYPE=6]="DOCTYPE",o[o.EOF=7]="EOF",o[o.HIBERNATION=8]="HIBERNATION"})(TokenType||(TokenType={}));function getTokenAttr(o,e){for(let s=o.attrs.length-1;s>=0;s--)if(o.attrs[s].name===e)return o.attrs[s].value;return null}const htmlDecodeTree=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(o=>o.charCodeAt(0))),decodeMap=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function replaceCodePoint(o){var e;return o>=55296&&o<=57343||o>1114111?65533:(e=decodeMap.get(o))!==null&&e!==void 0?e:o}var CharCodes;(function(o){o[o.NUM=35]="NUM",o[o.SEMI=59]="SEMI",o[o.EQUALS=61]="EQUALS",o[o.ZERO=48]="ZERO",o[o.NINE=57]="NINE",o[o.LOWER_A=97]="LOWER_A",o[o.LOWER_F=102]="LOWER_F",o[o.LOWER_X=120]="LOWER_X",o[o.LOWER_Z=122]="LOWER_Z",o[o.UPPER_A=65]="UPPER_A",o[o.UPPER_F=70]="UPPER_F",o[o.UPPER_Z=90]="UPPER_Z"})(CharCodes||(CharCodes={}));const TO_LOWER_BIT=32;var BinTrieFlags;(function(o){o[o.VALUE_LENGTH=49152]="VALUE_LENGTH",o[o.BRANCH_LENGTH=16256]="BRANCH_LENGTH",o[o.JUMP_TABLE=127]="JUMP_TABLE"})(BinTrieFlags||(BinTrieFlags={}));function isNumber$2(o){return o>=CharCodes.ZERO&&o<=CharCodes.NINE}function isHexadecimalCharacter(o){return o>=CharCodes.UPPER_A&&o<=CharCodes.UPPER_F||o>=CharCodes.LOWER_A&&o<=CharCodes.LOWER_F}function isAsciiAlphaNumeric$1(o){return o>=CharCodes.UPPER_A&&o<=CharCodes.UPPER_Z||o>=CharCodes.LOWER_A&&o<=CharCodes.LOWER_Z||isNumber$2(o)}function isEntityInAttributeInvalidEnd(o){return o===CharCodes.EQUALS||isAsciiAlphaNumeric$1(o)}var EntityDecoderState;(function(o){o[o.EntityStart=0]="EntityStart",o[o.NumericStart=1]="NumericStart",o[o.NumericDecimal=2]="NumericDecimal",o[o.NumericHex=3]="NumericHex",o[o.NamedEntity=4]="NamedEntity"})(EntityDecoderState||(EntityDecoderState={}));var DecodingMode;(function(o){o[o.Legacy=0]="Legacy",o[o.Strict=1]="Strict",o[o.Attribute=2]="Attribute"})(DecodingMode||(DecodingMode={}));class EntityDecoder{constructor(e,s,a){this.decodeTree=e,this.emitCodePoint=s,this.errors=a,this.state=EntityDecoderState.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=DecodingMode.Strict}startEntity(e){this.decodeMode=e,this.state=EntityDecoderState.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,s){switch(this.state){case EntityDecoderState.EntityStart:return e.charCodeAt(s)===CharCodes.NUM?(this.state=EntityDecoderState.NumericStart,this.consumed+=1,this.stateNumericStart(e,s+1)):(this.state=EntityDecoderState.NamedEntity,this.stateNamedEntity(e,s));case EntityDecoderState.NumericStart:return this.stateNumericStart(e,s);case EntityDecoderState.NumericDecimal:return this.stateNumericDecimal(e,s);case EntityDecoderState.NumericHex:return this.stateNumericHex(e,s);case EntityDecoderState.NamedEntity:return this.stateNamedEntity(e,s)}}stateNumericStart(e,s){return s>=e.length?-1:(e.charCodeAt(s)|TO_LOWER_BIT)===CharCodes.LOWER_X?(this.state=EntityDecoderState.NumericHex,this.consumed+=1,this.stateNumericHex(e,s+1)):(this.state=EntityDecoderState.NumericDecimal,this.stateNumericDecimal(e,s))}addToNumericResult(e,s,a,l){if(s!==a){const u=a-s;this.result=this.result*Math.pow(l,u)+Number.parseInt(e.substr(s,u),l),this.consumed+=u}}stateNumericHex(e,s){const a=s;for(;s<e.length;){const l=e.charCodeAt(s);if(isNumber$2(l)||isHexadecimalCharacter(l))s+=1;else return this.addToNumericResult(e,a,s,16),this.emitNumericEntity(l,3)}return this.addToNumericResult(e,a,s,16),-1}stateNumericDecimal(e,s){const a=s;for(;s<e.length;){const l=e.charCodeAt(s);if(isNumber$2(l))s+=1;else return this.addToNumericResult(e,a,s,10),this.emitNumericEntity(l,2)}return this.addToNumericResult(e,a,s,10),-1}emitNumericEntity(e,s){var a;if(this.consumed<=s)return(a=this.errors)===null||a===void 0||a.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===CharCodes.SEMI)this.consumed+=1;else if(this.decodeMode===DecodingMode.Strict)return 0;return this.emitCodePoint(replaceCodePoint(this.result),this.consumed),this.errors&&(e!==CharCodes.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,s){const{decodeTree:a}=this;let l=a[this.treeIndex],u=(l&BinTrieFlags.VALUE_LENGTH)>>14;for(;s<e.length;s++,this.excess++){const c=e.charCodeAt(s);if(this.treeIndex=determineBranch(a,l,this.treeIndex+Math.max(1,u),c),this.treeIndex<0)return this.result===0||this.decodeMode===DecodingMode.Attribute&&(u===0||isEntityInAttributeInvalidEnd(c))?0:this.emitNotTerminatedNamedEntity();if(l=a[this.treeIndex],u=(l&BinTrieFlags.VALUE_LENGTH)>>14,u!==0){if(c===CharCodes.SEMI)return this.emitNamedEntityData(this.treeIndex,u,this.consumed+this.excess);this.decodeMode!==DecodingMode.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:s,decodeTree:a}=this,l=(a[s]&BinTrieFlags.VALUE_LENGTH)>>14;return this.emitNamedEntityData(s,l,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,s,a){const{decodeTree:l}=this;return this.emitCodePoint(s===1?l[e]&~BinTrieFlags.VALUE_LENGTH:l[e+1],a),s===3&&this.emitCodePoint(l[e+2],a),a}end(){var e;switch(this.state){case EntityDecoderState.NamedEntity:return this.result!==0&&(this.decodeMode!==DecodingMode.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case EntityDecoderState.NumericDecimal:return this.emitNumericEntity(0,2);case EntityDecoderState.NumericHex:return this.emitNumericEntity(0,3);case EntityDecoderState.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case EntityDecoderState.EntityStart:return 0}}}function determineBranch(o,e,s,a){const l=(e&BinTrieFlags.BRANCH_LENGTH)>>7,u=e&BinTrieFlags.JUMP_TABLE;if(l===0)return u!==0&&a===u?s:-1;if(u){const h=a-u;return h<0||h>=l?-1:o[s+h]-1}let c=s,d=c+l-1;for(;c<=d;){const h=c+d>>>1,p=o[h];if(p<a)c=h+1;else if(p>a)d=h-1;else return o[h+l]}return-1}var NS;(function(o){o.HTML="http://www.w3.org/1999/xhtml",o.MATHML="http://www.w3.org/1998/Math/MathML",o.SVG="http://www.w3.org/2000/svg",o.XLINK="http://www.w3.org/1999/xlink",o.XML="http://www.w3.org/XML/1998/namespace",o.XMLNS="http://www.w3.org/2000/xmlns/"})(NS||(NS={}));var ATTRS;(function(o){o.TYPE="type",o.ACTION="action",o.ENCODING="encoding",o.PROMPT="prompt",o.NAME="name",o.COLOR="color",o.FACE="face",o.SIZE="size"})(ATTRS||(ATTRS={}));var DOCUMENT_MODE;(function(o){o.NO_QUIRKS="no-quirks",o.QUIRKS="quirks",o.LIMITED_QUIRKS="limited-quirks"})(DOCUMENT_MODE||(DOCUMENT_MODE={}));var TAG_NAMES;(function(o){o.A="a",o.ADDRESS="address",o.ANNOTATION_XML="annotation-xml",o.APPLET="applet",o.AREA="area",o.ARTICLE="article",o.ASIDE="aside",o.B="b",o.BASE="base",o.BASEFONT="basefont",o.BGSOUND="bgsound",o.BIG="big",o.BLOCKQUOTE="blockquote",o.BODY="body",o.BR="br",o.BUTTON="button",o.CAPTION="caption",o.CENTER="center",o.CODE="code",o.COL="col",o.COLGROUP="colgroup",o.DD="dd",o.DESC="desc",o.DETAILS="details",o.DIALOG="dialog",o.DIR="dir",o.DIV="div",o.DL="dl",o.DT="dt",o.EM="em",o.EMBED="embed",o.FIELDSET="fieldset",o.FIGCAPTION="figcaption",o.FIGURE="figure",o.FONT="font",o.FOOTER="footer",o.FOREIGN_OBJECT="foreignObject",o.FORM="form",o.FRAME="frame",o.FRAMESET="frameset",o.H1="h1",o.H2="h2",o.H3="h3",o.H4="h4",o.H5="h5",o.H6="h6",o.HEAD="head",o.HEADER="header",o.HGROUP="hgroup",o.HR="hr",o.HTML="html",o.I="i",o.IMG="img",o.IMAGE="image",o.INPUT="input",o.IFRAME="iframe",o.KEYGEN="keygen",o.LABEL="label",o.LI="li",o.LINK="link",o.LISTING="listing",o.MAIN="main",o.MALIGNMARK="malignmark",o.MARQUEE="marquee",o.MATH="math",o.MENU="menu",o.META="meta",o.MGLYPH="mglyph",o.MI="mi",o.MO="mo",o.MN="mn",o.MS="ms",o.MTEXT="mtext",o.NAV="nav",o.NOBR="nobr",o.NOFRAMES="noframes",o.NOEMBED="noembed",o.NOSCRIPT="noscript",o.OBJECT="object",o.OL="ol",o.OPTGROUP="optgroup",o.OPTION="option",o.P="p",o.PARAM="param",o.PLAINTEXT="plaintext",o.PRE="pre",o.RB="rb",o.RP="rp",o.RT="rt",o.RTC="rtc",o.RUBY="ruby",o.S="s",o.SCRIPT="script",o.SEARCH="search",o.SECTION="section",o.SELECT="select",o.SOURCE="source",o.SMALL="small",o.SPAN="span",o.STRIKE="strike",o.STRONG="strong",o.STYLE="style",o.SUB="sub",o.SUMMARY="summary",o.SUP="sup",o.TABLE="table",o.TBODY="tbody",o.TEMPLATE="template",o.TEXTAREA="textarea",o.TFOOT="tfoot",o.TD="td",o.TH="th",o.THEAD="thead",o.TITLE="title",o.TR="tr",o.TRACK="track",o.TT="tt",o.U="u",o.UL="ul",o.SVG="svg",o.VAR="var",o.WBR="wbr",o.XMP="xmp"})(TAG_NAMES||(TAG_NAMES={}));var TAG_ID;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.A=1]="A",o[o.ADDRESS=2]="ADDRESS",o[o.ANNOTATION_XML=3]="ANNOTATION_XML",o[o.APPLET=4]="APPLET",o[o.AREA=5]="AREA",o[o.ARTICLE=6]="ARTICLE",o[o.ASIDE=7]="ASIDE",o[o.B=8]="B",o[o.BASE=9]="BASE",o[o.BASEFONT=10]="BASEFONT",o[o.BGSOUND=11]="BGSOUND",o[o.BIG=12]="BIG",o[o.BLOCKQUOTE=13]="BLOCKQUOTE",o[o.BODY=14]="BODY",o[o.BR=15]="BR",o[o.BUTTON=16]="BUTTON",o[o.CAPTION=17]="CAPTION",o[o.CENTER=18]="CENTER",o[o.CODE=19]="CODE",o[o.COL=20]="COL",o[o.COLGROUP=21]="COLGROUP",o[o.DD=22]="DD",o[o.DESC=23]="DESC",o[o.DETAILS=24]="DETAILS",o[o.DIALOG=25]="DIALOG",o[o.DIR=26]="DIR",o[o.DIV=27]="DIV",o[o.DL=28]="DL",o[o.DT=29]="DT",o[o.EM=30]="EM",o[o.EMBED=31]="EMBED",o[o.FIELDSET=32]="FIELDSET",o[o.FIGCAPTION=33]="FIGCAPTION",o[o.FIGURE=34]="FIGURE",o[o.FONT=35]="FONT",o[o.FOOTER=36]="FOOTER",o[o.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",o[o.FORM=38]="FORM",o[o.FRAME=39]="FRAME",o[o.FRAMESET=40]="FRAMESET",o[o.H1=41]="H1",o[o.H2=42]="H2",o[o.H3=43]="H3",o[o.H4=44]="H4",o[o.H5=45]="H5",o[o.H6=46]="H6",o[o.HEAD=47]="HEAD",o[o.HEADER=48]="HEADER",o[o.HGROUP=49]="HGROUP",o[o.HR=50]="HR",o[o.HTML=51]="HTML",o[o.I=52]="I",o[o.IMG=53]="IMG",o[o.IMAGE=54]="IMAGE",o[o.INPUT=55]="INPUT",o[o.IFRAME=56]="IFRAME",o[o.KEYGEN=57]="KEYGEN",o[o.LABEL=58]="LABEL",o[o.LI=59]="LI",o[o.LINK=60]="LINK",o[o.LISTING=61]="LISTING",o[o.MAIN=62]="MAIN",o[o.MALIGNMARK=63]="MALIGNMARK",o[o.MARQUEE=64]="MARQUEE",o[o.MATH=65]="MATH",o[o.MENU=66]="MENU",o[o.META=67]="META",o[o.MGLYPH=68]="MGLYPH",o[o.MI=69]="MI",o[o.MO=70]="MO",o[o.MN=71]="MN",o[o.MS=72]="MS",o[o.MTEXT=73]="MTEXT",o[o.NAV=74]="NAV",o[o.NOBR=75]="NOBR",o[o.NOFRAMES=76]="NOFRAMES",o[o.NOEMBED=77]="NOEMBED",o[o.NOSCRIPT=78]="NOSCRIPT",o[o.OBJECT=79]="OBJECT",o[o.OL=80]="OL",o[o.OPTGROUP=81]="OPTGROUP",o[o.OPTION=82]="OPTION",o[o.P=83]="P",o[o.PARAM=84]="PARAM",o[o.PLAINTEXT=85]="PLAINTEXT",o[o.PRE=86]="PRE",o[o.RB=87]="RB",o[o.RP=88]="RP",o[o.RT=89]="RT",o[o.RTC=90]="RTC",o[o.RUBY=91]="RUBY",o[o.S=92]="S",o[o.SCRIPT=93]="SCRIPT",o[o.SEARCH=94]="SEARCH",o[o.SECTION=95]="SECTION",o[o.SELECT=96]="SELECT",o[o.SOURCE=97]="SOURCE",o[o.SMALL=98]="SMALL",o[o.SPAN=99]="SPAN",o[o.STRIKE=100]="STRIKE",o[o.STRONG=101]="STRONG",o[o.STYLE=102]="STYLE",o[o.SUB=103]="SUB",o[o.SUMMARY=104]="SUMMARY",o[o.SUP=105]="SUP",o[o.TABLE=106]="TABLE",o[o.TBODY=107]="TBODY",o[o.TEMPLATE=108]="TEMPLATE",o[o.TEXTAREA=109]="TEXTAREA",o[o.TFOOT=110]="TFOOT",o[o.TD=111]="TD",o[o.TH=112]="TH",o[o.THEAD=113]="THEAD",o[o.TITLE=114]="TITLE",o[o.TR=115]="TR",o[o.TRACK=116]="TRACK",o[o.TT=117]="TT",o[o.U=118]="U",o[o.UL=119]="UL",o[o.SVG=120]="SVG",o[o.VAR=121]="VAR",o[o.WBR=122]="WBR",o[o.XMP=123]="XMP"})(TAG_ID||(TAG_ID={}));const TAG_NAME_TO_ID=new Map([[TAG_NAMES.A,TAG_ID.A],[TAG_NAMES.ADDRESS,TAG_ID.ADDRESS],[TAG_NAMES.ANNOTATION_XML,TAG_ID.ANNOTATION_XML],[TAG_NAMES.APPLET,TAG_ID.APPLET],[TAG_NAMES.AREA,TAG_ID.AREA],[TAG_NAMES.ARTICLE,TAG_ID.ARTICLE],[TAG_NAMES.ASIDE,TAG_ID.ASIDE],[TAG_NAMES.B,TAG_ID.B],[TAG_NAMES.BASE,TAG_ID.BASE],[TAG_NAMES.BASEFONT,TAG_ID.BASEFONT],[TAG_NAMES.BGSOUND,TAG_ID.BGSOUND],[TAG_NAMES.BIG,TAG_ID.BIG],[TAG_NAMES.BLOCKQUOTE,TAG_ID.BLOCKQUOTE],[TAG_NAMES.BODY,TAG_ID.BODY],[TAG_NAMES.BR,TAG_ID.BR],[TAG_NAMES.BUTTON,TAG_ID.BUTTON],[TAG_NAMES.CAPTION,TAG_ID.CAPTION],[TAG_NAMES.CENTER,TAG_ID.CENTER],[TAG_NAMES.CODE,TAG_ID.CODE],[TAG_NAMES.COL,TAG_ID.COL],[TAG_NAMES.COLGROUP,TAG_ID.COLGROUP],[TAG_NAMES.DD,TAG_ID.DD],[TAG_NAMES.DESC,TAG_ID.DESC],[TAG_NAMES.DETAILS,TAG_ID.DETAILS],[TAG_NAMES.DIALOG,TAG_ID.DIALOG],[TAG_NAMES.DIR,TAG_ID.DIR],[TAG_NAMES.DIV,TAG_ID.DIV],[TAG_NAMES.DL,TAG_ID.DL],[TAG_NAMES.DT,TAG_ID.DT],[TAG_NAMES.EM,TAG_ID.EM],[TAG_NAMES.EMBED,TAG_ID.EMBED],[TAG_NAMES.FIELDSET,TAG_ID.FIELDSET],[TAG_NAMES.FIGCAPTION,TAG_ID.FIGCAPTION],[TAG_NAMES.FIGURE,TAG_ID.FIGURE],[TAG_NAMES.FONT,TAG_ID.FONT],[TAG_NAMES.FOOTER,TAG_ID.FOOTER],[TAG_NAMES.FOREIGN_OBJECT,TAG_ID.FOREIGN_OBJECT],[TAG_NAMES.FORM,TAG_ID.FORM],[TAG_NAMES.FRAME,TAG_ID.FRAME],[TAG_NAMES.FRAMESET,TAG_ID.FRAMESET],[TAG_NAMES.H1,TAG_ID.H1],[TAG_NAMES.H2,TAG_ID.H2],[TAG_NAMES.H3,TAG_ID.H3],[TAG_NAMES.H4,TAG_ID.H4],[TAG_NAMES.H5,TAG_ID.H5],[TAG_NAMES.H6,TAG_ID.H6],[TAG_NAMES.HEAD,TAG_ID.HEAD],[TAG_NAMES.HEADER,TAG_ID.HEADER],[TAG_NAMES.HGROUP,TAG_ID.HGROUP],[TAG_NAMES.HR,TAG_ID.HR],[TAG_NAMES.HTML,TAG_ID.HTML],[TAG_NAMES.I,TAG_ID.I],[TAG_NAMES.IMG,TAG_ID.IMG],[TAG_NAMES.IMAGE,TAG_ID.IMAGE],[TAG_NAMES.INPUT,TAG_ID.INPUT],[TAG_NAMES.IFRAME,TAG_ID.IFRAME],[TAG_NAMES.KEYGEN,TAG_ID.KEYGEN],[TAG_NAMES.LABEL,TAG_ID.LABEL],[TAG_NAMES.LI,TAG_ID.LI],[TAG_NAMES.LINK,TAG_ID.LINK],[TAG_NAMES.LISTING,TAG_ID.LISTING],[TAG_NAMES.MAIN,TAG_ID.MAIN],[TAG_NAMES.MALIGNMARK,TAG_ID.MALIGNMARK],[TAG_NAMES.MARQUEE,TAG_ID.MARQUEE],[TAG_NAMES.MATH,TAG_ID.MATH],[TAG_NAMES.MENU,TAG_ID.MENU],[TAG_NAMES.META,TAG_ID.META],[TAG_NAMES.MGLYPH,TAG_ID.MGLYPH],[TAG_NAMES.MI,TAG_ID.MI],[TAG_NAMES.MO,TAG_ID.MO],[TAG_NAMES.MN,TAG_ID.MN],[TAG_NAMES.MS,TAG_ID.MS],[TAG_NAMES.MTEXT,TAG_ID.MTEXT],[TAG_NAMES.NAV,TAG_ID.NAV],[TAG_NAMES.NOBR,TAG_ID.NOBR],[TAG_NAMES.NOFRAMES,TAG_ID.NOFRAMES],[TAG_NAMES.NOEMBED,TAG_ID.NOEMBED],[TAG_NAMES.NOSCRIPT,TAG_ID.NOSCRIPT],[TAG_NAMES.OBJECT,TAG_ID.OBJECT],[TAG_NAMES.OL,TAG_ID.OL],[TAG_NAMES.OPTGROUP,TAG_ID.OPTGROUP],[TAG_NAMES.OPTION,TAG_ID.OPTION],[TAG_NAMES.P,TAG_ID.P],[TAG_NAMES.PARAM,TAG_ID.PARAM],[TAG_NAMES.PLAINTEXT,TAG_ID.PLAINTEXT],[TAG_NAMES.PRE,TAG_ID.PRE],[TAG_NAMES.RB,TAG_ID.RB],[TAG_NAMES.RP,TAG_ID.RP],[TAG_NAMES.RT,TAG_ID.RT],[TAG_NAMES.RTC,TAG_ID.RTC],[TAG_NAMES.RUBY,TAG_ID.RUBY],[TAG_NAMES.S,TAG_ID.S],[TAG_NAMES.SCRIPT,TAG_ID.SCRIPT],[TAG_NAMES.SEARCH,TAG_ID.SEARCH],[TAG_NAMES.SECTION,TAG_ID.SECTION],[TAG_NAMES.SELECT,TAG_ID.SELECT],[TAG_NAMES.SOURCE,TAG_ID.SOURCE],[TAG_NAMES.SMALL,TAG_ID.SMALL],[TAG_NAMES.SPAN,TAG_ID.SPAN],[TAG_NAMES.STRIKE,TAG_ID.STRIKE],[TAG_NAMES.STRONG,TAG_ID.STRONG],[TAG_NAMES.STYLE,TAG_ID.STYLE],[TAG_NAMES.SUB,TAG_ID.SUB],[TAG_NAMES.SUMMARY,TAG_ID.SUMMARY],[TAG_NAMES.SUP,TAG_ID.SUP],[TAG_NAMES.TABLE,TAG_ID.TABLE],[TAG_NAMES.TBODY,TAG_ID.TBODY],[TAG_NAMES.TEMPLATE,TAG_ID.TEMPLATE],[TAG_NAMES.TEXTAREA,TAG_ID.TEXTAREA],[TAG_NAMES.TFOOT,TAG_ID.TFOOT],[TAG_NAMES.TD,TAG_ID.TD],[TAG_NAMES.TH,TAG_ID.TH],[TAG_NAMES.THEAD,TAG_ID.THEAD],[TAG_NAMES.TITLE,TAG_ID.TITLE],[TAG_NAMES.TR,TAG_ID.TR],[TAG_NAMES.TRACK,TAG_ID.TRACK],[TAG_NAMES.TT,TAG_ID.TT],[TAG_NAMES.U,TAG_ID.U],[TAG_NAMES.UL,TAG_ID.UL],[TAG_NAMES.SVG,TAG_ID.SVG],[TAG_NAMES.VAR,TAG_ID.VAR],[TAG_NAMES.WBR,TAG_ID.WBR],[TAG_NAMES.XMP,TAG_ID.XMP]]);function getTagID(o){var e;return(e=TAG_NAME_TO_ID.get(o))!==null&&e!==void 0?e:TAG_ID.UNKNOWN}const $=TAG_ID,SPECIAL_ELEMENTS={[NS.HTML]:new Set([$.ADDRESS,$.APPLET,$.AREA,$.ARTICLE,$.ASIDE,$.BASE,$.BASEFONT,$.BGSOUND,$.BLOCKQUOTE,$.BODY,$.BR,$.BUTTON,$.CAPTION,$.CENTER,$.COL,$.COLGROUP,$.DD,$.DETAILS,$.DIR,$.DIV,$.DL,$.DT,$.EMBED,$.FIELDSET,$.FIGCAPTION,$.FIGURE,$.FOOTER,$.FORM,$.FRAME,$.FRAMESET,$.H1,$.H2,$.H3,$.H4,$.H5,$.H6,$.HEAD,$.HEADER,$.HGROUP,$.HR,$.HTML,$.IFRAME,$.IMG,$.INPUT,$.LI,$.LINK,$.LISTING,$.MAIN,$.MARQUEE,$.MENU,$.META,$.NAV,$.NOEMBED,$.NOFRAMES,$.NOSCRIPT,$.OBJECT,$.OL,$.P,$.PARAM,$.PLAINTEXT,$.PRE,$.SCRIPT,$.SECTION,$.SELECT,$.SOURCE,$.STYLE,$.SUMMARY,$.TABLE,$.TBODY,$.TD,$.TEMPLATE,$.TEXTAREA,$.TFOOT,$.TH,$.THEAD,$.TITLE,$.TR,$.TRACK,$.UL,$.WBR,$.XMP]),[NS.MATHML]:new Set([$.MI,$.MO,$.MN,$.MS,$.MTEXT,$.ANNOTATION_XML]),[NS.SVG]:new Set([$.TITLE,$.FOREIGN_OBJECT,$.DESC]),[NS.XLINK]:new Set,[NS.XML]:new Set,[NS.XMLNS]:new Set},NUMBERED_HEADERS=new Set([$.H1,$.H2,$.H3,$.H4,$.H5,$.H6]),UNESCAPED_TEXT=new Set([TAG_NAMES.STYLE,TAG_NAMES.SCRIPT,TAG_NAMES.XMP,TAG_NAMES.IFRAME,TAG_NAMES.NOEMBED,TAG_NAMES.NOFRAMES,TAG_NAMES.PLAINTEXT]);function hasUnescapedText(o,e){return UNESCAPED_TEXT.has(o)||e&&o===TAG_NAMES.NOSCRIPT}var State;(function(o){o[o.DATA=0]="DATA",o[o.RCDATA=1]="RCDATA",o[o.RAWTEXT=2]="RAWTEXT",o[o.SCRIPT_DATA=3]="SCRIPT_DATA",o[o.PLAINTEXT=4]="PLAINTEXT",o[o.TAG_OPEN=5]="TAG_OPEN",o[o.END_TAG_OPEN=6]="END_TAG_OPEN",o[o.TAG_NAME=7]="TAG_NAME",o[o.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",o[o.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",o[o.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",o[o.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",o[o.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",o[o.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",o[o.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",o[o.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",o[o.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",o[o.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",o[o.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",o[o.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",o[o.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",o[o.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",o[o.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",o[o.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",o[o.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",o[o.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",o[o.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",o[o.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",o[o.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",o[o.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",o[o.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",o[o.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",o[o.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",o[o.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",o[o.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",o[o.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",o[o.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",o[o.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",o[o.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",o[o.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",o[o.BOGUS_COMMENT=40]="BOGUS_COMMENT",o[o.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",o[o.COMMENT_START=42]="COMMENT_START",o[o.COMMENT_START_DASH=43]="COMMENT_START_DASH",o[o.COMMENT=44]="COMMENT",o[o.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",o[o.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",o[o.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",o[o.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",o[o.COMMENT_END_DASH=49]="COMMENT_END_DASH",o[o.COMMENT_END=50]="COMMENT_END",o[o.COMMENT_END_BANG=51]="COMMENT_END_BANG",o[o.DOCTYPE=52]="DOCTYPE",o[o.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",o[o.DOCTYPE_NAME=54]="DOCTYPE_NAME",o[o.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",o[o.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",o[o.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",o[o.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",o[o.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",o[o.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",o[o.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",o[o.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",o[o.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",o[o.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",o[o.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",o[o.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",o[o.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",o[o.CDATA_SECTION=68]="CDATA_SECTION",o[o.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",o[o.CDATA_SECTION_END=70]="CDATA_SECTION_END",o[o.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",o[o.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(State||(State={}));const TokenizerMode={DATA:State.DATA,RCDATA:State.RCDATA,RAWTEXT:State.RAWTEXT,SCRIPT_DATA:State.SCRIPT_DATA,PLAINTEXT:State.PLAINTEXT,CDATA_SECTION:State.CDATA_SECTION};function isAsciiDigit(o){return o>=CODE_POINTS.DIGIT_0&&o<=CODE_POINTS.DIGIT_9}function isAsciiUpper(o){return o>=CODE_POINTS.LATIN_CAPITAL_A&&o<=CODE_POINTS.LATIN_CAPITAL_Z}function isAsciiLower(o){return o>=CODE_POINTS.LATIN_SMALL_A&&o<=CODE_POINTS.LATIN_SMALL_Z}function isAsciiLetter(o){return isAsciiLower(o)||isAsciiUpper(o)}function isAsciiAlphaNumeric(o){return isAsciiLetter(o)||isAsciiDigit(o)}function toAsciiLower(o){return o+32}function isWhitespace(o){return o===CODE_POINTS.SPACE||o===CODE_POINTS.LINE_FEED||o===CODE_POINTS.TABULATION||o===CODE_POINTS.FORM_FEED}function isScriptDataDoubleEscapeSequenceEnd(o){return isWhitespace(o)||o===CODE_POINTS.SOLIDUS||o===CODE_POINTS.GREATER_THAN_SIGN}function getErrorForNumericCharacterReference(o){return o===CODE_POINTS.NULL?ERR.nullCharacterReference:o>1114111?ERR.characterReferenceOutsideUnicodeRange:isSurrogate(o)?ERR.surrogateCharacterReference:isUndefinedCodePoint(o)?ERR.noncharacterCharacterReference:isControlCodePoint(o)||o===CODE_POINTS.CARRIAGE_RETURN?ERR.controlCharacterReference:null}class Tokenizer{constructor(e,s){this.options=e,this.handler=s,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=State.DATA,this.returnState=State.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Preprocessor(s),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new EntityDecoder(htmlDecodeTree,(a,l)=>{this.preprocessor.pos=this.entityStartPos+l-1,this._flushCodePointConsumedAsCharacterReference(a)},s.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(ERR.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:a=>{this._err(ERR.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+a)},validateNumericCharacterReference:a=>{const l=getErrorForNumericCharacterReference(a);l&&this._err(l,1)}}:void 0)}_err(e,s=0){var a,l;(l=(a=this.handler).onParseError)===null||l===void 0||l.call(a,this.preprocessor.getError(e,s))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e==null||e())}write(e,s,a){this.active=!0,this.preprocessor.write(e,s),this._runParsingLoop(),this.paused||a==null||a()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let s=0;s<e;s++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,s){return this.preprocessor.startsWith(e,s)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:TokenType.START_TAG,tagName:"",tagID:TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:TokenType.END_TAG,tagName:"",tagID:TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:TokenType.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:TokenType.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,s){this.currentCharacterToken={type:e,chars:s,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,s;const a=this.currentToken;if(getTokenAttr(a,this.currentAttr.name)===null){if(a.attrs.push(this.currentAttr),a.location&&this.currentLocation){const l=(e=(s=a.location).attrs)!==null&&e!==void 0?e:s.attrs=Object.create(null);l[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ERR.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=getTagID(e.tagName),e.type===TokenType.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(ERR.endTagWithAttributes),e.selfClosing&&this._err(ERR.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case TokenType.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case TokenType.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case TokenType.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:TokenType.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,s){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=s;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,s)}_emitCodePoint(e){const s=isWhitespace(e)?TokenType.WHITESPACE_CHARACTER:e===CODE_POINTS.NULL?TokenType.NULL_CHARACTER:TokenType.CHARACTER;this._appendCharToCurrentCharacterToken(s,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(TokenType.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=State.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?DecodingMode.Attribute:DecodingMode.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===State.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===State.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===State.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case State.DATA:{this._stateData(e);break}case State.RCDATA:{this._stateRcdata(e);break}case State.RAWTEXT:{this._stateRawtext(e);break}case State.SCRIPT_DATA:{this._stateScriptData(e);break}case State.PLAINTEXT:{this._statePlaintext(e);break}case State.TAG_OPEN:{this._stateTagOpen(e);break}case State.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case State.TAG_NAME:{this._stateTagName(e);break}case State.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case State.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case State.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case State.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case State.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case State.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case State.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case State.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case State.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case State.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case State.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case State.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case State.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case State.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case State.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case State.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case State.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case State.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case State.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case State.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case State.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case State.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case State.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case State.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case State.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case State.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case State.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case State.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case State.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case State.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case State.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case State.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case State.BOGUS_COMMENT:{this._stateBogusComment(e);break}case State.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case State.COMMENT_START:{this._stateCommentStart(e);break}case State.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case State.COMMENT:{this._stateComment(e);break}case State.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case State.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case State.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case State.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case State.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case State.COMMENT_END:{this._stateCommentEnd(e);break}case State.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case State.DOCTYPE:{this._stateDoctype(e);break}case State.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case State.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case State.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case State.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case State.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case State.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case State.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case State.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case State.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case State.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case State.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case State.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case State.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case State.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case State.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case State.CDATA_SECTION:{this._stateCdataSection(e);break}case State.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case State.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case State.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case State.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case CODE_POINTS.LESS_THAN_SIGN:{this.state=State.TAG_OPEN;break}case CODE_POINTS.AMPERSAND:{this._startCharacterReference();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitCodePoint(e);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case CODE_POINTS.AMPERSAND:{this._startCharacterReference();break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State.RCDATA_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case CODE_POINTS.LESS_THAN_SIGN:{this.state=State.RAWTEXT_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case CODE_POINTS.LESS_THAN_SIGN:{this.state=State.SCRIPT_DATA_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(isAsciiLetter(e))this._createStartTagToken(),this.state=State.TAG_NAME,this._stateTagName(e);else switch(e){case CODE_POINTS.EXCLAMATION_MARK:{this.state=State.MARKUP_DECLARATION_OPEN;break}case CODE_POINTS.SOLIDUS:{this.state=State.END_TAG_OPEN;break}case CODE_POINTS.QUESTION_MARK:{this._err(ERR.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=State.BOGUS_COMMENT,this._stateBogusComment(e);break}case CODE_POINTS.EOF:{this._err(ERR.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ERR.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=State.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(isAsciiLetter(e))this._createEndTagToken(),this.state=State.TAG_NAME,this._stateTagName(e);else switch(e){case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingEndTagName),this.state=State.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ERR.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=State.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const s=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State.BEFORE_ATTRIBUTE_NAME;break}case CODE_POINTS.SOLIDUS:{this.state=State.SELF_CLOSING_START_TAG;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.tagName+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:s.tagName+=String.fromCodePoint(isAsciiUpper(e)?toAsciiLower(e):e)}}_stateRcdataLessThanSign(e){e===CODE_POINTS.SOLIDUS?this.state=State.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=State.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){isAsciiLetter(e)?(this.state=State.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=State.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const s=this.currentToken;switch(s.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=State.BEFORE_ATTRIBUTE_NAME,!1;case CODE_POINTS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=State.SELF_CLOSING_START_TAG,!1;case CODE_POINTS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=State.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=State.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===CODE_POINTS.SOLIDUS?this.state=State.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=State.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){isAsciiLetter(e)?(this.state=State.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=State.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=State.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case CODE_POINTS.SOLIDUS:{this.state=State.SCRIPT_DATA_END_TAG_OPEN;break}case CODE_POINTS.EXCLAMATION_MARK:{this.state=State.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=State.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){isAsciiLetter(e)?(this.state=State.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=State.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=State.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===CODE_POINTS.HYPHEN_MINUS?(this.state=State.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=State.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===CODE_POINTS.HYPHEN_MINUS?(this.state=State.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=State.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case CODE_POINTS.HYPHEN_MINUS:{this.state=State.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case CODE_POINTS.HYPHEN_MINUS:{this.state=State.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State.SCRIPT_DATA_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State.SCRIPT_DATA,this._emitChars(">");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State.SCRIPT_DATA_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===CODE_POINTS.SOLIDUS?this.state=State.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:isAsciiLetter(e)?(this._emitChars("<"),this.state=State.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=State.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){isAsciiLetter(e)?(this.state=State.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=State.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=State.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(SEQUENCES.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(SEQUENCES.SCRIPT.length))){this._emitCodePoint(e);for(let s=0;s<SEQUENCES.SCRIPT.length;s++)this._emitCodePoint(this._consume());this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=State.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case CODE_POINTS.HYPHEN_MINUS:{this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case CODE_POINTS.HYPHEN_MINUS:{this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State.SCRIPT_DATA,this._emitChars(">");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===CODE_POINTS.SOLIDUS?(this.state=State.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(SEQUENCES.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(SEQUENCES.SCRIPT.length))){this._emitCodePoint(e);for(let s=0;s<SEQUENCES.SCRIPT.length;s++)this._emitCodePoint(this._consume());this.state=State.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.SOLIDUS:case CODE_POINTS.GREATER_THAN_SIGN:case CODE_POINTS.EOF:{this.state=State.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case CODE_POINTS.EQUALS_SIGN:{this._err(ERR.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=State.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=State.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:case CODE_POINTS.SOLIDUS:case CODE_POINTS.GREATER_THAN_SIGN:case CODE_POINTS.EOF:{this._leaveAttrName(),this.state=State.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case CODE_POINTS.EQUALS_SIGN:{this._leaveAttrName(),this.state=State.BEFORE_ATTRIBUTE_VALUE;break}case CODE_POINTS.QUOTATION_MARK:case CODE_POINTS.APOSTROPHE:case CODE_POINTS.LESS_THAN_SIGN:{this._err(ERR.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.name+=REPLACEMENT_CHARACTER;break}default:this.currentAttr.name+=String.fromCodePoint(isAsciiUpper(e)?toAsciiLower(e):e)}}_stateAfterAttributeName(e){switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.SOLIDUS:{this.state=State.SELF_CLOSING_START_TAG;break}case CODE_POINTS.EQUALS_SIGN:{this.state=State.BEFORE_ATTRIBUTE_VALUE;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=State.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:{this.state=State.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this.state=State.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingAttributeValue),this.state=State.DATA,this.emitCurrentTagToken();break}default:this.state=State.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case CODE_POINTS.QUOTATION_MARK:{this.state=State.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case CODE_POINTS.AMPERSAND:{this._startCharacterReference();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case CODE_POINTS.APOSTROPHE:{this.state=State.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case CODE_POINTS.AMPERSAND:{this._startCharacterReference();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=State.BEFORE_ATTRIBUTE_NAME;break}case CODE_POINTS.AMPERSAND:{this._startCharacterReference();break}case CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=State.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.QUOTATION_MARK:case CODE_POINTS.APOSTROPHE:case CODE_POINTS.LESS_THAN_SIGN:case CODE_POINTS.EQUALS_SIGN:case CODE_POINTS.GRAVE_ACCENT:{this._err(ERR.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=State.BEFORE_ATTRIBUTE_NAME;break}case CODE_POINTS.SOLIDUS:{this._leaveAttrValue(),this.state=State.SELF_CLOSING_START_TAG;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=State.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this._err(ERR.missingWhitespaceBetweenAttributes),this.state=State.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case CODE_POINTS.GREATER_THAN_SIGN:{const s=this.currentToken;s.selfClosing=!0,this.state=State.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this._err(ERR.unexpectedSolidusInTag),this.state=State.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const s=this.currentToken;switch(e){case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State.DATA,this.emitCurrentComment(s);break}case CODE_POINTS.EOF:{this.emitCurrentComment(s),this._emitEOFToken();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.data+=REPLACEMENT_CHARACTER;break}default:s.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(SEQUENCES.DASH_DASH,!0)?(this._createCommentToken(SEQUENCES.DASH_DASH.length+1),this.state=State.COMMENT_START):this._consumeSequenceIfMatch(SEQUENCES.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(SEQUENCES.DOCTYPE.length+1),this.state=State.DOCTYPE):this._consumeSequenceIfMatch(SEQUENCES.CDATA_START,!0)?this.inForeignNode?this.state=State.CDATA_SECTION:(this._err(ERR.cdataInHtmlContent),this._createCommentToken(SEQUENCES.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=State.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ERR.incorrectlyOpenedComment),this._createCommentToken(2),this.state=State.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case CODE_POINTS.HYPHEN_MINUS:{this.state=State.COMMENT_START_DASH;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptClosingOfEmptyComment),this.state=State.DATA;const s=this.currentToken;this.emitCurrentComment(s);break}default:this.state=State.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const s=this.currentToken;switch(e){case CODE_POINTS.HYPHEN_MINUS:{this.state=State.COMMENT_END;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptClosingOfEmptyComment),this.state=State.DATA,this.emitCurrentComment(s);break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(s),this._emitEOFToken();break}default:s.data+="-",this.state=State.COMMENT,this._stateComment(e)}}_stateComment(e){const s=this.currentToken;switch(e){case CODE_POINTS.HYPHEN_MINUS:{this.state=State.COMMENT_END_DASH;break}case CODE_POINTS.LESS_THAN_SIGN:{s.data+="<",this.state=State.COMMENT_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.data+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(s),this._emitEOFToken();break}default:s.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const s=this.currentToken;switch(e){case CODE_POINTS.EXCLAMATION_MARK:{s.data+="!",this.state=State.COMMENT_LESS_THAN_SIGN_BANG;break}case CODE_POINTS.LESS_THAN_SIGN:{s.data+="<";break}default:this.state=State.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===CODE_POINTS.HYPHEN_MINUS?this.state=State.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=State.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===CODE_POINTS.HYPHEN_MINUS?this.state=State.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=State.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==CODE_POINTS.GREATER_THAN_SIGN&&e!==CODE_POINTS.EOF&&this._err(ERR.nestedComment),this.state=State.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const s=this.currentToken;switch(e){case CODE_POINTS.HYPHEN_MINUS:{this.state=State.COMMENT_END;break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(s),this._emitEOFToken();break}default:s.data+="-",this.state=State.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const s=this.currentToken;switch(e){case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State.DATA,this.emitCurrentComment(s);break}case CODE_POINTS.EXCLAMATION_MARK:{this.state=State.COMMENT_END_BANG;break}case CODE_POINTS.HYPHEN_MINUS:{s.data+="-";break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(s),this._emitEOFToken();break}default:s.data+="--",this.state=State.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const s=this.currentToken;switch(e){case CODE_POINTS.HYPHEN_MINUS:{s.data+="--!",this.state=State.COMMENT_END_DASH;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.incorrectlyClosedComment),this.state=State.DATA,this.emitCurrentComment(s);break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(s),this._emitEOFToken();break}default:s.data+="--!",this.state=State.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State.BEFORE_DOCTYPE_NAME;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),this._createDoctypeToken(null);const s=this.currentToken;s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.missingWhitespaceBeforeDoctypeName),this.state=State.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(isAsciiUpper(e))this._createDoctypeToken(String.fromCharCode(toAsciiLower(e))),this.state=State.DOCTYPE_NAME;else switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._createDoctypeToken(REPLACEMENT_CHARACTER),this.state=State.DOCTYPE_NAME;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypeName),this._createDoctypeToken(null);const s=this.currentToken;s.forceQuirks=!0,this.emitCurrentDoctype(s),this.state=State.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),this._createDoctypeToken(null);const s=this.currentToken;s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=State.DOCTYPE_NAME}}_stateDoctypeName(e){const s=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State.AFTER_DOCTYPE_NAME;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State.DATA,this.emitCurrentDoctype(s);break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.name+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:s.name+=String.fromCodePoint(isAsciiUpper(e)?toAsciiLower(e):e)}}_stateAfterDoctypeName(e){const s=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State.DATA,this.emitCurrentDoctype(s);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(SEQUENCES.PUBLIC,!1)?this.state=State.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(SEQUENCES.SYSTEM,!1)?this.state=State.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ERR.invalidCharacterSequenceAfterDoctypeName),s.forceQuirks=!0,this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const s=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case CODE_POINTS.QUOTATION_MARK:{this._err(ERR.missingWhitespaceAfterDoctypePublicKeyword),s.publicId="",this.state=State.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this._err(ERR.missingWhitespaceAfterDoctypePublicKeyword),s.publicId="",this.state=State.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypePublicIdentifier),s.forceQuirks=!0,this.state=State.DATA,this.emitCurrentDoctype(s);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypePublicIdentifier),s.forceQuirks=!0,this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const s=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:{s.publicId="",this.state=State.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{s.publicId="",this.state=State.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypePublicIdentifier),s.forceQuirks=!0,this.state=State.DATA,this.emitCurrentDoctype(s);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypePublicIdentifier),s.forceQuirks=!0,this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const s=this.currentToken;switch(e){case CODE_POINTS.QUOTATION_MARK:{this.state=State.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.publicId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypePublicIdentifier),s.forceQuirks=!0,this.emitCurrentDoctype(s),this.state=State.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:s.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const s=this.currentToken;switch(e){case CODE_POINTS.APOSTROPHE:{this.state=State.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.publicId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypePublicIdentifier),s.forceQuirks=!0,this.emitCurrentDoctype(s),this.state=State.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:s.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const s=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State.DATA,this.emitCurrentDoctype(s);break}case CODE_POINTS.QUOTATION_MARK:{this._err(ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),s.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this._err(ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),s.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),s.forceQuirks=!0,this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const s=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(s),this.state=State.DATA;break}case CODE_POINTS.QUOTATION_MARK:{s.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{s.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),s.forceQuirks=!0,this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const s=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case CODE_POINTS.QUOTATION_MARK:{this._err(ERR.missingWhitespaceAfterDoctypeSystemKeyword),s.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this._err(ERR.missingWhitespaceAfterDoctypeSystemKeyword),s.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypeSystemIdentifier),s.forceQuirks=!0,this.state=State.DATA,this.emitCurrentDoctype(s);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),s.forceQuirks=!0,this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const s=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:{s.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{s.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypeSystemIdentifier),s.forceQuirks=!0,this.state=State.DATA,this.emitCurrentDoctype(s);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),s.forceQuirks=!0,this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const s=this.currentToken;switch(e){case CODE_POINTS.QUOTATION_MARK:{this.state=State.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.systemId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypeSystemIdentifier),s.forceQuirks=!0,this.emitCurrentDoctype(s),this.state=State.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:s.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const s=this.currentToken;switch(e){case CODE_POINTS.APOSTROPHE:{this.state=State.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.systemId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypeSystemIdentifier),s.forceQuirks=!0,this.emitCurrentDoctype(s),this.state=State.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:s.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const s=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(s),this.state=State.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const s=this.currentToken;switch(e){case CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(s),this.state=State.DATA;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter);break}case CODE_POINTS.EOF:{this.emitCurrentDoctype(s),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case CODE_POINTS.RIGHT_SQUARE_BRACKET:{this.state=State.CDATA_SECTION_BRACKET;break}case CODE_POINTS.EOF:{this._err(ERR.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===CODE_POINTS.RIGHT_SQUARE_BRACKET?this.state=State.CDATA_SECTION_END:(this._emitChars("]"),this.state=State.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State.DATA;break}case CODE_POINTS.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=State.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&isAsciiAlphaNumeric(this.preprocessor.peek(1))?State.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){isAsciiAlphaNumeric(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===CODE_POINTS.SEMICOLON&&this._err(ERR.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const IMPLICIT_END_TAG_REQUIRED=new Set([TAG_ID.DD,TAG_ID.DT,TAG_ID.LI,TAG_ID.OPTGROUP,TAG_ID.OPTION,TAG_ID.P,TAG_ID.RB,TAG_ID.RP,TAG_ID.RT,TAG_ID.RTC]),IMPLICIT_END_TAG_REQUIRED_THOROUGHLY=new Set([...IMPLICIT_END_TAG_REQUIRED,TAG_ID.CAPTION,TAG_ID.COLGROUP,TAG_ID.TBODY,TAG_ID.TD,TAG_ID.TFOOT,TAG_ID.TH,TAG_ID.THEAD,TAG_ID.TR]),SCOPING_ELEMENTS_HTML=new Set([TAG_ID.APPLET,TAG_ID.CAPTION,TAG_ID.HTML,TAG_ID.MARQUEE,TAG_ID.OBJECT,TAG_ID.TABLE,TAG_ID.TD,TAG_ID.TEMPLATE,TAG_ID.TH]),SCOPING_ELEMENTS_HTML_LIST=new Set([...SCOPING_ELEMENTS_HTML,TAG_ID.OL,TAG_ID.UL]),SCOPING_ELEMENTS_HTML_BUTTON=new Set([...SCOPING_ELEMENTS_HTML,TAG_ID.BUTTON]),SCOPING_ELEMENTS_MATHML=new Set([TAG_ID.ANNOTATION_XML,TAG_ID.MI,TAG_ID.MN,TAG_ID.MO,TAG_ID.MS,TAG_ID.MTEXT]),SCOPING_ELEMENTS_SVG=new Set([TAG_ID.DESC,TAG_ID.FOREIGN_OBJECT,TAG_ID.TITLE]),TABLE_ROW_CONTEXT=new Set([TAG_ID.TR,TAG_ID.TEMPLATE,TAG_ID.HTML]),TABLE_BODY_CONTEXT=new Set([TAG_ID.TBODY,TAG_ID.TFOOT,TAG_ID.THEAD,TAG_ID.TEMPLATE,TAG_ID.HTML]),TABLE_CONTEXT=new Set([TAG_ID.TABLE,TAG_ID.TEMPLATE,TAG_ID.HTML]),TABLE_CELLS=new Set([TAG_ID.TD,TAG_ID.TH]);class OpenElementStack{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,s,a){this.treeAdapter=s,this.handler=a,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=TAG_ID.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===TAG_ID.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===NS.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,s){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=s,this.currentTagId=s,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,s,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,s){const a=this._indexOf(e);this.items[a]=s,a===this.stackTop&&(this.current=s)}insertAfter(e,s,a){const l=this._indexOf(e)+1;this.items.splice(l,0,s),this.tagIDs.splice(l,0,a),this.stackTop++,l===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,l===this.stackTop)}popUntilTagNamePopped(e){let s=this.stackTop+1;do s=this.tagIDs.lastIndexOf(e,s-1);while(s>0&&this.treeAdapter.getNamespaceURI(this.items[s])!==NS.HTML);this.shortenToLength(Math.max(s,0))}shortenToLength(e){for(;this.stackTop>=e;){const s=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(s,this.stackTop<e)}}popUntilElementPopped(e){const s=this._indexOf(e);this.shortenToLength(Math.max(s,0))}popUntilPopped(e,s){const a=this._indexOfTagNames(e,s);this.shortenToLength(Math.max(a,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(NUMBERED_HEADERS,NS.HTML)}popUntilTableCellPopped(){this.popUntilPopped(TABLE_CELLS,NS.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,s){for(let a=this.stackTop;a>=0;a--)if(e.has(this.tagIDs[a])&&this.treeAdapter.getNamespaceURI(this.items[a])===s)return a;return-1}clearBackTo(e,s){const a=this._indexOfTagNames(e,s);this.shortenToLength(a+1)}clearBackToTableContext(){this.clearBackTo(TABLE_CONTEXT,NS.HTML)}clearBackToTableBodyContext(){this.clearBackTo(TABLE_BODY_CONTEXT,NS.HTML)}clearBackToTableRowContext(){this.clearBackTo(TABLE_ROW_CONTEXT,NS.HTML)}remove(e){const s=this._indexOf(e);s>=0&&(s===this.stackTop?this.pop():(this.items.splice(s,1),this.tagIDs.splice(s,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===TAG_ID.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const s=this._indexOf(e)-1;return s>=0?this.items[s]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===TAG_ID.HTML}hasInDynamicScope(e,s){for(let a=this.stackTop;a>=0;a--){const l=this.tagIDs[a];switch(this.treeAdapter.getNamespaceURI(this.items[a])){case NS.HTML:{if(l===e)return!0;if(s.has(l))return!1;break}case NS.SVG:{if(SCOPING_ELEMENTS_SVG.has(l))return!1;break}case NS.MATHML:{if(SCOPING_ELEMENTS_MATHML.has(l))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,SCOPING_ELEMENTS_HTML)}hasInListItemScope(e){return this.hasInDynamicScope(e,SCOPING_ELEMENTS_HTML_LIST)}hasInButtonScope(e){return this.hasInDynamicScope(e,SCOPING_ELEMENTS_HTML_BUTTON)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const s=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case NS.HTML:{if(NUMBERED_HEADERS.has(s))return!0;if(SCOPING_ELEMENTS_HTML.has(s))return!1;break}case NS.SVG:{if(SCOPING_ELEMENTS_SVG.has(s))return!1;break}case NS.MATHML:{if(SCOPING_ELEMENTS_MATHML.has(s))return!1;break}}}return!0}hasInTableScope(e){for(let s=this.stackTop;s>=0;s--)if(this.treeAdapter.getNamespaceURI(this.items[s])===NS.HTML)switch(this.tagIDs[s]){case e:return!0;case TAG_ID.TABLE:case TAG_ID.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===NS.HTML)switch(this.tagIDs[e]){case TAG_ID.TBODY:case TAG_ID.THEAD:case TAG_ID.TFOOT:return!0;case TAG_ID.TABLE:case TAG_ID.HTML:return!1}return!0}hasInSelectScope(e){for(let s=this.stackTop;s>=0;s--)if(this.treeAdapter.getNamespaceURI(this.items[s])===NS.HTML)switch(this.tagIDs[s]){case e:return!0;case TAG_ID.OPTION:case TAG_ID.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&IMPLICIT_END_TAG_REQUIRED.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId);)this.pop()}}const NOAH_ARK_CAPACITY=3;var EntryType;(function(o){o[o.Marker=0]="Marker",o[o.Element=1]="Element"})(EntryType||(EntryType={}));const MARKER={type:EntryType.Marker};class FormattingElementList{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,s){const a=[],l=s.length,u=this.treeAdapter.getTagName(e),c=this.treeAdapter.getNamespaceURI(e);for(let d=0;d<this.entries.length;d++){const h=this.entries[d];if(h.type===EntryType.Marker)break;const{element:p}=h;if(this.treeAdapter.getTagName(p)===u&&this.treeAdapter.getNamespaceURI(p)===c){const m=this.treeAdapter.getAttrList(p);m.length===l&&a.push({idx:d,attrs:m})}}return a}_ensureNoahArkCondition(e){if(this.entries.length<NOAH_ARK_CAPACITY)return;const s=this.treeAdapter.getAttrList(e),a=this._getNoahArkConditionCandidates(e,s);if(a.length<NOAH_ARK_CAPACITY)return;const l=new Map(s.map(c=>[c.name,c.value]));let u=0;for(let c=0;c<a.length;c++){const d=a[c];d.attrs.every(h=>l.get(h.name)===h.value)&&(u+=1,u>=NOAH_ARK_CAPACITY&&this.entries.splice(d.idx,1))}}insertMarker(){this.entries.unshift(MARKER)}pushElement(e,s){this._ensureNoahArkCondition(e),this.entries.unshift({type:EntryType.Element,element:e,token:s})}insertElementAfterBookmark(e,s){const a=this.entries.indexOf(this.bookmark);this.entries.splice(a,0,{type:EntryType.Element,element:e,token:s})}removeEntry(e){const s=this.entries.indexOf(e);s!==-1&&this.entries.splice(s,1)}clearToLastMarker(){const e=this.entries.indexOf(MARKER);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const s=this.entries.find(a=>a.type===EntryType.Marker||this.treeAdapter.getTagName(a.element)===e);return s&&s.type===EntryType.Element?s:null}getElementEntry(e){return this.entries.find(s=>s.type===EntryType.Element&&s.element===e)}}const defaultTreeAdapter={createDocument(){return{nodeName:"#document",mode:DOCUMENT_MODE.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(o,e,s){return{nodeName:o,tagName:o,attrs:s,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(o){return{nodeName:"#comment",data:o,parentNode:null}},createTextNode(o){return{nodeName:"#text",value:o,parentNode:null}},appendChild(o,e){o.childNodes.push(e),e.parentNode=o},insertBefore(o,e,s){const a=o.childNodes.indexOf(s);o.childNodes.splice(a,0,e),e.parentNode=o},setTemplateContent(o,e){o.content=e},getTemplateContent(o){return o.content},setDocumentType(o,e,s,a){const l=o.childNodes.find(u=>u.nodeName==="#documentType");if(l)l.name=e,l.publicId=s,l.systemId=a;else{const u={nodeName:"#documentType",name:e,publicId:s,systemId:a,parentNode:null};defaultTreeAdapter.appendChild(o,u)}},setDocumentMode(o,e){o.mode=e},getDocumentMode(o){return o.mode},detachNode(o){if(o.parentNode){const e=o.parentNode.childNodes.indexOf(o);o.parentNode.childNodes.splice(e,1),o.parentNode=null}},insertText(o,e){if(o.childNodes.length>0){const s=o.childNodes[o.childNodes.length-1];if(defaultTreeAdapter.isTextNode(s)){s.value+=e;return}}defaultTreeAdapter.appendChild(o,defaultTreeAdapter.createTextNode(e))},insertTextBefore(o,e,s){const a=o.childNodes[o.childNodes.indexOf(s)-1];a&&defaultTreeAdapter.isTextNode(a)?a.value+=e:defaultTreeAdapter.insertBefore(o,defaultTreeAdapter.createTextNode(e),s)},adoptAttributes(o,e){const s=new Set(o.attrs.map(a=>a.name));for(let a=0;a<e.length;a++)s.has(e[a].name)||o.attrs.push(e[a])},getFirstChild(o){return o.childNodes[0]},getChildNodes(o){return o.childNodes},getParentNode(o){return o.parentNode},getAttrList(o){return o.attrs},getTagName(o){return o.tagName},getNamespaceURI(o){return o.namespaceURI},getTextNodeContent(o){return o.value},getCommentNodeContent(o){return o.data},getDocumentTypeNodeName(o){return o.name},getDocumentTypeNodePublicId(o){return o.publicId},getDocumentTypeNodeSystemId(o){return o.systemId},isTextNode(o){return o.nodeName==="#text"},isCommentNode(o){return o.nodeName==="#comment"},isDocumentTypeNode(o){return o.nodeName==="#documentType"},isElementNode(o){return Object.prototype.hasOwnProperty.call(o,"tagName")},setNodeSourceCodeLocation(o,e){o.sourceCodeLocation=e},getNodeSourceCodeLocation(o){return o.sourceCodeLocation},updateNodeSourceCodeLocation(o,e){o.sourceCodeLocation={...o.sourceCodeLocation,...e}}},VALID_DOCTYPE_NAME="html",VALID_SYSTEM_ID="about:legacy-compat",QUIRKS_MODE_SYSTEM_ID="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",QUIRKS_MODE_PUBLIC_ID_PREFIXES=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],QUIRKS_MODE_NO_SYSTEM_ID_PUBLIC_ID_PREFIXES=[...QUIRKS_MODE_PUBLIC_ID_PREFIXES,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],QUIRKS_MODE_PUBLIC_IDS=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),LIMITED_QUIRKS_PUBLIC_ID_PREFIXES=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],LIMITED_QUIRKS_WITH_SYSTEM_ID_PUBLIC_ID_PREFIXES=[...LIMITED_QUIRKS_PUBLIC_ID_PREFIXES,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function hasPrefix(o,e){return e.some(s=>o.startsWith(s))}function isConforming(o){return o.name===VALID_DOCTYPE_NAME&&o.publicId===null&&(o.systemId===null||o.systemId===VALID_SYSTEM_ID)}function getDocumentMode(o){if(o.name!==VALID_DOCTYPE_NAME)return DOCUMENT_MODE.QUIRKS;const{systemId:e}=o;if(e&&e.toLowerCase()===QUIRKS_MODE_SYSTEM_ID)return DOCUMENT_MODE.QUIRKS;let{publicId:s}=o;if(s!==null){if(s=s.toLowerCase(),QUIRKS_MODE_PUBLIC_IDS.has(s))return DOCUMENT_MODE.QUIRKS;let a=e===null?QUIRKS_MODE_NO_SYSTEM_ID_PUBLIC_ID_PREFIXES:QUIRKS_MODE_PUBLIC_ID_PREFIXES;if(hasPrefix(s,a))return DOCUMENT_MODE.QUIRKS;if(a=e===null?LIMITED_QUIRKS_PUBLIC_ID_PREFIXES:LIMITED_QUIRKS_WITH_SYSTEM_ID_PUBLIC_ID_PREFIXES,hasPrefix(s,a))return DOCUMENT_MODE.LIMITED_QUIRKS}return DOCUMENT_MODE.NO_QUIRKS}const MIME_TYPES={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},DEFINITION_URL_ATTR="definitionurl",ADJUSTED_DEFINITION_URL_ATTR="definitionURL",SVG_ATTRS_ADJUSTMENT_MAP=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(o=>[o.toLowerCase(),o])),XML_ATTRS_ADJUSTMENT_MAP=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:NS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:NS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:NS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:NS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:NS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:NS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:NS.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:NS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:NS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:NS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:NS.XMLNS}]]),SVG_TAG_NAMES_ADJUSTMENT_MAP=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(o=>[o.toLowerCase(),o])),EXITS_FOREIGN_CONTENT=new Set([TAG_ID.B,TAG_ID.BIG,TAG_ID.BLOCKQUOTE,TAG_ID.BODY,TAG_ID.BR,TAG_ID.CENTER,TAG_ID.CODE,TAG_ID.DD,TAG_ID.DIV,TAG_ID.DL,TAG_ID.DT,TAG_ID.EM,TAG_ID.EMBED,TAG_ID.H1,TAG_ID.H2,TAG_ID.H3,TAG_ID.H4,TAG_ID.H5,TAG_ID.H6,TAG_ID.HEAD,TAG_ID.HR,TAG_ID.I,TAG_ID.IMG,TAG_ID.LI,TAG_ID.LISTING,TAG_ID.MENU,TAG_ID.META,TAG_ID.NOBR,TAG_ID.OL,TAG_ID.P,TAG_ID.PRE,TAG_ID.RUBY,TAG_ID.S,TAG_ID.SMALL,TAG_ID.SPAN,TAG_ID.STRONG,TAG_ID.STRIKE,TAG_ID.SUB,TAG_ID.SUP,TAG_ID.TABLE,TAG_ID.TT,TAG_ID.U,TAG_ID.UL,TAG_ID.VAR]);function causesExit(o){const e=o.tagID;return e===TAG_ID.FONT&&o.attrs.some(({name:a})=>a===ATTRS.COLOR||a===ATTRS.SIZE||a===ATTRS.FACE)||EXITS_FOREIGN_CONTENT.has(e)}function adjustTokenMathMLAttrs(o){for(let e=0;e<o.attrs.length;e++)if(o.attrs[e].name===DEFINITION_URL_ATTR){o.attrs[e].name=ADJUSTED_DEFINITION_URL_ATTR;break}}function adjustTokenSVGAttrs(o){for(let e=0;e<o.attrs.length;e++){const s=SVG_ATTRS_ADJUSTMENT_MAP.get(o.attrs[e].name);s!=null&&(o.attrs[e].name=s)}}function adjustTokenXMLAttrs(o){for(let e=0;e<o.attrs.length;e++){const s=XML_ATTRS_ADJUSTMENT_MAP.get(o.attrs[e].name);s&&(o.attrs[e].prefix=s.prefix,o.attrs[e].name=s.name,o.attrs[e].namespace=s.namespace)}}function adjustTokenSVGTagName(o){const e=SVG_TAG_NAMES_ADJUSTMENT_MAP.get(o.tagName);e!=null&&(o.tagName=e,o.tagID=getTagID(o.tagName))}function isMathMLTextIntegrationPoint(o,e){return e===NS.MATHML&&(o===TAG_ID.MI||o===TAG_ID.MO||o===TAG_ID.MN||o===TAG_ID.MS||o===TAG_ID.MTEXT)}function isHtmlIntegrationPoint(o,e,s){if(e===NS.MATHML&&o===TAG_ID.ANNOTATION_XML){for(let a=0;a<s.length;a++)if(s[a].name===ATTRS.ENCODING){const l=s[a].value.toLowerCase();return l===MIME_TYPES.TEXT_HTML||l===MIME_TYPES.APPLICATION_XML}}return e===NS.SVG&&(o===TAG_ID.FOREIGN_OBJECT||o===TAG_ID.DESC||o===TAG_ID.TITLE)}function isIntegrationPoint(o,e,s,a){return(!a||a===NS.HTML)&&isHtmlIntegrationPoint(o,e,s)||(!a||a===NS.MATHML)&&isMathMLTextIntegrationPoint(o,e)}const HIDDEN_INPUT_TYPE="hidden",AA_OUTER_LOOP_ITER=8,AA_INNER_LOOP_ITER=3;var InsertionMode;(function(o){o[o.INITIAL=0]="INITIAL",o[o.BEFORE_HTML=1]="BEFORE_HTML",o[o.BEFORE_HEAD=2]="BEFORE_HEAD",o[o.IN_HEAD=3]="IN_HEAD",o[o.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",o[o.AFTER_HEAD=5]="AFTER_HEAD",o[o.IN_BODY=6]="IN_BODY",o[o.TEXT=7]="TEXT",o[o.IN_TABLE=8]="IN_TABLE",o[o.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",o[o.IN_CAPTION=10]="IN_CAPTION",o[o.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",o[o.IN_TABLE_BODY=12]="IN_TABLE_BODY",o[o.IN_ROW=13]="IN_ROW",o[o.IN_CELL=14]="IN_CELL",o[o.IN_SELECT=15]="IN_SELECT",o[o.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",o[o.IN_TEMPLATE=17]="IN_TEMPLATE",o[o.AFTER_BODY=18]="AFTER_BODY",o[o.IN_FRAMESET=19]="IN_FRAMESET",o[o.AFTER_FRAMESET=20]="AFTER_FRAMESET",o[o.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",o[o.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(InsertionMode||(InsertionMode={}));const BASE_LOC={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},TABLE_STRUCTURE_TAGS=new Set([TAG_ID.TABLE,TAG_ID.TBODY,TAG_ID.TFOOT,TAG_ID.THEAD,TAG_ID.TR]),defaultParserOptions={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:defaultTreeAdapter,onParseError:null};let Parser$1=class{constructor(e,s,a=null,l=null){this.fragmentContext=a,this.scriptHandler=l,this.currentToken=null,this.stopped=!1,this.insertionMode=InsertionMode.INITIAL,this.originalInsertionMode=InsertionMode.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...defaultParserOptions,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=s??this.treeAdapter.createDocument(),this.tokenizer=new Tokenizer(this.options,this),this.activeFormattingElements=new FormattingElementList(this.treeAdapter),this.fragmentContextID=a?getTagID(this.treeAdapter.getTagName(a)):TAG_ID.UNKNOWN,this._setContextModes(a??this.document,this.fragmentContextID),this.openElements=new OpenElementStack(this.document,this.treeAdapter,this)}static parse(e,s){const a=new this(s);return a.tokenizer.write(e,!0),a.document}static getFragmentParser(e,s){const a={...defaultParserOptions,...s};e??(e=a.treeAdapter.createElement(TAG_NAMES.TEMPLATE,NS.HTML,[]));const l=a.treeAdapter.createElement("documentmock",NS.HTML,[]),u=new this(a,l,e);return u.fragmentContextID===TAG_ID.TEMPLATE&&u.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE),u._initTokenizerForFragmentParsing(),u._insertFakeRootElement(),u._resetInsertionMode(),u._findFormInFragmentContext(),u}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),s=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,s),s}_err(e,s,a){var l;if(!this.onParseError)return;const u=(l=e.location)!==null&&l!==void 0?l:BASE_LOC,c={code:s,startLine:u.startLine,startCol:u.startCol,startOffset:u.startOffset,endLine:a?u.startLine:u.endLine,endCol:a?u.startCol:u.endCol,endOffset:a?u.startOffset:u.endOffset};this.onParseError(c)}onItemPush(e,s,a){var l,u;(u=(l=this.treeAdapter).onItemPush)===null||u===void 0||u.call(l,e),a&&this.openElements.stackTop>0&&this._setContextModes(e,s)}onItemPop(e,s){var a,l;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(l=(a=this.treeAdapter).onItemPop)===null||l===void 0||l.call(a,e,this.openElements.current),s){let u,c;this.openElements.stackTop===0&&this.fragmentContext?(u=this.fragmentContext,c=this.fragmentContextID):{current:u,currentTagId:c}=this.openElements,this._setContextModes(u,c)}}_setContextModes(e,s){const a=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===NS.HTML;this.currentNotInHTML=!a,this.tokenizer.inForeignNode=!a&&e!==void 0&&s!==void 0&&!this._isIntegrationPoint(s,e)}_switchToTextParsing(e,s){this._insertElement(e,NS.HTML),this.tokenizer.state=s,this.originalInsertionMode=this.insertionMode,this.insertionMode=InsertionMode.TEXT}switchToPlaintextParsing(){this.insertionMode=InsertionMode.TEXT,this.originalInsertionMode=InsertionMode.IN_BODY,this.tokenizer.state=TokenizerMode.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===TAG_NAMES.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==NS.HTML))switch(this.fragmentContextID){case TAG_ID.TITLE:case TAG_ID.TEXTAREA:{this.tokenizer.state=TokenizerMode.RCDATA;break}case TAG_ID.STYLE:case TAG_ID.XMP:case TAG_ID.IFRAME:case TAG_ID.NOEMBED:case TAG_ID.NOFRAMES:case TAG_ID.NOSCRIPT:{this.tokenizer.state=TokenizerMode.RAWTEXT;break}case TAG_ID.SCRIPT:{this.tokenizer.state=TokenizerMode.SCRIPT_DATA;break}case TAG_ID.PLAINTEXT:{this.tokenizer.state=TokenizerMode.PLAINTEXT;break}}}_setDocumentType(e){const s=e.name||"",a=e.publicId||"",l=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,s,a,l),e.location){const c=this.treeAdapter.getChildNodes(this.document).find(d=>this.treeAdapter.isDocumentTypeNode(d));c&&this.treeAdapter.setNodeSourceCodeLocation(c,e.location)}}_attachElementToTree(e,s){if(this.options.sourceCodeLocationInfo){const a=s&&{...s,startTag:s};this.treeAdapter.setNodeSourceCodeLocation(e,a)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const a=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(a??this.document,e)}}_appendElement(e,s){const a=this.treeAdapter.createElement(e.tagName,s,e.attrs);this._attachElementToTree(a,e.location)}_insertElement(e,s){const a=this.treeAdapter.createElement(e.tagName,s,e.attrs);this._attachElementToTree(a,e.location),this.openElements.push(a,e.tagID)}_insertFakeElement(e,s){const a=this.treeAdapter.createElement(e,NS.HTML,[]);this._attachElementToTree(a,null),this.openElements.push(a,s)}_insertTemplate(e){const s=this.treeAdapter.createElement(e.tagName,NS.HTML,e.attrs),a=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(s,a),this._attachElementToTree(s,e.location),this.openElements.push(s,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(TAG_NAMES.HTML,NS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,TAG_ID.HTML)}_appendCommentNode(e,s){const a=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(s,a),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}_insertCharacters(e){let s,a;if(this._shouldFosterParentOnInsertion()?({parent:s,beforeElement:a}=this._findFosterParentingLocation(),a?this.treeAdapter.insertTextBefore(s,e.chars,a):this.treeAdapter.insertText(s,e.chars)):(s=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(s,e.chars)),!e.location)return;const l=this.treeAdapter.getChildNodes(s),u=a?l.lastIndexOf(a):l.length,c=l[u-1];if(this.treeAdapter.getNodeSourceCodeLocation(c)){const{endLine:h,endCol:p,endOffset:m}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(c,{endLine:h,endCol:p,endOffset:m})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(c,e.location)}_adoptNodes(e,s){for(let a=this.treeAdapter.getFirstChild(e);a;a=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(a),this.treeAdapter.appendChild(s,a)}_setEndLocation(e,s){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&s.location){const a=s.location,l=this.treeAdapter.getTagName(e),u=s.type===TokenType.END_TAG&&l===s.tagName?{endTag:{...a},endLine:a.endLine,endCol:a.endCol,endOffset:a.endOffset}:{endLine:a.startLine,endCol:a.startCol,endOffset:a.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,u)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let s,a;return this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,a=this.fragmentContextID):{current:s,currentTagId:a}=this.openElements,e.tagID===TAG_ID.SVG&&this.treeAdapter.getTagName(s)===TAG_NAMES.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(s)===NS.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===TAG_ID.MGLYPH||e.tagID===TAG_ID.MALIGNMARK)&&a!==void 0&&!this._isIntegrationPoint(a,s,NS.HTML)}_processToken(e){switch(e.type){case TokenType.CHARACTER:{this.onCharacter(e);break}case TokenType.NULL_CHARACTER:{this.onNullCharacter(e);break}case TokenType.COMMENT:{this.onComment(e);break}case TokenType.DOCTYPE:{this.onDoctype(e);break}case TokenType.START_TAG:{this._processStartTag(e);break}case TokenType.END_TAG:{this.onEndTag(e);break}case TokenType.EOF:{this.onEof(e);break}case TokenType.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,s,a){const l=this.treeAdapter.getNamespaceURI(s),u=this.treeAdapter.getAttrList(s);return isIntegrationPoint(e,l,u,a)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const s=this.activeFormattingElements.entries.findIndex(l=>l.type===EntryType.Marker||this.openElements.contains(l.element)),a=s===-1?e-1:s-1;for(let l=a;l>=0;l--){const u=this.activeFormattingElements.entries[l];this._insertElement(u.token,this.treeAdapter.getNamespaceURI(u.element)),u.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=InsertionMode.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.P),this.openElements.popUntilTagNamePopped(TAG_ID.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case TAG_ID.TR:{this.insertionMode=InsertionMode.IN_ROW;return}case TAG_ID.TBODY:case TAG_ID.THEAD:case TAG_ID.TFOOT:{this.insertionMode=InsertionMode.IN_TABLE_BODY;return}case TAG_ID.CAPTION:{this.insertionMode=InsertionMode.IN_CAPTION;return}case TAG_ID.COLGROUP:{this.insertionMode=InsertionMode.IN_COLUMN_GROUP;return}case TAG_ID.TABLE:{this.insertionMode=InsertionMode.IN_TABLE;return}case TAG_ID.BODY:{this.insertionMode=InsertionMode.IN_BODY;return}case TAG_ID.FRAMESET:{this.insertionMode=InsertionMode.IN_FRAMESET;return}case TAG_ID.SELECT:{this._resetInsertionModeForSelect(e);return}case TAG_ID.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case TAG_ID.HTML:{this.insertionMode=this.headElement?InsertionMode.AFTER_HEAD:InsertionMode.BEFORE_HEAD;return}case TAG_ID.TD:case TAG_ID.TH:{if(e>0){this.insertionMode=InsertionMode.IN_CELL;return}break}case TAG_ID.HEAD:{if(e>0){this.insertionMode=InsertionMode.IN_HEAD;return}break}}this.insertionMode=InsertionMode.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let s=e-1;s>0;s--){const a=this.openElements.tagIDs[s];if(a===TAG_ID.TEMPLATE)break;if(a===TAG_ID.TABLE){this.insertionMode=InsertionMode.IN_SELECT_IN_TABLE;return}}this.insertionMode=InsertionMode.IN_SELECT}_isElementCausesFosterParenting(e){return TABLE_STRUCTURE_TAGS.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const s=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case TAG_ID.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(s)===NS.HTML)return{parent:this.treeAdapter.getTemplateContent(s),beforeElement:null};break}case TAG_ID.TABLE:{const a=this.treeAdapter.getParentNode(s);return a?{parent:a,beforeElement:s}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const s=this._findFosterParentingLocation();s.beforeElement?this.treeAdapter.insertBefore(s.parent,e,s.beforeElement):this.treeAdapter.appendChild(s.parent,e)}_isSpecialElement(e,s){const a=this.treeAdapter.getNamespaceURI(e);return SPECIAL_ELEMENTS[a].has(s)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){characterInForeignContent(this,e);return}switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,e);break}case InsertionMode.BEFORE_HTML:{tokenBeforeHtml(this,e);break}case InsertionMode.BEFORE_HEAD:{tokenBeforeHead(this,e);break}case InsertionMode.IN_HEAD:{tokenInHead(this,e);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{tokenInHeadNoScript(this,e);break}case InsertionMode.AFTER_HEAD:{tokenAfterHead(this,e);break}case InsertionMode.IN_BODY:case InsertionMode.IN_CAPTION:case InsertionMode.IN_CELL:case InsertionMode.IN_TEMPLATE:{characterInBody(this,e);break}case InsertionMode.TEXT:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:{characterInTable(this,e);break}case InsertionMode.IN_TABLE_TEXT:{characterInTableText(this,e);break}case InsertionMode.IN_COLUMN_GROUP:{tokenInColumnGroup(this,e);break}case InsertionMode.AFTER_BODY:{tokenAfterBody(this,e);break}case InsertionMode.AFTER_AFTER_BODY:{tokenAfterAfterBody(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){nullCharacterInForeignContent(this,e);return}switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,e);break}case InsertionMode.BEFORE_HTML:{tokenBeforeHtml(this,e);break}case InsertionMode.BEFORE_HEAD:{tokenBeforeHead(this,e);break}case InsertionMode.IN_HEAD:{tokenInHead(this,e);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{tokenInHeadNoScript(this,e);break}case InsertionMode.AFTER_HEAD:{tokenAfterHead(this,e);break}case InsertionMode.TEXT:{this._insertCharacters(e);break}case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:{characterInTable(this,e);break}case InsertionMode.IN_COLUMN_GROUP:{tokenInColumnGroup(this,e);break}case InsertionMode.AFTER_BODY:{tokenAfterBody(this,e);break}case InsertionMode.AFTER_AFTER_BODY:{tokenAfterAfterBody(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){appendComment(this,e);return}switch(this.insertionMode){case InsertionMode.INITIAL:case InsertionMode.BEFORE_HTML:case InsertionMode.BEFORE_HEAD:case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:case InsertionMode.IN_BODY:case InsertionMode.IN_TABLE:case InsertionMode.IN_CAPTION:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:case InsertionMode.IN_CELL:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:case InsertionMode.IN_TEMPLATE:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:{appendComment(this,e);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,e);break}case InsertionMode.AFTER_BODY:{appendCommentToRootHtmlElement(this,e);break}case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:{appendCommentToDocument(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case InsertionMode.INITIAL:{doctypeInInitialMode(this,e);break}case InsertionMode.BEFORE_HEAD:case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:{this._err(e,ERR.misplacedDoctype);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?startTagInForeignContent(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,e);break}case InsertionMode.BEFORE_HTML:{startTagBeforeHtml(this,e);break}case InsertionMode.BEFORE_HEAD:{startTagBeforeHead(this,e);break}case InsertionMode.IN_HEAD:{startTagInHead(this,e);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{startTagInHeadNoScript(this,e);break}case InsertionMode.AFTER_HEAD:{startTagAfterHead(this,e);break}case InsertionMode.IN_BODY:{startTagInBody(this,e);break}case InsertionMode.IN_TABLE:{startTagInTable(this,e);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,e);break}case InsertionMode.IN_CAPTION:{startTagInCaption(this,e);break}case InsertionMode.IN_COLUMN_GROUP:{startTagInColumnGroup(this,e);break}case InsertionMode.IN_TABLE_BODY:{startTagInTableBody(this,e);break}case InsertionMode.IN_ROW:{startTagInRow(this,e);break}case InsertionMode.IN_CELL:{startTagInCell(this,e);break}case InsertionMode.IN_SELECT:{startTagInSelect(this,e);break}case InsertionMode.IN_SELECT_IN_TABLE:{startTagInSelectInTable(this,e);break}case InsertionMode.IN_TEMPLATE:{startTagInTemplate(this,e);break}case InsertionMode.AFTER_BODY:{startTagAfterBody(this,e);break}case InsertionMode.IN_FRAMESET:{startTagInFrameset(this,e);break}case InsertionMode.AFTER_FRAMESET:{startTagAfterFrameset(this,e);break}case InsertionMode.AFTER_AFTER_BODY:{startTagAfterAfterBody(this,e);break}case InsertionMode.AFTER_AFTER_FRAMESET:{startTagAfterAfterFrameset(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?endTagInForeignContent(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,e);break}case InsertionMode.BEFORE_HTML:{endTagBeforeHtml(this,e);break}case InsertionMode.BEFORE_HEAD:{endTagBeforeHead(this,e);break}case InsertionMode.IN_HEAD:{endTagInHead(this,e);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{endTagInHeadNoScript(this,e);break}case InsertionMode.AFTER_HEAD:{endTagAfterHead(this,e);break}case InsertionMode.IN_BODY:{endTagInBody(this,e);break}case InsertionMode.TEXT:{endTagInText(this,e);break}case InsertionMode.IN_TABLE:{endTagInTable(this,e);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,e);break}case InsertionMode.IN_CAPTION:{endTagInCaption(this,e);break}case InsertionMode.IN_COLUMN_GROUP:{endTagInColumnGroup(this,e);break}case InsertionMode.IN_TABLE_BODY:{endTagInTableBody(this,e);break}case InsertionMode.IN_ROW:{endTagInRow(this,e);break}case InsertionMode.IN_CELL:{endTagInCell(this,e);break}case InsertionMode.IN_SELECT:{endTagInSelect(this,e);break}case InsertionMode.IN_SELECT_IN_TABLE:{endTagInSelectInTable(this,e);break}case InsertionMode.IN_TEMPLATE:{endTagInTemplate(this,e);break}case InsertionMode.AFTER_BODY:{endTagAfterBody(this,e);break}case InsertionMode.IN_FRAMESET:{endTagInFrameset(this,e);break}case InsertionMode.AFTER_FRAMESET:{endTagAfterFrameset(this,e);break}case InsertionMode.AFTER_AFTER_BODY:{tokenAfterAfterBody(this,e);break}}}onEof(e){switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,e);break}case InsertionMode.BEFORE_HTML:{tokenBeforeHtml(this,e);break}case InsertionMode.BEFORE_HEAD:{tokenBeforeHead(this,e);break}case InsertionMode.IN_HEAD:{tokenInHead(this,e);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{tokenInHeadNoScript(this,e);break}case InsertionMode.AFTER_HEAD:{tokenAfterHead(this,e);break}case InsertionMode.IN_BODY:case InsertionMode.IN_TABLE:case InsertionMode.IN_CAPTION:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:case InsertionMode.IN_CELL:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:{eofInBody(this,e);break}case InsertionMode.TEXT:{eofInText(this,e);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,e);break}case InsertionMode.IN_TEMPLATE:{eofInTemplate(this,e);break}case InsertionMode.AFTER_BODY:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:{stopParsing(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===CODE_POINTS.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:case InsertionMode.TEXT:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:{this._insertCharacters(e);break}case InsertionMode.IN_BODY:case InsertionMode.IN_CAPTION:case InsertionMode.IN_CELL:case InsertionMode.IN_TEMPLATE:case InsertionMode.AFTER_BODY:case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:{whitespaceCharacterInBody(this,e);break}case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:{characterInTable(this,e);break}case InsertionMode.IN_TABLE_TEXT:{whitespaceCharacterInTableText(this,e);break}}}};function aaObtainFormattingElementEntry(o,e){let s=o.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return s?o.openElements.contains(s.element)?o.openElements.hasInScope(e.tagID)||(s=null):(o.activeFormattingElements.removeEntry(s),s=null):genericEndTagInBody(o,e),s}function aaObtainFurthestBlock(o,e){let s=null,a=o.openElements.stackTop;for(;a>=0;a--){const l=o.openElements.items[a];if(l===e.element)break;o._isSpecialElement(l,o.openElements.tagIDs[a])&&(s=l)}return s||(o.openElements.shortenToLength(Math.max(a,0)),o.activeFormattingElements.removeEntry(e)),s}function aaInnerLoop(o,e,s){let a=e,l=o.openElements.getCommonAncestor(e);for(let u=0,c=l;c!==s;u++,c=l){l=o.openElements.getCommonAncestor(c);const d=o.activeFormattingElements.getElementEntry(c),h=d&&u>=AA_INNER_LOOP_ITER;!d||h?(h&&o.activeFormattingElements.removeEntry(d),o.openElements.remove(c)):(c=aaRecreateElementFromEntry(o,d),a===e&&(o.activeFormattingElements.bookmark=d),o.treeAdapter.detachNode(a),o.treeAdapter.appendChild(c,a),a=c)}return a}function aaRecreateElementFromEntry(o,e){const s=o.treeAdapter.getNamespaceURI(e.element),a=o.treeAdapter.createElement(e.token.tagName,s,e.token.attrs);return o.openElements.replace(e.element,a),e.element=a,a}function aaInsertLastNodeInCommonAncestor(o,e,s){const a=o.treeAdapter.getTagName(e),l=getTagID(a);if(o._isElementCausesFosterParenting(l))o._fosterParentElement(s);else{const u=o.treeAdapter.getNamespaceURI(e);l===TAG_ID.TEMPLATE&&u===NS.HTML&&(e=o.treeAdapter.getTemplateContent(e)),o.treeAdapter.appendChild(e,s)}}function aaReplaceFormattingElement(o,e,s){const a=o.treeAdapter.getNamespaceURI(s.element),{token:l}=s,u=o.treeAdapter.createElement(l.tagName,a,l.attrs);o._adoptNodes(e,u),o.treeAdapter.appendChild(e,u),o.activeFormattingElements.insertElementAfterBookmark(u,l),o.activeFormattingElements.removeEntry(s),o.openElements.remove(s.element),o.openElements.insertAfter(e,u,l.tagID)}function callAdoptionAgency(o,e){for(let s=0;s<AA_OUTER_LOOP_ITER;s++){const a=aaObtainFormattingElementEntry(o,e);if(!a)break;const l=aaObtainFurthestBlock(o,a);if(!l)break;o.activeFormattingElements.bookmark=a;const u=aaInnerLoop(o,l,a.element),c=o.openElements.getCommonAncestor(a.element);o.treeAdapter.detachNode(u),c&&aaInsertLastNodeInCommonAncestor(o,c,u),aaReplaceFormattingElement(o,l,a)}}function appendComment(o,e){o._appendCommentNode(e,o.openElements.currentTmplContentOrNode)}function appendCommentToRootHtmlElement(o,e){o._appendCommentNode(e,o.openElements.items[0])}function appendCommentToDocument(o,e){o._appendCommentNode(e,o.document)}function stopParsing(o,e){if(o.stopped=!0,e.location){const s=o.fragmentContext?0:2;for(let a=o.openElements.stackTop;a>=s;a--)o._setEndLocation(o.openElements.items[a],e);if(!o.fragmentContext&&o.openElements.stackTop>=0){const a=o.openElements.items[0],l=o.treeAdapter.getNodeSourceCodeLocation(a);if(l&&!l.endTag&&(o._setEndLocation(a,e),o.openElements.stackTop>=1)){const u=o.openElements.items[1],c=o.treeAdapter.getNodeSourceCodeLocation(u);c&&!c.endTag&&o._setEndLocation(u,e)}}}}function doctypeInInitialMode(o,e){o._setDocumentType(e);const s=e.forceQuirks?DOCUMENT_MODE.QUIRKS:getDocumentMode(e);isConforming(e)||o._err(e,ERR.nonConformingDoctype),o.treeAdapter.setDocumentMode(o.document,s),o.insertionMode=InsertionMode.BEFORE_HTML}function tokenInInitialMode(o,e){o._err(e,ERR.missingDoctype,!0),o.treeAdapter.setDocumentMode(o.document,DOCUMENT_MODE.QUIRKS),o.insertionMode=InsertionMode.BEFORE_HTML,o._processToken(e)}function startTagBeforeHtml(o,e){e.tagID===TAG_ID.HTML?(o._insertElement(e,NS.HTML),o.insertionMode=InsertionMode.BEFORE_HEAD):tokenBeforeHtml(o,e)}function endTagBeforeHtml(o,e){const s=e.tagID;(s===TAG_ID.HTML||s===TAG_ID.HEAD||s===TAG_ID.BODY||s===TAG_ID.BR)&&tokenBeforeHtml(o,e)}function tokenBeforeHtml(o,e){o._insertFakeRootElement(),o.insertionMode=InsertionMode.BEFORE_HEAD,o._processToken(e)}function startTagBeforeHead(o,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(o,e);break}case TAG_ID.HEAD:{o._insertElement(e,NS.HTML),o.headElement=o.openElements.current,o.insertionMode=InsertionMode.IN_HEAD;break}default:tokenBeforeHead(o,e)}}function endTagBeforeHead(o,e){const s=e.tagID;s===TAG_ID.HEAD||s===TAG_ID.BODY||s===TAG_ID.HTML||s===TAG_ID.BR?tokenBeforeHead(o,e):o._err(e,ERR.endTagWithoutMatchingOpenElement)}function tokenBeforeHead(o,e){o._insertFakeElement(TAG_NAMES.HEAD,TAG_ID.HEAD),o.headElement=o.openElements.current,o.insertionMode=InsertionMode.IN_HEAD,o._processToken(e)}function startTagInHead(o,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(o,e);break}case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:{o._appendElement(e,NS.HTML),e.ackSelfClosing=!0;break}case TAG_ID.TITLE:{o._switchToTextParsing(e,TokenizerMode.RCDATA);break}case TAG_ID.NOSCRIPT:{o.options.scriptingEnabled?o._switchToTextParsing(e,TokenizerMode.RAWTEXT):(o._insertElement(e,NS.HTML),o.insertionMode=InsertionMode.IN_HEAD_NO_SCRIPT);break}case TAG_ID.NOFRAMES:case TAG_ID.STYLE:{o._switchToTextParsing(e,TokenizerMode.RAWTEXT);break}case TAG_ID.SCRIPT:{o._switchToTextParsing(e,TokenizerMode.SCRIPT_DATA);break}case TAG_ID.TEMPLATE:{o._insertTemplate(e),o.activeFormattingElements.insertMarker(),o.framesetOk=!1,o.insertionMode=InsertionMode.IN_TEMPLATE,o.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE);break}case TAG_ID.HEAD:{o._err(e,ERR.misplacedStartTagForHeadElement);break}default:tokenInHead(o,e)}}function endTagInHead(o,e){switch(e.tagID){case TAG_ID.HEAD:{o.openElements.pop(),o.insertionMode=InsertionMode.AFTER_HEAD;break}case TAG_ID.BODY:case TAG_ID.BR:case TAG_ID.HTML:{tokenInHead(o,e);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(o,e);break}default:o._err(e,ERR.endTagWithoutMatchingOpenElement)}}function templateEndTagInHead(o,e){o.openElements.tmplCount>0?(o.openElements.generateImpliedEndTagsThoroughly(),o.openElements.currentTagId!==TAG_ID.TEMPLATE&&o._err(e,ERR.closingOfElementWithOpenChildElements),o.openElements.popUntilTagNamePopped(TAG_ID.TEMPLATE),o.activeFormattingElements.clearToLastMarker(),o.tmplInsertionModeStack.shift(),o._resetInsertionMode()):o._err(e,ERR.endTagWithoutMatchingOpenElement)}function tokenInHead(o,e){o.openElements.pop(),o.insertionMode=InsertionMode.AFTER_HEAD,o._processToken(e)}function startTagInHeadNoScript(o,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(o,e);break}case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.HEAD:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.STYLE:{startTagInHead(o,e);break}case TAG_ID.NOSCRIPT:{o._err(e,ERR.nestedNoscriptInHead);break}default:tokenInHeadNoScript(o,e)}}function endTagInHeadNoScript(o,e){switch(e.tagID){case TAG_ID.NOSCRIPT:{o.openElements.pop(),o.insertionMode=InsertionMode.IN_HEAD;break}case TAG_ID.BR:{tokenInHeadNoScript(o,e);break}default:o._err(e,ERR.endTagWithoutMatchingOpenElement)}}function tokenInHeadNoScript(o,e){const s=e.type===TokenType.EOF?ERR.openElementsLeftAfterEof:ERR.disallowedContentInNoscriptInHead;o._err(e,s),o.openElements.pop(),o.insertionMode=InsertionMode.IN_HEAD,o._processToken(e)}function startTagAfterHead(o,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(o,e);break}case TAG_ID.BODY:{o._insertElement(e,NS.HTML),o.framesetOk=!1,o.insertionMode=InsertionMode.IN_BODY;break}case TAG_ID.FRAMESET:{o._insertElement(e,NS.HTML),o.insertionMode=InsertionMode.IN_FRAMESET;break}case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.SCRIPT:case TAG_ID.STYLE:case TAG_ID.TEMPLATE:case TAG_ID.TITLE:{o._err(e,ERR.abandonedHeadElementChild),o.openElements.push(o.headElement,TAG_ID.HEAD),startTagInHead(o,e),o.openElements.remove(o.headElement);break}case TAG_ID.HEAD:{o._err(e,ERR.misplacedStartTagForHeadElement);break}default:tokenAfterHead(o,e)}}function endTagAfterHead(o,e){switch(e.tagID){case TAG_ID.BODY:case TAG_ID.HTML:case TAG_ID.BR:{tokenAfterHead(o,e);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(o,e);break}default:o._err(e,ERR.endTagWithoutMatchingOpenElement)}}function tokenAfterHead(o,e){o._insertFakeElement(TAG_NAMES.BODY,TAG_ID.BODY),o.insertionMode=InsertionMode.IN_BODY,modeInBody(o,e)}function modeInBody(o,e){switch(e.type){case TokenType.CHARACTER:{characterInBody(o,e);break}case TokenType.WHITESPACE_CHARACTER:{whitespaceCharacterInBody(o,e);break}case TokenType.COMMENT:{appendComment(o,e);break}case TokenType.START_TAG:{startTagInBody(o,e);break}case TokenType.END_TAG:{endTagInBody(o,e);break}case TokenType.EOF:{eofInBody(o,e);break}}}function whitespaceCharacterInBody(o,e){o._reconstructActiveFormattingElements(),o._insertCharacters(e)}function characterInBody(o,e){o._reconstructActiveFormattingElements(),o._insertCharacters(e),o.framesetOk=!1}function htmlStartTagInBody(o,e){o.openElements.tmplCount===0&&o.treeAdapter.adoptAttributes(o.openElements.items[0],e.attrs)}function bodyStartTagInBody(o,e){const s=o.openElements.tryPeekProperlyNestedBodyElement();s&&o.openElements.tmplCount===0&&(o.framesetOk=!1,o.treeAdapter.adoptAttributes(s,e.attrs))}function framesetStartTagInBody(o,e){const s=o.openElements.tryPeekProperlyNestedBodyElement();o.framesetOk&&s&&(o.treeAdapter.detachNode(s),o.openElements.popAllUpToHtmlElement(),o._insertElement(e,NS.HTML),o.insertionMode=InsertionMode.IN_FRAMESET)}function addressStartTagInBody(o,e){o.openElements.hasInButtonScope(TAG_ID.P)&&o._closePElement(),o._insertElement(e,NS.HTML)}function numberedHeaderStartTagInBody(o,e){o.openElements.hasInButtonScope(TAG_ID.P)&&o._closePElement(),o.openElements.currentTagId!==void 0&&NUMBERED_HEADERS.has(o.openElements.currentTagId)&&o.openElements.pop(),o._insertElement(e,NS.HTML)}function preStartTagInBody(o,e){o.openElements.hasInButtonScope(TAG_ID.P)&&o._closePElement(),o._insertElement(e,NS.HTML),o.skipNextNewLine=!0,o.framesetOk=!1}function formStartTagInBody(o,e){const s=o.openElements.tmplCount>0;(!o.formElement||s)&&(o.openElements.hasInButtonScope(TAG_ID.P)&&o._closePElement(),o._insertElement(e,NS.HTML),s||(o.formElement=o.openElements.current))}function listItemStartTagInBody(o,e){o.framesetOk=!1;const s=e.tagID;for(let a=o.openElements.stackTop;a>=0;a--){const l=o.openElements.tagIDs[a];if(s===TAG_ID.LI&&l===TAG_ID.LI||(s===TAG_ID.DD||s===TAG_ID.DT)&&(l===TAG_ID.DD||l===TAG_ID.DT)){o.openElements.generateImpliedEndTagsWithExclusion(l),o.openElements.popUntilTagNamePopped(l);break}if(l!==TAG_ID.ADDRESS&&l!==TAG_ID.DIV&&l!==TAG_ID.P&&o._isSpecialElement(o.openElements.items[a],l))break}o.openElements.hasInButtonScope(TAG_ID.P)&&o._closePElement(),o._insertElement(e,NS.HTML)}function plaintextStartTagInBody(o,e){o.openElements.hasInButtonScope(TAG_ID.P)&&o._closePElement(),o._insertElement(e,NS.HTML),o.tokenizer.state=TokenizerMode.PLAINTEXT}function buttonStartTagInBody(o,e){o.openElements.hasInScope(TAG_ID.BUTTON)&&(o.openElements.generateImpliedEndTags(),o.openElements.popUntilTagNamePopped(TAG_ID.BUTTON)),o._reconstructActiveFormattingElements(),o._insertElement(e,NS.HTML),o.framesetOk=!1}function aStartTagInBody(o,e){const s=o.activeFormattingElements.getElementEntryInScopeWithTagName(TAG_NAMES.A);s&&(callAdoptionAgency(o,e),o.openElements.remove(s.element),o.activeFormattingElements.removeEntry(s)),o._reconstructActiveFormattingElements(),o._insertElement(e,NS.HTML),o.activeFormattingElements.pushElement(o.openElements.current,e)}function bStartTagInBody(o,e){o._reconstructActiveFormattingElements(),o._insertElement(e,NS.HTML),o.activeFormattingElements.pushElement(o.openElements.current,e)}function nobrStartTagInBody(o,e){o._reconstructActiveFormattingElements(),o.openElements.hasInScope(TAG_ID.NOBR)&&(callAdoptionAgency(o,e),o._reconstructActiveFormattingElements()),o._insertElement(e,NS.HTML),o.activeFormattingElements.pushElement(o.openElements.current,e)}function appletStartTagInBody(o,e){o._reconstructActiveFormattingElements(),o._insertElement(e,NS.HTML),o.activeFormattingElements.insertMarker(),o.framesetOk=!1}function tableStartTagInBody(o,e){o.treeAdapter.getDocumentMode(o.document)!==DOCUMENT_MODE.QUIRKS&&o.openElements.hasInButtonScope(TAG_ID.P)&&o._closePElement(),o._insertElement(e,NS.HTML),o.framesetOk=!1,o.insertionMode=InsertionMode.IN_TABLE}function areaStartTagInBody(o,e){o._reconstructActiveFormattingElements(),o._appendElement(e,NS.HTML),o.framesetOk=!1,e.ackSelfClosing=!0}function isHiddenInput(o){const e=getTokenAttr(o,ATTRS.TYPE);return e!=null&&e.toLowerCase()===HIDDEN_INPUT_TYPE}function inputStartTagInBody(o,e){o._reconstructActiveFormattingElements(),o._appendElement(e,NS.HTML),isHiddenInput(e)||(o.framesetOk=!1),e.ackSelfClosing=!0}function paramStartTagInBody(o,e){o._appendElement(e,NS.HTML),e.ackSelfClosing=!0}function hrStartTagInBody(o,e){o.openElements.hasInButtonScope(TAG_ID.P)&&o._closePElement(),o._appendElement(e,NS.HTML),o.framesetOk=!1,e.ackSelfClosing=!0}function imageStartTagInBody(o,e){e.tagName=TAG_NAMES.IMG,e.tagID=TAG_ID.IMG,areaStartTagInBody(o,e)}function textareaStartTagInBody(o,e){o._insertElement(e,NS.HTML),o.skipNextNewLine=!0,o.tokenizer.state=TokenizerMode.RCDATA,o.originalInsertionMode=o.insertionMode,o.framesetOk=!1,o.insertionMode=InsertionMode.TEXT}function xmpStartTagInBody(o,e){o.openElements.hasInButtonScope(TAG_ID.P)&&o._closePElement(),o._reconstructActiveFormattingElements(),o.framesetOk=!1,o._switchToTextParsing(e,TokenizerMode.RAWTEXT)}function iframeStartTagInBody(o,e){o.framesetOk=!1,o._switchToTextParsing(e,TokenizerMode.RAWTEXT)}function rawTextStartTagInBody(o,e){o._switchToTextParsing(e,TokenizerMode.RAWTEXT)}function selectStartTagInBody(o,e){o._reconstructActiveFormattingElements(),o._insertElement(e,NS.HTML),o.framesetOk=!1,o.insertionMode=o.insertionMode===InsertionMode.IN_TABLE||o.insertionMode===InsertionMode.IN_CAPTION||o.insertionMode===InsertionMode.IN_TABLE_BODY||o.insertionMode===InsertionMode.IN_ROW||o.insertionMode===InsertionMode.IN_CELL?InsertionMode.IN_SELECT_IN_TABLE:InsertionMode.IN_SELECT}function optgroupStartTagInBody(o,e){o.openElements.currentTagId===TAG_ID.OPTION&&o.openElements.pop(),o._reconstructActiveFormattingElements(),o._insertElement(e,NS.HTML)}function rbStartTagInBody(o,e){o.openElements.hasInScope(TAG_ID.RUBY)&&o.openElements.generateImpliedEndTags(),o._insertElement(e,NS.HTML)}function rtStartTagInBody(o,e){o.openElements.hasInScope(TAG_ID.RUBY)&&o.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.RTC),o._insertElement(e,NS.HTML)}function mathStartTagInBody(o,e){o._reconstructActiveFormattingElements(),adjustTokenMathMLAttrs(e),adjustTokenXMLAttrs(e),e.selfClosing?o._appendElement(e,NS.MATHML):o._insertElement(e,NS.MATHML),e.ackSelfClosing=!0}function svgStartTagInBody(o,e){o._reconstructActiveFormattingElements(),adjustTokenSVGAttrs(e),adjustTokenXMLAttrs(e),e.selfClosing?o._appendElement(e,NS.SVG):o._insertElement(e,NS.SVG),e.ackSelfClosing=!0}function genericStartTagInBody(o,e){o._reconstructActiveFormattingElements(),o._insertElement(e,NS.HTML)}function startTagInBody(o,e){switch(e.tagID){case TAG_ID.I:case TAG_ID.S:case TAG_ID.B:case TAG_ID.U:case TAG_ID.EM:case TAG_ID.TT:case TAG_ID.BIG:case TAG_ID.CODE:case TAG_ID.FONT:case TAG_ID.SMALL:case TAG_ID.STRIKE:case TAG_ID.STRONG:{bStartTagInBody(o,e);break}case TAG_ID.A:{aStartTagInBody(o,e);break}case TAG_ID.H1:case TAG_ID.H2:case TAG_ID.H3:case TAG_ID.H4:case TAG_ID.H5:case TAG_ID.H6:{numberedHeaderStartTagInBody(o,e);break}case TAG_ID.P:case TAG_ID.DL:case TAG_ID.OL:case TAG_ID.UL:case TAG_ID.DIV:case TAG_ID.DIR:case TAG_ID.NAV:case TAG_ID.MAIN:case TAG_ID.MENU:case TAG_ID.ASIDE:case TAG_ID.CENTER:case TAG_ID.FIGURE:case TAG_ID.FOOTER:case TAG_ID.HEADER:case TAG_ID.HGROUP:case TAG_ID.DIALOG:case TAG_ID.DETAILS:case TAG_ID.ADDRESS:case TAG_ID.ARTICLE:case TAG_ID.SEARCH:case TAG_ID.SECTION:case TAG_ID.SUMMARY:case TAG_ID.FIELDSET:case TAG_ID.BLOCKQUOTE:case TAG_ID.FIGCAPTION:{addressStartTagInBody(o,e);break}case TAG_ID.LI:case TAG_ID.DD:case TAG_ID.DT:{listItemStartTagInBody(o,e);break}case TAG_ID.BR:case TAG_ID.IMG:case TAG_ID.WBR:case TAG_ID.AREA:case TAG_ID.EMBED:case TAG_ID.KEYGEN:{areaStartTagInBody(o,e);break}case TAG_ID.HR:{hrStartTagInBody(o,e);break}case TAG_ID.RB:case TAG_ID.RTC:{rbStartTagInBody(o,e);break}case TAG_ID.RT:case TAG_ID.RP:{rtStartTagInBody(o,e);break}case TAG_ID.PRE:case TAG_ID.LISTING:{preStartTagInBody(o,e);break}case TAG_ID.XMP:{xmpStartTagInBody(o,e);break}case TAG_ID.SVG:{svgStartTagInBody(o,e);break}case TAG_ID.HTML:{htmlStartTagInBody(o,e);break}case TAG_ID.BASE:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.STYLE:case TAG_ID.TITLE:case TAG_ID.SCRIPT:case TAG_ID.BGSOUND:case TAG_ID.BASEFONT:case TAG_ID.TEMPLATE:{startTagInHead(o,e);break}case TAG_ID.BODY:{bodyStartTagInBody(o,e);break}case TAG_ID.FORM:{formStartTagInBody(o,e);break}case TAG_ID.NOBR:{nobrStartTagInBody(o,e);break}case TAG_ID.MATH:{mathStartTagInBody(o,e);break}case TAG_ID.TABLE:{tableStartTagInBody(o,e);break}case TAG_ID.INPUT:{inputStartTagInBody(o,e);break}case TAG_ID.PARAM:case TAG_ID.TRACK:case TAG_ID.SOURCE:{paramStartTagInBody(o,e);break}case TAG_ID.IMAGE:{imageStartTagInBody(o,e);break}case TAG_ID.BUTTON:{buttonStartTagInBody(o,e);break}case TAG_ID.APPLET:case TAG_ID.OBJECT:case TAG_ID.MARQUEE:{appletStartTagInBody(o,e);break}case TAG_ID.IFRAME:{iframeStartTagInBody(o,e);break}case TAG_ID.SELECT:{selectStartTagInBody(o,e);break}case TAG_ID.OPTION:case TAG_ID.OPTGROUP:{optgroupStartTagInBody(o,e);break}case TAG_ID.NOEMBED:case TAG_ID.NOFRAMES:{rawTextStartTagInBody(o,e);break}case TAG_ID.FRAMESET:{framesetStartTagInBody(o,e);break}case TAG_ID.TEXTAREA:{textareaStartTagInBody(o,e);break}case TAG_ID.NOSCRIPT:{o.options.scriptingEnabled?rawTextStartTagInBody(o,e):genericStartTagInBody(o,e);break}case TAG_ID.PLAINTEXT:{plaintextStartTagInBody(o,e);break}case TAG_ID.COL:case TAG_ID.TH:case TAG_ID.TD:case TAG_ID.TR:case TAG_ID.HEAD:case TAG_ID.FRAME:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.CAPTION:case TAG_ID.COLGROUP:break;default:genericStartTagInBody(o,e)}}function bodyEndTagInBody(o,e){if(o.openElements.hasInScope(TAG_ID.BODY)&&(o.insertionMode=InsertionMode.AFTER_BODY,o.options.sourceCodeLocationInfo)){const s=o.openElements.tryPeekProperlyNestedBodyElement();s&&o._setEndLocation(s,e)}}function htmlEndTagInBody(o,e){o.openElements.hasInScope(TAG_ID.BODY)&&(o.insertionMode=InsertionMode.AFTER_BODY,endTagAfterBody(o,e))}function addressEndTagInBody(o,e){const s=e.tagID;o.openElements.hasInScope(s)&&(o.openElements.generateImpliedEndTags(),o.openElements.popUntilTagNamePopped(s))}function formEndTagInBody(o){const e=o.openElements.tmplCount>0,{formElement:s}=o;e||(o.formElement=null),(s||e)&&o.openElements.hasInScope(TAG_ID.FORM)&&(o.openElements.generateImpliedEndTags(),e?o.openElements.popUntilTagNamePopped(TAG_ID.FORM):s&&o.openElements.remove(s))}function pEndTagInBody(o){o.openElements.hasInButtonScope(TAG_ID.P)||o._insertFakeElement(TAG_NAMES.P,TAG_ID.P),o._closePElement()}function liEndTagInBody(o){o.openElements.hasInListItemScope(TAG_ID.LI)&&(o.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.LI),o.openElements.popUntilTagNamePopped(TAG_ID.LI))}function ddEndTagInBody(o,e){const s=e.tagID;o.openElements.hasInScope(s)&&(o.openElements.generateImpliedEndTagsWithExclusion(s),o.openElements.popUntilTagNamePopped(s))}function numberedHeaderEndTagInBody(o){o.openElements.hasNumberedHeaderInScope()&&(o.openElements.generateImpliedEndTags(),o.openElements.popUntilNumberedHeaderPopped())}function appletEndTagInBody(o,e){const s=e.tagID;o.openElements.hasInScope(s)&&(o.openElements.generateImpliedEndTags(),o.openElements.popUntilTagNamePopped(s),o.activeFormattingElements.clearToLastMarker())}function brEndTagInBody(o){o._reconstructActiveFormattingElements(),o._insertFakeElement(TAG_NAMES.BR,TAG_ID.BR),o.openElements.pop(),o.framesetOk=!1}function genericEndTagInBody(o,e){const s=e.tagName,a=e.tagID;for(let l=o.openElements.stackTop;l>0;l--){const u=o.openElements.items[l],c=o.openElements.tagIDs[l];if(a===c&&(a!==TAG_ID.UNKNOWN||o.treeAdapter.getTagName(u)===s)){o.openElements.generateImpliedEndTagsWithExclusion(a),o.openElements.stackTop>=l&&o.openElements.shortenToLength(l);break}if(o._isSpecialElement(u,c))break}}function endTagInBody(o,e){switch(e.tagID){case TAG_ID.A:case TAG_ID.B:case TAG_ID.I:case TAG_ID.S:case TAG_ID.U:case TAG_ID.EM:case TAG_ID.TT:case TAG_ID.BIG:case TAG_ID.CODE:case TAG_ID.FONT:case TAG_ID.NOBR:case TAG_ID.SMALL:case TAG_ID.STRIKE:case TAG_ID.STRONG:{callAdoptionAgency(o,e);break}case TAG_ID.P:{pEndTagInBody(o);break}case TAG_ID.DL:case TAG_ID.UL:case TAG_ID.OL:case TAG_ID.DIR:case TAG_ID.DIV:case TAG_ID.NAV:case TAG_ID.PRE:case TAG_ID.MAIN:case TAG_ID.MENU:case TAG_ID.ASIDE:case TAG_ID.BUTTON:case TAG_ID.CENTER:case TAG_ID.FIGURE:case TAG_ID.FOOTER:case TAG_ID.HEADER:case TAG_ID.HGROUP:case TAG_ID.DIALOG:case TAG_ID.ADDRESS:case TAG_ID.ARTICLE:case TAG_ID.DETAILS:case TAG_ID.SEARCH:case TAG_ID.SECTION:case TAG_ID.SUMMARY:case TAG_ID.LISTING:case TAG_ID.FIELDSET:case TAG_ID.BLOCKQUOTE:case TAG_ID.FIGCAPTION:{addressEndTagInBody(o,e);break}case TAG_ID.LI:{liEndTagInBody(o);break}case TAG_ID.DD:case TAG_ID.DT:{ddEndTagInBody(o,e);break}case TAG_ID.H1:case TAG_ID.H2:case TAG_ID.H3:case TAG_ID.H4:case TAG_ID.H5:case TAG_ID.H6:{numberedHeaderEndTagInBody(o);break}case TAG_ID.BR:{brEndTagInBody(o);break}case TAG_ID.BODY:{bodyEndTagInBody(o,e);break}case TAG_ID.HTML:{htmlEndTagInBody(o,e);break}case TAG_ID.FORM:{formEndTagInBody(o);break}case TAG_ID.APPLET:case TAG_ID.OBJECT:case TAG_ID.MARQUEE:{appletEndTagInBody(o,e);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(o,e);break}default:genericEndTagInBody(o,e)}}function eofInBody(o,e){o.tmplInsertionModeStack.length>0?eofInTemplate(o,e):stopParsing(o,e)}function endTagInText(o,e){var s;e.tagID===TAG_ID.SCRIPT&&((s=o.scriptHandler)===null||s===void 0||s.call(o,o.openElements.current)),o.openElements.pop(),o.insertionMode=o.originalInsertionMode}function eofInText(o,e){o._err(e,ERR.eofInElementThatCanContainOnlyText),o.openElements.pop(),o.insertionMode=o.originalInsertionMode,o.onEof(e)}function characterInTable(o,e){if(o.openElements.currentTagId!==void 0&&TABLE_STRUCTURE_TAGS.has(o.openElements.currentTagId))switch(o.pendingCharacterTokens.length=0,o.hasNonWhitespacePendingCharacterToken=!1,o.originalInsertionMode=o.insertionMode,o.insertionMode=InsertionMode.IN_TABLE_TEXT,e.type){case TokenType.CHARACTER:{characterInTableText(o,e);break}case TokenType.WHITESPACE_CHARACTER:{whitespaceCharacterInTableText(o,e);break}}else tokenInTable(o,e)}function captionStartTagInTable(o,e){o.openElements.clearBackToTableContext(),o.activeFormattingElements.insertMarker(),o._insertElement(e,NS.HTML),o.insertionMode=InsertionMode.IN_CAPTION}function colgroupStartTagInTable(o,e){o.openElements.clearBackToTableContext(),o._insertElement(e,NS.HTML),o.insertionMode=InsertionMode.IN_COLUMN_GROUP}function colStartTagInTable(o,e){o.openElements.clearBackToTableContext(),o._insertFakeElement(TAG_NAMES.COLGROUP,TAG_ID.COLGROUP),o.insertionMode=InsertionMode.IN_COLUMN_GROUP,startTagInColumnGroup(o,e)}function tbodyStartTagInTable(o,e){o.openElements.clearBackToTableContext(),o._insertElement(e,NS.HTML),o.insertionMode=InsertionMode.IN_TABLE_BODY}function tdStartTagInTable(o,e){o.openElements.clearBackToTableContext(),o._insertFakeElement(TAG_NAMES.TBODY,TAG_ID.TBODY),o.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(o,e)}function tableStartTagInTable(o,e){o.openElements.hasInTableScope(TAG_ID.TABLE)&&(o.openElements.popUntilTagNamePopped(TAG_ID.TABLE),o._resetInsertionMode(),o._processStartTag(e))}function inputStartTagInTable(o,e){isHiddenInput(e)?o._appendElement(e,NS.HTML):tokenInTable(o,e),e.ackSelfClosing=!0}function formStartTagInTable(o,e){!o.formElement&&o.openElements.tmplCount===0&&(o._insertElement(e,NS.HTML),o.formElement=o.openElements.current,o.openElements.pop())}function startTagInTable(o,e){switch(e.tagID){case TAG_ID.TD:case TAG_ID.TH:case TAG_ID.TR:{tdStartTagInTable(o,e);break}case TAG_ID.STYLE:case TAG_ID.SCRIPT:case TAG_ID.TEMPLATE:{startTagInHead(o,e);break}case TAG_ID.COL:{colStartTagInTable(o,e);break}case TAG_ID.FORM:{formStartTagInTable(o,e);break}case TAG_ID.TABLE:{tableStartTagInTable(o,e);break}case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{tbodyStartTagInTable(o,e);break}case TAG_ID.INPUT:{inputStartTagInTable(o,e);break}case TAG_ID.CAPTION:{captionStartTagInTable(o,e);break}case TAG_ID.COLGROUP:{colgroupStartTagInTable(o,e);break}default:tokenInTable(o,e)}}function endTagInTable(o,e){switch(e.tagID){case TAG_ID.TABLE:{o.openElements.hasInTableScope(TAG_ID.TABLE)&&(o.openElements.popUntilTagNamePopped(TAG_ID.TABLE),o._resetInsertionMode());break}case TAG_ID.TEMPLATE:{templateEndTagInHead(o,e);break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TBODY:case TAG_ID.TD:case TAG_ID.TFOOT:case TAG_ID.TH:case TAG_ID.THEAD:case TAG_ID.TR:break;default:tokenInTable(o,e)}}function tokenInTable(o,e){const s=o.fosterParentingEnabled;o.fosterParentingEnabled=!0,modeInBody(o,e),o.fosterParentingEnabled=s}function whitespaceCharacterInTableText(o,e){o.pendingCharacterTokens.push(e)}function characterInTableText(o,e){o.pendingCharacterTokens.push(e),o.hasNonWhitespacePendingCharacterToken=!0}function tokenInTableText(o,e){let s=0;if(o.hasNonWhitespacePendingCharacterToken)for(;s<o.pendingCharacterTokens.length;s++)tokenInTable(o,o.pendingCharacterTokens[s]);else for(;s<o.pendingCharacterTokens.length;s++)o._insertCharacters(o.pendingCharacterTokens[s]);o.insertionMode=o.originalInsertionMode,o._processToken(e)}const TABLE_VOID_ELEMENTS=new Set([TAG_ID.CAPTION,TAG_ID.COL,TAG_ID.COLGROUP,TAG_ID.TBODY,TAG_ID.TD,TAG_ID.TFOOT,TAG_ID.TH,TAG_ID.THEAD,TAG_ID.TR]);function startTagInCaption(o,e){const s=e.tagID;TABLE_VOID_ELEMENTS.has(s)?o.openElements.hasInTableScope(TAG_ID.CAPTION)&&(o.openElements.generateImpliedEndTags(),o.openElements.popUntilTagNamePopped(TAG_ID.CAPTION),o.activeFormattingElements.clearToLastMarker(),o.insertionMode=InsertionMode.IN_TABLE,startTagInTable(o,e)):startTagInBody(o,e)}function endTagInCaption(o,e){const s=e.tagID;switch(s){case TAG_ID.CAPTION:case TAG_ID.TABLE:{o.openElements.hasInTableScope(TAG_ID.CAPTION)&&(o.openElements.generateImpliedEndTags(),o.openElements.popUntilTagNamePopped(TAG_ID.CAPTION),o.activeFormattingElements.clearToLastMarker(),o.insertionMode=InsertionMode.IN_TABLE,s===TAG_ID.TABLE&&endTagInTable(o,e));break}case TAG_ID.BODY:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TBODY:case TAG_ID.TD:case TAG_ID.TFOOT:case TAG_ID.TH:case TAG_ID.THEAD:case TAG_ID.TR:break;default:endTagInBody(o,e)}}function startTagInColumnGroup(o,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(o,e);break}case TAG_ID.COL:{o._appendElement(e,NS.HTML),e.ackSelfClosing=!0;break}case TAG_ID.TEMPLATE:{startTagInHead(o,e);break}default:tokenInColumnGroup(o,e)}}function endTagInColumnGroup(o,e){switch(e.tagID){case TAG_ID.COLGROUP:{o.openElements.currentTagId===TAG_ID.COLGROUP&&(o.openElements.pop(),o.insertionMode=InsertionMode.IN_TABLE);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(o,e);break}case TAG_ID.COL:break;default:tokenInColumnGroup(o,e)}}function tokenInColumnGroup(o,e){o.openElements.currentTagId===TAG_ID.COLGROUP&&(o.openElements.pop(),o.insertionMode=InsertionMode.IN_TABLE,o._processToken(e))}function startTagInTableBody(o,e){switch(e.tagID){case TAG_ID.TR:{o.openElements.clearBackToTableBodyContext(),o._insertElement(e,NS.HTML),o.insertionMode=InsertionMode.IN_ROW;break}case TAG_ID.TH:case TAG_ID.TD:{o.openElements.clearBackToTableBodyContext(),o._insertFakeElement(TAG_NAMES.TR,TAG_ID.TR),o.insertionMode=InsertionMode.IN_ROW,startTagInRow(o,e);break}case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{o.openElements.hasTableBodyContextInTableScope()&&(o.openElements.clearBackToTableBodyContext(),o.openElements.pop(),o.insertionMode=InsertionMode.IN_TABLE,startTagInTable(o,e));break}default:startTagInTable(o,e)}}function endTagInTableBody(o,e){const s=e.tagID;switch(e.tagID){case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{o.openElements.hasInTableScope(s)&&(o.openElements.clearBackToTableBodyContext(),o.openElements.pop(),o.insertionMode=InsertionMode.IN_TABLE);break}case TAG_ID.TABLE:{o.openElements.hasTableBodyContextInTableScope()&&(o.openElements.clearBackToTableBodyContext(),o.openElements.pop(),o.insertionMode=InsertionMode.IN_TABLE,endTagInTable(o,e));break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TD:case TAG_ID.TH:case TAG_ID.TR:break;default:endTagInTable(o,e)}}function startTagInRow(o,e){switch(e.tagID){case TAG_ID.TH:case TAG_ID.TD:{o.openElements.clearBackToTableRowContext(),o._insertElement(e,NS.HTML),o.insertionMode=InsertionMode.IN_CELL,o.activeFormattingElements.insertMarker();break}case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.TR:{o.openElements.hasInTableScope(TAG_ID.TR)&&(o.openElements.clearBackToTableRowContext(),o.openElements.pop(),o.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(o,e));break}default:startTagInTable(o,e)}}function endTagInRow(o,e){switch(e.tagID){case TAG_ID.TR:{o.openElements.hasInTableScope(TAG_ID.TR)&&(o.openElements.clearBackToTableRowContext(),o.openElements.pop(),o.insertionMode=InsertionMode.IN_TABLE_BODY);break}case TAG_ID.TABLE:{o.openElements.hasInTableScope(TAG_ID.TR)&&(o.openElements.clearBackToTableRowContext(),o.openElements.pop(),o.insertionMode=InsertionMode.IN_TABLE_BODY,endTagInTableBody(o,e));break}case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{(o.openElements.hasInTableScope(e.tagID)||o.openElements.hasInTableScope(TAG_ID.TR))&&(o.openElements.clearBackToTableRowContext(),o.openElements.pop(),o.insertionMode=InsertionMode.IN_TABLE_BODY,endTagInTableBody(o,e));break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TD:case TAG_ID.TH:break;default:endTagInTable(o,e)}}function startTagInCell(o,e){const s=e.tagID;TABLE_VOID_ELEMENTS.has(s)?(o.openElements.hasInTableScope(TAG_ID.TD)||o.openElements.hasInTableScope(TAG_ID.TH))&&(o._closeTableCell(),startTagInRow(o,e)):startTagInBody(o,e)}function endTagInCell(o,e){const s=e.tagID;switch(s){case TAG_ID.TD:case TAG_ID.TH:{o.openElements.hasInTableScope(s)&&(o.openElements.generateImpliedEndTags(),o.openElements.popUntilTagNamePopped(s),o.activeFormattingElements.clearToLastMarker(),o.insertionMode=InsertionMode.IN_ROW);break}case TAG_ID.TABLE:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.TR:{o.openElements.hasInTableScope(s)&&(o._closeTableCell(),endTagInRow(o,e));break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:break;default:endTagInBody(o,e)}}function startTagInSelect(o,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(o,e);break}case TAG_ID.OPTION:{o.openElements.currentTagId===TAG_ID.OPTION&&o.openElements.pop(),o._insertElement(e,NS.HTML);break}case TAG_ID.OPTGROUP:{o.openElements.currentTagId===TAG_ID.OPTION&&o.openElements.pop(),o.openElements.currentTagId===TAG_ID.OPTGROUP&&o.openElements.pop(),o._insertElement(e,NS.HTML);break}case TAG_ID.HR:{o.openElements.currentTagId===TAG_ID.OPTION&&o.openElements.pop(),o.openElements.currentTagId===TAG_ID.OPTGROUP&&o.openElements.pop(),o._appendElement(e,NS.HTML),e.ackSelfClosing=!0;break}case TAG_ID.INPUT:case TAG_ID.KEYGEN:case TAG_ID.TEXTAREA:case TAG_ID.SELECT:{o.openElements.hasInSelectScope(TAG_ID.SELECT)&&(o.openElements.popUntilTagNamePopped(TAG_ID.SELECT),o._resetInsertionMode(),e.tagID!==TAG_ID.SELECT&&o._processStartTag(e));break}case TAG_ID.SCRIPT:case TAG_ID.TEMPLATE:{startTagInHead(o,e);break}}}function endTagInSelect(o,e){switch(e.tagID){case TAG_ID.OPTGROUP:{o.openElements.stackTop>0&&o.openElements.currentTagId===TAG_ID.OPTION&&o.openElements.tagIDs[o.openElements.stackTop-1]===TAG_ID.OPTGROUP&&o.openElements.pop(),o.openElements.currentTagId===TAG_ID.OPTGROUP&&o.openElements.pop();break}case TAG_ID.OPTION:{o.openElements.currentTagId===TAG_ID.OPTION&&o.openElements.pop();break}case TAG_ID.SELECT:{o.openElements.hasInSelectScope(TAG_ID.SELECT)&&(o.openElements.popUntilTagNamePopped(TAG_ID.SELECT),o._resetInsertionMode());break}case TAG_ID.TEMPLATE:{templateEndTagInHead(o,e);break}}}function startTagInSelectInTable(o,e){const s=e.tagID;s===TAG_ID.CAPTION||s===TAG_ID.TABLE||s===TAG_ID.TBODY||s===TAG_ID.TFOOT||s===TAG_ID.THEAD||s===TAG_ID.TR||s===TAG_ID.TD||s===TAG_ID.TH?(o.openElements.popUntilTagNamePopped(TAG_ID.SELECT),o._resetInsertionMode(),o._processStartTag(e)):startTagInSelect(o,e)}function endTagInSelectInTable(o,e){const s=e.tagID;s===TAG_ID.CAPTION||s===TAG_ID.TABLE||s===TAG_ID.TBODY||s===TAG_ID.TFOOT||s===TAG_ID.THEAD||s===TAG_ID.TR||s===TAG_ID.TD||s===TAG_ID.TH?o.openElements.hasInTableScope(s)&&(o.openElements.popUntilTagNamePopped(TAG_ID.SELECT),o._resetInsertionMode(),o.onEndTag(e)):endTagInSelect(o,e)}function startTagInTemplate(o,e){switch(e.tagID){case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.SCRIPT:case TAG_ID.STYLE:case TAG_ID.TEMPLATE:case TAG_ID.TITLE:{startTagInHead(o,e);break}case TAG_ID.CAPTION:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{o.tmplInsertionModeStack[0]=InsertionMode.IN_TABLE,o.insertionMode=InsertionMode.IN_TABLE,startTagInTable(o,e);break}case TAG_ID.COL:{o.tmplInsertionModeStack[0]=InsertionMode.IN_COLUMN_GROUP,o.insertionMode=InsertionMode.IN_COLUMN_GROUP,startTagInColumnGroup(o,e);break}case TAG_ID.TR:{o.tmplInsertionModeStack[0]=InsertionMode.IN_TABLE_BODY,o.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(o,e);break}case TAG_ID.TD:case TAG_ID.TH:{o.tmplInsertionModeStack[0]=InsertionMode.IN_ROW,o.insertionMode=InsertionMode.IN_ROW,startTagInRow(o,e);break}default:o.tmplInsertionModeStack[0]=InsertionMode.IN_BODY,o.insertionMode=InsertionMode.IN_BODY,startTagInBody(o,e)}}function endTagInTemplate(o,e){e.tagID===TAG_ID.TEMPLATE&&templateEndTagInHead(o,e)}function eofInTemplate(o,e){o.openElements.tmplCount>0?(o.openElements.popUntilTagNamePopped(TAG_ID.TEMPLATE),o.activeFormattingElements.clearToLastMarker(),o.tmplInsertionModeStack.shift(),o._resetInsertionMode(),o.onEof(e)):stopParsing(o,e)}function startTagAfterBody(o,e){e.tagID===TAG_ID.HTML?startTagInBody(o,e):tokenAfterBody(o,e)}function endTagAfterBody(o,e){var s;if(e.tagID===TAG_ID.HTML){if(o.fragmentContext||(o.insertionMode=InsertionMode.AFTER_AFTER_BODY),o.options.sourceCodeLocationInfo&&o.openElements.tagIDs[0]===TAG_ID.HTML){o._setEndLocation(o.openElements.items[0],e);const a=o.openElements.items[1];a&&!(!((s=o.treeAdapter.getNodeSourceCodeLocation(a))===null||s===void 0)&&s.endTag)&&o._setEndLocation(a,e)}}else tokenAfterBody(o,e)}function tokenAfterBody(o,e){o.insertionMode=InsertionMode.IN_BODY,modeInBody(o,e)}function startTagInFrameset(o,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(o,e);break}case TAG_ID.FRAMESET:{o._insertElement(e,NS.HTML);break}case TAG_ID.FRAME:{o._appendElement(e,NS.HTML),e.ackSelfClosing=!0;break}case TAG_ID.NOFRAMES:{startTagInHead(o,e);break}}}function endTagInFrameset(o,e){e.tagID===TAG_ID.FRAMESET&&!o.openElements.isRootHtmlElementCurrent()&&(o.openElements.pop(),!o.fragmentContext&&o.openElements.currentTagId!==TAG_ID.FRAMESET&&(o.insertionMode=InsertionMode.AFTER_FRAMESET))}function startTagAfterFrameset(o,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(o,e);break}case TAG_ID.NOFRAMES:{startTagInHead(o,e);break}}}function endTagAfterFrameset(o,e){e.tagID===TAG_ID.HTML&&(o.insertionMode=InsertionMode.AFTER_AFTER_FRAMESET)}function startTagAfterAfterBody(o,e){e.tagID===TAG_ID.HTML?startTagInBody(o,e):tokenAfterAfterBody(o,e)}function tokenAfterAfterBody(o,e){o.insertionMode=InsertionMode.IN_BODY,modeInBody(o,e)}function startTagAfterAfterFrameset(o,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(o,e);break}case TAG_ID.NOFRAMES:{startTagInHead(o,e);break}}}function nullCharacterInForeignContent(o,e){e.chars=REPLACEMENT_CHARACTER,o._insertCharacters(e)}function characterInForeignContent(o,e){o._insertCharacters(e),o.framesetOk=!1}function popUntilHtmlOrIntegrationPoint(o){for(;o.treeAdapter.getNamespaceURI(o.openElements.current)!==NS.HTML&&o.openElements.currentTagId!==void 0&&!o._isIntegrationPoint(o.openElements.currentTagId,o.openElements.current);)o.openElements.pop()}function startTagInForeignContent(o,e){if(causesExit(e))popUntilHtmlOrIntegrationPoint(o),o._startTagOutsideForeignContent(e);else{const s=o._getAdjustedCurrentElement(),a=o.treeAdapter.getNamespaceURI(s);a===NS.MATHML?adjustTokenMathMLAttrs(e):a===NS.SVG&&(adjustTokenSVGTagName(e),adjustTokenSVGAttrs(e)),adjustTokenXMLAttrs(e),e.selfClosing?o._appendElement(e,a):o._insertElement(e,a),e.ackSelfClosing=!0}}function endTagInForeignContent(o,e){if(e.tagID===TAG_ID.P||e.tagID===TAG_ID.BR){popUntilHtmlOrIntegrationPoint(o),o._endTagOutsideForeignContent(e);return}for(let s=o.openElements.stackTop;s>0;s--){const a=o.openElements.items[s];if(o.treeAdapter.getNamespaceURI(a)===NS.HTML){o._endTagOutsideForeignContent(e);break}const l=o.treeAdapter.getTagName(a);if(l.toLowerCase()===e.tagName){e.tagName=l,o.openElements.shortenToLength(s);break}}}function getEscaper(o,e){return function(a){let l,u=0,c="";for(;l=o.exec(a);)u!==l.index&&(c+=a.substring(u,l.index)),c+=e.get(l[0].charCodeAt(0)),u=l.index+1;return c+a.substring(u)}}const escapeAttribute=getEscaper(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),escapeText=getEscaper(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),VOID_ELEMENTS=new Set([TAG_NAMES.AREA,TAG_NAMES.BASE,TAG_NAMES.BASEFONT,TAG_NAMES.BGSOUND,TAG_NAMES.BR,TAG_NAMES.COL,TAG_NAMES.EMBED,TAG_NAMES.FRAME,TAG_NAMES.HR,TAG_NAMES.IMG,TAG_NAMES.INPUT,TAG_NAMES.KEYGEN,TAG_NAMES.LINK,TAG_NAMES.META,TAG_NAMES.PARAM,TAG_NAMES.SOURCE,TAG_NAMES.TRACK,TAG_NAMES.WBR]);function isVoidElement(o,e){return e.treeAdapter.isElementNode(o)&&e.treeAdapter.getNamespaceURI(o)===NS.HTML&&VOID_ELEMENTS.has(e.treeAdapter.getTagName(o))}const defaultOpts={treeAdapter:defaultTreeAdapter,scriptingEnabled:!0};function serializeOuter(o,e){const s={...defaultOpts,...e};return serializeNode(o,s)}function serializeChildNodes(o,e){let s="";const a=e.treeAdapter.isElementNode(o)&&e.treeAdapter.getTagName(o)===TAG_NAMES.TEMPLATE&&e.treeAdapter.getNamespaceURI(o)===NS.HTML?e.treeAdapter.getTemplateContent(o):o,l=e.treeAdapter.getChildNodes(a);if(l)for(const u of l)s+=serializeNode(u,e);return s}function serializeNode(o,e){return e.treeAdapter.isElementNode(o)?serializeElement(o,e):e.treeAdapter.isTextNode(o)?serializeTextNode(o,e):e.treeAdapter.isCommentNode(o)?serializeCommentNode(o,e):e.treeAdapter.isDocumentTypeNode(o)?serializeDocumentTypeNode(o,e):""}function serializeElement(o,e){const s=e.treeAdapter.getTagName(o);return`<${s}${serializeAttributes(o,e)}>${isVoidElement(o,e)?"":`${serializeChildNodes(o,e)}</${s}>`}`}function serializeAttributes(o,{treeAdapter:e}){let s="";for(const a of e.getAttrList(o)){if(s+=" ",a.namespace)switch(a.namespace){case NS.XML:{s+=`xml:${a.name}`;break}case NS.XMLNS:{a.name!=="xmlns"&&(s+="xmlns:"),s+=a.name;break}case NS.XLINK:{s+=`xlink:${a.name}`;break}default:s+=`${a.prefix}:${a.name}`}else s+=a.name;s+=`="${escapeAttribute(a.value)}"`}return s}function serializeTextNode(o,e){const{treeAdapter:s}=e,a=s.getTextNodeContent(o),l=s.getParentNode(o),u=l&&s.isElementNode(l)&&s.getTagName(l);return u&&s.getNamespaceURI(l)===NS.HTML&&hasUnescapedText(u,e.scriptingEnabled)?a:escapeText(a)}function serializeCommentNode(o,{treeAdapter:e}){return`<!--${e.getCommentNodeContent(o)}-->`}function serializeDocumentTypeNode(o,{treeAdapter:e}){return`<!DOCTYPE ${e.getDocumentTypeNodeName(o)}>`}function parse$3(o,e){return Parser$1.parse(o,e)}function parseFragment(o,e,s){typeof o=="string"&&(s=e,e=o,o=null);const a=Parser$1.getFragmentParser(o,s);return a.tokenizer.write(e,!0),a.getFragment()}function enquoteDoctypeId(o){const e=o.includes('"')?"'":'"';return e+o+e}function serializeDoctypeContent(o,e,s){let a="!DOCTYPE ";return o&&(a+=o),e?a+=` PUBLIC ${enquoteDoctypeId(e)}`:s&&(a+=" SYSTEM"),s&&(a+=` ${enquoteDoctypeId(s)}`),a}const adapter={isCommentNode:isComment,isElementNode:isTag,isTextNode:isText,createDocument(){const o=new Document([]);return o["x-mode"]=DOCUMENT_MODE.NO_QUIRKS,o},createDocumentFragment(){return new Document([])},createElement(o,e,s){const a=Object.create(null),l=Object.create(null),u=Object.create(null);for(let d=0;d<s.length;d++){const h=s[d].name;a[h]=s[d].value,l[h]=s[d].namespace,u[h]=s[d].prefix}const c=new Element$3(o,a,[]);return c.namespace=e,c["x-attribsNamespace"]=l,c["x-attribsPrefix"]=u,c},createCommentNode(o){return new Comment(o)},createTextNode(o){return new Text$1(o)},appendChild(o,e){const s=o.children[o.children.length-1];s&&(s.next=e,e.prev=s),o.children.push(e),e.parent=o},insertBefore(o,e,s){const a=o.children.indexOf(s),{prev:l}=s;l&&(l.next=e,e.prev=l),s.prev=e,e.next=s,o.children.splice(a,0,e),e.parent=o},setTemplateContent(o,e){adapter.appendChild(o,e)},getTemplateContent(o){return o.children[0]},setDocumentType(o,e,s,a){const l=serializeDoctypeContent(e,s,a);let u=o.children.find(c=>isDirective(c)&&c.name==="!doctype");u?u.data=l??null:(u=new ProcessingInstruction("!doctype",l),adapter.appendChild(o,u)),u["x-name"]=e,u["x-publicId"]=s,u["x-systemId"]=a},setDocumentMode(o,e){o["x-mode"]=e},getDocumentMode(o){return o["x-mode"]},detachNode(o){if(o.parent){const e=o.parent.children.indexOf(o),{prev:s,next:a}=o;o.prev=null,o.next=null,s&&(s.next=a),a&&(a.prev=s),o.parent.children.splice(e,1),o.parent=null}},insertText(o,e){const s=o.children[o.children.length-1];s&&isText(s)?s.data+=e:adapter.appendChild(o,adapter.createTextNode(e))},insertTextBefore(o,e,s){const a=o.children[o.children.indexOf(s)-1];a&&isText(a)?a.data+=e:adapter.insertBefore(o,adapter.createTextNode(e),s)},adoptAttributes(o,e){for(let s=0;s<e.length;s++){const a=e[s].name;o.attribs[a]===void 0&&(o.attribs[a]=e[s].value,o["x-attribsNamespace"][a]=e[s].namespace,o["x-attribsPrefix"][a]=e[s].prefix)}},getFirstChild(o){return o.children[0]},getChildNodes(o){return o.children},getParentNode(o){return o.parent},getAttrList(o){return o.attributes},getTagName(o){return o.name},getNamespaceURI(o){return o.namespace},getTextNodeContent(o){return o.data},getCommentNodeContent(o){return o.data},getDocumentTypeNodeName(o){var e;return(e=o["x-name"])!==null&&e!==void 0?e:""},getDocumentTypeNodePublicId(o){var e;return(e=o["x-publicId"])!==null&&e!==void 0?e:""},getDocumentTypeNodeSystemId(o){var e;return(e=o["x-systemId"])!==null&&e!==void 0?e:""},isDocumentTypeNode(o){return isDirective(o)&&o.name==="!doctype"},setNodeSourceCodeLocation(o,e){e&&(o.startIndex=e.startOffset,o.endIndex=e.endOffset),o.sourceCodeLocation=e},getNodeSourceCodeLocation(o){return o.sourceCodeLocation},updateNodeSourceCodeLocation(o,e){e.endOffset!=null&&(o.endIndex=e.endOffset),o.sourceCodeLocation={...o.sourceCodeLocation,...e}}};function parseWithParse5(o,e,s,a){var l;return(l=e.treeAdapter)!==null&&l!==void 0||(e.treeAdapter=adapter),e.scriptingEnabled!==!1&&(e.scriptingEnabled=!0),s?parse$3(o,e):parseFragment(a,o,e)}const renderOpts={treeAdapter:adapter};function renderWithParse5(o){const e="length"in o?o:[o];for(let a=0;a<e.length;a+=1){const l=e[a];isDocument(l)&&Array.prototype.splice.call(e,a,1,...l.children)}let s="";for(let a=0;a<e.length;a+=1){const l=e[a];s+=serializeOuter(l,renderOpts)}return s}const parse$2=getParse((o,e,s,a)=>e._useHtmlParser2?parseDocument(o,e):parseWithParse5(o,e,s,a)),load=getLoad(parse$2,(o,e)=>e._useHtmlParser2?render$4(o,e):renderWithParse5(o)),browser$2=Object.freeze(Object.defineProperty({__proto__:null,contains:contains$1,load,merge},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(browser$2);var css$1={},parse$1,hasRequiredParse$1;function requireParse$1(){if(hasRequiredParse$1)return parse$1;hasRequiredParse$1=1;var o=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;parse$1=function(a,l){l=l||{};var u=1,c=1;function d(K){var q=K.match(/\n/g);q&&(u+=q.length);var te=K.lastIndexOf(`
`);c=~te?K.length-te:c+K.length}function h(){var K={line:u,column:c};return function(q){return q.position=new p(K),_(),q}}function p(K){this.start=K,this.end={line:u,column:c},this.source=l.source}p.prototype.content=a;var m=[];function g(K){var q=new Error(l.source+":"+u+":"+c+": "+K);if(q.reason=K,q.filename=l.source,q.line=u,q.column=c,q.source=a,l.silent)m.push(q);else throw q}function y(){var K=E();return{type:"stylesheet",stylesheet:{source:l.source,rules:K,parsingErrors:m}}}function A(){return v(/^{\s*/)}function T(){return v(/^}/)}function E(){var K,q=[];for(_(),w(q);a.length&&a.charAt(0)!="}"&&(K=ue()||G());)K!==!1&&(q.push(K),w(q));return q}function v(K){var q=K.exec(a);if(q){var te=q[0];return d(te),a=a.slice(te.length),q}}function _(){v(/^\s*/)}function w(K){var q;for(K=K||[];q=R();)q!==!1&&K.push(q);return K}function R(){var K=h();if(!(a.charAt(0)!="/"||a.charAt(1)!="*")){for(var q=2;a.charAt(q)!=""&&(a.charAt(q)!="*"||a.charAt(q+1)!="/");)++q;if(q+=2,a.charAt(q-1)==="")return g("End of comment missing");var te=a.slice(2,q-2);return c+=2,d(te),a=a.slice(q),c+=2,K({type:"comment",comment:te})}}function k(){var K=v(/^([^{]+)/);if(K)return e(K[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(q){return q.replace(/,/g,"")}).split(/\s*(?![^(]*\)),\s*/).map(function(q){return q.replace(/\u200C/g,",")})}function I(){var K=h(),q=v(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(q){if(q=e(q[0]),!v(/^:\s*/))return g("property missing ':'");var te=v(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),Z=K({type:"declaration",property:q.replace(o,""),value:te?e(te[0]).replace(o,""):""});return v(/^[;\s]*/),Z}}function P(){var K=[];if(!A())return g("missing '{'");w(K);for(var q;q=I();)q!==!1&&(K.push(q),w(K));return T()?K:g("missing '}'")}function N(){for(var K,q=[],te=h();K=v(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)q.push(K[1]),v(/^,\s*/);if(q.length)return te({type:"keyframe",values:q,declarations:P()})}function L(){var K=h(),te=v(/^@([-\w]+)?keyframes\s*/);if(te){var q=te[1],te=v(/^([-\w]+)\s*/);if(!te)return g("@keyframes missing name");var Z=te[1];if(!A())return g("@keyframes missing '{'");for(var ce,be=w();ce=N();)be.push(ce),be=be.concat(w());return T()?K({type:"keyframes",name:Z,vendor:q,keyframes:be}):g("@keyframes missing '}'")}}function Q(){var K=h(),q=v(/^@supports *([^{]+)/);if(q){var te=e(q[1]);if(!A())return g("@supports missing '{'");var Z=w().concat(E());return T()?K({type:"supports",supports:te,rules:Z}):g("@supports missing '}'")}}function j(){var K=h(),q=v(/^@host\s*/);if(q){if(!A())return g("@host missing '{'");var te=w().concat(E());return T()?K({type:"host",rules:te}):g("@host missing '}'")}}function F(){var K=h(),q=v(/^@media *([^{]+)/);if(q){var te=e(q[1]);if(!A())return g("@media missing '{'");var Z=w().concat(E());return T()?K({type:"media",media:te,rules:Z}):g("@media missing '}'")}}function V(){var K=h(),q=v(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(q)return K({type:"custom-media",name:e(q[1]),media:e(q[2])})}function J(){var K=h(),q=v(/^@page */);if(q){var te=k()||[];if(!A())return g("@page missing '{'");for(var Z=w(),ce;ce=I();)Z.push(ce),Z=Z.concat(w());return T()?K({type:"page",selectors:te,declarations:Z}):g("@page missing '}'")}}function z(){var K=h(),q=v(/^@([-\w]+)?document *([^{]+)/);if(q){var te=e(q[1]),Z=e(q[2]);if(!A())return g("@document missing '{'");var ce=w().concat(E());return T()?K({type:"document",document:Z,vendor:te,rules:ce}):g("@document missing '}'")}}function Y(){var K=h(),q=v(/^@font-face\s*/);if(q){if(!A())return g("@font-face missing '{'");for(var te=w(),Z;Z=I();)te.push(Z),te=te.concat(w());return T()?K({type:"font-face",declarations:te}):g("@font-face missing '}'")}}var fe=he("import"),de=he("charset"),X=he("namespace");function he(K){var q=new RegExp("^@"+K+"\\s*([^;]+);");return function(){var te=h(),Z=v(q);if(Z){var ce={type:K};return ce[K]=Z[1].trim(),te(ce)}}}function ue(){if(a[0]=="@")return L()||F()||V()||Q()||fe()||de()||X()||z()||J()||j()||Y()}function G(){var K=h(),q=k();return q?(w(),K({type:"rule",selectors:q,declarations:P()})):g("selector missing")}return s(y())};function e(a){return a?a.replace(/^\s+|\s+$/g,""):""}function s(a,l){var u=a&&typeof a.type=="string",c=u?a:l;for(var d in a){var h=a[d];Array.isArray(h)?h.forEach(function(p){s(p,c)}):h&&typeof h=="object"&&s(h,c)}return u&&Object.defineProperty(a,"parent",{configurable:!0,writable:!0,enumerable:!1,value:l||null}),a}return parse$1}var compiler,hasRequiredCompiler;function requireCompiler(){if(hasRequiredCompiler)return compiler;hasRequiredCompiler=1,compiler=o;function o(e){this.options=e||{}}return o.prototype.emit=function(e){return e},o.prototype.visit=function(e){return this[e.type](e)},o.prototype.mapVisit=function(e,s){var a="";s=s||"";for(var l=0,u=e.length;l<u;l++)a+=this.visit(e[l]),s&&l<u-1&&(a+=this.emit(s));return a},compiler}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(e,s){s&&(e.super_=s,e.prototype=Object.create(s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,s){if(s){e.super_=s;var a=function(){};a.prototype=s.prototype,e.prototype=new a,e.prototype.constructor=e}}),inherits_browser.exports}var compress,hasRequiredCompress;function requireCompress(){if(hasRequiredCompress)return compress;hasRequiredCompress=1;var o=requireCompiler(),e=requireInherits_browser();compress=s;function s(a){o.call(this,a)}return e(s,o),s.prototype.compile=function(a){return a.stylesheet.rules.map(this.visit,this).join("")},s.prototype.comment=function(a){return this.emit("",a.position)},s.prototype.import=function(a){return this.emit("@import "+a.import+";",a.position)},s.prototype.media=function(a){return this.emit("@media "+a.media,a.position)+this.emit("{")+this.mapVisit(a.rules)+this.emit("}")},s.prototype.document=function(a){var l="@"+(a.vendor||"")+"document "+a.document;return this.emit(l,a.position)+this.emit("{")+this.mapVisit(a.rules)+this.emit("}")},s.prototype.charset=function(a){return this.emit("@charset "+a.charset+";",a.position)},s.prototype.namespace=function(a){return this.emit("@namespace "+a.namespace+";",a.position)},s.prototype.supports=function(a){return this.emit("@supports "+a.supports,a.position)+this.emit("{")+this.mapVisit(a.rules)+this.emit("}")},s.prototype.keyframes=function(a){return this.emit("@"+(a.vendor||"")+"keyframes "+a.name,a.position)+this.emit("{")+this.mapVisit(a.keyframes)+this.emit("}")},s.prototype.keyframe=function(a){var l=a.declarations;return this.emit(a.values.join(","),a.position)+this.emit("{")+this.mapVisit(l)+this.emit("}")},s.prototype.page=function(a){var l=a.selectors.length?a.selectors.join(", "):"";return this.emit("@page "+l,a.position)+this.emit("{")+this.mapVisit(a.declarations)+this.emit("}")},s.prototype["font-face"]=function(a){return this.emit("@font-face",a.position)+this.emit("{")+this.mapVisit(a.declarations)+this.emit("}")},s.prototype.host=function(a){return this.emit("@host",a.position)+this.emit("{")+this.mapVisit(a.rules)+this.emit("}")},s.prototype["custom-media"]=function(a){return this.emit("@custom-media "+a.name+" "+a.media+";",a.position)},s.prototype.rule=function(a){var l=a.declarations;return l.length?this.emit(a.selectors.join(","),a.position)+this.emit("{")+this.mapVisit(l)+this.emit("}"):""},s.prototype.declaration=function(a){return this.emit(a.property+":"+a.value,a.position)+this.emit(";")},compress}var identity,hasRequiredIdentity;function requireIdentity(){if(hasRequiredIdentity)return identity;hasRequiredIdentity=1;var o=requireCompiler(),e=requireInherits_browser();identity=s;function s(a){a=a||{},o.call(this,a),this.indentation=a.indent}return e(s,o),s.prototype.compile=function(a){return this.stylesheet(a)},s.prototype.stylesheet=function(a){return this.mapVisit(a.stylesheet.rules,`

`)},s.prototype.comment=function(a){return this.emit(this.indent()+"/*"+a.comment+"*/",a.position)},s.prototype.import=function(a){return this.emit("@import "+a.import+";",a.position)},s.prototype.media=function(a){return this.emit("@media "+a.media,a.position)+this.emit(` {
`+this.indent(1))+this.mapVisit(a.rules,`

`)+this.emit(this.indent(-1)+`
}`)},s.prototype.document=function(a){var l="@"+(a.vendor||"")+"document "+a.document;return this.emit(l,a.position)+this.emit(`  {
`+this.indent(1))+this.mapVisit(a.rules,`

`)+this.emit(this.indent(-1)+`
}`)},s.prototype.charset=function(a){return this.emit("@charset "+a.charset+";",a.position)},s.prototype.namespace=function(a){return this.emit("@namespace "+a.namespace+";",a.position)},s.prototype.supports=function(a){return this.emit("@supports "+a.supports,a.position)+this.emit(` {
`+this.indent(1))+this.mapVisit(a.rules,`

`)+this.emit(this.indent(-1)+`
}`)},s.prototype.keyframes=function(a){return this.emit("@"+(a.vendor||"")+"keyframes "+a.name,a.position)+this.emit(` {
`+this.indent(1))+this.mapVisit(a.keyframes,`
`)+this.emit(this.indent(-1)+"}")},s.prototype.keyframe=function(a){var l=a.declarations;return this.emit(this.indent())+this.emit(a.values.join(", "),a.position)+this.emit(` {
`+this.indent(1))+this.mapVisit(l,`
`)+this.emit(this.indent(-1)+`
`+this.indent()+`}
`)},s.prototype.page=function(a){var l=a.selectors.length?a.selectors.join(", ")+" ":"";return this.emit("@page "+l,a.position)+this.emit(`{
`)+this.emit(this.indent(1))+this.mapVisit(a.declarations,`
`)+this.emit(this.indent(-1))+this.emit(`
}`)},s.prototype["font-face"]=function(a){return this.emit("@font-face ",a.position)+this.emit(`{
`)+this.emit(this.indent(1))+this.mapVisit(a.declarations,`
`)+this.emit(this.indent(-1))+this.emit(`
}`)},s.prototype.host=function(a){return this.emit("@host",a.position)+this.emit(` {
`+this.indent(1))+this.mapVisit(a.rules,`

`)+this.emit(this.indent(-1)+`
}`)},s.prototype["custom-media"]=function(a){return this.emit("@custom-media "+a.name+" "+a.media+";",a.position)},s.prototype.rule=function(a){var l=this.indent(),u=a.declarations;return u.length?this.emit(a.selectors.map(function(c){return l+c}).join(`,
`),a.position)+this.emit(` {
`)+this.emit(this.indent(1))+this.mapVisit(u,`
`)+this.emit(this.indent(-1))+this.emit(`
`+this.indent()+"}"):""},s.prototype.declaration=function(a){return this.emit(this.indent())+this.emit(a.property+": "+a.value,a.position)+this.emit(";")},s.prototype.indent=function(a){return this.level=this.level||1,a!=null?(this.level+=a,""):Array(this.level).join(this.indentation||"  ")},identity}var sourceMapSupport={exports:{}},sourceMap={},sourceMapGenerator={},base64Vlq={},base64={},hasRequiredBase64;function requireBase64(){if(hasRequiredBase64)return base64;hasRequiredBase64=1;var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return base64.encode=function(e){if(0<=e&&e<o.length)return o[e];throw new TypeError("Must be between 0 and 63: "+e)},base64.decode=function(e){var s=65,a=90,l=97,u=122,c=48,d=57,h=43,p=47,m=26,g=52;return s<=e&&e<=a?e-s:l<=e&&e<=u?e-l+m:c<=e&&e<=d?e-c+g:e==h?62:e==p?63:-1},base64}var hasRequiredBase64Vlq;function requireBase64Vlq(){if(hasRequiredBase64Vlq)return base64Vlq;hasRequiredBase64Vlq=1;var o=requireBase64(),e=5,s=1<<e,a=s-1,l=s;function u(d){return d<0?(-d<<1)+1:(d<<1)+0}function c(d){var h=(d&1)===1,p=d>>1;return h?-p:p}return base64Vlq.encode=function(h){var p="",m,g=u(h);do m=g&a,g>>>=e,g>0&&(m|=l),p+=o.encode(m);while(g>0);return p},base64Vlq.decode=function(h,p,m){var g=h.length,y=0,A=0,T,E;do{if(p>=g)throw new Error("Expected more digits in base 64 VLQ value.");if(E=o.decode(h.charCodeAt(p++)),E===-1)throw new Error("Invalid base64 digit: "+h.charAt(p-1));T=!!(E&l),E&=a,y=y+(E<<A),A+=e}while(T);m.value=c(y),m.rest=p},base64Vlq}var util={},hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,(function(o){function e(k,I,P){if(I in k)return k[I];if(arguments.length===3)return P;throw new Error('"'+I+'" is a required argument.')}o.getArg=e;var s=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,a=/^data:.+\,.+$/;function l(k){var I=k.match(s);return I?{scheme:I[1],auth:I[2],host:I[3],port:I[4],path:I[5]}:null}o.urlParse=l;function u(k){var I="";return k.scheme&&(I+=k.scheme+":"),I+="//",k.auth&&(I+=k.auth+"@"),k.host&&(I+=k.host),k.port&&(I+=":"+k.port),k.path&&(I+=k.path),I}o.urlGenerate=u;function c(k){var I=k,P=l(k);if(P){if(!P.path)return k;I=P.path}for(var N=o.isAbsolute(I),L=I.split(/\/+/),Q,j=0,F=L.length-1;F>=0;F--)Q=L[F],Q==="."?L.splice(F,1):Q===".."?j++:j>0&&(Q===""?(L.splice(F+1,j),j=0):(L.splice(F,2),j--));return I=L.join("/"),I===""&&(I=N?"/":"."),P?(P.path=I,u(P)):I}o.normalize=c;function d(k,I){k===""&&(k="."),I===""&&(I=".");var P=l(I),N=l(k);if(N&&(k=N.path||"/"),P&&!P.scheme)return N&&(P.scheme=N.scheme),u(P);if(P||I.match(a))return I;if(N&&!N.host&&!N.path)return N.host=I,u(N);var L=I.charAt(0)==="/"?I:c(k.replace(/\/+$/,"")+"/"+I);return N?(N.path=L,u(N)):L}o.join=d,o.isAbsolute=function(k){return k.charAt(0)==="/"||s.test(k)};function h(k,I){k===""&&(k="."),k=k.replace(/\/$/,"");for(var P=0;I.indexOf(k+"/")!==0;){var N=k.lastIndexOf("/");if(N<0||(k=k.slice(0,N),k.match(/^([^\/]+:\/)?\/*$/)))return I;++P}return Array(P+1).join("../")+I.substr(k.length+1)}o.relative=h;var p=(function(){var k=Object.create(null);return!("__proto__"in k)})();function m(k){return k}function g(k){return A(k)?"$"+k:k}o.toSetString=p?m:g;function y(k){return A(k)?k.slice(1):k}o.fromSetString=p?m:y;function A(k){if(!k)return!1;var I=k.length;if(I<9||k.charCodeAt(I-1)!==95||k.charCodeAt(I-2)!==95||k.charCodeAt(I-3)!==111||k.charCodeAt(I-4)!==116||k.charCodeAt(I-5)!==111||k.charCodeAt(I-6)!==114||k.charCodeAt(I-7)!==112||k.charCodeAt(I-8)!==95||k.charCodeAt(I-9)!==95)return!1;for(var P=I-10;P>=0;P--)if(k.charCodeAt(P)!==36)return!1;return!0}function T(k,I,P){var N=v(k.source,I.source);return N!==0||(N=k.originalLine-I.originalLine,N!==0)||(N=k.originalColumn-I.originalColumn,N!==0||P)||(N=k.generatedColumn-I.generatedColumn,N!==0)||(N=k.generatedLine-I.generatedLine,N!==0)?N:v(k.name,I.name)}o.compareByOriginalPositions=T;function E(k,I,P){var N=k.generatedLine-I.generatedLine;return N!==0||(N=k.generatedColumn-I.generatedColumn,N!==0||P)||(N=v(k.source,I.source),N!==0)||(N=k.originalLine-I.originalLine,N!==0)||(N=k.originalColumn-I.originalColumn,N!==0)?N:v(k.name,I.name)}o.compareByGeneratedPositionsDeflated=E;function v(k,I){return k===I?0:k===null?1:I===null?-1:k>I?1:-1}function _(k,I){var P=k.generatedLine-I.generatedLine;return P!==0||(P=k.generatedColumn-I.generatedColumn,P!==0)||(P=v(k.source,I.source),P!==0)||(P=k.originalLine-I.originalLine,P!==0)||(P=k.originalColumn-I.originalColumn,P!==0)?P:v(k.name,I.name)}o.compareByGeneratedPositionsInflated=_;function w(k){return JSON.parse(k.replace(/^\)]}'[^\n]*\n/,""))}o.parseSourceMapInput=w;function R(k,I,P){if(I=I||"",k&&(k[k.length-1]!=="/"&&I[0]!=="/"&&(k+="/"),I=k+I),P){var N=l(P);if(!N)throw new Error("sourceMapURL could not be parsed");if(N.path){var L=N.path.lastIndexOf("/");L>=0&&(N.path=N.path.substring(0,L+1))}I=d(u(N),I)}return c(I)}o.computeSourceURL=R})(util)),util}var arraySet={},hasRequiredArraySet;function requireArraySet(){if(hasRequiredArraySet)return arraySet;hasRequiredArraySet=1;var o=requireUtil(),e=Object.prototype.hasOwnProperty,s=typeof Map<"u";function a(){this._array=[],this._set=s?new Map:Object.create(null)}return a.fromArray=function(u,c){for(var d=new a,h=0,p=u.length;h<p;h++)d.add(u[h],c);return d},a.prototype.size=function(){return s?this._set.size:Object.getOwnPropertyNames(this._set).length},a.prototype.add=function(u,c){var d=s?u:o.toSetString(u),h=s?this.has(u):e.call(this._set,d),p=this._array.length;(!h||c)&&this._array.push(u),h||(s?this._set.set(u,p):this._set[d]=p)},a.prototype.has=function(u){if(s)return this._set.has(u);var c=o.toSetString(u);return e.call(this._set,c)},a.prototype.indexOf=function(u){if(s){var c=this._set.get(u);if(c>=0)return c}else{var d=o.toSetString(u);if(e.call(this._set,d))return this._set[d]}throw new Error('"'+u+'" is not in the set.')},a.prototype.at=function(u){if(u>=0&&u<this._array.length)return this._array[u];throw new Error("No element indexed by "+u)},a.prototype.toArray=function(){return this._array.slice()},arraySet.ArraySet=a,arraySet}var mappingList={},hasRequiredMappingList;function requireMappingList(){if(hasRequiredMappingList)return mappingList;hasRequiredMappingList=1;var o=requireUtil();function e(a,l){var u=a.generatedLine,c=l.generatedLine,d=a.generatedColumn,h=l.generatedColumn;return c>u||c==u&&h>=d||o.compareByGeneratedPositionsInflated(a,l)<=0}function s(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return s.prototype.unsortedForEach=function(l,u){this._array.forEach(l,u)},s.prototype.add=function(l){e(this._last,l)?(this._last=l,this._array.push(l)):(this._sorted=!1,this._array.push(l))},s.prototype.toArray=function(){return this._sorted||(this._array.sort(o.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},mappingList.MappingList=s,mappingList}var hasRequiredSourceMapGenerator;function requireSourceMapGenerator(){if(hasRequiredSourceMapGenerator)return sourceMapGenerator;hasRequiredSourceMapGenerator=1;var o=requireBase64Vlq(),e=requireUtil(),s=requireArraySet().ArraySet,a=requireMappingList().MappingList;function l(u){u||(u={}),this._file=e.getArg(u,"file",null),this._sourceRoot=e.getArg(u,"sourceRoot",null),this._skipValidation=e.getArg(u,"skipValidation",!1),this._sources=new s,this._names=new s,this._mappings=new a,this._sourcesContents=null}return l.prototype._version=3,l.fromSourceMap=function(c){var d=c.sourceRoot,h=new l({file:c.file,sourceRoot:d});return c.eachMapping(function(p){var m={generated:{line:p.generatedLine,column:p.generatedColumn}};p.source!=null&&(m.source=p.source,d!=null&&(m.source=e.relative(d,m.source)),m.original={line:p.originalLine,column:p.originalColumn},p.name!=null&&(m.name=p.name)),h.addMapping(m)}),c.sources.forEach(function(p){var m=p;d!==null&&(m=e.relative(d,p)),h._sources.has(m)||h._sources.add(m);var g=c.sourceContentFor(p);g!=null&&h.setSourceContent(p,g)}),h},l.prototype.addMapping=function(c){var d=e.getArg(c,"generated"),h=e.getArg(c,"original",null),p=e.getArg(c,"source",null),m=e.getArg(c,"name",null);this._skipValidation||this._validateMapping(d,h,p,m),p!=null&&(p=String(p),this._sources.has(p)||this._sources.add(p)),m!=null&&(m=String(m),this._names.has(m)||this._names.add(m)),this._mappings.add({generatedLine:d.line,generatedColumn:d.column,originalLine:h!=null&&h.line,originalColumn:h!=null&&h.column,source:p,name:m})},l.prototype.setSourceContent=function(c,d){var h=c;this._sourceRoot!=null&&(h=e.relative(this._sourceRoot,h)),d!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[e.toSetString(h)]=d):this._sourcesContents&&(delete this._sourcesContents[e.toSetString(h)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},l.prototype.applySourceMap=function(c,d,h){var p=d;if(d==null){if(c.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);p=c.file}var m=this._sourceRoot;m!=null&&(p=e.relative(m,p));var g=new s,y=new s;this._mappings.unsortedForEach(function(A){if(A.source===p&&A.originalLine!=null){var T=c.originalPositionFor({line:A.originalLine,column:A.originalColumn});T.source!=null&&(A.source=T.source,h!=null&&(A.source=e.join(h,A.source)),m!=null&&(A.source=e.relative(m,A.source)),A.originalLine=T.line,A.originalColumn=T.column,T.name!=null&&(A.name=T.name))}var E=A.source;E!=null&&!g.has(E)&&g.add(E);var v=A.name;v!=null&&!y.has(v)&&y.add(v)},this),this._sources=g,this._names=y,c.sources.forEach(function(A){var T=c.sourceContentFor(A);T!=null&&(h!=null&&(A=e.join(h,A)),m!=null&&(A=e.relative(m,A)),this.setSourceContent(A,T))},this)},l.prototype._validateMapping=function(c,d,h,p){if(d&&typeof d.line!="number"&&typeof d.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(c&&"line"in c&&"column"in c&&c.line>0&&c.column>=0&&!d&&!h&&!p)){if(c&&"line"in c&&"column"in c&&d&&"line"in d&&"column"in d&&c.line>0&&c.column>=0&&d.line>0&&d.column>=0&&h)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:c,source:h,original:d,name:p}))}},l.prototype._serializeMappings=function(){for(var c=0,d=1,h=0,p=0,m=0,g=0,y="",A,T,E,v,_=this._mappings.toArray(),w=0,R=_.length;w<R;w++){if(T=_[w],A="",T.generatedLine!==d)for(c=0;T.generatedLine!==d;)A+=";",d++;else if(w>0){if(!e.compareByGeneratedPositionsInflated(T,_[w-1]))continue;A+=","}A+=o.encode(T.generatedColumn-c),c=T.generatedColumn,T.source!=null&&(v=this._sources.indexOf(T.source),A+=o.encode(v-g),g=v,A+=o.encode(T.originalLine-1-p),p=T.originalLine-1,A+=o.encode(T.originalColumn-h),h=T.originalColumn,T.name!=null&&(E=this._names.indexOf(T.name),A+=o.encode(E-m),m=E)),y+=A}return y},l.prototype._generateSourcesContent=function(c,d){return c.map(function(h){if(!this._sourcesContents)return null;d!=null&&(h=e.relative(d,h));var p=e.toSetString(h);return Object.prototype.hasOwnProperty.call(this._sourcesContents,p)?this._sourcesContents[p]:null},this)},l.prototype.toJSON=function(){var c={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(c.file=this._file),this._sourceRoot!=null&&(c.sourceRoot=this._sourceRoot),this._sourcesContents&&(c.sourcesContent=this._generateSourcesContent(c.sources,c.sourceRoot)),c},l.prototype.toString=function(){return JSON.stringify(this.toJSON())},sourceMapGenerator.SourceMapGenerator=l,sourceMapGenerator}var sourceMapConsumer={},binarySearch={},hasRequiredBinarySearch;function requireBinarySearch(){return hasRequiredBinarySearch||(hasRequiredBinarySearch=1,(function(o){o.GREATEST_LOWER_BOUND=1,o.LEAST_UPPER_BOUND=2;function e(s,a,l,u,c,d){var h=Math.floor((a-s)/2)+s,p=c(l,u[h],!0);return p===0?h:p>0?a-h>1?e(h,a,l,u,c,d):d==o.LEAST_UPPER_BOUND?a<u.length?a:-1:h:h-s>1?e(s,h,l,u,c,d):d==o.LEAST_UPPER_BOUND?h:s<0?-1:s}o.search=function(a,l,u,c){if(l.length===0)return-1;var d=e(-1,l.length,a,l,u,c||o.GREATEST_LOWER_BOUND);if(d<0)return-1;for(;d-1>=0&&u(l[d],l[d-1],!0)===0;)--d;return d}})(binarySearch)),binarySearch}var quickSort={},hasRequiredQuickSort;function requireQuickSort(){if(hasRequiredQuickSort)return quickSort;hasRequiredQuickSort=1;function o(a,l,u){var c=a[l];a[l]=a[u],a[u]=c}function e(a,l){return Math.round(a+Math.random()*(l-a))}function s(a,l,u,c){if(u<c){var d=e(u,c),h=u-1;o(a,d,c);for(var p=a[c],m=u;m<c;m++)l(a[m],p)<=0&&(h+=1,o(a,h,m));o(a,h+1,m);var g=h+1;s(a,l,u,g-1),s(a,l,g+1,c)}}return quickSort.quickSort=function(a,l){s(a,l,0,a.length-1)},quickSort}var hasRequiredSourceMapConsumer;function requireSourceMapConsumer(){if(hasRequiredSourceMapConsumer)return sourceMapConsumer;hasRequiredSourceMapConsumer=1;var o=requireUtil(),e=requireBinarySearch(),s=requireArraySet().ArraySet,a=requireBase64Vlq(),l=requireQuickSort().quickSort;function u(p,m){var g=p;return typeof p=="string"&&(g=o.parseSourceMapInput(p)),g.sections!=null?new h(g,m):new c(g,m)}u.fromSourceMap=function(p,m){return c.fromSourceMap(p,m)},u.prototype._version=3,u.prototype.__generatedMappings=null,Object.defineProperty(u.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),u.prototype.__originalMappings=null,Object.defineProperty(u.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),u.prototype._charIsMappingSeparator=function(m,g){var y=m.charAt(g);return y===";"||y===","},u.prototype._parseMappings=function(m,g){throw new Error("Subclasses must implement _parseMappings")},u.GENERATED_ORDER=1,u.ORIGINAL_ORDER=2,u.GREATEST_LOWER_BOUND=1,u.LEAST_UPPER_BOUND=2,u.prototype.eachMapping=function(m,g,y){var A=g||null,T=y||u.GENERATED_ORDER,E;switch(T){case u.GENERATED_ORDER:E=this._generatedMappings;break;case u.ORIGINAL_ORDER:E=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var v=this.sourceRoot;E.map(function(_){var w=_.source===null?null:this._sources.at(_.source);return w=o.computeSourceURL(v,w,this._sourceMapURL),{source:w,generatedLine:_.generatedLine,generatedColumn:_.generatedColumn,originalLine:_.originalLine,originalColumn:_.originalColumn,name:_.name===null?null:this._names.at(_.name)}},this).forEach(m,A)},u.prototype.allGeneratedPositionsFor=function(m){var g=o.getArg(m,"line"),y={source:o.getArg(m,"source"),originalLine:g,originalColumn:o.getArg(m,"column",0)};if(y.source=this._findSourceIndex(y.source),y.source<0)return[];var A=[],T=this._findMapping(y,this._originalMappings,"originalLine","originalColumn",o.compareByOriginalPositions,e.LEAST_UPPER_BOUND);if(T>=0){var E=this._originalMappings[T];if(m.column===void 0)for(var v=E.originalLine;E&&E.originalLine===v;)A.push({line:o.getArg(E,"generatedLine",null),column:o.getArg(E,"generatedColumn",null),lastColumn:o.getArg(E,"lastGeneratedColumn",null)}),E=this._originalMappings[++T];else for(var _=E.originalColumn;E&&E.originalLine===g&&E.originalColumn==_;)A.push({line:o.getArg(E,"generatedLine",null),column:o.getArg(E,"generatedColumn",null),lastColumn:o.getArg(E,"lastGeneratedColumn",null)}),E=this._originalMappings[++T]}return A},sourceMapConsumer.SourceMapConsumer=u;function c(p,m){var g=p;typeof p=="string"&&(g=o.parseSourceMapInput(p));var y=o.getArg(g,"version"),A=o.getArg(g,"sources"),T=o.getArg(g,"names",[]),E=o.getArg(g,"sourceRoot",null),v=o.getArg(g,"sourcesContent",null),_=o.getArg(g,"mappings"),w=o.getArg(g,"file",null);if(y!=this._version)throw new Error("Unsupported version: "+y);E&&(E=o.normalize(E)),A=A.map(String).map(o.normalize).map(function(R){return E&&o.isAbsolute(E)&&o.isAbsolute(R)?o.relative(E,R):R}),this._names=s.fromArray(T.map(String),!0),this._sources=s.fromArray(A,!0),this._absoluteSources=this._sources.toArray().map(function(R){return o.computeSourceURL(E,R,m)}),this.sourceRoot=E,this.sourcesContent=v,this._mappings=_,this._sourceMapURL=m,this.file=w}c.prototype=Object.create(u.prototype),c.prototype.consumer=u,c.prototype._findSourceIndex=function(p){var m=p;if(this.sourceRoot!=null&&(m=o.relative(this.sourceRoot,m)),this._sources.has(m))return this._sources.indexOf(m);var g;for(g=0;g<this._absoluteSources.length;++g)if(this._absoluteSources[g]==p)return g;return-1},c.fromSourceMap=function(m,g){var y=Object.create(c.prototype),A=y._names=s.fromArray(m._names.toArray(),!0),T=y._sources=s.fromArray(m._sources.toArray(),!0);y.sourceRoot=m._sourceRoot,y.sourcesContent=m._generateSourcesContent(y._sources.toArray(),y.sourceRoot),y.file=m._file,y._sourceMapURL=g,y._absoluteSources=y._sources.toArray().map(function(P){return o.computeSourceURL(y.sourceRoot,P,g)});for(var E=m._mappings.toArray().slice(),v=y.__generatedMappings=[],_=y.__originalMappings=[],w=0,R=E.length;w<R;w++){var k=E[w],I=new d;I.generatedLine=k.generatedLine,I.generatedColumn=k.generatedColumn,k.source&&(I.source=T.indexOf(k.source),I.originalLine=k.originalLine,I.originalColumn=k.originalColumn,k.name&&(I.name=A.indexOf(k.name)),_.push(I)),v.push(I)}return l(y.__originalMappings,o.compareByOriginalPositions),y},c.prototype._version=3,Object.defineProperty(c.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function d(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}c.prototype._parseMappings=function(m,g){for(var y=1,A=0,T=0,E=0,v=0,_=0,w=m.length,R=0,k={},I={},P=[],N=[],L,Q,j,F,V;R<w;)if(m.charAt(R)===";")y++,R++,A=0;else if(m.charAt(R)===",")R++;else{for(L=new d,L.generatedLine=y,F=R;F<w&&!this._charIsMappingSeparator(m,F);F++);if(Q=m.slice(R,F),j=k[Q],j)R+=Q.length;else{for(j=[];R<F;)a.decode(m,R,I),V=I.value,R=I.rest,j.push(V);if(j.length===2)throw new Error("Found a source, but no line and column");if(j.length===3)throw new Error("Found a source and line, but no column");k[Q]=j}L.generatedColumn=A+j[0],A=L.generatedColumn,j.length>1&&(L.source=v+j[1],v+=j[1],L.originalLine=T+j[2],T=L.originalLine,L.originalLine+=1,L.originalColumn=E+j[3],E=L.originalColumn,j.length>4&&(L.name=_+j[4],_+=j[4])),N.push(L),typeof L.originalLine=="number"&&P.push(L)}l(N,o.compareByGeneratedPositionsDeflated),this.__generatedMappings=N,l(P,o.compareByOriginalPositions),this.__originalMappings=P},c.prototype._findMapping=function(m,g,y,A,T,E){if(m[y]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+m[y]);if(m[A]<0)throw new TypeError("Column must be greater than or equal to 0, got "+m[A]);return e.search(m,g,T,E)},c.prototype.computeColumnSpans=function(){for(var m=0;m<this._generatedMappings.length;++m){var g=this._generatedMappings[m];if(m+1<this._generatedMappings.length){var y=this._generatedMappings[m+1];if(g.generatedLine===y.generatedLine){g.lastGeneratedColumn=y.generatedColumn-1;continue}}g.lastGeneratedColumn=1/0}},c.prototype.originalPositionFor=function(m){var g={generatedLine:o.getArg(m,"line"),generatedColumn:o.getArg(m,"column")},y=this._findMapping(g,this._generatedMappings,"generatedLine","generatedColumn",o.compareByGeneratedPositionsDeflated,o.getArg(m,"bias",u.GREATEST_LOWER_BOUND));if(y>=0){var A=this._generatedMappings[y];if(A.generatedLine===g.generatedLine){var T=o.getArg(A,"source",null);T!==null&&(T=this._sources.at(T),T=o.computeSourceURL(this.sourceRoot,T,this._sourceMapURL));var E=o.getArg(A,"name",null);return E!==null&&(E=this._names.at(E)),{source:T,line:o.getArg(A,"originalLine",null),column:o.getArg(A,"originalColumn",null),name:E}}}return{source:null,line:null,column:null,name:null}},c.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(m){return m==null}):!1},c.prototype.sourceContentFor=function(m,g){if(!this.sourcesContent)return null;var y=this._findSourceIndex(m);if(y>=0)return this.sourcesContent[y];var A=m;this.sourceRoot!=null&&(A=o.relative(this.sourceRoot,A));var T;if(this.sourceRoot!=null&&(T=o.urlParse(this.sourceRoot))){var E=A.replace(/^file:\/\//,"");if(T.scheme=="file"&&this._sources.has(E))return this.sourcesContent[this._sources.indexOf(E)];if((!T.path||T.path=="/")&&this._sources.has("/"+A))return this.sourcesContent[this._sources.indexOf("/"+A)]}if(g)return null;throw new Error('"'+A+'" is not in the SourceMap.')},c.prototype.generatedPositionFor=function(m){var g=o.getArg(m,"source");if(g=this._findSourceIndex(g),g<0)return{line:null,column:null,lastColumn:null};var y={source:g,originalLine:o.getArg(m,"line"),originalColumn:o.getArg(m,"column")},A=this._findMapping(y,this._originalMappings,"originalLine","originalColumn",o.compareByOriginalPositions,o.getArg(m,"bias",u.GREATEST_LOWER_BOUND));if(A>=0){var T=this._originalMappings[A];if(T.source===y.source)return{line:o.getArg(T,"generatedLine",null),column:o.getArg(T,"generatedColumn",null),lastColumn:o.getArg(T,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},sourceMapConsumer.BasicSourceMapConsumer=c;function h(p,m){var g=p;typeof p=="string"&&(g=o.parseSourceMapInput(p));var y=o.getArg(g,"version"),A=o.getArg(g,"sections");if(y!=this._version)throw new Error("Unsupported version: "+y);this._sources=new s,this._names=new s;var T={line:-1,column:0};this._sections=A.map(function(E){if(E.url)throw new Error("Support for url field in sections not implemented.");var v=o.getArg(E,"offset"),_=o.getArg(v,"line"),w=o.getArg(v,"column");if(_<T.line||_===T.line&&w<T.column)throw new Error("Section offsets must be ordered and non-overlapping.");return T=v,{generatedOffset:{generatedLine:_+1,generatedColumn:w+1},consumer:new u(o.getArg(E,"map"),m)}})}return h.prototype=Object.create(u.prototype),h.prototype.constructor=u,h.prototype._version=3,Object.defineProperty(h.prototype,"sources",{get:function(){for(var p=[],m=0;m<this._sections.length;m++)for(var g=0;g<this._sections[m].consumer.sources.length;g++)p.push(this._sections[m].consumer.sources[g]);return p}}),h.prototype.originalPositionFor=function(m){var g={generatedLine:o.getArg(m,"line"),generatedColumn:o.getArg(m,"column")},y=e.search(g,this._sections,function(T,E){var v=T.generatedLine-E.generatedOffset.generatedLine;return v||T.generatedColumn-E.generatedOffset.generatedColumn}),A=this._sections[y];return A?A.consumer.originalPositionFor({line:g.generatedLine-(A.generatedOffset.generatedLine-1),column:g.generatedColumn-(A.generatedOffset.generatedLine===g.generatedLine?A.generatedOffset.generatedColumn-1:0),bias:m.bias}):{source:null,line:null,column:null,name:null}},h.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(m){return m.consumer.hasContentsOfAllSources()})},h.prototype.sourceContentFor=function(m,g){for(var y=0;y<this._sections.length;y++){var A=this._sections[y],T=A.consumer.sourceContentFor(m,!0);if(T)return T}if(g)return null;throw new Error('"'+m+'" is not in the SourceMap.')},h.prototype.generatedPositionFor=function(m){for(var g=0;g<this._sections.length;g++){var y=this._sections[g];if(y.consumer._findSourceIndex(o.getArg(m,"source"))!==-1){var A=y.consumer.generatedPositionFor(m);if(A){var T={line:A.line+(y.generatedOffset.generatedLine-1),column:A.column+(y.generatedOffset.generatedLine===A.line?y.generatedOffset.generatedColumn-1:0)};return T}}}return{line:null,column:null}},h.prototype._parseMappings=function(m,g){this.__generatedMappings=[],this.__originalMappings=[];for(var y=0;y<this._sections.length;y++)for(var A=this._sections[y],T=A.consumer._generatedMappings,E=0;E<T.length;E++){var v=T[E],_=A.consumer._sources.at(v.source);_=o.computeSourceURL(A.consumer.sourceRoot,_,this._sourceMapURL),this._sources.add(_),_=this._sources.indexOf(_);var w=null;v.name&&(w=A.consumer._names.at(v.name),this._names.add(w),w=this._names.indexOf(w));var R={source:_,generatedLine:v.generatedLine+(A.generatedOffset.generatedLine-1),generatedColumn:v.generatedColumn+(A.generatedOffset.generatedLine===v.generatedLine?A.generatedOffset.generatedColumn-1:0),originalLine:v.originalLine,originalColumn:v.originalColumn,name:w};this.__generatedMappings.push(R),typeof R.originalLine=="number"&&this.__originalMappings.push(R)}l(this.__generatedMappings,o.compareByGeneratedPositionsDeflated),l(this.__originalMappings,o.compareByOriginalPositions)},sourceMapConsumer.IndexedSourceMapConsumer=h,sourceMapConsumer}var sourceNode={},hasRequiredSourceNode;function requireSourceNode(){if(hasRequiredSourceNode)return sourceNode;hasRequiredSourceNode=1;var o=requireSourceMapGenerator().SourceMapGenerator,e=requireUtil(),s=/(\r?\n)/,a=10,l="$$$isSourceNode$$$";function u(c,d,h,p,m){this.children=[],this.sourceContents={},this.line=c??null,this.column=d??null,this.source=h??null,this.name=m??null,this[l]=!0,p!=null&&this.add(p)}return u.fromStringWithSourceMap=function(d,h,p){var m=new u,g=d.split(s),y=0,A=function(){var w=k(),R=k()||"";return w+R;function k(){return y<g.length?g[y++]:void 0}},T=1,E=0,v=null;return h.eachMapping(function(w){if(v!==null)if(T<w.generatedLine)_(v,A()),T++,E=0;else{var R=g[y]||"",k=R.substr(0,w.generatedColumn-E);g[y]=R.substr(w.generatedColumn-E),E=w.generatedColumn,_(v,k),v=w;return}for(;T<w.generatedLine;)m.add(A()),T++;if(E<w.generatedColumn){var R=g[y]||"";m.add(R.substr(0,w.generatedColumn)),g[y]=R.substr(w.generatedColumn),E=w.generatedColumn}v=w},this),y<g.length&&(v&&_(v,A()),m.add(g.splice(y).join(""))),h.sources.forEach(function(w){var R=h.sourceContentFor(w);R!=null&&(p!=null&&(w=e.join(p,w)),m.setSourceContent(w,R))}),m;function _(w,R){if(w===null||w.source===void 0)m.add(R);else{var k=p?e.join(p,w.source):w.source;m.add(new u(w.originalLine,w.originalColumn,k,R,w.name))}}},u.prototype.add=function(d){if(Array.isArray(d))d.forEach(function(h){this.add(h)},this);else if(d[l]||typeof d=="string")d&&this.children.push(d);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+d);return this},u.prototype.prepend=function(d){if(Array.isArray(d))for(var h=d.length-1;h>=0;h--)this.prepend(d[h]);else if(d[l]||typeof d=="string")this.children.unshift(d);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+d);return this},u.prototype.walk=function(d){for(var h,p=0,m=this.children.length;p<m;p++)h=this.children[p],h[l]?h.walk(d):h!==""&&d(h,{source:this.source,line:this.line,column:this.column,name:this.name})},u.prototype.join=function(d){var h,p,m=this.children.length;if(m>0){for(h=[],p=0;p<m-1;p++)h.push(this.children[p]),h.push(d);h.push(this.children[p]),this.children=h}return this},u.prototype.replaceRight=function(d,h){var p=this.children[this.children.length-1];return p[l]?p.replaceRight(d,h):typeof p=="string"?this.children[this.children.length-1]=p.replace(d,h):this.children.push("".replace(d,h)),this},u.prototype.setSourceContent=function(d,h){this.sourceContents[e.toSetString(d)]=h},u.prototype.walkSourceContents=function(d){for(var h=0,p=this.children.length;h<p;h++)this.children[h][l]&&this.children[h].walkSourceContents(d);for(var m=Object.keys(this.sourceContents),h=0,p=m.length;h<p;h++)d(e.fromSetString(m[h]),this.sourceContents[m[h]])},u.prototype.toString=function(){var d="";return this.walk(function(h){d+=h}),d},u.prototype.toStringWithSourceMap=function(d){var h={code:"",line:1,column:0},p=new o(d),m=!1,g=null,y=null,A=null,T=null;return this.walk(function(E,v){h.code+=E,v.source!==null&&v.line!==null&&v.column!==null?((g!==v.source||y!==v.line||A!==v.column||T!==v.name)&&p.addMapping({source:v.source,original:{line:v.line,column:v.column},generated:{line:h.line,column:h.column},name:v.name}),g=v.source,y=v.line,A=v.column,T=v.name,m=!0):m&&(p.addMapping({generated:{line:h.line,column:h.column}}),g=null,m=!1);for(var _=0,w=E.length;_<w;_++)E.charCodeAt(_)===a?(h.line++,h.column=0,_+1===w?(g=null,m=!1):m&&p.addMapping({source:v.source,original:{line:v.line,column:v.column},generated:{line:h.line,column:h.column},name:v.name})):h.column++}),this.walkSourceContents(function(E,v){p.setSourceContent(E,v)}),{code:h.code,map:p}},sourceNode.SourceNode=u,sourceNode}var hasRequiredSourceMap;function requireSourceMap(){return hasRequiredSourceMap||(hasRequiredSourceMap=1,sourceMap.SourceMapGenerator=requireSourceMapGenerator().SourceMapGenerator,sourceMap.SourceMapConsumer=requireSourceMapConsumer().SourceMapConsumer,sourceMap.SourceNode=requireSourceNode().SourceNode),sourceMap}var browserAtob={exports:{}},hasRequiredBrowserAtob;function requireBrowserAtob(){return hasRequiredBrowserAtob||(hasRequiredBrowserAtob=1,(function(o){(function(e){function s(l){return typeof l=="function"?l:typeof Buffer$1=="function"?function(c){//!! Deliberately using an API that's deprecated in node.js because
//!! this file is for browsers and we expect them to cope with it.
//!! Discussion: github.com/node-browser-compat/atob/pull/9
return new Buffer$1(c,"base64").toString("binary")}:typeof e.base64js=="object"?function(c){var d=e.base64js.b64ToByteArray(c);return Array.prototype.map.call(d,function(h){return String.fromCharCode(h)}).join("")}:function(){throw new Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.")}}var a=s(e.atob);e.atob=a,o&&o.exports&&(o.exports=a)})(window)})(browserAtob)),browserAtob.exports}var url={},type,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type=TypeError),type}var objectInspect,hasRequiredObjectInspect;function requireObjectInspect(){if(hasRequiredObjectInspect)return objectInspect;hasRequiredObjectInspect=1;var o=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&o?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=o&&e&&typeof e.get=="function"?e.get:null,a=o&&Map.prototype.forEach,l=typeof Set=="function"&&Set.prototype,u=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=l&&u&&typeof u.get=="function"?u.get:null,d=l&&Set.prototype.forEach,h=typeof WeakMap=="function"&&WeakMap.prototype,p=h?WeakMap.prototype.has:null,m=typeof WeakSet=="function"&&WeakSet.prototype,g=m?WeakSet.prototype.has:null,y=typeof WeakRef=="function"&&WeakRef.prototype,A=y?WeakRef.prototype.deref:null,T=Boolean.prototype.valueOf,E=Object.prototype.toString,v=Function.prototype.toString,_=String.prototype.match,w=String.prototype.slice,R=String.prototype.replace,k=String.prototype.toUpperCase,I=String.prototype.toLowerCase,P=RegExp.prototype.test,N=Array.prototype.concat,L=Array.prototype.join,Q=Array.prototype.slice,j=Math.floor,F=typeof BigInt=="function"?BigInt.prototype.valueOf:null,V=Object.getOwnPropertySymbols,J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,z=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Y=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===z||!0)?Symbol.toStringTag:null,fe=Object.prototype.propertyIsEnumerable,de=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(ye){return ye.__proto__}:null);function X(ye,we){if(ye===1/0||ye===-1/0||ye!==ye||ye&&ye>-1e3&&ye<1e3||P.call(/e/,we))return we;var et=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof ye=="number"){var ot=ye<0?-j(-ye):j(ye);if(ot!==ye){var st=String(ot),Ke=w.call(we,st.length+1);return R.call(st,et,"$&_")+"."+R.call(R.call(Ke,/([0-9]{3})/g,"$&_"),/_$/,"")}}return R.call(we,et,"$&_")}var he=require$$3,ue=he.custom,G=Pe(ue)?ue:null,K={__proto__:null,double:'"',single:"'"},q={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};objectInspect=function ye(we,et,ot,st){var Ke=et||{};if(Be(Ke,"quoteStyle")&&!Be(K,Ke.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Be(Ke,"maxStringLength")&&(typeof Ke.maxStringLength=="number"?Ke.maxStringLength<0&&Ke.maxStringLength!==1/0:Ke.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var zt=Be(Ke,"customInspect")?Ke.customInspect:!0;if(typeof zt!="boolean"&&zt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Be(Ke,"indent")&&Ke.indent!==null&&Ke.indent!=="	"&&!(parseInt(Ke.indent,10)===Ke.indent&&Ke.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Be(Ke,"numericSeparator")&&typeof Ke.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var An=Ke.numericSeparator;if(typeof we>"u")return"undefined";if(we===null)return"null";if(typeof we=="boolean")return we?"true":"false";if(typeof we=="string")return Ct(we,Ke);if(typeof we=="number"){if(we===0)return 1/0/we>0?"0":"-0";var Mt=String(we);return An?X(we,Mt):Mt}if(typeof we=="bigint"){var On=String(we)+"n";return An?X(we,On):On}var $n=typeof Ke.depth>"u"?5:Ke.depth;if(typeof ot>"u"&&(ot=0),ot>=$n&&$n>0&&typeof we=="object")return be(we)?"[Array]":"[Object]";var Bn=me(Ke,ot);if(typeof st>"u")st=[];else if(Ge(st,we)>=0)return"[Circular]";function Vt(ir,hi,ta){if(hi&&(st=Q.call(st),st.push(hi)),ta){var ps={depth:Ke.depth};return Be(Ke,"quoteStyle")&&(ps.quoteStyle=Ke.quoteStyle),ye(ir,ps,ot+1,st)}return ye(ir,Ke,ot+1,st)}if(typeof we=="function"&&!Se(we)){var Cr=We(we),Cn=De(we,Vt);return"[Function"+(Cr?": "+Cr:" (anonymous)")+"]"+(Cn.length>0?" { "+L.call(Cn,", ")+" }":"")}if(Pe(we)){var Yn=z?R.call(String(we),/^(Symbol\(.*\))_[^)]*$/,"$1"):J.call(we);return typeof we=="object"&&!z?pt(Yn):Yn}if(bt(we)){for(var Tn="<"+I.call(String(we.nodeName)),di=we.attributes||[],wn=0;wn<di.length;wn++)Tn+=" "+di[wn].name+"="+te(Z(di[wn].value),"double",Ke);return Tn+=">",we.childNodes&&we.childNodes.length&&(Tn+="..."),Tn+="</"+I.call(String(we.nodeName))+">",Tn}if(be(we)){if(we.length===0)return"[]";var mt=De(we,Vt);return Bn&&!W(mt)?"["+_e(mt,Bn)+"]":"[ "+L.call(mt,", ")+" ]"}if(ke(we)){var $t=De(we,Vt);return!("cause"in Error.prototype)&&"cause"in we&&!fe.call(we,"cause")?"{ ["+String(we)+"] "+L.call(N.call("[cause]: "+Vt(we.cause),$t),", ")+" }":$t.length===0?"["+String(we)+"]":"{ ["+String(we)+"] "+L.call($t,", ")+" }"}if(typeof we=="object"&&zt){if(G&&typeof we[G]=="function"&&he)return he(we,{depth:$n-ot});if(zt!=="symbol"&&typeof we.inspect=="function")return we.inspect()}if(Ye(we)){var xn=[];return a&&a.call(we,function(ir,hi){xn.push(Vt(hi,we,!0)+" => "+Vt(ir,we))}),H("Map",s.call(we),xn,Bn)}if(at(we)){var fi=[];return d&&d.call(we,function(ir){fi.push(Vt(ir,we))}),H("Set",c.call(we),fi,Bn)}if(Ve(we))return ae("WeakMap");if(dt(we))return ae("WeakSet");if(He(we))return ae("WeakRef");if(Te(we))return pt(Vt(Number(we)));if(Le(we))return pt(Vt(F.call(we)));if(xe(we))return pt(T.call(we));if(Ae(we))return pt(Vt(String(we)));if(typeof window<"u"&&we===window)return"{ [object Window] }";if(typeof globalThis<"u"&&we===globalThis||typeof commonjsGlobal<"u"&&we===commonjsGlobal)return"{ [object globalThis] }";if(!Ee(we)&&!Se(we)){var kr=De(we,Vt),Js=de?de(we)===Object.prototype:we instanceof Object||we.constructor===Object,Fn=we instanceof Object?"":"null prototype",fs=!Js&&Y&&Object(we)===we&&Y in we?w.call(Ze(we),8,-1):Fn?"Object":"",ea=Js||typeof we.constructor!="function"?"":we.constructor.name?we.constructor.name+" ":"",hs=ea+(fs||Fn?"["+L.call(N.call([],fs||[],Fn||[]),": ")+"] ":"");return kr.length===0?hs+"{}":Bn?hs+"{"+_e(kr,Bn)+"}":hs+"{ "+L.call(kr,", ")+" }"}return String(we)};function te(ye,we,et){var ot=et.quoteStyle||we,st=K[ot];return st+ye+st}function Z(ye){return R.call(String(ye),/"/g,"&quot;")}function ce(ye){return!Y||!(typeof ye=="object"&&(Y in ye||typeof ye[Y]<"u"))}function be(ye){return Ze(ye)==="[object Array]"&&ce(ye)}function Ee(ye){return Ze(ye)==="[object Date]"&&ce(ye)}function Se(ye){return Ze(ye)==="[object RegExp]"&&ce(ye)}function ke(ye){return Ze(ye)==="[object Error]"&&ce(ye)}function Ae(ye){return Ze(ye)==="[object String]"&&ce(ye)}function Te(ye){return Ze(ye)==="[object Number]"&&ce(ye)}function xe(ye){return Ze(ye)==="[object Boolean]"&&ce(ye)}function Pe(ye){if(z)return ye&&typeof ye=="object"&&ye instanceof Symbol;if(typeof ye=="symbol")return!0;if(!ye||typeof ye!="object"||!J)return!1;try{return J.call(ye),!0}catch{}return!1}function Le(ye){if(!ye||typeof ye!="object"||!F)return!1;try{return F.call(ye),!0}catch{}return!1}var Ue=Object.prototype.hasOwnProperty||function(ye){return ye in this};function Be(ye,we){return Ue.call(ye,we)}function Ze(ye){return E.call(ye)}function We(ye){if(ye.name)return ye.name;var we=_.call(v.call(ye),/^function\s*([\w$]+)/);return we?we[1]:null}function Ge(ye,we){if(ye.indexOf)return ye.indexOf(we);for(var et=0,ot=ye.length;et<ot;et++)if(ye[et]===we)return et;return-1}function Ye(ye){if(!s||!ye||typeof ye!="object")return!1;try{s.call(ye);try{c.call(ye)}catch{return!0}return ye instanceof Map}catch{}return!1}function Ve(ye){if(!p||!ye||typeof ye!="object")return!1;try{p.call(ye,p);try{g.call(ye,g)}catch{return!0}return ye instanceof WeakMap}catch{}return!1}function He(ye){if(!A||!ye||typeof ye!="object")return!1;try{return A.call(ye),!0}catch{}return!1}function at(ye){if(!c||!ye||typeof ye!="object")return!1;try{c.call(ye);try{s.call(ye)}catch{return!0}return ye instanceof Set}catch{}return!1}function dt(ye){if(!g||!ye||typeof ye!="object")return!1;try{g.call(ye,g);try{p.call(ye,p)}catch{return!0}return ye instanceof WeakSet}catch{}return!1}function bt(ye){return!ye||typeof ye!="object"?!1:typeof HTMLElement<"u"&&ye instanceof HTMLElement?!0:typeof ye.nodeName=="string"&&typeof ye.getAttribute=="function"}function Ct(ye,we){if(ye.length>we.maxStringLength){var et=ye.length-we.maxStringLength,ot="... "+et+" more character"+(et>1?"s":"");return Ct(w.call(ye,0,we.maxStringLength),we)+ot}var st=q[we.quoteStyle||"single"];st.lastIndex=0;var Ke=R.call(R.call(ye,st,"\\$1"),/[\x00-\x1f]/g,ht);return te(Ke,"single",we)}function ht(ye){var we=ye.charCodeAt(0),et={8:"b",9:"t",10:"n",12:"f",13:"r"}[we];return et?"\\"+et:"\\x"+(we<16?"0":"")+k.call(we.toString(16))}function pt(ye){return"Object("+ye+")"}function ae(ye){return ye+" { ? }"}function H(ye,we,et,ot){var st=ot?_e(et,ot):L.call(et,", ");return ye+" ("+we+") {"+st+"}"}function W(ye){for(var we=0;we<ye.length;we++)if(Ge(ye[we],`
`)>=0)return!1;return!0}function me(ye,we){var et;if(ye.indent==="	")et="	";else if(typeof ye.indent=="number"&&ye.indent>0)et=L.call(Array(ye.indent+1)," ");else return null;return{base:et,prev:L.call(Array(we+1),et)}}function _e(ye,we){if(ye.length===0)return"";var et=`
`+we.prev+we.base;return et+L.call(ye,","+et)+`
`+we.prev}function De(ye,we){var et=be(ye),ot=[];if(et){ot.length=ye.length;for(var st=0;st<ye.length;st++)ot[st]=Be(ye,st)?we(ye[st],ye):""}var Ke=typeof V=="function"?V(ye):[],zt;if(z){zt={};for(var An=0;An<Ke.length;An++)zt["$"+Ke[An]]=Ke[An]}for(var Mt in ye)Be(ye,Mt)&&(et&&String(Number(Mt))===Mt&&Mt<ye.length||z&&zt["$"+Mt]instanceof Symbol||(P.call(/[^\w$]/,Mt)?ot.push(we(Mt,ye)+": "+we(ye[Mt],ye)):ot.push(Mt+": "+we(ye[Mt],ye))));if(typeof V=="function")for(var On=0;On<Ke.length;On++)fe.call(ye,Ke[On])&&ot.push("["+we(Ke[On])+"]: "+we(ye[Ke[On]],ye));return ot}return objectInspect}var sideChannelList,hasRequiredSideChannelList;function requireSideChannelList(){if(hasRequiredSideChannelList)return sideChannelList;hasRequiredSideChannelList=1;var o=requireObjectInspect(),e=requireType(),s=function(d,h,p){for(var m=d,g;(g=m.next)!=null;m=g)if(g.key===h)return m.next=g.next,p||(g.next=d.next,d.next=g),g},a=function(d,h){if(d){var p=s(d,h);return p&&p.value}},l=function(d,h,p){var m=s(d,h);m?m.value=p:d.next={key:h,next:d.next,value:p}},u=function(d,h){return d?!!s(d,h):!1},c=function(d,h){if(d)return s(d,h,!0)};return sideChannelList=function(){var h,p={assert:function(m){if(!p.has(m))throw new e("Side channel does not contain "+o(m))},delete:function(m){var g=h&&h.next,y=c(h,m);return y&&g&&g===y&&(h=void 0),!!y},get:function(m){return a(h,m)},has:function(m){return u(h,m)},set:function(m,g){h||(h={next:void 0}),l(h,m,g)}};return p},sideChannelList}var esObjectAtoms,hasRequiredEsObjectAtoms;function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms||(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object),esObjectAtoms}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range=RangeError),range}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var abs,hasRequiredAbs;function requireAbs(){return hasRequiredAbs||(hasRequiredAbs=1,abs=Math.abs),abs}var floor,hasRequiredFloor;function requireFloor(){return hasRequiredFloor||(hasRequiredFloor=1,floor=Math.floor),floor}var max,hasRequiredMax;function requireMax(){return hasRequiredMax||(hasRequiredMax=1,max=Math.max),max}var min,hasRequiredMin;function requireMin(){return hasRequiredMin||(hasRequiredMin=1,min=Math.min),min}var pow,hasRequiredPow;function requirePow(){return hasRequiredPow||(hasRequiredPow=1,pow=Math.pow),pow}var round,hasRequiredRound;function requireRound(){return hasRequiredRound||(hasRequiredRound=1,round=Math.round),round}var _isNaN,hasRequired_isNaN;function require_isNaN(){return hasRequired_isNaN||(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(e){return e!==e}),_isNaN}var sign,hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign;hasRequiredSign=1;var o=require_isNaN();return sign=function(s){return o(s)||s===0?s:s<0?-1:1},sign}var gOPD,hasRequiredGOPD;function requireGOPD(){return hasRequiredGOPD||(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor),gOPD}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var o=requireGOPD();if(o)try{o([],"length")}catch{o=null}return gopd=o,gopd}var esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var o=Object.defineProperty||!1;if(o)try{o({},"a",{value:1})}catch{o=!1}return esDefineProperty=o,esDefineProperty}var shams,hasRequiredShams;function requireShams(){return hasRequiredShams||(hasRequiredShams=1,shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},s=Symbol("test"),a=Object(s);if(typeof s=="string"||Object.prototype.toString.call(s)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var l=42;e[s]=l;for(var u in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var c=Object.getOwnPropertySymbols(e);if(c.length!==1||c[0]!==s||!Object.prototype.propertyIsEnumerable.call(e,s))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var d=Object.getOwnPropertyDescriptor(e,s);if(d.value!==l||d.enumerable!==!0)return!1}return!0}),shams}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var o=typeof Symbol<"u"&&Symbol,e=requireShams();return hasSymbols=function(){return typeof o!="function"||typeof Symbol!="function"||typeof o("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},hasSymbols}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var o=requireEsObjectAtoms();return Object_getPrototypeOf=o.getPrototypeOf||null,Object_getPrototypeOf}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var o="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,s=Math.max,a="[object Function]",l=function(h,p){for(var m=[],g=0;g<h.length;g+=1)m[g]=h[g];for(var y=0;y<p.length;y+=1)m[y+h.length]=p[y];return m},u=function(h,p){for(var m=[],g=p,y=0;g<h.length;g+=1,y+=1)m[y]=h[g];return m},c=function(d,h){for(var p="",m=0;m<d.length;m+=1)p+=d[m],m+1<d.length&&(p+=h);return p};return implementation=function(h){var p=this;if(typeof p!="function"||e.apply(p)!==a)throw new TypeError(o+p);for(var m=u(arguments,1),g,y=function(){if(this instanceof g){var _=p.apply(this,l(m,arguments));return Object(_)===_?_:this}return p.apply(h,l(m,arguments))},A=s(0,p.length-m.length),T=[],E=0;E<A;E++)T[E]="$"+E;if(g=Function("binder","return function ("+c(T,",")+"){ return binder.apply(this,arguments); }")(y),p.prototype){var v=function(){};v.prototype=p.prototype,g.prototype=new v,v.prototype=null}return g},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var o=requireImplementation();return functionBind=Function.prototype.bind||o,functionBind}var functionCall,hasRequiredFunctionCall;function requireFunctionCall(){return hasRequiredFunctionCall||(hasRequiredFunctionCall=1,functionCall=Function.prototype.call),functionCall}var functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply,hasRequiredReflectApply;function requireReflectApply(){return hasRequiredReflectApply||(hasRequiredReflectApply=1,reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply),reflectApply}var actualApply,hasRequiredActualApply;function requireActualApply(){if(hasRequiredActualApply)return actualApply;hasRequiredActualApply=1;var o=requireFunctionBind(),e=requireFunctionApply(),s=requireFunctionCall(),a=requireReflectApply();return actualApply=a||o.call(s,e),actualApply}var callBindApplyHelpers,hasRequiredCallBindApplyHelpers;function requireCallBindApplyHelpers(){if(hasRequiredCallBindApplyHelpers)return callBindApplyHelpers;hasRequiredCallBindApplyHelpers=1;var o=requireFunctionBind(),e=requireType(),s=requireFunctionCall(),a=requireActualApply();return callBindApplyHelpers=function(u){if(u.length<1||typeof u[0]!="function")throw new e("a function is required");return a(o,s,u)},callBindApplyHelpers}var get,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var o=requireCallBindApplyHelpers(),e=requireGopd(),s;try{s=[].__proto__===Array.prototype}catch(c){if(!c||typeof c!="object"||!("code"in c)||c.code!=="ERR_PROTO_ACCESS")throw c}var a=!!s&&e&&e(Object.prototype,"__proto__"),l=Object,u=l.getPrototypeOf;return get=a&&typeof a.get=="function"?o([a.get]):typeof u=="function"?function(d){return u(d==null?d:l(d))}:!1,get}var getProto,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var o=requireReflect_getPrototypeOf(),e=requireObject_getPrototypeOf(),s=requireGet();return getProto=o?function(l){return o(l)}:e?function(l){if(!l||typeof l!="object"&&typeof l!="function")throw new TypeError("getProto: not an object");return e(l)}:s?function(l){return s(l)}:null,getProto}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var o=Function.prototype.call,e=Object.prototype.hasOwnProperty,s=requireFunctionBind();return hasown=s.call(o,e),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var o,e=requireEsObjectAtoms(),s=requireEsErrors(),a=require_eval(),l=requireRange(),u=requireRef(),c=requireSyntax(),d=requireType(),h=requireUri(),p=requireAbs(),m=requireFloor(),g=requireMax(),y=requireMin(),A=requirePow(),T=requireRound(),E=requireSign(),v=Function,_=function(Se){try{return v('"use strict"; return ('+Se+").constructor;")()}catch{}},w=requireGopd(),R=requireEsDefineProperty(),k=function(){throw new d},I=w?(function(){try{return arguments.callee,k}catch{try{return w(arguments,"callee").get}catch{return k}}})():k,P=requireHasSymbols()(),N=requireGetProto(),L=requireObject_getPrototypeOf(),Q=requireReflect_getPrototypeOf(),j=requireFunctionApply(),F=requireFunctionCall(),V={},J=typeof Uint8Array>"u"||!N?o:N(Uint8Array),z={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?o:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?o:ArrayBuffer,"%ArrayIteratorPrototype%":P&&N?N([][Symbol.iterator]()):o,"%AsyncFromSyncIteratorPrototype%":o,"%AsyncFunction%":V,"%AsyncGenerator%":V,"%AsyncGeneratorFunction%":V,"%AsyncIteratorPrototype%":V,"%Atomics%":typeof Atomics>"u"?o:Atomics,"%BigInt%":typeof BigInt>"u"?o:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?o:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?o:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?o:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":s,"%eval%":eval,"%EvalError%":a,"%Float16Array%":typeof Float16Array>"u"?o:Float16Array,"%Float32Array%":typeof Float32Array>"u"?o:Float32Array,"%Float64Array%":typeof Float64Array>"u"?o:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?o:FinalizationRegistry,"%Function%":v,"%GeneratorFunction%":V,"%Int8Array%":typeof Int8Array>"u"?o:Int8Array,"%Int16Array%":typeof Int16Array>"u"?o:Int16Array,"%Int32Array%":typeof Int32Array>"u"?o:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":P&&N?N(N([][Symbol.iterator]())):o,"%JSON%":typeof JSON=="object"?JSON:o,"%Map%":typeof Map>"u"?o:Map,"%MapIteratorPrototype%":typeof Map>"u"||!P||!N?o:N(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":w,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?o:Promise,"%Proxy%":typeof Proxy>"u"?o:Proxy,"%RangeError%":l,"%ReferenceError%":u,"%Reflect%":typeof Reflect>"u"?o:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?o:Set,"%SetIteratorPrototype%":typeof Set>"u"||!P||!N?o:N(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?o:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":P&&N?N(""[Symbol.iterator]()):o,"%Symbol%":P?Symbol:o,"%SyntaxError%":c,"%ThrowTypeError%":I,"%TypedArray%":J,"%TypeError%":d,"%Uint8Array%":typeof Uint8Array>"u"?o:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?o:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?o:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?o:Uint32Array,"%URIError%":h,"%WeakMap%":typeof WeakMap>"u"?o:WeakMap,"%WeakRef%":typeof WeakRef>"u"?o:WeakRef,"%WeakSet%":typeof WeakSet>"u"?o:WeakSet,"%Function.prototype.call%":F,"%Function.prototype.apply%":j,"%Object.defineProperty%":R,"%Object.getPrototypeOf%":L,"%Math.abs%":p,"%Math.floor%":m,"%Math.max%":g,"%Math.min%":y,"%Math.pow%":A,"%Math.round%":T,"%Math.sign%":E,"%Reflect.getPrototypeOf%":Q};if(N)try{null.error}catch(Se){var Y=N(N(Se));z["%Error.prototype%"]=Y}var fe=function Se(ke){var Ae;if(ke==="%AsyncFunction%")Ae=_("async function () {}");else if(ke==="%GeneratorFunction%")Ae=_("function* () {}");else if(ke==="%AsyncGeneratorFunction%")Ae=_("async function* () {}");else if(ke==="%AsyncGenerator%"){var Te=Se("%AsyncGeneratorFunction%");Te&&(Ae=Te.prototype)}else if(ke==="%AsyncIteratorPrototype%"){var xe=Se("%AsyncGenerator%");xe&&N&&(Ae=N(xe.prototype))}return z[ke]=Ae,Ae},de={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},X=requireFunctionBind(),he=requireHasown(),ue=X.call(F,Array.prototype.concat),G=X.call(j,Array.prototype.splice),K=X.call(F,String.prototype.replace),q=X.call(F,String.prototype.slice),te=X.call(F,RegExp.prototype.exec),Z=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ce=/\\(\\)?/g,be=function(ke){var Ae=q(ke,0,1),Te=q(ke,-1);if(Ae==="%"&&Te!=="%")throw new c("invalid intrinsic syntax, expected closing `%`");if(Te==="%"&&Ae!=="%")throw new c("invalid intrinsic syntax, expected opening `%`");var xe=[];return K(ke,Z,function(Pe,Le,Ue,Be){xe[xe.length]=Ue?K(Be,ce,"$1"):Le||Pe}),xe},Ee=function(ke,Ae){var Te=ke,xe;if(he(de,Te)&&(xe=de[Te],Te="%"+xe[0]+"%"),he(z,Te)){var Pe=z[Te];if(Pe===V&&(Pe=fe(Te)),typeof Pe>"u"&&!Ae)throw new d("intrinsic "+ke+" exists, but is not available. Please file an issue!");return{alias:xe,name:Te,value:Pe}}throw new c("intrinsic "+ke+" does not exist!")};return getIntrinsic=function(ke,Ae){if(typeof ke!="string"||ke.length===0)throw new d("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Ae!="boolean")throw new d('"allowMissing" argument must be a boolean');if(te(/^%?[^%]*%?$/,ke)===null)throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Te=be(ke),xe=Te.length>0?Te[0]:"",Pe=Ee("%"+xe+"%",Ae),Le=Pe.name,Ue=Pe.value,Be=!1,Ze=Pe.alias;Ze&&(xe=Ze[0],G(Te,ue([0,1],Ze)));for(var We=1,Ge=!0;We<Te.length;We+=1){var Ye=Te[We],Ve=q(Ye,0,1),He=q(Ye,-1);if((Ve==='"'||Ve==="'"||Ve==="`"||He==='"'||He==="'"||He==="`")&&Ve!==He)throw new c("property names with quotes must have matching quotes");if((Ye==="constructor"||!Ge)&&(Be=!0),xe+="."+Ye,Le="%"+xe+"%",he(z,Le))Ue=z[Le];else if(Ue!=null){if(!(Ye in Ue)){if(!Ae)throw new d("base intrinsic for "+ke+" exists, but the property is not available.");return}if(w&&We+1>=Te.length){var at=w(Ue,Ye);Ge=!!at,Ge&&"get"in at&&!("originalValue"in at.get)?Ue=at.get:Ue=Ue[Ye]}else Ge=he(Ue,Ye),Ue=Ue[Ye];Ge&&!Be&&(z[Le]=Ue)}}return Ue},getIntrinsic}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var o=requireGetIntrinsic(),e=requireCallBindApplyHelpers(),s=e([o("%String.prototype.indexOf%")]);return callBound=function(l,u){var c=o(l,!!u);return typeof c=="function"&&s(l,".prototype.")>-1?e([c]):c},callBound}var sideChannelMap,hasRequiredSideChannelMap;function requireSideChannelMap(){if(hasRequiredSideChannelMap)return sideChannelMap;hasRequiredSideChannelMap=1;var o=requireGetIntrinsic(),e=requireCallBound(),s=requireObjectInspect(),a=requireType(),l=o("%Map%",!0),u=e("Map.prototype.get",!0),c=e("Map.prototype.set",!0),d=e("Map.prototype.has",!0),h=e("Map.prototype.delete",!0),p=e("Map.prototype.size",!0);return sideChannelMap=!!l&&function(){var g,y={assert:function(A){if(!y.has(A))throw new a("Side channel does not contain "+s(A))},delete:function(A){if(g){var T=h(g,A);return p(g)===0&&(g=void 0),T}return!1},get:function(A){if(g)return u(g,A)},has:function(A){return g?d(g,A):!1},set:function(A,T){g||(g=new l),c(g,A,T)}};return y},sideChannelMap}var sideChannelWeakmap,hasRequiredSideChannelWeakmap;function requireSideChannelWeakmap(){if(hasRequiredSideChannelWeakmap)return sideChannelWeakmap;hasRequiredSideChannelWeakmap=1;var o=requireGetIntrinsic(),e=requireCallBound(),s=requireObjectInspect(),a=requireSideChannelMap(),l=requireType(),u=o("%WeakMap%",!0),c=e("WeakMap.prototype.get",!0),d=e("WeakMap.prototype.set",!0),h=e("WeakMap.prototype.has",!0),p=e("WeakMap.prototype.delete",!0);return sideChannelWeakmap=u?function(){var g,y,A={assert:function(T){if(!A.has(T))throw new l("Side channel does not contain "+s(T))},delete:function(T){if(u&&T&&(typeof T=="object"||typeof T=="function")){if(g)return p(g,T)}else if(a&&y)return y.delete(T);return!1},get:function(T){return u&&T&&(typeof T=="object"||typeof T=="function")&&g?c(g,T):y&&y.get(T)},has:function(T){return u&&T&&(typeof T=="object"||typeof T=="function")&&g?h(g,T):!!y&&y.has(T)},set:function(T,E){u&&T&&(typeof T=="object"||typeof T=="function")?(g||(g=new u),d(g,T,E)):a&&(y||(y=a()),y.set(T,E))}};return A}:a,sideChannelWeakmap}var sideChannel,hasRequiredSideChannel;function requireSideChannel(){if(hasRequiredSideChannel)return sideChannel;hasRequiredSideChannel=1;var o=requireType(),e=requireObjectInspect(),s=requireSideChannelList(),a=requireSideChannelMap(),l=requireSideChannelWeakmap(),u=l||a||s;return sideChannel=function(){var d,h={assert:function(p){if(!h.has(p))throw new o("Side channel does not contain "+e(p))},delete:function(p){return!!d&&d.delete(p)},get:function(p){return d&&d.get(p)},has:function(p){return!!d&&d.has(p)},set:function(p,m){d||(d=u()),d.set(p,m)}};return h},sideChannel}var formats,hasRequiredFormats;function requireFormats(){if(hasRequiredFormats)return formats;hasRequiredFormats=1;var o=String.prototype.replace,e=/%20/g,s={RFC1738:"RFC1738",RFC3986:"RFC3986"};return formats={default:s.RFC3986,formatters:{RFC1738:function(a){return o.call(a,e,"+")},RFC3986:function(a){return String(a)}},RFC1738:s.RFC1738,RFC3986:s.RFC3986},formats}var utils$3,hasRequiredUtils$3;function requireUtils$3(){if(hasRequiredUtils$3)return utils$3;hasRequiredUtils$3=1;var o=requireFormats(),e=requireSideChannel(),s=Object.prototype.hasOwnProperty,a=Array.isArray,l=e(),u=function(N,L){return l.set(N,L),N},c=function(N){return l.has(N)},d=function(N){return l.get(N)},h=function(N,L){l.set(N,L)},p=(function(){for(var P=[],N=0;N<256;++N)P[P.length]="%"+((N<16?"0":"")+N.toString(16)).toUpperCase();return P})(),m=function(N){for(;N.length>1;){var L=N.pop(),Q=L.obj[L.prop];if(a(Q)){for(var j=[],F=0;F<Q.length;++F)typeof Q[F]<"u"&&(j[j.length]=Q[F]);L.obj[L.prop]=j}}},g=function(N,L){for(var Q=L&&L.plainObjects?{__proto__:null}:{},j=0;j<N.length;++j)typeof N[j]<"u"&&(Q[j]=N[j]);return Q},y=function P(N,L,Q){if(!L)return N;if(typeof L!="object"&&typeof L!="function"){if(a(N)){var j=N.length;if(Q&&typeof Q.arrayLimit=="number"&&j>Q.arrayLimit)return u(g(N.concat(L),Q),j);N[j]=L}else if(N&&typeof N=="object")if(c(N)){var F=d(N)+1;N[F]=L,h(N,F)}else{if(Q&&Q.strictMerge)return[N,L];(Q&&(Q.plainObjects||Q.allowPrototypes)||!s.call(Object.prototype,L))&&(N[L]=!0)}else return[N,L];return N}if(!N||typeof N!="object"){if(c(L)){for(var V=Object.keys(L),J=Q&&Q.plainObjects?{__proto__:null,0:N}:{0:N},z=0;z<V.length;z++){var Y=parseInt(V[z],10);J[Y+1]=L[V[z]]}return u(J,d(L)+1)}var fe=[N].concat(L);return Q&&typeof Q.arrayLimit=="number"&&fe.length>Q.arrayLimit?u(g(fe,Q),fe.length-1):fe}var de=N;return a(N)&&!a(L)&&(de=g(N,Q)),a(N)&&a(L)?(L.forEach(function(X,he){if(s.call(N,he)){var ue=N[he];ue&&typeof ue=="object"&&X&&typeof X=="object"?N[he]=P(ue,X,Q):N[N.length]=X}else N[he]=X}),N):Object.keys(L).reduce(function(X,he){var ue=L[he];if(s.call(X,he)?X[he]=P(X[he],ue,Q):X[he]=ue,c(L)&&!c(X)&&u(X,d(L)),c(X)){var G=parseInt(he,10);String(G)===he&&G>=0&&G>d(X)&&h(X,G)}return X},de)},A=function(N,L){return Object.keys(L).reduce(function(Q,j){return Q[j]=L[j],Q},N)},T=function(P,N,L){var Q=P.replace(/\+/g," ");if(L==="iso-8859-1")return Q.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(Q)}catch{return Q}},E=1024,v=function(N,L,Q,j,F){if(N.length===0)return N;var V=N;if(typeof N=="symbol"?V=Symbol.prototype.toString.call(N):typeof N!="string"&&(V=String(N)),Q==="iso-8859-1")return escape(V).replace(/%u[0-9a-f]{4}/gi,function(he){return"%26%23"+parseInt(he.slice(2),16)+"%3B"});for(var J="",z=0;z<V.length;z+=E){for(var Y=V.length>=E?V.slice(z,z+E):V,fe=[],de=0;de<Y.length;++de){var X=Y.charCodeAt(de);if(X===45||X===46||X===95||X===126||X>=48&&X<=57||X>=65&&X<=90||X>=97&&X<=122||F===o.RFC1738&&(X===40||X===41)){fe[fe.length]=Y.charAt(de);continue}if(X<128){fe[fe.length]=p[X];continue}if(X<2048){fe[fe.length]=p[192|X>>6]+p[128|X&63];continue}if(X<55296||X>=57344){fe[fe.length]=p[224|X>>12]+p[128|X>>6&63]+p[128|X&63];continue}de+=1,X=65536+((X&1023)<<10|Y.charCodeAt(de)&1023),fe[fe.length]=p[240|X>>18]+p[128|X>>12&63]+p[128|X>>6&63]+p[128|X&63]}J+=fe.join("")}return J},_=function(N){for(var L=[{obj:{o:N},prop:"o"}],Q=[],j=0;j<L.length;++j)for(var F=L[j],V=F.obj[F.prop],J=Object.keys(V),z=0;z<J.length;++z){var Y=J[z],fe=V[Y];typeof fe=="object"&&fe!==null&&Q.indexOf(fe)===-1&&(L[L.length]={obj:V,prop:Y},Q[Q.length]=fe)}return m(L),N},w=function(N){return Object.prototype.toString.call(N)==="[object RegExp]"},R=function(N){return!N||typeof N!="object"?!1:!!(N.constructor&&N.constructor.isBuffer&&N.constructor.isBuffer(N))},k=function(N,L,Q,j){if(c(N)){var F=d(N)+1;return N[F]=L,h(N,F),N}var V=[].concat(N,L);return V.length>Q?u(g(V,{plainObjects:j}),V.length-1):V},I=function(N,L){if(a(N)){for(var Q=[],j=0;j<N.length;j+=1)Q[Q.length]=L(N[j]);return Q}return L(N)};return utils$3={arrayToObject:g,assign:A,combine:k,compact:_,decode:T,encode:v,isBuffer:R,isOverflow:c,isRegExp:w,markOverflow:u,maybeMap:I,merge:y},utils$3}var stringify_1,hasRequiredStringify$1;function requireStringify$1(){if(hasRequiredStringify$1)return stringify_1;hasRequiredStringify$1=1;var o=requireSideChannel(),e=requireUtils$3(),s=requireFormats(),a=Object.prototype.hasOwnProperty,l={brackets:function(v){return v+"[]"},comma:"comma",indices:function(v,_){return v+"["+_+"]"},repeat:function(v){return v}},u=Array.isArray,c=Array.prototype.push,d=function(E,v){c.apply(E,u(v)?v:[v])},h=Date.prototype.toISOString,p=s.default,m={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:p,formatter:s.formatters[p],indices:!1,serializeDate:function(v){return h.call(v)},skipNulls:!1,strictNullHandling:!1},g=function(v){return typeof v=="string"||typeof v=="number"||typeof v=="boolean"||typeof v=="symbol"||typeof v=="bigint"},y={},A=function E(v,_,w,R,k,I,P,N,L,Q,j,F,V,J,z,Y,fe,de){for(var X=v,he=de,ue=0,G=!1;(he=he.get(y))!==void 0&&!G;){var K=he.get(v);if(ue+=1,typeof K<"u"){if(K===ue)throw new RangeError("Cyclic object value");G=!0}typeof he.get(y)>"u"&&(ue=0)}if(typeof Q=="function"?X=Q(_,X):X instanceof Date?X=V(X):w==="comma"&&u(X)&&(X=e.maybeMap(X,function(Le){return Le instanceof Date?V(Le):Le})),X===null){if(I)return L&&!Y?L(_,m.encoder,fe,"key",J):_;X=""}if(g(X)||e.isBuffer(X)){if(L){var q=Y?_:L(_,m.encoder,fe,"key",J);return[z(q)+"="+z(L(X,m.encoder,fe,"value",J))]}return[z(_)+"="+z(String(X))]}var te=[];if(typeof X>"u")return te;var Z;if(w==="comma"&&u(X))Y&&L&&(X=e.maybeMap(X,L)),Z=[{value:X.length>0?X.join(",")||null:void 0}];else if(u(Q))Z=Q;else{var ce=Object.keys(X);Z=j?ce.sort(j):ce}var be=N?String(_).replace(/\./g,"%2E"):String(_),Ee=R&&u(X)&&X.length===1?be+"[]":be;if(k&&u(X)&&X.length===0)return Ee+"[]";for(var Se=0;Se<Z.length;++Se){var ke=Z[Se],Ae=typeof ke=="object"&&ke&&typeof ke.value<"u"?ke.value:X[ke];if(!(P&&Ae===null)){var Te=F&&N?String(ke).replace(/\./g,"%2E"):String(ke),xe=u(X)?typeof w=="function"?w(Ee,Te):Ee:Ee+(F?"."+Te:"["+Te+"]");de.set(v,ue);var Pe=o();Pe.set(y,de),d(te,E(Ae,xe,w,R,k,I,P,N,w==="comma"&&Y&&u(X)?null:L,Q,j,F,V,J,z,Y,fe,Pe))}}return te},T=function(v){if(!v)return m;if(typeof v.allowEmptyArrays<"u"&&typeof v.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof v.encodeDotInKeys<"u"&&typeof v.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(v.encoder!==null&&typeof v.encoder<"u"&&typeof v.encoder!="function")throw new TypeError("Encoder has to be a function.");var _=v.charset||m.charset;if(typeof v.charset<"u"&&v.charset!=="utf-8"&&v.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var w=s.default;if(typeof v.format<"u"){if(!a.call(s.formatters,v.format))throw new TypeError("Unknown format option provided.");w=v.format}var R=s.formatters[w],k=m.filter;(typeof v.filter=="function"||u(v.filter))&&(k=v.filter);var I;if(v.arrayFormat in l?I=v.arrayFormat:"indices"in v?I=v.indices?"indices":"repeat":I=m.arrayFormat,"commaRoundTrip"in v&&typeof v.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var P=typeof v.allowDots>"u"?v.encodeDotInKeys===!0?!0:m.allowDots:!!v.allowDots;return{addQueryPrefix:typeof v.addQueryPrefix=="boolean"?v.addQueryPrefix:m.addQueryPrefix,allowDots:P,allowEmptyArrays:typeof v.allowEmptyArrays=="boolean"?!!v.allowEmptyArrays:m.allowEmptyArrays,arrayFormat:I,charset:_,charsetSentinel:typeof v.charsetSentinel=="boolean"?v.charsetSentinel:m.charsetSentinel,commaRoundTrip:!!v.commaRoundTrip,delimiter:typeof v.delimiter>"u"?m.delimiter:v.delimiter,encode:typeof v.encode=="boolean"?v.encode:m.encode,encodeDotInKeys:typeof v.encodeDotInKeys=="boolean"?v.encodeDotInKeys:m.encodeDotInKeys,encoder:typeof v.encoder=="function"?v.encoder:m.encoder,encodeValuesOnly:typeof v.encodeValuesOnly=="boolean"?v.encodeValuesOnly:m.encodeValuesOnly,filter:k,format:w,formatter:R,serializeDate:typeof v.serializeDate=="function"?v.serializeDate:m.serializeDate,skipNulls:typeof v.skipNulls=="boolean"?v.skipNulls:m.skipNulls,sort:typeof v.sort=="function"?v.sort:null,strictNullHandling:typeof v.strictNullHandling=="boolean"?v.strictNullHandling:m.strictNullHandling}};return stringify_1=function(E,v){var _=E,w=T(v),R,k;typeof w.filter=="function"?(k=w.filter,_=k("",_)):u(w.filter)&&(k=w.filter,R=k);var I=[];if(typeof _!="object"||_===null)return"";var P=l[w.arrayFormat],N=P==="comma"&&w.commaRoundTrip;R||(R=Object.keys(_)),w.sort&&R.sort(w.sort);for(var L=o(),Q=0;Q<R.length;++Q){var j=R[Q],F=_[j];w.skipNulls&&F===null||d(I,A(F,j,P,N,w.allowEmptyArrays,w.strictNullHandling,w.skipNulls,w.encodeDotInKeys,w.encode?w.encoder:null,w.filter,w.sort,w.allowDots,w.serializeDate,w.format,w.formatter,w.encodeValuesOnly,w.charset,L))}var V=I.join(w.delimiter),J=w.addQueryPrefix===!0?"?":"";return w.charsetSentinel&&(w.charset==="iso-8859-1"?J+="utf8=%26%2310003%3B&":J+="utf8=%E2%9C%93&"),V.length>0?J+V:""},stringify_1}var parse,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse;hasRequiredParse=1;var o=requireUtils$3(),e=Object.prototype.hasOwnProperty,s=Array.isArray,a={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:o.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictMerge:!0,strictNullHandling:!1,throwOnLimitExceeded:!1},l=function(A){return A.replace(/&#(\d+);/g,function(T,E){return String.fromCharCode(parseInt(E,10))})},u=function(A,T,E){if(A&&typeof A=="string"&&T.comma&&A.indexOf(",")>-1)return A.split(",");if(T.throwOnLimitExceeded&&E>=T.arrayLimit)throw new RangeError("Array limit exceeded. Only "+T.arrayLimit+" element"+(T.arrayLimit===1?"":"s")+" allowed in an array.");return A},c="utf8=%26%2310003%3B",d="utf8=%E2%9C%93",h=function(T,E){var v={__proto__:null},_=E.ignoreQueryPrefix?T.replace(/^\?/,""):T;_=_.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var w=E.parameterLimit===1/0?void 0:E.parameterLimit,R=_.split(E.delimiter,E.throwOnLimitExceeded?w+1:w);if(E.throwOnLimitExceeded&&R.length>w)throw new RangeError("Parameter limit exceeded. Only "+w+" parameter"+(w===1?"":"s")+" allowed.");var k=-1,I,P=E.charset;if(E.charsetSentinel)for(I=0;I<R.length;++I)R[I].indexOf("utf8=")===0&&(R[I]===d?P="utf-8":R[I]===c&&(P="iso-8859-1"),k=I,I=R.length);for(I=0;I<R.length;++I)if(I!==k){var N=R[I],L=N.indexOf("]="),Q=L===-1?N.indexOf("="):L+1,j,F;if(Q===-1?(j=E.decoder(N,a.decoder,P,"key"),F=E.strictNullHandling?null:""):(j=E.decoder(N.slice(0,Q),a.decoder,P,"key"),j!==null&&(F=o.maybeMap(u(N.slice(Q+1),E,s(v[j])?v[j].length:0),function(J){return E.decoder(J,a.decoder,P,"value")}))),F&&E.interpretNumericEntities&&P==="iso-8859-1"&&(F=l(String(F))),N.indexOf("[]=")>-1&&(F=s(F)?[F]:F),E.comma&&s(F)&&F.length>E.arrayLimit){if(E.throwOnLimitExceeded)throw new RangeError("Array limit exceeded. Only "+E.arrayLimit+" element"+(E.arrayLimit===1?"":"s")+" allowed in an array.");F=o.combine([],F,E.arrayLimit,E.plainObjects)}if(j!==null){var V=e.call(v,j);V&&(E.duplicates==="combine"||N.indexOf("[]=")>-1)?v[j]=o.combine(v[j],F,E.arrayLimit,E.plainObjects):(!V||E.duplicates==="last")&&(v[j]=F)}}return v},p=function(A,T,E,v){var _=0;if(A.length>0&&A[A.length-1]==="[]"){var w=A.slice(0,-1).join("");_=Array.isArray(T)&&T[w]?T[w].length:0}for(var R=v?T:u(T,E,_),k=A.length-1;k>=0;--k){var I,P=A[k];if(P==="[]"&&E.parseArrays)o.isOverflow(R)?I=R:I=E.allowEmptyArrays&&(R===""||E.strictNullHandling&&R===null)?[]:o.combine([],R,E.arrayLimit,E.plainObjects);else{I=E.plainObjects?{__proto__:null}:{};var N=P.charAt(0)==="["&&P.charAt(P.length-1)==="]"?P.slice(1,-1):P,L=E.decodeDotInKeys?N.replace(/%2E/g,"."):N,Q=parseInt(L,10),j=!isNaN(Q)&&P!==L&&String(Q)===L&&Q>=0&&E.parseArrays;if(!E.parseArrays&&L==="")I={0:R};else if(j&&Q<E.arrayLimit)I=[],I[Q]=R;else{if(j&&E.throwOnLimitExceeded)throw new RangeError("Array limit exceeded. Only "+E.arrayLimit+" element"+(E.arrayLimit===1?"":"s")+" allowed in an array.");j?(I[Q]=R,o.markOverflow(I,Q)):L!=="__proto__"&&(I[L]=R)}}R=I}return R},m=function(T,E){var v=E.allowDots?T.replace(/\.([^.[]+)/g,"[$1]"):T;if(E.depth<=0)return!E.plainObjects&&e.call(Object.prototype,v)&&!E.allowPrototypes?void 0:[v];var _=/(\[[^[\]]*])/,w=/(\[[^[\]]*])/g,R=_.exec(v),k=R?v.slice(0,R.index):v,I=[];if(k){if(!E.plainObjects&&e.call(Object.prototype,k)&&!E.allowPrototypes)return;I[I.length]=k}for(var P=0;(R=w.exec(v))!==null&&P<E.depth;){P+=1;var N=R[1].slice(1,-1);if(!E.plainObjects&&e.call(Object.prototype,N)&&!E.allowPrototypes)return;I[I.length]=R[1]}if(R){if(E.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+E.depth+" and strictDepth is true");I[I.length]="["+v.slice(R.index)+"]"}return I},g=function(T,E,v,_){if(T){var w=m(T,v);if(w)return p(w,E,v,_)}},y=function(T){if(!T)return a;if(typeof T.allowEmptyArrays<"u"&&typeof T.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof T.decodeDotInKeys<"u"&&typeof T.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(T.decoder!==null&&typeof T.decoder<"u"&&typeof T.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof T.charset<"u"&&T.charset!=="utf-8"&&T.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof T.throwOnLimitExceeded<"u"&&typeof T.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var E=typeof T.charset>"u"?a.charset:T.charset,v=typeof T.duplicates>"u"?a.duplicates:T.duplicates;if(v!=="combine"&&v!=="first"&&v!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var _=typeof T.allowDots>"u"?T.decodeDotInKeys===!0?!0:a.allowDots:!!T.allowDots;return{allowDots:_,allowEmptyArrays:typeof T.allowEmptyArrays=="boolean"?!!T.allowEmptyArrays:a.allowEmptyArrays,allowPrototypes:typeof T.allowPrototypes=="boolean"?T.allowPrototypes:a.allowPrototypes,allowSparse:typeof T.allowSparse=="boolean"?T.allowSparse:a.allowSparse,arrayLimit:typeof T.arrayLimit=="number"?T.arrayLimit:a.arrayLimit,charset:E,charsetSentinel:typeof T.charsetSentinel=="boolean"?T.charsetSentinel:a.charsetSentinel,comma:typeof T.comma=="boolean"?T.comma:a.comma,decodeDotInKeys:typeof T.decodeDotInKeys=="boolean"?T.decodeDotInKeys:a.decodeDotInKeys,decoder:typeof T.decoder=="function"?T.decoder:a.decoder,delimiter:typeof T.delimiter=="string"||o.isRegExp(T.delimiter)?T.delimiter:a.delimiter,depth:typeof T.depth=="number"||T.depth===!1?+T.depth:a.depth,duplicates:v,ignoreQueryPrefix:T.ignoreQueryPrefix===!0,interpretNumericEntities:typeof T.interpretNumericEntities=="boolean"?T.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:typeof T.parameterLimit=="number"?T.parameterLimit:a.parameterLimit,parseArrays:T.parseArrays!==!1,plainObjects:typeof T.plainObjects=="boolean"?T.plainObjects:a.plainObjects,strictDepth:typeof T.strictDepth=="boolean"?!!T.strictDepth:a.strictDepth,strictMerge:typeof T.strictMerge=="boolean"?!!T.strictMerge:a.strictMerge,strictNullHandling:typeof T.strictNullHandling=="boolean"?T.strictNullHandling:a.strictNullHandling,throwOnLimitExceeded:typeof T.throwOnLimitExceeded=="boolean"?T.throwOnLimitExceeded:!1}};return parse=function(A,T){var E=y(T);if(A===""||A===null||typeof A>"u")return E.plainObjects?{__proto__:null}:{};for(var v=typeof A=="string"?h(A,E):A,_=E.plainObjects?{__proto__:null}:{},w=Object.keys(v),R=0;R<w.length;++R){var k=w[R],I=g(k,v[k],E,typeof A=="string");_=o.merge(_,I,E)}return E.allowSparse===!0?_:o.compact(_)},parse}var lib,hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;var o=requireStringify$1(),e=requireParse(),s=requireFormats();return lib={formats:s,parse:e,stringify:o},lib}var hasRequiredUrl;function requireUrl(){if(hasRequiredUrl)return url;hasRequiredUrl=1;var o=requirePunycode();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,u=["<",">",'"',"`"," ","\r",`
`,"	"],c=["{","}","|","\\","^","`"].concat(u),d=["'"].concat(c),h=["%","/","?",";","#"].concat(d),p=["/","?","#"],m=255,g=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,A={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=requireLib();function _(I,P,N){if(I&&typeof I=="object"&&I instanceof e)return I;var L=new e;return L.parse(I,P,N),L}e.prototype.parse=function(I,P,N){if(typeof I!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof I);var L=I.indexOf("?"),Q=L!==-1&&L<I.indexOf("#")?"?":"#",j=I.split(Q),F=/\\/g;j[0]=j[0].replace(F,"/"),I=j.join(Q);var V=I;if(V=V.trim(),!N&&I.split("#").length===1){var J=l.exec(V);if(J)return this.path=V,this.href=V,this.pathname=J[1],J[2]?(this.search=J[2],P?this.query=v.parse(this.search.substr(1)):this.query=this.search.substr(1)):P&&(this.search="",this.query={}),this}var z=s.exec(V);if(z){z=z[0];var Y=z.toLowerCase();this.protocol=Y,V=V.substr(z.length)}if(N||z||V.match(/^\/\/[^@/]+@[^@/]+/)){var fe=V.substr(0,2)==="//";fe&&!(z&&T[z])&&(V=V.substr(2),this.slashes=!0)}if(!T[z]&&(fe||z&&!E[z])){for(var de=-1,X=0;X<p.length;X++){var he=V.indexOf(p[X]);he!==-1&&(de===-1||he<de)&&(de=he)}var ue,G;de===-1?G=V.lastIndexOf("@"):G=V.lastIndexOf("@",de),G!==-1&&(ue=V.slice(0,G),V=V.slice(G+1),this.auth=decodeURIComponent(ue)),de=-1;for(var X=0;X<h.length;X++){var he=V.indexOf(h[X]);he!==-1&&(de===-1||he<de)&&(de=he)}de===-1&&(de=V.length),this.host=V.slice(0,de),V=V.slice(de),this.parseHost(),this.hostname=this.hostname||"";var K=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!K)for(var q=this.hostname.split(/\./),X=0,te=q.length;X<te;X++){var Z=q[X];if(Z&&!Z.match(g)){for(var ce="",be=0,Ee=Z.length;be<Ee;be++)Z.charCodeAt(be)>127?ce+="x":ce+=Z[be];if(!ce.match(g)){var Se=q.slice(0,X),ke=q.slice(X+1),Ae=Z.match(y);Ae&&(Se.push(Ae[1]),ke.unshift(Ae[2])),ke.length&&(V="/"+ke.join(".")+V),this.hostname=Se.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.toLowerCase(),K||(this.hostname=o.toASCII(this.hostname));var Te=this.port?":"+this.port:"",xe=this.hostname||"";this.host=xe+Te,this.href+=this.host,K&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),V[0]!=="/"&&(V="/"+V))}if(!A[Y])for(var X=0,te=d.length;X<te;X++){var Pe=d[X];if(V.indexOf(Pe)!==-1){var Le=encodeURIComponent(Pe);Le===Pe&&(Le=escape(Pe)),V=V.split(Pe).join(Le)}}var Ue=V.indexOf("#");Ue!==-1&&(this.hash=V.substr(Ue),V=V.slice(0,Ue));var Be=V.indexOf("?");if(Be!==-1?(this.search=V.substr(Be),this.query=V.substr(Be+1),P&&(this.query=v.parse(this.query)),V=V.slice(0,Be)):P&&(this.search="",this.query={}),V&&(this.pathname=V),E[Y]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Te=this.pathname||"",Ze=this.search||"";this.path=Te+Ze}return this.href=this.format(),this};function w(I){return typeof I=="string"&&(I=_(I)),I instanceof e?I.format():e.prototype.format.call(I)}e.prototype.format=function(){var I=this.auth||"";I&&(I=encodeURIComponent(I),I=I.replace(/%3A/i,":"),I+="@");var P=this.protocol||"",N=this.pathname||"",L=this.hash||"",Q=!1,j="";this.host?Q=I+this.host:this.hostname&&(Q=I+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(Q+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(j=v.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var F=this.search||j&&"?"+j||"";return P&&P.substr(-1)!==":"&&(P+=":"),this.slashes||(!P||E[P])&&Q!==!1?(Q="//"+(Q||""),N&&N.charAt(0)!=="/"&&(N="/"+N)):Q||(Q=""),L&&L.charAt(0)!=="#"&&(L="#"+L),F&&F.charAt(0)!=="?"&&(F="?"+F),N=N.replace(/[?#]/g,function(V){return encodeURIComponent(V)}),F=F.replace("#","%23"),P+Q+N+F+L};function R(I,P){return _(I,!1,!0).resolve(P)}e.prototype.resolve=function(I){return this.resolveObject(_(I,!1,!0)).format()};function k(I,P){return I?_(I,!1,!0).resolveObject(P):P}return e.prototype.resolveObject=function(I){if(typeof I=="string"){var P=new e;P.parse(I,!1,!0),I=P}for(var N=new e,L=Object.keys(this),Q=0;Q<L.length;Q++){var j=L[Q];N[j]=this[j]}if(N.hash=I.hash,I.href==="")return N.href=N.format(),N;if(I.slashes&&!I.protocol){for(var F=Object.keys(I),V=0;V<F.length;V++){var J=F[V];J!=="protocol"&&(N[J]=I[J])}return E[N.protocol]&&N.hostname&&!N.pathname&&(N.pathname="/",N.path=N.pathname),N.href=N.format(),N}if(I.protocol&&I.protocol!==N.protocol){if(!E[I.protocol]){for(var z=Object.keys(I),Y=0;Y<z.length;Y++){var fe=z[Y];N[fe]=I[fe]}return N.href=N.format(),N}if(N.protocol=I.protocol,!I.host&&!T[I.protocol]){for(var te=(I.pathname||"").split("/");te.length&&!(I.host=te.shift()););I.host||(I.host=""),I.hostname||(I.hostname=""),te[0]!==""&&te.unshift(""),te.length<2&&te.unshift(""),N.pathname=te.join("/")}else N.pathname=I.pathname;if(N.search=I.search,N.query=I.query,N.host=I.host||"",N.auth=I.auth,N.hostname=I.hostname||I.host,N.port=I.port,N.pathname||N.search){var de=N.pathname||"",X=N.search||"";N.path=de+X}return N.slashes=N.slashes||I.slashes,N.href=N.format(),N}var he=N.pathname&&N.pathname.charAt(0)==="/",ue=I.host||I.pathname&&I.pathname.charAt(0)==="/",G=ue||he||N.host&&I.pathname,K=G,q=N.pathname&&N.pathname.split("/")||[],te=I.pathname&&I.pathname.split("/")||[],Z=N.protocol&&!E[N.protocol];if(Z&&(N.hostname="",N.port=null,N.host&&(q[0]===""?q[0]=N.host:q.unshift(N.host)),N.host="",I.protocol&&(I.hostname=null,I.port=null,I.host&&(te[0]===""?te[0]=I.host:te.unshift(I.host)),I.host=null),G=G&&(te[0]===""||q[0]==="")),ue)N.host=I.host||I.host===""?I.host:N.host,N.hostname=I.hostname||I.hostname===""?I.hostname:N.hostname,N.search=I.search,N.query=I.query,q=te;else if(te.length)q||(q=[]),q.pop(),q=q.concat(te),N.search=I.search,N.query=I.query;else if(I.search!=null){if(Z){N.host=q.shift(),N.hostname=N.host;var ce=N.host&&N.host.indexOf("@")>0?N.host.split("@"):!1;ce&&(N.auth=ce.shift(),N.hostname=ce.shift(),N.host=N.hostname)}return N.search=I.search,N.query=I.query,(N.pathname!==null||N.search!==null)&&(N.path=(N.pathname?N.pathname:"")+(N.search?N.search:"")),N.href=N.format(),N}if(!q.length)return N.pathname=null,N.search?N.path="/"+N.search:N.path=null,N.href=N.format(),N;for(var be=q.slice(-1)[0],Ee=(N.host||I.host||q.length>1)&&(be==="."||be==="..")||be==="",Se=0,ke=q.length;ke>=0;ke--)be=q[ke],be==="."?q.splice(ke,1):be===".."?(q.splice(ke,1),Se++):Se&&(q.splice(ke,1),Se--);if(!G&&!K)for(;Se--;Se)q.unshift("..");G&&q[0]!==""&&(!q[0]||q[0].charAt(0)!=="/")&&q.unshift(""),Ee&&q.join("/").substr(-1)!=="/"&&q.push("");var Ae=q[0]===""||q[0]&&q[0].charAt(0)==="/";if(Z){N.hostname=Ae?"":q.length?q.shift():"",N.host=N.hostname;var ce=N.host&&N.host.indexOf("@")>0?N.host.split("@"):!1;ce&&(N.auth=ce.shift(),N.hostname=ce.shift(),N.host=N.hostname)}return G=G||N.host&&q.length,G&&!Ae&&q.unshift(""),q.length>0?N.pathname=q.join("/"):(N.pathname=null,N.path=null),(N.pathname!==null||N.search!==null)&&(N.path=(N.pathname?N.pathname:"")+(N.search?N.search:"")),N.auth=I.auth||N.auth,N.slashes=N.slashes||I.slashes,N.href=N.format(),N},e.prototype.parseHost=function(){var I=this.host,P=a.exec(I);P&&(P=P[0],P!==":"&&(this.port=P.substr(1)),I=I.substr(0,I.length-P.length)),I&&(this.hostname=I)},url.parse=_,url.resolve=R,url.resolveObject=k,url.format=w,url.Url=e,url}var decodeUriComponent,hasRequiredDecodeUriComponent;function requireDecodeUriComponent(){if(hasRequiredDecodeUriComponent)return decodeUriComponent;hasRequiredDecodeUriComponent=1;var o="%[a-f0-9]{2}",e=new RegExp("("+o+")|([^%]+?)","gi"),s=new RegExp("("+o+")+","gi");function a(c,d){try{return[decodeURIComponent(c.join(""))]}catch{}if(c.length===1)return c;d=d||1;var h=c.slice(0,d),p=c.slice(d);return Array.prototype.concat.call([],a(h),a(p))}function l(c){try{return decodeURIComponent(c)}catch{for(var d=c.match(e)||[],h=1;h<d.length;h++)c=a(d,h).join(""),d=c.match(e)||[];return c}}function u(c){for(var d={"%FE%FF":"","%FF%FE":""},h=s.exec(c);h;){try{d[h[0]]=decodeURIComponent(h[0])}catch{var p=l(h[0]);p!==h[0]&&(d[h[0]]=p)}h=s.exec(c)}d["%C2"]="";for(var m=Object.keys(d),g=0;g<m.length;g++){var y=m[g];c=c.replace(new RegExp(y,"g"),d[y])}return c}return decodeUriComponent=function(c){if(typeof c!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof c+"`");try{return c=c.replace(/\+/g," "),decodeURIComponent(c)}catch{return u(c)}},decodeUriComponent}var sourceMapResolve,hasRequiredSourceMapResolve;function requireSourceMapResolve(){if(hasRequiredSourceMapResolve)return sourceMapResolve;hasRequiredSourceMapResolve=1;var o=requireBrowserAtob(),e=requireUrl(),s=require$$3,a=requireDecodeUriComponent();function l(){return Array.prototype.reduce.call(arguments,function(F,V){return e.resolve(F,V)})}function u(F){return s.sep==="\\"?F.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):F}function c(F){return a(F.replace(/\+/g,"%2B"))}function d(F,V,J){setImmediate(function(){F(V,J)})}function h(F,V){try{return JSON.parse(F.replace(/^\)\]\}'/,""))}catch(J){throw J.sourceMapData=V,J}}function p(F,V,J){var z=c(V);try{return String(F(z))}catch(Y){throw Y.sourceMapData=J,Y}}var m=/[#@] sourceMappingURL=([^\s'"]*)/,g=RegExp(`(?:/\\*(?:\\s*\r?
(?://)?)?(?:`+m.source+")\\s*\\*/|//(?:"+m.source+"))\\s*");function y(F){var V=F.match(g);return V?V[1]||V[2]||"":null}function A(F,V,J,z){var Y;try{Y=k(F,V)}catch(de){return d(z,de)}if(!Y||Y.map)return d(z,null,Y);var fe=c(Y.url);J(fe,function(de,X){if(de)return de.sourceMapData=Y,z(de);Y.map=String(X);try{Y.map=h(Y.map,Y)}catch(he){return z(he)}z(null,Y)})}function T(F,V,J){var z=k(F,V);return!z||z.map||(z.map=p(J,z.url,z),z.map=h(z.map,z)),z}var E=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,v=/^(?:application|text)\/json$/,_="utf-8";function w(F){for(var V=o(F),J=V.length,z=new Uint8Array(J),Y=0;Y<J;Y++)z[Y]=V.charCodeAt(Y);return z}function R(F){if(typeof TextDecoder>"u"||typeof Uint8Array>"u")return o(F);var V=w(F),J=new TextDecoder(_,{fatal:!0});return J.decode(V)}function k(F,V){V=u(V);var J=y(F);if(!J)return null;var z=J.match(E);if(z){var Y=z[1]||"text/plain",fe=z[2]||"",de=z[3]||"",X={sourceMappingURL:J,url:null,sourcesRelativeTo:V,map:de};if(!v.test(Y)){var he=new Error("Unuseful data uri mime type: "+Y);throw he.sourceMapData=X,he}try{X.map=h(fe===";base64"?R(de):decodeURIComponent(de),X)}catch(G){throw G.sourceMapData=X,G}return X}var ue=l(V,J);return{sourceMappingURL:J,url:ue,sourcesRelativeTo:ue,map:null}}function I(F,V,J,z,Y){typeof z=="function"&&(Y=z,z={});var fe=F.sources?F.sources.length:0,de={sourcesResolved:[],sourcesContent:[]};if(fe===0){d(Y,null,de);return}var X=function(){fe--,fe===0&&Y(null,de)};L(F,V,z,function(he,ue,G){if(de.sourcesResolved[G]=he,typeof ue=="string")de.sourcesContent[G]=ue,d(X,null);else{var K=c(he);J(K,function(q,te){de.sourcesContent[G]=q||String(te),X()})}})}function P(F,V,J,z){var Y={sourcesResolved:[],sourcesContent:[]};return!F.sources||F.sources.length===0||L(F,V,z,function(fe,de,X){if(Y.sourcesResolved[X]=fe,J!==null)if(typeof de=="string")Y.sourcesContent[X]=de;else{var he=c(fe);try{Y.sourcesContent[X]=String(J(he))}catch(ue){Y.sourcesContent[X]=ue}}}),Y}var N=/\/?$/;function L(F,V,J,z){J=J||{},V=u(V);for(var Y,fe,de,X=0,he=F.sources.length;X<he;X++)de=null,typeof J.sourceRoot=="string"?de=J.sourceRoot:typeof F.sourceRoot=="string"&&J.sourceRoot!==!1&&(de=F.sourceRoot),de===null||de===""?Y=l(V,F.sources[X]):Y=l(V,de.replace(N,"/"),F.sources[X]),fe=(F.sourcesContent||[])[X],z(Y,fe,X)}function Q(F,V,J,z,Y){if(typeof z=="function"&&(Y=z,z={}),F===null){var fe=V,de={sourceMappingURL:null,url:fe,sourcesRelativeTo:fe,map:null},X=c(fe);J(X,function(ue,G){if(ue)return ue.sourceMapData=de,Y(ue);de.map=String(G);try{de.map=h(de.map,de)}catch(K){return Y(K)}he(de)})}else A(F,V,J,function(ue,G){if(ue)return Y(ue);if(!G)return Y(null,null);he(G)});function he(ue){I(ue.map,ue.sourcesRelativeTo,J,z,function(G,K){if(G)return Y(G);ue.sourcesResolved=K.sourcesResolved,ue.sourcesContent=K.sourcesContent,Y(null,ue)})}}function j(F,V,J,z){var Y;if(F===null){var fe=V;Y={sourceMappingURL:null,url:fe,sourcesRelativeTo:fe,map:null},Y.map=p(J,fe,Y),Y.map=h(Y.map,Y)}else if(Y=T(F,V,J),!Y)return null;var de=P(Y.map,Y.sourcesRelativeTo,J,z);return Y.sourcesResolved=de.sourcesResolved,Y.sourcesContent=de.sourcesContent,Y}return sourceMapResolve={resolveSourceMap:A,resolveSourceMapSync:T,resolveSources:I,resolveSourcesSync:P,resolve:Q,resolveSync:j,parseMapToJSON:h},sourceMapResolve}var hasRequiredSourceMapSupport;function requireSourceMapSupport(){return hasRequiredSourceMapSupport||(hasRequiredSourceMapSupport=1,(function(o,e){var s=requireSourceMap().SourceMapGenerator,a=requireSourceMap().SourceMapConsumer,l=requireSourceMapResolve(),u=require$$3,c=require$$3;o.exports=h;const d=function(p){return c.sep==="\\"?p.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):p};function h(p){p._comment=p.comment,p.map=new s,p.position={line:1,column:1},p.files={};for(var m in e)p[m]=e[m]}e.updatePosition=function(p){var m=p.match(/\n/g);m&&(this.position.line+=m.length);var g=p.lastIndexOf(`
`);this.position.column=~g?p.length-g:this.position.column+p.length},e.emit=function(p,m){if(m){var g=d(m.source||"source.css");this.map.addMapping({source:g,generated:{line:this.position.line,column:Math.max(this.position.column-1,0)},original:{line:m.start.line,column:m.start.column-1}}),this.addFile(g,m)}return this.updatePosition(p),p},e.addFile=function(p,m){typeof m.content=="string"&&(Object.prototype.hasOwnProperty.call(this.files,p)||(this.files[p]=m.content))},e.applySourceMaps=function(){Object.keys(this.files).forEach(function(p){var m=this.files[p];if(this.map.setSourceContent(p,m),this.options.inputSourcemaps!==!1){var g=l.resolveSync(m,p,u.readFileSync);if(g){var y=new a(g.map),A=g.sourcesRelativeTo;this.map.applySourceMap(y,p,d(c.dirname(A)))}}},this)},e.comment=function(p){return/^# sourceMappingURL=/.test(p.comment)?this.emit("",p.position):this._comment(p)}})(sourceMapSupport,sourceMapSupport.exports)),sourceMapSupport.exports}var stringify,hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify;hasRequiredStringify=1;var o=requireCompress(),e=requireIdentity();return stringify=function(s,a){a=a||{};var l=a.compress?new o(a):new e(a);if(a.sourcemap){var u=requireSourceMapSupport();u(l);var d=l.compile(s);l.applySourceMaps();var c=a.sourcemap==="generator"?l.map:l.map.toJSON();return{code:d,map:c}}var d=l.compile(s);return d},stringify}var hasRequiredCss;function requireCss(){return hasRequiredCss||(hasRequiredCss=1,css$1.parse=requireParse$1(),css$1.stringify=requireStringify()),css$1}var hasRequiredSanitize;function requireSanitize(){return hasRequiredSanitize||(hasRequiredSanitize=1,(function(o){var e=sanitize$2&&sanitize$2.__createBinding||(Object.create?(function(q,te,Z,ce){ce===void 0&&(ce=Z);var be=Object.getOwnPropertyDescriptor(te,Z);(!be||("get"in be?!te.__esModule:be.writable||be.configurable))&&(be={enumerable:!0,get:function(){return te[Z]}}),Object.defineProperty(q,ce,be)}):(function(q,te,Z,ce){ce===void 0&&(ce=Z),q[ce]=te[Z]})),s=sanitize$2&&sanitize$2.__setModuleDefault||(Object.create?(function(q,te){Object.defineProperty(q,"default",{enumerable:!0,value:te})}):function(q,te){q.default=te}),a=sanitize$2&&sanitize$2.__importStar||(function(){var q=function(te){return q=Object.getOwnPropertyNames||function(Z){var ce=[];for(var be in Z)Object.prototype.hasOwnProperty.call(Z,be)&&(ce[ce.length]=be);return ce},q(te)};return function(te){if(te&&te.__esModule)return te;var Z={};if(te!=null)for(var ce=q(te),be=0;be<ce.length;be++)ce[be]!=="default"&&e(Z,te,ce[be]);return s(Z,te),Z}})(),l=sanitize$2&&sanitize$2.__importDefault||function(q){return q&&q.__esModule?q:{default:q}};Object.defineProperty(o,"__esModule",{value:!0}),o.defaultOptions=o.defaultParseOptions=void 0,o.sanitizeStyles=G,o.sanitize=K;const u=l(requireSanitizeHtml()),c=l(requireLib$1()),d=a(require$$2),h=l(requireCss()),p=l(requireLog()),m=["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr","iframe","style"],g=["svg","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","switch","symbol","text","textpath","title","tref","tspan","view","vkern","animate","use"],y=["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot","frameborder","scrolling","allow","target","attributeName","aria-hidden","referrerpolicy","aria-describedby","data-*","wide-content","sticky-header"],A=["viewBox","accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan","from","to","xlink:href","use"],T={...c.default.whiteList,"--method":!0},E=["note-type","term-key"],v=Array.from(new Set([...m,...g,...u.default.defaults.allowedTags])),_=Array.from(new Set([...y,...A,...E])),w=(q,te)=>{const Z=be=>be.startsWith("#")?be:null;return{tagName:q,attribs:(be=>{const Ee=["xlink:href","href"];return Object.fromEntries(Object.entries(be).map(([Se,ke])=>Ee.includes(Se)?[Se,Z(ke)]:[Se,ke]).filter(([Se,ke])=>ke!==null))})(te)}};o.defaultParseOptions={lowerCaseAttributeNames:!1},o.defaultOptions={...u.default.defaults,allowedTags:v,allowedAttributes:{...u.default.defaults.allowedAttributes,"*":_},allowedSchemesAppliedToAttributes:[...u.default.defaults.allowedSchemesAppliedToAttributes,"xlink:href","from","to"],allowVulnerableTags:!0,parser:o.defaultParseOptions,cssWhiteList:T,transformTags:{use:w}};const R=/<\s*(script|iframe|object|embed|svg|img|video|audio|link|meta|base|form|style|template|math|foreignobject)\b/i,k=/<\s*\/\s*style/i,I=/url\s*\(\s*['"]?\s*(?:javascript:|vbscript:|data\s*:\s*(?:text\/html|application\/xhtml\+xml|image\/svg\+xml))/i,P=/expression\s*\(/i,N=/behavior\s*:/i,L=/-moz-binding\s*:/i,Q=/@(?:import|charset|namespace)\b/i,j=/\/\*[^]*?\*\//g,F=new RegExp([String.raw`[\u0000-\u0008\u000B\u000C\u000E-\u001F\u007F]`,String.raw`[\u202A-\u202E\u2066-\u2069]`].join("|"),"g"),V=/[<&\\/]|@|url\s*\(|expression|behavior|-moz-binding/i,J=/[\\&\u202A-\u202E\u2066-\u2069]/,z=new RegExp([String.raw`\\([0-9A-Fa-f]{1,6})\s?`,String.raw`&#x([0-9A-Fa-f]{1,6});`,String.raw`&#(\d{1,7});`,String.raw`&([a-zA-Z][a-zA-Z0-9]{1,31});`].join("|"),"g"),Y={lt:"<",gt:">",quot:'"',apos:"'",amp:"&",newline:`
`,tab:"	",colon:":",sol:"/",lpar:"(",rpar:")"};function fe(q,te,Z,ce,be){var Ee;if(te)return String.fromCodePoint(parseInt(te,16)||0);if(Z)return String.fromCodePoint(parseInt(Z,16)||0);if(ce)return String.fromCodePoint(parseInt(ce,10)||0);if(be){const Se=(Ee=Y[be])!==null&&Ee!==void 0?Ee:Y[be.toLowerCase()];if(Se)return Se}return q}function de(q){let te=String(q??"");if(!J.test(te))return te;te=te.replace(j,"").replace(F,"").replace(z,fe);try{te=te.normalize("NFKC")}catch{}return te}function X(q,te){const ce=q.toLowerCase()==="content",be=de(te);if(!V.test(be))return!0;const Ee=/<[^>]{0,128}>/i.test(be);return![Ee&&k,!ce&&Ee&&R,I,P,N,L,Q].filter(Boolean).some(ke=>ke.test(be))}function he(q,te){q("style").each((ce,be)=>{const Ee=q(be).text();try{const Se=h.default.parse(Ee);if(!Se.stylesheet)return;Se.stylesheet.rules=Se.stylesheet.rules.filter(ke=>ke.type==="rule"),Se.stylesheet.rules.forEach(ke=>{ke.declarations&&(ke.declarations=ke.declarations.filter(Ae=>{if(!Ae.property||!Ae.value)return!1;const Te=String(Ae.property).toLowerCase(),xe=String(Ae.value);if(!X(Te,xe))return!1;const Pe=!!te[Te];return Pe&&(Ae.value=c.default.safeAttrValue(Te,xe)),Ae.value?Pe:!1}))}),q(be).text(h.default.stringify(Se))}catch(Se){q(be).remove();const ke=Se instanceof Error?Se.message:`${Se}`;p.default.info(ke)}})}function ue(q,te){const Z={whiteList:te},ce=new c.default.FilterCSS(Z);q("*").each((be,Ee)=>{const Se=q(Ee).attr("style");Se&&q(Ee).attr("style",ce.process(Se))})}function G(q,te){const Z=te.cssWhiteList||{},ce=d.load(q);he(ce,Z),ue(ce,Z);const be=ce("head").html()||"",Ee=ce("body").html()||"";return be+Ee}function K(q,te,Z){var ce;const be=te||o.defaultOptions;Z!=null&&Z.cssWhiteList&&(be.cssWhiteList={...be.cssWhiteList,...Z.cssWhiteList});const Se=!((ce=be.disableStyleSanitizer)!==null&&ce!==void 0&&ce)?G(q,be):q;return(0,u.default)(Se,be)}o.default=K})(sanitize$2)),sanitize$2}var sanitizeExports=requireSanitize();const sanitize$1=getDefaultExportFromCjs$1(sanitizeExports),sanitizeModule=_mergeNamespaces({__proto__:null,default:sanitize$1},[sanitizeExports]),sanitizeAll=o=>()=>(console.warn(`[${o}]: sanitize function not found`),""),getSanitize=o=>{const e=sanitizeModule,s="sanitize"in e&&e.sanitize?e.sanitize:e.default;return s instanceof Function?s:sanitizeAll(o)};var DomAttr;(function(o){o.Html="data-html",o.HtmlRaw="data-html-raw"})(DomAttr||(DomAttr={}));const sanitize=getSanitize("Html"),schemaSpecs$1={[HtmlNode.Block]:{atom:!0,group:"block",attrs:{[HtmlAttr.Content]:{}},parseDOM:[{tag:`div[${DomAttr.Html}]`,getAttrs(o){const e=o;return{[HtmlAttr.Content]:e.getAttribute(DomAttr.HtmlRaw)||e.innerHTML}}}],toDOM(o){const e=o.attrs[HtmlAttr.Content],s=document.createElement("div");return s.setAttribute(DomAttr.Html,""),s.setAttribute(DomAttr.HtmlRaw,e),s.contentEditable="false",s.innerHTML=sanitize(e),s}},[HtmlNode.Inline]:{atom:!0,inline:!0,group:"inline",attrs:{[HtmlAttr.Content]:{}},parseDOM:[{tag:`span[${DomAttr.Html}]`,getAttrs(o){return{[HtmlAttr.Content]:o.textContent}}}],toDOM(o){const e=document.createElement("span");return e.setAttribute(DomAttr.Html,""),e.contentEditable="false",e.textContent=o.attrs[HtmlAttr.Content],e}}},serializerTokens$6={[HtmlNode.Block]:(o,e)=>{o.write(e.attrs[HtmlAttr.Content]),o.ensureNewLine(),o.closeBlock(e)},[HtmlNode.Inline]:(o,e)=>{o.write(e.attrs[HtmlAttr.Content])}},Html=o=>{if(o.context.has("html")&&o.context.get("html")===!1){globalLogger.info("[HTML extension]: Skip extension, because HTML disabled via context"),o.logger.log("[HTML extension]: Skip extension, because HTML disabled via context");return}o.addNode(HtmlNode.Block,()=>({spec:schemaSpecs$1[HtmlNode.Block],fromMd:{tokenSpec:parserTokens$7[HtmlNode.Block]},toMd:serializerTokens$6[HtmlNode.Block]})),o.addNode(HtmlNode.Inline,()=>({spec:schemaSpecs$1[HtmlNode.Inline],fromMd:{tokenSpec:parserTokens$7[HtmlNode.Inline]},toMd:serializerTokens$6[HtmlNode.Inline]}))};var BreakNodeName;(function(o){o.HardBreak="hard_break",o.SoftBreak="soft_break"})(BreakNodeName||(BreakNodeName={}));const hbType=nodeTypeFactory(BreakNodeName.HardBreak),sbType=nodeTypeFactory(BreakNodeName.SoftBreak),BreaksSpecs=(o,e)=>{const{preferredBreak:s="hard"}=e,a=[{tag:"br"}];o.addNode(BreakNodeName.HardBreak,()=>({spec:{inline:!0,group:"inline break",marks:"",isBreak:!0,selectable:!1,parseDOM:s==="hard"?a:void 0,toDOM(){return["br"]}},fromMd:{tokenName:"hardbreak",tokenSpec:{name:BreakNodeName.HardBreak,type:"node"}},toMd:(l,u,c,d)=>{for(let h=d+1;h<c.childCount;h++)if(c.child(h).type!==u.type){l.write(`\\
`);return}}})),o.addNode(BreakNodeName.SoftBreak,()=>({spec:{inline:!0,group:"inline break",marks:"",isBreak:!0,selectable:!1,parseDOM:s==="soft"?a:void 0,toDOM(){return["br"]}},fromMd:{tokenName:"softbreak",tokenSpec:{name:BreakNodeName.SoftBreak,type:"node"}},toMd:(l,u,c,d)=>{for(let h=d+1;h<c.childCount;h++)if(c.child(h).type!==u.type){l.write(`
`);return}}}))},blockquoteNodeName="blockquote",blockquoteType=nodeTypeFactory(blockquoteNodeName),isBlockqouteNode=o=>o.type.name===blockquoteNodeName,BlockquoteSpecs=o=>{o.addNode(blockquoteNodeName,()=>({spec:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]},selectable:!0},fromMd:{tokenSpec:{name:blockquoteNodeName,type:"block"}},toMd:(e,s)=>{e.wrapBlock("> ",null,s,()=>e.renderContent(s))}}))},CodeBlockNodeAttr={Lang:"data-language",Markup:"data-markup",Line:"data-line",ShowLineNumbers:"data-show-line-numbers"},codeBlockNodeName="code_block",codeBlockType=nodeTypeFactory(codeBlockNodeName),getLangOfNode=o=>{var s,a;let e=o.getAttribute(CodeBlockNodeAttr.Lang)||"";if(!e){const l=o.firstElementChild;l&&l.nodeName.toLowerCase()==="code"&&l.classList.contains("hljs")&&(e=((a=(s=l.getAttribute("class"))==null?void 0:s.split(" "))==null?void 0:a[1])||"")}return e},CodeBlockSpecs=(o,e)=>{o.addNode(codeBlockNodeName,()=>{var s;return{view:e.nodeview,spec:{attrs:{[CodeBlockNodeAttr.Lang]:{default:""},[CodeBlockNodeAttr.Markup]:{default:"```"},[CodeBlockNodeAttr.Line]:{default:null},...(s=e.lineNumbers)!=null&&s.enabled?{[CodeBlockNodeAttr.ShowLineNumbers]:{default:e.lineNumbers.showByDefault?"true":""}}:{}},content:"text*",group:"block",code:!0,marks:"",selectable:!0,allowSelection:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:a=>({[CodeBlockNodeAttr.Lang]:getLangOfNode(a)})}],toDOM({attrs:a}){return["pre",a,["code",0]]}},fromMd:{tokenSpec:{name:codeBlockNodeName,type:"block",noCloseToken:!0,getAttrs:a=>({[CodeBlockNodeAttr.Line]:a.attrGet("data-line"),[CodeBlockNodeAttr.ShowLineNumbers]:a.info.includes("showLineNumbers")?"true":""}),prepareContent:removeNewLineAtEnd}},toMd:(a,l)=>{var p;const u=l.attrs[CodeBlockNodeAttr.Lang],c=l.attrs[CodeBlockNodeAttr.Markup],d=(p=e.lineNumbers)!=null&&p.enabled?l.attrs[CodeBlockNodeAttr.ShowLineNumbers]:"";let h=u;d==="true"&&(h+=" showLineNumbers"),a.write(c+h+`
`),a.text(l.textContent,!1),a.write(`
`),a.write(c),a.closeBlock(l)}}}),o.addNode("fence",()=>({spec:{},fromMd:{tokenSpec:{name:codeBlockNodeName,type:"block",noCloseToken:!0,getAttrs:s=>{var l,u,c;const a={[CodeBlockNodeAttr.Markup]:s.markup,[CodeBlockNodeAttr.Line]:s.attrGet("data-line")};if(s.info){const d=s.info.split(/\s+/),h=((l=e.lineNumbers)==null?void 0:l.enabled)&&d[0]==="showLineNumbers";a[CodeBlockNodeAttr.Lang]=h?"":d[0]}return(u=e.lineNumbers)!=null&&u.enabled&&((c=s.info)!=null&&c.includes("showLineNumbers"))?a[CodeBlockNodeAttr.ShowLineNumbers]="true":a[CodeBlockNodeAttr.ShowLineNumbers]="",a},prepareContent:removeNewLineAtEnd}},toMd:()=>{throw new Error("Unexpected toMd() call on fence node")}})),o.addKeymap(()=>({Tab:(s,a)=>{const{$anchor:l,$head:u}=s.selection;return l.sameParent(u)&&l.parent.type.name===codeBlockNodeName?(a==null||a(s.tr.replaceSelectionWith(s.schema.text("	")).scrollIntoView()),!0):!1}}))};function removeNewLineAtEnd(o){return o.endsWith(`
`)?o.slice(0,o.length-1):o}var markdownItDeflist,hasRequiredMarkdownItDeflist;function requireMarkdownItDeflist(){return hasRequiredMarkdownItDeflist||(hasRequiredMarkdownItDeflist=1,markdownItDeflist=function(e){var s=e.utils.isSpace;function a(c,d){var h,p,m=c.bMarks[d]+c.tShift[d],g=c.eMarks[d];return m>=g||(p=c.src.charCodeAt(m++),p!==126&&p!==58)||(h=c.skipSpaces(m),m===h)||h>=g?-1:m}function l(c,d){var h,p,m=c.level+2;for(h=d+2,p=c.tokens.length-2;h<p;h++)c.tokens[h].level===m&&c.tokens[h].type==="paragraph_open"&&(c.tokens[h+2].hidden=!0,c.tokens[h].hidden=!0,h+=2)}function u(c,d,h,p){var m,g,y,A,T,E,v,_,w,R,k,I,P,N,L,Q,j,F,V,J;if(p)return c.ddIndent<0?!1:a(c,d)>=0;if(w=d+1,w>=h||c.isEmpty(w)&&(w++,w>=h)||c.sCount[w]<c.blkIndent||(g=a(c,w),g<0))return!1;v=c.tokens.length,V=!0,J=c.push("dl_open","dl",1),J.map=E=[d,0],A=d,y=w;e:for(;;){for(F=!1,J=c.push("dt_open","dt",1),J.map=[A,A],J=c.push("inline","",0),J.map=[A,A],J.content=c.getLines(A,A+1,c.blkIndent,!1).trim(),J.children=[],J=c.push("dt_close","dt",-1);;){for(J=c.push("dd_open","dd",1),J.map=T=[w,0],j=g,_=c.eMarks[y],R=c.sCount[y]+g-(c.bMarks[y]+c.tShift[y]);j<_&&(m=c.src.charCodeAt(j),s(m));){m===9?R+=4-R%4:R++;j++}if(g=j,Q=c.tight,k=c.ddIndent,I=c.blkIndent,L=c.tShift[y],N=c.sCount[y],P=c.parentType,c.blkIndent=c.ddIndent=c.sCount[y]+2,c.tShift[y]=g-c.bMarks[y],c.sCount[y]=R,c.tight=!0,c.parentType="deflist",c.md.block.tokenize(c,y,h,!0),(!c.tight||F)&&(V=!1),F=c.line-y>1&&c.isEmpty(c.line-1),c.tShift[y]=L,c.sCount[y]=N,c.tight=Q,c.parentType=P,c.blkIndent=I,c.ddIndent=k,J=c.push("dd_close","dd",-1),T[1]=w=c.line,w>=h||c.sCount[w]<c.blkIndent)break e;if(g=a(c,w),g<0)break;y=w}if(w>=h||(A=w,c.isEmpty(A))||c.sCount[A]<c.blkIndent||(y=A+1,y>=h)||(c.isEmpty(y)&&y++,y>=h)||c.sCount[y]<c.blkIndent||(g=a(c,y),g<0))break}return J=c.push("dl_close","dl",-1),E[1]=w,c.line=w,V&&l(c,v),!0}e.block.ruler.before("paragraph","deflist",u,{alt:["paragraph","reference","blockquote"]})}),markdownItDeflist}var deflist,hasRequiredDeflist;function requireDeflist(){if(hasRequiredDeflist)return deflist;hasRequiredDeflist=1;var o=deflist&&deflist.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};return deflist=o(requireMarkdownItDeflist()).default,deflist}var deflistExports=requireDeflist();const deflistPlugin=getDefaultExportFromCjs$1(deflistExports);var DeflistNode;(function(o){o.List="dl",o.Term="dt",o.Desc="dd"})(DeflistNode||(DeflistNode={}));const DeflistAttr={Line:"data-line"},parserTokens$6={[DeflistNode.List]:{name:DeflistNode.List,type:"block"},[DeflistNode.Term]:{name:DeflistNode.Term,type:"block",getAttrs(o){return{[DeflistAttr.Line]:o.attrGet("data-line")}}},[DeflistNode.Desc]:{name:DeflistNode.Desc,type:"block"}},DEFAULT_PLACEHOLDERS$2={Term:"Definition term",Desc:"Definition description"},getSchemaSpecs$5=(o,e)=>({[DeflistNode.List]:{group:"block",content:`(${DeflistNode.Term} ${DeflistNode.Desc})+`,parseDOM:[{tag:"dl"}],toDOM(){return["dl",0]},selectable:!0,allowSelection:!0,complex:"root"},[DeflistNode.Term]:{attrs:{[DeflistAttr.Line]:{default:null}},defining:!0,group:"block",content:"inline*",parseDOM:[{tag:"dt"}],toDOM(s){return["dt",s.attrs,0]},placeholder:{content:(e==null?void 0:e[DeflistNode.Term])??(o==null?void 0:o.deflistTermPlaceholder)??DEFAULT_PLACEHOLDERS$2.Term,alwaysVisible:!0},selectable:!1,allowSelection:!1,complex:"leaf"},[DeflistNode.Desc]:{defining:!0,group:"block",content:"block+",parseDOM:[{tag:"dd"}],toDOM(){return["dd",0]},placeholder:{content:(e==null?void 0:e[DeflistNode.Desc])??(o==null?void 0:o.deflistDescPlaceholder)??DEFAULT_PLACEHOLDERS$2.Desc,alwaysVisible:!0},selectable:!1,allowSelection:!1,complex:"leaf"}}),serializerTokens$5={[DeflistNode.List]:(o,e)=>{o.renderContent(e)},[DeflistNode.Term]:(o,e)=>{o.renderInline(e),o.ensureNewLine()},[DeflistNode.Desc]:(o,e)=>{o.wrapBlock("  ",": ",e,()=>{o.renderContent(e)})}},defListType=nodeTypeFactory(DeflistNode.List),defTermType=nodeTypeFactory(DeflistNode.Term),defDescType=nodeTypeFactory(DeflistNode.Desc),DeflistSpecs=(o,e)=>{const s=getSchemaSpecs$5(e,o.context.get("placeholder"));o.configureMd(a=>a.use(deflistPlugin)),o.addNode(DeflistNode.List,()=>({spec:s[DeflistNode.List],fromMd:{tokenSpec:parserTokens$6[DeflistNode.List]},toMd:serializerTokens$5[DeflistNode.List]})).addNode(DeflistNode.Term,()=>({spec:s[DeflistNode.Term],fromMd:{tokenSpec:parserTokens$6[DeflistNode.Term]},toMd:serializerTokens$5[DeflistNode.Term]})).addNode(DeflistNode.Desc,()=>({spec:s[DeflistNode.Desc],fromMd:{tokenSpec:parserTokens$6[DeflistNode.Desc]},toMd:serializerTokens$5[DeflistNode.Desc]}))},imageNodeName="image",imageType=nodeTypeFactory(imageNodeName),ImageAttr={Src:"src",Alt:"alt",Title:"title",Loading:"loading"},ImageSpecs=o=>{o.addNode(imageNodeName,()=>({spec:{inline:!0,attrs:{[ImageAttr.Src]:{},[ImageAttr.Alt]:{default:null},[ImageAttr.Title]:{default:null},[ImageAttr.Loading]:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(e){return{[ImageAttr.Src]:e.getAttribute(ImageAttr.Src),[ImageAttr.Alt]:e.getAttribute(ImageAttr.Alt),[ImageAttr.Title]:e.getAttribute(ImageAttr.Title),[ImageAttr.Loading]:e.getAttribute(ImageAttr.Loading)}}}],toDOM(e){return["img",e.attrs]}},fromMd:{tokenSpec:{name:imageNodeName,type:"node",getAttrs:e=>{var s,a;return{[ImageAttr.Src]:e.attrGet("src"),[ImageAttr.Title]:e.attrGet("title")||null,[ImageAttr.Loading]:e.attrGet(ImageAttr.Loading)||null,[ImageAttr.Alt]:((a=(s=e.children)==null?void 0:s[0])==null?void 0:a.content)||null}}}},toMd:(e,{attrs:s})=>{let a="![";s.alt&&(a+=e.esc(s.alt)),a+="](",s.src&&(a+=e.esc(s.src)),s.title&&(a+=` ${e.quote(s.title)}`),a+=")",e.write(a)}}))};var TableNode;(function(o){o.Table="table",o.Head="thead",o.Body="tbody",o.Row="tr",o.HeaderCell="th",o.DataCell="td"})(TableNode||(TableNode={}));var TableAttrs;(function(o){o.CellAlign="cell-align",o.Line="data-line"})(TableAttrs||(TableAttrs={}));var CellAlign;(function(o){o.Left="left",o.Center="center",o.Right="right"})(CellAlign||(CellAlign={}));const parserTokens$5={[TableNode.Table]:{name:TableNode.Table,type:"block"},[TableNode.Head]:{name:TableNode.Head,type:"block"},[TableNode.Body]:{name:TableNode.Body,type:"block"},[TableNode.Row]:{name:TableNode.Row,type:"block",getAttrs(o){return{[TableAttrs.Line]:o.attrGet("data-line")}}},[TableNode.HeaderCell]:{name:TableNode.HeaderCell,type:"block",getAttrs:getTableCellAttrs},[TableNode.DataCell]:{name:TableNode.DataCell,type:"block",getAttrs:getTableCellAttrs}};function getTableCellAttrs({attrs:o}){const e=Object.fromEntries(o||[]);let s=CellAlign.Left;if(e.style){const l=e.style.split(";").find(u=>u.startsWith("text-align:"))||"";[,s=CellAlign.Left]=l.split(":")}return{[TableAttrs.CellAlign]:s}}/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */var isNumber$1,hasRequiredIsNumber;function requireIsNumber(){return hasRequiredIsNumber||(hasRequiredIsNumber=1,isNumber$1=function(o){return typeof o=="number"?o-o===0:typeof o=="string"&&o.trim()!==""?Number.isFinite?Number.isFinite(+o):isFinite(+o):!1}),isNumber$1}var isNumberExports=requireIsNumber();const isNumber=getDefaultExportFromCjs$1(isNumberExports);var TableRole;(function(o){o.Table="table",o.Body="tableBody",o.Row="tableRow",o.Cell="tableCell"})(TableRole||(TableRole={}));const isTableNode=o=>o.type.spec.tableRole===TableRole.Table,isTableBodyNode=o=>o.type.spec.tableRole===TableRole.Body,isTableRowNode=o=>o.type.spec.tableRole===TableRole.Row,isTableCellNode=o=>o.type.spec.tableRole===TableRole.Cell,findParentTable$1=findParentNode(isTableNode),findParentTableBody=findParentNode(isTableBodyNode),findParentTableRow=findParentNode(isTableRowNode),findParentTableCell=findParentNode(isTableCellNode),findParentTableFromPos=o=>findParentNodeClosestToPos(o,isTableNode),findChildTableRows=o=>findChildren(o,isTableRowNode),findChildTableCells=o=>findChildren(o,isTableCellNode);function atEndOfCell(o,e){if(!isTextSelection(o.state.selection))return null;const{$head:s}=o.state.selection;for(let a=s.depth-1;a>=0;a--){const l=s.node(a);if((e<0?s.index(a):s.indexAfter(a))!==(e<0?0:l.childCount))return null;if(l.type.spec.tableRole===TableRole.Cell){const c=s.before(a),d=e>0?"down":"up";return o.endOfTextblock(d)?c:null}}return null}function goToNextCell(o){return(e,s)=>{const a=findParentTable$1(e.selection),l=findParentTableCell(e.selection);if(!a||!l)return!1;const u=findChildTableCells(a.node),c=u.findIndex(T=>T.node===l.node),d=c===0,h=c===u.length-1,p=(T,E)=>{s==null||s(e.tr.setSelection(TextSelection.between(e.doc.resolve(T),e.doc.resolve(E))).scrollIntoView())},m=T=>{const E=u[T],v=a.start+E.pos,_=v+E.node.nodeSize;p(v,_)},g=()=>m(c-1),y=()=>m(c),A=()=>m(c+1);return o==="prev"?(d?y():g(),!0):o==="next"?(h?y():A(),!0):!1}}const addRowAfter$1=(o,e)=>{const s=findParentTableRow(o.selection),a=findParentTableBody(o.selection);if(!s||!a)return!1;if(e){const l=[];s.node.forEach(u=>{l.push(u.type.createAndFill(u.attrs))}),e(o.tr.insert(s.pos+s.node.nodeSize,s.node.copy(Fragment.from(l))).scrollIntoView())}return!0},findChildIndex=(o,e)=>{let s=-1;return o.forEach((a,l,u)=>{a===e&&(s=u)}),s},addColumnAfter=(o,e)=>{const s=findParentTableCell(o.selection),a=findParentTableRow(o.selection),l=findParentTable$1(o.selection);if(!s||!a||!l)return!1;const u=findChildIndex(a.node,s.node);if(u<0)return!1;if(e){const c=findChildTableRows(l.node);let d=o.tr;for(const h of c){const m=findChildTableCells(h.node)[u];d=d.insert(d.mapping.map(l.pos+h.pos+m.pos+m.node.nodeSize+2),m.node.type.createAndFill(m.node.attrs))}e(d.scrollIntoView())}return!0};class TableDesc{constructor(e,s,a,l){oe(this,"rows");oe(this,"cols");oe(this,"rowsDesc");oe(this,"baseOffset");oe(this,"_rowRanges");oe(this,"_columnRanges");this.rows=e,this.cols=s,this.rowsDesc=a,this.baseOffset=l}static create(e){if(this.__cache.has(e))return this.__cache.get(e);if(!isTableNode(e))return null;const s=e.lastChild;if(!s||!isTableBodyNode(s))return null;const a=2,l=[];s.forEach((h,p)=>{l.push({node:h,offset:p,cells:[]})}),s.forEach((h,p,m)=>{h.forEach((g,y,A)=>{const T=l[m];let E=A;for(;T.cells[E];)E++;const v=T.cells[E]={type:"real",node:g,offset:y},_=[m,E];if(isNumber(g.attrs.colspan)){T.colspan=!0;const w=v.colspan=parseInt(g.attrs.colspan,10);for(let R=1;R<w;R++)T.cells[E+R]={type:"virtual",colspan:_}}if(isNumber(g.attrs.rowspan)){T.rowspan=!0;const w=v.rowspan=parseInt(g.attrs.rowspan,10);for(let R=1;R<w;R++){const k=v.colspan??1;for(let I=0;I<k;I++){const P=l[m+R].cells[E+I]={type:"virtual",rowspan:_};k>1&&(P.colspan=_)}}}})});const u=l.length,c=l[0].cells.length;for(let h=0;h<u;h++){if(!l[h]||l[h].cells.length!==c)return null;for(let p=0;p<c;p++)if(!l[h].cells[p])return null}const d=new this(l.length,l[0].cells.length,l,a);return this.__cache.set(e,d),d}bind(e){return new TableDescBinded(e,this)}rowHasVirtualCells(e){var s;return(s=this.rowsDesc[e])==null?void 0:s.cells.some(a=>a.type==="virtual")}columnHasVirtualCells(e){return this.rowsDesc.some(s=>{var a;return((a=s.cells[e])==null?void 0:a.type)==="virtual"})}isSafeColumn(e){return this.rowsDesc.every(s=>{var l;const a=s.cells[e];return a.type==="real"&&(!a.colspan||a.colspan===1)||a.type==="virtual"&&((l=a.rowspan)==null?void 0:l[1])===e})}isSafeRow(e){var s;return(s=this.rowsDesc[e])==null?void 0:s.cells.every(a=>{var l;return a.type==="real"&&(!a.rowspan||a.rowspan===1)||a.type==="virtual"&&((l=a.colspan)==null?void 0:l[0])===e})}getOffsetForRow(e){var s;return this.baseOffset+((s=this.rowsDesc[e])==null?void 0:s.offset)}getRelativePosForRow(e){const s=this.getOffsetForRow(e),a=s+this.rowsDesc[e].node.nodeSize;return{from:s,to:a}}getRelativePosForCell(e,s){var u;const a=(u=this.rowsDesc[e])==null?void 0:u.cells[s],l=this.getOffsetForRow(e);if((a==null?void 0:a.type)==="real"){const c=l+1+a.offset,d=c+a.node.nodeSize;return{type:"real",from:c,to:d}}if((a==null?void 0:a.type)==="virtual"){let c=s;for(;--c>=0;){const d=this.rowsDesc[e].cells[c];if(d.type==="real")return{type:"virtual",closestPos:l+1+d.offset+d.node.nodeSize}}return{type:"virtual",closestPos:l+1}}throw new Error(`Impossible to calculate offset for cell with position [${e},${s}]`)}getRelativePosForRowCells(e){const s=[];for(let a=0;a<this.cols;a++)s.push(this.getRelativePosForCell(e,a));return s}getRelativePosForColumn(e){const s=[];for(let a=0;a<this.rows;a++)s.push(this.getRelativePosForCell(a,e));return s}getCellNodeType(){const e=s=>s.type==="real";return this.rowsDesc[0].cells.find(e).node.type}getRowNodeType(){return this.rowsDesc[0].node.type}getCellInfo(e){let s=null;for(let a=0;a<this.rowsDesc.length;a++){const l=this.rowsDesc[a];for(let u=0;u<l.cells.length;u++){const c=l.cells[u];c.type==="real"&&c.node===e&&(s={node:c.node,offset:this.getOffsetForRow(a)+1+c.offset,row:a,column:u})}}return s}getRowRanges(){if(this._rowRanges)return this._rowRanges;const e=[];let s=null;for(let a=0;a<this.rowsDesc.length;a++){const l=this.rowsDesc[a],u=l.cells[0];if(u.type==="real"){let c=!0;for(const d of l.cells)d.type==="virtual"&&c&&(c=!d.rowspan);e.push(s={startIdx:a,endIdx:a,rowsCount:1,safeTopBoundary:c,safeBottomBoundary:!0})}else if(u.rowspan)s.endIdx=a,s.rowsCount++;else throw new Error(`First cell in row is virtual, but without rowspan [row=${a}]`)}for(let a=0;a<e.length;a++)e[a].safeTopBoundary||(e[a-1].safeBottomBoundary=!1);return this._rowRanges=e,e}getRowRangeByRowIdx(e){const s=this.getRowRangeIdxByRowIdx(e);return this.getRowRanges()[s]}getRowRangeIdxByRowIdx(e){return this.getRowRanges().findIndex(s=>s.startIdx<=e&&s.endIdx>=e)}getColumnRanges(){if(this._columnRanges)return this._columnRanges;const e=[];let s=null;const a=this.rowsDesc[0];for(let l=0;l<a.cells.length;l++){const u=a.cells[l];if(u.type==="real"){let c=!0;for(const d of this.rowsDesc){const h=d.cells[l];h.type==="virtual"&&h.colspan&&c&&(c=h.colspan[1]===l)}e.push(s={startIdx:l,endIdx:l,columnsCount:1,safeLeftBoundary:c,safeRightBoundary:!0})}else if(u.colspan)s.endIdx=l,s.columnsCount++;else throw new Error(`First cell in column is virtual, but without colspan [column=${l}]`)}for(let l=0;l<e.length;l++)e[l].safeLeftBoundary||(e[l-1].safeRightBoundary=!1);return this._columnRanges=e,e}getColumnRangeByColumnIdx(e){const s=this.getColumnRangeIdxByColumnIdx(e);return this.getColumnRanges()[s]}getColumnRangeIdxByColumnIdx(e){return this.getColumnRanges().findIndex(s=>s.startIdx<=e&&s.endIdx>=e)}}oe(TableDesc,"__cache",new WeakMap);class TableDescBinded{constructor(e,s){oe(this,"pos");oe(this,"base");this.pos=e,this.base=s}get bodyPos(){return this.pos+1}get rows(){return this.base.rows}get cols(){return this.base.cols}getRowIndexByPos(e){for(let s=0;s<this.rows;s++){const a=this.pos+this.base.getOffsetForRow(s);if(e===a)return s}return null}getPosForRow(e){const s=this.base.getRelativePosForRow(e);return s.from+=this.pos,s.to+=this.pos,s}getPosForCell(e,s){const a=this.base.getRelativePosForCell(e,s);if(a.type==="real")a.from+=this.pos,a.to+=this.pos;else if(a.type==="virtual")a.closestPos+=this.pos;else throw new Error(`Impossible to calculate positions for cell with position [${e},${s}]`);return a}getPosForRowCells(e){const s=[];for(let a=0;a<this.base.cols;a++)s.push(this.getPosForCell(e,a));return s}getPosForColumn(e){const s=[];for(let a=0;a<this.base.rows;a++)s.push(this.getPosForCell(a,e));return s}}const removeCurrentColumn=(o,e)=>{const s=findParentTableCell(o.selection),a=findParentTableRow(o.selection),l=findParentTable$1(o.selection);if(!s||!a||!l||a.node.childCount<2)return!1;const u=findChildIndex(a.node,s.node);if(u<0||u===0)return!1;if(e){let c=o.tr;const d=findChildTableRows(l.node);for(const h of d){const m=findChildTableCells(h.node)[u],g=l.start+h.pos+m.pos,y=g+m.node.nodeSize;c=c.delete(c.mapping.map(g),c.mapping.map(y))}e(c)}return!0},removeCurrentRow=(o,e)=>{const s=findParentTableRow(o.selection),a=findParentTableBody(o.selection);return!s||!a||findChildTableRows(a.node).length<2?!1:(e==null||e(removeParentNodeOfType(s.node.type)(o.tr)),!0)},schemaSpecs={[TableNode.Table]:{group:"block",content:`${TableNode.Head} ${TableNode.Body}`,isolating:!0,parseDOM:[{tag:"table"}],toDOM(){return["table",0]},selectable:!0,allowSelection:!0,tableRole:TableRole.Table,complex:"root"},[TableNode.Head]:{group:"block",content:TableNode.Row,isolating:!0,parseDOM:[{tag:"thead"}],toDOM(){return["thead",0]},tableRole:TableRole.Body,selectable:!1,allowSelection:!1,complex:"inner"},[TableNode.Body]:{group:"block",content:`${TableNode.Row}+`,isolating:!0,parseDOM:[{tag:"tbody"}],toDOM(){return["tbody",0]},tableRole:TableRole.Body,selectable:!1,allowSelection:!1,complex:"inner"},[TableNode.Row]:{group:"block",attrs:{[TableAttrs.Line]:{default:null}},content:`(${TableNode.HeaderCell}|${TableNode.DataCell})+`,isolating:!0,parseDOM:[{tag:"tr"}],toDOM(o){return["tr",o.attrs,0]},tableRole:TableRole.Row,selectable:!1,allowSelection:!1,complex:"inner"},[TableNode.HeaderCell]:cellTemplate("th"),[TableNode.DataCell]:cellTemplate("td")};function cellTemplate(o){return{attrs:{[TableAttrs.CellAlign]:{default:CellAlign.Left}},group:"block",content:"(text | inline)*",isolating:!0,parseDOM:[{tag:o,getAttrs(e){return e.hasAttribute(TableAttrs.CellAlign)?{[TableAttrs.CellAlign]:e.getAttribute(TableAttrs.CellAlign)}:null}}],toDOM({attrs:e}){return[o,{...e,style:`text-align:${e[TableAttrs.CellAlign]}`},0]},tableRole:TableRole.Cell,selectable:!1,allowSelection:!1,complex:"leaf"}}const serializerTokens$4={[TableNode.Table]:(o,e)=>{o.ensureNewLine(),o.write(`
`),o.setNoAutoBlank(),o.renderContent(e),o.unsetNoAutoBlank(),o.ensureNewLine(),o.closeBlock(e)},[TableNode.Head]:(o,e)=>{o.renderContent(e);for(const s of e.content.content[0].content.content)switch(s.attrs[TableAttrs.CellAlign]){case CellAlign.Left:o.write("|:---");break;case CellAlign.Center:o.write("|:---:");break;case CellAlign.Right:o.write("|---:");break;default:o.write("|---");break}o.write("|"),o.ensureNewLine(),o.closeBlock(e)},[TableNode.Body]:(o,e)=>{o.renderContent(e),o.closeBlock(e)},[TableNode.Row]:(o,e)=>{o.renderContent(e),o.closeBlock(e),o.write("|"),o.ensureNewLine()},[TableNode.HeaderCell]:(o,e)=>{o.write("|"),o.renderInline(e),o.closeBlock(e)},[TableNode.DataCell]:(o,e)=>{o.write("|"),o.renderInline(e),o.closeBlock(e)}},TableSpecs=o=>{o.addNode(TableNode.Table,()=>({spec:schemaSpecs[TableNode.Table],toMd:serializerTokens$4[TableNode.Table],fromMd:{tokenSpec:parserTokens$5[TableNode.Table]}})).addNode(TableNode.Head,()=>({spec:schemaSpecs[TableNode.Head],toMd:serializerTokens$4[TableNode.Head],fromMd:{tokenSpec:parserTokens$5[TableNode.Head]}})).addNode(TableNode.Body,()=>({spec:schemaSpecs[TableNode.Body],toMd:serializerTokens$4[TableNode.Body],fromMd:{tokenSpec:parserTokens$5[TableNode.Body]}})).addNode(TableNode.Row,()=>({spec:schemaSpecs[TableNode.Row],toMd:serializerTokens$4[TableNode.Row],fromMd:{tokenSpec:parserTokens$5[TableNode.Row]}})).addNode(TableNode.HeaderCell,()=>({spec:schemaSpecs[TableNode.HeaderCell],toMd:serializerTokens$4[TableNode.HeaderCell],fromMd:{tokenSpec:parserTokens$5[TableNode.HeaderCell]}})).addNode(TableNode.DataCell,()=>({spec:schemaSpecs[TableNode.DataCell],toMd:serializerTokens$4[TableNode.DataCell],fromMd:{tokenSpec:parserTokens$5[TableNode.DataCell]}}))},headingNodeName="heading",headingLevelAttr="level",headingLineNumberAttr="data-line",headingType=nodeTypeFactory(headingNodeName),DEFAULT_PLACEHOLDER$1=o=>"Heading "+o.attrs[headingLevelAttr],HeadingSpecs=(o,e)=>{o.addNode(headingNodeName,()=>{var s;return{spec:{attrs:{[headingLevelAttr]:{default:1},[headingLineNumberAttr]:{default:null}},content:"(text | inline)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{[headingLevelAttr]:1}},{tag:"h2",attrs:{[headingLevelAttr]:2}},{tag:"h3",attrs:{[headingLevelAttr]:3}},{tag:"h4",attrs:{[headingLevelAttr]:4}},{tag:"h5",attrs:{[headingLevelAttr]:5}},{tag:"h6",attrs:{[headingLevelAttr]:6}}],toDOM(a){const l=a.attrs[headingLineNumberAttr];return["h"+a.attrs[headingLevelAttr],l===null?{}:{[headingLineNumberAttr]:l},0]},placeholder:{content:((s=o.context.get("placeholder"))==null?void 0:s.heading)??e.headingPlaceholder??DEFAULT_PLACEHOLDER$1,alwaysVisible:!0}},fromMd:{tokenSpec:{name:headingNodeName,type:"block",getAttrs:a=>({[headingLevelAttr]:Number(a.tag.slice(1))})}},toMd:(a,l)=>{a.write(a.repeat("#",l.attrs[headingLevelAttr])+" "),a.renderInline(l),a.closeBlock(l)}}})},horizontalRuleNodeName="horizontal_rule",horizontalRuleMarkupAttr="markup",horizontalRuleType=nodeTypeFactory(horizontalRuleNodeName),HorizontalRuleSpecs=o=>{o.addNode(horizontalRuleNodeName,()=>({spec:{attrs:{[horizontalRuleMarkupAttr]:{default:"---"}},group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]},selectable:!0},fromMd:{tokenName:"hr",tokenSpec:{name:horizontalRuleNodeName,type:"node",getAttrs:e=>({[horizontalRuleMarkupAttr]:e.markup})}},toMd:(e,s)=>{e.write(s.attrs[horizontalRuleMarkupAttr]),e.closeBlock(s)}}))};function wrappingInputRule(o,e,s=null,a){return new InputRule(o,(l,u,c,d)=>{if(hasCodeMark(l,u,c,d)||!inDefaultTextblock(l,u,c))return null;const h=s instanceof Function?s(u):s,p=l.tr.delete(c,d),m=p.doc.resolve(c),g=m.blockRange(),y=g&&findWrapping(g,e,h);if(!y)return null;p.wrap(g,y);const A=p.doc.resolve(c-1).nodeBefore;return A&&A.type==e&&canJoin(p.doc,c-1)&&(!a||a(u,A))&&p.join(c-1),p})}function textblockTypeInputRule(o,e,s=null){return new InputRule(o,(a,l,u,c)=>{if(hasCodeMark(a,l,u,c))return null;const d=a.doc.resolve(u),h=s instanceof Function?s(l):s;return d.node(-1).canReplaceWith(d.index(-1),d.indexAfter(-1),e)?a.tr.delete(u,c).setBlockType(u,u,e,h):null})}function hasCodeMark(o,e,s,a){const l=codeType(o.schema);return!!(isMarkActive(o,l)||o.doc.rangeHasMark(s,a,l))}function inDefaultTextblock(o,e,s,a){return o.doc.resolve(s).parent.type===pType(o.schema)}function getMarksBetween(o,e,s){let a=[];return s.doc.nodesBetween(o,e,(l,u)=>{a=[...a,...l.marks.map(c=>({start:u,end:u+l.nodeSize,mark:c}))]}),a}function escapeRegex(o){return o.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function markInputRule(o,e,s){let a;if(o instanceof RegExp)a=o;else{const l=escapeRegex(o.open),u=escapeRegex(o.close),c=escapeRegex(o.ignoreBetween||"");a=new RegExp(`(?:${l})`+(c?`([^\\s${c}]+)`:"([\\S]+)")+`(?:${u})\\s$`)}return new InputRule(a,(l,u,c,d)=>{if(u.index>0){const A=u;if(A.input[A.index-1]!==" ")return null}if(hasCodeMark(l,u,c,d))return null;const h=s instanceof Function?s(u):s,{tr:p}=l,m=u.length-1;let g=d,y=c;if(u[m]){const A=c+u[0].indexOf(u[m-1]),T=A+u[m-1].length-1,E=A+u[m-1].lastIndexOf(u[m]),v=E+u[m].length;if(getMarksBetween(c,d,l).filter(R=>R.mark.type.excludes(e)).filter(R=>R.end>A).length)return null;v<T&&p.delete(v,T),E>A&&p.delete(A,E),y=A,g=y+u[m].length}return p.addMark(y,g,e.create(h)),p.removeStoredMark(e),p})}function nodeInputRule(o,e,s=0){return new InputRule(o,(a,l,u,c)=>{if(hasCodeMark(a,l,u,c))return null;const[d]=l,{tr:h}=a;return d&&h.replaceWith(u-1,c,isFunction(e)?e(d)??Fragment.empty:e??Fragment.empty).setSelection(new TextSelection(h.doc.resolve(u+s))),h})}function getChildBy(o,e){let s=null;return o.forEach((a,l,u)=>{const c={node:a,offset:l,index:u};e(c)&&(s=c)}),s}function getChildByIndex(o,e){return getChildBy(o,({index:s})=>s===e)}function getDescedantBy(o,e){let s=null;return o.descendants((a,l,u,c)=>{if(s)return!1;const d={node:a,pos:l,parent:u,index:c};return e(d)?(s=d,!1):!0}),s}function getDescedantByAttribute(o,e,s){const a=Array().concat(s);return getDescedantBy(o,l=>a.includes(l.node.attrs[e]))}const getPlaceholderContent=(o,e)=>{var a;const s=((a=o.type.spec.placeholder)==null?void 0:a.content)||"";return typeof s=="function"?s(o,e):s},isMac=()=>typeof navigator>"u"?!1:/Mac/.test(navigator.platform),removeNode=({node:o,pos:e,tr:s,dispatch:a})=>{a(s.delete(e,e+o.nodeSize))};function getElementsForSourceLine(o,e){const s=Math.floor(o);let a=e[0]||null;for(const l of e){if(l.line===s)return{previous:l,next:void 0};if(l.line>s)return{previous:a,next:l};a=l}return{previous:a}}function getElementBounds({el:o}){const e=o.querySelector(".line");if(e){const s=Math.max(1,e.offsetTop-o.offsetTop);return{top:o.offsetTop,height:s}}return{top:o.offsetTop,height:o.offsetHeight}}function scrollToRevealSourceLine(o,e,s){const a=s.current;if(!a)return;if(o<=0){a.scroll(a.scrollLeft,0);return}const{previous:l,next:u}=getElementsForSourceLine(o,e);if(!l)return;let c=0;const d=getElementBounds(l),h=d.top;if(u&&u.line!==l.line){const p=(o-l.line)/(u.line-l.line),m=h+d.height,g=u.el.offsetTop-m;c=m+p*g}else{const p=o-Math.floor(o);c=h+d.height*p}c=Math.abs(c)<1?Math.sign(c):c,a.scroll(a.scrollLeft,Math.max(1,c))}function getEditorLineNumberForOffset(o,e,s){if(!s.current)return null;const{previous:a,next:l}=getLineElementsAtPageOffset(o,e,s);if(a){if(a.line<0)return 0;const u=getElementBounds(a),c=o-u.top;if(l){const d=c/(getElementBounds(l).top-u.top);return a.line+d*(l.line-a.line)}else{const d=c/u.height;return a.line+d}}return null}function getLineElementsAtPageOffset(o,e,s){if(!s.current)return{previous:null};const l=o;let u=-1,c=e.length-1;for(;u+1<c;){const p=Math.floor((u+c)/2),m=getElementBounds(e[p]);m.top+m.height>=l?c=p:u=p}const d=e[c],h=getElementBounds(d);return c>=1&&h.top>l?{previous:e[u],next:d}:c>1&&c<e.length&&h.top+h.height>l?{previous:d,next:e[c+1]}:{previous:d}}async function batchUploadFiles(o,e,s,a){const l=[],u=[];return await Promise.allSettled(o.map(c=>e(c).then(d=>{const h={result:d,file:c};l.push(h),s==null||s(h)},d=>{const h={error:d,file:c};u.push(h)}).catch(console.error))),{success:l,failed:u}}function getProportionalSize({width:o,height:e,imgMaxHeight:s}){let a=o,l=e;const u=a/l;return l>s&&(l=s,a=Math.round(l*u)),{width:a,height:l}}var DataTransferType;(function(o){o.Text="text/plain",o.Html="text/html",o.Yfm="text/yfm",o.Rtf="text/rtf",o.UriList="text/uri-list",o.VSCodeData="vscode-editor-data",o.Files="Files"})(DataTransferType||(DataTransferType={}));function isIosSafariShare({types:o}){return o.includes(DataTransferType.UriList)&&!o.includes(DataTransferType.Text)&&!o.includes(DataTransferType.Html)}function isFilesOnly$2({types:o}){return o.length===1&&o[0]===DataTransferType.Files}function isFilesFromHtml$2({types:o}){return o.length===2&&o.includes(DataTransferType.Files)&&o.includes(DataTransferType.Html)}function isImageFile$2(o){return o.type.startsWith("image/")}function extractTextContentFromHtml(o){const e=document.createElement("div");return e.innerHTML=o,e.replaceChildren(...Array.from(e.children).filter(s=>s.nodeName!=="META")),Array.from(e.children).every(({nodeName:s,classList:a,childNodes:l})=>(s==="DIV"||s==="SPAN")&&!a.length&&l.length===1&&(l[0].nodeName==="#text"||l[0].nodeName==="BR"))?Array.from(e.children).reduce((s,a)=>s+a.textContent+`
`,""):null}function findNotEmptyContentPosses(o){let e=-1,s=-1,a=-1,l=-1;return o.forEach((u,c)=>{if(e===-1&&(e=c),s=c+u.nodeSize,!isEmptyString(u))if(isListNode(u)||isListItemNode(u)){const[d,h]=findNotEmptyContentPosses(u.content);a===-1&&d!==-1&&(a=c+d+1),h!==-1&&(l=c+h+1)}else a===-1&&(a=c),l=c+u.nodeSize}),[a,l,e,s]}function trimContent(o,e){const[s,a,l,u]=findNotEmptyContentPosses(o);return s===l&&a===u?o:s===-1&&a===-1?e?e():Fragment.empty:o.cut(s,a)}const clipboardUtils=Object.freeze(Object.defineProperty({__proto__:null,get DataTransferType(){return DataTransferType},extractTextContentFromHtml,findNotEmptyContentPosses,isFilesFromHtml:isFilesFromHtml$2,isFilesOnly:isFilesOnly$2,isImageFile:isImageFile$2,isIosSafariShare,trimContent},Symbol.toStringTag,{value:"Module"})),isCodeMark=o=>o.type.spec.code;function isInsideCode(o){return isInsideBlockCode(o)?"block":isInsideInlineCode(o)?"inline":!1}function isInsideBlockCode(o){return!!o.selection.$from.parent.type.spec.code}function isInsideInlineCode(o){const e=o.selection.$from.marks().some(isCodeMark);return o.selection.empty?e||(o.storedMarks??[]).some(isCodeMark):e}const handlePasteIntoCodePlugin=()=>new Plugin({props:{handleDOMEvents:{paste(o,e){if(!e.clipboardData)return!1;const{clipboardData:s}=e,a=isInsideCode(o.state);if(!a)return!1;let l,u;isIosSafariShare(s)?(u=DataTransferType.UriList,l=s.getData(DataTransferType.UriList)):isFilesOnly$2(s)?(u=DataTransferType.Files,l=Array.from(s.files).map(p=>p.name).join(" ")):(u=DataTransferType.Text,l=dedent(s.getData(DataTransferType.Text))),a==="inline"&&(l=l.replaceAll(`
`,""));const{state:c,dispatch:d}=o;getLoggerFromState(c).event({codeType:a,dataFormat:u,empty:!l,domEvent:"paste",event:"paste-into-code",dataTypes:s.types}),e.preventDefault();const{tr:h}=c;return l?h.replaceSelectionWith(c.schema.text(l),!0):h.replaceWith(h.selection.from,h.selection.to,Fragment.empty),d(h.scrollIntoView()),!0}}}});function trimTextSelection(o){const{$from:e,$to:s}=o,a=trimTextSelectionOnEdge(e,"forward"),l=trimTextSelectionOnEdge(s,"backward");return e.pos===a&&s.pos===l?o:a>l?TextSelection.create(e.doc,l,l):TextSelection.create(e.doc,a,l)}function trimTextSelectionOnEdge(o,e){let s=o.depth,a=!0;{const c=e==="forward"?o.end():o.start();a=o.pos===c}if(a&&!o.parent.isTextblock)for(;s>0;){const c=o.node(s),d=o.node(s-1);if(c.isTextblock)break;const h=e==="forward"?d.lastChild:d.firstChild;if(c!==h){a=!1;break}s--}if(!a||s<1||!o.node(s).isTextblock)return o.pos;for(;s>0;){const c=o.node(s),d=o.node(s-1),h=e==="forward"?d.lastChild:d.firstChild;if(c!==h)break;s--}const l=e==="forward"?o.after(s):o.before(s),u=TextSelection.findFrom(o.doc.resolve(l),e==="forward"?1:-1);return(u==null?void 0:u.anchor)??o.pos}const clipboard=({logger:o,textParser:e,mdParser:s,serializer:a,pasteFileHandler:l})=>new Plugin({props:{handleDOMEvents:{copy(u,c){if(!c.clipboardData)return!1;const d=serializeSelected(u,a);return d?(c.preventDefault(),setClipboardData(c.clipboardData,d),!0):!1},cut(u,c){if(!c.clipboardData)return!1;const d=serializeSelected(u,a);return d?(c.preventDefault(),setClipboardData(c.clipboardData,d),u.dispatch(u.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut")),!0):!1},paste(u,c){if(!c.clipboardData)return!1;const d=o.nested({domEvent:"paste",dataTypes:c.clipboardData.types});let h,p=!1;if(isIosSafariShare(c.clipboardData)&&(h=c.clipboardData.getData(DataTransferType.UriList))){const m=u.state.schema;return u.dispatch(trackTransactionMetrics(u.state.tr.replaceSelection(new Slice(Fragment.from(pType(m).create(null,m.text(h))),1,1)),"paste",{clipboardDataFormat:DataTransferType.UriList})),d.event({event:"paste-uri-list"}),p=!0,c.preventDefault(),!0}if(!c.clipboardData.types.includes(DataTransferType.Yfm)&&(h=c.clipboardData.getData(DataTransferType.Html))){const m=extractTextContentFromHtml(h);if(m){const g=tryCatch(()=>e.parse(m));if(g.success){const y=g.result,A=getSliceFromMarkupFragment(y.content);u.dispatch(trackTransactionMetrics(u.state.tr.replaceSelection(A),"paste",{clipboardDataFormat:DataTransferType.Html})),d.event({event:"paste-parsed-html"}),p=!0}else globalLogger.error(g.error),d.error(g.error,{event:"parse-html"}),console.error(g.error)}else return!1}if(!p&&((h=c.clipboardData.getData(DataTransferType.Yfm))||(h=c.clipboardData.getData(DataTransferType.Text)))){let m,g;c.clipboardData.types.includes(DataTransferType.Yfm)?(m=s,g=DataTransferType.Yfm):(m=e,g=DataTransferType.Text);const y=isInsideCode(u.state);if(y){const A=u.state.schema,T=c.clipboardData.getData(DataTransferType.Text);d.event({event:"paste-text-to-code",codeType:y}),u.dispatch(trackTransactionMetrics(u.state.tr.replaceSelectionWith(A.text(y==="inline"?T.trim():T)),"paste",{clipboardDataFormat:DataTransferType.Text,code:y})),p=!0}else{const A=tryCatch(()=>m.parse(h));if(A.success){const T=A.result,E=getSliceFromMarkupFragment(T.content);d.event({event:"paste-parsed-content",dataFormat:g}),u.dispatch(trackTransactionMetrics(u.state.tr.replaceSelection(E),"paste",{clipboardDataFormat:g})),p=!0}else globalLogger.error(A.error),d.error(A.error,{event:"paste",dataFormat:g}),console.error(A.error)}}if(c.clipboardData.files.length&&l){d.event({event:"paste-files"});for(const m of Array.from(c.clipboardData.files))l(m);p=!0}return p?(c.preventDefault(),!0):!1}}}});function getSliceFromMarkupFragment(o){var a;let e=0,s=0;return(a=o.firstChild)!=null&&a.isTextblock&&(e=1,o.childCount===1&&(s=1)),new Slice(o,e,s)}function serializeSelected(o,e){const s=o.state.selection;if(s.empty)return null;if(getSharedDepthNode(s).type.spec.code){const c=s.content().content;return{text:c.textBetween(0,c.size)}}const a=e.serialize(getCopyContent(o.state).content),{dom:l,text:u}=o.serializeForClipboard(s.content());return{markup:a,text:u,html:l.innerHTML}}function setClipboardData(o,e){o.clearData(),typeof e.markup=="string"&&o.setData(DataTransferType.Yfm,e.markup),typeof e.html=="string"&&o.setData(DataTransferType.Html,e.html),o.setData(DataTransferType.Text,e.text)}function getCopyContent(o){var a;let e=o.selection;if(isWholeSelection(e))return new Slice(o.doc.content,0,0);if(isNodeSelection(e)){const{node:l}=e;if(l.type.spec.complex){if(l.isTextblock)return new Slice(Fragment.from(o.schema.node(BaseNode$1.Paragraph,{},l.content)),1,1);{const{complex:u}=l.type.spec;if(u==="root")return new Slice(Fragment.from(l),1,1);if(u==="leaf")return new Slice(Fragment.from(l.content),1,1)}}else return new Slice(Fragment.from(l),1,1)}if(isTextSelection(e)&&(e=trimTextSelection(e)),isTextSelectionWithinSameTextBlock(e))return new Slice(createFragmentFromInlineSelection(o,e),0,0);let s=getSelectionContent(e);if((a=s.content.firstChild)!=null&&a.isTextblock&&s.content.firstChild.type.name!==BaseNode$1.Paragraph){let l=!0;const{firstChild:u}=s.content;u.eq(e.$from.parent)&&(l=!1),l&&(s=new Slice(s.content.replaceChild(0,o.schema.node(BaseNode$1.Paragraph,{},u.content)),s.openStart,s.openStart))}else{const l=()=>Fragment.from(pType(o.schema).createAndFill()),u=trimContent(s.content,l);u!==s.content&&(s=new Slice(u,1,1))}return s}function isTextSelectionWithinSameTextBlock(o){return isTextSelection(o)&&o.$from.sameParent(o.$to)&&o.$from.parent.isTextblock}function createFragmentFromInlineSelection(o,e){const s=o.doc.slice(e.from,e.to),a=!!e.$from.parent.type.spec.complex,l=e.$from.parent.content.eq(s.content);return a||!l?Fragment.from(o.schema.node(BaseNode$1.Paragraph,{},s.content)):Fragment.from(e.$from.parent.copy(s.content))}function getSelectionContent(o){const s=getSharedDepthNode(o).type.spec.complex,a=s&&s!=="leaf";return o.$from.doc.slice(o.$from.pos,o.to,a)}function getSharedDepthNode({$from:o,$to:e}){return o.node(o.sharedDepth(e.pos))}const Clipboard=(o,e)=>{o.addPlugin(s=>clipboard({logger:o.logger.nested({module:"clipboard",plugin:"clipboard"}),mdParser:s.markupParser,textParser:s.textParser,serializer:s.serializer,pasteFileHandler:e.pasteFileHandler}),o.Priority.VeryLow),o.addPlugin(handlePasteIntoCodePlugin,o.Priority.Highest)},bAction="bold",Bold=(o,e)=>{if(o.use(BoldSpecs),o.addAction(bAction,({schema:s})=>createToggleMarkAction(boldType(s))),e!=null&&e.boldKey){const{boldKey:s}=e;o.addKeymap(({schema:a})=>({[s]:withLogAction("bold",toggleMark(boldType(a)))}))}o.addInputRules(({schema:s})=>({rules:[markInputRule({open:"**",close:"**",ignoreBetween:"*"},boldType(s)),markInputRule({open:"__",close:"__",ignoreBetween:"_"},boldType(s))]}))},DEFAULT_ID="codemark",MAX_MATCH=100,pluginKey$7=new PluginKey(DEFAULT_ID);function getMarkType(o,e){var s,a;return"schema"in o?(s=e==null?void 0:e.markType)!==null&&s!==void 0?s:o.schema.marks.code:(a=e==null?void 0:e.markType)!==null&&a!==void 0?a:o.state.schema.marks.code}function safeResolve(o,e){return o.resolve(Math.min(Math.max(1,e),o.nodeSize-2))}function stopMatch(o,e,s,a){var l;const u=o.isInSet((l=e.state.storedMarks)!==null&&l!==void 0?l:e.state.doc.resolve(s).marks()),c=e.state.doc.rangeHasMark(s,a,o);return!!(u||c)}const markBefore={match:/`((?:[^`\w]|[\w])+)`$/,handler:(o,e,s,a,l,u,c)=>{if(stopMatch(o,e,l,u))return!1;const d=a[1],h=o.create(),p=l+d.length,m=e.state.tr.delete(l,u).insertText(d).addMark(l,p,h),g=m.setSelection(TextSelection.create(m.doc,p)).removeStoredMark(o),y=g.setMeta(c.input,{transform:g,from:l,to:u,text:`\`${d}${s}`});return e.dispatch(y),!0}},markAfter={match:/^`((?:[^`\w]|[\w])+)`/,handler:(o,e,s,a,l,u,c)=>{if(stopMatch(o,e,l,u))return!1;const d=o.create(),h=a[1],p=l,m=e.state.tr.delete(l,u).insertText(h).addMark(l,l+h.length,d),g=m.setSelection(TextSelection.create(m.doc,p)).addStoredMark(o.create()),y=g.setMeta(c.input,{transform:g,from:l,to:u,text:`\`${h}${s}`});return e.dispatch(y),!0}};function run(o,e,s,a,l,u){if(e.composing)return!1;const{state:c}=e,d=c.doc.resolve(s);if(d.parent.type.spec.code)return!1;const h="",p=d.parent.textBetween(Math.max(0,d.parentOffset-MAX_MATCH),d.parentOffset,void 0,h)+l,m=l+d.parent.textBetween(d.parentOffset,Math.min(d.parent.nodeSize-2,d.parentOffset+MAX_MATCH),void 0,h),g=markBefore.match.exec(p),y=markAfter.match.exec(m);if(g){const A=markBefore.handler(o,e,l,g,s-g[0].length+l.length,a,u);if(A)return A}return y?markAfter.handler(o,e,l,y,s,a+y[0].length-l.length,u):!1}function createInputRule(o,e){const s=new Plugin({isInputRules:!0,state:{init:()=>null,apply(a,l){const u=a.getMeta(s);return u||(a.selectionSet||a.docChanged?null:l)}},props:{handleTextInput(a,l,u,c){const d=getMarkType(a,e);return run(d,a,l,u,c,{input:s,cursor:o})}}});return s}function stepOutsideNextTrAndPass(o,e,s="next"){const a={action:s};return o.dispatch(o.state.tr.setMeta(e,a)),!1}function onBacktick(o,e,s,a){if(o.state.selection.empty||s.metaKey||s.shiftKey||s.altKey||s.ctrlKey)return!1;const{from:l,to:u}=o.state.selection;if(u-l>=MAX_MATCH||o.state.doc.rangeHasMark(l,u,a))return!1;const c=o.state.tr.addMark(l,u,a.create()),d=c.setSelection(TextSelection.create(c.doc,u)).removeStoredMark(a);return o.dispatch(d),!0}function onArrowRightInside(o,e,s,a){var l;if(s.metaKey)return stepOutsideNextTrAndPass(o,e);if(s.shiftKey||s.altKey||s.ctrlKey)return!1;const{selection:u,doc:c}=o.state;if(!u.empty)return!1;const d=e.getState(o.state),h=u.$from,p=!!a.isInSet(h.marks()),m=!!a.isInSet((l=h.marksAcross(safeResolve(c,u.from+1)))!==null&&l!==void 0?l:[]);return h.pos===o.state.doc.nodeSize-3&&h.parentOffset===h.parent.nodeSize-2&&(d!=null&&d.active)?(o.dispatch(o.state.tr.removeStoredMark(a)),!0):p===m&&h.parentOffset!==0?!1:p&&(!(d!=null&&d.active)||d.side===-1)&&h.parentOffset!==0?(o.dispatch(o.state.tr.removeStoredMark(a)),!0):m&&(d==null?void 0:d.side)===-1?(o.dispatch(o.state.tr.addStoredMark(a.create())),!0):!1}function onArrowRight(o,e,s,a){if(onArrowRightInside(o,e,s,a))return!0;const{selection:u}=o.state,c=u.$from;return u.empty&&c.parentOffset===c.parent.nodeSize-2?stepOutsideNextTrAndPass(o,e):!1}function onArrowLeftInside(o,e,s,a){var l;if(s.metaKey)return stepOutsideNextTrAndPass(o,e);if(s.shiftKey||s.altKey||s.ctrlKey)return!1;const{selection:u,doc:c}=o.state,d=e.getState(o.state),h=!!a.isInSet(u.$from.marks()),p=!!a.isInSet((l=safeResolve(c,u.empty?u.from-1:u.from+1).marks())!==null&&l!==void 0?l:[]);if(h&&(d==null?void 0:d.side)===-1&&u.$from.parentOffset===0)return!1;if((d==null?void 0:d.side)===0&&u.$from.parentOffset===0)return o.dispatch(o.state.tr.removeStoredMark(a)),!0;if(h&&p&&(d==null?void 0:d.side)===0)return o.dispatch(o.state.tr.addStoredMark(a.create())),!0;if(h&&!p&&(d!=null&&d.active)&&u.$from.parentOffset===0||!h&&(d!=null&&d.active)&&(d==null?void 0:d.side)===0)return o.dispatch(o.state.tr.removeStoredMark(a)),!0;if(h===p)return!1;if(p||!u.empty&&h){const m=u.empty?u.from-1:u.from,g=o.state.tr.setSelection(TextSelection.create(c,m));return!u.empty&&p?o.dispatch(g.addStoredMark(a.create())):o.dispatch(g.removeStoredMark(a)),!0}if((p||!u.empty&&h)&&!(d!=null&&d.active)){const m=u.empty?u.from-1:u.from;return o.dispatch(o.state.tr.setSelection(TextSelection.create(c,m)).removeStoredMark(a)),!0}if(h&&!(d!=null&&d.active)&&u.$from.parentOffset>0)return o.dispatch(o.state.tr.setSelection(TextSelection.create(c,u.from-1)).addStoredMark(a.create())),!0;if(h&&!p&&(d!=null&&d.active)&&d.side!==-1)return o.dispatch(o.state.tr.addStoredMark(a.create())),!0;if(h&&!p&&(d!=null&&d.active)){const m=u.from-1;return o.dispatch(o.state.tr.setSelection(TextSelection.create(c,m)).addStoredMark(a.create())),!0}return!1}function onArrowLeft(o,e,s,a){if(onArrowLeftInside(o,e,s,a))return!0;const{selection:u}=o.state,c=u.$from,d=e.getState(o.state);return c.pos===1&&c.parentOffset===0&&(d==null?void 0:d.side)===-1?!0:u.empty&&c.parentOffset===0?stepOutsideNextTrAndPass(o,e):!1}function onBackspace(o,e,s,a){if(s.metaKey||s.shiftKey||s.altKey||s.ctrlKey)return!1;const{selection:l,doc:u}=o.state,c=safeResolve(u,l.from-1),d=!!a.isInSet(c.marks()),h=c.parentOffset===0,p=!!a.isInSet(safeResolve(u,l.to+1).marks());if((!d||h)&&!p)return stepOutsideNextTrAndPass(o,e);const m=e.getState(o.state);if(l.empty&&(m==null?void 0:m.side)===-1){const g=o.state.tr.delete(l.from-1,l.from);return o.dispatch(g),!0}return!1}function onDelete(o,e,s,a){if(s.metaKey||s.shiftKey||s.altKey||s.ctrlKey)return!1;const{selection:l,doc:u}=o.state,c=!!a.isInSet(l.$from.marks()),d=l.$from.parentOffset===0,h=!!a.isInSet(safeResolve(u,l.to+2).marks());return(!c||d)&&!h?stepOutsideNextTrAndPass(o,e):!1}function stepOutside(o,e){var s,a;if(!o)return null;const{selection:l,doc:u}=o;if(!l.empty)return null;const c=!!e.isInSet((s=o.storedMarks)!==null&&s!==void 0?s:[]),d=!!e.isInSet(l.$from.marks()),h=!!e.isInSet((a=safeResolve(u,l.from+1).marks())!==null&&a!==void 0?a:[]),p=l.$from.parentOffset===0;return d!==h||!d&&c!==d||d&&p?o.tr.removeStoredMark(e):null}function toDom(){const o=document.createElement("span");return o.classList.add("fake-cursor"),o}function getDecorationPlugin(o){const e=new Plugin({key:pluginKey$7,appendTransaction:(s,a,l)=>{var u;const c=e.getState(a),d=(u=s[0])===null||u===void 0?void 0:u.getMeta(e);return c!=null&&c.next||(d==null?void 0:d.action)==="click"?stepOutside(l,getMarkType(l,o)):null},state:{init:()=>null,apply(s,a,l,u){var c;const d=s.getMeta(e);if((d==null?void 0:d.action)==="next")return{next:!0};const h=getMarkType(u,o),p=h.isInSet((c=u.storedMarks)!==null&&c!==void 0?c:u.doc.resolve(s.selection.from).marks()),m=h.isInSet(u.doc.resolve(s.selection.from).marks()),g=h.isInSet(safeResolve(u.doc,s.selection.from+1).marks()),y=s.selection.$from.parentOffset===0;return s.selection.empty?!p&&g&&(!m||y)?{active:!0,side:-1}:p&&(!m||y)?{active:!0,side:0}:!p&&m&&!g?{active:!0,side:0}:p&&m&&!g?{active:!0,side:-1}:null:null}},props:{attributes:s=>{var a;const{active:l=!1}=(a=e.getState(s))!==null&&a!==void 0?a:{};return Object.assign({},l?{class:"no-cursor"}:{})},decorations:s=>{var a;const{active:l,side:u}=(a=e.getState(s))!==null&&a!==void 0?a:{};if(!l)return DecorationSet.empty;const c=Decoration$1.widget(s.selection.from,toDom,{side:u});return DecorationSet.create(s.doc,[c])},handleKeyDown(s,a){switch(a.key){case"`":return onBacktick(s,e,a,getMarkType(s,o));case"ArrowRight":return onArrowRight(s,e,a,getMarkType(s,o));case"ArrowLeft":return onArrowLeft(s,e,a,getMarkType(s,o));case"Backspace":return onBackspace(s,e,a,getMarkType(s,o));case"Delete":return onDelete(s,e,a,getMarkType(s,o));case"ArrowUp":case"ArrowDown":case"Home":case"End":return stepOutsideNextTrAndPass(s,e);case"e":case"a":return a.ctrlKey?stepOutsideNextTrAndPass(s,e):!1;default:return!1}},handleClick(s){return stepOutsideNextTrAndPass(s,e,"click")}}});return e}function codemark(o){const e=getDecorationPlugin(o),s=createInputRule(e,o);return[e,s]}const codeAction="code",Code=(o,e)=>{if(o.use(CodeSpecs),o.addAction(codeAction,({schema:s})=>createToggleMarkAction(codeType(s))),e!=null&&e.codeKey){const{codeKey:s}=e;o.addKeymap(({schema:a})=>({[s]:withLogAction("code_inline",toggleMark(codeType(a)))}))}o.addPlugin(({schema:s})=>codemark({markType:codeType(s)})),o.addPlugin(()=>new Plugin({props:{handleTextInput:(s,a,l,u)=>{var p,m,g,y;const{selection:{$anchor:c},tr:d,schema:h}=s.state;return(m=(p=c.nodeBefore)==null?void 0:p.text)!=null&&m.endsWith("`")&&((y=(g=c.nodeAfter)==null?void 0:g.text)!=null&&y.startsWith("`"))?(s.dispatch(d.replaceRangeWith(a-1,l+1,s.state.schema.text(u,[codeType(h).create()]))),!0):!1}}}))},removeLink=(o,e)=>{const s=linkType(o.schema);return isMarkActive(o,s)?toggleMark(s)(o,e):!1},isString=o=>typeof o=="string",notEmpty=o=>o.length>0,normalizeUrlFactory=({markupParser:o})=>e=>isString(e)&&(e=e.trim(),notEmpty(e)&&(e=o.normalizeLink(e),o.validateLink(e)))?{url:e,text:o.normalizeLinkText(e)}:null;function linkCommand(o,e){const s=normalizeUrlFactory(e);return{isActive(a){return!!isMarkActive(a,o)},isEnable(a){return toggleMark(o)(a)},run(a,l,u,c){if(removeLink(a,l)||!c)return;const{text:d,title:h}=c,p=s(c.href);if(p){if(d&&a.selection.empty){l(a.tr.replaceSelectionWith(a.schema.text(d,[o.create({[LinkAttr.Href]:p.url,[LinkAttr.Title]:h})]),!1));return}toggleMark(o,{[LinkAttr.Href]:p.url,[LinkAttr.Title]:h})(a,l)}},meta(a){const{selection:l}=a;return{hasSelection:!l.empty&&l instanceof TextSelection,text(){const u=l.content().content;return u.textBetween(0,u.size)}}}}}var plugin$3={},_const$1={},hasRequired_const$1;function require_const$1(){if(hasRequired_const$1)return _const$1;hasRequired_const$1=1,Object.defineProperty(_const$1,"__esModule",{value:!0}),_const$1.ImsizeAttr=void 0;var o;return(function(e){e.Src="src",e.Alt="alt",e.Title="title",e.Width="width",e.Height="height",e.Style="style",e.Inline="inline"})(o||(_const$1.ImsizeAttr=o={})),_const$1}var helpers={},hasRequiredHelpers;function requireHelpers(){if(hasRequiredHelpers)return helpers;hasRequiredHelpers=1,Object.defineProperty(helpers,"__esModule",{value:!0}),helpers.parseImageSize=o;function o(s,a,l){const u={ok:!1,pos:0,width:"",height:""};if(a>=l)return u;let c=s.charCodeAt(a);if(c!==61||(a++,c=s.charCodeAt(a),c!==120&&(c<48||c>57)))return u;const d=e(s,a,l);if(a=d.pos,c=s.charCodeAt(a),c!==120)return u;a++;const h=e(s,a,l);return a=h.pos,u.width=d.value,u.height=h.value,u.pos=a,u.ok=!0,u}function e(s,a,l){let u;const c=a,d={pos:a,ok:!1,value:""};for(u=s.charCodeAt(a);a<l&&u>=48&&u<=57||u===37;)u=s.charCodeAt(++a);return d.ok=!0,d.pos=a,d.value=s.slice(c,a),d}return helpers}var hasRequiredPlugin$3;function requirePlugin$3(){if(hasRequiredPlugin$3)return plugin$3;hasRequiredPlugin$3=1,Object.defineProperty(plugin$3,"__esModule",{value:!0}),plugin$3.imageWithSize=void 0;const o=require_const$1(),e=requireHelpers(),s=(l,u)=>(c,d)=>{var h,p;if(c.src.charCodeAt(c.pos)!==33||c.src.charCodeAt(c.pos+1)!==91)return!1;const m=c.pos+2,g=l.helpers.parseLinkLabel(c,c.pos+1,!1);if(g<0)return!1;let y="",A="",T="",E="";const v=c.pos,_=c.posMax;let w=g+1;if(w<_&&c.src.charCodeAt(w)===40){for(w++;w<_;w++){const P=c.src.charCodeAt(w);if(P!==32&&P!==10)break}if(w>=_)return!1;let R=w;const k=l.helpers.parseLinkDestination(c.src,w,c.posMax);for(k.ok&&(y=c.md.normalizeLink(k.str),c.md.validateLink(y)?w=k.pos:y=""),R=w;w<_;w++){const P=c.src.charCodeAt(w);if(P!==32&&P!==10)break}const I=l.helpers.parseLinkTitle(c.src,w,c.posMax);if(w<_&&R!==w&&I.ok)for(A=I.str,w=I.pos;w<_;w++){const P=c.src.charCodeAt(w);if(P!==32&&P!==10)break}else A="";if(w-1>=0&&c.src.charCodeAt(w-1)===32){const N=(0,e.parseImageSize)(c.src,w,c.posMax);if(N.ok)for(T=N.width,E=N.height,w=N.pos;w<_;w++){const L=c.src.charCodeAt(w);if(L!==32&&L!==10)break}}if(w>=_||c.src.charCodeAt(w)!==41)return c.pos=v,!1;w++}else{if(typeof c.env.references>"u")return!1;for(;w<_;w++){const I=c.src.charCodeAt(w);if(I!==32&&I!==10)break}let R="";if(w<_&&c.src.charCodeAt(w)===91){const I=w+1;w=l.helpers.parseLinkLabel(c,w),w>=0?R=c.src.slice(I,w++):w=g+1}else w=g+1;R||(R=c.src.slice(m,g));const k=c.env.references[l.utils.normalizeReference(R)];if(!k)return c.pos=v,!1;y=k.href,A=k.title}if(!d){c.pos=m,c.posMax=g;const R=[],k=new c.md.inline.State(c.src.slice(m,g),c.md,c.env,R);k.md.inline.tokenize(k);const I=c.push("image","img",0);if(I.children=R,I.attrs=[[o.ImsizeAttr.Src,y],[o.ImsizeAttr.Alt,""]],c.src.slice(Math.max(0,w),_).includes("{")){const P=a(c.src.slice(Math.max(0,w)+1,_-1).replace(/\{?(.*?)\}.*/,"$1"));P.width!==""&&(T=P.width),P.height!==""&&(E=P.height),P.inline!==""&&I.attrs.push([o.ImsizeAttr.Inline,P.inline])}if(A&&I.attrs.push([o.ImsizeAttr.Title,A]),T!==""&&I.attrs.push([o.ImsizeAttr.Width,T]),E!==""&&I.attrs.push([o.ImsizeAttr.Height,E]),u!=null&&u.enableInlineStyling){let P="";const N=T.includes("%"),L=E.includes("%");if(T!==""){const Q=N?T:`${T}px`;P+=`width: ${Q};`}if(E!=="")if(T!==""&&!L&&!N)P+=`aspect-ratio: ${T} / ${E};height: auto;`,(h=(p=c.env).additionalOptionsCssWhiteList)!==null&&h!==void 0||(p.additionalOptionsCssWhiteList={}),c.env.additionalOptionsCssWhiteList["aspect-ratio"]=!0;else{const Q=L?E:`${E}px`;P+=`height: ${Q};`}P&&I.attrs.push([o.ImsizeAttr.Style,P])}}return c.pos=w,c.posMax=_,!0};plugin$3.imageWithSize=s;function a(l){const u=/(\w+)=(?:'([^']*)'|"([^"]*)"|(\S+))/g,c={width:"",height:"",inline:""};let d;for(;(d=u.exec(l))!==null;){const h=d[1],p=d[2]||d[3]||d[4];switch(h){case"width":case"height":case"inline":c[h]=p;break}}return c}return plugin$3}var imsize_1,hasRequiredImsize;function requireImsize(){if(hasRequiredImsize)return imsize_1;hasRequiredImsize=1;const o=requirePlugin$3();return imsize_1=(s,a)=>{s.inline.ruler.before("emphasis","image",(0,o.imageWithSize)(s,a))},imsize_1}var imsizeExports=requireImsize();const imsize=getDefaultExportFromCjs$1(imsizeExports),addImageAction="addImage";var _constExports$1=require_const$1();const ImgSizeAttr={Alt:_constExports$1.ImsizeAttr.Alt,Src:_constExports$1.ImsizeAttr.Src,Title:_constExports$1.ImsizeAttr.Title,Width:_constExports$1.ImsizeAttr.Width,Height:_constExports$1.ImsizeAttr.Height,Loading:"loading",Id:"id"},ImgSizeSpecs=(o,e)=>{var a;const s=(a=o.context.get("placeholder"))==null?void 0:a.imgSize;o.configureMd(l=>l.use(imsize,{log:logExports.log,enableInlineStyling:!0})),o.addNode(imageNodeName,()=>({spec:{inline:!0,attrs:{[ImgSizeAttr.Src]:{},[ImgSizeAttr.Alt]:{default:null},[ImgSizeAttr.Title]:{default:null},[ImgSizeAttr.Height]:{default:null},[ImgSizeAttr.Width]:{default:null},[ImgSizeAttr.Loading]:{default:null},[ImgSizeAttr.Id]:{default:null}},placeholder:s?{content:s}:e.placeholder,group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(l){const u=l.getAttribute(ImgSizeAttr.Height),c=l.getAttribute(ImgSizeAttr.Width);return{[ImgSizeAttr.Src]:l.getAttribute(ImgSizeAttr.Src),[ImgSizeAttr.Alt]:l.getAttribute(ImgSizeAttr.Alt),[ImgSizeAttr.Title]:l.getAttribute(ImgSizeAttr.Title),[ImgSizeAttr.Loading]:l.getAttribute(ImgSizeAttr.Loading),[ImgSizeAttr.Height]:isNumber(u)?u:null,[ImgSizeAttr.Width]:isNumber(c)?u:null,[ImgSizeAttr.Id]:l.getAttribute(ImgSizeAttr.Id)}}}],toDOM(l){return["img",l.attrs]}},fromMd:{tokenSpec:{name:imageNodeName,type:"node",getAttrs:l=>{var u,c;return{[ImgSizeAttr.Src]:l.attrGet(ImgSizeAttr.Src),[ImgSizeAttr.Title]:l.attrGet(ImgSizeAttr.Title),[ImgSizeAttr.Height]:l.attrGet(ImgSizeAttr.Height),[ImgSizeAttr.Width]:l.attrGet(ImgSizeAttr.Width),[ImgSizeAttr.Loading]:l.attrGet(ImgSizeAttr.Loading),[ImgSizeAttr.Alt]:((c=(u=l.children)==null?void 0:u[0])==null?void 0:c.content)||null,[ImgSizeAttr.Id]:l.attrGet(ImgSizeAttr.Id)}}}},toMd:(l,u)=>{const c=u.attrs;let d="![";c.alt&&(d+=l.esc(c.alt)),d+="](",c.src&&(d+=l.esc(c.src)),c.title&&(d+=` ${l.quote(c.title)}`),d+=getSize$1(c),d+=")",l.write(d)}}))};function getSize$1({width:o,height:e}){return o||e?` =${o||""}x${e||""}`:""}const IMG_MAX_HEIGHT$1=600,imageRendererKey=new PluginKey("imageRenderer"),widgetDecorationPluginKey=new PluginKey,WidgetDecorationPlugin=()=>new Plugin({key:widgetDecorationPluginKey,props:{decorations(o){return widgetDecorationPluginKey.getState(o)??null}},state:{init(){return DecorationSet.empty},apply(o,e){let s=e.map(o.mapping,o.doc,{onRemove(l){const{descriptor:u}=l;u.remove()}});const a=o.getMeta(widgetDecorationPluginKey);if((a==null?void 0:a.type)==="add"){const{descriptor:l}=a,u={id:l.id,pos:l.initPos,descriptor:l},c=Decoration$1.widget(l.initPos,l.render.bind(l),u);s=s.add(o.doc,[c])}if((a==null?void 0:a.type)==="remove"){const l=s.find(void 0,void 0,u=>u.id===a.id);l.forEach(u=>u.spec.descriptor.remove()),s=s.remove(l)}return s}}}),removeDecoration=(o,e)=>{const s={type:"remove",id:e};return o.setMeta(widgetDecorationPluginKey,s)};class WidgetDescriptor{constructor(e,s){qe(this,qo);qe(this,Qo);qe(this,jo);qe(this,Ho);$e(this,qo,uniqueId(s)),$e(this,Qo,e)}get id(){return pe(this,qo)}get initPos(){return pe(this,Qo)}get view(){return pe(this,jo)}get getPos(){return pe(this,Ho)}get pos(){var e;return((e=this.getPos)==null?void 0:e.call(this))??this.initPos}render(e,s){return $e(this,jo,e),$e(this,Ho,s),this.renderWidget(e,s)}applyTo(e){const s={type:"add",descriptor:this};return e.setMeta(widgetDecorationPluginKey,s)}rmDeco(e){return removeDecoration(e,this.id)}}qo=new WeakMap,Qo=new WeakMap,jo=new WeakMap,Ho=new WeakMap;class ReactWidgetDescriptor extends WidgetDescriptor{constructor(){super(...arguments);oe(this,"renderItem")}remove(){var s;(s=this.renderItem)==null||s.remove(),this.renderItem=void 0}renderWidget(){return this.renderItem=this.renderItem??this.createRenderItem(),this.renderItem.rerender(),this.getDomElem()}createRenderItem(){return getReactRendererFromState(this.view.state).createItem("widget",()=>jsxRuntimeExports.jsx(Portal,{container:this.getDomElem(),children:jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:this.renderReactElement(this.view,this.getPos)})}))}}const WidgetDecoration=o=>{o.addPlugin(WidgetDecorationPlugin)},common_action_cancel$1="Cancel",common_action_submit$1="Submit",common_action_upload$1="Upload",common_tab_attach$1="Upload from device",common_tab_link$1="Add by link",common_link$1="Link",common_sizes$1="Size, px",image_name$1="Title",image_link_href$1="Image link",image_link_href_help$1="Adress the image link leads to.",image_alt$1="Alt text",image_alt_help$1="Alt text is displayed if the image cannot be loaded.",image_upload_help$1="JPEG, GIF or PNG image no larger than 1 MB.",image_upload_failed$1="Image failed to upload",image_size_width$1="Width",image_size_height$1="Height",link_url_help$1="Address the link leads to.",link_text$1="Link text",link_text_help$1="Text displayed as a link.",link_open_help$1="Open the link in a new tab",file_link_help$1="Link to download the file",file_name$1="File name",file_upload_help$1="Upload multiple files at once from your device.",file_upload_failed$1="Failed to upload files",anchor_href$1="Anchor identifier",anchor_href_help$1="Consists of numbers, symbols and Latin letters. Anchors are used for page navigation.",anchor_title$1="Hint",anchor_title_help$1="The text of the popup hint when hovering over the anchor node",form_id$1="Link or Form ID",en$i={common_action_cancel:common_action_cancel$1,common_action_submit:common_action_submit$1,common_action_upload:common_action_upload$1,common_tab_attach:common_tab_attach$1,common_tab_link:common_tab_link$1,common_link:common_link$1,common_sizes:common_sizes$1,image_name:image_name$1,image_link_href:image_link_href$1,image_link_href_help:image_link_href_help$1,image_alt:image_alt$1,image_alt_help:image_alt_help$1,image_upload_help:image_upload_help$1,image_upload_failed:image_upload_failed$1,image_size_width:image_size_width$1,image_size_height:image_size_height$1,link_url_help:link_url_help$1,link_text:link_text$1,link_text_help:link_text_help$1,link_open_help:link_open_help$1,file_link_help:file_link_help$1,file_name:file_name$1,file_upload_help:file_upload_help$1,file_upload_failed:file_upload_failed$1,anchor_href:anchor_href$1,anchor_href_help:anchor_href_help$1,anchor_title:anchor_title$1,anchor_title_help:anchor_title_help$1,form_id:form_id$1},common_action_cancel="",common_action_submit="",common_action_upload="",common_tab_attach="  ",common_tab_link="  ",common_link="",common_sizes="  ",image_name="  ",image_link_href=" ",image_link_href_help=",    .",image_alt=" ",image_alt_help="  ,     .",image_upload_help="   JPEG, GIF  PNG    1 .",image_upload_failed="   ",image_size_width="",image_size_height="",link_url_help=",    .",link_text="",link_text_help=",    .",link_open_help="    ",file_link_help="   ",file_name=" ",file_upload_help="     .",file_upload_failed="   ",anchor_href=" ",anchor_href_help="C  ,    .      .",anchor_title="",anchor_title_help="       ",form_id="  ID ",ru$i={common_action_cancel,common_action_submit,common_action_upload,common_tab_attach,common_tab_link,common_link,common_sizes,image_name,image_link_href,image_link_href_help,image_alt,image_alt_help,image_upload_help,image_upload_failed,image_size_width,image_size_height,link_url_help,link_text,link_text_help,link_open_help,file_link_help,file_name,file_upload_help,file_upload_failed,anchor_href,anchor_href_help,anchor_title,anchor_title_help,form_id},KEYSET$d="forms",i18n$d=registerKeyset(KEYSET$d,{en:en$i,ru:ru$i});var ModKey;(function(o){o.Mod="mod",o.Alt="alt",o.Option="alt",o.Cmd="cmd",o.Ctrl="ctrl",o.Control="ctrl",o.Shift="shift",o.Tab="tab"})(ModKey||(ModKey={}));var Key;(function(o){o.Enter="Enter",o.Esc="Escape"})(Key||(Key={}));var Action;(function(o){o.__debug="__debug__",o.Cancel="cancel",o.Submit="submit",o.Undo="undo",o.Redo="redo",o.Bold="bold",o.Italic="italic",o.Underline="underline",o.Strike="strike",o.Code="code",o.Link="link",o.Text="text",o.Heading1="h1",o.Heading2="h2",o.Heading3="h3",o.Heading4="h4",o.Heading5="h5",o.Heading6="h6",o.EmptyRow="EmptyRow",o.BulletList="ulist",o.OrderedList="olist",o.LiftListItem="list__action_lift",o.SinkListItem="list__action_sink",o.Quote="quote",o.CodeBlock="codeblock",o.Cut="cut",o.Note="note"})(Action||(Action={}));class ShortCutFormatter{constructor(){qe(this,Tr,new Map)}set(e,s){if(Array.isArray(s))pe(this,Tr).set(e,s);else{const a=s[isMac()?"mac":"pc"];a&&pe(this,Tr).set(e,a)}return this}toPM(e){const s=pe(this,Tr).get(e);return s?s.join("-"):null}toCM(e){const s=pe(this,Tr).get(e);return s?s.sort(a=>a===ModKey.Shift?-1:0).join("-"):null}toView(e){const s=pe(this,Tr).get(e);return s==null?void 0:s.join("+")}}Tr=new WeakMap;const formatter=new ShortCutFormatter;formatter.set(Action.__debug,[ModKey.Mod,ModKey.Option,"]"]).set(Action.Cancel,[Key.Esc]).set(Action.Submit,[ModKey.Mod,Key.Enter]).set(Action.Undo,[ModKey.Mod,"z"]).set(Action.Redo,[ModKey.Mod,ModKey.Shift,"z"]).set(Action.Bold,[ModKey.Mod,"b"]).set(Action.Italic,[ModKey.Mod,"i"]).set(Action.Underline,[ModKey.Mod,"u"]).set(Action.Strike,[ModKey.Mod,ModKey.Shift,"s"]).set(Action.Code,[ModKey.Mod,"e"]).set(Action.Link,[ModKey.Mod,"k"]).set(Action.Text,{pc:[ModKey.Ctrl,ModKey.Shift,"0"],mac:[ModKey.Cmd,ModKey.Option,"0"]}).set(Action.Heading1,{pc:[ModKey.Ctrl,ModKey.Shift,"1"],mac:[ModKey.Cmd,ModKey.Option,"1"]}).set(Action.Heading2,{pc:[ModKey.Ctrl,ModKey.Shift,"2"],mac:[ModKey.Cmd,ModKey.Option,"2"]}).set(Action.Heading3,{pc:[ModKey.Ctrl,ModKey.Shift,"3"],mac:[ModKey.Cmd,ModKey.Option,"3"]}).set(Action.Heading4,{pc:[ModKey.Ctrl,ModKey.Shift,"4"],mac:[ModKey.Cmd,ModKey.Option,"4"]}).set(Action.Heading5,{pc:[ModKey.Ctrl,ModKey.Shift,"5"],mac:[ModKey.Cmd,ModKey.Option,"5"]}).set(Action.Heading6,{pc:[ModKey.Ctrl,ModKey.Shift,"6"],mac:[ModKey.Cmd,ModKey.Option,"6"]}).set(Action.EmptyRow,{pc:[ModKey.Ctrl,ModKey.Shift,Key.Enter],mac:[ModKey.Cmd,ModKey.Shift,Key.Enter]}).set(Action.BulletList,[ModKey.Mod,ModKey.Shift,"l"]).set(Action.OrderedList,[ModKey.Mod,ModKey.Shift,"m"]).set(Action.SinkListItem,[ModKey.Tab]).set(Action.LiftListItem,[ModKey.Shift,ModKey.Tab]).set(Action.Quote,[ModKey.Mod,ModKey.Shift,"."]).set(Action.CodeBlock,{pc:[ModKey.Ctrl,ModKey.Shift,"e"],mac:[ModKey.Cmd,ModKey.Option,"e"]}).set(Action.Cut,{pc:[ModKey.Ctrl,ModKey.Shift,"7"],mac:[ModKey.Cmd,ModKey.Option,"7"]}).set(Action.Note,{pc:[ModKey.Ctrl,ModKey.Shift,"8"],mac:[ModKey.Cmd,ModKey.Option,"8"]});function enterKeyHandler(o){return e=>{e.key===Key.Enter&&o(e)}}const TextInputFixed=reactExports.forwardRef((o,e)=>{const s=reactExports.useRef(null),a=o.controlRef??s;return useEffectOnce(()=>{o.autoFocus&&setTimeout(()=>{var l;(l=a.current)==null||l.focus()},30)}),jsxRuntimeExports.jsx(TextInput,{ref:e,...o,controlRef:a,autoFocus:!1})});TextInputFixed.displayName="TextInputFixed";const TextAreaFixed=reactExports.forwardRef((o,e)=>{const s=reactExports.useRef(null),a=o.controlRef??s;return useEffectOnce(()=>{o.autoFocus&&setTimeout(()=>{var l;(l=a.current)==null||l.focus()},30)}),jsxRuntimeExports.jsx(TextArea,{ref:e,...o,controlRef:a,autoFocus:!1})});TextAreaFixed.displayName="TextAreaFixed";const b$D=cn("url-input-row"),UrlInputRow=reactExports.memo(function({href:e,input:s}){return jsxRuntimeExports.jsxs("div",{className:b$D(),children:[s,jsxRuntimeExports.jsx(ActionTooltip,{title:i18n$d("link_open_help"),children:jsxRuntimeExports.jsx(Button,{className:b$D("button"),view:"flat",size:"s",href:e,target:"_blank",children:jsxRuntimeExports.jsx(Icon,{data:ArrowUpRightFromSquare,size:16})})})]})}),b$C=cn("form"),Form$1=({className:o,children:e})=>jsxRuntimeExports.jsx("div",{className:b$C(null,[o]),children:e}),b$B=cn("form-layout"),FormLayout=({className:o,children:e})=>jsxRuntimeExports.jsx("div",{className:b$B({},[o]),children:e}),b$A=cn("form-row"),FormRow$1=({className:o,label:e,help:s,control:a,controlClassName:l})=>jsxRuntimeExports.jsxs("div",{className:b$A(null,[o]),children:[jsxRuntimeExports.jsxs("div",{className:b$A("label"),children:[jsxRuntimeExports.jsx("span",{className:b$A("label-text"),children:e}),s&&jsxRuntimeExports.jsx(HelpMark,{popoverProps:{modal:!1},className:b$A("label-help"),children:s})]}),jsxRuntimeExports.jsx("div",{className:b$A("control",[l]),children:a})]}),b$z=cn("form-footer"),FormFooter=({className:o,onCancel:e,onSubmit:s,children:a})=>jsxRuntimeExports.jsxs("div",{className:b$z(null,[o]),children:[e&&jsxRuntimeExports.jsx(Button,{size:"s",view:"flat-secondary",onClick:e,children:i18n$d("common_action_cancel")}),s&&jsxRuntimeExports.jsx(Button,{size:"s",view:"action",onClick:s,children:i18n$d("common_action_submit")}),a]}),Form={Form:Form$1,Layout:FormLayout,Row:FormRow$1,Footer:FormFooter},LinkForm$1=reactExports.memo(function({className:e,autoFocus:s,initialUrl:a,initialText:l,readOnlyText:u,onSubmit:c,onCancel:d}){const[h,p]=reactExports.useState(a??""),[m,g]=reactExports.useState(l??""),y=()=>{c({url:h,text:m})},A=enterKeyHandler(y);return jsxRuntimeExports.jsxs(Form.Form,{className:e,children:[jsxRuntimeExports.jsxs(Form.Layout,{children:[jsxRuntimeExports.jsx(Form.Row,{label:i18n$d("common_link"),help:i18n$d("link_url_help"),control:jsxRuntimeExports.jsx(UrlInputRow,{href:h,input:jsxRuntimeExports.jsx(TextInputFixed,{size:"s",view:"normal",value:h,onUpdate:p,autoFocus:s,placeholder:"https://",onKeyPress:A})})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$d("link_text"),help:i18n$d("link_text_help"),control:jsxRuntimeExports.jsx(TextInput,{size:"s",view:"normal",value:m,onUpdate:g,disabled:u,onKeyPress:A})})]}),jsxRuntimeExports.jsx(Form.Footer,{onCancel:d,onSubmit:y})]})}),iframe$1="Add a frame",image$3="Add an image",link$3="Add a link",file$3="Add a file",en$h={iframe:iframe$1,image:image$3,link:link$3,file:file$3},iframe=" ",image$2=" ",link$2=" ",file$2=" ",ru$h={iframe,image:image$2,link:link$2,file:file$2},KEYSET$c="widgets",i18n$c=registerKeyset(KEYSET$c,{en:en$h,ru:ru$h}),b$y=cn("link-placeholder-widget"),placement$8=["bottom-start","top-start","bottom-end","top-end"],LinkPlaceholderWidget=({onCancel:o,onSubmit:e})=>{const[s,a]=useElementState();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{ref:a,className:b$y(),children:jsxRuntimeExports.jsx("a",{href:"#",children:i18n$c("link")})}),jsxRuntimeExports.jsx(Popup,{qa:"g-md-link-form",open:!0,modal:!0,onOpenChange:o,anchorElement:s,placement:placement$8,children:jsxRuntimeExports.jsx(LinkForm$1,{autoFocus:!0,onSubmit:e,onCancel:o})})]})},addPlaceholder=(o,e)=>new LinkWidgetDescriptor(o.selection.from,e).applyTo(o);class LinkWidgetDescriptor extends ReactWidgetDescriptor{constructor(s,a){super(s,"link-empty");qe(this,Uo);qe(this,gn);qe(this,Mi);oe(this,"normalizeUrl");oe(this,"onCancel",()=>{pe(this,gn)&&(pe(this,gn).dispatch(removeDecoration(pe(this,gn).state.tr,this.id)),pe(this,gn).focus())});oe(this,"onSubmit",s=>{const a=this.normalizeUrl(s.url);if(!a||!pe(this,gn)||!pe(this,Mi))return;const{url:l}=a,u=s.text.trim()||a.text,c=pe(this,Mi).call(this),d=c+u.length;let h=pe(this,gn).state.tr;h=h.insertText(u,c),h=h.addMark(c,d,linkType(pe(this,gn).state.schema).create({[LinkAttr.Href]:l})),h=removeDecoration(h,this.id),pe(this,gn).dispatch(h),pe(this,gn).focus()});$e(this,Uo,document.createElement("span")),this.normalizeUrl=normalizeUrlFactory(a)}getDomElem(){return pe(this,Uo)}renderReactElement(s,a){return $e(this,gn,s),$e(this,Mi,a),jsxRuntimeExports.jsx(LinkPlaceholderWidget,{onCancel:this.onCancel,onSubmit:this.onSubmit})}}Uo=new WeakMap,gn=new WeakMap,Mi=new WeakMap;const addLinkPlaceholder=o=>(e,s)=>{if(!e.selection.empty)return!1;const a=linkType(e.schema);return a.isInSet(e.selection.$from.marks())||!toggleMark(a)(e)?!1:(s==null||s(addPlaceholder(e.tr,o).scrollIntoView()),!0)},addEmptyLink=(o,e)=>{const s=linkType(o.schema),{selection:a}=o,{nodeAfter:l}=a.$from;if(a.empty||isNodeSelection(a)&&a.node.type!==imageType(o.schema)||!(l!=null&&l.isInline&&(l!=null&&l.isAtom))&&!(l!=null&&l.isText))return!1;const{$from:u,$to:c}=a;if(u.parent!==c.parent)return!1;let d=o.tr;if(!toggleMark(s,{[LinkAttr.Href]:"",[LinkAttr.IsPlaceholder]:!0})(o,p=>{d=p}))return!1;if(d.scrollIntoView(),a instanceof NodeSelection){if(d.setSelection(NodeSelection.create(d.doc,c.pos-1)),a.node.type===imageType(o.schema)){const p={linkAdded:!0};d.setMeta(imageRendererKey,p)}}else{const p=o.doc.textBetween(u.pos,c.pos),m=p.length-p.trimEnd().length;d.setSelection(TextSelection.create(d.doc,c.pos-m-1))}return e==null||e(d),!0},addLinkCmd2=o=>chainCommands(removeLink,addEmptyLink,addLinkPlaceholder(o)),linkActionSpec2=o=>({isActive:e=>!!isMarkActive(e,linkType(e.schema)),isEnable:addLinkCmd2(o),run:addLinkCmd2(o)}),addImage$1=o=>({isEnable:e=>e.selection.empty,run(e,s,a,l){const u=l;if(u!=null&&u.src){const{src:c,title:d,alt:h}=u,p={[ImageAttr.Src]:c,[ImageAttr.Title]:d??"",[ImageAttr.Alt]:h??""};s(e.tr.insert(e.selection.from,imageType(o).create(p)))}}});let InputState$1=(nc=class{constructor(){qe(this,Li,!1)}get shiftKey(){return pe(this,Li)}keydown(e){$e(this,Li,e.code.startsWith("Shift")||e.shiftKey)}keyup(e){e.code.startsWith("Shift")&&$e(this,Li,!1)}},Li=new WeakMap,nc);const imageUrlPaste=(o,e)=>{const s=new InputState$1;o.addPlugin(()=>new Plugin({props:{handleDOMEvents:{keydown(a,l){s.keydown(l)},keyup(a,l){s.keyup(l)},paste(a,l){if(!s.shiftKey||!e.parseInsertedUrlAsImage||!l.clipboardData||a.state.selection.$from.parent.type.spec.code)return!1;const{imageUrl:u,title:c}=e.parseInsertedUrlAsImage(l.clipboardData.getData(DataTransferType.Text)??"")||{};if(!u)return!1;l.preventDefault();const d=imageType(a.state.schema).create({src:u,alt:c}),h=a.state.tr.replaceSelectionWith(d);return a.dispatch(h.scrollIntoView()),!0}}}}),o.Priority.High)},Image$1=(o,e)=>{o.use(ImageSpecs),o.addAction(addImageAction,({schema:s})=>addImage$1(s)),isFunction(e==null?void 0:e.parseInsertedUrlAsImage)&&o.use(imageUrlPaste,{parseInsertedUrlAsImage:e.parseInsertedUrlAsImage})};function linkPasteEnhance({markupParser:o}){return new Plugin({props:{handleDOMEvents:{paste(e,s){const a=getLoggerFromState(e.state).nested({plugin:"link-paste-enhance",domEvent:"paste"}),{state:l,dispatch:u}=e,c=l.selection;let d=null;if(isTextSelection(c)||isNodeSelection(c)&&c.node.type===imageType(l.schema)){const{$from:h,$to:p}=c;if(h.pos===p.pos){const m=getUrl(s.clipboardData,o);if(m){const g=linkType(l.schema);d=l.tr.replaceSelectionWith(l.schema.text(m,[...h.marks().filter(y=>y.type!==g),g.create({[LinkAttr.Href]:m})]),!1),a.event({event:"paste-url"})}}else if(h.sameParent(p)){const m=getUrl(s.clipboardData,o);m&&(d=l.tr.addMark(h.pos,p.pos,linkType(l.schema).create({[LinkAttr.Href]:m})),d.setSelection(TextSelection.create(d.doc,p.pos)),a.event({event:"paste-url-on-text"}))}}return d?(u(d.scrollIntoView()),s.preventDefault(),!0):!1}}}})}function getUrl(o,e){if(!o||o.types.includes(DataTransferType.Yfm))return null;if(isIosSafariShare(o))return o.getData(DataTransferType.UriList);const s=o.getData(DataTransferType.Text),a=e.matchLinks(s);if(a!=null&&a[0]){const{raw:l,url:u}=a[0];if(l===s)return u;if(s.endsWith("?")&&l+"?"===s&&e.validateLink(s))return e.normalizeLink(s)}return null}const LinkForm=reactExports.memo(function({href:e,autoFocus:s,onChange:a,onCancel:l}){const[u,c]=reactExports.useState(e),d=()=>{a==null||a({href:u})},h=enterKeyHandler(d);return jsxRuntimeExports.jsxs(Form.Form,{children:[jsxRuntimeExports.jsx(Form.Layout,{children:jsxRuntimeExports.jsx(Form.Row,{label:i18n$d("common_link"),help:i18n$d("link_url_help"),control:jsxRuntimeExports.jsx(UrlInputRow,{href:u,input:jsxRuntimeExports.jsx(TextInputFixed,{size:"s",hasClear:!0,view:"normal",value:u,onUpdate:c,placeholder:"https://",autoFocus:s,onKeyPress:h})})})}),jsxRuntimeExports.jsx(Form.Footer,{onCancel:l,onSubmit:d})]})}),className="pm-link-focus-deco",placement$7=["bottom-start","bottom-end","top-start","top-end"];function getTextNode(o){if(!(o.selection instanceof TextSelection)||!o.selection.empty||!isMarkActive(o,linkType(o.schema)))return null;const e=findParentNode(Boolean)(o.selection);if(!e)return null;const a=findChildrenByMark(e==null?void 0:e.node,linkType(o.schema)).find(u=>{const c=u.pos+e.pos,d=c+u.node.nodeSize;return c<=o.selection.from&&d>=o.selection.from});if(!a)return null;const l=a.pos+e.pos+1;return{...a,absolutePos:l,parent:e,from:l,to:l+a.node.nodeSize}}const linkTooltipPlugin=o=>{let e=null;return new Plugin({view(s){return e=new SelectionTooltip$2(s,o),e},props:{handleKeyDown:keydownHandler({Escape:()=>(e==null?void 0:e.onEscapeDown())??!1}),decorations(s){const a=getTextNode(s);if(!a)return DecorationSet.empty;const{from:l,to:u}=a;return DecorationSet.create(s.doc,[Decoration$1.inline(l,u,{class:`pm-node-selected ${className}`})])}}})};let SelectionTooltip$2=class{constructor(e,s){oe(this,"normalizeUrl");oe(this,"view");oe(this,"show");oe(this,"textNode");oe(this,"textNodeRef");oe(this,"manualHidden",!1);oe(this,"renderItem");oe(this,"onOpenChange",(e,s,a)=>{e||(a==="escape-key"?this.cancelPopup():this.onOutsideClick())});oe(this,"onOutsideClick",()=>{this.removePlaceholderLink(this.textNode),this.hideTooltip(),this.manualHidden=!0});this.normalizeUrl=normalizeUrlFactory(s),this.view=e,this.show=!1,this.update(e)}update(e){if(!e.dom.parentNode){this.hideTooltip();return}const{state:s}=e;this.textNode=getTextNode(s);const a=this.textNodeRef;if(this.textNodeRef=this.view.dom.getElementsByClassName(className)[0],a!==this.textNodeRef&&(this.manualHidden=!1),this.manualHidden||!this.textNode||!this.textNodeRef){this.hideTooltip();return}this.showTooltip()}destroy(){var e;this.show=!1,(e=this.renderItem)==null||e.remove(),this.renderItem=void 0}onEscapeDown(){return this.show?(this.removePlaceholderLink(this.textNode),this.manualHidden=!0,this.hideTooltip(),!0):!1}getMarkAttrs(){const{textNode:e}=this,s=e&&findMark(e.node,linkType(this.view.state.schema));return s==null?void 0:s.attrs}renderTooltip(){this.renderItem=this.renderItem??this.createRenderItem(),this.renderItem.rerender()}hideTooltip(){this.show=!1,this.renderTooltip()}showTooltip(){this.show=!0,this.renderTooltip()}cancelPopup(){this.removePlaceholderLink(this.textNode,{returnSelection:!0}),this.manualHidden=!0,this.hideTooltip(),this.view.focus()}removePlaceholderLink(e,s){var a;if(e){const{view:l}=this,{state:u}=l,c=(a=findMark(e.node,linkType(u.schema)))==null?void 0:a.attrs;if(c!=null&&c[LinkAttr.IsPlaceholder]){const{from:d,to:h}=e;let p=u.tr.removeMark(d,h,linkType(u.schema));s!=null&&s.returnSelection&&(p=p.setSelection(TextSelection.create(p.doc,d,h))),l.dispatch(p)}}}changeAttrs({href:e}){const{view:s,textNode:a}=this;if(!a)return;const l=this.normalizeUrl(e);if(l){const{url:u}=l,{from:c,to:d}=a,h=s.state.tr;h.setSelection(TextSelection.create(h.doc,h.mapping.map(d))),h.addMark(c,d,linkType(s.state.schema).create({href:u})),s.dispatch(h)}}createRenderItem(){return getReactRendererFromState(this.view.state).createItem("link-tooltip",()=>jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:jsxRuntimeExports.jsx(SelectionTooltipView,{show:this.show,domElem:this.textNodeRef,onCancel:this.cancelPopup.bind(this),attrs:this.getMarkAttrs(),onChange:this.changeAttrs.bind(this),onOpenChange:this.onOpenChange})}))}};const SelectionTooltipView=o=>{const{show:e}=o;if(!e)return null;const{domElem:s,onChange:a,onCancel:l,onOpenChange:u,attrs:c={}}=o,d=c[LinkAttr.Href],h=c[LinkAttr.IsPlaceholder];return jsxRuntimeExports.jsx(Popup,{open:!0,anchorElement:s,placement:placement$7,onOpenChange:u,children:jsxRuntimeExports.jsx(LinkForm,{href:d??"",autoFocus:h,onChange:a,onCancel:l})},d)},linkAction="link",linkAction2="addLink",Link=(o,e)=>{if(o.use(LinkSpecs),o.addAction(linkAction2,linkActionSpec2),o.addPlugin(linkTooltipPlugin),e!=null&&e.linkKey){const{linkKey:s}=e;o.addKeymap(a=>({[s]:addLinkCmd2(a)}))}o.addPlugin(linkPasteEnhance,o.Priority.High).addAction(linkAction,s=>linkCommand(linkType(s.schema),s)).addInputRules(({schema:s})=>({rules:[linkInputRule(linkType(s))]}))};function linkInputRule(o){return new InputRule(/\[(.+)]\((\S+)\)\s$/,(e,s,a,l)=>{if(hasCodeMark(e,s,a,l))return null;if(s.index>0){const p=s;if(p.input[p.index-1]!==" ")return null}const[u,c,d]=s,{tr:h}=e;return u&&h.replaceWith(a,l,o.schema.text(c)).addMark(a,a+c.length,o.create({href:d})),h})}const iAction="italic",Italic=(o,e)=>{if(o.use(ItalicSpecs),o.addAction(iAction,({schema:s})=>createToggleMarkAction(italicType(s))),o.addInputRules(({schema:s})=>({rules:[markInputRule({open:"*",close:"*",ignoreBetween:"*"},italicType(s)),markInputRule({open:"_",close:"_",ignoreBetween:"_"},italicType(s))]})),e!=null&&e.italicKey){const{italicKey:s}=e;o.addKeymap(({schema:a})=>({[s]:withLogAction("italic",toggleMark(italicType(a)))}))}},sAction="strike",Strike=(o,e)=>{if(o.use(StrikeSpecs),o.addAction(sAction,({schema:s})=>createToggleMarkAction(strikeType(s))).addInputRules(({schema:s})=>({rules:[markInputRule({open:"~~",close:"~~",ignoreBetween:"~"},strikeType(s))]})),e!=null&&e.strikeKey){const{strikeKey:s}=e;o.addKeymap(({schema:a})=>({[s]:withLogAction("strike",toggleMark(strikeType(a)))}))}},undAction="underline",Underline=(o,e)=>{if(o.use(UnderlineSpecs),o.addAction(undAction,({schema:s})=>createToggleMarkAction(underlineType(s))).addInputRules(({schema:s})=>({rules:[markInputRule({open:"++",close:"++",ignoreBetween:"+"},underlineType(s))]})),e!=null&&e.underlineKey){const{underlineKey:s}=e;o.addKeymap(({schema:a})=>({[s]:withLogAction("underline",toggleMark(underlineType(a)))}))}},mAction="mark",Mark=o=>{o.use(MarkSpecs),o.addAction(mAction,({schema:e})=>createToggleMarkAction(markMarkType(e))).addInputRules(({schema:e})=>({rules:[markInputRule({open:"==",close:"==",ignoreBetween:"="},markMarkType(e))]}))},subAction="subscript",Subscript$1=o=>{o.use(SubscriptSpecs),o.addAction(subAction,({schema:e})=>createToggleMarkAction(subscriptType(e))).addInputRules(({schema:e})=>({rules:[markInputRule({open:"~",close:"~",ignoreBetween:"~"},subscriptType(e))]}))},supAction="supscript",Superscript$1=o=>{o.use(SuperscriptSpecs),o.addAction(supAction,({schema:e})=>createToggleMarkAction(superscriptType(e))).addInputRules(({schema:e})=>({rules:[markInputRule({open:"^",close:"^",ignoreBetween:"^"},superscriptType(e))]}))},Breaks=(o,e)=>{let s;o.context.has("breaks")?s=o.context.get("breaks")?"soft":"hard":(s=e.preferredBreak??"hard",globalLogger.info("[Breaks extension]: Parameter 'breaks' is not defined in context; value from options is used"),o.logger.log("[Breaks extension]: Parameter 'breaks' is not defined in context; value from options is used")),o.use(BreaksSpecs,{preferredBreak:s}),o.addKeymap(({schema:a})=>{const l=addBr((s==="soft"?sbType:hbType)(a)),u={"Shift-Enter":l};return isMac()&&(u["Ctrl-Enter"]=l),u})},addBr=o=>chainCommands(exitCode,(e,s)=>{const{selection:a,schema:l}=e;if(!isTextSelection(a)||!a.$cursor||!canContainBreaks(a.$cursor.parent))return!1;if(isBreakNode(a.$cursor.nodeBefore)){if(s){const{$cursor:u,$cursor:{pos:c}}=a,d=isBreakNode(u.nodeAfter)?c+1:c,h=u.end(),p=u.after(),m=e.doc.slice(d,h,!1).content;let g=e.tr.insert(p,pType(l).create(null,m));g=g.setSelection(TextSelection.create(g.doc,p+1)).scrollIntoView().delete(c,h).delete(c-1,c),s(g)}return!0}return s==null||s(e.tr.replaceSelectionWith(o.create()).scrollIntoView()),!0});function canContainBreaks(o){return!!o.type.spec.canContainBreaks||o.type===pType(o.type.schema)}function isBreakNode(o){return!!(o!=null&&o.type.spec.isBreak)}const joinPreviousBlock=({checkPrevNode:o,skipNode:e})=>(s,a)=>{const l=get$CursorAtBlockStart(s.selection);if(!l)return!1;const u=l.index(-1),c=l.node(-1).maybeChild(u-1);if(!c||!o(c))return!1;const d=l.parent,h=s.schema.topNodeType.create(null,d),p=d.childCount===0;let m=c,g=l.before()-c.nodeSize,y;for(;y=getLastChildOfNode(m);){if(y.node.isTextblock){const A=s.tr,T=g+y.offset+y.node.nodeSize;return A.delete(l.before(),l.after()),A.insert(T,d.content),A.setSelection(TextSelection.create(A.doc,T)),a==null||a(A.scrollIntoView()),!0}if(!e(y.node)&&y.node.canAppend(h)){const A=s.tr,T=g+1+y.offset+y.node.nodeSize-1;return A.delete(l.before(),l.after()),A.insert(T,d),A.setSelection(TextSelection.create(A.doc,T+1)),a==null||a(A.scrollIntoView()),!0}if(y.node.isAtom||y.node.isLeaf){const{tr:A}=s;if(p)A.delete(l.before(),l.after()),A.setSelection(NodeSelection.create(A.doc,g+1+y.offset));else if(!e(m)&&m.canAppend(h)){const T=g+m.nodeSize-1;A.insert(T,d),A.setSelection(TextSelection.create(A.doc,T))}else A.setSelection(NodeSelection.create(A.doc,g+1+y.offset));return a==null||a(A.scrollIntoView()),!0}m=y.node,g+=y.offset+1}return!1},liftFromQuote=(o,e)=>{const s=get$CursorAtBlockStart(o.selection);return!s||!isBlockqouteNode(s.node(-1))?!1:lift(o,e)},joinPrevQuote=joinPreviousBlock({checkPrevNode:isBlockqouteNode,skipNode:isBlockqouteNode}),toggleQuote=(o,e)=>{const{selection:s}=o,a=blockquoteType(o.schema);if(!isTextSelection(s)||!s.$cursor)return wrapIn(a)(o,e);const{$cursor:l}=s;let{depth:u}=l;for(;u>0;){const d=l.node(u).type.spec;if(!d.complex||d.complex==="root"){const h=u-1,p=getBlockRange(l,u);return isBlockqouteNode(l.node(h))?e==null||e(o.tr.lift(p,h-1).scrollIntoView()):e==null||e(o.tr.wrap(p,[{type:a}]).scrollIntoView()),!0}u--}return!1};function getBlockRange(o,e){const{doc:s}=o,a=s.resolve(o.before(e)),l=s.resolve(o.after(e));return a.blockRange(l)}const bqAction="quote",Blockquote=(o,e)=>{if(o.use(BlockquoteSpecs),e!=null&&e.qouteKey){const{qouteKey:s}=e;o.addKeymap(({schema:a})=>({[s]:withLogAction("blockquote",wrapIn(blockquoteType(a)))}))}o.addKeymap(()=>({Backspace:chainCommands(liftFromQuote,joinPrevQuote)})),o.addInputRules(({schema:s})=>({rules:[blockQuoteRule(blockquoteType(s))]})),o.addAction(bqAction,({schema:s})=>{const a=blockquoteType(s);return{isActive:l=>hasParentNodeOfType(a)(l.selection),isEnable:toggleQuote,run:toggleQuote}})};function blockQuoteRule(o){return wrappingInputRule(/^\s*>\s$/,o)}const pluginKey$6=new PluginKey("code_block_line_wrapping"),WRAPPING_SPEC_KEY="__code_block_line_wrapping",WRAPPING_SPEC_VALUE=!0,isLineWrappingDecoration=o=>{var e;return((e=o.spec)==null?void 0:e[WRAPPING_SPEC_KEY])===WRAPPING_SPEC_VALUE},hasLineWrappingDecoration=o=>o.some(isLineWrappingDecoration),isNodeHasLineWrapping=(o,e)=>{var l;const s=o.doc.nodeAt(e);if(!s||s.type!==codeBlockType(o.doc.type.schema))return!1;const a=(l=pluginKey$6.getState(o))==null?void 0:l.decorations.find(e+1,e+s.nodeSize-1);return(a==null?void 0:a.some(isLineWrappingDecoration))??!1};function enableLineWrapping(o,e){return o.setMeta(pluginKey$6,{type:"add",pos:e})}function disableLineWrapping(o,e){return o.setMeta(pluginKey$6,{type:"remove",pos:e})}const codeBlockLineWrappingPlugin=()=>new Plugin({key:pluginKey$6,state:{init(){return{decorations:DecorationSet.empty}},apply(o,e){let s=e.decorations.map(o.mapping,o.doc);if(o.getMeta(pluginKey$6)){const a=o.getMeta(pluginKey$6);if(a.type==="add"){const l=o.doc.nodeAt(a.pos);if((l==null?void 0:l.type)===codeBlockType(o.doc.type.schema)){const u=a.pos,c=a.pos+l.nodeSize;s=s.add(o.doc,[Decoration$1.node(u,c,{},{[WRAPPING_SPEC_KEY]:WRAPPING_SPEC_VALUE})])}}else if(a.type==="remove"){const l=o.doc.nodeAt(a.pos);if((l==null?void 0:l.type)===codeBlockType(o.doc.type.schema)){const u=a.pos+1,c=a.pos+l.nodeSize-1,d=s.find(u,c);s=s.remove(d)}}}return{decorations:s}}},props:{decorations(o){var e;return(e=pluginKey$6.getState(o))==null?void 0:e.decorations}}});function isLineNumbersVisible(o){return o.attrs[CodeBlockNodeAttr.ShowLineNumbers]==="true"}class CodeBlockNodeView{constructor({node:e,view:s,decorations:a},l){oe(this,"dom");oe(this,"contentDOM");oe(this,"_lang");oe(this,"_codeElem");oe(this,"_opts");oe(this,"_applyLineNumbersResult");oe(this,"update",(e,s)=>{var u,c,d;const a=e.attrs[CodeBlockNodeAttr.Lang];a!==this._lang&&(this._codeElem.className="hljs",updateDomAttribute$1(this.dom,CodeBlockNodeAttr.Lang,a),a&&this._codeElem.classList.add(a),this._lang=a),updateDomAttribute$1(this.dom,CodeBlockNodeAttr.Line,e.attrs[CodeBlockNodeAttr.Line]);const l=hasLineWrappingDecoration(s);return this._codeElem.classList.toggle("wrap",l),(u=this._opts.lineNumbers)!=null&&u.enabled&&(this._applyLineNumbersResult=applyLineNumbers(e,this._codeElem,l,(c=this._applyLineNumbersResult)==null?void 0:c.container,(d=this._applyLineNumbersResult)==null?void 0:d.lineCount)),!0});var d;this._opts=l,this._lang=e.attrs[CodeBlockNodeAttr.Lang];const u=s.dom.ownerDocument;this.dom=u.createElement("pre"),updateDomAttribute$1(this.dom,CodeBlockNodeAttr.Line,e.attrs[CodeBlockNodeAttr.Line]),this._codeElem=u.createElement("code"),this._codeElem.classList.add("hljs"),this._lang&&(this.dom.setAttribute(CodeBlockNodeAttr.Lang,this._lang),this._codeElem.classList.add(this._lang)),this.contentDOM=u.createElement("div");const c=hasLineWrappingDecoration(a);(d=this._opts.lineNumbers)!=null&&d.enabled&&(this._applyLineNumbersResult=applyLineNumbers(e,this._codeElem,c)),this._codeElem.append(this.contentDOM),this.dom.append(this._codeElem)}static withOpts(e){return(s,a,l,u,c)=>new this({node:s,view:a,getPos:l,decorations:u,innerDecorations:c},e)}}function updateDomAttribute$1(o,e,s){s?o.setAttribute(e,s):o.removeAttribute(e)}function applyLineNumbers(o,e,s,a,l=0){const u=e.ownerDocument;if(!isLineNumbersVisible(o)||!s)return a&&(e.removeChild(a),e.classList.remove("show-line-numbers")),{container:void 0,lineCount:0};const h=(o.textContent?o.textContent.split(`
`):[""]).length;let p=a;if(p||(p=u.createElement("div"),p.className="yfm-line-numbers",p.contentEditable="false",e.prepend(p)),e.classList.add("show-line-numbers"),h!==l){const m=String(h).length,g=u.createElement("div");g.classList.add("yfm-line-number","fake-line-number"),g.textContent="".padStart(m,"0"),p.replaceChildren(g)}return{container:p,lineCount:h}}const remove$4="Remove",empty_option$1="No matches found",code_wrapping$1="Text wrapping",show_line_numbers$1="Line numbers",en$g={remove:remove$4,empty_option:empty_option$1,code_wrapping:code_wrapping$1,show_line_numbers:show_line_numbers$1},remove$3="",empty_option="  ",code_wrapping=" ",show_line_numbers=" ",ru$g={remove:remove$3,empty_option,code_wrapping,show_line_numbers},KEYSET$b="codeblock",i18n$b=registerKeyset(KEYSET$b,{en:en$g,ru:ru$g}),doc_empty$1="Enter your text or type '/' to open the list of commands",doc_empty_mobile$1="Enter your text",checkbox$4="Add a description of the task or check point",codeblock$3="Add code or text to the block",deflist_term$1="Definition term",deflist_desc$1="Definition description",heading$6="Heading",cut_title$1="Cut title",cut_content$1="Add text to be displayed on click",note_title$1="Note title",note_content$1="Add content for note",block$2="Block with decoration",layout_cell$1="Text",table_cell$1="Cell content",select_filter$1="Search",en$f={doc_empty:doc_empty$1,doc_empty_mobile:doc_empty_mobile$1,checkbox:checkbox$4,codeblock:codeblock$3,deflist_term:deflist_term$1,deflist_desc:deflist_desc$1,heading:heading$6,cut_title:cut_title$1,cut_content:cut_content$1,note_title:note_title$1,note_content:note_content$1,block:block$2,layout_cell:layout_cell$1,table_cell:table_cell$1,select_filter:select_filter$1},doc_empty='     "/",    ',doc_empty_mobile="  ",checkbox$3="     ",codeblock$2="     ",deflist_term="",deflist_desc="",heading$5="",cut_title=" ",cut_content=" ,      ",note_title=" ",note_content="   ",block$1="  ",layout_cell="",table_cell="",select_filter="",ru$f={doc_empty,doc_empty_mobile,checkbox:checkbox$3,codeblock:codeblock$2,deflist_term,deflist_desc,heading:heading$5,cut_title,cut_content,note_title,note_content,block:block$1,layout_cell,table_cell,select_filter},KEYSET$a="placeholder",i18n$a=registerKeyset(KEYSET$a,{en:en$f,ru:ru$f}),BaseTooltipCn=cn("base-tooltip"),defaultPlacement=["bottom-start","top-start","bottom-end","top-end"],b$x=BaseTooltipCn;class BaseTooltipPluginView{constructor(e,s){oe(this,"view");oe(this,"currentNode",null);oe(this,"content");oe(this,"nodeType");oe(this,"popupPlacement");oe(this,"manualHidden",!1);oe(this,"destroyed",!1);oe(this,"disableHideOnEscapeKeyDown");oe(this,"focusTrackingRafId",null);oe(this,"idPrefix");oe(this,"renderItem");oe(this,"onEscapeDown",()=>this.disableHideOnEscapeKeyDown?!1:this.currentNode&&!this.manualHidden?(this.hidePopupManual(),!0):!1);oe(this,"changeAttrsCb",(e,s)=>{if(this.currentNode){let a=this.view.state.tr.setNodeMarkup(this.currentNode.pos,void 0,{...this.currentNode.node.attrs,...e},(s==null?void 0:s.marks)||[]);s!=null&&s.setSelection&&(a=a.setSelection(NodeSelection.create(a.doc,this.currentNode.pos))),this.view.dispatch(a),s!=null&&s.setFocus&&this.view.focus(),s!=null&&s.hideTooltip&&this.hidePopupManual()}});oe(this,"onOutsideClick",()=>{this.hidePopupManual()});oe(this,"popupOpenChangeHandler",(e,s,a)=>{e||a==="focus-out"&&s.relatedTarget===this.view.dom||this.disableHideOnEscapeKeyDown&&a==="escape-key"||(this.hidePopupManual(),requestAnimationFrame(()=>{this.destroyed||this.view.hasFocus()||this.startTrackingViewFocus()}))});this.view=e,this.idPrefix=s.idPrefix,this.content=s.content,this.nodeType=s.nodeType,this.popupPlacement=s.popupPlacement,this.disableHideOnEscapeKeyDown=s.disableHideOnEscapeKeyDown}update(e){this.view=e,this.updateTooltipView()}destroy(){var e;this.destroyed=!0,(e=this.renderItem)==null||e.remove(),this.renderItem=void 0}setCurrentNode(e){const s=this.view,a=s.domAtPos.bind(s),{selection:l}=s.state,{$from:u,$to:c}=l,d=findSelectedNodeOfType(e)(l)||findParentNodeOfType(e)(l);if(!d||!u.node(d.depth).eq(c.node(d.depth))){this.currentNode=null,this.manualHidden=!1,this.stopTrackingViewFocus();return}(!this.currentNode||!this.currentNode.node.eq(d.node)||this.currentNode.pos!==d.pos)&&(this.manualHidden=!1,this.stopTrackingViewFocus());const{pos:h,node:p}=d,m=findDomRefAtPos(h,a);this.currentNode={pos:h,node:p,dom:m}}updateTooltipView(){var s;const e=this.currentNode;this.setCurrentNode(this.view.state.schema.nodes[this.nodeType.name]),!(e&&((s=this.currentNode)!=null&&s.node.eq(e.node))&&this.currentNode.pos===e.pos&&this.currentNode.dom===e.dom)&&this.render()}render(){this.destroyed||(this.renderItem=this.renderItem??this.createRenderItem(),this.renderItem.rerender())}startTrackingViewFocus(){this.focusTrackingRafId=requestAnimationFrame(()=>{if(!this.destroyed){if(this.view.hasFocus()){this.focusTrackingRafId=null,this.manualHidden=!1,this.render();return}this.startTrackingViewFocus()}})}stopTrackingViewFocus(){this.focusTrackingRafId!==null&&(cancelAnimationFrame(this.focusTrackingRafId),this.focusTrackingRafId=null)}hidePopupManual(){this.manualHidden=!0,this.render()}renderContent(e){return this.content?(window.dispatchEvent(new CustomEvent("scroll")),jsxRuntimeExports.jsx(Popup,{open:!0,hasArrow:!1,anchorElement:e.dom,placement:this.popupPlacement||defaultPlacement,onOpenChange:this.popupOpenChangeHandler,children:jsxRuntimeExports.jsx("div",{className:b$x(),children:this.content(this.view,e,this.changeAttrsCb,void 0,void 0,()=>this.render())})})):null}createRenderItem(){return getReactRendererFromState(this.view.state).createItem(this.idPrefix,()=>this.currentNode&&!this.manualHidden?jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:this.renderContent(this.currentNode)}):null)}}function isTruthy(o){return!!o}const PlainTextLang="plaintext",toggleLineNumbers=({node:o,pos:e,state:s,dispatch:a})=>{const l=isLineNumbersVisible(o);a(s.tr.setNodeAttribute(e,CodeBlockNodeAttr.ShowLineNumbers,l?"":"true"))},toggleLineWrapping=({pos:o,state:e,dispatch:s})=>{const{tr:a}=e;isNodeHasLineWrapping(e,o)?disableLineWrapping(a,o):enableLineWrapping(a,o),s(a)},bCodeBlock=cn("code-block"),bToolbar=cn("code-block-toolbar"),CodeMenu=({view:o,pos:e,node:s,selectItems:a,mapping:l})=>{const u=s.attrs[CodeBlockNodeAttr.Lang],c=l[u]||u||PlainTextLang,d=h=>{o.focus(),h!==c&&o.dispatch(o.state.tr.setNodeAttribute(e,CodeBlockNodeAttr.Lang,h))};return jsxRuntimeExports.jsx(Select,{size:"m",width:"max",disablePortal:!0,value:[c],onUpdate:h=>d(h[0]),options:a,filterable:!0,filterPlaceholder:i18n$a("select_filter"),popupClassName:bCodeBlock("select-popup"),className:bCodeBlock("select-button"),renderEmptyOptions:()=>jsxRuntimeExports.jsx("div",{className:bCodeBlock("select-empty"),children:i18n$b("empty_option")})})},codeLangSelectTooltipViewCreator=(o,e,s={},{showCodeWrapping:a,showLineNumbers:l})=>new BaseTooltipPluginView(o,{idPrefix:"code-block-tooltip",nodeType:codeBlockType(o.state.schema),popupPlacement:["bottom","top"],content:(u,{node:c,pos:d},h,p,m,g)=>jsxRuntimeExports.jsx(Toolbar,{editor:{},focus:()=>u.focus(),className:bToolbar(),data:[[e.length>0&&{id:"code-block-type",type:ToolbarDataType.ReactComponent,component:()=>jsxRuntimeExports.jsx(CodeMenu,{view:u,pos:d,node:c,selectItems:e,mapping:s}),width:28},a&&{id:"code-block-wrapping",icon:{data:ArrowUturnCwLeft},title:i18n$b("code_wrapping"),type:ToolbarDataType.SingleButton,isActive:()=>isNodeHasLineWrapping(u.state,d),isEnable:()=>!0,exec:()=>{toggleLineWrapping({pos:d,state:u.state,dispatch:u.dispatch}),g==null||g()}},l&&{id:"code-block-linenumbers",icon:{data:ListOl},title:i18n$b("show_line_numbers"),type:ToolbarDataType.SingleButton,isActive:()=>isLineNumbersVisible(c),isEnable:()=>!0,exec:()=>toggleLineNumbers({pos:d,node:c,state:u.state,dispatch:u.dispatch})},{id:"code-block-copy",type:ToolbarDataType.ReactNodeFn,width:28,content:()=>jsxRuntimeExports.jsx(ClipboardButton,{text:c.textContent})}].filter(isTruthy),[{id:"code-block-remove",icon:{data:TrashBin},title:i18n$b("remove"),theme:"danger",type:ToolbarDataType.SingleButton,isActive:()=>!1,isEnable:()=>!0,exec:()=>removeNode({pos:d,node:c,tr:u.state.tr,dispatch:u.dispatch.bind(u)})}]]})}),pluginKey$5=new PluginKey("code_block_line_numbers_decorations"),codeBlockLineNumbersPlugin=()=>new Plugin({key:pluginKey$5,state:{init(o,e){return getDecorations$1(e.doc)},apply(o,e){return o.docChanged?getDecorations$1(o.doc):e.map(o.mapping,o.doc)}},props:{decorations(o){return pluginKey$5.getState(o)}}});function getDecorations$1(o){const e=[];for(const{node:s,pos:a}of findChildrenByType(o,codeBlockType(o.type.schema),!0)){if(!isLineNumbersVisible(s))continue;const u=s.textContent.split(`
`),c=String(u.length).length;let d=0;for(let h=0;h<u.length;h++){const p=u[h];{const m=document.createElement("span");m.classList.add("yfm-line-number"),m.textContent=String(h+1).padStart(c," "),e.push(Decoration$1.widget(a+d+1,m,{side:1,ignoreSelection:!0}))}d+=p.length+1}}return DecorationSet.create(o,e)}const key$3=new PluginKey("code_block_highlight"),CodeBlockHighlight=(o,e)=>{var d,h;let s,a,l;const u=async()=>{try{l=(await Promise.resolve().then(()=>markdownEditor$3)).default;const p=await Promise.resolve().then(()=>markdownEditor$1),m=p.all,g=p.createLowlight;return s={...m,...e.langs},a=g(s),!0}catch{return globalLogger.info("Skip code_block highlighting"),o.logger.log("Skip code_block highlighting"),!1}};(d=e.lineWrapping)!=null&&d.enabled&&o.addPlugin(codeBlockLineWrappingPlugin),(h=e.lineNumbers)!=null&&h.enabled&&o.addPlugin(codeBlockLineNumbersPlugin),o.addPlugin(()=>{let p=!1,m=null;const g=[],y={};return new Plugin({key:key$3,state:{init:(A,T)=>(u().then(E=>{if(p=E,p){for(const v of Object.keys(s)){const _=s[v](l);if(g.push({value:v,content:_.name||capitalize(v)}),_.aliases)for(const w of _.aliases)y[w]=v}g.sort(sortLangs),m&&!m.isDestroyed&&m.dispatch(m.state.tr.setMeta(key$3,{modulesLoaded:p}))}}),c(T.doc)),apply:(A,T,E,v)=>{var _;if(!p)return DecorationSet.empty;if((_=A.getMeta(key$3))!=null&&_.modulesLoaded)return c(A.doc);if(A.docChanged){const w=E.selection.$head.parent.type.name,R=v.selection.$head.parent.type.name;if(w===codeBlockNodeName||R===codeBlockNodeName)return c(A.doc);{const k=findChildrenByType(E.doc,codeBlockType(E.schema));if(findChildrenByType(v.doc,codeBlockType(v.schema)).length!==k.length||A.steps.some(P=>stepHasFromTo(P)&&k.some(N=>N.pos>=P.from&&N.pos+N.node.nodeSize<=P.to)))return c(A.doc)}}return T.map(A.mapping,A.doc)}},view:A=>{var T,E;return m=A,codeLangSelectTooltipViewCreator(m,g,y,{showCodeWrapping:!!((T=e.lineWrapping)!=null&&T.enabled),showLineNumbers:!!((E=e.lineNumbers)!=null&&E.enabled)})},props:{decorations:A=>key$3.getState(A),nodeViews:{[codeBlockNodeName]:CodeBlockNodeView.withOpts(e)}}})});function c(p){const m=[];if(!a)return DecorationSet.empty;for(const{node:g,pos:y}of findChildrenByType(p,codeBlockType(p.type.schema),!0)){let A=y+1,T;const E=g.attrs[CodeBlockNodeAttr.Lang];if(E&&a.registered(E))T=a.highlight(E,g.textContent).children;else continue;for(const{text:v,classes:_}of parseNodes(T)){const w=A+v.length;_.length&&m.push(Decoration$1.inline(A,w,{class:_.join(" ")})),A=w}}return DecorationSet.create(p,m)}};function parseNodes(o,e=[]){return o.map(s=>{let a=e;return s.type==="element"?(a=a.concat(s.properties.className??[]),parseNodes(s.children,a)):{text:s.type==="comment"||s.type==="text"?s.value:"",classes:a}}).flat()}function stepHasFromTo(o){return typeof o.from=="number"&&typeof o.to=="number"}function sortLangs(o,e){return o.value===PlainTextLang?-1:e.value===PlainTextLang?1:0}const cbAction="toCodeBlock",lineNumbersOptionsDefault={enabled:!0,showByDefault:!1},resetCodeblock=(o,e,s)=>{const{selection:a}=o;return a.empty&&a.$from.parent.type===codeBlockType(o.schema)&&(s!=null&&s.endOfTextblock("backward",o))?toParagraph(o,e):!1},setCodeBlockType=({serializer:o})=>(e,s)=>{const a=codeBlockType(e.schema);if(!setBlockType(a)(e))return!1;if(s){const l=o.serialize(e.selection.content().content,{escape:!1});s(e.tr.replaceSelectionWith(a.createAndFill({},l?e.schema.text(l):null)))}return!0},handlePaste=(o,e)=>{const s=e.clipboardData;if(!s)return!1;const a=getCodeData(s);if(!a)return!1;const{state:l}=o,{tr:u,schema:c,selection:d}=l,p=!!d.$from.parent.type.spec.code;return getLoggerFromState(l).event({domEvent:"paste",event:"paste-from-code-editor",editor:a.editor,editorMode:a.mode,empty:!a.value,inline:a.inline,dataTypes:Array.from(s.types)}),a.value?(insertCode({tr:u,schema:c,code:a,from:d.from,to:d.to,inCodeBlock:p}),o.dispatch(u.scrollIntoView()),e.preventDefault(),!0):!1};function insertCode({tr:o,schema:e,code:s,from:a,to:l,inCodeBlock:u}){u?o.insertText(s.value,a,l):s.inline?insertInlineCode(o,e,s.value):insertCodeBlock(o,e,s.value)}function insertInlineCode(o,e,s){const a=e.marks.code,l=a?[a.create()]:void 0,u=e.text(s,l);o.replaceSelectionWith(u,!1)}function insertCodeBlock(o,e,s){const a=codeBlockType(e),l=e.text(s),u=a.create(null,l);o.replaceSelectionWith(u)}function getCodeData(o){const e=o.getData(DataTransferType$1.Text);return e?isVSCode(o)?processVSCodePaste(o,e):isJetBrains(o)?processJetBrainsPaste(e):null:null}function processVSCodePaste(o,e){const s=tryParseVSCodeData(o);return{editor:"vscode",value:dedent(e),inline:isInlineCode(e),mode:s==null?void 0:s.mode}}function processJetBrainsPaste(o){return{editor:"jetbrains",value:dedent(o),inline:isInlineCode(o)}}function isInlineCode(o){return!o.includes(`
`)}const codeBlockPastePlugin=()=>new Plugin({props:{handleDOMEvents:{paste(o,e){return handlePaste(o,e)?(e.preventDefault(),!0):!1}}}}),CodeBlock=(o,e)=>{var a,l,u;const s={...e,lineWrapping:{enabled:((a=e.lineWrapping)==null?void 0:a.enabled)||!1},lineNumbers:{enabled:typeof((l=e.lineNumbers)==null?void 0:l.enabled)=="boolean"?e.lineNumbers.enabled:lineNumbersOptionsDefault.enabled,showByDefault:typeof((u=e.lineNumbers)==null?void 0:u.showByDefault)=="boolean"?e.lineNumbers.showByDefault:lineNumbersOptionsDefault.showByDefault}};o.use(CodeBlockSpecs,s),o.addKeymap(c=>{const{codeBlockKey:d}=s,h={Enter:newlineInCode,Backspace:resetCodeblock};return d&&(h[d]=withLogAction("code_block",setCodeBlockType(c))),h}),o.addInputRules(({schema:c})=>({rules:[codeBlockRule(codeBlockType(c))]})),o.addAction(cbAction,c=>{const d=codeBlockType(c.schema);return{isActive:h=>hasParentNodeOfType(d)(h.selection),isEnable:setCodeBlockType(c),run:setCodeBlockType(c)}}),o.addPlugin(codeBlockPastePlugin,o.Priority.High),isFunction(s.langs)?o.use(s.langs):o.use(CodeBlockHighlight,{langs:s.langs,lineNumbers:s.lineNumbers,lineWrapping:s.lineWrapping})};function codeBlockRule(o){return textblockTypeInputRule(/^```$/,o)}const wrapToDeflist=(o,e)=>{const s=findParentNode(a=>a.isTextblock)(o.selection);return s?(e==null||e(replaceParentNodeOfType(s.node.type,defListType(o.schema).create(null,[defTermType(o.schema).create(),defDescType(o.schema).create(null,s.node.copy(s.node.content))]))(o.tr).scrollIntoView()),!0):!1},splitDeflist=(o,e)=>{const{selection:s}=o;if(isNodeSelection(s))return!1;const a=findParentNode(h=>h.isTextblock)(s);if(!a||!(a.node.textContent===""))return!1;const u=s.$from.node(a.depth-1);if(!u||u.type!==defDescType(o.schema))return!1;const c=u.lastChild===a.node;if(u.childCount<2||!c)return!1;const d=o.tr;return e==null||e(d.delete(a.pos,a.pos+a.node.nodeSize).insert(d.mapping.map(s.$from.after(a.depth-2)),a.node.type.create(a.node.attrs))),!0},dlAction="toDefList",Deflist=(o,e)=>{o.use(DeflistSpecs,e),o.addKeymap(()=>({Enter:splitDeflist})),o.addAction(dlAction,()=>({isEnable:wrapToDeflist,run:wrapToDeflist}))};function wrapInList(o,e=null){return function(s,a){let{$from:l,$to:u}=s.selection,c=l.blockRange(u);if(!c)return!1;let d=a?s.tr:null;return wrapRangeInList(d,c,o,e)?(a&&a(d.scrollIntoView()),!0):!1}}function wrapRangeInList(o,e,s,a=null){let l=!1,u=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(s)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let h=c.resolve(e.start-2);u=new NodeRange(h,h,e.depth),e.endIndex<e.parent.childCount&&(e=new NodeRange(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),l=!0}let d=findWrapping(u,s,a,e);return d?(o&&doWrapInList(o,e,d,l,s),!0):!1}function doWrapInList(o,e,s,a,l){let u=Fragment.empty;for(let m=s.length-1;m>=0;m--)u=Fragment.from(s[m].type.create(s[m].attrs,u));o.step(new ReplaceAroundStep(e.start-(a?2:0),e.end,e.start,e.end,new Slice(u,0,0),s.length,!0));let c=0;for(let m=0;m<s.length;m++)s[m].type==l&&(c=m+1);let d=s.length-c,h=e.start+s.length-(a?2:0),p=e.parent;for(let m=e.startIndex,g=e.endIndex,y=!0;m<g;m++,y=!1)!y&&canSplit(o.doc,h,d)&&(o.split(h,d),h+=2*d),h+=p.child(m).nodeSize;return o}function splitListItem(o,e){return function(s,a){let{$from:l,$to:u,node:c}=s.selection;if(c&&c.isBlock||l.depth<2||!l.sameParent(u))return!1;let d=l.node(-1);if(d.type!=o)return!1;if(l.parent.content.size==0&&l.node(-1).childCount==l.indexAfter(-1)){if(l.depth==3||l.node(-3).type!=o||l.index(-2)!=l.node(-2).childCount-1)return!1;if(a){let g=Fragment.empty,y=l.index(-1)?1:l.index(-2)?2:3;for(let _=l.depth-y;_>=l.depth-3;_--)g=Fragment.from(l.node(_).copy(g));let A=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3;g=g.append(Fragment.from(o.createAndFill()));let T=l.before(l.depth-(y-1)),E=s.tr.replace(T,l.after(-A),new Slice(g,4-y,0)),v=-1;E.doc.nodesBetween(T,E.doc.content.size,(_,w)=>{if(v>-1)return!1;_.isTextblock&&_.content.size==0&&(v=w+1)}),v>-1&&E.setSelection(Selection$1.near(E.doc.resolve(v))),a(E.scrollIntoView())}return!0}let h=u.pos==l.end()?d.contentMatchAt(0).defaultType:null,p=s.tr.delete(l.pos,u.pos),m=h?[null,{type:h}]:void 0;return canSplit(p.doc,l.pos,2,m)?(a&&a(p.split(l.pos,2,m).scrollIntoView()),!0):!1}}function liftListItem$1(o){return function(e,s){let{$from:a,$to:l}=e.selection,u=a.blockRange(l,c=>c.childCount>0&&c.firstChild.type==o);return u?s?a.node(u.depth-1).type==o?liftToOuterList(e,s,o,u):liftOutOfList(e,s,u):!0:!1}}function liftToOuterList(o,e,s,a){let l=o.tr,u=a.end,c=a.$to.end(a.depth);u<c&&(l.step(new ReplaceAroundStep(u-1,c,u,c,new Slice(Fragment.from(s.create(null,a.parent.copy())),1,0),1,!0)),a=new NodeRange(l.doc.resolve(a.$from.pos),l.doc.resolve(c),a.depth));const d=liftTarget(a);if(d==null)return!1;l.lift(a,d);let h=l.doc.resolve(l.mapping.map(u,-1)-1);return canJoin(l.doc,h.pos)&&h.nodeBefore.type==h.nodeAfter.type&&l.join(h.pos),e(l.scrollIntoView()),!0}function liftOutOfList(o,e,s){let a=o.tr,l=s.parent;for(let A=s.end,T=s.endIndex-1,E=s.startIndex;T>E;T--)A-=l.child(T).nodeSize,a.delete(A-1,A+1);let u=a.doc.resolve(s.start),c=u.nodeAfter;if(a.mapping.map(s.end)!=s.start+u.nodeAfter.nodeSize)return!1;let d=s.startIndex==0,h=s.endIndex==l.childCount,p=u.node(-1),m=u.index(-1);if(!p.canReplace(m+(d?0:1),m+1,c.content.append(h?Fragment.empty:Fragment.from(l))))return!1;let g=u.pos,y=g+c.nodeSize;return a.step(new ReplaceAroundStep(g-(d?1:0),y+(h?1:0),g+1,y-1,new Slice((d?Fragment.empty:Fragment.from(l.copy(Fragment.empty))).append(h?Fragment.empty:Fragment.from(l.copy(Fragment.empty))),d?0:1,h?0:1),d?0:1)),e(a.scrollIntoView()),!0}function toList(o){return(e,s)=>{const a=findAnyParentList(e.schema)(e.selection);return a?(o===a.node.type||s==null||s(e.tr.setNodeMarkup(a.pos,o)),!0):wrapInList(o)(e,s)}}const joinPrevList=joinPreviousBlock({checkPrevNode:isListNode,skipNode:isListOrItemNode}),sink=(o,e,s)=>{const a=o.mapping.map(e.start),l=o.mapping.map(e.end),u=o.mapping.map(e.startIndex),c=e.parent,d=c.child(u-1),h=d.lastChild&&d.lastChild.type===c.type,p=Fragment.from(h?s.create():null),m=new Slice(Fragment.from(s.create(null,Fragment.from(c.type.create(null,p)))),h?3:1,0);return o.step(new ReplaceAroundStep(a-(h?3:1),l,a,l,m,1,!0)),!0};function sinkOnlySelectedListItem(o){return({tr:e,selection:s},a)=>{const{$from:l,$to:u}=s,c=l.blockRange(u,y=>y.childCount>0&&y.firstChild.type===o);if(!c)return!1;const{startIndex:d,parent:h,start:p,end:m}=c;if(d===0||h.child(d-1).type!==o)return!1;if(a){let y=m-1;for(;y>p;){const A=e.mapping.map(u.pos),T=e.doc.resolve(y),E=T.before(T.depth),_=e.doc.resolve(E).blockRange(T);if(_!=null&&_.start){const w=e.doc.resolve(_.start);if(_.start>A&&isListNode(w.parent)){y=_.start;const k=liftTarget(_);k!==null&&e.lift(_,k)}}y--}return sink(e,c,o),a(e.scrollIntoView()),!0}return!0}}var ListAction;(function(o){o.ToBulletList="toBulletList",o.ToOrderedList="toOrderedList",o.SinkListItem="sinkListItem",o.LiftListItem="liftListItem"})(ListAction||(ListAction={}));const actions={toBulletList:({schema:o})=>{const e=toList(blType(o));return{isActive:isIntoListOfType(ListNode.BulletList),isEnable:e,run:e}},toOrderedList:({schema:o})=>{const e=toList(olType(o));return{isActive:isIntoListOfType(ListNode.OrderedList),isEnable:e,run:e}},liftListItem:({schema:o})=>({isEnable:liftListItem$1(liType(o)),run:liftListItem$1(liType(o))}),sinkListItem:({schema:o})=>({isEnable:sinkOnlySelectedListItem(liType(o)),run:sinkOnlySelectedListItem(liType(o))})},ListsInputRulesExtension=(o,e)=>{o.addInputRules(({schema:s})=>{const a=[orderedListRule(olType(s))];if(e.bulletListInputRule!==!1){const l=bulletListRule(blType(s),e.bulletListInputRule);l&&a.push(l)}return{rules:a}})};function orderedListRule(o){return wrappingInputRule(/^(\d+)([.)])\s$/,o,e=>({[ListsAttr.Order]:Number(e[1]),[ListsAttr.Markup]:e[2]}),(e,s)=>s.childCount+s.attrs[ListsAttr.Order]===Number(e[1]))}function bulletListRule(o,e){const s=[];if((e==null?void 0:e.dash)!==!1&&s.push("-"),(e==null?void 0:e.plus)!==!1&&s.push("+"),(e==null?void 0:e.asterisk)!==!1&&s.push("*"),s.length===0)return null;const a=new RegExp(`^\\s*([${s.join("")}])\\s$`);return wrappingInputRule(a,o,l=>({[ListsAttr.Markup]:l[1]}))}const collapseListsPlugin=()=>new Plugin({appendTransaction(o,e,s){if(!o.some(h=>h.docChanged)||!(hasParentNode(isListNode)(s.selection)||hasParentNode(isListNode)(e.selection)))return null;const{tr:u}=s;let c=-1,d=0;for(;c!==d;){const h=findChildren(u.doc,isListNode,!0);c=d,d=collapseEmptyListItems(u,h)}return u.docChanged?u:null}});function collapseEmptyListItems(o,e){const s=o.steps.length;return e.reverse().forEach(a=>{const l=a.node,u=a.pos;getChildrenOfNode(l).reverse().forEach(({node:d,offset:h})=>{if(isListItemNode(d)){const{firstChild:p}=d,m=u+1+h;if(p&&isListNode(p)){const g=p.content,y=d.content.content.slice(1),A=y.length?g.append(Fragment.from(liType(o.doc.type.schema).create(null,y))):g,T=o.mapping.map(m),E=o.mapping.map(m+d.nodeSize);o.replaceWith(T,E,A);const v=findClosestTextNodePos(o.doc,T+g.size);v&&o.setSelection(TextSelection.create(o.doc,v))}}})}),o.steps.length-s}function findClosestTextNodePos(o,e){for(;e<o.content.size;){const s=o.nodeAt(e);if(s&&s.isText)return e;e++}return null}const mergeListsPlugin=()=>new Plugin({appendTransaction(o,e,s){if(!o.some(d=>d.docChanged)||!(hasParentNode(isListNode)(s.selection)||hasParentNode(isListNode)(e.selection)))return null;const{tr:u}=s,c=findChildren(u.doc,isListNode,!0);return mergeAdjacentNodesWithSameType(u,c),u.docChanged?u:null}});function mergeAdjacentNodesWithSameType(o,e){const s={};for(const a of e){const l=a.pos,u=l+a.node.nodeSize;s[u]=a.node;const c=s[l];(c==null?void 0:c.type)===a.node.type&&(o.join(o.mapping.map(l)),s[l]=void 0)}}const Lists=(o,e)=>{o.use(ListsSpecs),o.addKeymap(({schema:s})=>{const{ulKey:a,olKey:l}=e??{},u={};return a&&(u[a]=withLogAction("bulletList",toList(blType(s)))),l&&(u[l]=withLogAction("orderedList",toList(olType(s)))),{Tab:sinkOnlySelectedListItem(liType(s)),"Shift-Tab":liftListItem$1(liType(s)),"Mod-[":liftListItem$1(liType(s)),"Mod-]":sinkOnlySelectedListItem(liType(s)),...u}},o.Priority.High),o.addKeymap(({schema:s})=>({Enter:splitListItem(liType(s)),Backspace:joinPrevList}),o.Priority.Low),o.use(ListsInputRulesExtension,{bulletListInputRule:e==null?void 0:e.ulInputRules}),o.addPlugin(mergeListsPlugin),o.addPlugin(collapseListsPlugin),o.addAction(ListAction.ToBulletList,actions.toBulletList).addAction(ListAction.ToOrderedList,actions.toOrderedList).addAction(ListAction.SinkListItem,actions.sinkListItem).addAction(ListAction.LiftListItem,actions.liftListItem)},isIntoTable=o=>hasParentNodeOfType(o.schema.nodes[TableNode.Table])(o.selection),findParentTable=o=>findParentNodeOfType(o.schema.nodes[TableNode.Table])(o.selection),findParentHeadOnPos=o=>findParentNodeOfTypeClosestToPos(o,o.doc.type.schema.nodes[TableNode.Head]),findParentBody=o=>findParentNodeOfType(o.schema.nodes[TableNode.Body])(o.selection),findParentBodyOnPos=o=>findParentNodeOfTypeClosestToPos(o,o.doc.type.schema.nodes[TableNode.Body]),findParentRow=o=>findParentNodeOfType(o.schema.nodes[TableNode.Row])(o.selection),findParentRowOnPos=o=>findParentNodeOfTypeClosestToPos(o,o.doc.type.schema.nodes[TableNode.Row]),findParentCell=o=>findParentNodeOfType([o.schema.nodes[TableNode.HeaderCell],o.schema.nodes[TableNode.DataCell]])(o.selection),findParentCellOnPos=o=>findParentNodeOfTypeClosestToPos(o,[o.doc.type.schema.nodes[TableNode.HeaderCell],o.doc.type.schema.nodes[TableNode.DataCell]]),findTableRows=(o,e)=>findChildrenByType(o,e.nodes[TableNode.Row]),findTableCells=(o,e)=>findChildren(o,s=>[e.nodes[TableNode.HeaderCell].name,e.nodes[TableNode.DataCell].name].includes(s.type.name)),mdTamplate=`

| Heading | Heading |
| ------- | ------- |
| Text    | Text    |
| Text    | Text    |

`.trim(),createTableFactory=o=>(e,s)=>{if(isIntoTable(e))return!1;if(s){const a=o.parse(mdTamplate);s(e.tr.replaceSelectionWith(a).scrollIntoView())}return!0},removeTable=(o,e)=>isIntoTable(o)?(e==null||e(removeParentNodeOfType(o.schema.nodes[TableNode.Table])(o.tr)),!0):!1,createTableAction=({markupParser:o})=>({isActive:isIntoTable,isEnable:createTableFactory(o),run:createTableFactory(o)}),deleteTableAction={isEnable:removeTable,run:removeTable},moveToNextRow=(o,e,s)=>{const a=findParentTableFromPos(o);if(!a)return!1;const l=findParentHeadOnPos(o),u=findParentBodyOnPos(o);if(!l&&!u)return!1;const c=findParentRowOnPos(o),d=findParentCellOnPos(o);if(!c||!d)return!1;const h=o.index(d.depth-1),p=o.index(c.depth-1);if(!s)return!0;const m=(A,T,E)=>{const v=getChildByIndex(T,h);if(v){const _=E+1+v.offset;A.setSelection(TextSelection.create(A.doc,_+v.node.nodeSize-1))}else{const _=A.doc.resolve(E+T.nodeSize-1);A.setSelection(TextSelection.near(_,-1))}},g=A=>{const T=a.pos+a.node.nodeSize;A.insert(T,pType(e.schema).create()),A.setSelection(TextSelection.create(A.doc,T+1))},y=e.tr;if(l){const A=getChildByIndex(a.node,a.node.childCount-1);A&&A.node!==l.node&&A.node.firstChild?m(y,A.node.firstChild,a.start+A.offset+1):g(y)}else{const A=getChildByIndex(u.node,p+1);A?m(y,A.node,u.start+A.offset):g(y)}return s(y.scrollIntoView()),!0},moveToNextRowCommand=(o,e)=>moveToNextRow(o.selection.$head,o,e)||moveToNextRow(o.selection.$anchor,o,e),en$e={"column.add.before":"Add column before","column.add.after":"Add column after","column.remove":"Remove column","column.remove.multiple":"Remove columns","row.add.before":"Add row before","row.add.after":"Add row after","row.remove":"Remove row","row.remove.multiple":"Remove rows","cells.clear":"Clear cells","table.remove":"Remove table","table.menu.cell.align.left":"Align cell content to the left","table.menu.cell.align.right":"Align cell content to the right","table.menu.cell.align.center":"Align cell content to the center","table.menu.row.add":"Add row after","table.menu.row.remove":"Remove row","table.menu.column.add":"Add column after","table.menu.column.remove":"Remove column","table.menu.convert.yfm":"Convert to YFM table","table.menu.table.remove":"Remove table"},ru$e={"column.add.before":"  ","column.add.after":"  ","column.remove":" ","column.remove.multiple":" ","row.add.before":"  ","row.add.after":"  ","row.remove":" ","row.remove.multiple":" ","cells.clear":" ","table.remove":" ","table.menu.cell.align.left":"     ","table.menu.cell.align.right":"     ","table.menu.cell.align.center":"    ","table.menu.row.add":"  ","table.menu.row.remove":" ","table.menu.column.add":"  ","table.menu.column.remove":" ","table.menu.convert.yfm":"   YFM","table.menu.table.remove":" "},KEYSET$9="yfm-table",i18n$9=registerKeyset(KEYSET$9,{en:en$e,ru:ru$e});var YfmTableNode;(function(o){o.Table="yfm_table",o.Body="yfm_tbody",o.Row="yfm_tr",o.Cell="yfm_td"})(YfmTableNode||(YfmTableNode={}));var YfmTableAttr;(function(o){o.Colspan="colspan",o.Rowspan="rowspan",o.CellAlign="data-cell-align"})(YfmTableAttr||(YfmTableAttr={}));const yfmTableType=nodeTypeFactory(YfmTableNode.Table),yfmTableBodyType=nodeTypeFactory(YfmTableNode.Body),yfmTableRowType=nodeTypeFactory(YfmTableNode.Row),yfmTableCellType=nodeTypeFactory(YfmTableNode.Cell),convertToYfmTable=(o,e)=>{const s=findParentTable(o);if(!s)return!1;if(e){const{schema:a}=o,l=[],u=findTableRows(s.node,o.schema);for(const d of u){const h=[],p=findTableCells(d.node,o.schema);for(const m of p)h.push(yfmTableCellType(a).create(null,pType(a).create(null,m.node.content)));l.push(yfmTableRowType(a).create(null,h))}const c=yfmTableType(a).create(null,yfmTableBodyType(a).create(null,l));e(o.tr.replaceWith(s.pos,s.pos+s.node.nodeSize,c))}return!0};function factory(o){return{isActive(e){const s=findParentCell(e);return(s==null?void 0:s.node.attrs[TableAttrs.CellAlign])===o},isEnable(e){return isIntoTable(e)},run(e,s){const a=findParentTable(e),l=findParentRow(e),u=findParentCell(e);if(!u||!l||!a)return;let c=-1;if(l.node.forEach((p,m,g)=>{p===u.node&&(c=g)}),c<0)return;const d=e.tr,h=findTableRows(a.node,e.schema);for(const p of h){const g=findTableCells(p.node,e.schema)[c],y=a.pos+p.pos+g.pos+2;d.setNodeMarkup(y,void 0,{...g.node.attrs,[TableAttrs.CellAlign]:o})}s(d)}}}const setCellLeftAlign=factory(CellAlign.Left),setCellCenterAlign=factory(CellAlign.Center),setCellRightAlign=factory(CellAlign.Right),addRowAfter=(o,e,s)=>findParentBody(o)?addRowAfter$1(o,e):!1,addRow={isEnable:addRowAfter,run:addRowAfter},deleteRow={isEnable:removeCurrentRow,run:removeCurrentRow},addColumn={isEnable:addColumnAfter,run:addColumnAfter},deleteColumn={isEnable:removeCurrentColumn,run:removeCurrentColumn},innerActions={setCellLeftAlign,setCellCenterAlign,setCellRightAlign,addRow,deleteRow,addColumn,deleteColumn},TableCellFloatingButton=({dom:o,actions:e})=>o?jsxRuntimeExports.jsx(Popup,{open:!0,keepMounted:!1,hasArrow:!1,anchorElement:o,offset:{crossAxis:2,mainAxis:-12},placement:"left-start",children:jsxRuntimeExports.jsx(DropdownMenuExport,{icon:jsxRuntimeExports.jsx(Icon,{data:Ellipsis,size:12,className:"table-cell-floating-icon"}),defaultSwitcherClassName:"table-cell-floating-button",items:e.map(buildMenuItem)})}):null;TableCellFloatingButton.displayName="TableCellFloatingButton";function buildMenuItem(o){if(Array.isArray(o))return o.map(buildMenuItem);const{action:e,text:s}=o,a=e.isActive(),l=!a&&!e.isEnable();return{text:s,action:()=>e.run({}),active:a,disabled:l}}const cl=class cl{constructor(e,s,a){qe(this,$i);qe(this,Go);qe(this,zo);qe(this,Bi);$e(this,$i,e),$e(this,Go,s),$e(this,zo,a),$e(this,Bi,getReactRendererFromState(e.state).createItem("table-cell-tooltip",()=>jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:jsxRuntimeExports.jsx(TableCellFloatingButton,{actions:pe(this,Go),dom:cl.findCellDom(pe(this,$i),pe(this,zo))})})))}static findCellDom(e,s){return findParentDomRefOfType(s,e.domAtPos.bind(e))(e.state.selection)}update(e){$e(this,$i,e),pe(this,Bi).rerender()}destroy(){pe(this,Bi).remove()}};$i=new WeakMap,Go=new WeakMap,zo=new WeakMap,Bi=new WeakMap;let TableCellContextView=cl;const tableCellContextPlugin=()=>new Plugin({view(o){const{schema:e}=o.state,s=bindActions({...innerActions,deleteTable:deleteTableAction,convert:{isEnable:convertToYfmTable,run:convertToYfmTable}})(o);return new TableCellContextView(o,[[{action:s.setCellLeftAlign,text:i18n$9("table.menu.cell.align.left")},{action:s.setCellCenterAlign,text:i18n$9("table.menu.cell.align.center")},{action:s.setCellRightAlign,text:i18n$9("table.menu.cell.align.right")}],[{action:s.addRow,text:i18n$9("table.menu.row.add")},{action:s.deleteRow,text:i18n$9("table.menu.row.remove")},{action:s.addColumn,text:i18n$9("table.menu.column.add")},{action:s.deleteColumn,text:i18n$9("table.menu.column.remove")}],{action:s.convert,text:i18n$9("table.menu.convert.yfm")},{action:s.deleteTable,text:i18n$9("table.menu.table.remove")}],[e.nodes[TableNode.HeaderCell],e.nodes[TableNode.DataCell]])}}),Table$1=o=>{o.use(TableSpecs),o.addKeymap(()=>({Tab:goToNextCell("next"),"Shift-Tab":goToNextCell("prev"),Enter:moveToNextRowCommand,"Shift-Enter":moveToNextRowCommand})),o.addAction("createTable",createTableAction),o.addAction("deleteTable",()=>deleteTableAction),o.addPlugin(tableCellContextPlugin)};var HeadingAction;(function(o){o.ToH1="toH1",o.ToH2="toH2",o.ToH3="toH3",o.ToH4="toH4",o.ToH5="toH5",o.ToH6="toH6"})(HeadingAction||(HeadingAction={}));const hasParentHeading=o=>e=>hasParentNode(s=>s.type===headingType(e.schema)&&s.attrs[headingLevelAttr]===o)(e.selection);function headingRule(o,e){return textblockTypeInputRule(new RegExp("^(#{1,"+e+"})\\s$"),o,s=>({[headingLevelAttr]:s[1].length}))}const headingAction$1=(o,e)=>{const s=setBlockType(o,{[headingLevelAttr]:e});return{isActive:hasParentHeading(e),isEnable:s,run:s}},resetHeading=(o,e,s)=>{const{selection:a}=o;return a.empty&&a.$from.parent.type===headingType(o.schema)&&(s!=null&&s.endOfTextblock("backward",o))?toParagraph(o,e):!1},Heading=(o,e)=>{o.use(HeadingSpecs,e),o.addKeymap(({schema:s})=>{const{h1Key:a,h2Key:l,h3Key:u,h4Key:c,h5Key:d,h6Key:h}=e??{},p=g=>setBlockType(headingType(s),{[headingLevelAttr]:g}),m={Backspace:resetHeading};return a&&(m[a]=withLogAction("heading1",p(1))),l&&(m[l]=withLogAction("heading2",p(2))),u&&(m[u]=withLogAction("heading3",p(3))),c&&(m[c]=withLogAction("heading4",p(4))),d&&(m[d]=withLogAction("heading5",p(5))),h&&(m[h]=withLogAction("heading6",p(6))),m}).addInputRules(({schema:s})=>({rules:[headingRule(headingType(s),6)]})),o.addAction(HeadingAction.ToH1,({schema:s})=>headingAction$1(headingType(s),1)).addAction(HeadingAction.ToH2,({schema:s})=>headingAction$1(headingType(s),2)).addAction(HeadingAction.ToH3,({schema:s})=>headingAction$1(headingType(s),3)).addAction(HeadingAction.ToH4,({schema:s})=>headingAction$1(headingType(s),4)).addAction(HeadingAction.ToH5,({schema:s})=>headingAction$1(headingType(s),5)).addAction(HeadingAction.ToH6,({schema:s})=>headingAction$1(headingType(s),6))},hrAction="hRule",HorizontalRule=o=>{o.use(HorizontalRuleSpecs),o.addInputRules(e=>({rules:[nodeInputRule(/^(---|___|\*\*\*)$/,s=>[horizontalRuleType(e.schema).create({[horizontalRuleMarkupAttr]:s}),pType(e.schema).create()],1)]})),o.addAction(hrAction,({schema:e})=>{const s=addHr(horizontalRuleType(e));return{isActive:a=>isHrSelection(a.selection),isEnable:s,run:s}})},addHr=o=>(e,s)=>{if(isHrSelection(e.selection))return!0;if(isNodeSelection(e.selection))return s==null||s(e.tr.replaceSelectionWith(o.create()).scrollIntoView()),!0;const a=get$Cursor(e.selection);if(!a||a.parent.type.spec.complex)return!1;if(!s)return!0;const{tr:l}=e;if(a.parent.type===pType(e.schema)&&a.parent.nodeSize===2){const c=a.before();l.insert(c,o.create())}else{const c=a.after();l.insert(c,[o.create(),pType(e.schema).create()]),l.setSelection(TextSelection.create(l.doc,c+2))}return s(l.scrollIntoView()),!0};function isHrSelection(o){return isNodeSelection(o)&&o.node.type.name===horizontalRuleNodeName}var checkbox$2={},hasRequiredCheckbox$1;function requireCheckbox$1(){return hasRequiredCheckbox$1||(hasRequiredCheckbox$1=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.checkboxReplace=o.CheckboxTokenType=o.pattern=void 0,o.pattern=/^\[(X|\s|\_|\-)\]\s(.*)/i,o.CheckboxTokenType={Checkbox:"checkbox",CheckboxOpen:"checkbox_open",CheckboxClose:"checkbox_close",CheckboxInput:"checkbox_input",CheckboxLabel:"checkbox_label",CheckboxLabelOpen:"checkbox_label_open",CheckboxLabelClose:"checkbox_label_close"};function e(h,p){var m;if(h[p].type!=="paragraph_open"||h[p+1].type!=="inline")return!1;const g=(m=h[p+1].children)===null||m===void 0?void 0:m[0];return(g==null?void 0:g.type)==="text"&&o.pattern.test(g.content)}const s=function(h,p){let m=0;const y=Object.assign({divClass:"checkbox",idPrefix:"checkbox",disabled:!0},p),A=function(T,E){let v;const _=[];v=new T.Token(o.CheckboxTokenType.CheckboxOpen,"div",1),v.block=!0,v.map=[E.startLine,E.endLine],v.attrs=[["class",y.divClass]],_.push(v);const w=y.idPrefix+m;return m+=1,v=new T.Token(o.CheckboxTokenType.CheckboxInput,"input",0),v.block=!0,v.map=[E.startLine,E.endLine],v.attrs=[["type","checkbox"],["id",w]],y.disabled&&v.attrSet("disabled",""),E.checked===!0&&v.attrSet("checked","true"),_.push(v),v=new T.Token(o.CheckboxTokenType.CheckboxLabelOpen,"label",1),v.attrs=[["for",w]],_.push(v),v=new T.Token("inline","",0),v.content=E.content,v.children=E.tokens,v.map=[E.startLine,E.endLine],_.push(v),v=new T.Token(o.CheckboxTokenType.CheckboxLabelClose,"label",-1),v.block=!0,v.map=[E.startLine,E.endLine],_.push(v),v=new T.Token(o.CheckboxTokenType.CheckboxClose,"div",-1),v.block=!0,v.map=[E.startLine,E.endLine],_.push(v),_};return function(T){var E,v;const _=T.tokens;for(let w=0;w<_.length;w++){if(!e(_,w))continue;const k=(v=(E=_[w].map)===null||E===void 0?void 0:E[0])!==null&&v!==void 0?v:NaN,I=a(_[w+1],k),P=[];for(const N of I){const L=N.tokens[0];L.content=L.content.slice(4),N.content=N.content.trim().slice(4),P.push(...A(T,N))}P.length>0&&(_.splice(w,3,...P),w+=P.length-1)}}};o.checkboxReplace=s;function a(h,p){const m=l(h);return u(m,p)}function l(h){const p=h.children||[],m=h.content.split(`
`),g=[];let y=0;for(const A of p)g[y]||(g[y]={tokens:[],content:m[y]}),g[y].tokens.push(A),d(A)&&(y+=1);return g}function u(h,p){var m;const g=[];let y=-1;for(let A=0;A<h.length;A++){const T=h[A],E=T==null?void 0:T.tokens[0];if(!E)continue;let v;if(E.type==="text"&&(v=E.content.match(o.pattern))){const _=(m=g[y])===null||m===void 0?void 0:m.tokens.at(-1);_&&d(_)&&g[y].tokens.splice(-1),y+=1,g[y]||(g[y]={tokens:[],content:"",checked:c(v[1]),startLine:p+A,endLine:p+A+1})}g[y].tokens.push(...T.tokens),g[y].content+=T.content+`
`,g[y].endLine=p+A+1}return g}function c(h){return h==="X"||h==="x"}function d(h){return h.type==="softbreak"||h.type==="hardbreak"}})(checkbox$2)),checkbox$2}var checkbox_2,hasRequiredCheckbox;function requireCheckbox(){if(hasRequiredCheckbox)return checkbox_2;hasRequiredCheckbox=1;const o=requireCheckbox$1();return checkbox_2=(s,a)=>(s.core.ruler.push("checkbox",(0,o.checkboxReplace)(s,a)),s),checkbox_2}var checkboxExports=requireCheckbox();const checkboxPlugin=getDefaultExportFromCjs$1(checkboxExports);var CheckboxNode;(function(o){o.Checkbox="checkbox",o.Input="checkbox_input",o.Label="checkbox_label"})(CheckboxNode||(CheckboxNode={}));const CheckboxAttr={Class:"class",Type:"type",Id:"id",Checked:"checked",For:"for",Line:"data-line",Tight:"data-tight"},idPrefix="yfm-editor-checkbox",b$w=cn("checkbox"),checkboxType=nodeTypeFactory(CheckboxNode.Checkbox),checkboxLabelType=nodeTypeFactory(CheckboxNode.Label),checkboxInputType=nodeTypeFactory(CheckboxNode.Input),CHECKBOX_OPEN_TOKEN="checkbox_open",CHECKBOX_CLOSE_TOKEN="checkbox_close",getCheckboxAttrs=(o,e,s)=>{const a=checkboxIsTight(e,s);return{...o.attrs?Object.fromEntries(o.attrs):{},[CheckboxAttr.Tight]:a}},getAttrs$3=o=>o.attrs?Object.fromEntries(o.attrs):{},parserTokens$4={[CheckboxNode.Checkbox]:{name:CheckboxNode.Checkbox,type:"block",getAttrs:getCheckboxAttrs},[CheckboxNode.Input]:{name:CheckboxNode.Input,type:"node",getAttrs:getAttrs$3},[CheckboxNode.Label]:{name:CheckboxNode.Label,type:"block",getAttrs:getAttrs$3}};function checkboxIsTight(o,e){var l,u,c;let s,a;for(let d=e+1;d<o.length;d++)if(o[d].type===CHECKBOX_CLOSE_TOKEN){s=(l=o[d].map)==null?void 0:l[1],((u=o[d+1])==null?void 0:u.type)===CHECKBOX_OPEN_TOKEN&&(a=(c=o[d+1].map)==null?void 0:c[0]);break}return!Number.isFinite(s)||!Number.isFinite(a)?null:s===a}const DEFAULT_LABEL_PLACEHOLDER="Checkbox",getSchemaSpecs$4=(o,e)=>({[CheckboxNode.Checkbox]:{group:"block checkbox",content:`${CheckboxNode.Input} ${CheckboxNode.Label}`,selectable:!0,allowSelection:!1,attrs:{[CheckboxAttr.Class]:{default:b$w(null,"checkbox")},[CheckboxAttr.Line]:{default:null},...o!=null&&o.multiline?{[CheckboxAttr.Tight]:{default:null}}:void 0},parseDOM:[{tag:"div.checkbox",priority:100,getContent(s,a){if(s instanceof HTMLElement){const l=s.querySelector("input[type=checkbox]");if(l&&l instanceof HTMLInputElement){const u=findLabelForInput(l);return createCheckboxFragment(a,l.checked,u==null?void 0:u.textContent)}}return Fragment.empty}},{tag:"input[type=checkbox]",priority:50,getContent(s,a){if(s instanceof HTMLInputElement){const l=findLabelForInput(s);return createCheckboxFragment(a,s.checked,l==null?void 0:l.textContent)}return Fragment.empty}}],toDOM(s){return["div",s.attrs,0]},complex:"root"},[CheckboxNode.Input]:{group:"block checkbox",parseDOM:[],attrs:{[CheckboxAttr.Type]:{default:"checkbox"},[CheckboxAttr.Id]:{default:null},[CheckboxAttr.Checked]:{default:null}},toDOM(s){return["div",s.attrs]},selectable:!1,allowSelection:!1,complex:"leaf"},[CheckboxNode.Label]:{content:"inline*",group:"block checkbox",parseDOM:[{tag:`span[class="${b$w("label")}"]`,getAttrs:s=>({[CheckboxAttr.For]:s.getAttribute(CheckboxAttr.For)||""})},{tag:"input[type=checkbox] ~ label",ignore:!0,consuming:!0}],attrs:{[CheckboxAttr.For]:{default:null}},escapeText:!1,placeholder:{content:(e==null?void 0:e[CheckboxNode.Label])??(o==null?void 0:o.checkboxLabelPlaceholder)??DEFAULT_LABEL_PLACEHOLDER,alwaysVisible:!0},toDOM(s){return["span",{...s.attrs,class:b$w("label")},0]},selectable:!1,allowSelection:!1,disableGapCursor:!0,canContainBreaks:!!(o!=null&&o.multiline),complex:"leaf"}});function findNextSiblingLabel(o){const e=o.nextElementSibling;return e instanceof HTMLLabelElement?e:null}function findLabelForInput(o){var e;return((e=o.labels)==null?void 0:e[0])||findNextSiblingLabel(o)}function createCheckboxFragment(o,e,s){return Fragment.from([checkboxInputType(o).create({[CheckboxAttr.Checked]:e?"true":null}),checkboxLabelType(o).create(null,s?o.text(s):null)])}const serializerTokens$3={[CheckboxNode.Checkbox]:(o,e,s,a)=>{var c,d;if(o.renderInline(e),!((c=e.type.spec.attrs)!=null&&c[CheckboxAttr.Tight])){o.closeBlock(e);return}const l=e.attrs[CheckboxAttr.Tight],u=((d=s.maybeChild(a+1))==null?void 0:d.type.name)===CheckboxNode.Checkbox;l===!1||!u?o.closeBlock(e):o.ensureNewLine()},[CheckboxNode.Input]:(o,e)=>{const s=e.attrs[CheckboxAttr.Checked]==="true";o.write(`[${s?"X":" "}] `)},[CheckboxNode.Label]:(o,e,s,a)=>{if((!e.content.size||e.textContent.trim().length===0)&&a!==0){o.write(getPlaceholderContent(e));return}a||o.write("[ ] "),o.renderInline(e)}},CheckboxSpecs=(o,e)=>{const s=getSchemaSpecs$4(e,o.context.get("placeholder"));o.configureMd(a=>a.use(checkboxPlugin,{idPrefix,divClass:b$w(null,"checkbox")})).addNode(CheckboxNode.Checkbox,()=>({spec:s[CheckboxNode.Checkbox],toMd:serializerTokens$3[CheckboxNode.Checkbox],fromMd:{tokenSpec:parserTokens$4[CheckboxNode.Checkbox]},view:e.checkboxView})).addNode(CheckboxNode.Input,()=>({spec:s[CheckboxNode.Input],toMd:serializerTokens$3[CheckboxNode.Input],fromMd:{tokenSpec:parserTokens$4[CheckboxNode.Input]},view:e.inputView})).addNode(CheckboxNode.Label,()=>({spec:s[CheckboxNode.Label],toMd:serializerTokens$3[CheckboxNode.Label],fromMd:{tokenSpec:parserTokens$4[CheckboxNode.Label],tokenName:"checkbox_label"},view:e.labelView}))},createCheckbox=(o,e)=>checkboxType(o).create({},[checkboxInputType(o).create(),checkboxLabelType(o).create({},e)]),addCheckboxCmd=(o,e)=>{function s(d,h,p){return d.insert(h,createCheckbox(o.schema,p)),d.setSelection(TextSelection.create(d.doc,h+3))}if(isNodeSelection(o.selection)&&rootOrNonComplex(o.selection.node)){const d=o.selection.to;return e==null||e(s(o.tr,d).scrollIntoView()),!0}const a=get$Cursor(o.selection);if(!a)return!1;if(a.parent.type===checkboxLabelType(o.schema)&&a.node(a.depth-1).type===checkboxType(o.schema)){const d=a.after(a.depth-1);return e==null||e(s(o.tr,d).scrollIntoView()),!0}if(!rootOrNonComplex(a.parent))return!1;if(!e)return!0;const{tr:u}=o;if(a.parent.type===pType(o.schema)){const d=a.before(),h=a.after();u.replaceWith(d,h,createCheckbox(o.schema,a.parent.content)),u.setSelection(TextSelection.create(u.doc,a.pos+2))}else{const d=a.after();s(u,d)}return e(u.scrollIntoView()),!0},addCheckbox=()=>({isEnable:addCheckboxCmd,run:addCheckboxCmd});function rootOrNonComplex(o){const{complex:e}=o.type.spec;return!e||e==="root"}const Xs=class Xs{constructor(e,s,a){oe(this,"dom");oe(this,"_node");oe(this,"_view");oe(this,"_getPos");oe(this,"_onInputClick",e=>{if(e.target instanceof HTMLInputElement){const{checked:s}=e.target,a=this._getPos();a!==void 0&&this._view.dispatch(this._view.state.tr.setNodeAttribute(a,CheckboxAttr.Checked,s?"true":null))}this._view.focus()});this._node=e,this._view=s,this._getPos=a,this.dom=this._createDomElem(),this._applyNodeAttrsToDomElem()}ignoreMutation(){return!0}update(e){return e.type!==this._node.type?!1:(this._node=e,this._applyNodeAttrsToDomElem(),!0)}destroy(){this.dom.removeEventListener("click",this._onInputClick)}_createDomElem(){const e=document.createElement("input");return e.setAttribute("class",b$w("input")),e.addEventListener("click",this._onInputClick),e}_applyNodeAttrsToDomElem(){const{dom:e,_node:s}=this;for(const[l,u]of Object.entries(s.attrs))u?e.setAttribute(l,u):e.removeAttribute(l);const a=s.attrs[CheckboxAttr.Checked]==="true";this.dom.checked=a}};oe(Xs,"create",(e,s,a)=>new Xs(e,s,a));let CheckboxInputView=Xs;const splitCheckbox=o=>(e,s)=>{const{$from:a,$to:l}=e.selection,{schema:u}=e,c=findParentNodeOfType(checkboxLabelType(u))(e.selection);if(!c)return!1;const d=findParentNodeOfType(checkboxType(u))(e.selection);if(c.node.content.size===0&&d)return s==null||s(e.tr.replaceWith(d.pos,d.pos+d.node.nodeSize,pType(u).create()).scrollIntoView()),!0;if(a.pos===l.pos){const{tr:h}=e,p=Fragment.from(a.parent.cut(a.parentOffset).content),m=o?pType(e.schema).create({},p):checkboxType(u).create({},[checkboxInputType(u).create(),checkboxLabelType(u).create({},p)]);return h.insert(a.after(),[m]),h.replace(c.start+a.parentOffset,c.pos+c.node.nodeSize),h.setSelection(new TextSelection(h.doc.resolve(h.selection.$from.after()+(o?2:4)))),isBreakNode(a.nodeBefore)&&h.replaceWith(a.pos-1,a.pos,Fragment.empty),s==null||s(h),!0}return!1},removeCheckbox=(o,e)=>{const s=findParentNodeOfType(checkboxLabelType(o.schema))(o.selection),a=findParentNodeOfType(checkboxType(o.schema))(o.selection),{selection:l}=o,{from:u,to:c}=l;if(!s||!a)return!1;if(u-s.pos-2<0&&u===c&&!isWholeSelection(l)){const{tr:h}=o;return e==null||e(h.replaceWith(a.pos,a.pos+a.node.nodeSize,pType(o.schema).create(null,s.node.content)).setSelection(new TextSelection(h.doc.resolve(o.selection.from-2)))),!0}return!1},keymapPlugin=o=>keymap$1({Enter:splitCheckbox(),Backspace:removeCheckbox,...o.multiline?void 0:{"Shift-Enter":splitCheckbox(!0)}}),fixPastePlugin=()=>new Plugin({props:{transformPasted(o){const{firstChild:e}=o.content;return e&&e.type===checkboxType(e.type.schema)?new Slice(o.content,0,0):o}}}),checkboxAction="addCheckbox",Checkbox=(o,e)=>{o.use(CheckboxSpecs,{...e,inputView:()=>CheckboxInputView.create}),o.addPlugin(()=>keymapPlugin(e),o.Priority.High).addPlugin(fixPastePlugin).addAction(checkboxAction,()=>addCheckbox()).addInputRules(({schema:s})=>({rules:[nodeInputRule(/^\[(\s?)\]\s$/,checkboxType(s).createAndFill({},checkboxInputType(s).create()),2)]}))};var dist$2={},hasRequiredDist$1;function requireDist$1(){return hasRequiredDist$1||(hasRequiredDist$1=1,(function(o){var e=Object.defineProperty,s=m=>e(m,"__esModule",{value:!0}),a=(m,g)=>{for(var y in g)e(m,y,{get:g[y],enumerable:!0})};s(o),a(o,{colorPlugin:()=>h,default:()=>p});var l;(function(m){m[m.OpenColorName=123]="OpenColorName",m[m.CloseColorName=125]="CloseColorName",m[m.OpenContent=40]="OpenContent",m[m.CloseContent=41]="CloseContent",m[m.Escape=92]="Escape"})(l||(l={}));function u(m,g){let y=0,A=g-1;for(;A>=0&&m.charCodeAt(A)===l.Escape;)y++,A--;return y%2===1}var c=(m,g,y,A=!1)=>{let T=1,E=!1,v,_=-1;const w=m.posMax,R=m.pos;for(m.pos=g+1;m.pos<w;){const k=m.src.charCodeAt(m.pos);if(!(A&&u(m.src,m.pos))&&k===l.CloseColorName&&(T--,T===0)){E=!0;break}if(v=m.pos,m.md.inline.skipToken(m),!(A&&u(m.src,m.pos))&&k===l.OpenColorName)if(v===m.pos-1)T++;else return m.pos=R,-1}return E&&(_=m.pos),m.pos=R,_},d=(m,g,y=!1)=>{let A=g;const{posMax:T,src:E}=m;if(A>=T||E.charCodeAt(A)!==l.OpenContent)return-1;A++;let v=1;for(;A<T;){const _=E.charCodeAt(A);if(y&&u(E,A)){A++;continue}if(_===l.CloseContent){if(v--,v===0)return A}else _===l.OpenContent&&v++;A++}return-1},h=(m,{defaultClassName:g="yfm-colorify",inline:y=!1,escape:A=!1}={})=>{const T=(E,v)=>{const _=E.posMax;if(E.src.charCodeAt(E.pos)!==l.OpenColorName||A&&u(E.src,E.pos))return!1;const w=E.pos+1,R=c(E,E.pos,!0,A);if(R<0)return!1;const k=E.src.substring(w,R),I=R+2,P=d(E,R+1,A);if(P<0)return!1;if(!v){E.pos=I,E.posMax=P;const N=E.push("color_open","span",1);N.attrs=[["class",[`${g}`,`${g}--${k}`].join(" ")]],y&&N.attrs.push(["style",`color: ${k};`]),N.info=k,E.md.inline.tokenize(E);const L=E.push("color_close","span",-1);L.info=k}return E.pos=P+1,E.posMax=_,!0};m.inline.ruler.before("emphasis","color",T)},p=h})(dist$2)),dist$2}var distExports=requireDist$1();const color=distExports.colorPlugin,colorMarkName="color",colorClassName="yfm-colorify",domColorAttr="data-color",colorType=markTypeFactory(colorMarkName);function getColorName(o){var s;const e=/^(yfm|md)-colorify--(\w+)$/;return(s=o.match(e))==null?void 0:s[2]}const ColorSpecs=(o,e)=>{const{validateClassNameColorName:s,parseStyleColorValue:a}=e,l=u=>u.use(color,{escape:!0,defaultClassName:colorClassName});o.configureMd(u=>u.use(l,{defaultClassName:colorClassName,inline:!1})).addMark(colorMarkName,()=>({spec:{attrs:{[colorMarkName]:{}},parseDOM:[{tag:"span",preserveWhitespace:!1,getAttrs(u){if(typeof u=="string")return!1;for(const c of Array.from(u.classList)){const d=getColorName(c);if(d&&((s==null?void 0:s(d))??!0))return{[colorMarkName]:d}}return!1}},{style:"color",preserveWhitespace:!1,getAttrs(u){if(typeof u!="string")return!1;const c=a==null?void 0:a(u);return c?{[colorMarkName]:c}:!1}}],toDOM(u){const c=u.attrs[colorMarkName];return["span",{class:[colorClassName,`${colorClassName}--${c}`].join(" "),[domColorAttr]:c},0]}},fromMd:{tokenSpec:{name:colorMarkName,type:"mark",getAttrs(u){return{[colorMarkName]:u.info}}}},toMd:{open:(u,c)=>(u.escapeCharacters=["(",")"],`{${c.attrs[colorMarkName]}}(`),close:u=>(u.escapeCharacters=void 0,")"),mixable:!0,expelEnclosingWhitespace:!0}}))},colorAction="colorify";var Colors;(function(o){o.Gray="gray",o.Yellow="yellow",o.Orange="orange",o.Red="red",o.Green="green",o.Blue="blue",o.Violet="violet"})(Colors||(Colors={}));const chainAND=(...o)=>(e,s,a)=>{let l=e.tr;for(const u of o)if(!u({...e,...l,tr:l},s?c=>{l=c}:void 0,a))return!1;return s==null||s(l),!0},COLORS=[Colors.Gray,Colors.Yellow,Colors.Orange,Colors.Red,Colors.Green,Colors.Blue,Colors.Violet],validateClassNameColorName=o=>COLORS.includes(o),parseStyleColorValue=o=>{switch(o){case"gray":case"grey":case"lightgray":case"lightgrey":case"darkgray":case"darkgrey":return Colors.Gray;case"yellow":case"lightyellow":return Colors.Yellow;case"orange":case"darkorange":return Colors.Orange;case"red":case"darkred":return Colors.Red;case"green":case"lightgreen":case"darkgreen":return Colors.Green;case"blue":case"lightblue":case"mediumblue":case"darkblue":return Colors.Blue;case"violet":case"darkviolet":case"purple":case"mediumpurple":return Colors.Violet;default:return null}},Color=o=>{o.use(ColorSpecs,{validateClassNameColorName,parseStyleColorValue}),o.addAction(colorAction,({schema:e})=>{const s=colorType(e);return{isActive:a=>!!isMarkActive(a,s),isEnable:toggleMark(s),run:(a,l,u,c)=>{const d=c,h=isMarkActive(a,s);return!d||!d[colorMarkName]?h?toggleMark(s,d)(a,l):!0:h?chainAND(toggleMark(s),toggleMark(s,d))(a,l):toggleMark(s,d)(a,l)},meta(a){var l;return(l=s.isInSet(a.selection.$to.marks()))==null?void 0:l.attrs[colorMarkName]}}})};var render$2,hasRequiredRender;function requireRender(){return hasRequiredRender||(hasRequiredRender=1,render$2=function(e,s){return e[s].content}),render$2}var replace$3,hasRequiredReplace;function requireReplace(){return hasRequiredReplace||(hasRequiredReplace=1,replace$3=function(e,s,a,l,u){var c=e.utils.arrayReplaceAt,d=e.utils.lib.ucmicro,h=new RegExp([d.Z.source,d.P.source,d.Cc.source].join("|"));function p(m,g,y){var A,T=0,E=[];return m.replace(u,function(v,_,w){var R;if(a.hasOwnProperty(v)){if(R=a[v],_>0&&!h.test(w[_-1])||_+v.length<w.length&&!h.test(w[_+v.length]))return}else R=v.slice(1,-1);_>T&&(A=new y("text","",0),A.content=m.slice(T,_),E.push(A)),A=new y("emoji","",0),A.markup=R,A.content=s[R],E.push(A),T=_+v.length}),T<m.length&&(A=new y("text","",0),A.content=m.slice(T),E.push(A)),E}return function(g){var y,A,T,E,v,_=g.tokens,w=0;for(A=0,T=_.length;A<T;A++)if(_[A].type==="inline")for(E=_[A].children,y=E.length-1;y>=0;y--)v=E[y],(v.type==="link_open"||v.type==="link_close")&&v.info==="auto"&&(w-=v.nesting),v.type==="text"&&w===0&&l.test(v.content)&&(_[A].children=E=c(E,y,p(v.content,v.level,g.Token)))}}),replace$3}var normalize_opts,hasRequiredNormalize_opts;function requireNormalize_opts(){if(hasRequiredNormalize_opts)return normalize_opts;hasRequiredNormalize_opts=1;function o(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}return normalize_opts=function(s){var a=s.defs,l;s.enabled.length&&(a=Object.keys(a).reduce(function(p,m){return s.enabled.indexOf(m)>=0&&(p[m]=a[m]),p},{})),l=Object.keys(s.shortcuts).reduce(function(p,m){return a[m]?Array.isArray(s.shortcuts[m])?(s.shortcuts[m].forEach(function(g){p[g]=m}),p):(p[s.shortcuts[m]]=m,p):p},{});var u=Object.keys(a),c;u.length===0?c="^$":c=u.map(function(p){return":"+p+":"}).concat(Object.keys(l)).sort().reverse().map(function(p){return o(p)}).join("|");var d=RegExp(c),h=RegExp(c,"g");return{defs:a,shortcuts:l,scanRE:d,replaceRE:h}},normalize_opts}var bare,hasRequiredBare;function requireBare(){if(hasRequiredBare)return bare;hasRequiredBare=1;var o=requireRender(),e=requireReplace(),s=requireNormalize_opts();return bare=function(l,u){var c={defs:{},shortcuts:{},enabled:[]},d=s(l.utils.assign({},c,u||{}));l.renderer.rules.emoji=o,l.core.ruler.after("linkify","emoji",e(l,d.defs,d.shortcuts,d.scanRE,d.replaceRE))},bare}var bareExports=requireBare();const emojiPlugin=getDefaultExportFromCjs$1(bareExports),emojiTokenName="emoji",emojiNodeName=emojiTokenName,emojiNodeType=nodeTypeFactory(emojiNodeName),EmojiNodeAttrs={Markup:"markup"},markupDataAttribute="data-emoji",EmojiConsts={NodeName:emojiNodeName,NodeAttrs:EmojiNodeAttrs,nodeType:emojiNodeType},EmojiSpecsExtension=(o,e)=>{o.configureMd(s=>s.use(emojiPlugin,e)),o.addNode(EmojiConsts.NodeName,()=>({spec:{attrs:{[EmojiConsts.NodeAttrs.Markup]:{}},atom:!0,inline:!0,content:"text*",group:"inline",selectable:!1,parseDOM:[{tag:`span[${markupDataAttribute}]`,priority:100,getAttrs:s=>{if(s instanceof HTMLElement){const a=s.getAttribute(markupDataAttribute);if(a)return{[EmojiConsts.NodeAttrs.Markup]:a}}return!1}}],toDOM:s=>{const a=s.attrs[EmojiConsts.NodeAttrs.Markup];return["span",{contentEditable:!1,[markupDataAttribute]:a},0]}},fromMd:{tokenName:emojiTokenName,tokenSpec:{name:EmojiConsts.NodeName,type:"block",noCloseToken:!0,getAttrs:s=>({[EmojiConsts.NodeAttrs.Markup]:s.markup})}},toMd:(s,a)=>{s.text(`:${a.attrs[EmojiConsts.NodeAttrs.Markup]}:`,!1)}}))},EmojiSpecs=Object.assign(EmojiSpecsExtension,EmojiConsts),EmojiInput=(o,e)=>{const{defs:s,shortcuts:a}=e;if(s&&a){const l=[],u={};for(const[c,d]of Object.entries(a)){if(!d)continue;const h=[].concat(d);for(const p of h)l.push(escapeRegExp(p)),u[p]=c}if(l.length){const c=new RegExp(`(?:^|\\s)(${l.join("|")})\\s$`,"g");o.addInputRules(()=>({rules:[new InputRule(c,(d,h,p,m)=>{if(hasCodeMark(d,h,p,m))return null;const g=h[1],y=u[g],A=s[y];if(A){const{tr:T,schema:E}=d,v=/^\s/.test(h[0]),_=p+(v?1:0),w=m;return T.replaceWith(_,w,[EmojiConsts.nodeType(E).create({[EmojiConsts.NodeAttrs.Markup]:y},E.text(A)),E.text(" ")])}return null})]}))}}},b$v=cn("emoji-suggest"),placement$6=["bottom-start","top-start","bottom-end","top-end"],ITEM_HEIGHT$1=28,VISIBLE_ITEMS_COUNT$1=10,MAX_LIST_HEIGHT$1=ITEM_HEIGHT$1*VISIBLE_ITEMS_COUNT$1;function calcListHeight$1(o){if(!(o<=0))return Math.min(MAX_LIST_HEIGHT$1,o*ITEM_HEIGHT$1)}const EmojiSuggestComponent=({anchorElement:o,currentIndex:e,items:s,onClick:a,onOpenChange:l})=>o?jsxRuntimeExports.jsx(Popup,{open:!!s.length,anchorElement:o,placement:placement$6,onOpenChange:l,children:jsxRuntimeExports.jsx("div",{className:b$v(),children:jsxRuntimeExports.jsx(List,{virtualized:!0,items:s,sortable:!1,filterable:!1,itemHeight:ITEM_HEIGHT$1,itemsHeight:calcListHeight$1(s.length),renderItem:renderItem$1,deactivateOnLeave:!1,activeItemIndex:e,onItemClick:(u,c)=>a(c),className:b$v("list"),itemClassName:b$v("list-item")})})}):null;function renderItem$1({origName:o,symbol:e,origShortcuts:s}){return jsxRuntimeExports.jsxs("div",{className:b$v("item"),children:[jsxRuntimeExports.jsxs("div",{className:b$v("item-info"),children:[jsxRuntimeExports.jsx("div",{className:b$v("item-icon"),children:e}),jsxRuntimeExports.jsxs("div",{className:b$v("item-name"),children:[":",o,":"]})]}),s!==void 0&&jsxRuntimeExports.jsx("div",{className:b$v("item-shortcuts"),children:s.slice(0,4).map(a=>jsxRuntimeExports.jsx("span",{className:b$v("item-shortcut"),children:a},`${o}_${a}`))})]},o)}function render$1(o){return jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:jsxRuntimeExports.jsx(EmojiSuggestComponent,{...o})})}const DecoClassName$1="pm-emoji-input";function findDecoElem$1(o){const e=o??document;return e.getElementsByClassName(DecoClassName$1).item(0)??e.getElementsByClassName(AutocompleteDecoClassName).item(0)}const emptyArray=new Array(0);class EmojiHandler{constructor({defs:e,shortcuts:s={}}){oe(this,"_emojis");oe(this,"_emojiCarousel");oe(this,"_view");oe(this,"_anchor",null);oe(this,"_popupCloser");oe(this,"_suggestProps");oe(this,"_suggestRenderItem");oe(this,"onItemClick",e=>{var s;this._emojiCarousel&&(this._emojiCarousel.currentIndex=e,this.select()),(s=this._view)==null||s.focus()});this._emojis=Object.entries(e).map(([a,l])=>{const u={symbol:l,origName:a,name:a.toLowerCase()},c=s[a];return c&&(u.origShortcuts=emptyArray.concat(c),u.shortcuts=u.origShortcuts.map(d=>d.startsWith(":")?d.slice(1):d)),u})}onOpen(e){return this.findAnchor(),this._anchor?(this._popupCloser=new AutocompletePopupCloser(e.view),this.updateState(e),this.filterActions(),this.render(),!0):(this.closeAutocomplete(e.view),!0)}onFilter(e){var a,l;if((a=e.filter)!=null&&a.endsWith("  "))return this.closeAutocomplete(e.view),!0;this.updateState(e);const s=this.filterActions((l=e.filter)==null?void 0:l.trim());return this.render(),s&&this.closeAutocomplete(e.view),!0}onArrow(e){if(this.updateState(e),!this._emojiCarousel)return!1;switch(e.kind){case ActionKind.up:{this._emojiCarousel.prev();break}case ActionKind.down:{this._emojiCarousel.next();break}default:return!1}return this.render(),!0}onEnter(e){var a;return this.updateState(e),((a=this._emojiCarousel)==null?void 0:a.currentItem)?(this.select(),!0):!1}onClose(e){return this.updateState(e),this.clear(),!0}onDestroy(){this.clear()}closeAutocomplete(e){setTimeout(()=>{closeAutocomplete(e)})}select(){var d;const{_view:e}=this;if(!e)return;const s=(d=this._emojiCarousel)==null?void 0:d.currentItem;if(!s)return;const a=getAutocompleteState(e.state);if(!a||!a.active)return;const{range:l}=a,{tr:u,schema:c}=e.state;e.dispatch(u.replaceWith(l.from,l.to,createEmoji(c,s)).scrollIntoView()),e.focus()}filterActions(e){var u;const s=(u=this._emojiCarousel)==null?void 0:u.currentItem;let a=this._emojis,l=!1;if(e&&(a=filterEmojis(a,e),l=!a.length&&needToHide$1(this._emojis,e)),this._emojiCarousel=new ArrayCarousel(a),s){const c=this._emojiCarousel.array.findIndex(d=>d===s);c!==-1&&(this._emojiCarousel.currentIndex=c)}return l}render(){var s,a,l;this.findAnchor();const e=((s=this._emojiCarousel)==null?void 0:s.array)??[];this._suggestProps={anchorElement:this._anchor,currentIndex:(a=this._emojiCarousel)==null?void 0:a.currentIndex,items:e,onClick:this.onItemClick,onOpenChange:(l=this._popupCloser)==null?void 0:l.popupOpenChangeHandler},this._suggestRenderItem=this._suggestRenderItem??this.createMenuRenderItem(),this._suggestRenderItem.rerender()}updateState({view:e}){this._view=e}clear(){var e,s;this._view=void 0,this._anchor=null,this._emojiCarousel=void 0,(e=this._popupCloser)==null||e.cancelTimer(),this._popupCloser=void 0,this._suggestProps=void 0,(s=this._suggestRenderItem)==null||s.remove(),this._suggestRenderItem=void 0}createMenuRenderItem(){return getReactRendererFromState(this._view.state).createItem("emoji_suggest",()=>this._suggestProps?render$1(this._suggestProps):null)}findAnchor(){var e;this._anchor=findDecoElem$1((e=this._view)==null?void 0:e.dom)}}function createEmoji(o,e){return EmojiConsts.nodeType(o).create({[EmojiConsts.NodeAttrs.Markup]:e.name},o.text(e.symbol))}function filterEmojis(o,e){var u;if(!e)return o;const s=e.toLowerCase(),a=[],l=[];for(const c of o)(u=c.shortcuts)!=null&&u.some(d=>d.startsWith(e))?a.push(c):c.name.startsWith(s)&&l.push(c);return a.concat(l)}const CHARS_TO_HIDE$1=1;function needToHide$1(o,e){let s=1;do{const a=e.slice(0,e.length-s);if(filterEmojis(o,a).length)break;s++}while(s<e.length&&s<CHARS_TO_HIDE$1);return s>=CHARS_TO_HIDE$1}const emojiSuggestActionName="openEmojiSuggest",EmojiSuggest=(o,{defs:e,shortcuts:s})=>{if(!e)return;o.context.has("autocomplete")||o.use(Autocomplete);const a={trigger:{name:"emoji",trigger:/(?:^|\s)(:)$/,allArrowKeys:!1,cancelOnFirstSpace:!0,decorationAttrs:{class:DecoClassName$1}},handler:new EmojiHandler({defs:e,shortcuts:s})};o.context.get("autocomplete").add(a),o.addAction(emojiSuggestActionName,()=>({isEnable:l=>l.selection.empty,run:(l,u,c,d)=>openAutocomplete(c,":",d==null?void 0:d.text)}))},EmojiExtension=(o,e)=>{o.use(EmojiSpecs,e),o.use(EmojiInput,e),o.use(EmojiSuggest,e)},Emoji$1=Object.assign(EmojiExtension,EmojiConsts);for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=typeof Uint8Array>"u"?[]:new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;var decode=function(o){var e=o.length*.75,s=o.length,a,l=0,u,c,d,h;o[o.length-1]==="="&&(e--,o[o.length-2]==="="&&e--);var p=new ArrayBuffer(e),m=new Uint8Array(p);for(a=0;a<s;a+=4)u=lookup[o.charCodeAt(a)],c=lookup[o.charCodeAt(a+1)],d=lookup[o.charCodeAt(a+2)],h=lookup[o.charCodeAt(a+3)],m[l++]=u<<2|c>>4,m[l++]=(c&15)<<4|d>>2,m[l++]=(d&3)<<6|h&63;return p},monospace_1,hasRequiredMonospace;function requireMonospace(){return hasRequiredMonospace||(hasRequiredMonospace=1,monospace_1=e=>{function s(a,l){let u;const c=[];for(let d=0;d<l.length;d++){const h=l[d];if(h.marker!==35||h.end===-1)continue;const p=l[h.end];u=a.tokens[h.token],u.type="monospace_open",u.tag="samp",u.nesting=1,u.markup="##",u.content="",u=a.tokens[p.token],u.type="monospace_close",u.tag="samp",u.nesting=-1,u.markup="##",u.content="",a.tokens[p.token-1].type==="text"&&a.tokens[p.token-1].content==="#"&&c.push(p.token-1)}for(;c.length;){const d=c.pop();if(typeof d=="number"){let h=d+1;for(;h<a.tokens.length&&a.tokens[h].type==="monospace_close";)h++;h--,d!==h&&(u=a.tokens[h],a.tokens[h]=a.tokens[d],a.tokens[d]=u)}}}e.inline.ruler.before("emphasis","monospace",(a,l)=>{let u;const c=a.pos,d=a.src.charCodeAt(c);if(l||d!==35)return!1;const h=a.scanDelims(a.pos,!0);let p=h.length;const m=String.fromCharCode(d);if(p<2)return!1;p%2&&(u=a.push("text","",0),u.content=m,p--);for(let g=0;g<p;g+=2)u=a.push("text","",0),u.content=m+m,!(!h.can_open&&!h.can_close)&&a.delimiters.push({marker:d,length:0,token:a.tokens.length-1,end:-1,open:h.can_open,close:h.can_close});return a.pos+=h.length,!0}),e.inline.ruler2.before("emphasis","monospace",a=>{const l=a.tokens_meta,u=(a.tokens_meta||[]).length;s(a,a.delimiters);for(let c=0;c<u;c++){const d=l[c];d&&d.delimiters&&s(a,d.delimiters)}return!0})}),monospace_1}var monospaceExports=requireMonospace();const yfmPlugin$1=getDefaultExportFromCjs$1(monospaceExports),monospaceMarkName="monospace",monospaceType=markTypeFactory(monospaceMarkName),MonospaceSpecs=o=>{o.configureMd(e=>e.use(yfmPlugin$1,{log:logExports.log})).addMark(monospaceMarkName,()=>({spec:{parseDOM:[{tag:"samp"}],toDOM(){return["samp"]}},fromMd:{tokenSpec:{name:monospaceMarkName,type:"mark"}},toMd:{open:"##",close:"##",mixable:!0,expelEnclosingWhitespace:!0}}))},videoNodeName="video";var VideoAttr;(function(o){o.Service="service",o.VideoID="videoid"})(VideoAttr||(VideoAttr={}));var utils$2={},dist$1={},hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,(function(o){Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function e(k){return k&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k}var s={exports:{}},a=s.exports={},l,u;function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=c}catch{l=c}try{typeof clearTimeout=="function"?u=clearTimeout:u=d}catch{u=d}})();function h(k){if(l===setTimeout)return setTimeout(k,0);if((l===c||!l)&&setTimeout)return l=setTimeout,setTimeout(k,0);try{return l(k,0)}catch{try{return l.call(null,k,0)}catch{return l.call(this,k,0)}}}function p(k){if(u===clearTimeout)return clearTimeout(k);if((u===d||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(k);try{return u(k)}catch{try{return u.call(null,k)}catch{return u.call(this,k)}}}var m=[],g=!1,y,A=-1;function T(){!g||!y||(g=!1,y.length?m=y.concat(m):A=-1,m.length&&E())}function E(){if(!g){var k=h(T);g=!0;for(var I=m.length;I;){for(y=m,m=[];++A<I;)y&&y[A].run();A=-1,I=m.length}y=null,g=!1,p(k)}}a.nextTick=function(k){var I=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)I[P-1]=arguments[P];m.push(new v(k,I)),m.length===1&&!g&&h(E)};function v(k,I){this.fun=k,this.array=I}v.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={};function _(){}a.on=_,a.addListener=_,a.once=_,a.off=_,a.removeListener=_,a.removeAllListeners=_,a.emit=_,a.prependListener=_,a.prependOnceListener=_,a.listeners=function(k){return[]},a.binding=function(k){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(k){throw new Error("process.chdir is not supported")},a.umask=function(){return 0};var w=s.exports;const R=e(w);o.default=R,o.process=R})(dist$1)),dist$1}var hasRequiredUtils$2;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.arriage=o.nestedCloseTokenIdxFactory=void 0,o.generateID=l,o.append=u;const e=requireSource(),s=requireDist(),a=(c,d,h)=>(p,m,g,y)=>{let A=0,T=m;for(;T<p.length;){if(d(p,T))A++;else if(h(p,T)){if(A===0)return T;A--}T++}return y.error(`${c} must be closed${g?` in ${(0,e.bold)(g)}`:""}`),null};o.nestedCloseTokenIdxFactory=a,o.arriage=s.platform==="win32"?`\r
`:`
`;function l(){return Math.random().toString(36).substr(2,8)}function u(c,d,...h){if(!c[d]){c[d]=h;return}return h.forEach(p=>c[d].push(p)),c}})(utils$2)),utils$2}var parsers={},hasRequiredParsers;function requireParsers(){if(hasRequiredParsers)return parsers;hasRequiredParsers=1,Object.defineProperty(parsers,"__esModule",{value:!0}),parsers.youtubeParser=e,parsers.vimeoParser=a,parsers.vineParser=u,parsers.preziParser=d,parsers.mfrParser=p,parsers.yandexParser=g,parsers.vkParser=A,parsers.rutubeParser=E,parsers.parseVideoUrl=w;const o=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;function e(R){const k=R.match(o);return k&&k[7].length===11?k[7]:R}const s=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/;function a(R){const k=R.match(s);return k&&typeof k[3]=="string"?k[3]:R}const l=/^http(?:s?):\/\/(?:www\.)?vine\.co\/v\/([a-zA-Z0-9]{1,13}).*/;function u(R){const k=R.match(l);return k&&k[1].length===11?k[1]:R}const c=/^https:\/\/prezi.com\/(.[^/]+)/;function d(R){const k=R.match(c);return k?k[1]:R}const h=/^http(?:s?):\/\/(?:www\.)?mfr\.osf\.io\/render\?url=http(?:s?):\/\/osf\.io\/([a-zA-Z0-9]{1,5})\/\?action=download/;function p(R){const k=R.match(h);return k?k[1]:R}const m=/^https:\/\/runtime.video.cloud.yandex.net\/player\/video\/([a-zA-Z0-9]+)/;function g(R){const k=R.match(m);return k?k[1]:R}const y=/^https:\/\/vk\.com\/video_ext\.php\?(.*)/;function A(R){const k=R.match(y);if(k){const I=new URLSearchParams(k[1]),P=[];return I.forEach((N,L)=>{P.push(`${L}=${encodeURIComponent(N)}`)}),P.join("&")}return R}const T=/^https:\/\/rutube\.ru\/video\/([a-zA-Z0-9]+)\/?/;function E(R){const k=R.match(T);return k?k[1]:R}const _={osf:{extract:p},prezi:{extract:d},vimeo:{extract:a},vine:{extract:u},yandex:{extract:g},youtube:{extract:e},vk:{extract:A,csp:{"frame-src":["https://vk.com/","https://login.vk.com/"]}},rutube:{extract:E,csp:{"frame-src":["https://rutube.ru/play/embed/"]}},url:{extract:R=>R}};function w(R,k){let I="";const P=R.toLowerCase(),N=_[P];if(!N)return!1;const{extract:L,csp:Q}=N;return I=L(k),I===")"&&(I=""),[I,Q]}return parsers}var _const={},utils$1={},hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1,Object.defineProperty(utils$1,"__esModule",{value:!0}),utils$1.videoUrl=void 0;const o=(e,s,a)=>{switch(e){case"youtube":return`https://www.youtube.com/embed/${s}`;case"vimeo":return`https://player.vimeo.com/video/${s}`;case"vine":return`https://vine.co/v/${s}/embed/${a.vine.embed}`;case"prezi":return`https://prezi.com/embed/${s}/?bgcolor=ffffff&amp;lock_to_path=0&amp;autoplay=0&amp;autohide_ctrls=0&amp;landing_data=bHVZZmNaNDBIWnNjdEVENDRhZDFNZGNIUE43MHdLNWpsdFJLb2ZHanI5N1lQVHkxSHFxazZ0UUNCRHloSXZROHh3PT0&amp;landing_sign=1kD6c0N6aYpMUS0wxnQjxzSqZlEB8qNFdxtdjYhwSuI`;case"osf":return`https://mfr.osf.io/render?url=https://osf.io/${s}/?action=download`;case"yandex":return`https://runtime.video.cloud.yandex.net/player/video/${s}`;case"vk":return`https://vk.com/video_ext.php?${s}`;case"rutube":return`https://rutube.ru/play/embed/${s}`;case"url":return s;default:return e}};return utils$1.videoUrl=o,utils$1}var hasRequired_const;function require_const(){if(hasRequired_const)return _const;hasRequired_const=1,Object.defineProperty(_const,"__esModule",{value:!0}),_const.defaults=_const.VideoService=void 0;const o=requireUtils$1();var e;return(function(s){s.YouTube="youtube",s.Vimeo="vimeo",s.Vine="vine",s.Prezi="prezi",s.Osf="osf",s.Yandex="yandex",s.Vk="vk",s.Rutube="rutube",s.url="url"})(e||(_const.VideoService=e={})),_const.defaults={videoUrl:o.videoUrl,youtube:{width:640,height:390},vimeo:{width:500,height:281},vine:{width:600,height:600,embed:"simple"},prezi:{width:550,height:400},osf:{width:"100%",height:"100%"},yandex:{width:640,height:390},vk:{width:640,height:390},rutube:{width:640,height:390},url:{width:640,height:390}},_const}var video_1,hasRequiredVideo;function requireVideo(){if(hasRequiredVideo)return video_1;hasRequiredVideo=1;const o=requireUtils$2(),e=requireParsers(),s=require_const(),a=(d,h)=>{const p={...s.defaults,...h},m=d;m.renderer.rules.video=l(m,p),m.inline.ruler.before("emphasis","video",c(m))};function l(d,h){return(p,m)=>{const g=d.utils.escapeHtml(p[m].videoID),y=d.utils.escapeHtml(p[m].service).toLowerCase(),A=/http(?:s?):\/\/(?:www\.)?[a-zA-Z0-9-:.]{1,}\/render(?:\/)?[a-zA-Z0-9.&;?=:%]{1,}url=http(?:s?):\/\/[a-zA-Z0-9 -:.]{1,}\/[a-zA-Z0-9]{1,5}\/\?[a-zA-Z0-9.=:%]{1,}/;let T;if(y===s.VideoService.Osf&&g)return T=Math.random()*65536,g.match(A)?'<div id="'+T+'" class="mfr mfr-file"></div><script>$(document).ready(function () {new mfr.Render("'+T+'", "'+g+'");    }); <\/script>':'<div id="'+T+'" class="mfr mfr-file"></div><script>$(document).ready(function () {new mfr.Render("'+T+'", "https://mfr.osf.io/render?url=https://osf.io/'+g+'/?action=download%26mode=render");    }); <\/script>';const{width:E,height:v}=h[y];return g===""?"":`<div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item ${y}-player" type="text/html" width="${E}" height="${v}" src="${h.videoUrl(y,g,h)}" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`}}const u=/@\[([a-zA-Z]*?)]\([\s]*(.*?)[\s]*[)]/im;function c(d,h){return(p,m)=>{var g,y;const A=p,T=p.pos;if(p.src.charCodeAt(T)!==64||p.src.charCodeAt(T+1)!==91)return!1;const E=u.exec(p.src.slice(p.pos,p.src.length));if(!E||E.length<3)return!1;const v=E[1]||"url",_=(0,e.parseVideoUrl)(v,E[2]);if(_===!1)return!1;const[w,R]=_,k=T+2,I=d.helpers.parseLinkLabel(p,T+1,!1);if(!m){A.pos=k,A.service=A.src.slice(k,I);const P=new A.md.inline.State(v,A.md,A.env,[]);P.md.inline.tokenize(P);const N=A.push("video","",0);N.videoID=w,N.service=v,N.level=A.level}return v==="url"?A.pos=A.src.indexOf(")",A.pos)+1:A.pos+=A.src.indexOf(")",A.pos),R&&((g=(y=p.env).meta)!==null&&g!==void 0||(y.meta={}),(0,o.append)(p.env.meta,"csp",R)),!0}}return video_1=a,video_1}var videoExports=requireVideo();const video=getDefaultExportFromCjs$1(videoExports);var _constExports=require_const(),parsersExports=requireParsers();const videoPlugin=video,videoType=nodeTypeFactory(videoNodeName);function serializeNodeToString(o){const e=o.attrs[VideoAttr.Service],s=o.attrs[VideoAttr.VideoID];return`@[${e}](${s})`}function createViewStub(o){const e=document.createElement("span");return e.setAttribute(VideoAttr.Service,o.attrs[VideoAttr.Service]),e.setAttribute(VideoAttr.VideoID,o.attrs[VideoAttr.VideoID]),e.contentEditable="false",e.textContent=serializeNodeToString(o),e}const availableServices=new Set([_constExports.VideoService.YouTube,_constExports.VideoService.Vimeo,_constExports.VideoService.Vine,_constExports.VideoService.Prezi]),VideoSpecs=(o,e)=>{const s={..._constExports.defaults,...e,log:logExports.log};o.configureMd(a=>a.use(videoPlugin,s)),o.addNode(videoNodeName,()=>({spec:{inline:!0,atom:!0,group:"inline",attrs:{[VideoAttr.Service]:{},[VideoAttr.VideoID]:{}},parseDOM:[{tag:`span[${VideoAttr.Service}][${VideoAttr.VideoID}]`,getAttrs(a){const l=a;return{[VideoAttr.Service]:l.getAttribute(VideoAttr.Service),[VideoAttr.VideoID]:l.getAttribute(VideoAttr.VideoID)}}},{tag:`iframe[${VideoAttr.Service}][${VideoAttr.VideoID}]`,getAttrs(a){const l=a;return{[VideoAttr.Service]:l.getAttribute(VideoAttr.Service),[VideoAttr.VideoID]:l.getAttribute(VideoAttr.VideoID)}},priority:100}],toDOM(a){const l=a.attrs[VideoAttr.Service],u=a.attrs[VideoAttr.VideoID];if(availableServices.has(l)||!u){let c="";return typeof s.videoUrl=="function"&&(c=s.videoUrl(l,u,s)),["div",{class:"embed-responsive embed-responsive-16by9"},["iframe",{class:`embed-responsive-item ${l}-player`,type:"text/html",width:String(s[l].width),height:String(s[l].height),src:c,frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:"",[VideoAttr.Service]:l,[VideoAttr.VideoID]:u}]]}return createViewStub(a)}},fromMd:{tokenSpec:{name:videoNodeName,type:"node",getAttrs:a=>({[VideoAttr.Service]:a.service,[VideoAttr.VideoID]:a.videoID})}},toMd:(a,l)=>{a.write(serializeNodeToString(l))}}))};var utils={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1,utils.getAttrs=function(u,c,d){const h=/[^\t\n\f />"'=]/,A=[];let T="",E="",v=!0,_=!1;for(let w=c+d.leftDelimiter.length;w<u.length;w++){if(u.slice(w,w+d.rightDelimiter.length)===d.rightDelimiter){T!==""&&A.push([T,E]);break}const R=u.charAt(w);if(R==="="&&v){v=!1;continue}if(R==="."&&T===""){u.charAt(w+1)==="."?(T="css-module",w+=1):T="class",v=!1;continue}if(R==="#"&&T===""){T="id",v=!1;continue}if(R==='"'&&E===""&&!_){_=!0;continue}if(R==='"'&&_){_=!1;continue}if(R===" "&&!_){if(T==="")continue;A.push([T,E]),T="",E="",v=!0;continue}if(!(v&&R.search(h)===-1)){if(v){T+=R;continue}E+=R}}if(d.allowedAttributes&&d.allowedAttributes.length){const w=d.allowedAttributes;return A.filter(function(R){const k=R[0];function I(P){return k===P||P instanceof RegExp&&P.test(k)}return w.some(I)})}return A},utils.addAttrs=function(u,c){for(let d=0,h=u.length;d<h;++d){const p=u[d][0];p==="class"?c.attrJoin("class",u[d][1]):p==="css-module"?c.attrJoin("css-module",u[d][1]):c.attrPush(u[d])}return c},utils.hasDelimiters=function(u,c){if(!u)throw new Error('Parameter `where` not passed. Should be "start", "end" or "only".');return function(d){const h=c.leftDelimiter.length+1+c.rightDelimiter.length;if(!d||typeof d!="string"||d.length<h)return!1;function p(E){const v=E.charAt(c.leftDelimiter.length)===".",_=E.charAt(c.leftDelimiter.length)==="#";return v||_?E.length>=h+1:E.length>=h}let m,g,y,A;const T=h-c.rightDelimiter.length;switch(u){case"start":y=d.slice(0,c.leftDelimiter.length),m=y===c.leftDelimiter?0:-1,g=m===-1?-1:d.indexOf(c.rightDelimiter,T),A=d.charAt(g+c.rightDelimiter.length),A&&c.rightDelimiter.indexOf(A)!==-1&&(g=-1);break;case"end":m=d.lastIndexOf(c.leftDelimiter),g=m===-1?-1:d.indexOf(c.rightDelimiter,m+T),g=g===d.length-c.rightDelimiter.length?g:-1;break;case"only":y=d.slice(0,c.leftDelimiter.length),m=y===c.leftDelimiter?0:-1,y=d.slice(d.length-c.rightDelimiter.length),g=y===c.rightDelimiter?d.length-c.rightDelimiter.length:-1;break;default:throw new Error(`Unexpected case ${u}, expected 'start', 'end' or 'only'`)}return m!==-1&&g!==-1&&p(d.substring(m,g+c.rightDelimiter.length))}},utils.removeDelimiter=function(u,c){const d=o(c.leftDelimiter),h=o(c.rightDelimiter),p=new RegExp("[ \\n]?"+d+"[^"+d+h+"]+"+h+"$"),m=u.search(p);return m!==-1?u.slice(0,m):u};function o(u){return u.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}utils.escapeRegExp=o,utils.getMatchingOpeningToken=function(u,c){if(u[c].type==="softbreak")return!1;if(u[c].nesting===0)return u[c];const d=u[c].level,h=u[c].type.replace("_close","_open");for(;c>=0;--c)if(u[c].type===h&&u[c].level===d)return u[c];return!1};const e=/[&<>"]/,s=/[&<>"]/g,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function l(u){return a[u]}return utils.escapeHtml=function(u){return e.test(u)?u.replace(s,l):u},utils}var patterns,hasRequiredPatterns;function requirePatterns(){if(hasRequiredPatterns)return patterns;hasRequiredPatterns=1;const o=requireUtils();patterns=a=>{const l=new RegExp("^ {0,3}[-*_]{3,} ?"+o.escapeRegExp(a.leftDelimiter)+"[^"+o.escapeRegExp(a.rightDelimiter)+"]");return[{name:"fenced code blocks",tests:[{shift:0,block:!0,info:o.hasDelimiters("end",a)}],transform:(u,c)=>{const d=u[c],h=d.info.lastIndexOf(a.leftDelimiter),p=o.getAttrs(d.info,h,a);o.addAttrs(p,d),d.info=o.removeDelimiter(d.info,a)}},{name:"inline nesting 0",tests:[{shift:0,type:"inline",children:[{shift:-1,type:u=>u==="image"||u==="code_inline"},{shift:0,type:"text",content:o.hasDelimiters("start",a)}]}],transform:(u,c,d)=>{const h=u[c].children[d],p=h.content.indexOf(a.rightDelimiter),m=u[c].children[d-1],g=o.getAttrs(h.content,0,a);o.addAttrs(g,m),h.content.length===p+a.rightDelimiter.length?u[c].children.splice(d,1):h.content=h.content.slice(p+a.rightDelimiter.length)}},{name:"tables",tests:[{shift:0,type:"table_close"},{shift:1,type:"paragraph_open"},{shift:2,type:"inline",content:o.hasDelimiters("only",a)}],transform:(u,c)=>{const d=u[c+2],h=o.getMatchingOpeningToken(u,c),p=o.getAttrs(d.content,0,a);o.addAttrs(p,h),u.splice(c+1,3)}},{name:"tables thead metadata",tests:[{shift:0,type:"tr_close"},{shift:1,type:"thead_close"},{shift:2,type:"tbody_open"}],transform:(u,c)=>{const d=o.getMatchingOpeningToken(u,c),h=u[c-1];let p=0,m=c;for(;--m;){if(u[m]===d){u[m-1].meta=Object.assign({},u[m+2].meta,{colsnum:p});break}p+=(u[m].level===h.level&&u[m].type===h.type)>>0}u[c+2].meta=Object.assign({},u[c+2].meta,{colsnum:p})}},{name:"tables tbody calculate",tests:[{shift:0,type:"tbody_close",hidden:!1}],transform:(u,c)=>{let d=c-2;for(;d>0&&u[--d].type!=="tbody_open";);const h=u[d].meta.colsnum>>0;if(h<2)return;const p=u[c].level+2;for(let m=d;m<c;m++){if(u[m].level>p)continue;const g=u[m],y=g.hidden?0:g.attrGet("rowspan")>>0,A=g.hidden?0:g.attrGet("colspan")>>0;if(y>1){let T=h-(A>0?A:1);for(let E=m,v=y;v>1;E++)u[E].type=="tr_open"&&(u[E].meta=Object.assign({},u[E].meta),u[E].meta&&u[E].meta.colsnum&&(T-=1),u[E].meta.colsnum=T,v--)}if(g.type=="tr_open"&&g.meta&&g.meta.colsnum){const T=g.meta.colsnum;for(let E=m,v=0;E<c;E++){if(u[E].type=="td_open")v+=1;else if(u[E].type=="tr_close")break;v>T&&(u[E].hidden||s(u[E]))}}if(A>1){const T=[];let E=m+3,v=h;for(let R=m;R>d;R--)if(u[R].type=="tr_open"){v=u[R].meta&&u[R].meta.colsnum||v;break}else u[R].type==="td_open"&&T.unshift(R);for(let R=m+2;R<c;R++)if(u[R].type=="tr_close"){E=R;break}else u[R].type=="td_open"&&T.push(R);const _=T.indexOf(m);let w=v-_;w=w>A?A:w,A>w&&g.attrSet("colspan",w+"");for(let R=T.slice(v+1-h-w)[0];R<E;R++)u[R].hidden||s(u[R])}}}},{name:"inline attributes",tests:[{shift:0,type:"inline",children:[{shift:-1,nesting:-1},{shift:0,type:"text",content:o.hasDelimiters("start",a)}]}],transform:(u,c,d)=>{const h=u[c].children[d],p=h.content,m=o.getAttrs(p,0,a),g=o.getMatchingOpeningToken(u[c].children,d-1);o.addAttrs(m,g),h.content=p.slice(p.indexOf(a.rightDelimiter)+a.rightDelimiter.length)}},{name:"list softbreak",tests:[{shift:-2,type:"list_item_open"},{shift:0,type:"inline",children:[{position:-2,type:"softbreak"},{position:-1,type:"text",content:o.hasDelimiters("only",a)}]}],transform:(u,c,d)=>{const p=u[c].children[d].content,m=o.getAttrs(p,0,a);let g=c-2;for(;u[g-1]&&u[g-1].type!=="ordered_list_open"&&u[g-1].type!=="bullet_list_open";)g--;o.addAttrs(m,u[g-1]),u[c].children=u[c].children.slice(0,-2)}},{name:"list double softbreak",tests:[{shift:0,type:u=>u==="bullet_list_close"||u==="ordered_list_close"},{shift:1,type:"paragraph_open"},{shift:2,type:"inline",content:o.hasDelimiters("only",a),children:u=>u.length===1},{shift:3,type:"paragraph_close"}],transform:(u,c)=>{const h=u[c+2].content,p=o.getAttrs(h,0,a),m=o.getMatchingOpeningToken(u,c);o.addAttrs(p,m),u.splice(c+1,3)}},{name:"list item end",tests:[{shift:-2,type:"list_item_open"},{shift:0,type:"inline",children:[{position:-1,type:"text",content:o.hasDelimiters("end",a)}]}],transform:(u,c,d)=>{const h=u[c].children[d],p=h.content,m=o.getAttrs(p,p.lastIndexOf(a.leftDelimiter),a);o.addAttrs(m,u[c-2]);const g=p.slice(0,p.lastIndexOf(a.leftDelimiter));h.content=e(g)!==" "?g:g.slice(0,-1)}},{name:`
{.a} softbreak then curly in start`,tests:[{shift:0,type:"inline",children:[{position:-2,type:"softbreak"},{position:-1,type:"text",content:o.hasDelimiters("only",a)}]}],transform:(u,c,d)=>{const h=u[c].children[d],p=o.getAttrs(h.content,0,a);let m=c+1;for(;u[m+1]&&u[m+1].nesting===-1;)m++;const g=o.getMatchingOpeningToken(u,m);o.addAttrs(p,g),u[c].children=u[c].children.slice(0,-2)}},{name:"horizontal rule",tests:[{shift:0,type:"paragraph_open"},{shift:1,type:"inline",children:u=>u.length===1,content:u=>u.match(l)!==null},{shift:2,type:"paragraph_close"}],transform:(u,c)=>{const d=u[c];d.type="hr",d.tag="hr",d.nesting=0;const h=u[c+1].content,p=h.lastIndexOf(a.leftDelimiter),m=o.getAttrs(h,p,a);o.addAttrs(m,d),d.markup=h,u.splice(c+1,2)}},{name:"end of block",tests:[{shift:0,type:"inline",children:[{position:-1,content:o.hasDelimiters("end",a),type:u=>u!=="code_inline"&&u!=="math_inline"}]}],transform:(u,c,d)=>{const h=u[c].children[d],p=h.content,m=o.getAttrs(p,p.lastIndexOf(a.leftDelimiter),a);let g=c+1;do if(u[g]&&u[g].nesting===-1)break;while(g++<u.length);const y=o.getMatchingOpeningToken(u,g);o.addAttrs(m,y);const A=p.slice(0,p.lastIndexOf(a.leftDelimiter));h.content=e(A)!==" "?A:A.slice(0,-1)}}]};function e(a){return a.slice(-1)[0]}function s(a){a.hidden=!0,a.children&&a.children.forEach(l=>(l.content="",s(l),void 0))}return patterns}var markdownItAttrs,hasRequiredMarkdownItAttrs;function requireMarkdownItAttrs(){if(hasRequiredMarkdownItAttrs)return markdownItAttrs;hasRequiredMarkdownItAttrs=1;const o=requirePatterns(),e={leftDelimiter:"{",rightDelimiter:"}",allowedAttributes:[]};markdownItAttrs=function(h,p){let m=Object.assign({},e);m=Object.assign(m,p);const g=o(m);function y(A){const T=A.tokens;for(let E=0;E<T.length;E++)for(let v=0;v<g.length;v++){const _=g[v];let w=null;if(_.tests.every(k=>{const I=s(T,E,k);return I.j!==null&&(w=I.j),I.match}))try{_.transform(T,E,w),(_.name==="inline attributes"||_.name==="inline nesting 0")&&v--}catch(k){console.error(`markdown-it-attrs: Error in pattern '${_.name}': ${k.message}`),console.error(k.stack)}}}h.core.ruler.before("linkify","curly_attributes",y)};function s(d,h,p){const m={match:!1,j:null},g=p.shift!==void 0?h+p.shift:p.position;if(p.shift!==void 0&&g<0)return m;const y=u(d,g);if(y===void 0)return m;for(const A of Object.keys(p))if(!(A==="shift"||A==="position")){if(y[A]===void 0)return m;if(A==="children"&&a(p.children)){if(y.children.length===0)return m;let T;const E=p.children,v=y.children;if(E.every(_=>_.position!==void 0)){if(T=E.every(_=>s(v,_.position,_).match),T){const _=c(E).position;m.j=_>=0?_:v.length+_}}else for(let _=0;_<v.length;_++)if(T=E.every(w=>s(v,_,w).match),T){m.j=_;break}if(T===!1)return m;continue}switch(typeof p[A]){case"boolean":case"number":case"string":if(y[A]!==p[A])return m;break;case"function":if(!p[A](y[A]))return m;break;case"object":if(l(p[A])){if(p[A].every(E=>E(y[A]))===!1)return m;break}default:throw new Error(`Unknown type of pattern test (key: ${A}). Test should be of type boolean, number, string, function or array of functions.`)}}return m.match=!0,m}function a(d){return Array.isArray(d)&&d.length&&d.every(h=>typeof h=="object")}function l(d){return Array.isArray(d)&&d.length&&d.every(h=>typeof h=="function")}function u(d,h){return h>=0?d[h]:d[d.length+h]}function c(d){return d.slice(-1)[0]||{}}return markdownItAttrs}var markdownItAttrsExports=requireMarkdownItAttrs();const attrsPlugin=getDefaultExportFromCjs$1(markdownItAttrsExports),defaultAttrsOpts={allowedAttributes:["id"]},YfmConfigsSpecs=(o,e)=>{const s={...defaultAttrsOpts,...e.attrs};e.disableAttrs||o.configureMd(a=>a.use(attrsPlugin,s),{text:!1}),o.addNode("__yfm_lint",()=>({spec:{},fromMd:{tokenSpec:{name:"__yfm_lint",type:"node",ignore:!0}},toMd:noop$5}))};var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;var o=Object.defineProperty,e=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,c=(G,K)=>{var q={};for(var te in G)l.call(G,te)&&K.indexOf(te)<0&&(q[te]=G[te]);if(G!=null&&a)for(var te of a(G))K.indexOf(te)<0&&u.call(G,te)&&(q[te]=G[te]);return q},d=(G,K)=>{for(var q in K)o(G,q,{get:K[q],enumerable:!0})},h=(G,K,q,te)=>{if(K&&typeof K=="object"||typeof K=="function")for(let Z of s(K))!l.call(G,Z)&&Z!==q&&o(G,Z,{get:()=>K[Z],enumerable:!(te=e(K,Z))||te.enumerable});return G},p=G=>h(o({},"__esModule",{value:!0}),G),m=(G,K,q)=>{if(!K.has(G))throw TypeError("Cannot "+q)},g=(G,K,q)=>(m(G,K,"read from private field"),K.get(G)),y=(G,K,q)=>{if(K.has(G))throw TypeError("Cannot add the same private member more than once");K instanceof WeakSet?K.add(G):K.set(G,q)},A=(G,K,q,te)=>(m(G,K,"write to private field"),K.set(G,q),q),T=(G,K,q)=>new Promise((te,Z)=>{var ce=Se=>{try{Ee(q.next(Se))}catch(ke){Z(ke)}},be=Se=>{try{Ee(q.throw(Se))}catch(ke){Z(ke)}},Ee=Se=>Se.done?te(Se.value):Promise.resolve(Se.value).then(ce,be);Ee((q=q.apply(G,K)).next())}),E={};d(E,{AttrsParser:()=>N,createLoadQueue:()=>ue,getQueueStore:()=>X,getScriptStore:()=>fe,isBrowser:()=>J,parseMdAttrs:()=>L}),common=p(E);var v,_,w,R,k,I,P,N=class{constructor(G){this.DELIMITER="=",this.SEPARATOR=" ",this.QUOTATION='"',this.ALLOWED_CHARS=/[a-zA-Z0-9_\- {}.|/]/,this.VALIDATION_CHARS=/[a-zA-Z0-9_\- {}.#="|/]/,this.state={},y(this,v,""),y(this,_,""),y(this,w,!1),y(this,R,!1),y(this,k,void 0),y(this,I,{id:/#/,class:/\./,attr:/[a-zA-Z-_]/}),y(this,P,Object.entries(g(this,I))),G&&this.parse(G)}parse(G){const K=this.extract(G.trim());if(!K)return{};this.clear(),this.state={};for(const q of K)this.next(q);return this.next(this.SEPARATOR),this.clear(),this.state}apply(G){const K=this.state,{attr:q=[]}=K,te=c(K,["attr"]);for(const[Z,ce]of Object.entries(te))G.attrJoin(Z,ce.join(" "));for(const Z of q)G.attrJoin(Z,"true")}extract(G){if(!G.startsWith("{"))return!1;let K=1;for(let q=1;q<G.length;q++){const te=G[q];if(te==="}"&&K--,te==="{"&&K++,K===0)return G.slice(1,q).trim();if(K<0||!this.VALIDATION_CHARS.test(te))return!1}return!1}next(G){if(!g(this,k)){A(this,k,this.type(G)),g(this,k)==="attr"&&A(this,_,G);return}if(this.isSeparator(G)){if(!g(this,_)&&!g(this,w)){this.append(g(this,v)," "),this.clear();return}if(!g(this,v)&&g(this,_)){this.append(),this.clear();return}if(g(this,w)&&!g(this,R)){A(this,_,g(this,_)+G);return}g(this,w)&&g(this,R)&&this.append(g(this,v),g(this,_)),!g(this,w)&&!g(this,R)&&this.append(g(this,v),g(this,_)),this.clear();return}if(this.isAllowedChar(G)){A(this,_,g(this,_)+G);return}if(this.isQuotation(G)&&(g(this,w)?A(this,R,!0):A(this,w,!0)),this.isDelimiter(G)){if(g(this,v)){A(this,_,g(this,_)+G);return}A(this,v,g(this,_)),A(this,_,"")}}type(G){var K;return(K=g(this,P).find(([q,te])=>te.test(G)))==null?void 0:K[0]}append(G=g(this,k),K=g(this,_)){G&&(this.state[G]||(this.state[G]=[]),this.state[G].push(K))}clear(){A(this,v,""),A(this,_,""),A(this,w,!1),A(this,R,!1),A(this,k,void 0)}isDelimiter(G){return G===this.DELIMITER}isSeparator(G){return G===this.SEPARATOR}isQuotation(G){return G===this.QUOTATION}isAllowedChar(G){return this.ALLOWED_CHARS.test(G)}};v=new WeakMap,_=new WeakMap,w=new WeakMap,R=new WeakMap,k=new WeakMap,I=new WeakMap,P=new WeakMap;function L(G,K,q,te){if(q>=te||K.charCodeAt(q)!==123)return null;const Z={};for(++q,q=be(K,q,te);q<te;q=be(K,q,te)){if(K.charCodeAt(q)===125)return++q,{pos:q,attrs:Z};const Ee=K.charCodeAt(q);if(Ee===35){++q;const ke=V(K,q,te);if(ke===null)return null;q=ke.pos;const Ae="id",Te=ke.name;typeof Z[Ae]>"u"?Z[Ae]=[Te]:Z[Ae].push(Te)}else if(Ee===46){++q;const ke=V(K,q,te);if(ke===null)return null;q=ke.pos;const Ae="class",Te=ke.name;typeof Z[Ae]>"u"?Z[Ae]=[Te]:Z[Ae].push(Te)}else{let ke=j(K,q,te);if(ke===null)return null;const Ae=ke.name;if(q=ke.pos,q=be(K,q,te),q>=te)return null;let Te;if(K.charCodeAt(q)===61){if(++q,q=be(K,q,te),q>=te)return null;const xe=K.charCodeAt(q);if(xe===34||xe===39){const Pe=G.helpers.parseLinkTitle(K,q,te);if(!Pe.ok)return null;Te=Pe.str,q=Pe.pos}else{if(ke=V(K,q,te),ke===null)return null;Te=ke.name,q=ke.pos}}else ce(K.charCodeAt(q-1))&&--q,Te="";typeof Te<"u"&&(typeof Z[Ae]>"u"?Z[Ae]=[Te]:Z[Ae].push(Te))}if(q>=te)return null;const Se=K.charCodeAt(q);if(!ce(Se)&&Se!==125)return null}return null;function ce(Ee){return G.utils.isSpace(Ee)||Ee===10}function be(Ee,Se,ke){for(;Se<ke;Se++){const Ae=Ee.charCodeAt(Se);if(!ce(Ae))break}return Se}}var Q=/^[a-z][a-z0-9\-_]*/;function j(G,K,q){const te=K,Z=G.slice(K,q).match(Q);return Z===null?null:(K+=Z[0].length,{pos:K,name:G.slice(te,K)})}var F=/^[a-z0-9\-_]+/i;function V(G,K,q){const te=K,Z=G.slice(K,q).match(F);return Z===null?null:(K+=Z[0].length,{pos:K,name:G.slice(te,K)})}var J=()=>typeof window<"u"&&typeof window.document<"u",z=Symbol.for("extension-load-queues"),Y=Symbol.for("single-queue"),fe=G=>{if(J()){if(!window[G])window[G]=[];else if(!Array.isArray(window[G]))throw new Error(`Expected window[${String(G)}] to be an array`);return window[G]}else throw new Error("Cannot initialize QueueStore in a non-browser environment.")},de=()=>{if(J())(typeof window[z]!="object"||window[z]===null)&&(window[z]={});else throw new Error("Cannot initialize QueueStore in a non-browser environment.")},X=G=>{var K;return de(),((K=window[z])==null?void 0:K[G])||!1},he=G=>(de(),K=>{window[z][G]=K}),ue=({store:G,createController:K,queueKey:q=Y,isQueueCreated:te=X(q),onQueueCreated:Z=he(q)})=>{if(!G||te)return;Z(!0);const ce=K(),be=G.splice(0,G.length);G.push=function(...Ae){return Ae.forEach(Te=>{be.push(Te),Se()}),be.length};let Ee=!1;function Se(){Ee||ke()}function ke(){return T(this,null,function*(){Ee=!0;const Ae=be.shift();if(Ae)return yield Ae(ce),ke();Ee=!1})}Se()};return common}var markdownItDirective,hasRequiredMarkdownItDirective;function requireMarkdownItDirective(){if(hasRequiredMarkdownItDirective)return markdownItDirective;hasRequiredMarkdownItDirective=1;function o(_){switch(_){case 9:case 32:case 10:return!0}return!1}function e(_,w,R){for(;w<R&&o(_.charCodeAt(w));++w);return w}function s(_,w,R){for(;R<w&&o(_.charCodeAt(w-1));--w);return w}const a=/^[a-z][a-z0-9\-_]*/i,l=_=>_.toLowerCase().replace("_","-");function u(_,w,R){const k=w,I=_.slice(w,R).match(a);return I===null?null:(w+=I[0].length,{pos:w,name:l(_.slice(k,w))})}function c(_,w,R,k){if(R>=k||w.charCodeAt(R)!==40)return null;const I=[];for(++R,R=e(w,R,k);R<k;R=e(w,R,k)){if(w.charCodeAt(R)===41)return++R,{pos:R,dests:I};const P=w.charCodeAt(R);if(P===34||P===39||P===40){const L=_.helpers.parseLinkTitle(w,R,k);if(!L.ok)return null;R=L.pos,I.push(["string",L.str])}else{const L=_.helpers.parseLinkDestination(w,R,k);if(!L.ok)return null;R=L.pos,I.push(["link",L.str])}if(R>=k)return null;const N=w.charCodeAt(R);if(!o(N)&&N!==41)return null}return null}const d=/^[a-z][a-z0-9\-_]*/;function h(_,w,R){const k=w,I=_.slice(w,R).match(d);return I===null?null:(w+=I[0].length,{pos:w,name:_.slice(k,w)})}const p=/^[a-z0-9\-_]+/i;function m(_,w,R){const k=w,I=_.slice(w,R).match(p);return I===null?null:(w+=I[0].length,{pos:w,name:_.slice(k,w)})}function g(_,w,R,k){if(R>=k||w.charCodeAt(R)!==123)return null;const I={};for(++R,R=e(w,R,k);R<k;R=e(w,R,k)){if(w.charCodeAt(R)===125){++R;for(const L in I)I[L].length===1&&(I[L]=I[L][0]);return{pos:R,attrs:I}}const P=w.charCodeAt(R);if(P===35){++R;const L=m(w,R,k);if(L===null)return null;R=L.pos;const Q="id",j=L.name;typeof I[Q]>"u"?I[Q]=[j]:I[Q].push(j)}else if(P===46){++R;const L=m(w,R,k);if(L===null)return null;R=L.pos;const Q="class",j=L.name;typeof I[Q]>"u"?I[Q]=[j]:I[Q].push(j)}else{let L=h(w,R,k);if(L===null)return null;const Q=L.name;if(R=L.pos,R=e(w,R,k),R>=k||w.charCodeAt(R)!==61||(++R,R=e(w,R,k),R>=k))return null;let j;const F=w.charCodeAt(R);if(F===34||F===39){if(L=_.helpers.parseLinkTitle(w,R,k),!L.ok)return null;j=L.str,R=L.pos}else{if(L=m(w,R,k),L===null)return null;j=L.name,R=L.pos}typeof I[Q]>"u"?I[Q]=[j]:I[Q].push(j)}if(R>=k)return null;const N=w.charCodeAt(R);if(!o(N)&&N!==125)return null}return null}function y(_,w,R,k,I){const P=_.md,N=u(w,R,k);if(N===null)return null;const L=N.name;R=N.pos,I&&(R=e(w,R,k));const Q=R,j=P.helpers.parseLinkLabel(_,Q);let F,V,J;j>=0&&(F=w.slice(R+1,j),R=j+1,V=Q+1,J=j),I&&(R=e(w,R,k));const z=R,Y=c(P,w,z,k);let fe;if(Y!==null)fe=Y.dests,R=Y.pos;else if(typeof _.env.references<"u"){const he=P.helpers.parseLinkLabel(_,z);if(he>=0){const ue=w.slice(z+1,he),G=_.env.references[P.utils.normalizeReference(ue)];G&&(fe=[["link",G.href],["string",G.title]],R=he+1)}else if(F!==void 0){const ue=_.env.references[P.utils.normalizeReference(F)];ue&&(fe=[["link",ue.href],["string",ue.title]])}}I&&(R=e(w,R,k));const de=g(P,w,R,k);let X;return de!==null&&(X=de.attrs,R=de.pos),I&&(R=e(w,R,k)),{directiveName:L,content:F,dests:fe,attrs:X,contentStart:V,contentEnd:J,pos:R}}function A(_,w){const R=_.md,k=_.src,I=_.posMax;let P=_.pos;if(k.charCodeAt(P)!==58)return!1;++P;const N=y(_,k,P,I,!1);if(N===null)return!1;const{directiveName:L,content:Q,dests:j,attrs:F,contentStart:V,contentEnd:J}=N,z=R.inlineDirectives[L];return typeof z>"u"||(P=N.pos,!w&&z({state:_,content:Q,dests:j,attrs:F,contentStart:V,contentEnd:J,directiveStart:_.pos,directiveEnd:P})===!1)?!1:(_.pos=P,!0)}function T(_,w,R,k){let I=w+1,P=1;for(;I<R&&P!==0;++I){const N=k.eMarks[I];let L=k.bMarks[I]+k.tShift[I],Q=k.skipChars(L,58),j=Q-L;if(j>=3&&(Q=e(_,Q,N),Q===N)){--P;continue}j>=3&&Q<N&&++P}return P!==0?-1:I}function E(_,w,R,k){const I=_.md,P=_.src,N=_.eMarks[w];let L=_.bMarks[w]+_.tShift[w];if(L+3>N||P.charCodeAt(L)!==58||P.charCodeAt(L+1)!==58)return!1;L+=2;let Q=!1;P.charCodeAt(L)!==58?Q=!0:L=_.skipChars(L,58),L=e(P,L,N);const j=new I.inline.State(P,I,_.env,[]),F=y(j,P,L,N,!0);if(F===null)return!1;const{directiveName:V,content:J,dests:z,attrs:Y,contentStart:fe,contentEnd:de}=F,X=I.blockDirectives[V];if(typeof X>"u")return!1;L=F.pos;const he=L;let ue=s(P,N,L),G=_.skipCharsBack(ue,58,L);ue-G>1&&(ue=G);const K=s(P,ue,L),q=P.slice(he,K);if(Q)return!k&&X({state:_,contentTitle:q,inlineContent:J,dests:z,attrs:Y,contentTitleStart:he,contentTitleEnd:K,inlineContentStart:fe,inlineContentEnd:de,directiveStartLine:w,directiveEndLine:w+1})===!1?!1:(_.line=w+1,!0);const te=T(P,w,R,_);if(te===-1)return!1;const Z=_.getLines(w+1,te-1,_.sCount[w],!0);return!k&&X({state:_,content:Z,contentTitle:q,inlineContent:J,dests:z,attrs:Y,contentStartLine:w+1,contentEndLine:te-1,contentTitleStart:he,contentTitleEnd:K,inlineContentStart:fe,inlineContentEnd:de,directiveStartLine:w,directiveEndLine:te})===!1?!1:(_.line=te,!0)}function v(_){_.inlineDirectives||(_.inlineDirectives={},_.blockDirectives={},_.inline.ruler.push("inline_directive",A),_.block.ruler.before("heading","block_directive",E))}return markdownItDirective=v,markdownItDirective}var build,hasRequiredBuild;function requireBuild(){if(hasRequiredBuild)return build;hasRequiredBuild=1;var o=Object.create,e=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,l=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,c=(G,K)=>{for(var q in K)e(G,q,{get:K[q],enumerable:!0})},d=(G,K,q,te)=>{if(K&&typeof K=="object"||typeof K=="function")for(let Z of a(K))!u.call(G,Z)&&Z!==q&&e(G,Z,{get:()=>K[Z],enumerable:!(te=s(K,Z))||te.enumerable});return G},h=(G,K,q)=>(q=G!=null?o(l(G)):{},d(!G||!G.__esModule?e(q,"default",{value:G,enumerable:!0}):q,G)),p=G=>d(e({},"__esModule",{value:!0}),G),m={};c(m,{createBlockInlineToken:()=>N,directiveParser:()=>ue,disableBlockDirectives:()=>w,disableInlineDirectives:()=>v,enableBlockDirectives:()=>_,enableInlineDirectives:()=>E,registerContainerDirective:()=>j,registerInlineDirective:()=>L,registerLeafBlockDirective:()=>Q,tokenizeBlockContent:()=>P,tokenizeInlineContent:()=>I}),build=p(m);var g=h(requireMarkdownItDirective()),y={Inline:"inline_directive",Block:"block_directive"},A=Symbol(),T=Symbol();function E(G){G.inline.ruler.enable(y.Inline,!0)}function v(G){G.inline.ruler.disable(y.Inline,!0)}function _(G){G.block.ruler.enable(y.Block,!0)}function w(G){G.block.ruler.disable(y.Block,!0)}function R(G){return typeof G=="function"}function k(G){return typeof G=="string"}function I(G,K){const q=G.pos,te=G.posMax;G.pos=K.startPos,G.posMax=K.endPos,G.md.inline.tokenize(G),G.pos=q,G.posMax=te}function P(G,K,q){const te=G.parentType,Z=G.lineMax;G.parentType=q??"directive",G.line=K.startLine,G.lineMax=K.endLine,G.md.block.tokenize(G,K.startLine,K.endLine),G.lineMax=Z,G.parentType=te}function N(G,{inlineContent:K,startLine:q}){const te=G.push("inline","",0);return te.children=[],te.content=(K==null?void 0:K.raw)||"",te.map=[q,q+1],te}function L(G,K,q){G.inlineDirectives[K]=te=>{const Z=Y(te);return q(te.state,Z)}}function Q(G,K,q){const[te,Z]=k(K)?[K,q]:[K.name,V(K)];G[T]||(G[T]={}),G[T][te]=Z,G.blockDirectives[te]=F(G,te)}function j(G,K,q){const[te,Z]=k(K)?[K,q]:[K.name,K.type==="code_block"?z(K):J(K)];G[A]||(G[A]={}),G[A][te]=Z,G.blockDirectives[te]=F(G,te)}function F(G,K){return q=>{var ce,be;const te=(ce=G[A])==null?void 0:ce[K],Z=(be=G[T])==null?void 0:be[K];if(k(q.content)){if(te)return te(q.state,de(q))}else if(Z)return Z(q.state,fe(q));return!1}}function V(G){return(K,q)=>{if(!G.match(q,K))return!1;const{container:te}=G,Z=K.push(te.token,te.tag,0);return Z.map=[q.startLine,q.endLine],Z.markup="::"+G.name,he(Z,te,q,K.env),!0}}function J(G){return(K,q)=>{if(!q.content||G.inlineContent&&!q.inlineContent&&G.inlineContent.required!==!1||!G.match(q,K))return!1;const{container:te,inlineContent:Z,content:ce,contentTokenizer:be}=G;let Ee=K.push(te.token+"_open",te.tag,1);return Ee.map=[q.startLine,q.endLine],Ee.markup=":::"+G.name,he(Ee,te,q,K.env),Z&&(Ee=K.push(Z.token+"_open",Z.tag,1),he(Ee,Z,q,K.env),Ee=N(K,q),Ee=K.push(Z.token+"_close",Z.tag,-1)),ce&&(Ee=K.push(ce.token+"_open",ce.tag,1),Ee.map=[q.startLine+1,q.endLine-1],he(Ee,ce,q,K.env)),be?be(K,q.content,q):P(K,q.content,G.name+"-directive"),ce&&(Ee=K.push(ce.token+"_close",ce.tag,-1)),Ee=K.push(te.token+"_close",te.tag,-1),!0}}function z(G){return(K,q)=>{if(!q.content||!G.match(q,K))return!1;const{name:te,container:Z}=G,ce=K.push(Z.token,Z.tag,0);return ce.map=[q.startLine,q.endLine],ce.content=q.content.raw,ce.markup=":::",ce.info=te,he(ce,Z,q,K.env),!0}}function Y(G){const K={startPos:G.directiveStart,endPos:G.directiveEnd};return G.attrs!==void 0&&(K.attrs=G.attrs),G.dests!==void 0&&(K.dests=X(G.dests)),G.content!==void 0&&(K.content={raw:G.content,startPos:G.contentStart,endPos:G.contentEnd}),K}function fe(G){const K={startLine:G.directiveStartLine,endLine:G.directiveEndLine};return G.attrs!==void 0&&(K.attrs=G.attrs),G.dests!==void 0&&(K.dests=X(G.dests)),G.inlineContent!==void 0&&(K.inlineContent={raw:G.inlineContent,startPos:G.inlineContentStart,endPos:G.inlineContentEnd}),K}function de(G){return{...fe(G),content:{raw:G.content,startLine:G.contentStartLine,endLine:G.contentEndLine}}}function X(G){var Z,ce;const K={_original_dests:G},q=(Z=G.find(be=>be[0]==="link"))==null?void 0:Z[1],te=(ce=G.find(be=>be[0]==="string"))==null?void 0:ce[1];return q!==void 0&&(K.link=q),te!==void 0&&(K.string=te),K}function he(G,{attrs:K,meta:q},te,Z){if(K!==void 0){const ce=R(K)?K(te,Z):K;G.attrs=Object.entries(ce)}if(q!==void 0){const ce=R(q)?q(te,Z):q;G.meta=ce}}var ue=()=>G=>{(0,g.default)(G)};return build}var plugin$2,hasRequiredPlugin$2;function requirePlugin$2(){if(hasRequiredPlugin$2)return plugin$2;hasRequiredPlugin$2=1;var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(o,e)=>{for(var s in e)__defProp(o,s,{get:e[s],enumerable:!0})},__copyProps=(o,e,s,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of __getOwnPropNames(e))!__hasOwnProp.call(o,l)&&l!==s&&__defProp(o,l,{get:()=>e[l],enumerable:!(a=__getOwnPropDesc(e,l))||a.enumerable});return o},__toCommonJS=o=>__copyProps(__defProp({},"__esModule",{value:!0}),o),index_exports={};__export(index_exports,{TokenType:()=>TokenType,transform:()=>transform}),plugin$2=__toCommonJS(index_exports);var import_utils=requireCommon(),ENV_FLAG_NAME="has-yfm-cut",TokenType={Cut:"yfm_cut",CutOpen:"yfm_cut_open",CutClose:"yfm_cut_close",Title:"yfm_cut_title",TitleOpen:"yfm_cut_title_open",TitleClose:"yfm_cut_title_close",Content:"yfm_cut_content",ContentOpen:"yfm_cut_content_open",ContentClose:"yfm_cut_content_close"},ClassNames={Cut:"yfm-cut",Title:"yfm-cut-title",Content:"yfm-cut-content"},CUT_REGEXP=/^{%\s*cut\s*["|'](.*)["|']\s*%}(.*)?$/;function matchOpenToken(o,e){return o[e].type==="paragraph_open"&&o[e+1].type==="inline"&&o[e+1].content.match(CUT_REGEXP)}function matchCloseToken(o,e){return o[e].type==="paragraph_open"&&o[e+1].type==="inline"&&o[e+1].content.trim()==="{% endcut %}"}function findCloseTokenIdx(o,e){let s=0,a=e;for(;a<o.length;){if(matchOpenToken(o,a))s++;else if(matchCloseToken(o,a)){if(s===0)return a;s--}a++}return null}var cutPlugin=o=>{const e=s=>{const a=s.tokens;let l=0;for(;l<a.length;){const u=matchOpenToken(a,l);if(u){const c=findCloseTokenIdx(a,l+4);if(!c){l+=3;continue}const d=u[1],h=u[2]||"";if(typeof d>"u")throw new Error(`No title provided for cut ${u[0]}`);const p=new import_utils.AttrsParser(h),m=new s.Token(TokenType.CutOpen,"details",1);m.attrSet("class",ClassNames.Cut),m.map=a[l].map,m.markup="{%",p.apply(m);const g=new s.Token(TokenType.TitleOpen,"summary",1);g.attrSet("class",ClassNames.Title);const y=m.attrGet("id");y&&(g.attrSet("id",y),m.attrSet("id",""));const A=s.md.parseInline(d,s.env)[0],T=new s.Token(TokenType.TitleClose,"summary",-1),E=new s.Token(TokenType.ContentOpen,"div",1);if(E.attrSet("class",ClassNames.Content),m.map){const R=m.map[0]+1,k=m.map[0]+2;E.map=[R,k]}const v=new s.Token(TokenType.ContentClose,"div",-1),_=new s.Token(TokenType.CutClose,"details",-1);_.map=a[c].map;const w=[m,g,A,T,E,...a.slice(l+3,c),v,_];a.splice(l,c-l+3,...w),s.env??(s.env={}),s.env[ENV_FLAG_NAME]=!0,l++}else l++}};try{o.core.ruler.before("curly_attributes","cut",e)}catch{o.core.ruler.push("cut",e)}};function hidden(o,e,s){return e in o||Object.defineProperty(o,e,{enumerable:!1,value:s}),o}function getRuntime(o){return typeof o=="string"?{script:o,style:o}:typeof o>"u"?{script:"_assets/cut-extension.js",style:"_assets/cut-extension.css"}:o}function copyRuntime({runtime:o,output:e},s){if(!o)return;const a="../runtime",{join:l,resolve:u}=dynrequire("node:path"),c={"index.js":o.script,"index.css":o.style};for(const[d,h]of Object.entries(c)){const p=l(a,d);s.has(p)||(s.add(p),copy(u(__dirname,p),l(e,h)))}}function copy(o,e){const{mkdirSync:s,copyFileSync:a}=dynrequire("node:fs"),{dirname:l}=dynrequire("node:path");s(l(e),{recursive:!0}),a(o,e)}function dynrequire(module){return eval(`require('${module}')`)}var import_directive=requireBuild(),cutDirective=o=>{o.use((0,import_directive.directiveParser)()),(0,import_directive.registerContainerDirective)(o,{name:"cut",match(e,s){return s.env??(s.env={}),s.env[ENV_FLAG_NAME]=!0,!0},container:{tag:"details",token:TokenType.Cut,attrs:{class:ClassNames.Cut}},inlineContent:{required:!1,tag:"summary",token:TokenType.Title,attrs:{class:ClassNames.Title}},content:{tag:"div",token:TokenType.Content,attrs:{class:ClassNames.Content}}})},registerTransform=(o,{runtime:e,bundle:s,output:a,directiveSyntax:l})=>{(l==="disabled"||l==="enabled")&&o.use(cutPlugin),(l==="enabled"||l==="only")&&o.use(cutDirective),o.core.ruler.push("yfm_cut_after",({env:u})=>{hidden(u,"bundled",new Set),u!=null&&u[ENV_FLAG_NAME]&&e&&(u.meta=u.meta||{},u.meta.script=u.meta.script||[],u.meta.script.push(e.script),u.meta.style=u.meta.style||[],u.meta.style.push(e.style),s&&copyRuntime({runtime:e,output:a},u.bundled))})};function transform(o={}){const{bundle:e=!0}=o;if(e&&typeof o.runtime=="string")throw new TypeError("Option `runtime` should be record when `bundle` is enabled.");const s=o.directiveSyntax||"disabled",a=getRuntime(o.runtime),l=function(u,{output:c="."}={}){registerTransform(u,{directiveSyntax:s,runtime:a,bundle:e,output:c})};return Object.assign(l,{collect(u,{destRoot:c="."}){const d=dynrequire("markdown-it");new d().use(p=>{registerTransform(p,{directiveSyntax:s,runtime:a,bundle:e,output:c})}).parse(u,{})}}),l}return plugin$2}var pluginExports$2=requirePlugin$2(),CutNode;(function(o){o.Cut="yfm_cut",o.CutTitle="yfm_cut_title",o.CutContent="yfm_cut_content"})(CutNode||(CutNode={}));var CutAttr;(function(o){o.Class="class",o.Line="data-line",o.Markup="data-markup"})(CutAttr||(CutAttr={}));const cutType=nodeTypeFactory(CutNode.Cut),cutTitleType=nodeTypeFactory(CutNode.CutTitle),cutContentType=nodeTypeFactory(CutNode.CutContent),YfmCutClassName$1={Cut:"yfm-cut",Title:"yfm-cut-title",Content:"yfm-cut-content"},getAttrs$2=o=>{const e=o.attrs?Object.fromEntries(o.attrs):{};return e[CutAttr.Markup]=o.markup,e},parserTokens$3={[CutNode.Cut]:{name:CutNode.Cut,type:"block",getAttrs:getAttrs$2},[CutNode.CutTitle]:{name:CutNode.CutTitle,type:"block",getAttrs:(o,e,s)=>{let a=o.attrGet("data-line");if(!a){const l=e[s-1];(l==null?void 0:l.type)==="yfm_cut_open"&&(a=l.attrGet("data-line"))}return{[CutAttr.Line]:a}}},[CutNode.CutContent]:{name:CutNode.CutContent,type:"block"}},DEFAULT_PLACEHOLDERS$1={Title:"Cut title",Content:"Cut content"},getSchemaSpecs$3=(o,e)=>({[CutNode.Cut]:{attrs:{class:{default:YfmCutClassName$1.Cut},[CutAttr.Markup]:{default:null}},content:`${CutNode.CutTitle} ${CutNode.CutContent}`,group:"block yfm-cut",parseDOM:[{tag:`.${YfmCutClassName$1.Cut}`,getAttrs:s=>({[CutAttr.Markup]:s.getAttribute(CutAttr.Markup)})}],toDOM(s){return["div",s.attrs,0]},selectable:!0,allowSelection:!0,defining:!0,complex:"root"},[CutNode.CutTitle]:{attrs:{[CutAttr.Class]:{default:YfmCutClassName$1.Title},[CutAttr.Line]:{default:null}},content:"inline*",group:"block yfm-cut",parseDOM:[{tag:`.${YfmCutClassName$1.Title}`}],toDOM(s){return["div",s.attrs,0]},placeholder:{content:(e==null?void 0:e[CutNode.CutTitle])??(o==null?void 0:o.yfmCutTitlePlaceholder)??DEFAULT_PLACEHOLDERS$1.Title,alwaysVisible:!0},definingAsContext:!0,selectable:!1,allowSelection:!1,complex:"leaf"},[CutNode.CutContent]:{attrs:{class:{default:YfmCutClassName$1.Content}},content:"(block | paragraph)+",group:"block yfm-cut",parseDOM:[{tag:`.${YfmCutClassName$1.Content}`}],toDOM(s){return["div",s.attrs,0]},placeholder:{content:(e==null?void 0:e[CutNode.CutContent])??(o==null?void 0:o.yfmCutContentPlaceholder)??DEFAULT_PLACEHOLDERS$1.Content,alwaysVisible:!0},definingAsContext:!0,selectable:!1,allowSelection:!1,complex:"leaf"}});function getSerializerTokens({directiveSyntax:o}){const e=s=>o==null?void 0:o.shouldSerializeToDirective("yfmCut",s.attrs[CutAttr.Markup]);return{[CutNode.Cut]:(s,a)=>{s.renderContent(a),s.write(e(a)?":::":"{% endcut %}"),s.closeBlock(a)},[CutNode.CutTitle]:(s,a,l)=>{if(e(l)){s.write(":::cut ["),s.renderInline(a),s.write("]"),s.ensureNewLine(),s.closeBlock();return}s.write('{% cut "'),a.nodeSize>2?s.renderInline(a):s.write(getPlaceholderContent(a)),s.write(`" %}
`),s.write(`
`),s.closeBlock()},[CutNode.CutContent]:(s,a,l)=>{if(e(l)){s.renderContent(a);return}isNodeEmpty(a)?s.write(getPlaceholderContent(a)+`

`):s.renderInline(a)}}}const YfmCutSpecs=(o,e)=>{const s=getSchemaSpecs$3(e,o.context.get("placeholder")),a=o.context.get("directiveSyntax"),l=getSerializerTokens({directiveSyntax:a});o.configureMd(u=>u.use(pluginExports$2.transform({bundle:!1,directiveSyntax:a==null?void 0:a.mdPluginValueFor("yfmCut")}))).addNode(CutNode.Cut,()=>({spec:s[CutNode.Cut],toMd:l[CutNode.Cut],fromMd:{tokenSpec:parserTokens$3[CutNode.Cut]},view:e.cutView})).addNode(CutNode.CutTitle,()=>({spec:s[CutNode.CutTitle],toMd:l[CutNode.CutTitle],fromMd:{tokenSpec:parserTokens$3[CutNode.CutTitle]},view:e.cutTitleView})).addNode(CutNode.CutContent,()=>({spec:s[CutNode.CutContent],toMd:l[CutNode.CutContent],fromMd:{tokenSpec:parserTokens$3[CutNode.CutContent]},view:e.cutContentView}))};var plugin$1,hasRequiredPlugin$1;function requirePlugin$1(){if(hasRequiredPlugin$1)return plugin$1;hasRequiredPlugin$1=1;var o=Object.create,e=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,l=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,c=(Y,fe)=>{for(var de in fe)e(Y,de,{get:fe[de],enumerable:!0})},d=(Y,fe,de,X)=>{if(fe&&typeof fe=="object"||typeof fe=="function")for(let he of a(fe))!u.call(Y,he)&&he!==de&&e(Y,he,{get:()=>fe[he],enumerable:!(X=s(fe,he))||X.enumerable});return Y},h=(Y,fe,de)=>(de=Y!=null?o(l(Y)):{},d(!Y||!Y.__esModule?e(de,"default",{value:Y,enumerable:!0}):de,Y)),p=Y=>d(e({},"__esModule",{value:!0}),Y),m={};c(m,{FILE_KNOWN_ATTRS:()=>v,FILE_MARKUP_PREFIX:()=>R,FILE_REQUIRED_ATTRS:()=>_,FILE_RULE_NAME:()=>E,FILE_TOKEN:()=>w,FILE_TO_LINK_ATTRS_MAP:()=>T,FileClassName:()=>I,FileHtmlAttr:()=>A,FileSpecialAttr:()=>y,transform:()=>z}),plugin$1=p(m);var g=h(requireMarkdownIt()),y=(Y=>(Y.Src="src",Y.Name="name",Y.Lang="lang",Y))(y||{}),A=(Y=>(Y.Download="download",Y.Href="href",Y.HrefLang="hreflang",Y.Media="media",Y.Ping="ping",Y.ReferrerPolicy="referrerpolicy",Y.Rel="rel",Y.Target="target",Y.Type="type",Y))(A||{}),T={src:"href",name:"download",lang:"hreflang"},E="yfm_file_inline",v=["src","name","lang","referrerpolicy","rel","target","type"],_=["src","name"],w="yfm_file",R="{% file ",k=R.length,I=(Y=>(Y.Link="yfm-file",Y.Icon="yfm-file__icon",Y))(I||{}),P="has-yfm-file",N=Y=>{Y.renderer.rules[w]=(fe,de,X,he,ue)=>{const G=fe[de],K=`<span class="${Y.utils.escapeHtml("yfm-file__icon")}"></span>`;return`<a${ue.renderAttrs(G)}>${K}${Y.utils.escapeHtml(G.content)}</a>`}},L=(Y,fe)=>{N(Y),Y.inline.ruler.push(E,(de,X)=>{if(de.src.substring(de.pos,de.pos+k)!==R)return!1;const ue=de.src.slice(de.pos+k,de.posMax).match(/^((?:\s*\w+=(?:"[^"]+"|'[^']+')\s)+)\s*%}/);if(!ue)return!1;const G=ue[0].length,q=ue[1].match(/\w+=(?:"[^"]+"|'[^']+')/g);if(!q)return!1;const te={};if(q.forEach(ce=>{const be=ce.indexOf("="),Ee=ce.slice(0,be),Se=ce.slice(be+2,-1);v.includes(Ee)&&Se&&(te[Ee]=Se)}),!_.every(ce=>ce in te))return!1;if(!X){const ce=de.push(w,"",0);ce.block=!1,ce.markup=R,ce.content=te.name,ce.attrs=Object.entries(te),ce.attrSet("class","yfm-file");for(const be of ce.attrs)be[0]in T&&(be[0]=T[be[0]]);Array.isArray(fe==null?void 0:fe.fileExtraAttrs)&&ce.attrs.push(...fe.fileExtraAttrs)}return de.pos=de.pos+k+G,de.env??(de.env={}),de.env[P]=!0,!0})};function Q(Y,fe,de){return fe in Y||Object.defineProperty(Y,fe,{enumerable:!1,value:de}),Y}var j=requireBuild(),F=["referrerpolicy","rel","target","type","hreflang"],V=(Y,fe={})=>{const{fileExtraAttrs:de}=fe;N(Y),Y.use((0,j.directiveParser)()),(0,j.registerInlineDirective)(Y,"file",(X,he)=>{if(!he.content||!he.dests)return!1;const ue=he.content.raw,G=he.dests.link||"",K=X.push(w,"",0);if(K.block=!1,K.markup=":file",K.content=he.content.raw,K.attrSet("class","yfm-file"),K.attrSet("href",G),K.attrSet("download",ue),he.attrs)for(const q of F)he.attrs[q]&&K.attrSet(q,he.attrs[q]);if(Array.isArray(de))for(const[q,te]of de)K.attrSet(q,te);return X.env??(X.env={}),X.env[P]=!0,!0})},J=(Y,{extraAttrs:fe,bundle:de,onBundle:X,runtime:he,output:ue,directiveSyntax:G})=>{(G==="disabled"||G==="enabled")&&L(Y,{fileExtraAttrs:fe}),(G==="enabled"||G==="only")&&V(Y,{fileExtraAttrs:fe}),Y.core.ruler.push("yfm_file_after",({env:K})=>{var q;K!=null&&K[P]&&(K.meta||(K.meta={}),(q=K.meta).style||(q.style=[]),K.meta.style.push(he.style),de&&X&&(Q(K,"bundled",new Set),X(K,ue,he)))})},z=(Y={})=>{const{bundle:fe=!0,directiveSyntax:de="disabled"}=Y;if(fe&&typeof Y.runtime=="string")throw new TypeError("Option `runtime` should be record when `bundle` is enabled.");const X=typeof(Y==null?void 0:Y.runtime)=="object"?Y.runtime:{style:(Y==null?void 0:Y.runtime)??"_assets/file-extension.css"},he=(ue,{output:G=".",fileExtraAttrs:K}={})=>{J(ue,{bundle:fe,runtime:X,output:G,directiveSyntax:de,onBundle:Y.onBundle,extraAttrs:K??Y.extraAttrs})};return Object.assign(he,{collect(ue,{destRoot:G="."}){new g.default().use(q=>{J(q,{bundle:fe,runtime:X,directiveSyntax:de,output:G,onBundle:Y.onBundle,extraAttrs:Y.extraAttrs})}).parse(ue,{})}}),he};return plugin$1}var pluginExports$1=requirePlugin$1();const yfmFileNodeName=pluginExports$1.FILE_TOKEN,YfmFileAttr={Markup:"data-markup",Name:pluginExports$1.FileHtmlAttr.Download,Link:pluginExports$1.FileHtmlAttr.Href,ReferrerPolicy:pluginExports$1.FileHtmlAttr.ReferrerPolicy,Rel:pluginExports$1.FileHtmlAttr.Rel,Target:pluginExports$1.FileHtmlAttr.Target,Type:pluginExports$1.FileHtmlAttr.Type,Lang:pluginExports$1.FileHtmlAttr.HrefLang},YFM_FILE_DIRECTIVE_ATTRS=[YfmFileAttr.ReferrerPolicy,YfmFileAttr.Rel,YfmFileAttr.Target,YfmFileAttr.Type,YfmFileAttr.Lang],KNOWN_ATTRS=pluginExports$1.FILE_KNOWN_ATTRS.map(o=>o in pluginExports$1.FILE_TO_LINK_ATTRS_MAP?pluginExports$1.FILE_TO_LINK_ATTRS_MAP[o]:o),REQUIRED_ATTRS=pluginExports$1.FILE_REQUIRED_ATTRS.map(o=>o in pluginExports$1.FILE_TO_LINK_ATTRS_MAP?pluginExports$1.FILE_TO_LINK_ATTRS_MAP[o]:o),fileNodeAttrsSpec={[YfmFileAttr.Markup]:{default:null}};for(const o of KNOWN_ATTRS){const e=fileNodeAttrsSpec[o]={};REQUIRED_ATTRS.includes(o)||(e.default=null)}const LINK_TO_FILE_ATTRS_MAP={};for(const[o,e]of Object.entries(pluginExports$1.FILE_TO_LINK_ATTRS_MAP))LINK_TO_FILE_ATTRS_MAP[e]=o;const fileType=nodeTypeFactory(yfmFileNodeName),YfmFileSpecs=o=>{const e=o.context.get("directiveSyntax");o.configureMd(s=>s.use(pluginExports$1.transform({bundle:!1,directiveSyntax:e==null?void 0:e.mdPluginValueFor("yfmFile")}))),o.addNode(yfmFileNodeName,()=>({spec:{group:"inline",inline:!0,attrs:fileNodeAttrsSpec,parseDOM:[{tag:`a[class="${pluginExports$1.FileClassName.Link}"]`,getAttrs(s){const a=s,l={};for(const u of KNOWN_ATTRS){const c=a.getAttribute(u);c&&(l[u]=c)}return l},priority:101}],toDOM(s){const a=document.createElement("a");a.contentEditable="false",a.classList.add(pluginExports$1.FileClassName.Link);for(const[u,c]of Object.entries(s.attrs))c&&a.setAttribute(u,c);const l=document.createElement("span");return l.classList.add(pluginExports$1.FileClassName.Icon),a.appendChild(l),a.append(s.attrs[pluginExports$1.FileHtmlAttr.Download]),a}},fromMd:{tokenName:yfmFileNodeName,tokenSpec:{name:yfmFileNodeName,type:"node",getAttrs:s=>{const a=Object.fromEntries(s.attrs||[]);return a[YfmFileAttr.Markup]=s.markup,a}}},toMd:(s,a)=>{if(e!=null&&e.shouldSerializeToDirective("yfmFile",a.attrs[YfmFileAttr.Markup])){s.write(serializeToDirective(a));return}const l=Object.entries(a.attrs).reduce((u,[c,d])=>(c!==YfmFileAttr.Markup&&d&&(c in LINK_TO_FILE_ATTRS_MAP&&(c=LINK_TO_FILE_ATTRS_MAP[c]),u.push(`${c}="${d.replace(/"/g,"")}"`)),u),[]).join(" ");s.write(`${pluginExports$1.FILE_MARKUP_PREFIX}${l} %}`)}}))};function serializeToDirective(o){const e=o.attrs[YfmFileAttr.Name]||"",s=o.attrs[YfmFileAttr.Link]||"";let a=`:file[${e}](${s})`;const l=YFM_FILE_DIRECTIVE_ATTRS.reduce((u,c)=>{const d=o.attrs[c];return d&&u.push(`${c}="${d}"`),u},[]);return l.length&&(a+=`{${l.join(" ")}}`),a}const YfmHeadingAttr={Level:headingLevelAttr,Id:"id",DataLine:"data-line",Folding:"folded"},CUSTOM_ID_REGEXP=/\[?{ ?#(\S+) ?}]?/g,CUSTOM_ID_EXCEPTION="[{#T}]",getCustomIds=o=>{const e=[];return o.replace(CUSTOM_ID_REGEXP,(s,a)=>(s!==CUSTOM_ID_EXCEPTION&&e.push(a),"")),e.length?e:null},removeCustomId=o=>CUSTOM_ID_REGEXP.test(o)?o.replace(CUSTOM_ID_REGEXP,e=>e===CUSTOM_ID_EXCEPTION?e:"").trim():o,removeCustomIds=o=>{var e;o.content=removeCustomId(o.content),(e=o.children)==null||e.forEach(s=>{s.content=removeCustomId(s.content)})},headingIdsPlugin=o=>{o.core.ruler.push("heading-attrs",e=>{const{tokens:s}=e;for(let a=0;a<s.length;a++){const l=s[a];if(l.type!=="heading_open")continue;const u=s[a+1];if((u==null?void 0:u.type)!=="inline")continue;const c=getCustomIds(u.content);if(c){const d=c[0];l.attrSet("id",d),removeCustomIds(u)}}})},getNodeAttrs=o=>e=>({[YfmHeadingAttr.Level]:o,[YfmHeadingAttr.Id]:e.getAttribute("id")||"",[YfmHeadingAttr.Folding]:getFoldingAttr(e)});function getFoldingAttr(o){const e=o.getAttribute(`data-${YfmHeadingAttr.Folding}`);return e==="true"?!0:e==="false"?!1:null}const DEFAULT_PLACEHOLDER=o=>"Heading "+o.attrs[YfmHeadingAttr.Level],YfmHeadingSpecs=(o,e)=>{o.configureMd(s=>s.use(headingIdsPlugin)),o.addNode(headingNodeName,()=>{var s;return{spec:{attrs:{[YfmHeadingAttr.Id]:{default:""},[YfmHeadingAttr.Level]:{default:1},[YfmHeadingAttr.DataLine]:{default:null},[YfmHeadingAttr.Folding]:{default:null}},content:"(text | inline)*",group:"block",defining:!0,selectable:!0,parseDOM:[{tag:"h1",getAttrs:getNodeAttrs(1),priority:100,consuming:!0},{tag:"h2",getAttrs:getNodeAttrs(2),priority:100,consuming:!0},{tag:"h3",getAttrs:getNodeAttrs(3),priority:100,consuming:!0},{tag:"h4",getAttrs:getNodeAttrs(4),priority:100,consuming:!0},{tag:"h5",getAttrs:getNodeAttrs(5),priority:100,consuming:!0},{tag:"h6",getAttrs:getNodeAttrs(6),priority:100,consuming:!0},{tag:"a.yfm-anchor",context:`${headingNodeName}/`,skip:!0,ignore:!0,priority:1e3}],toDOM(a){const l=a.attrs[YfmHeadingAttr.Id],u=a.attrs[YfmHeadingAttr.DataLine],c=a.attrs[YfmHeadingAttr.Folding];return["h"+a.attrs[YfmHeadingAttr.Level],{id:l||null,[YfmHeadingAttr.DataLine]:u,[`data-${YfmHeadingAttr.Folding}`]:c},0]},placeholder:{content:((s=o.context.get("placeholder"))==null?void 0:s.heading)??e.headingPlaceholder??DEFAULT_PLACEHOLDER,alwaysVisible:!0}},fromMd:{tokenSpec:{name:headingNodeName,type:"block",getAttrs:a=>{var u;if(a.type.endsWith("_close"))return{};const l=Object.fromEntries(a.attrs||[]);return{[YfmHeadingAttr.Level]:Number(a.tag.slice(1)),[YfmHeadingAttr.Folding]:((u=a.meta)==null?void 0:u.folding)===!0?!0:null,...l}}}},toMd:(a,l)=>{const u=l.attrs[YfmHeadingAttr.Folding],c=l.attrs[YfmHeadingAttr.Level];a.write(a.repeat("#",c)+(typeof u=="boolean"?"+":"")+" "),a.renderInline(l);const d=l.attrs[YfmHeadingAttr.Id];d&&a.write(` {#${d}}`),a.closeBlock(l)}}})};var constants$1={},hasRequiredConstants$1;function requireConstants$1(){return hasRequiredConstants$1||(hasRequiredConstants$1=1,Object.defineProperty(constants$1,"__esModule",{value:!0}),constants$1.DEFAULT_LANG=void 0,constants$1.DEFAULT_LANG="ru"),constants$1}var constants={},hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,Object.defineProperty(constants,"__esModule",{value:!0}),constants.TITLES=void 0,constants.TITLES={ru:{info:"",tip:"",alert:"",warning:""},en:{info:"Note",tip:"Tip",alert:"Alert",warning:"Warning"},ar:{info:"",tip:"",alert:"",warning:""},cs:{info:"Poznmka",tip:"Tip",alert:"Upozornn",warning:"Varovn"},fr:{info:"Remarque",tip:"Astuce",alert:"Alerte",warning:"Avertissement"},es:{info:"Nota",tip:"Consejo",alert:"Alerta",warning:"Aviso"},he:{info:"",tip:"",alert:"",warning:""},bg:{info:"",tip:"",alert:"",warning:""},et:{info:"Mrkus",tip:"Nuanne",alert:"Thelepanu",warning:"Thtis"},el:{info:"",tip:"",alert:"",warning:""},pt:{info:"Observao",tip:"Sugesto",alert:"Ateno",warning:"Importante"},zh:{info:"",tip:"",alert:"",warning:""},"zh-tw":{info:"",tip:"",alert:"",warning:""},kk:{info:"",tip:"",alert:" ",warning:""},tr:{info:"Not",tip:"neri",alert:"Dikkat",warning:"nemli"},uz:{info:"Sharh",tip:"Maslahat",alert:"Diqqat",warning:"Bu muhim"}}),constants}var notes,hasRequiredNotes;function requireNotes(){if(hasRequiredNotes)return notes;hasRequiredNotes=1;const o=requireSource(),e=requireUtils$2(),s=requireConstants$1(),a=requireConstants(),l=/^{% note (alert|info|tip|warning)\s*(?:"(.*?)")? %}$/,u=/^{% note (.*)%}/,c=(y,A)=>y[A].type==="paragraph_open"&&y[A+1].type==="inline"&&y[A+1].content.trim()==="{% endnote %}";function d(y,A){let T=A;return(!T||!Object.keys(a.TITLES).includes(T))&&(T=s.DEFAULT_LANG),a.TITLES[T][y]}function h(y,A){return y[A].type==="paragraph_open"&&y[A+1].type==="inline"&&y[A+1].content.match(l)}function p(y,A){return y[A].type==="paragraph_open"&&y[A+1].type==="inline"&&y[A+1].content.match(u)}const m=(0,e.nestedCloseTokenIdxFactory)("Note",h,c);return notes=(y,{lang:A=s.DEFAULT_LANG,notesAutotitle:T,path:E,log:v})=>{T=typeof T=="boolean"?T:!0;const _=w=>{const{tokens:R,env:k}=w,I=k.path||E;let P=0;for(;P<R.length;){const N=h(R,P);if(N){const L=m(R,P+2,I,v);if(!L){P+=3;continue}const Q=N[1].toLowerCase(),j=new w.Token("yfm_note_open","div",1);j.attrSet("class",`yfm-note yfm-accent-${Q}`),j.attrSet("note-type",Q),j.map=R[P].map;const F=R[L].map;F&&j.map&&(j.map[1]=F[1]);const V=new w.Token("yfm_note_close","div",-1);V.map=R[L].map;const J=new w.Token("yfm_note_title_open","p",1);J.attrSet("class","yfm-note-title");const z=T?d(Q,A):"",Y=N[2]===void 0?z:N[2],fe=w.md.parseInline(Y,w.env)[0];fe.map=null;const de=new w.Token("yfm_note_title_close","p",-1);J.block=!0,de.block=!0;const X=new w.Token("yfm_note_content_open","div",1);X.attrSet("class","yfm-note-content");const he=new w.Token("yfm_note_content_close","div",-1);j.map&&(X.map=[j.map[0]+2,j.map[1]-2]);const ue=[j];fe.content&&ue.push(J,fe,de),ue.push(X,...R.slice(P+3,L),he,V),R.splice(P,L-P+3,...ue),P++}else p(R,P)&&R[P+1].content!=="{% endnote %}"?(v.warn(`Incorrect syntax for notes${I?`, file ${(0,o.bold)(I)}`:""}`),P+=3):P++}};try{y.core.ruler.before("curly_attributes","notes",_)}catch{y.core.ruler.push("notes",_)}},notes}var notesExports=requireNotes();const yfmPlugin=getDefaultExportFromCjs$1(notesExports);var NoteNode;(function(o){o.Note="yfm_note",o.NoteTitle="yfm_note_title",o.NoteContent="yfm_note_content"})(NoteNode||(NoteNode={}));var NoteAttrs;(function(o){o.Class="class",o.Type="note-type",o.Line="data-line"})(NoteAttrs||(NoteAttrs={}));const parserTokens$2={[NoteNode.Note]:{name:NoteNode.Note,type:"block",getAttrs:o=>o.attrs?Object.fromEntries(o.attrs):{}},[NoteNode.NoteTitle]:{name:NoteNode.NoteTitle,type:"block",getAttrs:(o,e,s)=>{let a=o.attrGet("data-line");if(!a){const l=e[s-1];(l==null?void 0:l.type)==="yfm_note_open"&&(a=l.attrGet("data-line"))}return{[NoteAttrs.Line]:a}}},[NoteNode.NoteContent]:{name:NoteNode.NoteContent,type:"block"}},DEFAULT_TITLE_PLACEHOLDER="Note",DEFAULT_CONTENT_PLACEHOLDER="Note content",getSchemaSpecs$2=(o,e)=>({[NoteNode.Note]:{attrs:{[NoteAttrs.Class]:{default:"yfm-note yfm-accent-info"},[NoteAttrs.Type]:{default:"info"}},content:`${NoteNode.NoteTitle} ${NoteNode.NoteContent}`,group:"block yfm-note",parseDOM:[{tag:"div.yfm-note",priority:100,getAttrs:s=>({[NoteAttrs.Class]:s.getAttribute(NoteAttrs.Class)||"",[NoteAttrs.Type]:s.getAttribute(NoteAttrs.Type)||"info"})}],toDOM(s){return["div",s.attrs,0]},selectable:!0,allowSelection:!0,complex:"root"},[NoteNode.NoteTitle]:{attrs:{[NoteAttrs.Line]:{default:null}},content:"inline*",group:"block yfm-note",parseDOM:[{tag:"p.yfm-note-title",priority:100}],toDOM(s){return["p",{class:"yfm-note-title",...s.attrs},0]},selectable:!1,allowSelection:!1,placeholder:{content:(e==null?void 0:e[NoteNode.NoteTitle])??(o==null?void 0:o.yfmNoteTitlePlaceholder)??DEFAULT_TITLE_PLACEHOLDER,alwaysVisible:!0},complex:"leaf"},[NoteNode.NoteContent]:{content:"(block | paragraph)+",group:"block yfm-note",parseDOM:[{tag:"div.yfm-note-content",priority:100}],toDOM(){return["div",{class:"yfm-note-content"},0]},selectable:!1,allowSelection:!1,placeholder:{content:(e==null?void 0:e[NoteNode.NoteContent])??DEFAULT_CONTENT_PLACEHOLDER,alwaysVisible:!0},complex:"leaf"}}),serializerTokens$2={[NoteNode.Note]:(o,e)=>{o.renderContent(e),o.write("{% endnote %}"),o.closeBlock(e)},[NoteNode.NoteTitle]:(o,e,s)=>{if(o.write(`{% note ${s.attrs[NoteAttrs.Type]} `),e.nodeSize>2)o.write('"'),o.renderInline(e),o.write('"');else{const a=getPlaceholderContent(e);a&&o.write(`"${a}"`)}o.write(` %}
`),o.write(`
`),o.closeBlock()},[NoteNode.NoteContent]:(o,e)=>{isNodeEmpty(e)?o.write(getPlaceholderContent(e)+`

`):o.renderInline(e)}},noteType=nodeTypeFactory(NoteNode.Note),noteTitleType=nodeTypeFactory(NoteNode.NoteTitle),noteContentType=nodeTypeFactory(NoteNode.NoteContent),YfmNoteSpecs=(o,e)=>{const s=getSchemaSpecs$2(e,o.context.get("placeholder"));o.configureMd(a=>a.use(yfmPlugin,{log:logExports.log,lang:getConfig$1().lang||"en"})).addNode(NoteNode.Note,()=>({spec:s[NoteNode.Note],toMd:serializerTokens$2[NoteNode.Note],fromMd:{tokenSpec:parserTokens$2[NoteNode.Note]}})).addNode(NoteNode.NoteTitle,()=>({spec:s[NoteNode.NoteTitle],toMd:serializerTokens$2[NoteNode.NoteTitle],fromMd:{tokenSpec:parserTokens$2[NoteNode.NoteTitle]}})).addNode(NoteNode.NoteContent,()=>({spec:s[NoteNode.NoteContent],toMd:serializerTokens$2[NoteNode.NoteContent],fromMd:{tokenSpec:parserTokens$2[NoteNode.NoteContent]}}))};var table$2,hasRequiredTable;function requireTable(){if(hasRequiredTable)return table$2;hasRequiredTable=1;const o=requireCommon(),e="yfm_table",s=124,a=96,l=35,u=92,c=123,d=125,h=36,p=(q,te,Z)=>{const ce=[...q],be=te.slice(Z);for(let Ee=0;Ee<ce.length;Ee++){const Se=be.charCodeAt(Ee),ke=ce[Ee];if(Se!==ke)return!1}return!0},m=[c,c],g=(q,te)=>p(m,q,te),y=[d,d],A=(q,te)=>p(y,q,te),T=[a,a,a],E=(q,te)=>p(T,q,te),v=[h,h],_=(q,te)=>p(v,q,te),w=[l,s],R=(q,te)=>p(w,q,te),k=(q,te)=>{const Z=te;for(te--;q.charCodeAt(te)===u;)te--;return(Z-te)%2===0},I=(q,te)=>!k(q,te),P=[s,s],N=(q,te)=>p(P,q,te)&&I(q,te),L=[s],Q=(q,te)=>p(L,q,te)&&I(q,te)&&!N(q,te),j=[s,l],F=(q,te)=>p(j,q,te),V=(q,te,Z)=>{if(q.charCodeAt(te)!==a||te>0&&k(q,te))return!1;const ce=te;for(;te<Z&&q.charCodeAt(te)===a;)te++;const Ee=q.slice(ce,te).length;let Se=te,ke;for(;(ke=q.indexOf("`",Se))!==-1;){for(Se=ke+1;Se<Z&&q.charCodeAt(Se)===a;)Se++;if(Se-ke===Ee)return{end:Se,steps:Se-ce}}return!1},J=(q,te,Z)=>{if(q.charCodeAt(te)!==h||te>0&&!I(q,te))return!1;{const Ee=te+1<=Z?q.charCodeAt(te+1):-1;if(Ee===32||Ee===9)return!1;if(Ee===h)return{end:te+2,steps:2}}const ce=te+1;let be=ce;for(;be=q.indexOf("$",be);){if(be===-1||be>Z)return!1;if(k(q,be)){be++;continue}const Ee=q.charCodeAt(be-1),Se=be+1<=Z?q.charCodeAt(be+1):-1;return Ee===32||Ee===9||Se>=48&&Se<=57?!1:{end:be+1,steps:be+1-ce}}return!1};class z{get pos(){return this._pos}get line(){return this._line}get lineEnds(){return this._lineEnds}constructor(te,Z,ce){this.state=te,this._line=ce,this._pos=Z,this._lineEnds=this.state.eMarks[this._line]}stats(){return{line:this._line,pos:this._pos}}get symbol(){return this.state.src[this._pos]}next(te=1){for(let Z=0;Z<te;Z++)this._pos++,this._pos>this._lineEnds&&(this._line++,this._pos=this.state.bMarks[this._line]+this.state.tShift[this._line],this._lineEnds=this.state.eMarks[this._line])}}function Y(q,te,Z,ce,be={}){let Ee=null,Se=0,ke=[],Ae=null,Te=null;const xe=new z(q,te+w.length,ce),Pe=[];let Le=!1,Ue=!1,Be=!1;const Ze=new Map,We=()=>{Ae&&ke.push([Ae,xe.stats()]),ke.length&&Te&&Pe.push([Te,xe.line,ke]),ke=[],Ae=null,Te=null};for(;xe.pos<=Z&&xe.symbol!==void 0;){if(be.table_ignoreSplittersInBlockCode!==!1&&!Ue&&E(q.src,xe.pos)&&(Le=!Le,xe.next(T.length)),be.table_ignoreSplittersInBlockMath&&!Le&&_(q.src,xe.pos)&&(Ue=!Ue,xe.next(v.length)),Le||Ue){xe.next();continue}if(!Be&&g(q.src,xe.pos)&&(Be=!0,xe.next(m.length)),Be&&A(q.src,xe.pos)&&(Be=!1,xe.next(y.length)),Be){xe.next();continue}if(be.table_ignoreSplittersInInlineCode){const Ye=V(q.src,xe.pos,xe.lineEnds);if(Ye!==!1){xe.next(Ye.steps);continue}}if(be.table_ignoreSplittersInInlineMath){const Ye=J(q.src,xe.pos,xe.lineEnds);if(Ye!==!1){xe.next(Ye.steps);continue}}if(R(q.src,xe.pos)){Se++,xe.next(w.length);continue}if(F(q.src,xe.pos))if(Se===0){We(),xe.next(j.length),Ee=xe.line+2;break}else{Se--,xe.next(j.length);continue}if(Se>0){xe.next();continue}if(N(q.src,xe.pos)){const Ye=Ze.get(Se);Ye?(We(),xe.next(P.length)):(xe.next(P.length),Te=xe.line,Ae=xe.stats()),Ze.set(Se,!Ye);continue}if(Q(q.src,xe.pos)){Ae&&ke.push([Ae,xe.stats()]),xe.next(L.length),Ae=xe.stats();continue}xe.next()}const{pos:Ge}=xe;return{rows:Pe,endOfTable:Ee,pos:Ge}}function fe(q,te){const Z=q.skipSpaces(te),ce=q.src.slice(Z);return new o.AttrsParser().parse(ce)}function de(q,te){var Z;const ce=/\s*\{[^}]*}$/,be=q.content.match(ce);if(!be)return;const Ee=new o.AttrsParser().parse(be[0].trim()),Se=(Z=Ee==null?void 0:Ee.class)===null||Z===void 0?void 0:Z.join(" ");if(Se){te.attrSet("class",Se);let ke=be[0].replace(`.${Se}`,"");ke.trim()==="{}"&&(ke=""),q.content=q.content.replace(be[0],ke)}}const X=">",he="^",ue=(q,te)=>{for(let Z=0;Z<q.length;Z++)for(let ce=0;ce<q[0].length;ce++){if(q[Z][ce]===X){if(ce===0)continue;te[Z][ce].meta={markForDeletion:!0};let be=2;for(let Ee=ce-1;Ee>=0;Ee--)if(q[Z][Ee]===X)be++,te[Z][Ee].meta={markForDeletion:!0};else{if(q[Z][Ee]===he)break;te[Z][Ee].attrSet("colspan",be.toString());break}}if(q[Z][ce]===he){if(Z===0)continue;te[Z][ce].meta={markForDeletion:!0};let be=2;for(let Ee=Z-1;Ee>=0;Ee--)if(q[Ee][ce]===he)be++,te[Ee][ce].meta={markForDeletion:!0};else{if(q[Ee][ce]===X)break;te[Ee][ce].attrSet("rowspan",be.toString());break}}}},G=(q,te)=>{var Z;const ce=[];for(let be=q;be<te.length;be++)if(!((Z=te[be].meta)===null||Z===void 0)&&Z.markForDeletion){ce.unshift([be]);const Ee=te[be].level;for(let Se=be+1;Se<te.length;Se++)if(te[Se].type==="yfm_td_close"&&te[Se].level===Ee){ce[0].push(Se);break}}ce.forEach(([be,Ee])=>{be&&Ee&&te.splice(be,Ee-be+1)})};return table$2=(q,te)=>{q.block.ruler.before("code",e,(Z,ce,be,Ee)=>{let Se;const ke=Z.bMarks[ce]+Z.tShift[ce],Ae=Z.eMarks[be];if(Ae-ke<2||!R(Z.src,ke))return!1;if(Ee)return!0;const{rows:Te,endOfTable:xe,pos:Pe}=Y(Z,ke,Ae,ce,te),Le=fe(Z,Pe);if(!xe)return Se=Z.push("__yfm_lint","",0),Se.hidden=!0,Se.map=[ce,be],Se.attrSet("YFM004","true"),!1;const Ue=Z.lineMax;Z.lineMax=xe,Z.line=ce;const Be=Z.tokens.length;Se=Z.push("yfm_table_open","table",1);const{attr:Ze=[],...We}=Le;for(const[He,at]of Object.entries(We))Se.attrJoin(He,at.join(" "));for(const He of Ze)Se.attrJoin(He,"true");Se.map=[ce,xe],Se=Z.push("yfm_tbody_open","tbody",1),Se.map=[ce+1,xe-1];const Ge=Math.max(...Te.map(([,,He])=>He.length)),Ye=[],Ve=[];for(let He=0;He<Te.length;He++){const[at,dt,bt]=Te[He];Ye.push([]),Ve.push([]);const Ct=bt.length;Se=Z.push("yfm_tr_open","tr",1),Se.map=[at,dt];for(let ht=0;ht<bt.length;ht++){const[pt,ae]=bt[ht];Se=Z.push("yfm_td_open","td",1),Ye[He].push(Se),Se.map=[pt.line,ae.line];const H=Z.tShift[pt.line],W=Z.eMarks[ae.line],me=Z.bMarks[pt.line],_e=Z.lineMax;Z.tShift[pt.line]=0,Z.bMarks[pt.line]=pt.pos,Z.eMarks[ae.line]=ae.pos,Z.lineMax=ae.line+1,Z.md.block.tokenize(Z,pt.line,ae.line+1);const De=Z.tokens[Z.tokens.length-2],ye=De.content.trim()||De.markup.trim();Ve[He].push(ye),Se=Z.push("yfm_td_close","td",-1),Z.tokens[Z.tokens.length-1].map=[ae.line,ae.line+1],Z.lineMax=_e,Z.tShift[pt.line]=H,Z.bMarks[pt.line]=me,Z.eMarks[ae.line]=W;const we=Ye[Ye.length-1];de(De,we[we.length-1])}if(Ct<Ge){const ht=Ge-Ct;for(let pt=0;pt<ht;pt++)Se=Z.push("yfm_td_open","td",1),Se=Z.push("yfm_td_close","td",-1)}Se=Z.push("yfm_tr_close","tr",-1)}return ue(Ve,Ye),G(Be,Z.tokens),Se=Z.push("yfm_tbody_close","tbody",-1),Se=Z.push("yfm_table_close","table",-1),Z.tokens[Z.tokens.length-1].map=[xe,xe+1],Z.lineMax=Ue,Z.line=xe,!0})},table$2}var tableExports=requireTable();const yfmTable=getDefaultExportFromCjs$1(tableExports),parserTokens$1={[YfmTableNode.Table]:{name:YfmTableNode.Table,type:"block"},[YfmTableNode.Body]:{name:YfmTableNode.Body,type:"block"},[YfmTableNode.Row]:{name:YfmTableNode.Row,type:"block"},[YfmTableNode.Cell]:{name:YfmTableNode.Cell,type:"block",getAttrs:o=>{var a,l;const e=Object.fromEntries(o.attrs||[]),s=(l=(a=o.attrGet("class"))==null?void 0:a.match(/cell-align-[a-z-]*/))==null?void 0:l[0];return s&&(e[YfmTableAttr.CellAlign]=s),e}}},DEFAULT_CELL_PLACEHOLDER="Table cell",getSchemaSpecs$1=(o,e)=>({[YfmTableNode.Table]:{group:"block yfm-table",content:`${YfmTableNode.Body}`,isolating:!0,definingAsContext:!0,parseDOM:[{tag:"table",priority:200}],toDOM(){return["table",0]},selectable:!0,allowSelection:!0,tableRole:TableRole.Table,complex:"root"},[YfmTableNode.Body]:{group:"block yfm-table",content:`${YfmTableNode.Row}+`,isolating:!0,definingAsContext:!0,parseDOM:[{tag:"tbody",priority:200},{tag:"thead",priority:200}],toDOM(){return["tbody",0]},tableRole:TableRole.Body,selectable:!1,allowSelection:!1,complex:"inner"},[YfmTableNode.Row]:{group:"block yfm-table",content:`${YfmTableNode.Cell}+`,isolating:!0,definingAsContext:!0,parseDOM:[{tag:"tr",priority:200}],toDOM(){return["tr",0]},tableRole:TableRole.Row,selectable:!1,allowSelection:!1,complex:"inner"},[YfmTableNode.Cell]:{group:"block yfm-table",content:"block+",isolating:!0,definingAsContext:!0,attrs:{[YfmTableAttr.Colspan]:{default:null},[YfmTableAttr.Rowspan]:{default:null},[YfmTableAttr.CellAlign]:{default:null}},parseDOM:[{tag:"td",priority:200},{tag:"th",priority:200}],toDOM(s){return["td",s.attrs,0]},placeholder:{content:(e==null?void 0:e[YfmTableNode.Cell])??(o==null?void 0:o.yfmTableCellPlaceholder)??DEFAULT_CELL_PLACEHOLDER,alwaysVisible:!0},tableRole:TableRole.Cell,selectable:!1,allowSelection:!1,complex:"leaf"}}),serializerTokens$1={[YfmTableNode.Table]:(o,e)=>{o.ensureNewLine(),o.write("#|"),o.ensureNewLine(),o.renderContent(e),o.write("|#"),o.ensureNewLine(),o.closeBlock(),o.write(`
`)},[YfmTableNode.Body]:(o,e)=>{const s={};e.forEach(a=>{o.write("||"),o.ensureNewLine(),o.write(`
`);let l=0;a.forEach(u=>{for(;l in s&&s[l]>0;)o.write(l===0?"^":"|^"),s[l]--,l++;let c=-1;if(isNumber(u.attrs[YfmTableAttr.Rowspan])&&(c=Math.max(0,Number.parseInt(u.attrs[YfmTableAttr.Rowspan],10)),s[l]=c-1),l>0&&(o.write("|"),o.ensureNewLine(),o.write(`
`)),o.renderContent(u),u.attrs[YfmTableAttr.CellAlign]&&(o.write(`{.${u.attrs[YfmTableAttr.CellAlign]}}`),o.ensureNewLine()),l++,isNumber(u.attrs[YfmTableAttr.Colspan])){let h=Math.max(0,Number.parseInt(u.attrs[YfmTableAttr.Colspan],10));for(;--h>0;)o.write("|>"),c>0&&(s[l]=c-1),l++}if(a.lastChild===u)for(;l in s&&s[l]>0;)o.write("|^"),s[l]--,l++}),o.ensureNewLine(),o.write("||"),o.ensureNewLine()})},[YfmTableNode.Row]:(o,e)=>{console.warn(`Should not serialize ${e.type.name} node via serialize-token`),o.write("||"),o.ensureNewLine(),o.write(`
`),o.renderContent(e),o.write("||"),o.ensureNewLine()},[YfmTableNode.Cell]:(o,e,s)=>{console.warn(`Should not serialize ${e.type.name} node via serialize-token`),o.renderContent(e),s.lastChild===e||(o.write("|"),o.ensureNewLine(),o.write(`
`))}},YfmTableSpecs=(o,e)=>{const s=getSchemaSpecs$1(e,o.context.get("placeholder")),{table_ignoreSplittersInBlockCode:a,table_ignoreSplittersInBlockMath:l,table_ignoreSplittersInInlineCode:u,table_ignoreSplittersInInlineMath:c}=e;o.configureMd(d=>d.use(yfmTable,{log:logExports.log,table_ignoreSplittersInBlockCode:a,table_ignoreSplittersInBlockMath:l,table_ignoreSplittersInInlineCode:u,table_ignoreSplittersInInlineMath:c})).addNode(YfmTableNode.Table,()=>({spec:s[YfmTableNode.Table],toMd:serializerTokens$1[YfmTableNode.Table],fromMd:{tokenSpec:parserTokens$1[YfmTableNode.Table]}})).addNode(YfmTableNode.Body,()=>({spec:s[YfmTableNode.Body],toMd:serializerTokens$1[YfmTableNode.Body],fromMd:{tokenSpec:parserTokens$1[YfmTableNode.Body]}})).addNode(YfmTableNode.Row,()=>({spec:s[YfmTableNode.Row],toMd:serializerTokens$1[YfmTableNode.Row],fromMd:{tokenSpec:parserTokens$1[YfmTableNode.Row]}})).addNode(YfmTableNode.Cell,()=>({spec:s[YfmTableNode.Cell],toMd:serializerTokens$1[YfmTableNode.Cell],fromMd:{tokenSpec:parserTokens$1[YfmTableNode.Cell]}}))};var plugin,hasRequiredPlugin;function requirePlugin(){if(hasRequiredPlugin)return plugin;hasRequiredPlugin=1;var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(o,e)=>function(){return e||(0,o[__getOwnPropNames(o)[0]])((e={exports:{}}).exports,e),e.exports},__export=(o,e)=>{for(var s in e)__defProp(o,s,{get:e[s],enumerable:!0})},__copyProps=(o,e,s,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of __getOwnPropNames(e))!__hasOwnProp.call(o,l)&&l!==s&&__defProp(o,l,{get:()=>e[l],enumerable:!(a=__getOwnPropDesc(e,l))||a.enumerable});return o},__toESM=(o,e,s)=>(s=o!=null?__create(__getProtoOf(o)):{},__copyProps(!o||!o.__esModule?__defProp(s,"default",{value:o,enumerable:!0}):s,o)),__toCommonJS=o=>__copyProps(__defProp({},"__esModule",{value:!0}),o),require_regex=__commonJS({"node_modules/github-slugger/regex.js"(o,e){e.exports=/[\0-\x1F!-,\.\/:-@\[-\^`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08C8-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1AC1-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u24B5\u24EA-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\u9FFD-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7CB-\uA7F4\uA828-\uA82B\uA82D-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDDFC\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEE1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE40-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE7-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD28-\uDD2F\uDD3A-\uDE7F\uDEAA\uDEAD-\uDEAF\uDEB2-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF51-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC47-\uDC65\uDC70-\uDC7E\uDCBB-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD40-\uDD43\uDD48-\uDD4F\uDD74\uDD75\uDD77-\uDD7F\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDFF\uDE12\uDE38-\uDE3D\uDE3F-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC4B-\uDC4F\uDC5A-\uDC5D\uDC62-\uDC7F\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDC1-\uDDD7\uDDDE-\uDDFF\uDE41-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEB9-\uDEBF\uDECA-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF3A-\uDFFF]|\uD806[\uDC3B-\uDC9F\uDCEA-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD44-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE2\uDDE5-\uDDFF\uDE3F-\uDE46\uDE48-\uDE4F\uDE9A-\uDE9C\uDE9E-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC37\uDC41-\uDC4F\uDC5A-\uDC71\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF7-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD824-\uD82B\uD82D\uD82E\uD830-\uD833\uD837\uD839\uD83D\uD83F\uD87B-\uD87D\uD87F\uD885-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE\uDEEF\uDEF5-\uDEFF\uDF37-\uDF3F\uDF44-\uDF4F\uDF5A-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE2\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82C[\uDD1F-\uDD4F\uDD53-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDC9C\uDC9F-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDEBF\uDEFA-\uDFFF]|\uD83A[\uDCC5-\uDCCF\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDD2F\uDD4A-\uDD4F\uDD6A-\uDD6F\uDD8A-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEDE-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]/g}}),require_github_slugger=__commonJS({"node_modules/github-slugger/index.js"(o,e){var s=require_regex();e.exports=l;var a=Object.hasOwnProperty;function l(){const c=this;if(!(c instanceof l))return new l;c.reset()}l.prototype.slug=function(c,d){const h=this;let p=u(c,d===!0);const m=p;for(;a.call(h.occurrences,p);)h.occurrences[m]++,p=m+"-"+h.occurrences[m];return h.occurrences[p]=0,p},l.prototype.reset=function(){this.occurrences=Object.create(null)};function u(c,d){return typeof c!="string"?"":(d||(c=c.toLowerCase()),c.replace(s,"").replace(/ /g,"-"))}l.slug=u}}),plugin_exports={};__export(plugin_exports,{transform:()=>transform}),plugin=__toCommonJS(plugin_exports);var TAB_RE=/`?{% list tabs .*?%}`?/,TABS_CLASSNAME="yfm-tabs",TAB_CLASSNAME="yfm-tab",TAB_PANEL_CLASSNAME="yfm-tab-panel",TABS_LIST_CLASSNAME="yfm-tab-list",ACTIVE_CLASSNAME="active",TAB_GROUP_CLASSNAME="yfm-tab-group",TAB_ACTIVE_KEY="data-diplodoc-is-active",GROUP_DATA_KEY="data-diplodoc-group",TAB_DATA_KEY="data-diplodoc-key",TAB_DATA_VARIANT="data-diplodoc-variant",TAB_DATA_ID="data-diplodoc-id",DEFAULT_TABS_GROUP_PREFIX="defaultTabsGroup-",ACTIVE_TAB_TEXT="{selected}",TAB_FORCED_OPEN="data-diplodoc-forced",TABS_DROPDOWN_CLASSNAME="yfm-tabs-dropdown",TABS_DROPDOWN_MENU_CLASSNAME="yfm-tabs-dropdown-menu",TABS_DROPDOWN_SELECT="yfm-tabs-dropdown-select",TABS_ACCORDION_CLASSNAME="yfm-tabs-accordion",TABS_RADIO_CLASSNAME="yfm-tabs-vertical",VERTICAL_TAB_CLASSNAME="yfm-vertical-tab",TAB_DATA_VERTICAL_TAB="data-diplodoc-vertical-tab";function generateID(){const o=Math.random().toString(36).substr(2,8);return o.substring(o.length-8)}function trim(o){return o.trim()}function unquote(o){return o.match(/^(["']).*\1$/)?o.slice(1,-1):o}var import_github_slugger=__toESM(require_github_slugger()),CUSTOM_ID_REGEXP=/\[?{ ?#(\S+) ?}]?/,sluggersStorage=new Map;function parseName(o){const e=o.match(CUSTOM_ID_REGEXP);let s=null,a=o;return e?(a=o.replace(e[0],""),s=e[1]):(a=o,s=null),a.includes(ACTIVE_TAB_TEXT)&&(a=a.replace(ACTIVE_TAB_TEXT,"")),{name:a.trim(),customAnchor:s}}function getTabId(o,{runId:e}){let s=sluggersStorage.get(e);return s||(s=new import_github_slugger.default,sluggersStorage.set(e,s)),s.slug(getRawId(o))}function isTabSelected(o){const{name:e}=o;return e.includes(ACTIVE_TAB_TEXT)}function getTabKey(o){return encodeURIComponent(getRawId(o)).toLocaleLowerCase()}function getName(o){return parseName(o.name).name}function getRawId(o){const{customAnchor:e,name:s}=parseName(o.name);return e||s}function getContentMap(o){let e=null,s=null;return o.forEach(({map:a})=>{a&&(e=e??a,s=a)}),e&&s?[e[0],s[1]]:null}var PATH_TO_RUNTIME="../runtime";function copyRuntimeFiles({runtimeJsPath:o,runtimeCssPath:e,output:s},a){const{join:l,resolve:u}=dynrequire("node:path"),c={"index.js":o,"index.css":e};for(const[d,h]of Object.entries(c)){const p=l(PATH_TO_RUNTIME,d);a.has(p)||(a.add(p),copyFile(u(__dirname,p),l(s,h)))}}function copyFile(o,e){const{mkdirSync:s,copyFileSync:a}=dynrequire("node:fs"),{dirname:l}=dynrequire("node:path");s(l(e),{recursive:!0}),a(o,e)}function dynrequire(module){return eval(`require('${module}')`)}function addHiddenProperty(o,e,s){return e in o||Object.defineProperty(o,e,{enumerable:!1,value:s}),o}var regular=(o,e,{containerClasses:s,tabsGroup:a,runId:l,variant:u})=>{var c,d;const h=[],p=[],m=[],g=new e.Token("tabs_open","div",1),y=new e.Token("tabs_close","div",-1),A=new e.Token("tab-list_open","div",1),T=new e.Token("tab-list_close","div",-1);if(o.length){const[_]=(c=o[0].listItem.map)!=null?c:[null];if(_==null)throw new Error("failed to parse line mapping");const[w,R]=(d=o[o.length-1].listItem.map)!=null?d:[null,null];if(R==null)throw new Error("failed to parse line mapping");A.map=[_,R]}g.block=!0,y.block=!0,A.block=!0,T.block=!0;const E=o.filter(isTabSelected).length;if(E>1)throw new Error("Unable to render tabs with more than 1 active element");const v=E!==0;g.attrSet("class",[TABS_CLASSNAME,s].filter(Boolean).join(" ")),g.attrSet(GROUP_DATA_KEY,a),g.attrSet(TAB_DATA_VARIANT,"regular"),A.attrSet("class",TABS_LIST_CLASSNAME),A.attrSet("role","tablist"),u==="radio"&&h.push(g);for(let _=0;_<o.length;_++){const w=new e.Token("tab_open","div",1),R=new e.Token("inline","",0),k=new e.Token("text","",0),I=new e.Token("tab_close","div",-1),P=new e.Token("tab-panel_open","div",1),N=new e.Token("tab-panel_close","div",-1),L=new e.Token("tab-input","input",0),Q=new e.Token("tab-label_open","label",1),j=new e.Token("tab-label_close","label",-1);w.map=o[_].listItem.map,w.markup=o[_].listItem.markup;const F=o[_],V=getTabId(F,{runId:l}),J=getTabKey(F),z=isTabSelected(F),Y=v?z:_===0;F.name=getName(F);const fe=generateID();L.block=!0,L.attrJoin("class","radio"),L.attrSet("type","radio"),w.map=o[_].listItem.map,w.markup=o[_].listItem.markup,P.map=getContentMap(o[_].tokens),k.content=o[_].name,R.children=[k],w.block=!0,I.block=!0,P.block=!0,N.block=!0,w.attrSet(TAB_DATA_ID,V),w.attrSet(TAB_DATA_KEY,J),w.attrSet("class",TAB_CLASSNAME),w.attrJoin("class","yfm-tab-group"),w.attrSet("role","tab"),w.attrSet("aria-controls",fe),w.attrSet("aria-selected","false"),w.attrSet("tabindex",_===0?"0":"-1"),w.attrSet(TAB_ACTIVE_KEY,"false"),P.attrSet("id",fe),P.attrSet("class",TAB_PANEL_CLASSNAME),P.attrSet("role","tabpanel"),P.attrSet("aria-labelledby",V),P.attrSet("data-title",F.name),u==="radio"&&(w.attrSet(TAB_DATA_VERTICAL_TAB,"true"),w.attrJoin("class",VERTICAL_TAB_CLASSNAME)),Y&&(u==="radio"?(w.attrSet(TAB_FORCED_OPEN,"true"),L.attrSet("checked","true"),P.attrJoin("class",ACTIVE_CLASSNAME)):(w.attrSet(TAB_ACTIVE_KEY,_===0?"true":"false"),w.attrJoin("class",ACTIVE_CLASSNAME),w.attrSet("aria-selected","true"),P.attrJoin("class",ACTIVE_CLASSNAME))),u==="radio"?(h.push(w,L,Q,R,j,I),h.push(P,...o[_].tokens,N)):(p.push(w,R,I),m.push(P,...o[_].tokens,N))}return h.push(g),h.push(A),h.push(...p),h.push(T),h.push(...m),h.push(y),h},radio=(o,e,{containerClasses:s,tabsGroup:a,runId:l})=>{var u,c;const d=[],h=new e.Token("tabs_open","div",1),p=new e.Token("tabs_close","div",-1);if(o.length){const[g]=(u=o[0].listItem.map)!=null?u:[null];if(g==null)throw new Error("failed to parse line mapping");const[y,A]=(c=o[o.length-1].listItem.map)!=null?c:[null,null];if(A==null)throw new Error("failed to parse line mapping")}if(h.block=!0,p.block=!0,o.filter(isTabSelected).length>1)throw new Error("Unable to render tabs with more than 1 active element");h.attrSet("class",[TABS_CLASSNAME,s,TABS_RADIO_CLASSNAME].filter(Boolean).join(" ")),h.attrSet(GROUP_DATA_KEY,a),h.attrSet(TAB_DATA_VARIANT,"radio"),d.push(h);for(let g=0;g<o.length;g++){const y=new e.Token("tab_open","div",1),A=new e.Token("inline","",0),T=new e.Token("text","",0),E=new e.Token("tab_close","div",-1),v=new e.Token("tab-panel_open","div",1),_=new e.Token("tab-panel_close","div",-1),w=new e.Token("tab-input","input",0),R=new e.Token("tab-label_open","label",1),k=new e.Token("tab-label_close","label",-1);y.map=o[g].listItem.map,y.markup=o[g].listItem.markup;const I=o[g],P=getTabId(I,{runId:l}),N=getTabKey(I),L=isTabSelected(I);I.name=getName(I);const Q=generateID();w.block=!0,w.attrJoin("class","radio"),w.attrSet("type","radio"),y.map=o[g].listItem.map,y.markup=o[g].listItem.markup,v.map=getContentMap(o[g].tokens),T.content=o[g].name,A.children=[T],y.block=!0,E.block=!0,v.block=!0,_.block=!0,y.attrSet(TAB_DATA_ID,P),y.attrSet(TAB_DATA_KEY,N),y.attrSet("class",[TAB_CLASSNAME,TAB_GROUP_CLASSNAME,VERTICAL_TAB_CLASSNAME].join(" ")),y.attrSet("role","tab"),y.attrSet("aria-controls",Q),y.attrSet("aria-selected","false"),y.attrSet("tabindex",g===0?"0":"-1"),y.attrSet(TAB_ACTIVE_KEY,"false"),v.attrSet("id",Q),v.attrSet("class",TAB_PANEL_CLASSNAME),v.attrSet("role","tabpanel"),v.attrSet("aria-labelledby",P),v.attrSet("data-title",I.name),y.attrSet(TAB_DATA_VERTICAL_TAB,"true"),L&&(y.attrSet(TAB_FORCED_OPEN,"true"),w.attrSet("checked","true"),v.attrJoin("class",ACTIVE_CLASSNAME)),d.push(y,w,R,A,k,E),d.push(v,...o[g].tokens,_)}return d.push(p),d},dropdown=(o,e,{containerClasses:s,tabsGroup:a,runId:l})=>{var u,c;const d=[],h=new e.Token("dropdown_open","div",1),p=new e.Token("dropdown_close","div",-1),m=new e.Token("dropdown-select_open","div",1),g=new e.Token("inline","",0),y=new e.Token("text","",0),A=new e.Token("dropdown-select_open","div",-1);if(o.length){const[R]=(u=o[0].listItem.map)!=null?u:[null];if(R==null)throw new Error("failed to parse line mapping");const[k,I]=(c=o[o.length-1].listItem.map)!=null?c:[null,null];if(I==null)throw new Error("failed to parse line mapping")}h.block=!0,p.block=!0,m.block=!0,A.block=!0;const[T,...E]=o.filter(isTabSelected);if(E.length)throw new Error("Unable to dropdown tabs with more than 1 active element");h.attrSet("class",[TABS_CLASSNAME,s,TABS_DROPDOWN_CLASSNAME].filter(Boolean).join(" ")),h.attrSet(GROUP_DATA_KEY,a),h.attrSet(TAB_DATA_VARIANT,"dropdown"),m.attrSet("role","tablist"),m.attrSet("class",TABS_DROPDOWN_SELECT),T&&m.attrJoin("class","filled"),y.content=T?T.name:"-",g.children=[y],d.push(h,m,g,A);const v=new e.Token("dropdown-menu_open","ul",1),_=new e.Token("dropdown-menu_close","ul",-1);v.attrSet("class",TABS_DROPDOWN_MENU_CLASSNAME);const w=o.flatMap(R=>{const k=new e.Token("dropdown-menu-item_open","li",1),I=new e.Token("dropdown-menu-item_close","li",-1),P=new e.Token("text","",0),N=new e.Token("inline","",0),L=getTabId(R,{runId:l}),Q=getTabKey(R),j=R===T;return k.attrSet("class",[TAB_CLASSNAME,j&&ACTIVE_CLASSNAME].filter(Boolean).join(" ")),k.attrSet(TAB_DATA_ID,L),k.attrSet(TAB_DATA_KEY,Q),k.attrSet("aria-selected",String(j)),P.content=R.name,N.children=[P],[k,N,I]});d.push(v,...w,_);for(let R=0;R<o.length;R++){const k=new e.Token("tab-panel_open","div",1),I=new e.Token("tab-panel_close","div",-1),P=o[R],N=getTabId(P,{runId:l}),L=isTabSelected(P);P.name=getName(P);const Q=generateID();k.map=getContentMap(o[R].tokens),k.block=!0,I.block=!0,k.attrSet("id",Q),k.attrSet("class",TAB_PANEL_CLASSNAME),k.attrSet("role","tabpanel"),k.attrSet("aria-labelledby",N),k.attrSet("data-title",P.name),L&&k.attrJoin("class",ACTIVE_CLASSNAME),d.push(k,...o[R].tokens,I)}return d.push(p),d},accordion=(o,e,{containerClasses:s,tabsGroup:a,runId:l})=>{var u,c;const d=[],h=new e.Token("tabs_open","div",1),p=new e.Token("tabs_close","div",-1);if(o.length){const[g]=(u=o[0].listItem.map)!=null?u:[null];if(g==null)throw new Error("failed to parse line mapping");const[y,A]=(c=o[o.length-1].listItem.map)!=null?c:[null,null];if(A==null)throw new Error("failed to parse line mapping")}if(h.block=!0,p.block=!0,o.filter(isTabSelected).length>1)throw new Error("Unable to render tabs with more than 1 active element");h.attrSet("class",[TABS_CLASSNAME,s,TABS_ACCORDION_CLASSNAME].filter(Boolean).join(" ")),h.attrSet(GROUP_DATA_KEY,a),h.attrSet(TAB_DATA_VARIANT,"accordion"),d.push(h);for(let g=0;g<o.length;g++){const y=new e.Token("tab_open","div",1),A=new e.Token("inline","",0),T=new e.Token("text","",0),E=new e.Token("tab_close","div",-1),v=new e.Token("tab-panel_open","div",1),_=new e.Token("tab-panel_close","div",-1);y.map=o[g].listItem.map,y.markup=o[g].listItem.markup;const w=o[g],R=getTabId(w,{runId:l}),k=getTabKey(w),I=isTabSelected(w);w.name=getName(w);const P=generateID();y.map=o[g].listItem.map,y.markup=o[g].listItem.markup,v.map=getContentMap(o[g].tokens),T.content=o[g].name,A.children=[T],y.block=!0,E.block=!0,v.block=!0,_.block=!0,y.attrSet(TAB_DATA_ID,R),y.attrSet(TAB_DATA_KEY,k),y.attrSet("class",[TAB_CLASSNAME,TAB_GROUP_CLASSNAME].join(" ")),y.attrSet("role","tab"),y.attrSet("aria-controls",P),y.attrSet("aria-selected","false"),y.attrSet("tabindex",g===0?"0":"-1"),y.attrSet(TAB_ACTIVE_KEY,"false"),v.attrSet("id",P),v.attrSet("class",TAB_PANEL_CLASSNAME),v.attrSet("role","tabpanel"),v.attrSet("aria-labelledby",R),v.attrSet("data-title",w.name),I&&(v.attrSet(TAB_FORCED_OPEN,"true"),v.attrJoin("class",ACTIVE_CLASSNAME),y.attrJoin("class",ACTIVE_CLASSNAME)),d.push(y,A,E),d.push(v,...o[g].tokens,_)}return d.push(p),d},generateByType={regular,radio,dropdown,accordion},generateTokensByType=o=>generateByType[o];function generateTabsTokens(o,e,s){return generateTokensByType(s.variant)(o,e,s)}var import_token=__toESM(requireToken());function findCloseTokenIndex(o,e){let s=0,a=e;for(;a<o.length;){if(matchOpenToken(o,a))s++;else if(matchCloseToken(o,a)){if(s===0)return a;s--}a++}return null}function matchCloseToken(o,e){return o[e].type==="paragraph_open"&&o[e+1].type==="inline"&&o[e+1].content.trim()==="{% endlist %}"}function matchOpenToken(o,e){return o[e].type==="paragraph_open"&&o[e+1].type==="inline"&&o[e+1].content.match(TAB_RE)}function props(o){const e=trim(o.replace("list tabs","")),s=e.split(" "),a={content:e,variant:"regular",group:`${DEFAULT_TABS_GROUP_PREFIX}${generateID()}`};for(const l of s){const[u,c]=l.split("=").map(trim);switch(u){case"horizontal":case"radio":case"dropdown":case"accordion":a.variant=u;break;case"group":a.group=unquote(c);break}}return a}function tryToFindTabs(o,e){var s;const a=matchOpenToken(o,e),l=a&&a[0],u=l&&!(l.startsWith("`")&&l.endsWith("`"));if(!a||!u)return{step:1};const c=findCloseTokenIndex(o,e+3);if(!c)return o[e].attrSet("YFM005","true"),{step:3};let d=0;const h=c+3,p=o[e].level,m=o[c].level;if(m<p)return o[e].attrSet("YFM005","true"),{step:3};if(m>p){const g=o[h];if(g&&g.nesting>=0)return o[e].attrSet("YFM005","true"),{step:3};(g==null?void 0:g.type)==="list_item_close"&&((s=o[h+1])==null?void 0:s.type)==="bullet_list_close"&&(d=2)}return{content:l,closeTokenIndex:c,extraTokensAfterClose:d}}function findTabs(o,e,s){const a=[];let l=e,u=-1,c={name:"",tokens:[],listItem:new import_token.default("list_item_open","",0)};for(;l<o.length;){const d=o[l];switch(d.type){case"ordered_list_open":case"bullet_list_open":u>-1&&c.tokens.push(d),u++;break;case"list_item_open":u?c.tokens.push(d):c={name:"",tokens:[],listItem:d};break;case"list_item_close":u?c.tokens.push(d):a.push(c);break;case"ordered_list_close":case"bullet_list_close":if(!u)return a;u--,c.tokens.push(d);break;case"paragraph_open":if(l===s&&o[l+1].content&&o[l+1].content.trim()==="{% endlist %}")return c&&!u&&a.push(c),a;!c.name&&o[l+1].type==="inline"?(c.name=o[l+1].content,l+=2):c.tokens.push(d);break;default:c.tokens.push(d)}l++}return a}var defaultFeatures={enabledVariants:{regular:!0,radio:!0}},runsCounter=0;function transform({runtimeJsPath:o="_assets/tabs-extension.js",runtimeCssPath:e="_assets/tabs-extension.css",containerClasses:s="",bundle:a=!0,features:l=defaultFeatures}={}){return function(c,d){const{output:h="."}=d||{},p=m=>{const{env:g,tokens:y}=m,A=String(++runsCounter);addHiddenProperty(g,"bundled",new Set);let T=0,E=!1;for(;T<y.length;){const v=tryToFindTabs(y,T);if("step"in v){T+=v.step;continue}const{content:_,closeTokenIndex:w,extraTokensAfterClose:R}=v,k=props(_);l.enabledVariants[k.variant]||(k.variant="regular");const I=findTabs(m.tokens,T+3,w);if(I.length>0){const P=generateTabsTokens(I,m,{containerClasses:s,tabsGroup:k.group,variant:k.variant,runId:A});m.tokens.splice(T,w-T+3+R,...P),T++,E=!0}else m.tokens.splice(T,w-T+3+R)}E&&(g.meta=g.meta||{},g.meta.script=g.meta.script||[],g.meta.style=g.meta.style||[],g.meta.script.push(o),g.meta.style.push(e),a&&copyRuntimeFiles({runtimeJsPath:o,runtimeCssPath:e,output:h},g.bundled))};try{c.core.ruler.before("curly_attributes","tabs",p)}catch{c.core.ruler.push("tabs",p)}}}return plugin}var pluginExports=requirePlugin(),TabsNode;(function(o){o.TabPanel="yfm_tab_panel",o.Tab="yfm_tab",o.TabsList="yfm_tabs_list",o.Tabs="yfm_tabs",o.RadioTabs="yfm_radio_tabs",o.RadioTab="yfm_radio_tab",o.RadioTabInput="yfm_radio_tab_input",o.RadioTabLabel="yfm_radio_tab_label"})(TabsNode||(TabsNode={}));var TabsAttrs;(function(o){o.class="class",o.dataDiplodocGroup="data-diplodoc-group",o.dataDiplodocVariant="data-diplodoc-variant"})(TabsAttrs||(TabsAttrs={}));var TabsListAttrs;(function(o){o.class="class",o.role="role"})(TabsListAttrs||(TabsListAttrs={}));var TabAttrs;(function(o){o.id="id",o.class="class",o.role="role",o.ariaControls="aria-controls",o.ariaSelected="aria-selected",o.tabindex="tabindex",o.dataDiplodocKey="data-diplodoc-key",o.dataDiplodocid="data-diplodoc-id",o.dataDiplodocIsActive="data-diplodoc-is-active",o.dataDiplodocVerticalTab="data-diplodoc-vertical-tab"})(TabAttrs||(TabAttrs={}));var TabPanelAttrs;(function(o){o.id="id",o.class="class",o.role="role",o.dataTitle="data-title",o.ariaLabelledby="aria-labelledby"})(TabPanelAttrs||(TabPanelAttrs={}));const prefix="r-",tabsPostPlugin=o=>{o.core.ruler.push("me_tabs_after",e=>{var a;const s=[];for(const l of e.tokens)switch(l.type){case"tabs_open":{const u=(a=l.attrGet("class"))==null?void 0:a.includes("yfm-tabs-vertical");s.push({vertical:u}),u&&(l.type=prefix+l.type);break}case"tabs_close":{const u=s.pop();u!=null&&u.vertical&&(l.type=prefix+l.type);break}case"tab_open":{const u=s.at(-1);u!=null&&u.vertical&&(l.type=prefix+l.type);break}case"tab_close":{const u=s.at(-1);u!=null&&u.vertical&&(l.type=prefix+l.type);break}case"tab-input":case"tab-label_open":case"tab-label_close":{const u=s.at(-1);u!=null&&u.vertical&&(l.type=prefix+l.type);break}}})},attrsFromEntries=o=>o.attrs?Object.fromEntries(o.attrs):{},parserTokens={[TabsNode.TabPanel]:{name:TabsNode.TabPanel,type:"block",getAttrs:attrsFromEntries},[TabsNode.Tab]:{name:TabsNode.Tab,type:"block",getAttrs:attrsFromEntries},[TabsNode.Tabs]:{name:TabsNode.Tabs,type:"block",getAttrs:attrsFromEntries},[TabsNode.TabsList]:{name:TabsNode.TabsList,type:"block",getAttrs:attrsFromEntries},[TabsNode.RadioTabs]:{name:TabsNode.RadioTabs,type:"block",getAttrs:attrsFromEntries},[TabsNode.RadioTab]:{name:TabsNode.RadioTab,type:"block",getAttrs:attrsFromEntries},[TabsNode.RadioTabInput]:{name:TabsNode.RadioTabInput,type:"node",getAttrs:attrsFromEntries},[TabsNode.RadioTabLabel]:{name:TabsNode.RadioTabLabel,type:"block",getAttrs:attrsFromEntries}},DEFAULT_PLACEHOLDERS={TabTitle:"Tab title",RadioTabLabelTitle:"Radio title"},getSchemaSpecs=(o,e)=>({[TabsNode.Tab]:{attrs:{[TabAttrs.id]:{default:"unknown"},[TabAttrs.class]:{default:"yfm-tab"},[TabAttrs.role]:{default:"unknown"},[TabAttrs.ariaControls]:{default:"unknown"},[TabAttrs.ariaSelected]:{default:"unknown"},[TabAttrs.tabindex]:{default:"unknown"},[TabAttrs.dataDiplodocKey]:{default:"unknown"},[TabAttrs.dataDiplodocid]:{default:"unknown"},[TabAttrs.dataDiplodocIsActive]:{default:"unknown"}},marks:"",content:"text*",group:"block",parseDOM:[{tag:"div.yfm-tab"}],toDOM(s){return["div",{draggable:"false",...s.attrs},0]},placeholder:{content:(o==null?void 0:o.tabPlaceholder)??DEFAULT_PLACEHOLDERS.TabTitle,alwaysVisible:!0},selectionContext:!1,selectable:!1,allowSelection:!1,complex:"leaf"},[TabsNode.TabPanel]:{attrs:{[TabPanelAttrs.id]:{default:"unknown"},[TabPanelAttrs.class]:{default:"yfm-tab-panel"},[TabPanelAttrs.role]:{default:"unknown"},[TabPanelAttrs.dataTitle]:{default:"unknown"},[TabPanelAttrs.ariaLabelledby]:{default:"unknown"}},content:"(block | paragraph)+",group:"block",parseDOM:[{tag:"div.yfm-tab-panel"}],toDOM(s){return["div",s.attrs,0]},selectable:!1,allowSelection:!1,complex:"leaf",isolating:!0},[TabsNode.Tabs]:{attrs:{[TabsAttrs.class]:{default:"yfm-tabs"},[TabsAttrs.dataDiplodocGroup]:{default:"unknown"},[TabsAttrs.dataDiplodocVariant]:{default:"regular"}},content:`${TabsNode.TabsList} ${TabsNode.TabPanel}+`,group:"block",parseDOM:[{tag:"div.yfm-tabs"}],toDOM(s){return["div",s.attrs,0]},selectable:!0,complex:"root"},[TabsNode.TabsList]:{attrs:{[TabsListAttrs.class]:{default:"yfm-tab-list"},[TabsListAttrs.role]:{default:"unknown"}},content:`${TabsNode.Tab}*`,group:"block",parseDOM:[{tag:"div.yfm-tab-list"}],toDOM(s){return["div",s.attrs,0]},selectable:!1,allowSelection:!1,complex:"inner"},[TabsNode.RadioTabs]:{attrs:{[TabsAttrs.class]:{default:"yfm-tabs yfm-tabs-vertical"},[TabsAttrs.dataDiplodocGroup]:{default:"unknown"},[TabsAttrs.dataDiplodocVariant]:{default:"radio"}},content:`(${TabsNode.RadioTab} ${TabsNode.TabPanel})+`,group:"block",toDOM(s){return["div",s.attrs,0]},complex:"root"},[TabsNode.RadioTab]:{attrs:{[TabAttrs.id]:{default:null},[TabAttrs.class]:{default:"yfm-tab yfm-vertical-tab"},[TabAttrs.role]:{default:"unknown"},[TabAttrs.ariaControls]:{default:"unknown"},[TabAttrs.ariaSelected]:{default:"unknown"},[TabAttrs.tabindex]:{default:"unknown"},[TabAttrs.dataDiplodocKey]:{default:"unknown"},[TabAttrs.dataDiplodocid]:{default:"unknown"},[TabAttrs.dataDiplodocIsActive]:{default:"false"},[TabAttrs.dataDiplodocVerticalTab]:{default:"true"}},content:`${TabsNode.RadioTabInput} ${TabsNode.RadioTabLabel}`,group:"block",toDOM(s){return["div",s.attrs,0]},selectable:!1,allowSelection:!1,complex:"inner"},[TabsNode.RadioTabInput]:{attrs:{[TabAttrs.class]:{default:"radio"},type:{default:"radio"},checked:{default:null}},group:"block",toDOM(s){return["input",s.attrs]},selectable:!1,allowSelection:!1,complex:"leaf"},[TabsNode.RadioTabLabel]:{attrs:{},marks:"",content:"text*",group:"block",toDOM(s){return["label",s.attrs,0]},placeholder:{content:DEFAULT_PLACEHOLDERS.RadioTabLabelTitle,alwaysVisible:!0},selectionContext:!1,selectable:!1,allowSelection:!1,complex:"leaf"}}),serializerTokens={[TabsNode.Tab]:(o,e)=>{o.renderInline(e)},[TabsNode.TabPanel]:(o,e)=>{o.renderContent(e)},[TabsNode.Tabs]:(o,e)=>{o.write("{% list tabs %}"),o.write(`
`),o.write(`
`);const s=[];e.content.forEach(l=>{s.push(l)}),s[0].content.forEach((l,u,c)=>{o.write("- "+(l.textContent||getPlaceholderContent(l))),o.write(`
`),o.write(`
`),s[c+1]&&o.renderList(s[c+1],"  ",()=>"  ")}),o.write("{% endlist %}"),o.closeBlock(e)},[TabsNode.TabsList]:(o,e)=>{o.renderList(e,"  ",()=>(e.attrs.bullet||"-")+" ")},[TabsNode.RadioTabs]:(o,e)=>{o.write("{% list tabs radio %}"),o.write(`
`),o.write(`
`);const s=getChildrenOfNode(e);for(let a=0;a<s.length;a++){const l=s[a];if(l.node.type.name!==TabsNode.RadioTab)continue;o.write("- "+(l.node.textContent||getPlaceholderContent(l.node.lastChild))),o.write(`
`),o.write(`
`);const u=s[a+1];u.node.type.name===TabsNode.TabPanel&&o.renderList(u.node,"  ",()=>"  ")}o.write("{% endlist %}"),o.closeBlock(e)},[TabsNode.RadioTab]:(o,e)=>{o.renderInline(e)},[TabsNode.RadioTabInput]:()=>{},[TabsNode.RadioTabLabel]:(o,e)=>{o.renderInline(e)}},tabPanelType=nodeTypeFactory(TabsNode.TabPanel),tabType=nodeTypeFactory(TabsNode.Tab),tabsType=nodeTypeFactory(TabsNode.Tabs),tabsListType=nodeTypeFactory(TabsNode.TabsList),YfmTabsSpecs=(o,e)=>{const s=getSchemaSpecs(e);o.configureMd(a=>a.use(pluginExports.transform({bundle:!1,features:{enabledVariants:{regular:!0,radio:!0,dropdown:!1,accordion:!1}}})).use(tabsPostPlugin)).addNode(TabsNode.Tab,()=>({spec:s[TabsNode.Tab],toMd:serializerTokens[TabsNode.Tab],fromMd:{tokenSpec:parserTokens[TabsNode.Tab],tokenName:"tab"},view:e.tabView})).addNode(TabsNode.TabsList,()=>({spec:s[TabsNode.TabsList],toMd:serializerTokens[TabsNode.TabsList],fromMd:{tokenSpec:parserTokens[TabsNode.TabsList],tokenName:"tab-list"},view:e.tabsListView})).addNode(TabsNode.TabPanel,()=>({spec:s[TabsNode.TabPanel],toMd:serializerTokens[TabsNode.TabPanel],fromMd:{tokenSpec:parserTokens[TabsNode.TabPanel],tokenName:"tab-panel"},view:e.tabPanelView})).addNode(TabsNode.Tabs,()=>({spec:s[TabsNode.Tabs],toMd:serializerTokens[TabsNode.Tabs],fromMd:{tokenSpec:parserTokens[TabsNode.Tabs],tokenName:"tabs"},view:e.tabsView})),o.addNode(TabsNode.RadioTabs,()=>({spec:s[TabsNode.RadioTabs],toMd:serializerTokens[TabsNode.RadioTabs],fromMd:{tokenSpec:parserTokens[TabsNode.RadioTabs],tokenName:"r-tabs"}})).addNode(TabsNode.RadioTab,()=>({spec:s[TabsNode.RadioTab],toMd:serializerTokens[TabsNode.RadioTab],fromMd:{tokenSpec:parserTokens[TabsNode.RadioTab],tokenName:"r-tab"},view:e.vtabView})).addNode(TabsNode.RadioTabInput,()=>({spec:s[TabsNode.RadioTabInput],toMd:serializerTokens[TabsNode.RadioTabInput],fromMd:{tokenSpec:parserTokens[TabsNode.RadioTabInput],tokenName:"r-tab-input"},view:e.vtabInputView})).addNode(TabsNode.RadioTabLabel,()=>({spec:s[TabsNode.RadioTabLabel],toMd:serializerTokens[TabsNode.RadioTabLabel],fromMd:{tokenSpec:parserTokens[TabsNode.RadioTabLabel],tokenName:"r-tab-label"}}))};function isImageNode(o){return o.type.name===imageNodeName}const createImageNode=(o,e,s)=>async({result:a,file:l})=>{const u={[ImgSizeAttr.Src]:a.url,[ImgSizeAttr.Alt]:a.name??l.name};if(e.needDimensions)try{const c=await loadImage$1(l).then(e.enableNewImageSizeCalculation?getImageSizeNew:getImageSize);Object.assign(u,c)}catch(c){globalLogger.error(c),s.error({error:c})}return o.create(u)};async function loadImage$1(o){return new Promise((e,s)=>{const a=document.createElement("img");a.src=URL.createObjectURL(o),a.onload=()=>{URL.revokeObjectURL(a.src),e(a)},a.onerror=(l,u,c,d,h)=>s(h)})}async function loadImageFromUrl(o){return new Promise((e,s)=>{const a=new Image;a.onload=()=>e(a),a.onerror=(l,u,c,d,h)=>s(h),a.src=o})}function getImageSize(o){return{height:String(Math.min(IMG_MAX_HEIGHT$1,o.height))}}function getImageSizeNew({width:o,height:e}){const s=getProportionalSize({width:o,height:e,imgMaxHeight:IMG_MAX_HEIGHT$1});return{width:String(s.width),height:String(s.height)}}function checkSvg(o){return o&&(/\.svg($|\?|#)/i.test(o)||o.startsWith("data:image/svg"))}function findImageNode(o,e){let s=null;return o.descendants((a,l)=>isImageNode(a)&&a.attrs.id===e?(s={node:a,pos:l},!1):!0),s}class FilesBatchUploadProcess{constructor(e,s,a){oe(this,"view");oe(this,"files");oe(this,"uploadHandler");oe(this,"logger");oe(this,"skeletonDescriptor");this.view=e,this.files=s,this.uploadHandler=a,this.logger=getLoggerFromState(e.state)}async run(){await this.insertSkeleton(),await this.batchUpload(),this.removeSkeleton()}async insertSkeleton(){const{view:e}=this,{state:s}=e;this.skeletonDescriptor=await this.createSkeleton();let a=s.tr;s.selection.empty||(a=a.deleteSelection()),a=this.skeletonDescriptor.applyTo(a),e.dispatch(a)}async batchUpload(){const e=[];await batchUploadFiles(this.files,this.uploadHandler,s=>{e.push((async()=>{const a=await this.createPMNode(s),{view:l}=this,{schema:u}=l.state;l.dispatch(l.state.tr.insert(this.skeletonDescriptor.pos,[u.text(" "),a,u.text(" ")]))})().catch(console.error))}),await Promise.allSettled(e)}removeSkeleton(){const{view:e}=this;e.dispatch(this.skeletonDescriptor.rmDeco(e.state.tr))}}const b$u=cn("image-skeleton");class ImageSkeletonDescriptor extends ReactWidgetDescriptor{constructor(s,a){super(s,"image_skeleton");qe(this,xr);$e(this,xr,document.createElement("span")),pe(this,xr).classList.add(b$u()),a&&(pe(this,xr).style.setProperty("--img-skeleton-width",a.width),pe(this,xr).style.setProperty("--img-skeleton-height",a.height))}get pos(){var s;return((s=this.getPos)==null?void 0:s.call(this))??this.initPos}getDomElem(){return pe(this,xr)}renderReactElement(){return jsxRuntimeExports.jsx(Skeleton,{className:b$u("skeleton")})}}xr=new WeakMap;class ImagesUploadProcess extends FilesBatchUploadProcess{constructor(s,a,l,u,c){super(s,a,l);oe(this,"createImage");oe(this,"initPosition");oe(this,"enableNewImageSizeCalculation");this.initPosition=u,this.createImage=createImageNode(imageType(this.view.state.schema),c,this.logger),this.enableNewImageSizeCalculation=c.enableNewImageSizeCalculation}async createSkeleton(){return new ImageSkeletonDescriptor(this.initPosition,await getSkeletonSize(this.files,{enableNewImageSizeCalculation:this.enableNewImageSizeCalculation},this.logger))}async createPMNode(s){return this.createImage(s)}}async function getSkeletonSize(o,e,s){const a={width:"300",height:"200"};if(o.length===1)try{const l=await loadImage$1(o[0]).then(e.enableNewImageSizeCalculation?calcSkeletonSizeNew:calcSkeletonSize);a.width=String(l.width),a.height=String(l.height)}catch(l){globalLogger.error(l),s.error({error:l})}return a}function calcSkeletonSize({width:o,height:e}){if(e<=IMG_MAX_HEIGHT$1)return{width:o,height:e};const s=IMG_MAX_HEIGHT$1/e;return{height:IMG_MAX_HEIGHT$1,width:o*s}}function calcSkeletonSizeNew({width:o,height:e}){return getProportionalSize({width:o,height:e,imgMaxHeight:IMG_MAX_HEIGHT$1})}const{isFilesFromHtml:isFilesFromHtml$1,isFilesOnly:isFilesOnly$1,isImageFile:isImageFile$1}=clipboardUtils,ImagePaste=(o,e)=>{const{parseInsertedUrlAsImage:s,imageUploadHandler:a}=e??{};if(!isFunction(a??s))throw new Error(`ImagePaste extension: ${e.imageUploadHandler?"imageUploadHandler":"parseInsertedUrlAsImage"} is not a function`);const l=new InputState$1;o.addPlugin(()=>new Plugin({props:{handleDOMEvents:{keydown(u,c){l.keydown(c)},keyup(u,c){l.keyup(c)},paste(u,c){var p;const d=getLoggerFromState(u.state).nested({plugin:"image-paste",domEvent:"paste"}),h=getPastedImages(c.clipboardData);if(a&&h)return c.preventDefault(),d.event({event:"paste-images"}),new ImagesUploadProcess(u,h,a,u.state.tr.selection.from,e).run(),!0;if(!l.shiftKey&&s){const{imageUrl:m,title:g}=s(((p=c.clipboardData)==null?void 0:p.getData(DataTransferType.Text))??"")||{};if(!m)return!1;c.preventDefault();const y=checkSvg(m),A=`img-${Math.random().toString(36).slice(2)}`,T=imageType(u.state.schema).create({src:m,alt:g,id:A}),E=u.state.tr.replaceSelectionWith(T);return u.dispatch(E.scrollIntoView()),d.event({event:"paste-url-as-image"}),loadImageFromUrl(m).then(v=>e!=null&&e.enableNewImageSizeCalculation||y?getImageSizeNew(v):getImageSize(v)).then(v=>{const _=u.state,w=findImageNode(_.doc,A);if(w===null){d.error({event:"img-node-not-found",trackingId:A});return}const{pos:R}=w,k=_.tr.setNodeAttribute(R,ImgSizeAttr.Height,v.height).setNodeAttribute(R,ImgSizeAttr.Width,v.width).setNodeAttribute(R,"id",null);u.dispatch(k),d.event({event:"img-dimensions-updated",position:R,sizes:v})}).catch(v=>{d.error({event:"img-dimensions-load-failed",error:v.message})}),!0}return!1},drop(u,c){var g;if(!a||u.dragging)return!1;const d=getPastedImages(c.dataTransfer);if(!d)return!1;const h=((g=u.posAtCoords({left:c.clientX,top:c.clientY}))==null?void 0:g.pos)??-1;if(h===-1)return!1;const p=dropPoint(u.state.doc,h,createFakeImageSlice(u.state.schema));return getLoggerFromState(u.state).event({event:"drop-image",plugin:"image-paste",domEvent:"drop",runProcess:p!==null}),p!==null&&new ImagesUploadProcess(u,d,a,p,e).run(),c.preventDefault(),!0}},handlePaste(u,c,d){if(!a)return!1;const h=sliceSingleNode(d);if(h&&isImageNode(h)){const p=h.attrs[ImgSizeAttr.Src],m=dataUrlToFile(p,"image");if(m)return new ImagesUploadProcess(u,[m],a,u.state.tr.selection.from,e).run(),!0}return!1}}}),o.Priority.VeryHigh)};function getPastedImages(o){if(!o||o.files.length===0||!isFilesOnly$1(o)&&!isFilesFromHtml$1(o))return null;const e=Array.from(o.files);return e.every(isImageFile$1)?e:null}function createFakeImageSlice(o){return new Slice(Fragment.from(imageType(o).create({[ImageAttr.Src]:"fake",[ImageAttr.Title]:"image"})),0,0)}function sliceSingleNode(o){return o.openStart===0&&o.openEnd===0&&o.content.childCount===1?o.content.firstChild:null}function dataUrlToFile(o,e){var u;const[s,a]=o.split(",");if(!s||!a)return null;const l=(u=s.match(/^data:(.+);base64/))==null?void 0:u[1];return l?new File([decode(a)],e,{type:l}):null}const ButtonAttach=({onUpdate:o,onChange:e,multiple:s,buttonProps:a,accept:l,children:u})=>{const{controlProps:c,triggerProps:d}=useFileInput({onUpdate:o,onChange:e});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{type:"file",multiple:s,accept:l,...c}),jsxRuntimeExports.jsx(Button,{...a,...d,children:u})]})},NumberInput=o=>{const{value:e,onUpdate:s,min:a,max:l,...u}=o;return jsxRuntimeExports.jsx(TextInput,{value:isNumber(e)?String(e):"",onUpdate:c=>{isNumber(c)?s(parseInt(c,10)):s()},controlProps:{min:a,max:l},type:"number",...u})},b$t=cn("image-form");var ImageTabId;(function(o){o.Attach="attach",o.Link="link"})(ImageTabId||(ImageTabId={}));const ImageForm$1=({className:o,autoFocus:e,onCancel:s,onSubmit:a,onAttach:l,loading:u,imageTitle:c,uploadHint:d})=>{const[h,p]=reactExports.useState(()=>isFunction(l)?ImageTabId.Attach:ImageTabId.Link),[m,g]=reactExports.useState(""),[y,A]=reactExports.useState(c??""),[T,E]=reactExports.useState(""),[v,_]=reactExports.useState(),[w,R]=reactExports.useState(),k=isFunction(l);reactExports.useLayoutEffect(()=>{!k&&h===ImageTabId.Attach&&p(ImageTabId.Link)},[k,h]);const I=()=>{const N={url:m.trim(),name:y.trim(),alt:T.trim()};typeof v=="number"&&v>=0&&(N.width=v),typeof w=="number"&&w>=0&&(N.height=w),a(N)},P=enterKeyHandler(I);return jsxRuntimeExports.jsxs(Form.Form,{className:b$t(null,[o]),children:[k&&jsxRuntimeExports.jsx(Tabs,{activeTab:h,onSelectTab:p,items:[{id:ImageTabId.Attach,title:i18n$d("common_tab_attach")},{id:ImageTabId.Link,title:i18n$d("common_tab_link")}]}),h===ImageTabId.Attach&&l&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Form.Layout,{children:d??i18n$d("image_upload_help")}),jsxRuntimeExports.jsx(Form.Footer,{onCancel:s,children:jsxRuntimeExports.jsx(ButtonAttach,{multiple:!0,accept:"image/*",onUpdate:l,buttonProps:{size:"s",view:"action",loading:u},children:i18n$d("common_action_upload")})})]}),h===ImageTabId.Link&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Form.Layout,{children:[jsxRuntimeExports.jsx(Form.Row,{label:i18n$d("common_link"),control:jsxRuntimeExports.jsx(TextInputFixed,{size:"s",view:"normal",value:m,onUpdate:g,placeholder:"https://",autoFocus:e,className:b$t("input",{type:"link"}),onKeyPress:P})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$d("image_name"),control:jsxRuntimeExports.jsx(TextInput,{size:"s",view:"normal",value:y,onUpdate:A,className:b$t("input",{type:"name"}),onKeyPress:P})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$d("image_alt"),help:i18n$d("image_alt_help"),control:jsxRuntimeExports.jsx(TextInput,{size:"s",view:"normal",value:T,onUpdate:E,className:b$t("input",{type:"alt"}),onKeyPress:P})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$d("common_sizes"),control:jsxRuntimeExports.jsxs("div",{className:b$t("size-controls"),children:[jsxRuntimeExports.jsx(NumberInput,{min:0,size:"s",view:"normal",value:v,onUpdate:_,placeholder:i18n$d("image_size_width"),className:b$t("input",{type:"width"}),onKeyDown:P}),"x",jsxRuntimeExports.jsx(NumberInput,{min:0,size:"s",view:"normal",value:w,onUpdate:R,placeholder:i18n$d("image_size_height"),className:b$t("input",{type:"height"}),onKeyDown:P})]})})]}),jsxRuntimeExports.jsx(Form.Footer,{onCancel:s,onSubmit:I})]})]})},b$s=cn("image-placeholder"),placement$5=["bottom-start","top-start","bottom-end","top-end"],defaultFormRenderer=o=>jsxRuntimeExports.jsx(ImageForm$1,{autoFocus:!0,loading:o.uploading,onCancel:o.onCancel,onSubmit:o.onSubmit,onAttach:o.onAttach}),ImagePlaceholder=({onCancel:o,onSubmit:e,onAttach:s,renderForm:a})=>{const l=useMountedState(),[u,c,d]=useBooleanState(!1),[h,p]=useElementState(),m=reactExports.useCallback(g=>{s&&l()&&(c(),s(g).finally(()=>{l()&&d()}))},[l,s,c,d]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{ref:p,className:b$s(),children:[jsxRuntimeExports.jsx(Icon,{data:Picture,size:24}),i18n$c("image")]}),jsxRuntimeExports.jsx(Popup,{open:!0,modal:!0,onOpenChange:o,anchorElement:h,placement:placement$5,children:(a||defaultFormRenderer)({onCancel:o,onSubmit:e,uploading:u,onAttach:s&&m})})]})},addWidget$1=(o,e,s)=>new ImageWidgetDescriptor(o.selection.from,e,s).applyTo(o),removeWidget$1=removeDecoration;class ImageWidgetDescriptor extends ReactWidgetDescriptor{constructor(s,a,l){super(s,"image_placeholder");oe(this,"domElem");oe(this,"deps");oe(this,"uploadImages");oe(this,"needToSetDimensionsForUploadedImages");oe(this,"enableNewImageSizeCalculation");oe(this,"renderImageForm");oe(this,"widgetHandler",null);this.domElem=document.createElement("span"),this.deps=a,this.uploadImages=l.uploadImages,this.renderImageForm=l.renderImageForm,this.needToSetDimensionsForUploadedImages=l.needToSetDimensionsForUploadedImages,this.enableNewImageSizeCalculation=l.enableNewImageSizeCalculation}getWidgetHandler(s,a){return this.widgetHandler||(this.widgetHandler=new ImageWidgetHandler({view:s,getPos:a,decoId:this.id,uploadImages:this.uploadImages,renderImageForm:this.renderImageForm,needToSetDimensionsForUploadedImages:this.needToSetDimensionsForUploadedImages,enableNewImageSizeCalculation:this.enableNewImageSizeCalculation},this.deps)),this.widgetHandler}getDomElem(){return this.domElem}renderReactElement(s,a){return this.getWidgetHandler(s,a).renderWidgetView(s,a)}remove(){var s;super.remove(),(s=this.widgetHandler)==null||s.destruct(),this.widgetHandler=null}}class ImageWidgetHandler{constructor({decoId:e,view:s,getPos:a,uploadImages:l,renderImageForm:u,needToSetDimensionsForUploadedImages:c,enableNewImageSizeCalculation:d},h){oe(this,"view");oe(this,"getPos");oe(this,"decoId");oe(this,"uploadImages");oe(this,"normalizeUrl");oe(this,"needToSetDimensionsForUploadedImages");oe(this,"enableNewImageSizeCalculation");oe(this,"renderImageForm");oe(this,"cancelled",!1);oe(this,"onCancel",()=>{this.cancelled=!0,this.view.dispatch(removeDecoration(this.view.state.tr,this.decoId)),this.view.focus()});oe(this,"onSubmit",e=>{var u;if(this.cancelled)return;const s=(u=this.normalizeUrl(e.url))==null?void 0:u.url;if(!s)return;const a={[ImgSizeAttr.Src]:s,[ImgSizeAttr.Title]:e.name,[ImgSizeAttr.Alt]:e.alt,[ImgSizeAttr.Width]:isNumber(e.width)?String(e.width):null,[ImgSizeAttr.Height]:isNumber(e.height)?String(e.height):null},l=imageType(this.view.state.schema).create(a);this.insertNodes([l])});oe(this,"onAttach",async e=>{if(this.cancelled||!this.uploadImages)return;const{view:s}=this;new ImagesUploadProcess(s,e,this.uploadImages,this.getPos(),{needDimensions:this.needToSetDimensionsForUploadedImages,enableNewImageSizeCalculation:this.enableNewImageSizeCalculation}).run(),s.dispatch(removeWidget$1(s.state.tr,this.decoId)),s.focus()});this.decoId=e,this.view=s,this.getPos=a,this.uploadImages=l,this.normalizeUrl=normalizeUrlFactory(h),this.renderImageForm=u,this.needToSetDimensionsForUploadedImages=c,this.enableNewImageSizeCalculation=d}destruct(){this.cancelled=!0}renderWidgetView(e,s){return this.view=e,this.getPos=s,jsxRuntimeExports.jsx(ImagePlaceholder,{onCancel:this.onCancel,onSubmit:this.onSubmit,onAttach:this.uploadImages&&this.onAttach,renderForm:this.renderImageForm})}insertNodes(e){if(this.cancelled)return;let s=this.view.state.tr;s=s.insert(s.mapping.map(this.getPos()),e),s=removeWidget$1(s,this.decoId),this.view.dispatch(s),this.view.focus()}}const addImageWidget=(o,e)=>({isEnable:s=>s.selection.empty,run(s,a){a(addWidget$1(s.tr,o,e))}}),addImageWidgetAction="addImageWidget",ImageWidget=(o,e)=>{o.addAction(addImageWidgetAction,s=>addImageWidget(s,{uploadImages:e.imageUploadHandler,renderImageForm:e.renderImageWidgetForm,needToSetDimensionsForUploadedImages:e.needToSetDimensionsForUploadedImages,enableNewImageSizeCalculation:e.enableNewImageSizeCalculation}))},addImage=o=>({isEnable:e=>e.selection.empty,run(e,s,a,l){const u=l;if(u!=null&&u.src){const{src:c,title:d,alt:h,width:p,height:m}=u,g={[ImgSizeAttr.Src]:c,[ImgSizeAttr.Title]:d??"",[ImgSizeAttr.Alt]:h??""};isNumber(p)&&(g[ImgSizeAttr.Width]=String(p)),isNumber(m)&&(g[ImgSizeAttr.Height]=String(m)),s(e.tr.insert(e.selection.from,imageType(o).create(g)))}}}),RESIZE_DELAY=50,MIN_WIDTH=40,THRESHOLD=4,useNodeResizing=({width:o,height:e,onResize:s,ref:a,delay:l=RESIZE_DELAY,threshold:u=THRESHOLD,minWidth:c=MIN_WIDTH})=>{const d=useBooleanState(!1),[h,,,p]=d,[m,g]=reactExports.useState(o),[y,A]=reactExports.useState(e),[T,E]=reactExports.useState(o),[v,_]=reactExports.useState(e);return reactExports.useEffect(()=>{o!==m&&(E(o),g(o)),e!==y&&(_(e),A(e))},[o,e,m,y]),{startResizing:(R,k)=>{R.preventDefault();const I=a==null?void 0:a.current;if(!I)throw new Error("Reference element not found!");const P=R.pageX,N=I.getBoundingClientRect().width||0,L=I.getBoundingClientRect().height||0;let Q;const j=throttle(V=>{Q&&cancelAnimationFrame(Q),Q=requestAnimationFrame(()=>{const z=V.pageX-P,Y=k==="right"?N+z:N-z;if(Math.abs(Y-N)>=u){const fe=Y>=c?Y:c,de=L/N*fe;E(fe),_(de);const X=!m&&m!==0&&!(m===null&&y===null),he=!y&&y!==0;s==null||s({width:X?void 0:fe,height:he?void 0:de})}})},l),F=()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",F),p(),Q&&cancelAnimationFrame(Q)};document.addEventListener("mousemove",j),document.addEventListener("mouseup",F),p()},state:{resizing:h,width:!m&&m!==0?void 0:T,height:!y&&y!==0?void 0:v}}},b$r=cn("resizable"),Resizer=({onMouseDown:o,direction:e})=>jsxRuntimeExports.jsx("div",{className:b$r("resizer-wrapper",{[e]:!0}),role:"button",tabIndex:0,onMouseDown:o,children:jsxRuntimeExports.jsx("div",{className:b$r("resizer")})}),Resizable=({hover:o,resizing:e,children:s,onResizeLeft:a,onResizeRight:l})=>jsxRuntimeExports.jsxs("div",{className:b$r({hover:o,resizing:e}),children:[s,jsxRuntimeExports.jsx(Resizer,{onMouseDown:a,direction:"left"}),jsxRuntimeExports.jsx(Resizer,{onMouseDown:l,direction:"right"})]});function useAutoFocus(o,e=[],s=0){reactExports.useEffect(()=>{const a=setTimeout(()=>{var l;(l=o.current)==null||l.focus()},s);return()=>{clearTimeout(a)}},e)}const b$q=cn("image-tooltip-form"),ImageForm=({node:o,updateAttributes:e,view:s,unsetEdit:a,anchorElement:l})=>{const{attrs:u,marks:c}=o,d=c.find(P=>P.type.name===linkType(s.state.schema).name),[h,p]=reactExports.useState(u[ImgSizeAttr.Title]||""),[m,g]=reactExports.useState(u[ImgSizeAttr.Alt]||""),[y,A]=reactExports.useState(u[ImgSizeAttr.Width]||""),[T,E]=reactExports.useState(u[ImgSizeAttr.Height]||""),[v,_]=reactExports.useState((d==null?void 0:d.attrs.href)||""),w=()=>{e({title:h.trim(),alt:m.trim(),width:isNumber(y)&&Number(y)>=0?String(y):"",height:isNumber(T)&&Number(T)>=0?String(T):""},d?[linkType(s.state.schema).create({...d.attrs,[LinkAttr.Href]:v})]:[]),a()},R=reactExports.useRef(null),k=reactExports.useRef(null);useAutoFocus(d?R:k);const I=enterKeyHandler(w);return jsxRuntimeExports.jsx(Popup,{open:!0,modal:!0,anchorElement:l,placement:["bottom-start","top-start","bottom-end","top-end"],onOpenChange:(P,N,L)=>{L!=="escape-key"&&a()},children:jsxRuntimeExports.jsxs(Form.Form,{className:b$q(),children:[jsxRuntimeExports.jsxs(Form.Layout,{children:[d&&jsxRuntimeExports.jsx(Form.Row,{label:i18n$d("image_link_href"),help:i18n$d("image_link_href_help"),control:jsxRuntimeExports.jsx(TextInput,{controlRef:R,size:"s",view:"normal",value:v,onUpdate:_,className:b$q("input",{type:"link"}),onKeyPress:I})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$d("image_name"),control:jsxRuntimeExports.jsx(TextInput,{controlRef:k,size:"s",view:"normal",value:h,onUpdate:p,className:b$q("input",{type:"name"}),onKeyPress:I})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$d("image_alt"),help:i18n$d("image_alt_help"),control:jsxRuntimeExports.jsx(TextInput,{size:"s",view:"normal",value:m,onUpdate:g,className:b$q("input",{type:"alt"}),onKeyPress:I})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$d("common_sizes"),control:jsxRuntimeExports.jsxs("div",{className:b$q("size-controls"),children:[jsxRuntimeExports.jsx(NumberInput,{min:0,size:"s",view:"normal",value:y,onUpdate:A,placeholder:i18n$d("image_size_width"),className:b$q("input",{type:"width"}),onKeyPress:I}),"x",jsxRuntimeExports.jsx(NumberInput,{min:0,size:"s",view:"normal",value:T,onUpdate:E,placeholder:i18n$d("image_size_height"),className:b$q("input",{type:"height"}),onKeyPress:I})]})})]}),jsxRuntimeExports.jsx(Form.Footer,{onSubmit:w})]})})},b$p=cn("img-settings-button"),ImgSettingsButton=function({node:o,view:e,updateAttributes:s,visible:a,edit:l,toggleEdit:u,nodeElement:c,unsetEdit:d,onDelete:h}){const[p,m]=useElementState(),[g,y,A,T]=useBooleanState(!1),E=["bottom-end","bottom-start"],v=()=>{u(),A()},_=l,w=!l&&(a||g),R=!l&&g;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[_&&jsxRuntimeExports.jsx(ImageForm,{node:o,view:e,updateAttributes:s,anchorElement:c,unsetEdit:d}),w&&jsxRuntimeExports.jsx(Button,{qa:"g-md-image-settings-button",onClick:T,ref:m,size:"s",view:"raised",className:b$p(null,ReactNodeStopEventCn),children:jsxRuntimeExports.jsx(Icon,{data:Ellipsis,className:ReactNodeStopEventCn})}),jsxRuntimeExports.jsx(Popup,{open:R,anchorElement:p,onOpenChange:A,placement:E,children:jsxRuntimeExports.jsxs(Menu,{qa:"g-md-image-settings-menu",children:[jsxRuntimeExports.jsx(Menu.Item,{extraProps:{"aria-label":i18n$e("edit")},onClick:v,children:i18n$e("edit")}),jsxRuntimeExports.jsx(Menu.Item,{extraProps:{"aria-label":i18n$e("delete")},onClick:h,children:i18n$e("delete")})]})})]})},cnImgSizeNodeView=cn("img-size-node-view"),ImageNodeView=({node:o,view:e,getPos:s,updateAttributes:a})=>{const l=reactExports.useRef(null),u=reactExports.useRef(null),[c,d]=useElementState(),h=o.attrs[ImgSizeAttr.Alt]||"",p=o.attrs[ImgSizeAttr.Height],m=o.attrs[ImgSizeAttr.Width],g=o.attrs[ImgSizeAttr.Src]||"",y=o.attrs[ImgSizeAttr.Title]||"",A=useNodeHovered(l),[T,E,v,_]=useNodeEditing({nodeRef:l,view:e}),w=reactExports.useCallback(({width:Q,height:j})=>{a({width:Q===void 0?void 0:String(Math.round(Q)),height:j===void 0?void 0:String(Math.round(j)),name:y,alt:h})},[h,y,a]),{state:R,startResizing:k}=useNodeResizing({width:m,height:p,ref:u,onResize:w}),I={transition:"width 0.15s ease-out, height 0.15s ease-out"};R.width?(I.width=`${R.width}px`,R.height&&(I.aspectRatio=R.width/R.height,I.height="auto;")):R.height&&(I.height=`${R.height}px`);const P=reactExports.useCallback(()=>{const Q=s();Q!==void 0&&(removeNode({node:o,pos:Q,tr:e.state.tr,dispatch:e.dispatch}),e.focus())},[s,o,e]),N=Q=>j=>{k(j,Q)};reactExports.useEffect(()=>{var Q;(Q=imageRendererKey.getState(e.state))!=null&&Q.linkAdded&&E()},[e,E]);const L=reactExports.useCallback(Q=>{setRef(u,Q),d(Q)},[d]);return jsxRuntimeExports.jsx("div",{ref:l,"data-qa":"g-md-image",children:jsxRuntimeExports.jsxs(Resizable,{hover:A,resizing:R.resizing,onResizeLeft:N("left"),onResizeRight:N("right"),children:[jsxRuntimeExports.jsx(ImgSettingsButton,{node:o,view:e,getPos:s,updateAttributes:a,visible:A&&!T&&!R.resizing,edit:T,toggleEdit:_,nodeElement:c,onDelete:P,unsetEdit:v}),jsxRuntimeExports.jsx("img",{ref:L,src:g,alt:h,style:I})]})})},imgSizeNodeViewPlugin=o=>new Plugin({key:imageRendererKey,state:{init:()=>{},apply:e=>e.getMeta(imageRendererKey)},props:{nodeViews:{[imageNodeName]:reactNodeViewFactory(ImageNodeView,{isInline:!0,reactNodeWrapperCn:cnImgSizeNodeView("wrapper")})(o)}}}),ImgSize=(o,e)=>{o.use(ImgSizeSpecs,e),o.use(ImageWidget,{imageUploadHandler:e.imageUploadHandler,renderImageWidgetForm:e.renderImageWidgetForm,needToSetDimensionsForUploadedImages:!!e.needToSetDimensionsForUploadedImages,enableNewImageSizeCalculation:!!e.enableNewImageSizeCalculation}),(e.imageUploadHandler||e.parseInsertedUrlAsImage)&&o.use(ImagePaste,{imageUploadHandler:e.imageUploadHandler,needDimensions:!!e.needToSetDimensionsForUploadedImages,parseInsertedUrlAsImage:e.parseInsertedUrlAsImage,enableNewImageSizeCalculation:e.enableNewImageSizeCalculation}),o.addAction(addImageAction,({schema:s})=>addImage(s)),o.addPlugin(imgSizeNodeViewPlugin)},monoAction="mono",Monospace=o=>{o.use(MonospaceSpecs),o.addAction(monoAction,({schema:e})=>createToggleMarkAction(monospaceType(e))).addInputRules(({schema:e})=>({rules:[markInputRule({open:"##",close:"##",ignoreBetween:"#"},monospaceType(e))]}))},addVideo={isEnable(o){return o.selection.empty},run(o,e,s,a){if(!a||!a.service||!a.url)return;const{service:l}=a,u=parsersExports.parseVideoUrl(l,a.url);e(o.tr.insert(o.selection.from,videoType(o.schema).create({[VideoAttr.Service]:l,[VideoAttr.VideoID]:u})))}},vAction="video",Video=(o,e)=>{o.use(VideoSpecs,e),o.addAction(vAction,()=>addVideo)};var base={},hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,(()=>{var o=Object.create,e=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,l=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,c=(Z,ce)=>function(){return ce||(0,Z[a(Z)[0]])((ce={exports:{}}).exports,ce),ce.exports},d=(Z,ce,be,Ee)=>{if(ce&&typeof ce=="object"||typeof ce=="function")for(let Se of a(ce))!u.call(Z,Se)&&Se!==be&&e(Z,Se,{get:()=>ce[Se],enumerable:!(Ee=s(ce,Se))||Ee.enumerable});return Z},h=(Z,ce,be)=>(be=Z!=null?o(l(Z)):{},d(!Z||!Z.__esModule?e(be,"default",{value:Z,enumerable:!0}):be,Z)),p=c({"node_modules/get-root-node-polyfill/index.js"(Z,ce){function be(Ae){var Te=typeof Ae=="object"&&!!Ae.composed;return Te?Ee(this):Se(this)}function Ee(Ae){var Te=Se(Ae);return ke(Te)?Ee(Te.host):Te}function Se(Ae){return Ae.parentNode!=null?Se(Ae.parentNode):Ae}function ke(Ae){return Ae.nodeName==="#document-fragment"&&Ae.constructor.name==="ShadowRoot"}typeof ce=="object"&&ce.exports&&(ce.exports=be)}}),m=h(p());typeof document<"u"&&(function(Z){const ce=Z.matches||Z.matchesSelector||Z.webkitMatchesSelector||Z.mozMatchesSelector||Z.msMatchesSelector||Z.oMatchesSelector;ce?Z.matches=Z.matchesSelector=ce:Z.matches=Z.matchesSelector=function(Ee){const ke=(Z.getRootNode?Z.getRootNode():m.default.call(Z)).querySelectorAll(Ee),Ae=this;return Array.prototype.some.call(ke,Te=>Te===Ae)}})(Element.prototype);var g=Z=>{const ce=Z.composedPath();return Array.isArray(ce)&&ce.length>0?ce[0]:Z.target},y=Z=>{const ce=g(Z);return!ce||!ce.matches},A=async Z=>{if(!Z)return;if(navigator.clipboard&&typeof navigator.clipboard.writeText)return navigator.clipboard.writeText(Z);const ce=document.createElement("textarea");ce.setAttribute("style","position: absolute; left: 1000%"),ce.textContent=Z,document.body.append(ce),ce.select(),document.execCommand("copy"),document.body.removeChild(ce)},T=".yfm-clipboard-button",E=".yfm-wrapping-button";function v(Z){if(!Z)return;const ce=Z.getAttribute("data-animation"),be=Z.getRootNode().getElementById(`visibileAnimation-${ce}`);be&&be.beginElement()}function _(Z){var ce;const be=(ce=Z.parentNode)==null?void 0:ce.parentNode,Ee=be==null?void 0:be.querySelector("pre code");if(!be||!Ee)return;const Se=Array.from(Ee.childNodes).filter(ke=>!(ke instanceof HTMLElement&&ke.classList.contains("yfm-line-number"))).map(ke=>ke.textContent).join("");A(Se.trim()).then(()=>{v(be.querySelector(".yfm-clipboard-icon")),setTimeout(()=>Z.blur(),1500)})}function w(Z){var ce;const be=(ce=Z.parentNode)==null?void 0:ce.parentNode,Ee=be==null?void 0:be.querySelector("pre code");!be||!Ee||(Ee.classList.toggle("wrap"),setTimeout(()=>Z.blur(),500))}typeof document<"u"&&document.addEventListener("click",Z=>{if(y(Z))return;const ce=g(Z);ce.matches(T)?_(ce):ce.matches(E)&&w(ce)});var R=".yfm-clipboard-anchor";typeof document<"u"&&document.addEventListener("click",Z=>{const ce=g(Z);if(y(Z)||!ce.matches(R))return;const be=ce.getAttribute("data-href")||"",Ee=new URL(be,window.location.href).toString();A(Ee)});var k=".yfm-clipboard-inline-code",I="tooltip_inline_clipboard_dialog",P="yfm inline_code_tooltip",N="open",L={ru:"",en:"Copied",ar:" ",cs:"Zkoprovno",fr:"Copi",es:"Copiado",he:"",bg:"",et:"Kopeeritud",el:"",pt:"Copiado",zh:"","zh-tw":"",kk:"",tr:"Kopyaland",uz:"Nusxalandi"};function Q(Z){const ce=Z.getBoundingClientRect(),be=document.body,Ee=document.documentElement,Se=window.pageYOffset||Ee.scrollTop||be.scrollTop,ke=window.pageXOffset||Ee.scrollLeft||be.scrollLeft,Ae=Ee.clientTop||be.clientTop||0,Te=Ee.clientLeft||be.clientLeft||0,xe=ce.top+Se-Ae,Pe=ce.left+ke-Te;return{top:Math.round(xe),left:Math.round(Pe)}}var j=null,F=!0;function V(){return document.getElementById(I)}function J(Z,ce){const be=ce.getAttribute("aria-live")||"polite";Z==null||Z.setAttribute("aria-live",be),Z==null||Z.setAttribute("aria-modal","true")}function z(){j&&(clearTimeout(j),j=null)}function Y(Z){return Z?Z.closest("table")||Z.closest("code")||Z.parentElement:null}function fe(){const Z=V();if(!Z)return;const ce=Z.getAttribute("inline-id")||"",be=document.getElementById(ce);be&&de(Z,be)}function de(Z,ce){const{x:be,y:Ee,right:Se,left:ke,width:Ae,height:Te}=ce.getBoundingClientRect(),xe=Y(ce);if(!xe)return;const{right:Pe,left:Le}=xe.getBoundingClientRect();if((Pe<ke||Le>Se)&&!F){K(Z);return}F&&xe&&(xe.addEventListener("scroll",fe),F=!1);const Ue=Number(Z.getAttribute("relativeX")),Be=Number(Z.getAttribute("relativeY"));if(Ue===be&&Be===Ee)return;Z.setAttribute("relativeX",String(be)),Z.setAttribute("relativeY",String(Ee));const Ze=Te+5,We=Z.parentElement;if(!We)return;const{width:Ge}=Z.getBoundingClientRect(),{left:Ye}=We.getBoundingClientRect(),Ve=Number(Q(ce).left),He=Ge+Ve,at=Ve-Ge<0,dt=He>document.body.clientWidth,Ct=(dt||document.dir==="rtl")&&!at?Ge-Ae:0,ht=Q(We).top-We.offsetTop,ae=dt?He-document.body.clientWidth+5:0,H=Q(ce).left-Ye+We.offsetLeft-Ct,W=H+Ge>=document.body.clientWidth;Z.style.top=Number(Q(ce).top+Ze-ht)+"px",Z.style.left=Number(H-(W?ae:0))+"px"}function X(Z){const ce=Z.getAttribute("inline-id");return ce?document.getElementById(ce):null}function he(Z){Z.classList.remove(N);const ce=X(Z),be=Y(ce),Ee=Y(Z);Z.removeAttribute("inline-id"),!(!be||!Ee)&&(Ee.removeChild(Z),be.removeEventListener("scroll",fe),F=!0)}function ue(){var Z;let ce=V();if(!ce){const be=document.querySelector(".dc-doc-page__content")||document.body,Ee=document.documentElement.lang||"en",Se=(Z=L[Ee])!=null?Z:L.en,ke=document.createElement("div");ke.innerHTML=`
            <div id="${I}" class="${P}"
                role="dialog" aria-live="polite" aria-modal="true">
                ${Se}
            </div>
        `,ce=ke.firstElementChild,be.appendChild(ce)}return ce}function G(Z){const ce=ue();if(!(!Z.matches(k)||!ce))return ce.setAttribute("inline-id",Z.getAttribute("id")||""),J(ce,Z),de(ce,Z),ce.classList.contains(N)?(ce.classList.remove(N),requestAnimationFrame(()=>{ce.classList.add(N)})):ce.classList.add(N),ce}function K(Z){z(),he(Z)}function q(Z){const ce=G(Z);ce&&(z(),j=setTimeout(()=>{K(ce),j=null},1e3))}function te(Z){const ce=Z.innerText;ce&&A(ce).then(()=>{q(Z)})}typeof document<"u"&&(document.addEventListener("click",Z=>{const ce=g(Z),be=ce.matches(k);y(Z)||!be||te(ce)}),document.addEventListener("keydown",Z=>{var ce;if(Z.key==="Enter"&&document.activeElement){const Ee=document.activeElement,Se=k.replace(".","");if(!Ee.classList.contains(Se))return;const ke=Ee.innerText;if(!ke)return;A(ke).then(()=>{q(Ee)})}const be=V();Z.key==="Escape"&&be&&(K(be),(ce=X(be))==null||ce.focus())}),window.addEventListener("resize",()=>{const Z=V();if(!Z)return;const ce=Z.getAttribute("inline-id")||"",be=document.getElementById(ce);if(!be){Z.classList.toggle(N);return}de(Z,be)}))})()),base}requireBase(),(()=>{var o=v=>{const _=v.composedPath();return Array.isArray(_)&&_.length>0?_[0]:v.target},e=v=>{const _=o(v);return!_||!_.matches},s={TITLE:".yfm .yfm-term_title",CONTENT:".yfm .yfm-term_dfn"},a="open",l=s.CONTENT.replace(/\./g,"")+" "+a,u=!0;function c(v,_){const w=_.getAttribute("id")||Math.random().toString(36).substr(2,8);v==null||v.setAttribute("term-id",w)}function d(v,_){const w=_.getAttribute("aria-live")||"polite";v==null||v.setAttribute("aria-live",w),v==null||v.setAttribute("aria-modal","true")}function h(v,_){const{x:w,y:R,right:k,left:I,width:P,height:N}=_.getBoundingClientRect(),L=m(_);if(!L)return;const{right:Q,left:j}=L.getBoundingClientRect();if((Q<I||j>k)&&!u){y(v);return}u&&L&&(L.addEventListener("scroll",p),u=!1);const F=Number(v.getAttribute("relativeX")),V=Number(v.getAttribute("relativeY"));if(F===w&&V===R)return;v.setAttribute("relativeX",String(w)),v.setAttribute("relativeY",String(R));const J=N+5,z=v.parentElement;if(!z)return;const{width:Y}=v.getBoundingClientRect(),{left:fe}=z.getBoundingClientRect(),de=Number(A(_).left),X=Y+de,he=de-Y<0,ue=X>document.body.clientWidth,K=(ue||document.dir==="rtl")&&!he?Y-P:0,q=A(z).top-z.offsetTop,Z=ue?X-document.body.clientWidth+5:0,ce=A(_).left-fe+z.offsetLeft-K,be=ce+Y>=document.body.clientWidth;v.style.top=Number(A(_).top+J-q)+"px",v.style.left=Number(ce-(be?Z:0))+"px"}function p(){const v=document.getElementsByClassName(l)[0];if(!v)return;const _=v.getAttribute("term-id")||"",w=document.getElementById(_);w&&h(v,w)}function m(v){return v?v.closest("table")||v.closest("code")||v.parentElement:null}function g(v){const _=document.getElementsByClassName(l)[0],w=v.getAttribute("id"),R=v.getAttribute("term-key"),k=document.getElementById(R+"_element");if(_&&w===_.getAttribute("term-id")){y(_);return}const P=v.closest([s.CONTENT.replace(" ",""),a].join("."));_&&!P&&y(_),!(!v.matches(s.TITLE)||!k)&&(c(k,v),d(k,v),h(k,v),k.classList.toggle(a),T(k))}function y(v){v.classList.remove(a);const _=E(v),w=m(_);w&&(w.removeEventListener("scroll",p),u=!0)}function A(v){const _=v.getBoundingClientRect(),w=document.body,R=document.documentElement,k=window.pageYOffset||R.scrollTop||w.scrollTop,I=window.pageXOffset||R.scrollLeft||w.scrollLeft,P=R.clientTop||w.clientTop||0,N=R.clientLeft||w.clientLeft||0,L=_.top+k-P,Q=_.left+I-N;return{top:Math.round(L),left:Math.round(Q)}}function T(v){const _=v.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),w=_[0],R=_[_.length-1];w&&w.focus(),v.addEventListener("keydown",function(k){(k.key==="Tab"||k.keyCode===9)&&(k.shiftKey?document.activeElement===w&&(R.focus(),k.preventDefault()):document.activeElement===R&&(w.focus(),k.preventDefault()))})}function E(v){const _=v.getAttribute("term-id");return _?document.getElementById(_):null}typeof document<"u"&&(document.addEventListener("click",v=>{(o(v)||!e(v))&&g(o(v))}),document.addEventListener("keydown",v=>{var _;const w=document.getElementsByClassName(l)[0];v.key==="Enter"&&document.activeElement&&g(document.activeElement),v.key==="Escape"&&w&&(y(w),(_=E(w))==null||_.focus())}),window.addEventListener("resize",()=>{const v=document.getElementsByClassName(l)[0];if(!v)return;const _=v.getAttribute("term-id")||"",w=document.getElementById(_);if(!w){v.classList.toggle(a);return}h(v,w)}))})();const b$o=n("yfm");reactExports.forwardRef(function o(e,s){const{html:a,className:l,qa:u}=e,c={...e.mods};return e.linksVisited&&(c["links-visited"]=!0),e.noListReset&&(c["no-list-reset"]=!0),jsxRuntimeExports.jsx("div",{ref:s,dangerouslySetInnerHTML:{__html:a},className:b$o(c,l),"data-qa":u})});const YfmConfigs=(o,e)=>{o.use(YfmConfigsSpecs,e);const{mix:s}=e,a={...e.mods};a["no-list-reset"]!==!1&&(a["no-list-reset"]=!0),o.addPlugin(()=>new Plugin({props:{attributes:{class:`${b$o(a,s)} yfm-editor`}}}))};(()=>{var o="yfm_cut",e={Cut:"yfm-cut",Title:"yfm-cut-title",Highlight:"yfm-cut-highlight"},s=class{constructor(){oe(this,"disposers",[]);this.disposers.push(this.init())}init(){let u=!1,c=()=>{u=!0},d=()=>{u=!1},h=p=>{l(p.target)&&!u&&this.focusActiveCut(p.target)};return document.addEventListener("mousedown",c),document.addEventListener("mouseup",d),document.addEventListener("focus",h,!0),()=>{document.removeEventListener("mousedown",c),document.removeEventListener("mouseup",d),document.removeEventListener("focus",h,!0)}}dispose(){for(let u of this.disposers)u()}focusActiveCut(u){let c=u.parentNode;if(!a(c))return;let d=c;for(;d;)a(d)&&(d.open=!0),d=d.parentElement;setTimeout(()=>{c.classList.add(e.Highlight)},70),setTimeout(()=>{c.classList.remove(e.Highlight)},1e3)}};function a(u){var c;return((c=u==null?void 0:u.tagName)==null?void 0:c.toLowerCase())==="details"&&(u==null?void 0:u.classList.contains(e.Cut))}function l(u){var c;return((c=u==null?void 0:u.tagName)==null?void 0:c.toLowerCase())==="summary"&&(u==null?void 0:u.classList.contains(e.Title))}typeof window<"u"&&!window[o]&&(window[o]=new s)})();const YfmCutClassName={...YfmCutClassName$1,TitleInner:"g-md-yfm-cut-title-inner",Open:"yfm-cut-open",Active:"yfm-cut-active"},createYfmCutNode=o=>e=>{const s=`${YfmCutClassName.Cut} ${YfmCutClassName.Open}`;return cutType(o).create({class:s},[cutTitleType(o).create(null),cutContentType(o).create(null,e)])},createYfmCut=(o,e)=>{const{schema:s,selection:a}=o,l=findParentNodeClosestToPos(a.$from,u=>u.isTextblock&&!u.type.spec.complex);if(!l)return!1;if(e){const u=l.pos;let c=u+l.node.nodeSize;const d=a.$from.index(l.depth-1),h=a.$from.node(l.depth-1),p=a.$from.start(l.depth-1);let m=!1;h.forEach((y,A,T)=>{if(T<d||m)return;if(y.type.spec.complex&&y.type.spec.complex!=="root"){m=!0;return}c=p+A+y.nodeSize,a.to<c&&(m=!0)});const g=o.tr;g.replaceWith(u,c,createYfmCutNode(s)(g.doc.slice(u,c,!1).content)),g.setSelection(TextSelection.create(g.doc,u+2)),e(g.scrollIntoView())}return!0},toYfmCut={isEnable(o){return createYfmCut(o)},run(o,e){createYfmCut(o,e)}},liftEmptyBlockFromCut=(o,e)=>{const{selection:s,schema:a}=o;if(!isTextSelection(s))return!1;const{$cursor:l}=s;return!l||l.parent.content.size?!1:l.depth>2&&isSameNodeType(l.node(-1),cutContentType(a))&&isSameNodeType(l.node(-2),cutType(a))&&l.node(-1).childCount>1&&l.after()===l.end(-1)?(e&&e(o.tr.lift(l.blockRange(),l.depth-3).scrollIntoView()),!0):!1},exitFromCutTitle=(o,e)=>{const{selection:s,schema:a}=o;if(!isTextSelection(s))return!1;const{$cursor:l}=s;if(!l||!isSameNodeType(l.parent,cutTitleType(a))||!isSameNodeType(l.node(-1),cutType(a)))return!1;const u=l.node(-1),c=findFirstTextblockChild(u.lastChild);if(!c)return!1;const h=l.start(-1)+u.firstChild.nodeSize+1+c.offset;return e==null||e(o.tr.setSelection(TextSelection.create(o.doc,h))),!0},removeCut=(o,e,s)=>{const{selection:a,schema:l}=o;if(!isTextSelection(a))return!1;const{$cursor:u}=a;if(!u||!isSameNodeType(u.parent,cutTitleType(l))||!isSameNodeType(u.node(-1),cutType(l)))return!1;if(s!=null&&s.endOfTextblock("backward",o)){if(e){const c=u.parent,d=u.node(-1),h=d.lastChild,p=Fragment.from(pType(l).create(null,c.content)).append(h.content),m=u.before(-1),g=m+d.nodeSize,y=o.tr.replaceWith(m,g,p);e(y.setSelection(TextSelection.create(y.doc,m+1)))}return!0}return!1},backToCutTitle=(o,e,s)=>{const{selection:a,schema:l}=o;if(!isTextSelection(a))return!1;const{$cursor:u}=a;if(!u||!isSameNodeType(u.parent,pType(l))||!isSameNodeType(u.node(-1),cutContentType(l))||!isSameNodeType(u.node(-2),cutType(l)))return!1;const c=u.node(-2),d=u.node(-1);if(u.parent!==d.firstChild)return!1;if(s!=null&&s.endOfTextblock("backward",o)){if(e){const h=c.firstChild;e(o.tr.setSelection(TextSelection.create(o.doc,u.before(-2)+h.nodeSize)))}return!0}return!1};class YfmCutTitleNodeView{constructor(e){oe(this,"dom");oe(this,"contentDOM");oe(this,"node");oe(this,"_onTitleClick",e=>{const{currentTarget:s}=e;if(s instanceof HTMLElement){const a=s.parentElement;a!=null&&a.classList.contains(YfmCutClassName.Cut)&&a.classList.toggle(YfmCutClassName.Open)}});oe(this,"_onTitleInnerClick",e=>{e.stopPropagation(),e.preventDefault()});this.node=e,this.dom=document.createElement("div"),this.dom.classList.add(YfmCutClassName.Title),this.dom.addEventListener("click",this._onTitleClick),updateDomAttribute(this.dom,CutAttr.Line,e.attrs[CutAttr.Line]),this.contentDOM=this.dom.appendChild(document.createElement("div")),this.contentDOM.classList.add(YfmCutClassName.TitleInner),this.contentDOM.addEventListener("click",this._onTitleInnerClick)}update(e){return this.node.type!==e.type?!1:(this.node=e,updateDomAttribute(this.dom,CutAttr.Line,e.attrs[CutAttr.Line]),!0)}destroy(){this.dom.removeEventListener("click",this._onTitleClick),this.contentDOM.removeEventListener("click",this._onTitleInnerClick)}}function updateDomAttribute(o,e,s){s?o.setAttribute(e,s):o.removeAttribute(e)}const cutActivePlugin=()=>new Plugin({props:{decorations(o){const e=[],s=o.selection,a=cutType(o.schema),l=({pos:u,node:c})=>{e.push(Decoration$1.node(u,u+c.nodeSize,{class:YfmCutClassName.Active}))};return isNodeSelection(s)?(s.node.type===a&&l({pos:s.from,node:s.node}),findParentNodesOfType(a,s.$from).forEach(l)):isTextSelection(s)?(findParentNodesOfType(a,s.$from).forEach(l),s.$from.sameParent(s.$to)||(findParentNodesOfType(a,s.$to).forEach(l),o.doc.nodesBetween(s.from,s.to,(u,c)=>(u.type===a&&l({pos:c,node:u}),!u.isTextblock)))):findParentNodesOfType(a,s.$from).forEach(l),e.length?DecorationSet.create(o.doc,e):DecorationSet.empty}}});function findParentNodesOfType(o,e){let{depth:s}=e;const a=[];for(;s>=0;){const l=e.node(s);l.type===o&&a.push({depth:s,node:l,pos:e.before(s)}),s--}return a}const key$2=new PluginKey("yfm-cut-auto-open"),cutAutoOpenPlugin=()=>new Plugin({key:key$2,view(o){update(o);const e=new CutAutoOpenOnDragOver(o);return{update:s=>update(s),destroy:()=>e.destroy()}}});function update(o){const e=o.state.selection,s=o.domAtPos.bind(o);isTextSelection(e)&&(e.$cursor?openParentYfmCuts(e.$cursor,s):(openParentYfmCuts(e.$head,s),openParentYfmCuts(e.$anchor,s)))}function openParentYfmCuts(o,e){let{depth:s}=o;const{schema:a}=o.parent.type;for(;s>0;){if(o.node(s).type===cutContentType(a)&&o.node(s-1).type===cutType(a)){const{node:l}=e(o.start(s-1),0);l.classList.add(YfmCutClassName.Open),s--}s--}}const Sr=class Sr{constructor(e){oe(this,"_cutElem",null);oe(this,"_editorView");oe(this,"_timeout",null);oe(this,"_docListener");this._editorView=e,this._docListener=throttle(this._onDocEvent.bind(this),Sr.THROTTLE_WAIT),document.addEventListener("mousemove",this._docListener),document.addEventListener("dragover",this._docListener)}destroy(){this._clear(),this._docListener.cancel(),document.removeEventListener("mousemove",this._docListener),document.removeEventListener("dragover",this._docListener)}_onDocEvent(e){const s=this._editorView;if(!s.dragging)return;const a=s.posAtCoords({left:e.clientX,top:e.clientY});if(!a)return;const u=findDomRefAtPos(a.pos,s.domAtPos.bind(s)).closest(Sr.YFM_CUT_SELECTOR);u!==this._cutElem&&(this._clear(),u&&this._setCutElem(u))}_clear(){this._timeout!==null&&clearTimeout(this._timeout),this._timeout=null,this._cutElem=null}_setCutElem(e){this._cutElem=e,this._timeout=setTimeout(this._openCut.bind(this),Sr.OPEN_TIMEOUT)}_openCut(){var e;this._editorView.dragging&&((e=this._cutElem)==null||e.classList.add(YfmCutClassName.Open)),this._clear()}};oe(Sr,"YFM_CUT_SELECTOR",`.${YfmCutClassName.Cut}:not(.${YfmCutClassName.Open})`),oe(Sr,"OPEN_TIMEOUT",500),oe(Sr,"THROTTLE_WAIT",50);let CutAutoOpenOnDragOver=Sr;const cutAction="toYfmCut",YfmCut=(o,e)=>{if(o.use(YfmCutSpecs,{...e,cutView:()=>()=>({ignoreMutation(s){return s instanceof MutationRecord&&s.type==="attributes"}}),cutTitleView:()=>s=>new YfmCutTitleNodeView(s)}),o.addPlugin(cutActivePlugin).addPlugin(cutAutoOpenPlugin).addAction(cutAction,()=>toYfmCut).addKeymap(()=>({Backspace:chainCommands(backToCutTitle,removeCut),Enter:chainCommands(exitFromCutTitle,liftEmptyBlockFromCut)})).addInputRules(({schema:s})=>({rules:[nodeInputRule(/(?:^)({% cut)\s$/,cutType(s).createAndFill(),1)]})),e!=null&&e.yfmCutKey){const{yfmCutKey:s}=e;o.addKeymap(()=>({[s]:withLogAction("yfm_cut",createYfmCut)}))}},createFileNode=o=>({result:e,file:s})=>o.create({href:e.url,download:e.name??s.name,type:e.type??s.type}),b$n=cn("file-skeleton");class FileSkeletonDescriptor extends ReactWidgetDescriptor{constructor(s){super(s,"yfm_file_skeleton");qe(this,Fi);$e(this,Fi,document.createElement("span")),pe(this,Fi).classList.add(b$n(),"yfm-file")}getDomElem(){return pe(this,Fi)}renderReactElement(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"yfm-file__icon"}),jsxRuntimeExports.jsx(Skeleton,{className:b$n("skeleton")})]})}}Fi=new WeakMap;class YfmFilesUploadProcessBase extends FilesBatchUploadProcess{constructor(s,a,l){super(s,a,l);oe(this,"createFile");this.createFile=createFileNode(fileType(this.view.state.schema))}createSkeleton(){return new FileSkeletonDescriptor(this.getSkeletonInitPos())}async createPMNode(s){return this.createFile(s)}}const{isFilesOnly,isFilesFromHtml,isImageFile}=clipboardUtils,YfmFilePaste=(o,e)=>{if(!e||!isFunction(e.fileUploadHandler))throw new Error("YfmFilePaste extension: fileUploadHandler is not a function");o.addPlugin(()=>new Plugin({props:{handleDOMEvents:{paste(s,a){const l=getLoggerFromState(s.state),u=getPastedFiles(a.clipboardData);return u?(a.preventDefault(),l.event({event:"paste-files",plugin:"yfm-file-paste",domEvent:"paste"}),new YfmFilesPasteUploadProcess(s,u,{uploadHandler:e.fileUploadHandler,needToSetDimensionsForUploadedImages:e.needToSetDimensionsForUploadedImages}).run(),!0):!1},drop(s,a){var h;if(s.dragging)return!1;const l=getPastedFiles(a.dataTransfer);if(!l)return!1;const u=((h=s.posAtCoords({left:a.clientX,top:a.clientY}))==null?void 0:h.pos)??-1;if(u===-1)return!1;const c=dropPoint(s.state.doc,u,createFakeFileSlice(s.state.schema));return getLoggerFromState(s.state).event({event:"drop-files",plugin:"yfm-file-paste",domEvent:"drop",runProcess:c!==null}),c!==null&&new YfmFilesPasteUploadProcess(s,l,{pos:c,uploadHandler:e.fileUploadHandler,needToSetDimensionsForUploadedImages:e.needToSetDimensionsForUploadedImages}).run(),a.preventDefault(),!0}}}}),o.Priority.Low)};function getPastedFiles(o){return!o||!isFilesOnly(o)&&!isFilesFromHtml(o)?null:Array.from(o.files)}function createFakeFileSlice(o){return new Slice(Fragment.from(fileType(o).create({href:"fake",download:"file"})),0,0)}class YfmFilesPasteUploadProcess extends YfmFilesUploadProcessBase{constructor(s,a,l){super(s,a,l.uploadHandler);oe(this,"pos");oe(this,"createImage");this.pos=l.pos;const{schema:u}=this.view.state;imageType(u)&&(this.createImage=createImageNode(imageType(u),{needDimensions:l.needToSetDimensionsForUploadedImages},this.logger))}getSkeletonInitPos(){return this.pos??this.view.state.tr.selection.from}async createPMNode(s){return isImageFile(s.file)&&this.createImage?this.createImage(s):this.createFile(s)}}const b$m=cn("file-form");var TabId;(function(o){o.Attach="attach",o.Link="link"})(TabId||(TabId={}));const FileForm=({className:o,autoFocus:e,onCancel:s,onSubmit:a,onAttach:l,loading:u,uploadHint:c})=>{const[d,h]=reactExports.useState(()=>isFunction(l)?TabId.Attach:TabId.Link),[p,m]=reactExports.useState(""),[g,y]=reactExports.useState(""),A=isFunction(l);reactExports.useLayoutEffect(()=>{!A&&d===TabId.Attach&&h(TabId.Link)},[A,d]);const T=()=>{a({src:p.trim(),name:g.trim()})},E=enterKeyHandler(T);return jsxRuntimeExports.jsxs(Form.Form,{className:b$m(null,[o]),children:[A&&jsxRuntimeExports.jsx(Tabs,{activeTab:d,onSelectTab:h,items:[{id:TabId.Attach,title:i18n$d("common_tab_attach")},{id:TabId.Link,title:i18n$d("common_tab_link")}]}),d===TabId.Attach&&l&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Form.Layout,{children:c??i18n$d("file_upload_help")}),jsxRuntimeExports.jsx(Form.Footer,{onCancel:s,children:jsxRuntimeExports.jsx(ButtonAttach,{multiple:!0,buttonProps:{size:"s",view:"action",loading:u},onUpdate:l,children:i18n$d("common_action_upload")})})]}),d===TabId.Link&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Form.Layout,{children:[jsxRuntimeExports.jsx(Form.Row,{label:i18n$d("common_link"),help:i18n$d("file_link_help"),control:jsxRuntimeExports.jsx(TextInputFixed,{size:"s",view:"normal",value:p,onUpdate:m,placeholder:"https://",autoFocus:e,className:b$m("input",{type:"link"}),onKeyPress:E})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$d("file_name"),control:jsxRuntimeExports.jsx(TextInput,{size:"s",view:"normal",value:g,onUpdate:y,className:b$m("input",{type:"name"}),onKeyPress:E})})]}),jsxRuntimeExports.jsx(Form.Footer,{onCancel:s,onSubmit:T})]})]})},b$l=cn("file-placeholder"),placement$4=["bottom-start","top-start","bottom-end","top-end"],FilePlaceholder=({onCancel:o,onSubmit:e,onAttach:s})=>{const a=useMountedState(),[l,u,c]=useBooleanState(!1),[d,h]=useElementState(),p=reactExports.useCallback(m=>{s&&a()&&(u(),s(m).finally(()=>{a()&&c()}))},[a,s,u,c]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{ref:h,className:b$l(),children:jsxRuntimeExports.jsxs("a",{href:"#",className:"yfm-file",children:[jsxRuntimeExports.jsx("span",{className:"yfm-file__icon"}),i18n$c("file")]})}),jsxRuntimeExports.jsx(Popup,{open:!0,modal:!0,onOpenChange:o,anchorElement:d,placement:placement$4,children:jsxRuntimeExports.jsx(FileForm,{autoFocus:!0,loading:l,onCancel:o,onSubmit:e,onAttach:s&&p})})]})},addWidget=(o,e,s)=>new FileWidgetDescriptor(o.selection.from,e,s).applyTo(o),removeWidget=removeDecoration;class FileWidgetDescriptor extends ReactWidgetDescriptor{constructor(s,a,l){super(s,"file_placeholder");oe(this,"domElem");oe(this,"deps");oe(this,"uploadFiles");oe(this,"widgetHandler",null);this.uploadFiles=l,this.domElem=document.createElement("span"),this.deps=a}getWidgetHandler(s,a){return this.widgetHandler||(this.widgetHandler=new FileWidgetHandler({view:s,getPos:a,decoId:this.id,uploadFiles:this.uploadFiles},this.deps)),this.widgetHandler}getDomElem(){return this.domElem}renderReactElement(s,a){return this.getWidgetHandler(s,a).renderWidgetView(s,a)}remove(){super.remove(),this.widgetHandler=null}}class FileWidgetHandler{constructor({decoId:e,view:s,getPos:a,uploadFiles:l},u){oe(this,"view");oe(this,"getPos");oe(this,"decoId");oe(this,"uploadFiles");oe(this,"normalizeUrl");oe(this,"onCancel",()=>{this.view.dispatch(removeDecoration(this.view.state.tr,this.decoId)),this.view.focus()});oe(this,"onSubmit",e=>{var u;if(!e.src||!e.name)return;const s=(u=this.normalizeUrl(e.src))==null?void 0:u.url,a=e.name;if(!s)return;const l=fileType(this.view.state.schema).create({href:s,download:a});this.insertNodes([l])});oe(this,"onAttach",async e=>{if(!this.uploadFiles)return;const{view:s}=this;new YfmFileWidgetUploadProcess(s,e,this.uploadFiles,this.getPos()).run(),s.dispatch(removeWidget(s.state.tr,this.decoId)),s.focus()});this.decoId=e,this.view=s,this.getPos=a,this.uploadFiles=l,this.normalizeUrl=normalizeUrlFactory(u)}renderWidgetView(e,s){return this.view=e,this.getPos=s,jsxRuntimeExports.jsx(FilePlaceholder,{onCancel:this.onCancel,onSubmit:this.onSubmit,onAttach:this.uploadFiles&&this.onAttach})}insertNodes(e){let s=this.view.state.tr;s=s.insert(s.mapping.map(this.getPos()),e),s=removeWidget(s,this.decoId),this.view.dispatch(s),this.view.focus()}}class YfmFileWidgetUploadProcess extends YfmFilesUploadProcessBase{constructor(s,a,l,u){super(s,a,l);oe(this,"skeletonInitPos");this.skeletonInitPos=u}getSkeletonInitPos(){return this.skeletonInitPos}}const addFileWidget=(o,e)=>({isEnable:s=>s.selection.empty,run(s,a){a(addWidget(s.tr,o,e))}}),addFileAction="addFile",YfmFileWidget=(o,e)=>{o.addAction(addFileAction,s=>addFileWidget(s,e.fileUploadHandler))},YfmFile=(o,e={})=>{o.use(YfmFileSpecs,e),o.use(YfmFileWidget,e),e.fileUploadHandler&&o.use(YfmFilePaste,{fileUploadHandler:e.fileUploadHandler,needToSetDimensionsForUploadedImages:!!e.needToSetDimensionsForUploadedImages})},toHeading$1=o=>(e,s,a)=>{const l={},u=findParentNodeOfType(headingType(e.schema))(e.selection);if(u){if(u.node.attrs[headingLevelAttr]===o)return toParagraph(e,s);Object.assign(l,u.node.attrs)}return l[YfmHeadingAttr.Level]=o,setBlockType(headingType(e.schema),l)(e,s)},headingAction=o=>{const e=toHeading$1(o);return{isActive:hasParentHeading(o),isEnable:e,run:e}},YfmHeading=(o,e)=>{o.use(YfmHeadingSpecs,e),o.addKeymap(()=>{const{h1Key:s,h2Key:a,h3Key:l,h4Key:u,h5Key:c,h6Key:d}=e??{},h={Backspace:resetHeading};return s&&(h[s]=withLogAction("heading1",toHeading$1(1))),a&&(h[a]=withLogAction("heading2",toHeading$1(2))),l&&(h[l]=withLogAction("heading3",toHeading$1(3))),u&&(h[u]=withLogAction("heading4",toHeading$1(4))),c&&(h[c]=withLogAction("heading5",toHeading$1(5))),d&&(h[d]=withLogAction("heading6",toHeading$1(6))),h}).addInputRules(({schema:s})=>({rules:[headingRule(headingType(s),6)]})),o.addAction(HeadingAction.ToH1,()=>headingAction(1)).addAction(HeadingAction.ToH2,()=>headingAction(2)).addAction(HeadingAction.ToH3,()=>headingAction(3)).addAction(HeadingAction.ToH4,()=>headingAction(4)).addAction(HeadingAction.ToH5,()=>headingAction(5)).addAction(HeadingAction.ToH6,()=>headingAction(6))},createYfmNoteNode=o=>(e,s)=>noteType(o).create({[NoteAttrs.Class]:`yfm-note yfm-accent-${e}`,[NoteAttrs.Type]:e},[noteTitleType(o).createAndFill(),noteContentType(o).createAndFill({},s)]),createYfmNote=(o,e)=>{const s=findParentNodeOfType(o.schema.nodes.paragraph)(o.selection);if(s){const a=createYfmNoteNode(o.schema)("info",s.node);return e==null||e(o.tr.replaceWith(s.pos,s.pos+s.node.nodeSize,a)),!0}return!1},toYfmNote={isEnable(o){return createYfmNote(o)},run(o,e){createYfmNote(o,e)}},exitFromNoteTitle=(o,e)=>{const{selection:s,schema:a}=o;if(!isTextSelection(s))return!1;const{$cursor:l}=s;if(!l||!isSameNodeType(l.parent,noteTitleType(a))||!isSameNodeType(l.node(-1),noteType(a)))return!1;const u=l.node(-1),c=findFirstTextblockChild(getNoteContent(u));if(!c)return!1;const h=l.start(-1)+u.firstChild.nodeSize+c.offset;return e==null||e(o.tr.setSelection(TextSelection.create(o.doc,h))),!0},liftEmptyBlockFromNote=(o,e)=>{const{selection:s,schema:a}=o;if(!isTextSelection(s))return!1;const{$cursor:l}=s;return!l||l.parent.content.size?!1:l.depth>2&&isSameNodeType(l.node(-1),noteContentType(a))&&isSameNodeType(l.node(-2),noteType(a))&&l.node(-1).childCount>1&&l.after()===l.end(-1)?(e&&e(o.tr.lift(l.blockRange(),l.depth-3).scrollIntoView()),!0):!1};function getNoteContent(o){const e=[];return o.forEach(s=>e.push(s)),Fragment.from(e.slice(1))}const removeNote=(o,e,s)=>{const{selection:a,schema:l}=o;if(!isTextSelection(a))return!1;const{$cursor:u}=a;if(!u||!isSameNodeType(u.parent,noteTitleType(l))||!isSameNodeType(u.node(-1),noteType(l)))return!1;if(s!=null&&s.endOfTextblock("backward",o)){if(e){const c=u.parent,d=u.node(-1),h=d.lastChild,p=Fragment.from(pType(l).create(null,c.content)).append(h.content),m=u.before(-1),g=m+d.nodeSize,y=o.tr.replaceWith(m,g,p);e(y.setSelection(TextSelection.create(y.doc,m+1)))}return!0}return!1},backToNoteTitle=(o,e,s)=>{const{selection:a,schema:l}=o;if(!isTextSelection(a))return!1;const{$cursor:u}=a;if(!u||!isSameNodeType(u.parent,pType(l))||!isSameNodeType(u.node(-1),noteContentType(l))||!isSameNodeType(u.node(-2),noteType(l)))return!1;const c=u.node(-2),d=u.node(-1);if(u.parent!==d.firstChild)return!1;if(s!=null&&s.endOfTextblock("backward",o)){if(e){const h=c.firstChild;e(o.tr.setSelection(TextSelection.create(o.doc,u.before(-2)+h.nodeSize)))}return!0}return!1},info$1="Note",tip$1="Tip",warning$1="Warning",alert$1="Alert",remove$2="Remove",en$d={info:info$1,tip:tip$1,warning:warning$1,alert:alert$1,remove:remove$2},info="",tip="",warning="",alert="",remove$1="",ru$d={info,tip,warning,alert,remove:remove$1},KEYSET$8="yfm-note",i18n$8=registerKeyset(KEYSET$8,{en:en$d,ru:ru$d});var YfmNoteType;(function(o){o.tip="tip",o.info="info",o.warning="warning",o.alert="alert"})(YfmNoteType||(YfmNoteType={}));const isEnable=()=>!0,isActive=()=>!1,changeType=o=>({node:e,pos:s,dispatch:a,tr:l})=>{a(l.setNodeMarkup(s,null,{...e.attrs,class:`yfm-note yfm-accent-${o}`,"note-type":o}))},yfmNoteTooltipPlugin=({actions:o,schema:e})=>new Plugin({view(s){return new BaseTooltipPluginView(s,{idPrefix:"yfm-note-tooltip",nodeType:noteType(s.state.schema),popupPlacement:["bottom","top"],content:(a,{node:l,pos:u})=>jsxRuntimeExports.jsx(Toolbar,{editor:o,focus:()=>a.focus(),className:"yfm g-md-yfm-note-toolbar",qa:"g-md-toolbar-yfm-note",data:[[YfmNoteType.info,YfmNoteType.tip,YfmNoteType.warning,YfmNoteType.alert].map(c=>({id:`note-type-${c}`,icon:{data:CircleInfo},title:i18n$8(c),type:ToolbarDataType.SingleButton,isActive,isEnable,exec:()=>changeType(c)({schema:e,pos:u,node:l,tr:a.state.tr,dispatch:a.dispatch.bind(a)})})),[{id:"note-remove",icon:{data:TrashBin},title:i18n$8("remove"),type:ToolbarDataType.SingleButton,isActive,isEnable,exec:()=>removeNode({pos:u,node:l,tr:a.state.tr,dispatch:a.dispatch.bind(a)})}]]})})}}),noteAction="toYfmNote",YfmNote=(o,e)=>{if(o.use(YfmNoteSpecs,e),o.addKeymap(()=>({Enter:chainCommands(exitFromNoteTitle,liftEmptyBlockFromNote),Backspace:chainCommands(backToNoteTitle,removeNote)})).addAction(noteAction,()=>toYfmNote).addInputRules(({schema:s})=>({rules:[nodeInputRule(/(?:^)({% note)\s$/,noteType(s).createAndFill(),1)]})),e!=null&&e.yfmNoteKey){const{yfmNoteKey:s}=e;o.addKeymap(()=>({[s]:withLogAction("yfm_note",createYfmNote)}))}o.addPlugin(yfmNoteTooltipPlugin)},createYfmTableCommand=(o,e)=>{if(e){const{schema:s}=o,a=yfmTableType(s),l=yfmTableRowType(s),u=yfmTableBodyType(s),c=yfmTableCellType(s),d=a.create(null,u.create(null,[l.create(null,[c.create(null,pType(s).create()),c.create(null,pType(s).create())]),l.create(null,[c.create(null,pType(s).create()),c.create(null,pType(s).create())])]));e(o.tr.replaceSelectionWith(d).scrollIntoView())}return!0},createYfmTable={isEnable:createYfmTableCommand,run:createYfmTableCommand},removeCellNodeContent=(o,e)=>{const s=o.selection;if(!isNodeSelection(s))return!1;const a=s.node;if(isTableRowNode(a))return e==null||e(o.tr.deleteSelection()),!0;if(isTableCellNode(a)){if(e){const l=s.from+1,u=s.to-1;let c=o.tr.delete(l,u);c=c.setSelection(TextSelection.create(c.doc,l)),e(c)}return!0}return!1},clearSelectedCells=(o,e)=>{var g;const s=o.selection;if(!isTextSelection(s))return!1;const{$from:a,$to:l}=s,u=a.sharedDepth(l.pos),c=a.node(u),{schema:d}=c.type;if(!isAnyOfTypes(c,[yfmTableType(d),yfmTableBodyType(d),yfmTableRowType(d)]))return!1;const h=findTablePos(a,u);if(typeof h!="number")return!1;const p=a.doc.nodeAt(h);if(!p)return!1;const m=(g=TableDesc.create(p))==null?void 0:g.bind(h);if(!m)return!1;if(e){const y=o.tr,A=range$1(0,m.rows).flatMap(E=>m.getPosForRowCells(E)).filter(E=>E.type==="real");if(a.pos<=A[0].from+2&&l.pos>=A[A.length-1].to-2)y.replaceWith(h,h+p.nodeSize,pType(d).create()),y.setSelection(TextSelection.create(y.doc,h+1));else for(const E of A){if(a.pos>E.to)continue;if(l.pos<E.from)break;const v=Math.max(a.pos,E.from+1),_=Math.min(l.pos,E.to-1);y.delete(y.mapping.map(v),y.mapping.map(_)),y.setSelection(TextSelection.near(y.doc.resolve(y.mapping.map(_)),-1))}e(y.scrollIntoView())}return!0},backspaceCommand=chainCommands(removeCellNodeContent,clearSelectedCells);function isAnyOfTypes(o,e){return e.some(s=>s===o.type)}function findTablePos(o,e){let a=e;for(;a>=0&&e-a<=5;){const l=o.node(a);if(isTableNode(l))return o.before(a);a--}return null}function isGapCursorSelection(o){return o instanceof GapCursorSelection}class GapCursorSelection extends Selection$1{constructor(s,a){super(s,s);qe(this,qi);oe(this,"meta");oe(this,"selectionName","GapCursorSelection");$e(this,qi,s),this.meta=a==null?void 0:a.meta}get $pos(){return pe(this,qi)}get pos(){return pe(this,qi).pos}eq(s){return isGapCursorSelection(s)&&this.pos===s.pos&&this.$pos.doc.eq(s.$pos.doc)}map(s,a){const l=s.resolve(a.map(this.head));return Selection$1.near(l)}}qi=new WeakMap;const isUp=o=>o==="left"||o==="up";function isTextblock(o){return o.isTextblock&&!isCodeBlock(o)}function isEdgeTextblock(o,e){const s=o.index(o.depth-1);return e==="before"?s===0:e==="after"?s===o.node(o.depth-1).childCount-1:!1}const findNextFakeParaPosForGapCursorSelection=({$pos:o},e)=>o.pos!==o.start()&&o.pos!==o.end()?null:findFakeParaPosClosestToPos(o,o.depth,e),findFakeParaPosForNodeSelection=(o,e)=>{const s=o.node;if(s.isInline||isTextblock(s))return null;const{$from:a}=o,l=a.index(),u=a.parent;if(e==="before"){if(u.firstChild===s||!isTextblock(u.child(l-1)))return a}else if(e==="after"&&(u.lastChild===s||!isTextblock(u.child(l+1))))return o.$to;return null},findFakeParaPosForCodeBlock=(o,e)=>{if(!isCodeBlock(o.parent))return null;let s=-1;const a=o.index(o.depth-1),l=o.node(o.depth-1);return e==="before"?(a===0||!isTextblock(l.child(a-1)))&&(s=o.before()):e==="after"&&(a===l.childCount-1||!isTextblock(l.child(a+1)))&&(s=o.after()),s!==-1?o.doc.resolve(s):null},findFakeParaPosForTextSelection=(o,e)=>{const s=e==="before"?o.$from:o.$to;if(s.parent.isInline)return null;const a=findFakeParaPosForCodeBlock(s,e);return a||(isEdgeTextblock(s,e)?findFakeParaPosClosestToPos(s,s.depth-1,e):null)};function findFakeParaPosClosestToPos(o,e,s){for(e++;--e>0;){const a=o.node(e),l=o.index(e-1),u=o.node(e-1),c=l===0,d=l===u.childCount-1,h=a.type.spec.complex==="inner"||a.type.spec.complex==="leaf",p=u.type.spec.gapcursor===!1;if(h||p){if(s==="before"&&c||s==="after"&&d)continue;return null}if(s==="before"){if(c||!isTextblock(u.child(l-1)))return o.doc.resolve(o.before(e))}else if(s==="after"&&(d||!isTextblock(u.child(l+1))))return o.doc.resolve(o.after(e));return null}return null}const arrow=o=>(e,s,a)=>{var d;const{selection:l}=e,u=isUp(o)?"before":"after";let c=null;if(isGapCursorSelection(l)){if(((d=l.meta)==null?void 0:d.direction)!==u)return!1;if(o==="up"&&l.pos===0||o==="down"&&l.pos===e.doc.nodeSize-2)return!0;c=findNextFakeParaPosForGapCursorSelection(l,u)}return isNodeSelection(l)&&(c=findFakeParaPosForNodeSelection(l,u)),isTextSelection(l)&&(a!=null&&a.endOfTextblock(o))&&(c=findFakeParaPosForTextSelection(l,u)),c?(s==null||s(createFakeParagraph(e.tr,c,u).scrollIntoView()),!0):!1};function createFakeParagraph(o,e,s){return o.setSelection(new GapCursorSelection(e,{meta:{direction:s}}))}const arrowLeft=arrow("left"),arrowDown=arrow("down"),arrowUp=arrow("up"),arrowRight=arrow("right"),backspace=(o,e)=>{const s=o.selection;if(isGapCursorSelection(s)){const a=Selection$1.findFrom(s.$pos,-1);if(a)return e==null||e(o.tr.setSelection(a).scrollIntoView()),!0}return!1},selection=()=>new Plugin({props:{handleKeyDown:keydownHandler({ArrowLeft:arrowLeft,ArrowRight:arrowRight,ArrowUp:arrowUp,ArrowDown:arrowDown,Backspace:backspace}),decorations(o){return getDecorations(o.tr)},handleClickOn(o,e,s,a,l,u){return u&&s.type.spec.allowSelection?selectNode(a)(o.state,o.dispatch):!1}},view(o){return reselect(o),{update(e){reselect(e)}}}}),reselect=o=>{const{selection:e}=o.state;return!e.empty&&isNodeSelection(e)&&!isSelectableNode(e.node)?selectParentNode(o.state,o.dispatch):!1},selectNode=o=>(e,s)=>(s&&s(e.tr.setSelection(new NodeSelection(e.doc.resolve(o)))),!0),getDecorations=o=>{if(o.selection instanceof NodeSelection)return DecorationSet.create(o.doc,[Decoration$1.node(o.selection.from,o.selection.to,{class:"pm-node-selected"})]);if(o.selection instanceof TextSelection||o.selection instanceof AllSelection){const e=getTopLevelNodesFromSelection(o.selection,o.doc).map(({node:s,pos:a})=>Decoration$1.node(a,a+s.nodeSize,{class:"pm-node-selected"}));return DecorationSet.create(o.doc,e)}return DecorationSet.empty},getTopLevelNodesFromSelection=(o,e)=>{const s=[];if(o.from!==o.to){const{from:a,to:l}=o;e.nodesBetween(a,l,(u,c)=>{const d=a<=c&&c+u.nodeSize<=l;return u&&!u.isText&&u.type.spec.selectable!==!1&&d?(s.push({node:u,pos:c}),!1):!0})}return s},Selection=o=>{o.addPlugin(selection)};function goToNextRow(o){return(e,s,a)=>{const l=findParentTable$1(e.selection),u=findParentTableRow(e.selection),c=findParentTableCell(e.selection);if(!a||!atEndOfCell(a,o==="up"?-1:1)||!l||!u||!c)return!1;const d=findChildTableRows(l.node),h=d.findIndex(E=>E.node===u.node);let p;for(let E=0;E<u.node.childCount;E++)u.node.child(E)===c.node&&(p=E);if(p===void 0)return!1;const m=h+(o==="up"?-1:1);if(m<0||m>=d.length){const E=e.selection;if(isTextSelection(E)&&a.endOfTextblock(o)){const[v,_]=o==="up"?["before",E.$from]:["after",E.$to],w=findFakeParaPosForTextSelection(E,v)??findFakeParaPosClosestToPos(_,_.depth-2,v);if(w)return s==null||s(createFakeParagraph(e.tr,w,v).scrollIntoView()),!0}return!1}const g=d[m],A=findChildTableCells(g.node)[p],T=l.start+g.pos+A.pos+3;return s==null||s(e.tr.setSelection(new TextSelection(e.doc.resolve(T))).scrollIntoView()),!0}}const YfmTableDecorationTypeKey="__yfm-table-deco-type",YfmTableDecorationUniqKey="__yfm-table-deco-uniq-key";var YfmTableDecorationType;(function(o){o.FocusTable="table--focus",o.ShowRowControl="cell--show-row-control",o.ShowColumnControl="cell--show-column-control",o.OpenRowMenu="cell--open-row-menu",o.OpenColumnMenu="cell--open-column-menu",o.ActivateRowCells="cell--active-row",o.ActivateColumnCells="cell--active-column",o.ActivateDangerRowCells="cell--danger-row",o.ActivateDangerColumnCells="cell--danger-column"})(YfmTableDecorationType||(YfmTableDecorationType={}));const b$k=cn("yfm-table-selected-cell"),key$1=new PluginKey("yfm-table-dnd-decos");function activateRows(o,e){const s={action:"row-control-active",...e};return o.setMeta(key$1,s),o}function deactivateRow(o,e){const s={action:"row-control-non-active",uniqKey:e};return o.setMeta(key$1,s),o}function activateColumns(o,e){const s={action:"column-control-active",...e};return o.setMeta(key$1,s),o}function deactivateColumn(o,e){const s={action:"column-control-non-active",uniqKey:e};return o.setMeta(key$1,s),o}function selectDraggedRow(o,e){const s={action:"drag-rows",cells:e};return o.setMeta(key$1,s),o}function selectDraggedColumn(o,e){const s={action:"drag-columns",cells:e};return o.setMeta(key$1,s),o}function clearAllSelections(o){const e={action:"hide"};return o.setMeta(key$1,e),o}const yfmTableDndPlugin=()=>new Plugin({key:key$1,state:{init(){return DecorationSet.empty},apply(o,e){const s=o.getMeta(key$1);if((s==null?void 0:s.action)==="hide")return DecorationSet.empty;if((s==null?void 0:s.action)==="row-control-active"){const{controlCell:a,cells:l,uniqKey:u}=s;return DecorationSet.create(o.doc,[Decoration$1.node(a.from,a.to,{},{[YfmTableDecorationUniqKey]:u,[YfmTableDecorationTypeKey]:YfmTableDecorationType.OpenRowMenu}),...l.map(c=>Decoration$1.node(c.from,c.to,{class:b$k(c.mods)},{[YfmTableDecorationUniqKey]:u,[YfmTableDecorationTypeKey]:YfmTableDecorationType.ActivateRowCells}))])}if((s==null?void 0:s.action)==="row-control-non-active"){const{uniqKey:a}=s,l=e.find(void 0,void 0,u=>u[YfmTableDecorationUniqKey]===a);return e.remove(l).map(o.mapping,o.doc)}if((s==null?void 0:s.action)==="column-control-active"){const{controlCell:a,cells:l,uniqKey:u}=s;return DecorationSet.create(o.doc,[Decoration$1.node(a.from,a.to,{},{[YfmTableDecorationUniqKey]:u,[YfmTableDecorationTypeKey]:YfmTableDecorationType.OpenColumnMenu}),...l.map(c=>Decoration$1.node(c.from,c.to,{class:b$k(c.mods)},{[YfmTableDecorationUniqKey]:u,[YfmTableDecorationTypeKey]:YfmTableDecorationType.ActivateColumnCells}))])}if((s==null?void 0:s.action)==="column-control-non-active"){const{uniqKey:a}=s,l=e.find(void 0,void 0,u=>u[YfmTableDecorationUniqKey]===a);return e.remove(l).map(o.mapping,o.doc)}return(s==null?void 0:s.action)==="drag-rows"?DecorationSet.create(o.doc,s.cells.map(a=>Decoration$1.node(a.from,a.to,{class:b$k(a.mods,"dragged-cell")}))):(s==null?void 0:s.action)==="drag-columns"?DecorationSet.create(o.doc,s.cells.map(a=>Decoration$1.node(a.from,a.to,{class:b$k(a.mods,"dragged-cell")}))):e.map(o.mapping,o.doc)}},props:{decorations(o){return this.getState(o)}}}),removeYfmTable=(o,e,s,a)=>{if(!a)return!1;const{tablePos:l,tableNode:u}=a;return e&&removeNode({node:u,pos:l,tr:o.tr,dispatch:e}),!0},clearCells=o=>(e,s)=>{var h;const a=e.doc.nodeAt(o.tablePos),l=a&&((h=TableDesc.create(a))==null?void 0:h.bind(o.tablePos));if(!l)return!1;if(!s)return!0;const{tr:u}=e,c=pType(e.schema),d=p=>{for(const m of p)m.type==="real"&&u.replaceWith(u.mapping.map(m.from+1),u.mapping.map(m.to-1),c.create())};if(o.rows)for(const p of o.rows){const m=l.getPosForRowCells(p);d(m)}if(o.cols)for(const p of o.cols){const m=l.getPosForColumn(p);d(m)}return u.docChanged&&s(u),!0},insertEmptyColumn=o=>(e,s)=>{var c;const a=e.doc.nodeAt(o.tablePos),l=a&&((c=TableDesc.create(a))==null?void 0:c.bind(o.tablePos));if(!l)return!1;const u=Math.min(Math.max(o.colIndex,0),l.cols);if(s){const d=[],h=[];if(u===0)d.push(...l.getPosForColumn(0).map(g=>getCellPos$2(g,"start")));else if(u===l.cols)d.push(...l.getPosForColumn(l.cols-1).map(g=>getCellPos$2(g,"end")));else for(let g=0;g<l.rows;g++){const y=l.base.rowsDesc[g].cells[u];y.type==="virtual"&&y.colspan&&y.colspan[1]!==u?h.push(y.colspan):d.push(getCellPos$2(l.getPosForCell(g,u),"start"))}const{tr:p}=e,m=yfmTableCellType(e.schema);for(const[g,y]of uniqWith(h,isEqual$1)){const A=l.base.rowsDesc[g].cells[y],T=l.getPosForCell(g,y);p.setNodeAttribute(T.from,"colspan",A.colspan+1)}for(const g of d)p.insert(p.mapping.map(g),m.createAndFill());p.setSelection(TextSelection.near(p.doc.resolve(d[0]),1)),s(p.scrollIntoView())}return!0};function getCellPos$2(o,e){return o.type==="virtual"?o.closestPos:e==="start"?o.from:o.to}const insertEmptyRow$1=o=>(e,s)=>{var c;const a=e.doc.nodeAt(o.tablePos),l=a&&((c=TableDesc.create(a))==null?void 0:c.bind(o.tablePos));if(!l)return!1;const u=Math.min(Math.max(o.rowIndex,0),l.rows);if(s){let d,h=l.cols;const p=[];if(u===0||u===l.rows)d=u===0?l.getPosForRow(0).from:l.getPosForRow(l.rows-1).to;else{d=l.getPosForRow(u).from;for(let g=0;g<l.cols;g++){const y=l.base.rowsDesc[u].cells[g];y.type==="virtual"&&y.rowspan&&(h--,p.push(y.rowspan))}}const{tr:m}=e;for(const[g,y]of uniqWith(p,isEqual$1)){const A=l.base.rowsDesc[g].cells[y],T=l.getPosForCell(g,y);m.setNodeAttribute(T.from,"rowspan",A.rowspan+1)}m.insert(d,createSimpleRow(e.schema,h)),m.setSelection(TextSelection.near(m.doc.resolve(d),1)),s(m.scrollIntoView())}return!0},createSimpleRow=(o,e)=>{const s=yfmTableRowType(o),a=yfmTableCellType(o);return s.create(null,range$1(0,e).map(()=>a.createAndFill()))},removeColumnRange=o=>(e,s)=>{var c,d,h,p;const a=e.doc.nodeAt(o.tablePos),l=a&&((c=TableDesc.create(a))==null?void 0:c.bind(o.tablePos));if(!l||l.cols<2)return!1;const u=l.base.getColumnRanges()[o.rangeIdx];if(!u)return!1;if(s){const{tr:m}=e,g={};for(let y=0;y<l.rows;y++){for(let E=u.startIdx;E<=u.endIdx;E++){const v=l.base.rowsDesc[y].cells[E];v.type==="virtual"&&((d=v.colspan)==null?void 0:d[0])===y&&v.colspan[1]<u.startIdx&&(g[h=`${v.colspan[0]},${v.colspan[1]}`]??(g[h]=0),g[`${v.colspan[0]},${v.colspan[1]}`]--)}const A=getCellPos$1(l.getPosForCell(y,u.startIdx),"start"),T=getCellPos$1(l.getPosForCell(y,u.endIdx),"end");if(m.replaceWith(m.mapping.map(A),m.mapping.map(T),Fragment.empty),u.endIdx+1<l.cols){const E=l.base.rowsDesc[y].cells[u.endIdx+1];if(E.type==="virtual"&&((p=E.colspan)==null?void 0:p[0])===y&&E.colspan[1]>=u.startIdx){const v=l.getPosForCell(y,u.endIdx+1).closestPos,_=l.base.rowsDesc[E.colspan[0]].cells[E.colspan[1]],w=_.colspan-(u.endIdx+1-E.colspan[1]);m.insert(m.mapping.map(v),yfmTableCellType(e.schema).createAndFill({colspan:w>1?w:null,rowspan:_.rowspan?_.rowspan:null}))}}}updateColspan(m,l,g),s(m)}return!0};function getCellPos$1(o,e){return o.type==="virtual"?o.closestPos:e==="start"?o.from:o.to}function updateColspan(o,e,s){for(const a of keys$1(s)){const[l,u]=a.split(","),c=Number.parseInt(l,10),d=Number.parseInt(u,10),h=e.base.rowsDesc[c].cells[d];if(h.type==="real"&&h.colspan){const p=e.getPosForCell(c,d),m=h.colspan+s[a];o.setNodeAttribute(o.mapping.map(p.from),"colspan",m>1?m:null)}}}function keys$1(o){return Object.keys(o)}const removeRowRange=o=>(e,s)=>{var c,d,h,p;const a=e.doc.nodeAt(o.tablePos),l=a&&((c=TableDesc.create(a))==null?void 0:c.bind(o.tablePos));if(!l||l.rows<2)return!1;const u=l.base.getRowRanges()[o.rangeIdx];if(!u)return!1;if(s){const{tr:m}=e;{const y=l.getPosForRow(u.startIdx).from,A=l.getPosForRow(u.endIdx).to;m.replaceWith(y,A,Fragment.empty)}const g={};for(let y=0;y<l.cols;y++){for(let A=u.startIdx;A<=u.endIdx;A++){const T=l.base.rowsDesc[A].cells[y];T.type==="virtual"&&((d=T.rowspan)==null?void 0:d[1])===y&&T.rowspan[0]<u.startIdx&&(g[h=`${T.rowspan[0]},${T.rowspan[1]}`]??(g[h]=0),g[`${T.rowspan[0]},${T.rowspan[1]}`]--)}if(u.endIdx+1<l.rows){const A=l.base.rowsDesc[u.endIdx+1].cells[y];if(A.type==="virtual"&&((p=A.rowspan)==null?void 0:p[1])===y&&A.rowspan[0]>=u.startIdx){const T=l.getPosForCell(u.endIdx+1,y).closestPos,E=l.base.rowsDesc[A.rowspan[0]].cells[A.rowspan[1]],v=E.rowspan-(u.endIdx+1-A.rowspan[0]);m.insert(m.mapping.map(T),yfmTableCellType(e.schema).createAndFill({rowspan:v>1?v:null,colspan:E.colspan?E.colspan:null}))}}}updateRowspan(m,l,g),s(m)}return!0};function updateRowspan(o,e,s){for(const a of keys(s)){const[l,u]=a.split(","),c=Number.parseInt(l,10),d=Number.parseInt(u,10),h=e.base.rowsDesc[c].cells[d];if(h.type==="real"&&h.rowspan){const p=e.getPosForCell(c,d),m=h.rowspan+s[a];o.setNodeAttribute(o.mapping.map(p.from),"rowspan",m>1?m:null)}}}function keys(o){return Object.keys(o)}const b$j=cn("yfm-table-floating-popup"),FloatingPopup=reactExports.forwardRef(function o(e,s){const{anchorElement:a,zIndex:l=1e3,style:u,className:c,qa:d,children:h,floatingStyles:p}=e,m=useFloatingNodeId(),g=useFloatingParentNodeId(),y=reactExports.useMemo(()=>[offset$1(e.offset)],[e.offset]),{refs:A,floatingStyles:T,placement:E,context:{open:v},update:_}=useFloating({nodeId:m,open:e.open,placement:e.placement,middleware:y,whileElementsMounted:autoUpdate});reactExports.useImperativeHandle(s,()=>({forceUpdate:_}),[_]);const{getFloatingProps:w}=useInteractions();reactExports.useEffect(()=>{a!==void 0&&a!==A.reference.current&&A.setReference(a)},[a,A]);function R(k){return g===null?jsxRuntimeExports.jsx(FloatingTree,{children:k}):k}return R(jsxRuntimeExports.jsx(FloatingNode,{id:m,children:v?jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx("div",{ref:A.setFloating,style:{position:"absolute",top:0,left:0,zIndex:l,width:"max-content",pointerEvents:"auto",outline:"none",...p,...T},"data-floating-ui-placement":E,...w(),children:jsxRuntimeExports.jsx("div",{className:b$j(null,c),style:u,"data-qa":d,children:h})})}):null}))}),popupOffset={mainAxis:-9.5},FloatingMenu=function o(e){const{dirtype:s,canDrag:a,anchorElement:l,dropdownItems:u,switcherMouseProps:c,onOpenToggle:d}=e,[h,p]=reactExports.useState(!1),[m,g,y]=useBooleanState(!1),A=h||m,T=s==="row";return jsxRuntimeExports.jsx(FloatingPopup,{open:!0,offset:popupOffset,anchorElement:l,placement:T?"left":"top",floatingStyles:{lineHeight:"initial"},style:{backgroundColor:"transparent"},children:jsxRuntimeExports.jsx(DropdownMenuExport,{onOpenToggle:(...E)=>{p(...E),d(...E)},renderSwitcher:E=>jsxRuntimeExports.jsx(Flex,{centerContent:!0,width:20,height:20,style:{borderRadius:"var(--g-border-radius-xs)",backgroundColor:A?"var(--g-color-base-background)":void 0},onMouseEnter:g,onMouseLeave:y,children:jsxRuntimeExports.jsx(Button,{style:{cursor:a?"grab":void 0,transform:T?"rotate(90deg)":void 0,"--g-button-height":A?void 0:"5px","--_--background-color":A?void 0:"var(--g-color-base-background)"},view:h?"outlined-action":"outlined",pin:A?"round-round":"circle-circle",size:"xs",qa:T?"g-md-yfm-table-row-btn":"g-md-yfm-table-column-btn",...E,...c,children:A?jsxRuntimeExports.jsx(Icon,{data:a?GripHorizontal:Ellipsis}):""})}),popupProps:{zIndex:1010,placement:T?"right-start":"bottom-start"},menuProps:{qa:`g-md-yfm-table-${s}-menu`},items:u})})},FloatingMenuControl=function o({type:e,multiple:s,dndHandler:a,cellElement:l,tableElement:u,onMenuOpenToggle:c,onClearCellsClick:d,onInsertBeforeClick:h,onInsertAfterClick:p,onRemoveRangeClick:m,onRemoveTableClick:g}){const y=reactExports.useMemo(()=>[[{text:i18n$9(`${e}.add.before`),qa:`g-md-yfm-table-action-add-${e}-before`,action:h,iconStart:jsxRuntimeExports.jsx(Icon,{data:e==="row"?ArrowUp:ArrowLeft})},{text:i18n$9(`${e}.add.after`),qa:`g-md-yfm-table-action-add-${e}-after`,action:p,iconStart:jsxRuntimeExports.jsx(Icon,{data:e==="row"?ArrowDown:ArrowRight})}],[{text:i18n$9("cells.clear"),qa:`g-md-yfm-table-${e}-clear-cells`,action:d,iconStart:jsxRuntimeExports.jsx(Icon,{data:BroomMotion})}],[{text:i18n$9(`${e}.remove${s?".multiple":""}`),qa:`g-md-yfm-table-action-remove-${e}`,action:m,iconStart:jsxRuntimeExports.jsx(Icon,{data:Xmark})},{theme:"danger",text:i18n$9("table.remove"),qa:"g-md-yfm-table-action-remove-table",action:g,iconStart:jsxRuntimeExports.jsx(Icon,{data:TrashBin})}]],[e,s,d,p,h,m,g]),A=reactExports.useMemo(()=>getVirtualAnchor(e,u,l),[e,u,l]);return jsxRuntimeExports.jsx(FloatingMenu,{dirtype:e,canDrag:a?a.canDrag():!1,onOpenToggle:c,anchorElement:A,switcherMouseProps:a?{onMouseLeave:a.control_handleMouseLeave,onMouseDown:a.control_handleMouseDown,onMouseMove:a.control_handleMouseMove,onMouseUp:a.control_handleMouseUp}:void 0,dropdownItems:y})};function getVirtualAnchor(o,e,s){if(o==="row")return{contextElement:s,getBoundingClientRect(){const a=s.getBoundingClientRect(),l=e.getBoundingClientRect().toJSON();return l.x+=1,l.width-=2,l.left+=1,l.right-=1,{x:l.x,width:l.width,left:l.left,right:l.right,y:a.y,height:a.height,top:a.top,bottom:a.top}}};if(o==="column")return{contextElement:s,getBoundingClientRect(){const a=s.getBoundingClientRect().toJSON(),l=e.getBoundingClientRect(),u=16,c=a.x+a.width/2;if(c-u<=l.left){const d=a.right-l.left;a.width=(d-u)*2,a.left=a.right-a.width,a.x=a.left}if(c+u>=l.right){const d=l.right-a.left;a.width=(d-u)*2,a.right=a.left+a.width}return a}};throw new Error(`Unknown control type: ${o}`)}function getSelectedCellsForRows(o,e){const s=[];for(let a=e.startIdx;a<=e.endIdx;a++)for(let l=0;l<o.cols;l++){const u=getSelectedCellPos(o,a,l);u&&s.push(u)}return s}function getSelectedCellsForColumns(o,e){const s=[];for(let a=0;a<o.rows;a++)for(let l=e.startIdx;l<=e.endIdx;l++){const u=getSelectedCellPos(o,a,l);u&&s.push(u)}return s}function getSelectedCellPos(o,e,s){const a=o.getPosForCell(e,s);if(a.type==="virtual")return null;const l={from:a.from,to:a.to,mods:{"first-row":e===0,"last-row":e===o.rows-1,"first-column":s===0,"last-column":s===o.cols-1}},{rowspan:u,colspan:c}=o.base.rowsDesc[e].cells[s];return u&&u>0&&e+u>=o.rows&&(l.mods["last-row"]=!0),c&&c>0&&s+c>=o.cols&&(l.mods["last-column"]=!0),l}class DropCursor{constructor(e,s={}){oe(this,"editorView");oe(this,"width");oe(this,"color");oe(this,"class");oe(this,"cursorElem",null);oe(this,"cursorPos",null);this.editorView=e,this.width=s.width??1,this.color=s.color===!1?void 0:s.color||"black",this.class=s.class}getPos(){return this.cursorPos}setPos(e){if(typeof e!="number"||isNaN(e))throw new Error('"val" is not a number');this.cursorPos!==e&&(this.cursorPos=e,this.update())}clear(){var e;this.cursorPos=null,(e=this.cursorElem)==null||e.remove(),this.cursorElem=null}update(){const{cursorPos:e}=this;if(e===null)return;const s=this.editorView.state.doc.resolve(e),a=!s.parent.inlineContent;let l;if(a){const u=s.nodeBefore,c=s.nodeAfter;if(u||c){const d=this.editorView.nodeDOM(e-(u?u.nodeSize:0));if(d){const h=d.getBoundingClientRect();let p=u?h.bottom:h.top;u&&c&&(p=(p+this.editorView.nodeDOM(e).getBoundingClientRect().top)/2),l={left:h.left,right:h.right,top:p-this.width/2,bottom:p+this.width/2}}}}if(!l){const u=this.editorView.coordsAtPos(e);l={left:u.left-this.width/2,right:u.left+this.width/2,top:u.top,bottom:u.bottom}}this.render(l,{isBlock:a})}render(e,{isBlock:s}){const a=this.editorView.dom.offsetParent;this.cursorElem||(this.cursorElem=a.appendChild(document.createElement("div")),this.class&&(this.cursorElem.className=this.class),this.cursorElem.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.cursorElem.style.backgroundColor=this.color)),this.cursorElem.classList.toggle("prosemirror-dropcursor-block",s),this.cursorElem.classList.toggle("prosemirror-dropcursor-inline",!s);let l,u;if(!a||a===document.body&&getComputedStyle(a).position==="static")l=-pageXOffset,u=-pageYOffset;else{const c=a.getBoundingClientRect();l=c.left-a.scrollLeft,u=c.top-a.scrollTop}this.cursorElem.style.left=e.left-l+"px",this.cursorElem.style.top=e.top-u+"px",this.cursorElem.style.width=e.right-e.left+"px",this.cursorElem.style.height=e.bottom-e.top+"px"}}class TableRowDropCursor extends DropCursor{update(){var g;const e=this.getPos();if(e===null)return;const s=this.editorView.state.doc.resolve(e),a=findParentNodeClosestToPos(s,isTableNode);if(!a)return;let l,u;if(s.nodeAfter&&isTableRowNode(s.nodeAfter))l="top",u=e;else if(s.nodeBefore&&isTableRowNode(s.nodeBefore))l="bottom",u=e-s.nodeBefore.nodeSize;else{(g=this.cursorElem)==null||g.remove(),this.cursorElem=null;return}const c=this.editorView.nodeDOM(u),d=this.editorView.nodeDOM(a.pos),h=c.getBoundingClientRect(),p=d.getBoundingClientRect(),m={top:h[l]-this.width/2,bottom:h[l]+this.width/2,left:p.left,right:p.right};this.render(m,{isBlock:!0})}}class TableColumnDropCursor extends DropCursor{update(){var g;const e=this.getPos();if(e===null)return;const s=this.editorView.state.doc.resolve(e),a=findParentNodeClosestToPos(s,isTableNode);if(!a)return;let l,u;if(s.nodeAfter&&isTableCellNode(s.nodeAfter))l="left",u=e;else if(s.nodeBefore&&isTableCellNode(s.nodeBefore))l="right",u=e-s.nodeBefore.nodeSize;else{(g=this.cursorElem)==null||g.remove(),this.cursorElem=null;return}const c=this.editorView.nodeDOM(u),d=this.editorView.nodeDOM(a.pos),h=c.getBoundingClientRect(),p=d.getBoundingClientRect(),m={left:h[l]-this.width/2,right:h[l]+this.width/2,top:p.top,bottom:p.bottom};this.render(m,{isBlock:!0})}}class YfmTableDnDGhost{constructor(e,s){oe(this,"_x");oe(this,"_y");oe(this,"_dndBackgroundElem");oe(this,"_ghostTable");oe(this,"_ghostButton",null);oe(this,"_tblShiftX");oe(this,"_tblShiftY");oe(this,"_btnShiftX",0);oe(this,"_btnShiftY",0);oe(this,"_rafId");this._x=s.initial.clientX,this._y=s.initial.clientY;const a=e.dom.ownerDocument;this._dndBackgroundElem=a.createElement("div"),this._dndBackgroundElem.classList.add("g-md-yfm-table-dnd-cursor-background");{const l=this._buildGhostButton(s);l&&(this._ghostButton=l.domElement,this._btnShiftX=l.shiftX,this._btnShiftY=l.shiftY,this._dndBackgroundElem.appendChild(this._ghostButton))}{const{domElement:l,shiftX:u,shiftY:c}=s.type==="row"?this._buildRowGhost(e,s):this._buildColumnGhost(e,s);this._ghostTable=l,this._tblShiftX=u,this._tblShiftY=c,this._dndBackgroundElem.appendChild(this._ghostTable)}this._updatePositions(),this._rafId=requestAnimationFrame(()=>{a.body.append(this._dndBackgroundElem),this._startAnimation()})}move(e){this._x=e.clientX,this._y=e.clientY}destroy(){cancelAnimationFrame(this._rafId),this._dndBackgroundElem.remove()}_startAnimation(){const e=this;let s={x:e._x,y:e._y};e._rafId=requestAnimationFrame(function a(){(e._x!==s.x||e._y!==s.y)&&(s={x:e._x,y:e._y},e._updatePositions()),e._rafId=requestAnimationFrame(a)})}_updatePositions(){{const e=this._x+this._tblShiftX,s=this._y+this._tblShiftY;this._ghostTable.style.transform=`translate(${e}px, ${s}px)`}if(this._ghostButton){const e=this._x+this._btnShiftX,s=this._y+this._btnShiftY;this._ghostButton.style.transform=`translate(${e}px, ${s}px)`}}_buildRowGhost(e,{tableDesc:s,rangeIdx:a}){let l=0,u=0,c=!1;const d=e.dom.ownerDocument,h=this._buildGhostContainer(e),p=h.appendChild(d.createElement("table")),m=p.appendChild(d.createElement("tbody"));{c=e.domAtPos(s.pos+1).node.scrollLeft>0;const T=e.domAtPos(s.bodyPos+1).node.getBoundingClientRect();m.style.width=T.width+"px"}const g=s.base.getRowRanges()[a];for(let y=g.startIdx;y<=g.endIdx;y++){const A=m.appendChild(d.createElement("tr"));for(let T=0;T<s.cols;T++){const E=s.getPosForCell(y,T);if(E.type==="real"){const v=e.domAtPos(E.from+1).node,_=A.appendChild(v.cloneNode(!0)),w=v.getBoundingClientRect();_.style.width=w.width+"px",_.style.height=w.height+"px",y===g.startIdx&&T===0&&(l=w.left-this._x,u=w.top-this._y)}}}return c&&(l=0),removeIdAttributes(p),{domElement:h,shiftX:l,shiftY:u}}_buildColumnGhost(e,{tableDesc:s,rangeIdx:a}){let l=0,u=0;const c=e.dom.ownerDocument,d=this._buildGhostContainer(e);{const g=s.pos,A=e.domAtPos(g+1).node.getBoundingClientRect();d.style.height=A.height+"px"}const h=d.appendChild(c.createElement("table")),p=h.appendChild(c.createElement("tbody")),m=s.base.getColumnRanges()[a];for(let g=0;g<s.rows;g++){const y=p.appendChild(c.createElement("tr"));for(let A=m.startIdx;A<=m.endIdx;A++){const T=s.getPosForCell(g,A);if(T.type==="real"){const E=e.domAtPos(T.from+1).node,v=y.appendChild(E.cloneNode(!0)),_=E.getBoundingClientRect();v.style.width=_.width+"px",v.style.height=_.height+"px",g===0&&A===m.startIdx&&(d.style.minWidth=_.width+"px",l=_.left-this._x,u=_.top-this._y)}}}return removeIdAttributes(h),{domElement:d,shiftX:l,shiftY:u}}_buildGhostButton({initial:{target:e}}){if(!(e instanceof Element))return null;const s=e.closest(".g-button");if(!s)return null;const a=s.ownerDocument.createElement("div");a.classList.add("g-md-yfm-table-dnd-ghost-button");const l=s.getBoundingClientRect(),u=a.appendChild(s.cloneNode(!0));return removeIdAttributes(u),u.style.cursor="",u.style.pointerEvents="none",{domElement:a,shiftX:l.left-this._x,shiftY:l.top-this._y}}_buildGhostContainer(e){const s=e.dom.ownerDocument.createElement("div");s.setAttribute("aria-hidden","true");const a=Array.from(e.dom.classList).filter(l=>l.startsWith("yfm_"));return s.classList.add("g-md-yfm-table-dnd-ghost","yfm",...a),s}}function removeIdAttributes(o){o.removeAttribute("id"),o.querySelectorAll("[id]").forEach(e=>e.removeAttribute("id"))}const MOUSE_MOVE_DEBOUNCE=100,DRAG_START_THRESHOLD=4;class YfmTableDnDHandler{constructor(e,s){oe(this,"_rowHandler");oe(this,"_columnHandler");this._rowHandler=new YfmTableRowDnDHandler(e,s),this._columnHandler=new YfmTableColumnDnDHandler(e,s)}get row(){return this._rowHandler}get column(){return this._columnHandler}update(e){this._rowHandler.update(e),this._columnHandler.update(e)}destroy(){this._rowHandler.destroy(),this._columnHandler.destroy()}}class YfmTableDnDAbstractHandler{constructor(e,s){oe(this,"_cellGetPos");oe(this,"_editorView");oe(this,"_logger");oe(this,"_dropCursor");oe(this,"__cellNode");oe(this,"__dragging",!1);oe(this,"__destroyed",!1);oe(this,"__dragMouseDown",!1);oe(this,"control_handleMouseDown",e=>{this.__dragMouseDown={pageX:e.pageX,pageY:e.pageY},this._dropCursor.clear()});oe(this,"control_handleMouseUp",()=>{this.__dragMouseDown=!1});oe(this,"control_handleMouseLeave",()=>{this.__dragMouseDown=!1});oe(this,"control_handleMouseMove",e=>{!this._dragMouseDown||!isDragThresholdPassed(this._dragMouseDown,e)||this._editorView.dragging||this._dragging||this._startDragging(e)});this._editorView=e,this.__cellNode=s.cellNode,this._cellGetPos=s.cellGetPos,this._logger=s.logger,this._dropCursor=s.dropCursor}update(e){this.__cellNode=e}destroy(){this.__destroyed=!0,this._clearDragging(!1)}get _cellNode(){return this.__cellNode}get _dragging(){return this.__dragging}set _dragging(e){this.__dragging=e}get _destroyed(){return this.__destroyed}get _dragMouseDown(){return this.__dragMouseDown}_getTableDescAndCellInfo(){var u;const e=this._cellGetPos(),s=e===void 0?void 0:findParentNodeClosestToPos(this._editorView.state.doc.resolve(e),isTableNode),a=s&&((u=TableDesc.create(s.node))==null?void 0:u.bind(s.pos)),l=a==null?void 0:a.base.getCellInfo(this._cellNode);return l?{cellPos:e,table:s,tableDesc:a,cellInfo:l}:null}_clearDragging(e){this.__dragging=!1,this.__dragMouseDown=!1,this._dropCursor.clear(),this._editorView.dragging=null,e!==!1&&this._editorView.dispatch(clearAllSelections(this._editorView.state.tr))}}class YfmTableRowDnDHandler extends YfmTableDnDAbstractHandler{constructor(s,a){super(s,{...a,logger:a.logger.nested({component:"row-dnd-handler"}),dropCursor:new TableRowDropCursor(s,a.dropCursor)});oe(this,"_startDragging",s=>{const a=this._getTableDescAndCellInfo();if(!a)return;const{tableDesc:l,cellInfo:u}=a,c=l.base.getRowRanges(),d=l.base.getRowRangeByRowIdx(u.row);if(!d.safeTopBoundary||!d.safeBottomBoundary)return;this._dragging=!0,this._logger.event({event:"row-drag-start"});{const{tr:y}=this._editorView.state;hideHoverDecos(y),selectDraggedRow(y,getSelectedCellsForRows(a.tableDesc,d)),this._editorView.dispatch(y)}{const y=l.getPosForRow(d.startIdx).from,A=l.getPosForRow(d.endIdx).to;this._editorView.dragging={move:!0,slice:this._editorView.state.doc.slice(y,A,!1)}}const h=c.indexOf(d),p=new YfmTableDnDGhost(this._editorView,{type:"row",initial:s,rangeIdx:h,tableDesc:l}),m=debounceFn(y=>{this._moveDragging(y,{rangeIdx:h,tableDesc:l})},MOUSE_MOVE_DEBOUNCE,{maxWait:MOUSE_MOVE_DEBOUNCE}),g=y=>{p.move(y),m(y)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",()=>{m.flush(),p.destroy(),document.removeEventListener("mousemove",g),this._endDragging(d,l)},{once:!0})})}canDrag(){const s=this._getTableDescAndCellInfo();if(!s)return!1;const a=s.tableDesc.base.getRowRangeByRowIdx(s.cellInfo.row);return a.safeTopBoundary&&a.safeBottomBoundary}_moveDragging(s,{rangeIdx:a,tableDesc:l}){if(this._destroyed||!this._dragging)return;const u=this._getTableDescAndCellInfo();if(!u||u.tableDesc.base!==l.base){this._clearDragging();return}const{tableDesc:c}=u,h=c.base.getRowRanges().map(m=>{const g=c.getPosForRow(m.startIdx).from,y=c.getPosForRow(m.endIdx),A=y.from,T=y.to,v=this._editorView.domAtPos(g+1).node.getBoundingClientRect(),w=this._editorView.domAtPos(A+1).node.getBoundingClientRect();return{pos:{from:g,to:T},rect:{top:v.top,bottom:w.bottom},safeTopBoundary:m.safeTopBoundary,safeBottomBoundary:m.safeBottomBoundary}}),p=(()=>{const{clientY:m}=s,g=h[a],y=a===0,A=a===h.length-1;if(!y&&m<g.rect.top){for(const T of h.slice(0,a).reverse())if(!(m<T.rect.top)&&T.safeTopBoundary)return T.pos.from;return h[0].pos.from}if(!A&&m>g.rect.bottom){for(const T of h.slice(a+1))if(!(m>T.rect.bottom)&&T.safeBottomBoundary)return T.pos.to;return h.at(-1).pos.to}return null})();typeof p=="number"?this._dropCursor.setPos(p):this._dropCursor.clear()}_endDragging(s,a){if(this._destroyed||!this._dragging)return;const l=this._dropCursor.getPos();if(this._clearDragging(),this._logger.event({event:"row-drag-end"}),l===null){this._editorView.focus();return}const u=this._getTableDescAndCellInfo();if(!u||u.tableDesc.base!==a.base){this._editorView.focus();return}const c=u.tableDesc.getPosForRow(s.startIdx).from,d=u.tableDesc.getPosForRow(s.endIdx).to;if(l===c||l===d){this._editorView.focus();return}const{tr:h}=this._editorView.state,p=h.doc.slice(c,d,!1).content;l>c?(h.insert(l,p),h.delete(c,d)):(h.delete(c,d),h.insert(l,p)),h.setSelection(TextSelection.near(h.doc.resolve(h.mapping.map(l+1)),1)),h.scrollIntoView(),this._editorView.dispatch(h),this._editorView.focus()}}class YfmTableColumnDnDHandler extends YfmTableDnDAbstractHandler{constructor(e,s){super(e,{...s,logger:s.logger.nested({component:"column-dnd-handler"}),dropCursor:new TableColumnDropCursor(e,s.dropCursor)})}canDrag(){const e=this._getTableDescAndCellInfo();if(!e)return!1;const s=e.tableDesc.base.getColumnRangeByColumnIdx(e.cellInfo.column);return s.safeLeftBoundary&&s.safeRightBoundary}_startDragging(e){const s=this._getTableDescAndCellInfo();if(!s)return;const{tableDesc:a,cellInfo:l}=s,u=a.base.getColumnRanges(),c=a.base.getColumnRangeByColumnIdx(l.column);if(!c.safeLeftBoundary||!c.safeRightBoundary)return;this._dragging=!0,this._logger.event({event:"column-drag-start"});{const{tr:g}=this._editorView.state;hideHoverDecos(g),selectDraggedColumn(g,getSelectedCellsForColumns(a,c)),this._editorView.dispatch(g)}this._editorView.dragging={move:!0,slice:Slice.empty};const d=u.indexOf(c),h=new YfmTableDnDGhost(this._editorView,{type:"column",initial:e,rangeIdx:d,tableDesc:a}),p=debounceFn(g=>{this._moveDragging(g,{rangeIdx:d,tableDesc:a})},MOUSE_MOVE_DEBOUNCE,{maxWait:MOUSE_MOVE_DEBOUNCE}),m=g=>{h.move(g),p(g)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",()=>{p.flush(),h.destroy(),document.removeEventListener("mousemove",m),this._endDragging(c,a)},{once:!0})}_moveDragging(e,{rangeIdx:s,tableDesc:a}){if(this._destroyed||!this._dragging)return;const l=this._getTableDescAndCellInfo();if(!l||l.tableDesc.base!==a.base){this._clearDragging();return}const{tableDesc:u}=l,d=u.base.getColumnRanges().map(p=>{const m=getCellPos(u.getPosForCell(0,p.startIdx),"start"),g=u.getPosForCell(0,p.startIdx),y=getCellPos(g,"start"),A=getCellPos(g,"end"),E=this._editorView.domAtPos(m+1).node.getBoundingClientRect(),_=this._editorView.domAtPos(y+1).node.getBoundingClientRect();return{pos:{from:m,to:A},rect:{left:E.left,right:_.right},safeLeftBoundary:p.safeLeftBoundary,safeRightBoundary:p.safeRightBoundary}}),h=(()=>{const{clientX:p}=e,m=d[s],g=s===0,y=s===d.length-1;if(!g&&p<m.rect.left){for(const A of d.slice(0,s).reverse())if(!(p<A.rect.left)&&A.safeLeftBoundary)return A.pos.from;return d[0].pos.from}if(!y&&p>m.rect.right){for(const A of d.slice(s+1))if(!(p>A.rect.right)&&A.safeRightBoundary)return A.pos.to;return d.at(-1).pos.to}return null})();typeof h=="number"?this._dropCursor.setPos(h):this._dropCursor.clear()}_endDragging(e,s){if(this._destroyed||!this._dragging)return;const a=this._dropCursor.getPos();if(this._clearDragging(),this._logger.event({event:"column-drag-end"}),a===null){this._editorView.focus();return}const l=this._getTableDescAndCellInfo();if(!l||l.tableDesc.base!==s.base){this._editorView.focus();return}const u=l.tableDesc.getPosForCell(0,e.startIdx).from,c=l.tableDesc.getPosForCell(0,e.endIdx).to;if(a===u||a===c)return;const d=(()=>{if(a===l.tableDesc.getPosForRow(0).to-1)return l.tableDesc.cols;const p=this._editorView.state.doc.nodeAt(a);if(!p||p.type.name!==YfmTableNode.Cell)return null;const m=l.tableDesc.base.getCellInfo(p);return m?m.column:null})();if(d===null||d===l.cellInfo.column||d===l.cellInfo.column+1){this._editorView.focus();return}const{tr:h}=this._editorView.state;for(let p=0;p<l.tableDesc.rows;p++){const m=getCellPos(l.tableDesc.getPosForCell(p,e.startIdx),"start"),g=getCellPos(l.tableDesc.getPosForCell(p,e.endIdx),"end");if(m===g)continue;let y;if(d===l.tableDesc.cols?y=l.tableDesc.getPosForRow(p).to-1:d===0?y=l.tableDesc.getPosForRow(p).from+1:y=getCellPos(l.tableDesc.getPosForCell(p,d),"start"),y!==m&&y!==g){const A=h.doc.slice(m,g,!1).content;h.insert(h.mapping.map(y),A),h.delete(h.mapping.map(m),h.mapping.map(g))}}this._editorView.dispatch(h.scrollIntoView()),this._editorView.focus()}}function getCellPos(o,e){return o.type==="virtual"?o.closestPos:e==="start"?o.from:o.to}function isDragThresholdPassed(o,e){return Math.abs(o.pageX-e.pageX)>=DRAG_START_THRESHOLD||Math.abs(o.pageY-e.pageY)>=DRAG_START_THRESHOLD}const dropCursorParams={color:"var(--g-color-line-brand)",width:2},yfmTableCellView=o=>(e,s,a,l)=>new YfmTableCellView(e,s,a,l,o);class YfmTableCellView{constructor(e,s,a,l,u){oe(this,"dom");oe(this,"contentDOM");oe(this,"_node");oe(this,"_view");oe(this,"_getPos");oe(this,"_renderer");oe(this,"_logger");oe(this,"_dndEnabled");oe(this,"_decoRowUniqKey",null);oe(this,"_decoColumnUniqKey",null);oe(this,"_cellInfo");oe(this,"_dndHandler");oe(this,"_onRowControlOpenToggle",e=>{if(e===!1){this._decoRowUniqKey&&(this._view.dispatch(deactivateRow(this._view.state.tr,this._decoRowUniqKey)),this._decoRowUniqKey=null);return}this._logger.event({event:"open-row-menu"});const s=this._getCellInfo();if(!s)return;this._decoRowUniqKey=Date.now();const a=s.tableDesc.base.getRowRangeByRowIdx(s.cell.row),l=activateRows(this._view.state.tr,{controlCell:{from:s.pos,to:s.pos+this._node.nodeSize},cells:getSelectedCellsForRows(s.tableDesc,a),uniqKey:this._decoRowUniqKey});this._view.dispatch(l)});oe(this,"_onColumnControlOpenToggle",e=>{if(e===!1){this._decoColumnUniqKey&&(this._view.dispatch(deactivateColumn(this._view.state.tr,this._decoColumnUniqKey)),this._decoColumnUniqKey=null);return}this._logger.event({event:"open-column-menu"});const s=this._getCellInfo();if(!s)return;this._decoColumnUniqKey=Date.now();const a=s.tableDesc.base.getColumnRangeByColumnIdx(s.cell.column),l=activateColumns(this._view.state.tr,{controlCell:{from:s.pos,to:s.pos+this._node.nodeSize},cells:getSelectedCellsForColumns(s.tableDesc,a),uniqKey:this._decoColumnUniqKey});this._view.dispatch(l)});oe(this,"_onRowClearCellsClick",()=>{this._logger.event({event:"row-clear-cells",source:"row-menu"});const e=this._getCellInfo();if(e){const s=e.tableDesc.base.getRowRangeByRowIdx(e.cell.row);clearCells({tablePos:e.table.pos,rows:range$1(s.startIdx,s.endIdx+1)})(this._view.state,this._view.dispatch)}this._view.focus()});oe(this,"_onColumnClearCellsClick",()=>{this._logger.event({event:"column-clear-cells",source:"column-menu"});const e=this._getCellInfo();if(e){const s=e.tableDesc.base.getColumnRangeByColumnIdx(e.cell.column);clearCells({tablePos:e.table.pos,cols:range$1(s.startIdx,s.endIdx+1)})(this._view.state,this._view.dispatch)}this._view.focus()});oe(this,"_onRowInsertBeforeClick",()=>{this._logger.event({event:"row-insert-before",source:"row-menu"});const e=this._getCellInfo();if(e){const s=e.tableDesc.base.getRowRangeByRowIdx(e.cell.row);this._insertRow(e.tableDesc,s.startIdx)}this._view.focus()});oe(this,"_onRowInsertAfterClick",()=>{this._logger.event({event:"row-insert-after",source:"column-menu"});const e=this._getCellInfo();if(e){const s=e.tableDesc.base.getRowRangeByRowIdx(e.cell.row);this._insertRow(e.tableDesc,s.endIdx+1)}this._view.focus()});oe(this,"_onColumnInsertBeforeClick",()=>{this._logger.event({event:"column-insert-before",source:"column-menu"});const e=this._getCellInfo();if(e){const s=e.tableDesc.base.getColumnRangeByColumnIdx(e.cell.column);this._insertColumn(e.tableDesc,s.startIdx)}this._view.focus()});oe(this,"_onColumnInsertAfterClick",()=>{this._logger.event({event:"column-insert-after",source:"column-menu"});const e=this._getCellInfo();if(e){const s=e.tableDesc.base.getColumnRangeByColumnIdx(e.cell.column);this._insertColumn(e.tableDesc,s.endIdx+1)}this._view.focus()});oe(this,"_onRowRemoveRangeClick",()=>{this._logger.event({event:"row-remove",source:"row-menu"});const e=this._getCellInfo();if(e){const s=e.tableDesc.base.getRowRangeIdxByRowIdx(e.cell.row);removeRowRange({tablePos:e.tableDesc.pos,rangeIdx:s})(this._view.state,this._view.dispatch,this._view)}this._view.focus()});oe(this,"_onColumnRemoveRangeClick",()=>{this._logger.event({event:"column-remove",source:"column-menu"});const e=this._getCellInfo();if(e){const s=e.tableDesc.base.getColumnRangeIdxByColumnIdx(e.cell.column);removeColumnRange({tablePos:e.tableDesc.pos,rangeIdx:s})(this._view.state,this._view.dispatch,this._view)}this._view.focus()});oe(this,"_onRemoveTableClick",()=>{this._logger.event({event:"table-remove"});const e=this._getCellInfo();e&&removeYfmTable(this._view.state,this._view.dispatch,this._view,{tablePos:e.table.pos,tableNode:e.table.node}),this._view.focus()});oe(this,"_getParentTable",()=>{const e=this._getPos();return e!==void 0?findParentNodeClosestToPos(this._view.state.doc.resolve(e),isTableNode):void 0});this._node=e,this._view=s,this._getPos=a,this._logger=getLoggerFromState(s.state).nested({node:"yfm-table"}),this._dndEnabled=u.dndEnabled,this.dom=document.createElement("td"),this._updateDom(),this.contentDOM=this.dom,this._cellInfo=null,this._dndHandler=null,this._renderer=getReactRendererFromState(s.state).createItem("yfm-table-cell-view",()=>{var y,A;if(!this._cellInfo)return null;const{showRowControl:c,showColumnControl:d,rowRange:h,columnRange:p,tablePos:m}=this._cellInfo,g=this._view.domAtPos(m+1).node;return jsxRuntimeExports.jsxs(ErrorLoggerBoundary,{children:[c&&jsxRuntimeExports.jsx(FloatingMenuControl,{type:"row",cellElement:this.dom,tableElement:g,dndHandler:(y=this._dndHandler)==null?void 0:y.row,multiple:h.rowsCount>1,onMenuOpenToggle:this._onRowControlOpenToggle,onClearCellsClick:this._onRowClearCellsClick,onInsertBeforeClick:this._onRowInsertBeforeClick,onInsertAfterClick:this._onRowInsertAfterClick,onRemoveRangeClick:this._onRowRemoveRangeClick,onRemoveTableClick:this._onRemoveTableClick}),d&&jsxRuntimeExports.jsx(FloatingMenuControl,{type:"column",cellElement:this.dom,tableElement:g,dndHandler:(A=this._dndHandler)==null?void 0:A.column,multiple:p.columnsCount>1,onMenuOpenToggle:this._onColumnControlOpenToggle,onClearCellsClick:this._onColumnClearCellsClick,onInsertBeforeClick:this._onColumnInsertBeforeClick,onInsertAfterClick:this._onColumnInsertAfterClick,onRemoveRangeClick:this._onColumnRemoveRangeClick,onRemoveTableClick:this._onRemoveTableClick})]})}),this.update(e,l)}update(e,s){var l,u;{const c=this._node;this._node=e,this._updateDom(c)}const a=this._getCellInfo();if(a&&(a.cell.row===0||a.cell.column===0)){const c=this._cellInfo={tablePos:a.table.pos,rowIndex:a.cell.row,columnIndex:a.cell.column,showRowControl:!1,showColumnControl:!1,rowRange:a.tableDesc.base.getRowRangeByRowIdx(a.cell.row),columnRange:a.tableDesc.base.getColumnRangeByColumnIdx(a.cell.column)};for(const d of s){const h=d.spec[YfmTableDecorationTypeKey];c.showRowControl||(c.showRowControl=h===YfmTableDecorationType.ShowRowControl),c.showRowControl||(c.showRowControl=h===YfmTableDecorationType.OpenRowMenu),c.showColumnControl||(c.showColumnControl=h===YfmTableDecorationType.ShowColumnControl),c.showColumnControl||(c.showColumnControl=h===YfmTableDecorationType.OpenColumnMenu)}this._dndEnabled&&!this._dndHandler&&(this._dndHandler=new YfmTableDnDHandler(this._view,{cellNode:e,cellGetPos:this._getPos,logger:this._logger,dropCursor:dropCursorParams})),(l=this._dndHandler)==null||l.update(e)}else this._cellInfo=null,(u=this._dndHandler)==null||u.destroy(),this._dndHandler=null;return this._renderer.rerender(),!0}destroy(){var e;(e=this._dndHandler)==null||e.destroy(),this._dndHandler=null,this._renderer.remove(),this._onRowControlOpenToggle(!1),this._onColumnControlOpenToggle(!1)}_updateDom(e){e!=null&&e.attrs[YfmTableAttr.CellAlign]&&this.dom.classList.remove(e.attrs[YfmTableAttr.CellAlign]),this._node.attrs[YfmTableAttr.Colspan]?this.dom.setAttribute("colspan",this._node.attrs[YfmTableAttr.Colspan]):this.dom.removeAttribute("colspan"),this._node.attrs[YfmTableAttr.Rowspan]?this.dom.setAttribute("rowspan",this._node.attrs[YfmTableAttr.Rowspan]):this.dom.removeAttribute("rowspan"),this._node.attrs[YfmTableAttr.CellAlign]?(this.dom.classList.add(this._node.attrs[YfmTableAttr.CellAlign]),this.dom.setAttribute(YfmTableAttr.CellAlign,this._node.attrs[YfmTableAttr.Rowspan])):this.dom.removeAttribute(YfmTableAttr.CellAlign)}_insertRow(e,s){insertEmptyRow$1({tablePos:e.pos,rowIndex:s})(this._view.state,this._view.dispatch,this._view)}_insertColumn(e,s){insertEmptyColumn({tablePos:e.pos,colIndex:s})(this._view.state,this._view.dispatch,this._view)}_getCellInfo(){var l;const e=this._getParentTable(),s=e?(l=TableDesc.create(e.node))==null?void 0:l.bind(e.pos):void 0,a=s==null?void 0:s.base.getCellInfo(this._node);return a?{pos:this._getPos(),table:e,tableDesc:s,cell:a}:void 0}}function useRafThrottle(o){const e=useLatest(o),s=reactExports.useRef(null);return reactExports.useEffect(()=>()=>{s.current!==null&&cancelAnimationFrame(s.current)},[e]),reactExports.useCallback(()=>{s.current===null&&(s.current=requestAnimationFrame(()=>{s.current=null,e.current()}))},[e])}const placementByType$1={row:"bottom-start",column:"right-start"},InsertCursor=function o({type:e,anchor:s}){const[a,l]=useElementState(),{width:u,height:c,updateRect:d}=useSize(e,()=>s.getBoundingClientRect()),h=useLatest(u),[p,m]=reactExports.useState({top:-9999,left:-9999});return reactExports.useEffect(()=>{if(s&&a)return autoUpdate(s,a,()=>{d(s.getBoundingClientRect()),computePosition(s,a,{placement:placementByType$1[e]}).then(({x:g,y})=>{m(e==="row"?{left:g,top:y-1}:{left:g-1,top:y})})})},[s,a,h,e,d]),jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx("div",{ref:l,style:{position:"absolute",zIndex:1005,width:u,height:c,pointerEvents:"auto",outline:"none",backgroundColor:"var(--g-color-line-brand)",...p}})})};function useSize(o,e){const[s,a]=reactExports.useState(()=>getSize(o,e())),l=useLatest(s);return{width:s.width,height:s.height,updateRect:reactExports.useCallback(u=>{const c=getSize(o,u);o==="row"&&c.width!==l.current.width&&a(c),o==="column"&&c.height!==l.current.height&&a(c)},[l,o])}}function getSize(o,e){return o==="row"?{height:2,width:e.width}:{width:2,height:e.height}}const PlusButton=function o({qa:e,onClick:s,onHoverChange:a}){const[l,u,c]=useBooleanState(!1);return reactExports.useEffect(()=>{a(l)},[l,a]),jsxRuntimeExports.jsx(Flex,{centerContent:!0,width:20,height:20,onMouseEnter:u,onMouseLeave:c,style:{borderRadius:"100px",backgroundColor:l?"var(--g-color-base-background)":void 0},children:jsxRuntimeExports.jsx(Button,{qa:e,size:"xs",pin:"circle-circle",view:l?"outlined-action":"normal",onClick:s,style:l?{"--g-button-background-color-hover":"var(--g-color-base-background)"}:{color:"transparent","--g-button-height":"4px","--g-button-background-color":"var(--g-color-line-generic-accent)","--g-button-border-color":"var(--g-color-line-generic-accent)"},children:jsxRuntimeExports.jsx(Icon,{data:Plus})})})},styles={borderRadius:"100px",background:"transparent"},placementByType={row:"left-end",column:"top-end"},offsetByType={row:{alignmentAxis:-10},column:{alignmentAxis:-10}},FloatingPlusButton=reactExports.forwardRef(function o({anchor:e,type:s,floatingStyles:a,...l},u){const[c,d]=reactExports.useState(!1);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FloatingPopup,{open:!0,ref:u,anchorElement:e,floatingStyles:a,placement:placementByType[s],offset:offsetByType[s],style:styles,children:jsxRuntimeExports.jsx(PlusButton,{...l,onHoverChange:d,qa:`g-md-yfm-table-plus-${s}`})}),c&&jsxRuntimeExports.jsx(InsertCursor,{anchor:e,type:s})]})}),FloatingPlusControl=reactExports.memo(function o({type:e,index:s,cellElem:a,tableElem:l,onClick:u}){const c=reactExports.useMemo(()=>({contextElement:l,getBoundingClientRect(){const y=a.getBoundingClientRect(),A=l.getBoundingClientRect();return e==="row"?{x:A.x,y:y.y,width:A.width,height:y.height,top:y.top,left:A.left,right:A.right,bottom:y.top}:{x:y.x,y:A.y,width:y.width,height:A.height,top:A.top,left:y.left,right:y.right,bottom:A.top}}}),[a,l,e]),[d,h]=reactExports.useState(()=>shouldBeVisible(e,a,l)),p=reactExports.useRef(null),m=()=>{const y=shouldBeVisible(e,a,l);d!==y&&h(y)},g=useRafThrottle(()=>{var y;(y=p.current)==null||y.forceUpdate(),m()});return useEffectOnce(m),reactExports.useEffect(()=>{if(e!=="column")return;const y=new ResizeObserver(g);return y.observe(l),l.addEventListener("scroll",g),()=>{y.unobserve(l),l.removeEventListener("scroll",g)}},[l,g,e]),jsxRuntimeExports.jsx(FloatingPlusButton,{ref:p,anchor:c,type:e,onClick:()=>u(s),floatingStyles:d?void 0:{display:"none"}})});function shouldBeVisible(o,e,s){if(o!=="column")return!0;const a=4,l=e.getBoundingClientRect(),u=s.getBoundingClientRect();return u.left-l.right<=a&&l.right-u.right<=a}const yfmTableView=(o,e,s,a)=>new YfmTableNewView(o,e,s,a);class YfmTableNewView{constructor(e,s,a,l){oe(this,"dom");oe(this,"contentDOM");oe(this,"_node");oe(this,"_view");oe(this,"_getPos");oe(this,"_renderer");oe(this,"_logger");oe(this,"_isFocused",!1);oe(this,"_onRowPlusClick",e=>{this._logger.event({event:"row-insert",source:"floating-plus-button"});const s=this._getTableDesc();s&&(insertEmptyRow$1({tablePos:s.pos,rowIndex:e+1})(this._view.state,this._view.dispatch),this._view.focus())});oe(this,"_onColumnPlusClick",e=>{this._logger.event({event:"column-insert",source:"floating-plus-button"});const s=this._getTableDesc();s&&(insertEmptyColumn({tablePos:s.pos,colIndex:e+1})(this._view.state,this._view.dispatch),this._view.focus())});this._node=e,this._view=s,this._getPos=a,this._logger=getLoggerFromState(s.state).nested({node:"yfm-table"}),this.dom=this.contentDOM=s.dom.ownerDocument.createElement("table"),this.dom.classList.add("g-md-yfm-table-view"),this._updateFocusedState(l),this._renderer=getReactRendererFromState(s.state).createItem("yfm-table-view",()=>{if(!this._isFocused)return null;const u=this._getTableDesc();if(!u)return null;const c=this._view.domAtPos(u.pos+1).node,d=[];for(let h=0;h<u.rows;h++){const p=u.base.rowsDesc[h].cells.findIndex(m=>m.type==="real");if(p>=0){const m=u.getPosForCell(h,p),g=this._view.domAtPos(m.from+1).node;d.push(jsxRuntimeExports.jsx(FloatingPlusControl,{type:"row",index:h,cellElem:g,tableElem:c,onClick:this._onRowPlusClick},`row-${h}-${p}`))}}for(let h=0;h<u.cols;h++){const p=range$1(0,u.rows).findIndex(m=>u.base.rowsDesc[m].cells[h].type==="real");if(p>=0){const m=u.getPosForCell(p,h),g=this._view.domAtPos(m.from+1).node;d.push(jsxRuntimeExports.jsx(FloatingPlusControl,{type:"column",index:h,cellElem:g,tableElem:c,onClick:this._onColumnPlusClick},`col-${p}-${h}`))}}return jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:d})})}update(e,s){return this._node=e,this._updateFocusedState(s),this._renderer.rerender(),!0}destroy(){this._renderer.remove()}_updateFocusedState(e){this._isFocused=e.some(s=>{var a;return((a=s.spec)==null?void 0:a[YfmTableDecorationTypeKey])===YfmTableDecorationType.FocusTable})}_getTableDesc(){var s;const e=this._getPos();return typeof e!="number"?null:(s=TableDesc.create(this._node))==null?void 0:s.bind(e)}}const pluginKey$4=new PluginKey("TableControlsPlugin"),FOCUSED_CLASSNAME="yfm-table-focused";function shouldUpdateState(o,e){return o===null&&e===null?!1:o===null||e===null?!0:!(o.rowIdx===e.rowIdx&&o.columnIdx===e.columnIdx&&o.tablePos===e.tablePos)}function hideHoverDecos(o){const e={newState:null};return o.setMeta(pluginKey$4,e)}const yfmTableFocusPlugin=o=>new Plugin({key:pluginKey$4,state:{init(e,s){return updateAfterChanges(s)},apply:(e,s)=>{if(e.selectionSet||e.docChanged)return updateAfterChanges(e,s);const a=e.getMeta(pluginKey$4);if(a){const l={...s};l.decorations=l.decorations.map(e.mapping,e.doc);{const u=l.decorations.find(void 0,void 0,c=>c[YfmTableDecorationTypeKey]===YfmTableDecorationType.ShowRowControl||c[YfmTableDecorationTypeKey]===YfmTableDecorationType.ShowColumnControl);l.decorations=l.decorations.remove(u)}if(l.hover=a.newState,l.hover&&l.activeTablePos===l.hover.tablePos){const u=e.doc.nodeAt(l.activeTablePos),c=TableDesc.create(u),d=c.getRelativePosForCell(l.hover.rowIdx,0),h=c.getRelativePosForCell(0,l.hover.columnIdx);d.type==="real"&&(l.decorations=l.decorations.add(e.doc,[Decoration$1.node(l.activeTablePos+d.from,l.activeTablePos+d.to,{},{[YfmTableDecorationTypeKey]:YfmTableDecorationType.ShowRowControl})])),h.type==="real"&&(l.decorations=l.decorations.add(e.doc,[Decoration$1.node(l.activeTablePos+h.from,l.activeTablePos+h.to,{},{[YfmTableDecorationTypeKey]:YfmTableDecorationType.ShowColumnControl})]))}return l}return{...s,decorations:s.decorations.map(e.mapping,e.doc)}}},props:{nodeViews:{[YfmTableNode.Table]:yfmTableView,[YfmTableNode.Cell]:yfmTableCellView(o)},decorations(e){var s;return(s=pluginKey$4.getState(e))==null?void 0:s.decorations},handleDOMEvents:{mousemove:throttle((e,s)=>{var l;let a=null;if(s.target instanceof Element&&s.target.closest("td")&&s.target.closest(`.${FOCUSED_CLASSNAME}`)){const u=(()=>{const m=s.target.closest("td"),g=m&&e.posAtDOM(m,0);return g===null?null:e.state.doc.resolve(g)})()??(()=>{const m=e.posAtCoords({left:s.x,top:s.y});return m&&e.state.doc.resolve(m.pos)})(),c=u&&findParentNodeClosestToPos(u,isTableCellNode),d=u&&findParentNodeClosestToPos(u,isTableNode),h=d&&TableDesc.create(d.node),p=c&&(h==null?void 0:h.getCellInfo(c.node));if(p){a={tablePos:d.pos,rowIdx:p.row,columnIdx:p.column};{const m=h.rowsDesc[a.rowIdx].cells[0];m.type==="virtual"&&(a.rowIdx=m.rowspan[0])}{const m=h.rowsDesc[0].cells[a.columnIdx];m.type==="virtual"&&(a.columnIdx=m.colspan[1])}}}if(shouldUpdateState(((l=pluginKey$4.getState(e.state))==null?void 0:l.hover)||null,a)){const u={newState:a};e.dispatch(e.state.tr.setMeta(pluginKey$4,u))}},100)}}});function updateAfterChanges(o,e){const s=findParentNode(isTableNode)(o.selection)||findSelectedNodeOfType(yfmTableType(o.doc.type.schema))(o.selection);if(s){const a=s.pos,l=a+s.node.nodeSize,u=e?e.decorations.map(o.mapping,o.doc).find(a,l,c=>c[YfmTableDecorationTypeKey]===YfmTableDecorationType.ShowRowControl||c[YfmTableDecorationTypeKey]===YfmTableDecorationType.ShowColumnControl):[];return{hover:null,activeTablePos:s.pos,decorations:DecorationSet.create(o.doc,[...u,Decoration$1.node(s.pos,s.pos+s.node.nodeSize,{class:FOCUSED_CLASSNAME},{[YfmTableDecorationTypeKey]:YfmTableDecorationType.FocusTable})])}}else return{hover:null,activeTablePos:null,decorations:DecorationSet.empty}}const yfmTableControlsPlugins=o=>e=>[yfmTableFocusPlugin(o),yfmTableDndPlugin()];function fixPastedTableBodies(o,e){var s;if(((s=o.content.firstChild)==null?void 0:s.type)===yfmTableBodyType(e)){const a=[];let l=0;for(const{node:c,offset:d}of getChildrenOfNode(o.content)){if(c.type!==yfmTableBodyType(e))break;a.push(...getChildrenOfNode(c).map(h=>h.node)),l=d+c.nodeSize}const u=yfmTableType(e).create(null,yfmTableBodyType(e).create(null,a));o=new Slice(Fragment.from(u).append(o.content.cut(l)),0,0)}return o}function unpackSingleCellTable(o){if(o.content.childCount!==1||!isSingeCellTable(o.content.child(0)))return o;let e=o.content.child(0);for(;e&&e.type.spec.tableRole!==TableRole.Cell;)e=e.lastChild;const s=Fragment.from(e==null?void 0:e.content);return new Slice(s,0,0)}function isSingeCellTable(o){var s;const{schema:e}=o.type;return o.type===yfmTableCellType(e)?!0:o.type===yfmTableRowType(e)&&o.childCount===1||o.type===yfmTableBodyType(e)&&o.childCount===1?isSingeCellTable(o.child(0)):o.type===yfmTableType(e)&&((s=o.lastChild)==null?void 0:s.type)===yfmTableBodyType(e)?isSingeCellTable(o.lastChild):!1}const yfmTableTransformPastedPlugin=({schema:o})=>new Plugin({props:{transformPasted(e){return e=unpackSingleCellTable(e),e=fixPastedTableBodies(e,o),e}}}),action="createYfmTable",YfmTable=(o,e)=>{o.use(YfmTableSpecs,e),o.addKeymap(()=>({Tab:goToNextCell("next"),"Shift-Tab":goToNextCell("prev"),ArrowDown:goToNextRow("down"),ArrowUp:goToNextRow("up"),Backspace:backspaceCommand})),o.addAction(action,()=>createYfmTable),o.addPlugin(yfmTableTransformPastedPlugin),e.controls!==!1&&o.addPlugin(yfmTableControlsPlugins({dndEnabled:e.dnd!==!1}))};(()=>{var o="yfm-tabs",e="yfm-tab",s="yfm-tab-panel",a="yfm-tab-list",l="active",u="data-diplodoc-group",c="data-diplodoc-key",d="data-diplodoc-variant",h="data-diplodoc-id",p="defaultTabsGroup-",m="data-diplodoc-forced",g="yfm-tabs-dropdown-select",y=(k=>(k.Regular="regular",k.Radio="radio",k.Dropdown="dropdown",k.Accordion="accordion",k))(y||{}),A=Symbol.for("diplodocTabs"),T=k=>{let I=k.composedPath();return Array.isArray(I)&&I.length>0?I[0]:k.target},E=k=>{let I=T(k);return!I||!I.matches},v=k=>Math.abs(k.scrollHeight-k.clientHeight)>1?k:k.parentElement?v(k.parentElement):void 0,_=(k,I)=>{let P=k.getBoundingClientRect(),N=I.getBoundingClientRect();return{top:P.top-N.top,left:P.left-N.left,scrollTop:I.scrollTop,scrollLeft:I.scrollLeft}},w={TABS:`.${o}`,TAB_LIST:`.${a}`,TAB:`.${e}`},R=class{constructor(k,I={}){this._onSelectTabHandlers=new Set,this._currentPageTabGroups=[],this._isRestoringTabs=!1,this._document=k,this._options=Object.assign({saveTabsToLocalStorage:!1,saveTabsToQueryStateMode:"none"},I),this._document.addEventListener("click",P=>{let N=T(P);if(P.target&&this.hideAllDropdown(P.target),E(P))return;if(this.isElementDropdownSelect(N)){N.classList.toggle(l);return}if(!this.isValidTabElement(N))return;let L=this.getTabDataFromHTMLElement(N);L&&this._selectTab(L,N)}),this._document.addEventListener("keydown",P=>{let N=null;switch(P.key){case"ArrowLeft":{N="left";break}case"ArrowRight":{N="right";break}case"ArrowUp":{N="left";break}case"ArrowDown":{N="right";break}}if(!N)return;let L=T(P);if(E(P)||!this.isValidTabElement(L))return;let{tabs:Q,nodes:j}=this.getTabs(L),F=this.getTabDataFromHTMLElement(L),V=Q.findIndex(({key:z})=>(F==null?void 0:F.key)&&z===F.key);if(!F||Q.length<=1||V===-1)return;let J=(V+(N==="left"?-1:1)+Q.length)%Q.length;this.selectTab(Q[J]),j[J].focus()})}configure(k){this._options=Object.assign(this._options,k)}onSelectTab(k){return this._onSelectTabHandlers.add(k),()=>{this._onSelectTabHandlers.delete(k)}}selectTabById(k,I){let P=this._document.querySelector(`${w.TAB}[${h}="${k}"]`);if(!P||!this.isValidTabElement(P))return;let N=this.getTabDataFromHTMLElement(P);N&&this._selectTab(N,P),I!=null&&I.scrollToElement&&P.scrollIntoView()}selectTab(k){this._selectTab(k)}restoreTabs(k){this._isRestoringTabs=!0;try{for(let[I,P]of Object.entries(k))if(I){let N={group:I,...P};this.selectTab(N)}}finally{this._isRestoringTabs=!1}}getTabsFromLocalStorage(){return JSON.parse(localStorage.getItem("tabsHistory")||"{}")}getTabsFromSearchQuery(){let k={},I=new URLSearchParams(window.location.search);return I.has("tabs")&&(I.get("tabs")||"").split(",").forEach(P=>{let N=P.split("_"),[L,Q]=N,j="regular";if(N.length===3&&(j=N[2]),L&&Q&&Object.values(y).includes(j)){let F=Q;k[L]={key:F,variant:j}}}),k}updateLocalStorageWithTabs(k){this._options.saveTabsToLocalStorage&&(this._isRestoringTabs||localStorage.setItem("tabsHistory",JSON.stringify(k)))}updateQueryParamWithTabs(k){if(this._isRestoringTabs)return;let I=new URLSearchParams(window.location.search),P=Object.entries(k).map(([Q,{key:j,variant:F}])=>F==="regular"?`${Q}_${j}`:`${Q}_${j}_${F}`);P.length>0?I.set("tabs",P.join(",")):I.delete("tabs");let N=history.state||{},L=new URL(window.location.href);L.search=I.toString(),window.history.replaceState({...N},document.title,L.href)}getCurrentPageTabHistory(k){return Object.fromEntries(Object.entries(k).filter(([I])=>this._currentPageTabGroups.includes(I)))}onPageChanged(){this._currentPageTabGroups=this.getCurrentPageTabGroups()}getCurrentPageTabGroups(){let k=this._document.getElementsByClassName(o),I=new Set;return Array.from(k).forEach(P=>{let N=P.getAttribute(u);N&&I.add(N)}),Array.from(I)}clearTabsPreferred(){localStorage.removeItem("tabsHistory"),this.updateQueryParamWithTabs({})}_selectTab(k,I){let{group:P,key:N,variant:L}=k;if(!P)return;this.saveTabPreferred({group:P,key:N,variant:L});let Q=I&&v(I),j=Q&&_(I,Q);this.updateHTML({group:P,key:N,variant:L},I,L)>0&&(this.fireSelectTabEvent({group:P,key:N,variant:L},I==null?void 0:I.dataset.diplodocId),j&&this.resetScroll(I,Q,j))}updateHTML(k,I,P){switch(P){case"radio":return this.updateHTMLRadio(k,I);case"accordion":return this.updateHTMLAccordion(k,I);case"regular":return this.updateHTMLRegular(k);case"dropdown":return this.updateHTMLDropdown(k);default:return 0}}saveTabPreferred(k){let I={};switch(this._options.saveTabsToLocalStorage&&(I=JSON.parse(localStorage.getItem("tabsHistory")||"{}")),I[k.group]={key:k.key,variant:k.variant},this._options.saveTabsToLocalStorage&&this.updateLocalStorageWithTabs(I),this._options.saveTabsToQueryStateMode){case"all":{this.updateQueryParamWithTabs(I);break}case"page":{this.updateQueryParamWithTabs(this.getCurrentPageTabHistory(I));break}}}updateHTMLRadio(k,I){let{group:P,key:N}=k,{isForced:L,root:Q}=this.didTabOpenForce(I),j=L?`.yfm-vertical-tab[${m}="true"]`:"",F=this._document.querySelectorAll(`${w.TABS}[${u}="${P}"] ${w.TAB}[${c}="${N}"]${j}`);L&&(Q==null||Q.removeAttribute(m));let V=0;return F.forEach(J=>{let z=J.parentNode.children;for(let Y=0;Y<z.length;Y+=2){let[fe,de]=[z.item(Y),z.item(Y+1)],X=fe.children.item(0);if(fe===J){X.checked?(fe.classList.remove("active"),de==null||de.classList.remove("active"),X.removeAttribute("checked")):(fe.classList.add("active"),de==null||de.classList.add("active"),X.setAttribute("checked","true"));continue}X.hasAttribute("checked")&&(fe.classList.remove("active"),de==null||de.classList.remove("active"),X.removeAttribute("checked")),V++}}),V}updateHTMLRegular(k){let{group:I,key:P}=k,N=this._document.querySelectorAll(`${w.TABS}[${u}="${I}"] ${w.TAB}[${c}="${P}"]`),L=0;return N.forEach(Q=>{let j=Q;if(!this.isValidTabElement(j)||j.dataset.diplodocIsActive==="true")return;L++;let F=Q,V=F.parentNode,J=V==null?void 0:V.parentNode,z=Array.from((V==null?void 0:V.querySelectorAll(w.TAB))||[]),Y=Array.from((J==null?void 0:J.children)||[]).filter(de=>de.classList.contains(s)),fe=z.indexOf(F);z.forEach((de,X)=>{let he=Y[X],ue=X===fe,G=de;G.dataset.diplodocIsActive=ue?"true":"false",de.classList.toggle(l,ue),de.setAttribute("aria-selected",ue.toString()),de.setAttribute("tabindex",ue?"0":"-1"),he.classList.toggle(l,ue)})}),L}updateHTMLDropdown(k){let{group:I,key:P}=k,N=this._document.querySelectorAll(`${w.TABS}[${u}="${I}"] ${w.TAB}[${c}="${P}"]`),L=0;return N.forEach(Q=>{let j=Q.closest(`[${d}=dropdown]`);if(!(j!=null&&j.children))return;let F=j.children.item(0),V=j.children.item(1);F==null||F.classList.remove(l);let J=Array.from((V==null?void 0:V.children)||[]).indexOf(Q)+2;for(let z=2;z<j.children.length;z++){let Y=j.children.item(z),fe=V==null?void 0:V.children.item(z-2);if(L++,J===z){Y==null||Y.classList.add(l),fe.classList.add(l),F.innerHTML=Q.innerHTML,F.classList.add("filled");continue}fe.classList.remove(l),Y.classList.remove(l)}}),L}updateHTMLAccordion(k,I){let{group:P,key:N}=k,L=this._document.querySelectorAll(`${w.TABS}[${u}="${P}"] ${w.TAB}[${c}="${N}"]`),Q=0;return L.forEach(j=>{let F=j.closest(`[${d}=accordion]`);if(F!=null&&F.children)for(let V=0;V<F.children.length;V+=2){let J=F.children.item(V),z=F.children.item(V+1);if(Q++,j===J){J==null||J.classList.toggle(l),z==null||z.classList.toggle(l);continue}J==null||J.classList.remove(l),z==null||z.classList.remove(l)}}),I&&!this.checkVisible(I)&&setTimeout(()=>{I.scrollIntoView({block:"nearest"})}),Q}checkVisible(k){let I=k.getBoundingClientRect(),P=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(I.bottom<0||I.top-P>=0)}hideAllDropdown(k){this._document.querySelectorAll(".yfm-tabs-dropdown-select.active").forEach(I=>{I.contains(k)||I.classList.remove(l)})}resetScroll(k,I,P){let N=_(k,I),L=N.top-P.top,Q=N.left-P.left,j=N.scrollTop-P.scrollTop,F=N.scrollLeft-P.scrollLeft;I.scrollTo(I.scrollLeft+Q-F,I.scrollTop+L-j)}didTabOpenForce(k){if(!k)return{};if(k.dataset.diplodocForced)return{root:k,isForced:!0};let I=k.dataset.diplodocVerticalTab?k:k.parentElement,P=typeof(I==null?void 0:I.dataset.diplodocForced)<"u";return{root:I,isForced:P}}fireSelectTabEvent(k,I){let{group:P,key:N,variant:L}=k,Q=P.startsWith(p)?{key:N,variant:L}:k;this._onSelectTabHandlers.forEach(j=>{j({tab:Q,currentTabId:I})})}getTabsType(k){let I=k.closest(`[${d}]`);if(I)return I.dataset.diplodocVariant}isValidTabElement(k){return!!this.getTabsType(k)}isElementDropdownSelect(k){return k.classList.contains(g)}getTabDataFromHTMLElement(k){var I,P,N;let L=this.getTabsType(k);if(L==="radio"){let F=k.dataset.diplodocVerticalTab?k:k.parentElement,V=F.dataset.diplodocKey,J=(I=F.closest(w.TABS))==null?void 0:I.dataset.diplodocGroup;return V&&J?{group:J,key:V,variant:"radio"}:null}if(L==="dropdown"||L==="accordion"){let F=k.dataset.diplodocKey,V=(P=k.closest(w.TABS))==null?void 0:P.dataset.diplodocGroup;return F&&V?{group:V,key:F,variant:L}:null}let Q=k.dataset.diplodocKey,j=(N=k.closest(w.TABS))==null?void 0:N.dataset.diplodocGroup;return Q&&j?{group:j,key:Q,variant:"regular"}:null}getTabs(k){var I,P;let N=(I=k.closest(w.TABS))==null?void 0:I.dataset.diplodocGroup,L=(P=k.closest(w.TAB_LIST))==null?void 0:P.querySelectorAll(w.TAB),Q=[];return L.forEach(j=>{let F=j==null?void 0:j.dataset.diplodocKey;F&&Q.push({group:N,key:F,variant:"regular"})}),{tabs:Q,nodes:L}}};typeof window<"u"&&typeof document<"u"&&!window[A]&&(window[A]=new R(document))})();var utilsExports=requireUtils$2();const YFM_TAB_CLASSNAME="yfm-tab",DIPLODOC_ID_ATTR="data-diplodoc-id",tabActiveClassname=`${YFM_TAB_CLASSNAME} active`,tabInactiveClassname=YFM_TAB_CLASSNAME,tabPanelActiveClassname="yfm-tab-panel active",tabPanelInactiveClassname="yfm-tab-panel",createYfmTabsCommand=(o,e)=>{if(e){const{schema:s}=o,a=utilsExports.generateID(),l=utilsExports.generateID(),u=tabsListType(s),c=tabsType(s),d=tabPanelType(o.schema).create({[TabPanelAttrs.ariaLabelledby]:a,[TabPanelAttrs.id]:l,[TabPanelAttrs.class]:tabPanelActiveClassname},pType(o.schema).createAndFill()),h=tabType(o.schema).create({[TabAttrs.id]:a,[TabAttrs.class]:tabActiveClassname,[TabAttrs.ariaControls]:l,[TabAttrs.dataDiplodocIsActive]:"true",[TabAttrs.dataDiplodocid]:a,[TabAttrs.dataDiplodocKey]:a}),p=c.create({[TabsAttrs.dataDiplodocGroup]:utilsExports.generateID()},[u.create(null,[h]),d]);e(o.tr.replaceSelectionWith(p).scrollIntoView())}return!0},createYfmTabs={isEnable:createYfmTabsCommand,run:createYfmTabsCommand},execAfterPaint=o=>{requestAnimationFrame(()=>{requestAnimationFrame(o)})},atEndOfPanel=o=>{if(!o)return null;const{$head:e}=o.state.selection;for(let s=e.depth;s>=0;s--){const a=e.node(s);if(e.indexAfter(s)!==a.childCount)return!1;if(a.type===tabPanelType(o.state.schema)){const u=e.before(s);return o!=null&&o.endOfTextblock("down")?u:null}}return null},switchTabByElem=o=>{o.classList.contains(YFM_TAB_CLASSNAME)&&o.click()},switchTabById=(o,e)=>{const s=`.${YFM_TAB_CLASSNAME}[${DIPLODOC_ID_ATTR}="${e}"]`,a=o.querySelector(s);a&&switchTabByElem(a)},dragAutoSwitch=()=>new Plugin({view:TabsAutoSwitchOnDragOver.view}),Wn=class Wn{constructor(e){oe(this,"_tabElem",null);oe(this,"_editorView");oe(this,"_timeout",null);oe(this,"_docListener");this._editorView=e,this._docListener=throttle(this._onDocEvent.bind(this),Wn.THROTTLE_WAIT),document.addEventListener("mousemove",this._docListener),document.addEventListener("dragover",this._docListener)}destroy(){this._clear(),this._docListener.cancel(),document.removeEventListener("mousemove",this._docListener),document.removeEventListener("dragover",this._docListener)}_onDocEvent(e){const s=this._editorView;if(!s.dragging)return;const a=s.posAtCoords({left:e.clientX,top:e.clientY});if(a){const u=findDomRefAtPos(a.pos,s.domAtPos.bind(s)).closest(Wn.TAB_SELECTOR);if(u===this._tabElem)return;this._clear(),u&&this._setTabElem(u)}}_clear(){this._timeout!==null&&clearTimeout(this._timeout),this._timeout=null,this._tabElem=null}_setTabElem(e){this._tabElem=e,this._timeout=setTimeout(this._switchTab.bind(this),Wn.OPEN_TIMEOUT)}_switchTab(){this._editorView.dragging&&this._tabElem&&switchTabByElem(this._tabElem),this._clear()}};oe(Wn,"TAB_SELECTOR",".yfm-tab:not([data-diplodoc-is-active=true])"),oe(Wn,"OPEN_TIMEOUT",500),oe(Wn,"THROTTLE_WAIT",50),oe(Wn,"view",e=>new Wn(e));let TabsAutoSwitchOnDragOver=Wn;const tabPanelArrowDown=(o,e,s)=>{const{selection:a}=o,l=findParentNodeOfType(tabsType(o.schema))(o.selection);if(atEndOfPanel(s)&&(s!=null&&s.endOfTextblock("down"))){const[u,c]=["after",a.$to];let d;if(isTextSelection(a)&&(d=findFakeParaPosForTextSelection(a,u)??findFakeParaPosClosestToPos(c,c.depth-2,u)),isGapCursorSelection(a)&&l&&(d=o.doc.resolve(l.pos+l.node.nodeSize)),d)return e==null||e(createFakeParagraph(o.tr,d,u).scrollIntoView()),!0}return!1},tabEnter=o=>{const e=get$Cursor(o.selection);return(e==null?void 0:e.node(e.depth).type)===tabType(o.schema)},liftEmptyBlockFromTabPanel=(o,e)=>{const{selection:s,schema:a}=o;if(!isTextSelection(s))return!1;const{$cursor:l}=s;if(!l||l.parent.content.size)return!1;if(l.depth>2&&isSameNodeType(l.node(-1),tabPanelType(a))&&isSameNodeType(l.node(-2),tabsType(a))&&l.after()===l.end(-1)){if(e){const u=l.parent.copy(),c=l.after(-2),{tr:d}=o;d.insert(c,u).delete(l.before(),l.after()).setSelection(TextSelection.create(d.doc,d.mapping.map(c))),e(d.scrollIntoView())}return!0}return!1},createTab=(o,e)=>(s,a,l)=>{const u=findChildren(e.node,A=>A.type.name===tabType(s.schema).name),c=findChildren(e.node,A=>A.type.name===tabPanelType(s.schema).name),d=c.filter(A=>A.node.attrs[TabPanelAttrs.ariaLabelledby]===o.node.attrs[TabAttrs.dataDiplodocid])[0],h=utilsExports.generateID(),p=utilsExports.generateID(),m=tabPanelType(s.schema).create({[TabPanelAttrs.ariaLabelledby]:h,[TabPanelAttrs.id]:p,[TabPanelAttrs.class]:tabPanelInactiveClassname},pType(s.schema).createAndFill()),g=tabType(s.schema).create({[TabAttrs.id]:h,[TabAttrs.dataDiplodocid]:h,[TabAttrs.dataDiplodocKey]:h,[TabAttrs.dataDiplodocIsActive]:"false",[TabAttrs.class]:tabInactiveClassname,[TabAttrs.role]:"tab",[TabAttrs.ariaControls]:p}),{tr:y}=s;return u.forEach(A=>{A.pos=A.pos+e.pos+1}),c.forEach(A=>{A.pos=A.pos+e.pos+1}),a==null||a(y.insert(d.pos+d.node.nodeSize,m).insert(o.pos+o.node.nodeSize,g).setSelection(TextSelection.create(y.doc,o.pos+o.node.nodeSize+1))),l==null||l.focus(),l&&execAfterPaint(()=>switchTabById(l.dom,h)),!0},removeTab=(o,e)=>(s,a,l)=>{const u=findChildren(e.node,m=>m.type.name===tabsListType(s.schema).name)[0],c=findChildIndex(u.node,o.node),d=findChildren(u.node,m=>m.type.name===tabType(s.schema).name),h=findChildren(e.node,m=>m.type.name===tabPanelType(s.schema).name),p=h.filter(m=>m.node.attrs[TabPanelAttrs.ariaLabelledby]===o.node.attrs[TabAttrs.dataDiplodocid])[0];if(p&&a){const{tr:m}=s;if(d.length<=1)m.delete(e.pos,e.pos+e.node.nodeSize);else{const g=c-1<0?1:c-1;d.forEach(T=>{T.pos=T.pos+e.pos+2}),h.forEach(T=>{T.pos=T.pos+e.pos+1});const y=d[g],A=y.node.attrs[TabAttrs.dataDiplodocid];m.delete(p.pos,p.pos+p.node.nodeSize).delete(o.pos,o.pos+o.node.nodeSize).setSelection(TextSelection.create(m.doc,m.mapping.map(y.pos+y.node.nodeSize-1))),l&&execAfterPaint(()=>switchTabById(l.dom,A))}return a(m),l==null||l.focus(),!0}return!1},removeTabWhenCursorAtTheStartOfTab=(o,e)=>{const s=findParentNodeOfType(tabType(o.schema))(o.selection),a=findParentNodeOfType(tabsType(o.schema))(o.selection);return a&&s&&o.selection.from===s.pos+1&&o.selection.from===o.selection.to?removeTab(s,a)(o,e):!1},joinBackwardToOpenTab=(o,e)=>{const s=get$Cursor(o.selection);if(!s||s.parentOffset!==0)return!1;const a=s.index(s.depth-1);if(a<=0||s.node(s.depth-1).child(a-1).type!==tabsType(o.schema))return!1;const u=findParentNodeOfTypeClosestToPos(o.doc.resolve(s.pos-2),tabsType(o.schema));if(!u)return!1;const c=findChildren(u.node,d=>d.attrs.class===tabPanelActiveClassname)[0];if(e){const d=c.pos+u.pos+c.node.nodeSize,h=o.tr;h.delete(s.before(),s.after()),h.insert(d,s.parent),h.setSelection(TextSelection.create(h.doc,d+1)),e(h.scrollIntoView())}return!0},crossSvg=`<svg width="10" height="10" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg">
<path fill="currentColor" d="M9.75592 8.57741C10.0814 8.90285 10.0814 9.43049 9.75592 9.75592C9.43049 10.0814 8.90285 10.0814 8.57741 9.75592L5 6.17851L1.42259 9.75592C1.09715 10.0814 0.569515 10.0814 0.244078 9.75592C-0.0813592 9.43049 -0.0813592 8.90285 0.244078 8.57741L3.82149 5L0.244078 1.42259C-0.0813592 1.09715 -0.0813592 0.569515 0.244078 0.244078C0.569515 -0.0813592 1.09715 -0.0813592 1.42259 0.244078L5 3.82149L8.57741 0.244078C8.90285 -0.0813592 9.43049 -0.0813592 9.75592 0.244078C10.0814 0.569515 10.0814 1.09715 9.75592 1.42259L6.17851 5L9.75592 8.57741Z"/>
</svg>`,plusSvg=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
<path fill="currentColor" d="M9 7h4a1 1 0 1 1 0 2H9v4a1 1 0 1 1-2 0V9H3a1 1 0 1 1 0-2h4V3a1 1 0 1 1 2 0v4z"/>
</svg>`,cnYfmTab=cn("yfm-tab"),ignoreMutation=(o,e,s)=>a=>!!(a instanceof MutationRecord&&a.type==="attributes"&&a.attributeName),getTabNodes=(o,e)=>{const s=findParentNodeOfTypeClosestToPos(o.tr.doc.resolve(e()+1),tabType(o.schema)),a=findParentNodeOfTypeClosestToPos(o.tr.doc.resolve(e()),tabsType(o.schema));return{currentTab:s,tabsParentNode:a}},tabView=(o,e,s)=>{const a=document.createElement("div"),l=document.createElement("div");l.setAttribute("class",cnYfmTab("wrapper"));const u=document.createElement("div");u.setAttribute("class",cnYfmTab("view")),l.addEventListener("click",()=>{a.click(),e.focus(),o.nodeSize<3&&execAfterPaint(()=>{const h=s();if(h!==void 0){const{tr:p}=e.state;e.dispatch(p.setSelection(TextSelection.create(p.doc,h+1)).scrollIntoView())}})});const c=document.createElement("div");c.setAttribute("class",cnYfmTab("remove-button")),c.innerHTML=crossSvg,c.contentEditable="false",c.addEventListener("click",()=>{const{state:h,dispatch:p}=e,{currentTab:m,tabsParentNode:g}=getTabNodes(h,s);m&&g&&removeTab(m,g)(h,p,e)});const d=document.createElement("div");d.setAttribute("class",cnYfmTab("create-button")),d.innerHTML=plusSvg,d.contentEditable="false",d.addEventListener("click",()=>{const{state:h,dispatch:p}=e,{currentTab:m,tabsParentNode:g}=getTabNodes(h,s);m&&g&&createTab(m,g)(h,p,e)}),a.draggable=!1;for(const h in o.attrs)Object.prototype.hasOwnProperty.call(o.attrs,h)&&a.setAttribute(h,o.attrs[h]);return l.appendChild(u),l.appendChild(c),a.appendChild(l),a.appendChild(d),{dom:a,contentDOM:u,destroy(){a.remove()},ignoreMutation:ignoreMutation()}},tabPanelView=(o,e,s)=>({ignoreMutation:ignoreMutation()}),vtabView=(o,e,s)=>({ignoreMutation:ignoreMutation()}),vtabInputView=(o,e,s)=>({ignoreMutation:ignoreMutation()}),actionName="toYfmTabs",YfmTabs=o=>{o.use(YfmTabsSpecs,{tabView:()=>tabView,tabPanelView:()=>tabPanelView,vtabView:()=>vtabView,vtabInputView:()=>vtabInputView}),o.addKeymap(()=>({Backspace:chainCommands(removeTabWhenCursorAtTheStartOfTab,joinBackwardToOpenTab),ArrowDown:tabPanelArrowDown,Enter:chainCommands(tabEnter,liftEmptyBlockFromTabPanel),"Shift-Enter":tabEnter}),o.Priority.High),o.addAction(actionName,()=>createYfmTabs),o.addPlugin(dragAutoSwitch)},en$c={"confirm-cancel":"Cancel","confirm-ok":"Close","confirm-title":"Do you want to close the GPT editor?","help-with-text":"Help with text"},ru$c={"confirm-cancel":"","confirm-ok":"","confirm-title":"   GPT?","help-with-text":"  "};registerKeyset("gpt",{en:en$c,ru:ru$c});const cnGptButton=n("gpt-button");ToolbarDataType.SingleButton,cnGptButton();const dislike$1="Bad response",error$1="An error occurred",like$1="Good response",more$1="More",refetch$1="Try again",replace$2="Replace the selected text",en$b={"answer-title":"What do you want to do with the response?","close-button":"Close",dislike:dislike$1,error:error$1,"feedback-message":"Thanks for your feedback!","fresh-start-button":"Start again",like:like$1,more:more$1,"only-presets-title":"Help with text",refetch:refetch$1,replace:replace$2,"replace-disabled":"Insert text","try-again":"Try again","alert-gpt-presets-info":"Highlight text to see GPT presets"},dislike=" ",error=" ",like=" ",more="",refetch=" ",replace$1="  ",ru$b={"answer-title":"     ?","close-button":"",dislike,error,"feedback-message":"  !","fresh-start-button":" ",like,more,"only-presets-title":"  ",refetch,replace:replace$1,"replace-disabled":" ","try-again":"","alert-gpt-presets-info":" ,    GPT"};registerKeyset("gpt-dialog",{en:en$b,ru:ru$b});const en$a={"error-text":"An error occurred while generating a reply, please retry the request","retry-button":"Try again","start-again-button":"To the beginning"},ru$a={"error-text":"   ,   ","retry-button":"","start-again-button":" "};registerKeyset("gpt-dialog-error-screen",{en:en$a,ru:ru$a});var reservedModifierKeywords=["shift","alt","meta","mod","ctrl"],mappedKeys={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function mapKey(o){return(o&&mappedKeys[o]||o||"").trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function isHotkeyModifier(o){return reservedModifierKeywords.includes(o)}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(o){o.key!==void 0&&pushToCurrentlyPressedKeys([mapKey(o.key),mapKey(o.code)])}),document.addEventListener("keyup",function(o){o.key!==void 0&&removeFromCurrentlyPressedKeys([mapKey(o.key),mapKey(o.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){currentlyPressedKeys.clear()})})();var currentlyPressedKeys=new Set;function pushToCurrentlyPressedKeys(o){var e=Array.isArray(o)?o:[o];currentlyPressedKeys.has("meta")&&currentlyPressedKeys.forEach(function(s){return!isHotkeyModifier(s)&&currentlyPressedKeys.delete(s.toLowerCase())}),e.forEach(function(s){return currentlyPressedKeys.add(s.toLowerCase())})}function removeFromCurrentlyPressedKeys(o){var e=Array.isArray(o)?o:[o];o==="meta"?currentlyPressedKeys.clear():e.forEach(function(s){return currentlyPressedKeys.delete(s.toLowerCase())})}const en$9={"loading-text":"GPT is generating a response..."},ru$9={"loading-text":"GPT  ..."};registerKeyset("gpt-dialog-loading-screen",{en:en$9,ru:ru$9}),new PluginKey("gpt-widget");let rangeFrom=[],rangeTo=[];(()=>{let o="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,s=0;e<o.length;e++)(e%2?rangeTo:rangeFrom).push(s=s+o[e])})();function isExtendingChar(o){if(o<768)return!1;for(let e=0,s=rangeFrom.length;;){let a=e+s>>1;if(o<rangeFrom[a])s=a;else if(o>=rangeTo[a])e=a+1;else return!0;if(e==s)return!1}}function isRegionalIndicator(o){return o>=127462&&o<=127487}const ZWJ=8205;function findClusterBreak$1(o,e,s=!0,a=!0){return(s?nextClusterBreak:prevClusterBreak)(o,e,a)}function nextClusterBreak(o,e,s){if(e==o.length)return e;e&&surrogateLow$1(o.charCodeAt(e))&&surrogateHigh$1(o.charCodeAt(e-1))&&e--;let a=codePointAt$1(o,e);for(e+=codePointSize$1(a);e<o.length;){let l=codePointAt$1(o,e);if(a==ZWJ||l==ZWJ||s&&isExtendingChar(l))e+=codePointSize$1(l),a=l;else if(isRegionalIndicator(l)){let u=0,c=e-2;for(;c>=0&&isRegionalIndicator(codePointAt$1(o,c));)u++,c-=2;if(u%2==0)break;e+=2}else break}return e}function prevClusterBreak(o,e,s){for(;e>0;){let a=nextClusterBreak(o,e-2,s);if(a<e)return a;e--}return 0}function codePointAt$1(o,e){let s=o.charCodeAt(e);if(!surrogateHigh$1(s)||e+1==o.length)return s;let a=o.charCodeAt(e+1);return surrogateLow$1(a)?(s-55296<<10)+(a-56320)+65536:s}function surrogateLow$1(o){return o>=56320&&o<57344}function surrogateHigh$1(o){return o>=55296&&o<56320}function codePointSize$1(o){return o<65536?1:2}class Text{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,s,a){[e,s]=clip(this,e,s);let l=[];return this.decompose(0,e,l,2),a.length&&a.decompose(0,a.length,l,3),this.decompose(s,this.length,l,1),TextNode.from(l,this.length-(s-e)+a.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,s=this.length){[e,s]=clip(this,e,s);let a=[];return this.decompose(e,s,a,0),TextNode.from(a,s-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let s=this.scanIdentical(e,1),a=this.length-this.scanIdentical(e,-1),l=new RawTextCursor(this),u=new RawTextCursor(e);for(let c=s,d=s;;){if(l.next(c),u.next(c),c=0,l.lineBreak!=u.lineBreak||l.done!=u.done||l.value!=u.value)return!1;if(d+=l.value.length,l.done||d>=a)return!0}}iter(e=1){return new RawTextCursor(this,e)}iterRange(e,s=this.length){return new PartialTextCursor(this,e,s)}iterLines(e,s){let a;if(e==null)a=this.iter();else{s==null&&(s=this.lines+1);let l=this.line(e).from;a=this.iterRange(l,Math.max(l,s==this.lines+1?this.length:s<=1?0:this.line(s-1).to))}return new LineCursor(a)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Text.empty:e.length<=32?new TextLeaf(e):TextNode.from(TextLeaf.split(e,[]))}}class TextLeaf extends Text{constructor(e,s=textLength(e)){super(),this.text=e,this.length=s}get lines(){return this.text.length}get children(){return null}lineInner(e,s,a,l){for(let u=0;;u++){let c=this.text[u],d=l+c.length;if((s?a:d)>=e)return new Line$1(l,d,a,c);l=d+1,a++}}decompose(e,s,a,l){let u=e<=0&&s>=this.length?this:new TextLeaf(sliceText(this.text,e,s),Math.min(s,this.length)-Math.max(0,e));if(l&1){let c=a.pop(),d=appendText(u.text,c.text.slice(),0,u.length);if(d.length<=32)a.push(new TextLeaf(d,c.length+u.length));else{let h=d.length>>1;a.push(new TextLeaf(d.slice(0,h)),new TextLeaf(d.slice(h)))}}else a.push(u)}replace(e,s,a){if(!(a instanceof TextLeaf))return super.replace(e,s,a);[e,s]=clip(this,e,s);let l=appendText(this.text,appendText(a.text,sliceText(this.text,0,e)),s),u=this.length+a.length-(s-e);return l.length<=32?new TextLeaf(l,u):TextNode.from(TextLeaf.split(l,[]),u)}sliceString(e,s=this.length,a=`
`){[e,s]=clip(this,e,s);let l="";for(let u=0,c=0;u<=s&&c<this.text.length;c++){let d=this.text[c],h=u+d.length;u>e&&c&&(l+=a),e<h&&s>u&&(l+=d.slice(Math.max(0,e-u),s-u)),u=h+1}return l}flatten(e){for(let s of this.text)e.push(s)}scanIdentical(){return 0}static split(e,s){let a=[],l=-1;for(let u of e)a.push(u),l+=u.length+1,a.length==32&&(s.push(new TextLeaf(a,l)),a=[],l=-1);return l>-1&&s.push(new TextLeaf(a,l)),s}}class TextNode extends Text{constructor(e,s){super(),this.children=e,this.length=s,this.lines=0;for(let a of e)this.lines+=a.lines}lineInner(e,s,a,l){for(let u=0;;u++){let c=this.children[u],d=l+c.length,h=a+c.lines-1;if((s?h:d)>=e)return c.lineInner(e,s,a,l);l=d+1,a=h+1}}decompose(e,s,a,l){for(let u=0,c=0;c<=s&&u<this.children.length;u++){let d=this.children[u],h=c+d.length;if(e<=h&&s>=c){let p=l&((c<=e?1:0)|(h>=s?2:0));c>=e&&h<=s&&!p?a.push(d):d.decompose(e-c,s-c,a,p)}c=h+1}}replace(e,s,a){if([e,s]=clip(this,e,s),a.lines<this.lines)for(let l=0,u=0;l<this.children.length;l++){let c=this.children[l],d=u+c.length;if(e>=u&&s<=d){let h=c.replace(e-u,s-u,a),p=this.lines-c.lines+h.lines;if(h.lines<p>>4&&h.lines>p>>6){let m=this.children.slice();return m[l]=h,new TextNode(m,this.length-(s-e)+a.length)}return super.replace(u,d,h)}u=d+1}return super.replace(e,s,a)}sliceString(e,s=this.length,a=`
`){[e,s]=clip(this,e,s);let l="";for(let u=0,c=0;u<this.children.length&&c<=s;u++){let d=this.children[u],h=c+d.length;c>e&&u&&(l+=a),e<h&&s>c&&(l+=d.sliceString(e-c,s-c,a)),c=h+1}return l}flatten(e){for(let s of this.children)s.flatten(e)}scanIdentical(e,s){if(!(e instanceof TextNode))return 0;let a=0,[l,u,c,d]=s>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;l+=s,u+=s){if(l==c||u==d)return a;let h=this.children[l],p=e.children[u];if(h!=p)return a+h.scanIdentical(p,s);a+=h.length+1}}static from(e,s=e.reduce((a,l)=>a+l.length+1,-1)){let a=0;for(let A of e)a+=A.lines;if(a<32){let A=[];for(let T of e)T.flatten(A);return new TextLeaf(A,s)}let l=Math.max(32,a>>5),u=l<<1,c=l>>1,d=[],h=0,p=-1,m=[];function g(A){let T;if(A.lines>u&&A instanceof TextNode)for(let E of A.children)g(E);else A.lines>c&&(h>c||!h)?(y(),d.push(A)):A instanceof TextLeaf&&h&&(T=m[m.length-1])instanceof TextLeaf&&A.lines+T.lines<=32?(h+=A.lines,p+=A.length+1,m[m.length-1]=new TextLeaf(T.text.concat(A.text),T.length+1+A.length)):(h+A.lines>l&&y(),h+=A.lines,p+=A.length+1,m.push(A))}function y(){h!=0&&(d.push(m.length==1?m[0]:TextNode.from(m,p)),p=-1,h=m.length=0)}for(let A of e)g(A);return y(),d.length==1?d[0]:new TextNode(d,s)}}Text.empty=new TextLeaf([""],0);function textLength(o){let e=-1;for(let s of o)e+=s.length+1;return e}function appendText(o,e,s=0,a=1e9){for(let l=0,u=0,c=!0;u<o.length&&l<=a;u++){let d=o[u],h=l+d.length;h>=s&&(h>a&&(d=d.slice(0,a-l)),l<s&&(d=d.slice(s-l)),c?(e[e.length-1]+=d,c=!1):e.push(d)),l=h+1}return e}function sliceText(o,e,s){return appendText(o,[""],e,s)}class RawTextCursor{constructor(e,s=1){this.dir=s,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[s>0?1:(e instanceof TextLeaf?e.text.length:e.children.length)<<1]}nextInner(e,s){for(this.done=this.lineBreak=!1;;){let a=this.nodes.length-1,l=this.nodes[a],u=this.offsets[a],c=u>>1,d=l instanceof TextLeaf?l.text.length:l.children.length;if(c==(s>0?d:0)){if(a==0)return this.done=!0,this.value="",this;s>0&&this.offsets[a-1]++,this.nodes.pop(),this.offsets.pop()}else if((u&1)==(s>0?0:1)){if(this.offsets[a]+=s,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(l instanceof TextLeaf){let h=l.text[c+(s<0?-1:0)];if(this.offsets[a]+=s,h.length>Math.max(0,e))return this.value=e==0?h:s>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=l.children[c+(s<0?-1:0)];e>h.length?(e-=h.length,this.offsets[a]+=s):(s<0&&this.offsets[a]--,this.nodes.push(h),this.offsets.push(s>0?1:(h instanceof TextLeaf?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class PartialTextCursor{constructor(e,s,a){this.value="",this.done=!1,this.cursor=new RawTextCursor(e,s>a?-1:1),this.pos=s>a?e.length:0,this.from=Math.min(s,a),this.to=Math.max(s,a)}nextInner(e,s){if(s<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,s<0?this.pos-this.to:this.from-this.pos);let a=s<0?this.pos-this.from:this.to-this.pos;e>a&&(e=a),a-=e;let{value:l}=this.cursor.next(e);return this.pos+=(l.length+e)*s,this.value=l.length<=a?l:s<0?l.slice(l.length-a):l.slice(0,a),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:s,lineBreak:a,value:l}=this.inner.next(e);return s&&this.afterBreak?(this.value="",this.afterBreak=!1):s?(this.done=!0,this.value=""):a?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=l,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});let Line$1=class{constructor(e,s,a,l){this.from=e,this.to=s,this.number=a,this.text=l}get length(){return this.to-this.from}};function clip(o,e,s){return e=Math.max(0,Math.min(o.length,e)),[e,Math.max(e,Math.min(o.length,s))]}function findClusterBreak(o,e,s=!0,a=!0){return findClusterBreak$1(o,e,s,a)}function surrogateLow(o){return o>=56320&&o<57344}function surrogateHigh(o){return o>=55296&&o<56320}function codePointAt(o,e){let s=o.charCodeAt(e);if(!surrogateHigh(s)||e+1==o.length)return s;let a=o.charCodeAt(e+1);return surrogateLow(a)?(s-55296<<10)+(a-56320)+65536:s}function fromCodePoint(o){return o<=65535?String.fromCharCode(o):(o-=65536,String.fromCharCode((o>>10)+55296,(o&1023)+56320))}function codePointSize(o){return o<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=(function(o){return o[o.Simple=0]="Simple",o[o.TrackDel=1]="TrackDel",o[o.TrackBefore=2]="TrackBefore",o[o.TrackAfter=3]="TrackAfter",o})(MapMode||(MapMode={}));class ChangeDesc{constructor(e){this.sections=e}get length(){let e=0;for(let s=0;s<this.sections.length;s+=2)e+=this.sections[s];return e}get newLength(){let e=0;for(let s=0;s<this.sections.length;s+=2){let a=this.sections[s+1];e+=a<0?this.sections[s]:a}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let s=0,a=0,l=0;s<this.sections.length;){let u=this.sections[s++],c=this.sections[s++];c<0?(e(a,l,u),l+=u):l+=c,a+=u}}iterChangedRanges(e,s=!1){iterChanges(this,e,s)}get invertedDesc(){let e=[];for(let s=0;s<this.sections.length;){let a=this.sections[s++],l=this.sections[s++];l<0?e.push(a,l):e.push(l,a)}return new ChangeDesc(e)}composeDesc(e){return this.empty?e:e.empty?this:composeSets(this,e)}mapDesc(e,s=!1){return e.empty?this:mapSet(this,e,s)}mapPos(e,s=-1,a=MapMode.Simple){let l=0,u=0;for(let c=0;c<this.sections.length;){let d=this.sections[c++],h=this.sections[c++],p=l+d;if(h<0){if(p>e)return u+(e-l);u+=d}else{if(a!=MapMode.Simple&&p>=e&&(a==MapMode.TrackDel&&l<e&&p>e||a==MapMode.TrackBefore&&l<e||a==MapMode.TrackAfter&&p>e))return null;if(p>e||p==e&&s<0&&!d)return e==l||s<0?u:u+h;u+=h}l=p}if(e>l)throw new RangeError(`Position ${e} is out of range for changeset of length ${l}`);return u}touchesRange(e,s=e){for(let a=0,l=0;a<this.sections.length&&l<=s;){let u=this.sections[a++],c=this.sections[a++],d=l+u;if(c>=0&&l<=s&&d>=e)return l<e&&d>s?"cover":!0;l=d}return!1}toString(){let e="";for(let s=0;s<this.sections.length;){let a=this.sections[s++],l=this.sections[s++];e+=(e?" ":"")+a+(l>=0?":"+l:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(s=>typeof s!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(e)}static create(e){return new ChangeDesc(e)}}class ChangeSet extends ChangeDesc{constructor(e,s){super(e),this.inserted=s}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(s,a,l,u,c)=>e=e.replace(l,l+(a-s),c),!1),e}mapDesc(e,s=!1){return mapSet(this,e,s,!0)}invert(e){let s=this.sections.slice(),a=[];for(let l=0,u=0;l<s.length;l+=2){let c=s[l],d=s[l+1];if(d>=0){s[l]=d,s[l+1]=c;let h=l>>1;for(;a.length<h;)a.push(Text.empty);a.push(c?e.slice(u,u+c):Text.empty)}u+=c}return new ChangeSet(s,a)}compose(e){return this.empty?e:e.empty?this:composeSets(this,e,!0)}map(e,s=!1){return e.empty?this:mapSet(this,e,s,!0)}iterChanges(e,s=!1){iterChanges(this,e,s)}get desc(){return ChangeDesc.create(this.sections)}filter(e){let s=[],a=[],l=[],u=new SectionIter(this);e:for(let c=0,d=0;;){let h=c==e.length?1e9:e[c++];for(;d<h||d==h&&u.len==0;){if(u.done)break e;let m=Math.min(u.len,h-d);addSection(l,m,-1);let g=u.ins==-1?-1:u.off==0?u.ins:0;addSection(s,m,g),g>0&&addInsert(a,s,u.text),u.forward(m),d+=m}let p=e[c++];for(;d<p;){if(u.done)break e;let m=Math.min(u.len,p-d);addSection(s,m,-1),addSection(l,m,u.ins==-1?-1:u.off==0?u.ins:0),u.forward(m),d+=m}}return{changes:new ChangeSet(s,a),filtered:ChangeDesc.create(l)}}toJSON(){let e=[];for(let s=0;s<this.sections.length;s+=2){let a=this.sections[s],l=this.sections[s+1];l<0?e.push(a):l==0?e.push([a]):e.push([a].concat(this.inserted[s>>1].toJSON()))}return e}static of(e,s,a){let l=[],u=[],c=0,d=null;function h(m=!1){if(!m&&!l.length)return;c<s&&addSection(l,s-c,-1);let g=new ChangeSet(l,u);d=d?d.compose(g.map(d)):g,l=[],u=[],c=0}function p(m){if(Array.isArray(m))for(let g of m)p(g);else if(m instanceof ChangeSet){if(m.length!=s)throw new RangeError(`Mismatched change set length (got ${m.length}, expected ${s})`);h(),d=d?d.compose(m.map(d)):m}else{let{from:g,to:y=g,insert:A}=m;if(g>y||g<0||y>s)throw new RangeError(`Invalid change range ${g} to ${y} (in doc of length ${s})`);let T=A?typeof A=="string"?Text.of(A.split(a||DefaultSplit)):A:Text.empty,E=T.length;if(g==y&&E==0)return;g<c&&h(),g>c&&addSection(l,g-c,-1),addSection(l,y-g,E),addInsert(u,l,T),c=y}}return p(e),h(!d),d}static empty(e){return new ChangeSet(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let s=[],a=[];for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="number")s.push(u,-1);else{if(!Array.isArray(u)||typeof u[0]!="number"||u.some((c,d)=>d&&typeof c!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(u.length==1)s.push(u[0],0);else{for(;a.length<l;)a.push(Text.empty);a[l]=Text.of(u.slice(1)),s.push(u[0],a[l].length)}}}return new ChangeSet(s,a)}static createSet(e,s){return new ChangeSet(e,s)}}function addSection(o,e,s,a=!1){if(e==0&&s<=0)return;let l=o.length-2;l>=0&&s<=0&&s==o[l+1]?o[l]+=e:l>=0&&e==0&&o[l]==0?o[l+1]+=s:a?(o[l]+=e,o[l+1]+=s):o.push(e,s)}function addInsert(o,e,s){if(s.length==0)return;let a=e.length-2>>1;if(a<o.length)o[o.length-1]=o[o.length-1].append(s);else{for(;o.length<a;)o.push(Text.empty);o.push(s)}}function iterChanges(o,e,s){let a=o.inserted;for(let l=0,u=0,c=0;c<o.sections.length;){let d=o.sections[c++],h=o.sections[c++];if(h<0)l+=d,u+=d;else{let p=l,m=u,g=Text.empty;for(;p+=d,m+=h,h&&a&&(g=g.append(a[c-2>>1])),!(s||c==o.sections.length||o.sections[c+1]<0);)d=o.sections[c++],h=o.sections[c++];e(l,p,u,m,g),l=p,u=m}}}function mapSet(o,e,s,a=!1){let l=[],u=a?[]:null,c=new SectionIter(o),d=new SectionIter(e);for(let h=-1;;){if(c.done&&d.len||d.done&&c.len)throw new Error("Mismatched change set lengths");if(c.ins==-1&&d.ins==-1){let p=Math.min(c.len,d.len);addSection(l,p,-1),c.forward(p),d.forward(p)}else if(d.ins>=0&&(c.ins<0||h==c.i||c.off==0&&(d.len<c.len||d.len==c.len&&!s))){let p=d.len;for(addSection(l,d.ins,-1);p;){let m=Math.min(c.len,p);c.ins>=0&&h<c.i&&c.len<=m&&(addSection(l,0,c.ins),u&&addInsert(u,l,c.text),h=c.i),c.forward(m),p-=m}d.next()}else if(c.ins>=0){let p=0,m=c.len;for(;m;)if(d.ins==-1){let g=Math.min(m,d.len);p+=g,m-=g,d.forward(g)}else if(d.ins==0&&d.len<m)m-=d.len,d.next();else break;addSection(l,p,h<c.i?c.ins:0),u&&h<c.i&&addInsert(u,l,c.text),h=c.i,c.forward(c.len-m)}else{if(c.done&&d.done)return u?ChangeSet.createSet(l,u):ChangeDesc.create(l);throw new Error("Mismatched change set lengths")}}}function composeSets(o,e,s=!1){let a=[],l=s?[]:null,u=new SectionIter(o),c=new SectionIter(e);for(let d=!1;;){if(u.done&&c.done)return l?ChangeSet.createSet(a,l):ChangeDesc.create(a);if(u.ins==0)addSection(a,u.len,0,d),u.next();else if(c.len==0&&!c.done)addSection(a,0,c.ins,d),l&&addInsert(l,a,c.text),c.next();else{if(u.done||c.done)throw new Error("Mismatched change set lengths");{let h=Math.min(u.len2,c.len),p=a.length;if(u.ins==-1){let m=c.ins==-1?-1:c.off?0:c.ins;addSection(a,h,m,d),l&&m&&addInsert(l,a,c.text)}else c.ins==-1?(addSection(a,u.off?0:u.len,h,d),l&&addInsert(l,a,u.textBit(h))):(addSection(a,u.off?0:u.len,c.off?0:c.ins,d),l&&!c.off&&addInsert(l,a,c.text));d=(u.ins>h||c.ins>=0&&c.len>h)&&(d||a.length>p),u.forward2(h),c.forward(h)}}}}class SectionIter{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,s=this.i-2>>1;return s>=e.length?Text.empty:e[s]}textBit(e){let{inserted:s}=this.set,a=this.i-2>>1;return a>=s.length&&!e?Text.empty:s[a].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class SelectionRange{constructor(e,s,a){this.from=e,this.to=s,this.flags=a}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,s=-1){let a,l;return this.empty?a=l=e.mapPos(this.from,s):(a=e.mapPos(this.from,1),l=e.mapPos(this.to,-1)),a==this.from&&l==this.to?this:new SelectionRange(a,l,this.flags)}extend(e,s=e){if(e<=this.anchor&&s>=this.anchor)return EditorSelection.range(e,s);let a=Math.abs(e-this.anchor)>Math.abs(s-this.anchor)?e:s;return EditorSelection.range(this.anchor,a)}eq(e,s=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!s||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(e.anchor,e.head)}static create(e,s,a){return new SelectionRange(e,s,a)}}class EditorSelection{constructor(e,s){this.ranges=e,this.mainIndex=s}map(e,s=-1){return e.empty?this:EditorSelection.create(this.ranges.map(a=>a.map(e,s)),this.mainIndex)}eq(e,s=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let a=0;a<this.ranges.length;a++)if(!this.ranges[a].eq(e.ranges[a],s))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(e,s=!0){return EditorSelection.create([e].concat(this.ranges),s?0:this.mainIndex+1)}replaceRange(e,s=this.mainIndex){let a=this.ranges.slice();return a[s]=e,EditorSelection.create(a,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(e.ranges.map(s=>SelectionRange.fromJSON(s)),e.main)}static single(e,s=e){return new EditorSelection([EditorSelection.range(e,s)],0)}static create(e,s=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let a=0,l=0;l<e.length;l++){let u=e[l];if(u.empty?u.from<=a:u.from<a)return EditorSelection.normalized(e.slice(),s);a=u.to}return new EditorSelection(e,s)}static cursor(e,s=0,a,l){return SelectionRange.create(e,e,(s==0?0:s<0?8:16)|(a==null?7:Math.min(6,a))|(l??16777215)<<6)}static range(e,s,a,l){let u=(a??16777215)<<6|(l==null?7:Math.min(6,l));return s<e?SelectionRange.create(s,e,48|u):SelectionRange.create(e,s,(s>e?8:0)|u)}static normalized(e,s=0){let a=e[s];e.sort((l,u)=>l.from-u.from),s=e.indexOf(a);for(let l=1;l<e.length;l++){let u=e[l],c=e[l-1];if(u.empty?u.from<=c.to:u.from<c.to){let d=c.from,h=Math.max(u.to,c.to);l<=s&&s--,e.splice(--l,2,u.anchor>u.head?EditorSelection.range(h,d):EditorSelection.range(d,h))}}return new EditorSelection(e,s)}}function checkSelection(o,e){for(let s of o.ranges)if(s.to>e)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(e,s,a,l,u){this.combine=e,this.compareInput=s,this.compare=a,this.isStatic=l,this.id=nextID++,this.default=e([]),this.extensions=typeof u=="function"?u(this):u}get reader(){return this}static define(e={}){return new Facet(e.combine||(s=>s),e.compareInput||((s,a)=>s===a),e.compare||(e.combine?(s,a)=>s===a:sameArray$1),!!e.static,e.enables)}of(e){return new FacetProvider([],this,0,e)}compute(e,s){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,1,s)}computeN(e,s){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,2,s)}from(e,s){return s||(s=a=>a),this.compute([e],a=>s(a.field(e)))}}function sameArray$1(o,e){return o==e||o.length==e.length&&o.every((s,a)=>s===e[a])}class FacetProvider{constructor(e,s,a,l){this.dependencies=e,this.facet=s,this.type=a,this.value=l,this.id=nextID++}dynamicSlot(e){var s;let a=this.value,l=this.facet.compareInput,u=this.id,c=e[u]>>1,d=this.type==2,h=!1,p=!1,m=[];for(let g of this.dependencies)g=="doc"?h=!0:g=="selection"?p=!0:(((s=e[g.id])!==null&&s!==void 0?s:1)&1)==0&&m.push(e[g.id]);return{create(g){return g.values[c]=a(g),1},update(g,y){if(h&&y.docChanged||p&&(y.docChanged||y.selection)||ensureAll(g,m)){let A=a(g);if(d?!compareArray(A,g.values[c],l):!l(A,g.values[c]))return g.values[c]=A,1}return 0},reconfigure:(g,y)=>{let A,T=y.config.address[u];if(T!=null){let E=getAddr(y,T);if(this.dependencies.every(v=>v instanceof Facet?y.facet(v)===g.facet(v):v instanceof StateField?y.field(v,!1)==g.field(v,!1):!0)||(d?compareArray(A=a(g),E,l):l(A=a(g),E)))return g.values[c]=E,0}else A=a(g);return g.values[c]=A,1}}}}function compareArray(o,e,s){if(o.length!=e.length)return!1;for(let a=0;a<o.length;a++)if(!s(o[a],e[a]))return!1;return!0}function ensureAll(o,e){let s=!1;for(let a of e)ensureAddr(o,a)&1&&(s=!0);return s}function dynamicFacetSlot(o,e,s){let a=s.map(h=>o[h.id]),l=s.map(h=>h.type),u=a.filter(h=>!(h&1)),c=o[e.id]>>1;function d(h){let p=[];for(let m=0;m<a.length;m++){let g=getAddr(h,a[m]);if(l[m]==2)for(let y of g)p.push(y);else p.push(g)}return e.combine(p)}return{create(h){for(let p of a)ensureAddr(h,p);return h.values[c]=d(h),1},update(h,p){if(!ensureAll(h,u))return 0;let m=d(h);return e.compare(m,h.values[c])?0:(h.values[c]=m,1)},reconfigure(h,p){let m=ensureAll(h,a),g=p.config.facets[e.id],y=p.facet(e);if(g&&!m&&sameArray$1(s,g))return h.values[c]=y,0;let A=d(h);return e.compare(A,y)?(h.values[c]=y,0):(h.values[c]=A,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(e,s,a,l,u){this.id=e,this.createF=s,this.updateF=a,this.compareF=l,this.spec=u,this.provides=void 0}static define(e){let s=new StateField(nextID++,e.create,e.update,e.compare||((a,l)=>a===l),e);return e.provide&&(s.provides=e.provide(s)),s}create(e){let s=e.facet(initField).find(a=>a.field==this);return((s==null?void 0:s.create)||this.createF)(e)}slot(e){let s=e[this.id]>>1;return{create:a=>(a.values[s]=this.create(a),1),update:(a,l)=>{let u=a.values[s],c=this.updateF(u,l);return this.compareF(u,c)?0:(a.values[s]=c,1)},reconfigure:(a,l)=>{let u=a.facet(initField),c=l.facet(initField),d;return(d=u.find(h=>h.field==this))&&d!=c.find(h=>h.field==this)?(a.values[s]=d.create(a),1):l.config.address[this.id]!=null?(a.values[s]=l.field(this),0):(a.values[s]=this.create(a),1)}}}init(e){return[this,initField.of({field:this,create:e})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(o){return e=>new PrecExtension(e,o)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(e,s){this.inner=e,this.prec=s}}class Compartment{of(e){return new CompartmentInstance(this,e)}reconfigure(e){return Compartment.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class CompartmentInstance{constructor(e,s){this.compartment=e,this.inner=s}}class Configuration{constructor(e,s,a,l,u,c){for(this.base=e,this.compartments=s,this.dynamicSlots=a,this.address=l,this.staticValues=u,this.facets=c,this.statusTemplate=[];this.statusTemplate.length<a.length;)this.statusTemplate.push(0)}staticFacet(e){let s=this.address[e.id];return s==null?e.default:this.staticValues[s>>1]}static resolve(e,s,a){let l=[],u=Object.create(null),c=new Map;for(let y of flatten(e,s,c))y instanceof StateField?l.push(y):(u[y.facet.id]||(u[y.facet.id]=[])).push(y);let d=Object.create(null),h=[],p=[];for(let y of l)d[y.id]=p.length<<1,p.push(A=>y.slot(A));let m=a==null?void 0:a.config.facets;for(let y in u){let A=u[y],T=A[0].facet,E=m&&m[y]||[];if(A.every(v=>v.type==0))if(d[T.id]=h.length<<1|1,sameArray$1(E,A))h.push(a.facet(T));else{let v=T.combine(A.map(_=>_.value));h.push(a&&T.compare(v,a.facet(T))?a.facet(T):v)}else{for(let v of A)v.type==0?(d[v.id]=h.length<<1|1,h.push(v.value)):(d[v.id]=p.length<<1,p.push(_=>v.dynamicSlot(_)));d[T.id]=p.length<<1,p.push(v=>dynamicFacetSlot(v,T,A))}}let g=p.map(y=>y(d));return new Configuration(e,c,g,d,h,u)}}function flatten(o,e,s){let a=[[],[],[],[],[]],l=new Map;function u(c,d){let h=l.get(c);if(h!=null){if(h<=d)return;let p=a[h].indexOf(c);p>-1&&a[h].splice(p,1),c instanceof CompartmentInstance&&s.delete(c.compartment)}if(l.set(c,d),Array.isArray(c))for(let p of c)u(p,d);else if(c instanceof CompartmentInstance){if(s.has(c.compartment))throw new RangeError("Duplicate use of compartment in extensions");let p=e.get(c.compartment)||c.inner;s.set(c.compartment,p),u(p,d)}else if(c instanceof PrecExtension)u(c.inner,c.prec);else if(c instanceof StateField)a[d].push(c),c.provides&&u(c.provides,d);else if(c instanceof FacetProvider)a[d].push(c),c.facet.extensions&&u(c.facet.extensions,Prec_.default);else{let p=c.extension;if(!p)throw new Error(`Unrecognized extension value in extension set (${c}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);u(p,d)}}return u(o,Prec_.default),a.reduce((c,d)=>c.concat(d))}function ensureAddr(o,e){if(e&1)return 2;let s=e>>1,a=o.status[s];if(a==4)throw new Error("Cyclic dependency between fields and/or facets");if(a&2)return a;o.status[s]=4;let l=o.computeSlot(o,o.config.dynamicSlots[s]);return o.status[s]=2|l}function getAddr(o,e){return e&1?o.config.staticValues[e>>1]:o.values[e>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:o=>o.some(e=>e),static:!0}),lineSeparator=Facet.define({combine:o=>o.length?o[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:o=>o.length?o[0]:!1});class Annotation{constructor(e,s){this.type=e,this.value=s}static define(){return new AnnotationType}}class AnnotationType{of(e){return new Annotation(this,e)}}class StateEffectType{constructor(e){this.map=e}of(e){return new StateEffect(this,e)}}class StateEffect{constructor(e,s){this.type=e,this.value=s}map(e){let s=this.type.map(this.value,e);return s===void 0?void 0:s==this.value?this:new StateEffect(this.type,s)}is(e){return this.type==e}static define(e={}){return new StateEffectType(e.map||(s=>s))}static mapEffects(e,s){if(!e.length)return e;let a=[];for(let l of e){let u=l.map(s);u&&a.push(u)}return a}}StateEffect.reconfigure=StateEffect.define(),StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(e,s,a,l,u,c){this.startState=e,this.changes=s,this.selection=a,this.effects=l,this.annotations=u,this.scrollIntoView=c,this._doc=null,this._state=null,a&&checkSelection(a,s.newLength),u.some(d=>d.type==Transaction.time)||(this.annotations=u.concat(Transaction.time.of(Date.now())))}static create(e,s,a,l,u,c){return new Transaction(e,s,a,l,u,c)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let s of this.annotations)if(s.type==e)return s.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let s=this.annotation(Transaction.userEvent);return!!(s&&(s==e||s.length>e.length&&s.slice(0,e.length)==e&&s[e.length]=="."))}}Transaction.time=Annotation.define(),Transaction.userEvent=Annotation.define(),Transaction.addToHistory=Annotation.define(),Transaction.remote=Annotation.define();function joinRanges(o,e){let s=[];for(let a=0,l=0;;){let u,c;if(a<o.length&&(l==e.length||e[l]>=o[a]))u=o[a++],c=o[a++];else if(l<e.length)u=e[l++],c=e[l++];else return s;!s.length||s[s.length-1]<u?s.push(u,c):s[s.length-1]<c&&(s[s.length-1]=c)}}function mergeTransaction(o,e,s){var a;let l,u,c;return s?(l=e.changes,u=ChangeSet.empty(e.changes.length),c=o.changes.compose(e.changes)):(l=e.changes.map(o.changes),u=o.changes.mapDesc(e.changes,!0),c=o.changes.compose(l)),{changes:c,selection:e.selection?e.selection.map(u):(a=o.selection)===null||a===void 0?void 0:a.map(l),effects:StateEffect.mapEffects(o.effects,l).concat(StateEffect.mapEffects(e.effects,u)),annotations:o.annotations.length?o.annotations.concat(e.annotations):e.annotations,scrollIntoView:o.scrollIntoView||e.scrollIntoView}}function resolveTransactionInner(o,e,s){let a=e.selection,l=asArray(e.annotations);return e.userEvent&&(l=l.concat(Transaction.userEvent.of(e.userEvent))),{changes:e.changes instanceof ChangeSet?e.changes:ChangeSet.of(e.changes||[],s,o.facet(lineSeparator)),selection:a&&(a instanceof EditorSelection?a:EditorSelection.single(a.anchor,a.head)),effects:asArray(e.effects),annotations:l,scrollIntoView:!!e.scrollIntoView}}function resolveTransaction(o,e,s){let a=resolveTransactionInner(o,e.length?e[0]:{},o.doc.length);e.length&&e[0].filter===!1&&(s=!1);for(let u=1;u<e.length;u++){e[u].filter===!1&&(s=!1);let c=!!e[u].sequential;a=mergeTransaction(a,resolveTransactionInner(o,e[u],c?a.changes.newLength:o.doc.length),c)}let l=Transaction.create(o,a.changes,a.selection,a.effects,a.annotations,a.scrollIntoView);return extendTransaction(s?filterTransaction(l):l)}function filterTransaction(o){let e=o.startState,s=!0;for(let l of e.facet(changeFilter)){let u=l(o);if(u===!1){s=!1;break}Array.isArray(u)&&(s=s===!0?u:joinRanges(s,u))}if(s!==!0){let l,u;if(s===!1)u=o.changes.invertedDesc,l=ChangeSet.empty(e.doc.length);else{let c=o.changes.filter(s);l=c.changes,u=c.filtered.mapDesc(c.changes).invertedDesc}o=Transaction.create(e,l,o.selection&&o.selection.map(u),StateEffect.mapEffects(o.effects,u),o.annotations,o.scrollIntoView)}let a=e.facet(transactionFilter);for(let l=a.length-1;l>=0;l--){let u=a[l](o);u instanceof Transaction?o=u:Array.isArray(u)&&u.length==1&&u[0]instanceof Transaction?o=u[0]:o=resolveTransaction(e,asArray(u),!1)}return o}function extendTransaction(o){let e=o.startState,s=e.facet(transactionExtender),a=o;for(let l=s.length-1;l>=0;l--){let u=s[l](o);u&&Object.keys(u).length&&(a=mergeTransaction(a,resolveTransactionInner(e,u,o.changes.newLength),!0))}return a==o?o:Transaction.create(e,o.changes,o.selection,a.effects,a.annotations,a.scrollIntoView)}const none$3=[];function asArray(o){return o==null?none$3:Array.isArray(o)?o:[o]}var CharCategory=(function(o){return o[o.Word=0]="Word",o[o.Space=1]="Space",o[o.Other=2]="Other",o})(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(o){}function hasWordChar(o){if(wordChar)return wordChar.test(o);for(let e=0;e<o.length;e++){let s=o[e];if(/\w/.test(s)||s>""&&(s.toUpperCase()!=s.toLowerCase()||nonASCIISingleCaseWordChar.test(s)))return!0}return!1}function makeCategorizer(o){return e=>{if(!/\S/.test(e))return CharCategory.Space;if(hasWordChar(e))return CharCategory.Word;for(let s=0;s<o.length;s++)if(e.indexOf(o[s])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(e,s,a,l,u,c){this.config=e,this.doc=s,this.selection=a,this.values=l,this.status=e.statusTemplate.slice(),this.computeSlot=u,c&&(c._state=this);for(let d=0;d<this.config.dynamicSlots.length;d++)ensureAddr(this,d<<1);this.computeSlot=null}field(e,s=!0){let a=this.config.address[e.id];if(a==null){if(s)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,a),getAddr(this,a)}update(...e){return resolveTransaction(this,e,!0)}applyTransaction(e){let s=this.config,{base:a,compartments:l}=s;for(let d of e.effects)d.is(Compartment.reconfigure)?(s&&(l=new Map,s.compartments.forEach((h,p)=>l.set(p,h)),s=null),l.set(d.value.compartment,d.value.extension)):d.is(StateEffect.reconfigure)?(s=null,a=d.value):d.is(StateEffect.appendConfig)&&(s=null,a=asArray(a).concat(d.value));let u;s?u=e.startState.values.slice():(s=Configuration.resolve(a,l,this),u=new EditorState(s,this.doc,this.selection,s.dynamicSlots.map(()=>null),(h,p)=>p.reconfigure(h,this),null).values);let c=e.startState.facet(allowMultipleSelections)?e.newSelection:e.newSelection.asSingle();new EditorState(s,e.newDoc,c,u,(d,h)=>h.update(d,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:e},range:EditorSelection.cursor(s.from+e.length)}))}changeByRange(e){let s=this.selection,a=e(s.ranges[0]),l=this.changes(a.changes),u=[a.range],c=asArray(a.effects);for(let d=1;d<s.ranges.length;d++){let h=e(s.ranges[d]),p=this.changes(h.changes),m=p.map(l);for(let y=0;y<d;y++)u[y]=u[y].map(m);let g=l.mapDesc(p,!0);u.push(h.range.map(g)),l=l.compose(m),c=StateEffect.mapEffects(c,m).concat(StateEffect.mapEffects(asArray(h.effects),g))}return{changes:l,selection:EditorSelection.create(u,s.mainIndex),effects:c}}changes(e=[]){return e instanceof ChangeSet?e:ChangeSet.of(e,this.doc.length,this.facet(EditorState.lineSeparator))}toText(e){return Text.of(e.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(e=0,s=this.doc.length){return this.doc.sliceString(e,s,this.lineBreak)}facet(e){let s=this.config.address[e.id];return s==null?e.default:(ensureAddr(this,s),getAddr(this,s))}toJSON(e){let s={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let a in e){let l=e[a];l instanceof StateField&&this.config.address[l.id]!=null&&(s[a]=l.spec.toJSON(this.field(e[a]),this))}return s}static fromJSON(e,s={},a){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let l=[];if(a){for(let u in a)if(Object.prototype.hasOwnProperty.call(e,u)){let c=a[u],d=e[u];l.push(c.init(h=>c.spec.fromJSON(d,h)))}}return EditorState.create({doc:e.doc,selection:EditorSelection.fromJSON(e.selection),extensions:s.extensions?l.concat([s.extensions]):l})}static create(e={}){let s=Configuration.resolve(e.extensions||[],new Map),a=e.doc instanceof Text?e.doc:Text.of((e.doc||"").split(s.staticFacet(EditorState.lineSeparator)||DefaultSplit)),l=e.selection?e.selection instanceof EditorSelection?e.selection:EditorSelection.single(e.selection.anchor,e.selection.head):EditorSelection.single(0);return checkSelection(l,a.length),s.staticFacet(allowMultipleSelections)||(l=l.asSingle()),new EditorState(s,a,l,s.dynamicSlots.map(()=>null),(u,c)=>c.create(u),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(e,...s){for(let a of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(a,e)){e=a[e];break}return s.length&&(e=e.replace(/\$(\$|\d*)/g,(a,l)=>{if(l=="$")return"$";let u=+(l||1);return!u||u>s.length?a:s[u-1]})),e}languageDataAt(e,s,a=-1){let l=[];for(let u of this.facet(languageData))for(let c of u(this,s,a))Object.prototype.hasOwnProperty.call(c,e)&&l.push(c[e]);return l}charCategorizer(e){let s=this.languageDataAt("wordChars",e);return makeCategorizer(s.length?s[0]:"")}wordAt(e){let{text:s,from:a,length:l}=this.doc.lineAt(e),u=this.charCategorizer(e),c=e-a,d=e-a;for(;c>0;){let h=findClusterBreak(s,c,!1);if(u(s.slice(h,c))!=CharCategory.Word)break;c=h}for(;d<l;){let h=findClusterBreak(s,d);if(u(s.slice(d,h))!=CharCategory.Word)break;d=h}return c==d?null:EditorSelection.range(c+a,d+a)}}EditorState.allowMultipleSelections=allowMultipleSelections,EditorState.tabSize=Facet.define({combine:o=>o.length?o[0]:4}),EditorState.lineSeparator=lineSeparator,EditorState.readOnly=readOnly,EditorState.phrases=Facet.define({compare(o,e){let s=Object.keys(o),a=Object.keys(e);return s.length==a.length&&s.every(l=>o[l]==e[l])}}),EditorState.languageData=languageData,EditorState.changeFilter=changeFilter,EditorState.transactionFilter=transactionFilter,EditorState.transactionExtender=transactionExtender,Compartment.reconfigure=StateEffect.define();function combineConfig(o,e,s={}){let a={};for(let l of o)for(let u of Object.keys(l)){let c=l[u],d=a[u];if(d===void 0)a[u]=c;else if(!(d===c||c===void 0))if(Object.hasOwnProperty.call(s,u))a[u]=s[u](d,c);else throw new Error("Config merge conflict for field "+u)}for(let l in e)a[l]===void 0&&(a[l]=e[l]);return a}class RangeValue{eq(e){return this==e}range(e,s=e){return Range$1.create(e,s,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0,RangeValue.prototype.point=!1,RangeValue.prototype.mapMode=MapMode.TrackDel;function cmpVal(o,e){return o==e||o.constructor==e.constructor&&o.eq(e)}let Range$1=class Qf{constructor(e,s,a){this.from=e,this.to=s,this.value=a}static create(e,s,a){return new Qf(e,s,a)}};function cmpRange(o,e){return o.from-e.from||o.value.startSide-e.value.startSide}class Chunk{constructor(e,s,a,l){this.from=e,this.to=s,this.value=a,this.maxPoint=l}get length(){return this.to[this.to.length-1]}findIndex(e,s,a,l=0){let u=a?this.to:this.from;for(let c=l,d=u.length;;){if(c==d)return c;let h=c+d>>1,p=u[h]-e||(a?this.value[h].endSide:this.value[h].startSide)-s;if(h==c)return p>=0?c:d;p>=0?d=h:c=h+1}}between(e,s,a,l){for(let u=this.findIndex(s,-1e9,!0),c=this.findIndex(a,1e9,!1,u);u<c;u++)if(l(this.from[u]+e,this.to[u]+e,this.value[u])===!1)return!1}map(e,s){let a=[],l=[],u=[],c=-1,d=-1;for(let h=0;h<this.value.length;h++){let p=this.value[h],m=this.from[h]+e,g=this.to[h]+e,y,A;if(m==g){let T=s.mapPos(m,p.startSide,p.mapMode);if(T==null||(y=A=T,p.startSide!=p.endSide&&(A=s.mapPos(m,p.endSide),A<y)))continue}else if(y=s.mapPos(m,p.startSide),A=s.mapPos(g,p.endSide),y>A||y==A&&p.startSide>0&&p.endSide<=0)continue;(A-y||p.endSide-p.startSide)<0||(c<0&&(c=y),p.point&&(d=Math.max(d,A-y)),a.push(p),l.push(y-c),u.push(A-c))}return{mapped:a.length?new Chunk(l,u,a,d):null,pos:c}}}class RangeSet{constructor(e,s,a,l){this.chunkPos=e,this.chunk=s,this.nextLayer=a,this.maxPoint=l}static create(e,s,a,l){return new RangeSet(e,s,a,l)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let s of this.chunk)e+=s.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:s=[],sort:a=!1,filterFrom:l=0,filterTo:u=this.length}=e,c=e.filter;if(s.length==0&&!c)return this;if(a&&(s=s.slice().sort(cmpRange)),this.isEmpty)return s.length?RangeSet.of(s):this;let d=new LayerCursor(this,null,-1).goto(0),h=0,p=[],m=new RangeSetBuilder;for(;d.value||h<s.length;)if(h<s.length&&(d.from-s[h].from||d.startSide-s[h].value.startSide)>=0){let g=s[h++];m.addInner(g.from,g.to,g.value)||p.push(g)}else d.rangeIndex==1&&d.chunkIndex<this.chunk.length&&(h==s.length||this.chunkEnd(d.chunkIndex)<s[h].from)&&(!c||l>this.chunkEnd(d.chunkIndex)||u<this.chunkPos[d.chunkIndex])&&m.addChunk(this.chunkPos[d.chunkIndex],this.chunk[d.chunkIndex])?d.nextChunk():((!c||l>d.to||u<d.from||c(d.from,d.to,d.value))&&(m.addInner(d.from,d.to,d.value)||p.push(Range$1.create(d.from,d.to,d.value))),d.next());return m.finishInner(this.nextLayer.isEmpty&&!p.length?RangeSet.empty:this.nextLayer.update({add:p,filter:c,filterFrom:l,filterTo:u}))}map(e){if(e.empty||this.isEmpty)return this;let s=[],a=[],l=-1;for(let c=0;c<this.chunk.length;c++){let d=this.chunkPos[c],h=this.chunk[c],p=e.touchesRange(d,d+h.length);if(p===!1)l=Math.max(l,h.maxPoint),s.push(h),a.push(e.mapPos(d));else if(p===!0){let{mapped:m,pos:g}=h.map(d,e);m&&(l=Math.max(l,m.maxPoint),s.push(m),a.push(g))}}let u=this.nextLayer.map(e);return s.length==0?u:new RangeSet(a,s,u||RangeSet.empty,l)}between(e,s,a){if(!this.isEmpty){for(let l=0;l<this.chunk.length;l++){let u=this.chunkPos[l],c=this.chunk[l];if(s>=u&&e<=u+c.length&&c.between(u,e-u,s-u,a)===!1)return}this.nextLayer.between(e,s,a)}}iter(e=0){return HeapCursor.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,s=0){return HeapCursor.from(e).goto(s)}static compare(e,s,a,l,u=-1){let c=e.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=u),d=s.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=u),h=findSharedChunks(c,d,a),p=new SpanCursor(c,h,u),m=new SpanCursor(d,h,u);a.iterGaps((g,y,A)=>compare(p,g,m,y,A,l)),a.empty&&a.length==0&&compare(p,0,m,0,0,l)}static eq(e,s,a=0,l){l==null&&(l=999999999);let u=e.filter(m=>!m.isEmpty&&s.indexOf(m)<0),c=s.filter(m=>!m.isEmpty&&e.indexOf(m)<0);if(u.length!=c.length)return!1;if(!u.length)return!0;let d=findSharedChunks(u,c),h=new SpanCursor(u,d,0).goto(a),p=new SpanCursor(c,d,0).goto(a);for(;;){if(h.to!=p.to||!sameValues(h.active,p.active)||h.point&&(!p.point||!cmpVal(h.point,p.point)))return!1;if(h.to>l)return!0;h.next(),p.next()}}static spans(e,s,a,l,u=-1){let c=new SpanCursor(e,null,u).goto(s),d=s,h=c.openStart;for(;;){let p=Math.min(c.to,a);if(c.point){let m=c.activeForPoint(c.to),g=c.pointFrom<s?m.length+1:c.point.startSide<0?m.length:Math.min(m.length,h);l.point(d,p,c.point,m,g,c.pointRank),h=Math.min(c.openEnd(p),m.length)}else p>d&&(l.span(d,p,c.active,h),h=c.openEnd(p));if(c.to>a)return h+(c.point&&c.to>a?1:0);d=c.to,c.next()}}static of(e,s=!1){let a=new RangeSetBuilder;for(let l of e instanceof Range$1?[e]:s?lazySort(e):e)a.add(l.from,l.to,l.value);return a.finish()}static join(e){if(!e.length)return RangeSet.empty;let s=e[e.length-1];for(let a=e.length-2;a>=0;a--)for(let l=e[a];l!=RangeSet.empty;l=l.nextLayer)s=new RangeSet(l.chunkPos,l.chunk,s,Math.max(l.maxPoint,s.maxPoint));return s}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(o){if(o.length>1)for(let e=o[0],s=1;s<o.length;s++){let a=o[s];if(cmpRange(e,a)>0)return o.slice().sort(cmpRange);e=a}return o}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(e){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,s,a){this.addInner(e,s,a)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(e,s,a)}addInner(e,s,a){let l=e-this.lastTo||a.startSide-this.last.endSide;if(l<=0&&(e-this.lastFrom||a.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return l<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(s-this.chunkStart),this.last=a,this.lastFrom=e,this.lastTo=s,this.value.push(a),a.point&&(this.maxPoint=Math.max(this.maxPoint,s-e)),!0)}addChunk(e,s){if((e-this.lastTo||s.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,s.maxPoint),this.chunks.push(s),this.chunkPos.push(e);let a=s.value.length-1;return this.last=s.value[a],this.lastFrom=s.from[a]+e,this.lastTo=s.to[a]+e,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let s=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,s}}function findSharedChunks(o,e,s){let a=new Map;for(let u of o)for(let c=0;c<u.chunk.length;c++)u.chunk[c].maxPoint<=0&&a.set(u.chunk[c],u.chunkPos[c]);let l=new Set;for(let u of e)for(let c=0;c<u.chunk.length;c++){let d=a.get(u.chunk[c]);d!=null&&(s?s.mapPos(d):d)==u.chunkPos[c]&&!(s!=null&&s.touchesRange(d,d+u.chunk[c].length))&&l.add(u.chunk[c])}return l}class LayerCursor{constructor(e,s,a,l=0){this.layer=e,this.skip=s,this.minPoint=a,this.rank=l}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,s=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,s,!1),this}gotoInner(e,s,a){for(;this.chunkIndex<this.layer.chunk.length;){let l=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(l)||this.layer.chunkEnd(this.chunkIndex)<e||l.maxPoint<this.minPoint))break;this.chunkIndex++,a=!1}if(this.chunkIndex<this.layer.chunk.length){let l=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],s,!0);(!a||this.rangeIndex<l)&&this.setRangeIndex(l)}this.next()}forward(e,s){(this.to-e||this.endSide-s)<0&&this.gotoInner(e,s,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],s=this.layer.chunk[this.chunkIndex],a=e+s.from[this.rangeIndex];if(this.from=a,this.to=e+s.to[this.rangeIndex],this.value=s.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class HeapCursor{constructor(e){this.heap=e}static from(e,s=null,a=-1){let l=[];for(let u=0;u<e.length;u++)for(let c=e[u];!c.isEmpty;c=c.nextLayer)c.maxPoint>=a&&l.push(new LayerCursor(c,s,a,u));return l.length==1?l[0]:new HeapCursor(l)}get startSide(){return this.value?this.value.startSide:0}goto(e,s=-1e9){for(let a of this.heap)a.goto(e,s);for(let a=this.heap.length>>1;a>=0;a--)heapBubble(this.heap,a);return this.next(),this}forward(e,s){for(let a of this.heap)a.forward(e,s);for(let a=this.heap.length>>1;a>=0;a--)heapBubble(this.heap,a);(this.to-e||this.value.endSide-s)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),heapBubble(this.heap,0)}}}function heapBubble(o,e){for(let s=o[e];;){let a=(e<<1)+1;if(a>=o.length)break;let l=o[a];if(a+1<o.length&&l.compare(o[a+1])>=0&&(l=o[a+1],a++),s.compare(l)<0)break;o[a]=s,o[e]=l,e=a}}class SpanCursor{constructor(e,s,a){this.minPoint=a,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(e,s,a)}goto(e,s=-1e9){return this.cursor.goto(e,s),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=s,this.openStart=-1,this.next(),this}forward(e,s){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-s)<0;)this.removeActive(this.minActive);this.cursor.forward(e,s)}removeActive(e){remove(this.active,e),remove(this.activeTo,e),remove(this.activeRank,e),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(e){let s=0,{value:a,to:l,rank:u}=this.cursor;for(;s<this.activeRank.length&&(u-this.activeRank[s]||l-this.activeTo[s])>0;)s++;insert(this.active,s,a),insert(this.activeTo,s,l),insert(this.activeRank,s,u),e&&insert(e,s,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let e=this.to,s=this.point;this.point=null;let a=this.openStart<0?[]:null;for(;;){let l=this.minActive;if(l>-1&&(this.activeTo[l]-this.cursor.from||this.active[l].endSide-this.cursor.startSide)<0){if(this.activeTo[l]>e){this.to=this.activeTo[l],this.endSide=this.active[l].endSide;break}this.removeActive(l),a&&remove(a,l)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let u=this.cursor.value;if(!u.point)this.addActive(a),this.cursor.next();else if(s&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=u,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=u.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(a){this.openStart=0;for(let l=a.length-1;l>=0&&a[l]<e;l--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let s=[];for(let a=this.active.length-1;a>=0&&!(this.activeRank[a]<this.pointRank);a--)(this.activeTo[a]>e||this.activeTo[a]==e&&this.active[a].endSide>=this.point.endSide)&&s.push(this.active[a]);return s.reverse()}openEnd(e){let s=0;for(let a=this.activeTo.length-1;a>=0&&this.activeTo[a]>e;a--)s++;return s}}function compare(o,e,s,a,l,u){o.goto(e),s.goto(a);let c=a+l,d=a,h=a-e,p=!!u.boundChange;for(let m=!1;;){let g=o.to+h-s.to,y=g||o.endSide-s.endSide,A=y<0?o.to+h:s.to,T=Math.min(A,c);if(o.point||s.point?(o.point&&s.point&&cmpVal(o.point,s.point)&&sameValues(o.activeForPoint(o.to),s.activeForPoint(s.to))||u.comparePoint(d,T,o.point,s.point),m=!1):(m&&u.boundChange(d),T>d&&!sameValues(o.active,s.active)&&u.compareRange(d,T,o.active,s.active),p&&T<c&&(g||o.openEnd(A)!=s.openEnd(A))&&(m=!0)),A>c)break;d=A,y<=0&&o.next(),y>=0&&s.next()}}function sameValues(o,e){if(o.length!=e.length)return!1;for(let s=0;s<o.length;s++)if(o[s]!=e[s]&&!cmpVal(o[s],e[s]))return!1;return!0}function remove(o,e){for(let s=e,a=o.length-1;s<a;s++)o[s]=o[s+1];o.pop()}function insert(o,e,s){for(let a=o.length-1;a>=e;a--)o[a+1]=o[a];o[e]=s}function findMinIndex(o,e){let s=-1,a=1e9;for(let l=0;l<e.length;l++)(e[l]-a||o[l].endSide-o[s].endSide)<0&&(s=l,a=e[l]);return s}function countColumn(o,e,s=o.length){let a=0;for(let l=0;l<s&&l<o.length;)o.charCodeAt(l)==9?(a+=e-a%e,l++):(a++,l=findClusterBreak(o,l));return a}function findColumn(o,e,s,a){for(let l=0,u=0;;){if(u>=e)return l;if(l==o.length)break;u+=o.charCodeAt(l)==9?s-u%s:1,l=findClusterBreak(o,l)}return o.length}const C="",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(e,s){this.rules=[];let{finish:a}=s||{};function l(c){return/^@/.test(c)?[c]:c.split(/,\s*/)}function u(c,d,h,p){let m=[],g=/^@(\w+)\b/.exec(c[0]),y=g&&g[1]=="keyframes";if(g&&d==null)return h.push(c[0]+";");for(let A in d){let T=d[A];if(/&/.test(A))u(A.split(/,\s*/).map(E=>c.map(v=>E.replace(/&/,v))).reduce((E,v)=>E.concat(v)),T,h);else if(T&&typeof T=="object"){if(!g)throw new RangeError("The value of a property ("+A+") should be a primitive value.");u(l(A),T,m,y)}else T!=null&&m.push(A.replace(/_.*/,"").replace(/[A-Z]/g,E=>"-"+E.toLowerCase())+": "+T+";")}(m.length||y)&&h.push((a&&!g&&!p?c.map(a):c).join(", ")+" {"+m.join(" ")+"}")}for(let c in e)u(l(c),e[c],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=top[COUNT]||1;return top[COUNT]=e+1,C+e.toString(36)}static mount(e,s,a){let l=e[SET],u=a&&a.nonce;l?u&&l.setNonce(u):l=new StyleSet(e,u),l.mount(Array.isArray(s)?s:[s],e)}}let adoptedSet=new Map;class StyleSet{constructor(e,s){let a=e.ownerDocument||e,l=a.defaultView;if(!e.head&&e.adoptedStyleSheets&&l.CSSStyleSheet){let u=adoptedSet.get(a);if(u)return e[SET]=u;this.sheet=new l.CSSStyleSheet,adoptedSet.set(a,this)}else this.styleTag=a.createElement("style"),s&&this.styleTag.setAttribute("nonce",s);this.modules=[],e[SET]=this}mount(e,s){let a=this.sheet,l=0,u=0;for(let c=0;c<e.length;c++){let d=e[c],h=this.modules.indexOf(d);if(h<u&&h>-1&&(this.modules.splice(h,1),u--,h=-1),h==-1){if(this.modules.splice(u++,0,d),a)for(let p=0;p<d.rules.length;p++)a.insertRule(d.rules[p],l++)}else{for(;u<h;)l+=this.modules[u++].rules.length;l+=d.rules.length,u++}}if(a)s.adoptedStyleSheets.indexOf(this.sheet)<0&&(s.adoptedStyleSheets=[this.sheet,...s.adoptedStyleSheets]);else{let c="";for(let h=0;h<this.modules.length;h++)c+=this.modules[h].getRules()+`
`;this.styleTag.textContent=c;let d=s.head||s;this.styleTag.parentNode!=d&&d.insertBefore(this.styleTag,d.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}function crelt(){var o=arguments[0];typeof o=="string"&&(o=document.createElement(o));var e=1,s=arguments[1];if(s&&typeof s=="object"&&s.nodeType==null&&!Array.isArray(s)){for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){var l=s[a];typeof l=="string"?o.setAttribute(a,l):l!=null&&(o[a]=l)}e++}for(;e<arguments.length;e++)add(o,arguments[e]);return o}function add(o,e){if(typeof e=="string")o.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)o.appendChild(e);else if(Array.isArray(e))for(var s=0;s<e.length;s++)add(o,e[s]);else throw new RangeError("Unsupported child node: "+e)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser$1={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,safari,safari_version:safari?+(/\bVersion\/(\d+(\.\d+)?)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function combineAttrs(o,e){for(let s in o)s=="class"&&e.class?e.class+=" "+o.class:s=="style"&&e.style?e.style+=";"+o.style:e[s]=o[s];return e}const noAttrs$1=Object.create(null);function attrsEq(o,e,s){if(o==e)return!0;o||(o=noAttrs$1),e||(e=noAttrs$1);let a=Object.keys(o),l=Object.keys(e);if(a.length-0!=l.length-0)return!1;for(let u of a)if(u!=s&&(l.indexOf(u)==-1||o[u]!==e[u]))return!1;return!0}function setAttrs(o,e){for(let s=o.attributes.length-1;s>=0;s--){let a=o.attributes[s].name;e[a]==null&&o.removeAttribute(a)}for(let s in e){let a=e[s];s=="style"?o.style.cssText=a:o.getAttribute(s)!=a&&o.setAttribute(s,a)}}function updateAttrs(o,e,s){let a=!1;if(e)for(let l in e)s&&l in s||(a=!0,l=="style"?o.style.cssText="":o.removeAttribute(l));if(s)for(let l in s)e&&e[l]==s[l]||(a=!0,l=="style"?o.style.cssText=s[l]:o.setAttribute(l,s[l]));return a}function getAttrs$1(o){let e=Object.create(null);for(let s=0;s<o.attributes.length;s++){let a=o.attributes[s];e[a.name]=a.value}return e}class WidgetType{eq(e){return!1}updateDOM(e,s){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,s,a){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var BlockType=(function(o){return o[o.Text=0]="Text",o[o.WidgetBefore=1]="WidgetBefore",o[o.WidgetAfter=2]="WidgetAfter",o[o.WidgetRange=3]="WidgetRange",o})(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(e,s,a,l){super(),this.startSide=e,this.endSide=s,this.widget=a,this.spec=l}get heightRelevant(){return!1}static mark(e){return new MarkDecoration(e)}static widget(e){let s=Math.max(-1e4,Math.min(1e4,e.side||0)),a=!!e.block;return s+=a&&!e.inlineOrder?s>0?3e8:-4e8:s>0?1e8:-1e8,new PointDecoration(e,s,s,a,e.widget||null,!1)}static replace(e){let s=!!e.block,a,l;if(e.isBlockGap)a=-5e8,l=4e8;else{let{start:u,end:c}=getInclusive(e,s);a=(u?s?-3e8:-1:5e8)-1,l=(c?s?2e8:1:-6e8)+1}return new PointDecoration(e,a,l,s,e.widget||null,!0)}static line(e){return new LineDecoration(e)}static set(e,s=!1){return RangeSet.of(e,s)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(e){let{start:s,end:a}=getInclusive(e);super(s?-1:5e8,a?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?combineAttrs(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||noAttrs$1}eq(e){return this==e||e instanceof MarkDecoration&&this.tagName==e.tagName&&attrsEq(this.attrs,e.attrs)}range(e,s=e){if(e>=s)throw new RangeError("Mark decorations may not be empty");return super.range(e,s)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof LineDecoration&&this.spec.class==e.spec.class&&attrsEq(this.spec.attributes,e.spec.attributes)}range(e,s=e){if(s!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,s)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore,LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(e,s,a,l,u,c){super(s,a,u,e),this.block=l,this.isReplace=c,this.mapMode=l?s<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof PointDecoration&&widgetsEq(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,s=e){if(this.isReplace&&(e>s||e==s&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&s!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,s)}}PointDecoration.prototype.point=!0;function getInclusive(o,e=!1){let{inclusiveStart:s,inclusiveEnd:a}=o;return s==null&&(s=o.inclusive),a==null&&(a=o.inclusive),{start:s??e,end:a??e}}function widgetsEq(o,e){return o==e||!!(o&&e&&o.compare(e))}function addRange(o,e,s,a=0){let l=s.length-1;l>=0&&s[l]+a>=o?s[l]=Math.max(s[l],e):s.push(o,e)}class BlockWrapper extends RangeValue{constructor(e,s){super(),this.tagName=e,this.attributes=s}eq(e){return e==this||e instanceof BlockWrapper&&this.tagName==e.tagName&&attrsEq(this.attributes,e.attributes)}static create(e){return new BlockWrapper(e.tagName,e.attributes||noAttrs$1)}static set(e,s=!1){return RangeSet.of(e,s)}}BlockWrapper.prototype.startSide=BlockWrapper.prototype.endSide=-1;function getSelection$1(o){let e;return o.nodeType==11?e=o.getSelection?o:o.ownerDocument:e=o,e.getSelection()}function contains(o,e){return e?o==e||o.contains(e.nodeType!=1?e.parentNode:e):!1}function hasSelection(o,e){if(!e.anchorNode)return!1;try{return contains(o,e.anchorNode)}catch{return!1}}function clientRectsFor(o){return o.nodeType==3?textRange(o,0,o.nodeValue.length).getClientRects():o.nodeType==1?o.getClientRects():[]}function isEquivalentPosition(o,e,s,a){return s?scanFor(o,e,s,a,-1)||scanFor(o,e,s,a,1):!1}function domIndex(o){for(var e=0;;e++)if(o=o.previousSibling,!o)return e}function isBlockElement(o){return o.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(o.nodeName)}function scanFor(o,e,s,a,l){for(;;){if(o==s&&e==a)return!0;if(e==(l<0?0:maxOffset(o))){if(o.nodeName=="DIV")return!1;let u=o.parentNode;if(!u||u.nodeType!=1)return!1;e=domIndex(o)+(l<0?0:1),o=u}else if(o.nodeType==1){if(o=o.childNodes[e+(l<0?-1:0)],o.nodeType==1&&o.contentEditable=="false")return!1;e=l<0?maxOffset(o):0}else return!1}}function maxOffset(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}function flattenRect(o,e){let s=e?o.left:o.right;return{left:s,right:s,top:o.top,bottom:o.bottom}}function windowRect(o){let e=o.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:o.innerWidth,top:0,bottom:o.innerHeight}}function getScale(o,e){let s=e.width/o.offsetWidth,a=e.height/o.offsetHeight;return(s>.995&&s<1.005||!isFinite(s)||Math.abs(e.width-o.offsetWidth)<1)&&(s=1),(a>.995&&a<1.005||!isFinite(a)||Math.abs(e.height-o.offsetHeight)<1)&&(a=1),{scaleX:s,scaleY:a}}function scrollRectIntoView(o,e,s,a,l,u,c,d){let h=o.ownerDocument,p=h.defaultView||window;for(let m=o,g=!1;m&&!g;)if(m.nodeType==1){let y,A=m==h.body,T=1,E=1;if(A)y=windowRect(p);else{if(/^(fixed|sticky)$/.test(getComputedStyle(m).position)&&(g=!0),m.scrollHeight<=m.clientHeight&&m.scrollWidth<=m.clientWidth){m=m.assignedSlot||m.parentNode;continue}let w=m.getBoundingClientRect();({scaleX:T,scaleY:E}=getScale(m,w)),y={left:w.left,right:w.left+m.clientWidth*T,top:w.top,bottom:w.top+m.clientHeight*E}}let v=0,_=0;if(l=="nearest")e.top<y.top?(_=e.top-(y.top+c),s>0&&e.bottom>y.bottom+_&&(_=e.bottom-y.bottom+c)):e.bottom>y.bottom&&(_=e.bottom-y.bottom+c,s<0&&e.top-_<y.top&&(_=e.top-(y.top+c)));else{let w=e.bottom-e.top,R=y.bottom-y.top;_=(l=="center"&&w<=R?e.top+w/2-R/2:l=="start"||l=="center"&&s<0?e.top-c:e.bottom-R+c)-y.top}if(a=="nearest"?e.left<y.left?(v=e.left-(y.left+u),s>0&&e.right>y.right+v&&(v=e.right-y.right+u)):e.right>y.right&&(v=e.right-y.right+u,s<0&&e.left<y.left+v&&(v=e.left-(y.left+u))):v=(a=="center"?e.left+(e.right-e.left)/2-(y.right-y.left)/2:a=="start"==d?e.left-u:e.right-(y.right-y.left)+u)-y.left,v||_)if(A)p.scrollBy(v,_);else{let w=0,R=0;if(_){let k=m.scrollTop;m.scrollTop+=_/E,R=(m.scrollTop-k)*E}if(v){let k=m.scrollLeft;m.scrollLeft+=v/T,w=(m.scrollLeft-k)*T}e={left:e.left-w,top:e.top-R,right:e.right-w,bottom:e.bottom-R},w&&Math.abs(w-v)<1&&(a="nearest"),R&&Math.abs(R-_)<1&&(l="nearest")}if(A)break;(e.top<y.top||e.bottom>y.bottom||e.left<y.left||e.right>y.right)&&(e={left:Math.max(e.left,y.left),right:Math.min(e.right,y.right),top:Math.max(e.top,y.top),bottom:Math.min(e.bottom,y.bottom)}),m=m.assignedSlot||m.parentNode}else if(m.nodeType==11)m=m.host;else break}function scrollableParents(o){let e=o.ownerDocument,s,a;for(let l=o.parentNode;l&&!(l==e.body||s&&a);)if(l.nodeType==1)!a&&l.scrollHeight>l.clientHeight&&(a=l),!s&&l.scrollWidth>l.clientWidth&&(s=l),l=l.assignedSlot||l.parentNode;else if(l.nodeType==11)l=l.host;else break;return{x:s,y:a}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:s,focusNode:a}=e;this.set(s,Math.min(e.anchorOffset,s?maxOffset(s):0),a,Math.min(e.focusOffset,a?maxOffset(a):0))}set(e,s,a,l){this.anchorNode=e,this.anchorOffset=s,this.focusNode=a,this.focusOffset=l}}let preventScrollSupported=null;browser$1.safari&&browser$1.safari_version>=26&&(preventScrollSupported=!1);function focusPreventScroll(o){if(o.setActive)return o.setActive();if(preventScrollSupported)return o.focus(preventScrollSupported);let e=[];for(let s=o;s&&(e.push(s,s.scrollTop,s.scrollLeft),s!=s.ownerDocument);s=s.parentNode);if(o.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let s=0;s<e.length;){let a=e[s++],l=e[s++],u=e[s++];a.scrollTop!=l&&(a.scrollTop=l),a.scrollLeft!=u&&(a.scrollLeft=u)}}}let scratchRange;function textRange(o,e,s=e){let a=scratchRange||(scratchRange=document.createRange());return a.setEnd(o,s),a.setStart(o,e),a}function dispatchKey(o,e,s,a){let l={key:e,code:e,keyCode:s,which:s,cancelable:!0};a&&({altKey:l.altKey,ctrlKey:l.ctrlKey,shiftKey:l.shiftKey,metaKey:l.metaKey}=a);let u=new KeyboardEvent("keydown",l);u.synthetic=!0,o.dispatchEvent(u);let c=new KeyboardEvent("keyup",l);return c.synthetic=!0,o.dispatchEvent(c),u.defaultPrevented||c.defaultPrevented}function getRoot(o){for(;o;){if(o&&(o.nodeType==9||o.nodeType==11&&o.host))return o;o=o.assignedSlot||o.parentNode}return null}function atElementStart(o,e){let s=e.focusNode,a=e.focusOffset;if(!s||e.anchorNode!=s||e.anchorOffset!=a)return!1;for(a=Math.min(a,maxOffset(s));;)if(a){if(s.nodeType!=1)return!1;let l=s.childNodes[a-1];l.contentEditable=="false"?a--:(s=l,a=maxOffset(s))}else{if(s==o)return!0;a=domIndex(s),s=s.parentNode}}function isScrolledToBottom(o){return o.scrollTop>Math.max(1,o.scrollHeight-o.clientHeight-4)}function textNodeBefore(o,e){for(let s=o,a=e;;){if(s.nodeType==3&&a>0)return{node:s,offset:a};if(s.nodeType==1&&a>0){if(s.contentEditable=="false")return null;s=s.childNodes[a-1],a=maxOffset(s)}else if(s.parentNode&&!isBlockElement(s))a=domIndex(s),s=s.parentNode;else return null}}function textNodeAfter(o,e){for(let s=o,a=e;;){if(s.nodeType==3&&a<s.nodeValue.length)return{node:s,offset:a};if(s.nodeType==1&&a<s.childNodes.length){if(s.contentEditable=="false")return null;s=s.childNodes[a],a=0}else if(s.parentNode&&!isBlockElement(s))a=domIndex(s)+1,s=s.parentNode;else return null}}class DOMPos{constructor(e,s,a=!0){this.node=e,this.offset=s,this.precise=a}static before(e,s){return new DOMPos(e.parentNode,domIndex(e),s)}static after(e,s){return new DOMPos(e.parentNode,domIndex(e)+1,s)}}var Direction=(function(o){return o[o.LTR=0]="LTR",o[o.RTL=1]="RTL",o})(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(o){let e=[];for(let s=0;s<o.length;s++)e.push(1<<+o[s]);return e}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let o of["()","[]","{}"]){let e=o.charCodeAt(0),s=o.charCodeAt(1);Brackets[e]=s,Brackets[s]=-e}function charType(o){return o<=247?LowTypes[o]:1424<=o&&o<=1524?2:1536<=o&&o<=1785?ArabicTypes[o-1536]:1774<=o&&o<=2220?4:8192<=o&&o<=8204?256:64336<=o&&o<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(e,s,a){this.from=e,this.to=s,this.level=a}side(e,s){return this.dir==s==e?this.to:this.from}forward(e,s){return e==(this.dir==s)}static find(e,s,a,l){let u=-1;for(let c=0;c<e.length;c++){let d=e[c];if(d.from<=s&&d.to>=s){if(d.level==a)return c;(u<0||(l!=0?l<0?d.from<s:d.to>s:e[u].level>d.level))&&(u=c)}}if(u<0)throw new RangeError("Index out of range");return u}}function isolatesEq(o,e){if(o.length!=e.length)return!1;for(let s=0;s<o.length;s++){let a=o[s],l=e[s];if(a.from!=l.from||a.to!=l.to||a.direction!=l.direction||!isolatesEq(a.inner,l.inner))return!1}return!0}const types=[];function computeCharTypes(o,e,s,a,l){for(let u=0;u<=a.length;u++){let c=u?a[u-1].to:e,d=u<a.length?a[u].from:s,h=u?256:l;for(let p=c,m=h,g=h;p<d;p++){let y=charType(o.charCodeAt(p));y==512?y=m:y==8&&g==4&&(y=16),types[p]=y==4?2:y,y&7&&(g=y),m=y}for(let p=c,m=h,g=h;p<d;p++){let y=types[p];if(y==128)p<d-1&&m==types[p+1]&&m&24?y=types[p]=m:types[p]=256;else if(y==64){let A=p+1;for(;A<d&&types[A]==64;)A++;let T=p&&m==8||A<s&&types[A]==8?g==1?1:8:256;for(let E=p;E<A;E++)types[E]=T;p=A-1}else y==8&&g==1&&(types[p]=1);m=y,y&7&&(g=y)}}}function processBracketPairs(o,e,s,a,l){let u=l==1?2:1;for(let c=0,d=0,h=0;c<=a.length;c++){let p=c?a[c-1].to:e,m=c<a.length?a[c].from:s;for(let g=p,y,A,T;g<m;g++)if(A=Brackets[y=o.charCodeAt(g)])if(A<0){for(let E=d-3;E>=0;E-=3)if(BracketStack[E+1]==-A){let v=BracketStack[E+2],_=v&2?l:v&4?v&1?u:l:0;_&&(types[g]=types[BracketStack[E]]=_),d=E;break}}else{if(BracketStack.length==189)break;BracketStack[d++]=g,BracketStack[d++]=y,BracketStack[d++]=h}else if((T=types[g])==2||T==1){let E=T==l;h=E?0:1;for(let v=d-3;v>=0;v-=3){let _=BracketStack[v+2];if(_&2)break;if(E)BracketStack[v+2]|=2;else{if(_&4)break;BracketStack[v+2]|=4}}}}}function processNeutrals(o,e,s,a){for(let l=0,u=a;l<=s.length;l++){let c=l?s[l-1].to:o,d=l<s.length?s[l].from:e;for(let h=c;h<d;){let p=types[h];if(p==256){let m=h+1;for(;;)if(m==d){if(l==s.length)break;m=s[l++].to,d=l<s.length?s[l].from:e}else if(types[m]==256)m++;else break;let g=u==1,y=(m<e?types[m]:a)==1,A=g==y?g?1:2:a;for(let T=m,E=l,v=E?s[E-1].to:o;T>h;)T==v&&(T=s[--E].from,v=E?s[E-1].to:o),types[--T]=A;h=m}else u=p,h++}}}function emitSpans(o,e,s,a,l,u,c){let d=a%2?2:1;if(a%2==l%2)for(let h=e,p=0;h<s;){let m=!0,g=!1;if(p==u.length||h<u[p].from){let E=types[h];E!=d&&(m=!1,g=E==16)}let y=!m&&d==1?[]:null,A=m?a:a+1,T=h;e:for(;;)if(p<u.length&&T==u[p].from){if(g)break e;let E=u[p];if(!m)for(let v=E.to,_=p+1;;){if(v==s)break e;if(_<u.length&&u[_].from==v)v=u[_++].to;else{if(types[v]==d)break e;break}}if(p++,y)y.push(E);else{E.from>h&&c.push(new BidiSpan(h,E.from,A));let v=E.direction==LTR!=!(A%2);computeSectionOrder(o,v?a+1:a,l,E.inner,E.from,E.to,c),h=E.to}T=E.to}else{if(T==s||(m?types[T]!=d:types[T]==d))break;T++}y?emitSpans(o,h,T,a+1,l,y,c):h<T&&c.push(new BidiSpan(h,T,A)),h=T}else for(let h=s,p=u.length;h>e;){let m=!0,g=!1;if(!p||h>u[p-1].to){let E=types[h-1];E!=d&&(m=!1,g=E==16)}let y=!m&&d==1?[]:null,A=m?a:a+1,T=h;e:for(;;)if(p&&T==u[p-1].to){if(g)break e;let E=u[--p];if(!m)for(let v=E.from,_=p;;){if(v==e)break e;if(_&&u[_-1].to==v)v=u[--_].from;else{if(types[v-1]==d)break e;break}}if(y)y.push(E);else{E.to<h&&c.push(new BidiSpan(E.to,h,A));let v=E.direction==LTR!=!(A%2);computeSectionOrder(o,v?a+1:a,l,E.inner,E.from,E.to,c),h=E.from}T=E.from}else{if(T==e||(m?types[T-1]!=d:types[T-1]==d))break;T--}y?emitSpans(o,T,h,a+1,l,y,c):T<h&&c.push(new BidiSpan(T,h,A)),h=T}}function computeSectionOrder(o,e,s,a,l,u,c){let d=e%2?2:1;computeCharTypes(o,l,u,a,d),processBracketPairs(o,l,u,a,d),processNeutrals(l,u,a,d),emitSpans(o,l,u,e,s,a,c)}function computeOrder(o,e,s){if(!o)return[new BidiSpan(0,0,e==RTL?1:0)];if(e==LTR&&!s.length&&!BidiRE.test(o))return trivialOrder(o.length);if(s.length)for(;o.length>types.length;)types[types.length]=256;let a=[],l=e==LTR?0:1;return computeSectionOrder(o,l,l,s,0,o.length,a),a}function trivialOrder(o){return[new BidiSpan(0,o,0)]}let movedOver="";function moveVisually(o,e,s,a,l){var u;let c=a.head-o.from,d=BidiSpan.find(e,c,(u=a.bidiLevel)!==null&&u!==void 0?u:-1,a.assoc),h=e[d],p=h.side(l,s);if(c==p){let y=d+=l?1:-1;if(y<0||y>=e.length)return null;h=e[d=y],c=h.side(!l,s),p=h.side(l,s)}let m=findClusterBreak(o.text,c,h.forward(l,s));(m<h.from||m>h.to)&&(m=p),movedOver=o.text.slice(Math.min(c,m),Math.max(c,m));let g=d==(l?e.length-1:0)?null:e[d+(l?1:-1)];return g&&m==p&&g.level+(l?0:1)<h.level?EditorSelection.cursor(g.side(!l,s)+o.from,g.forward(l,s)?1:-1,g.level):EditorSelection.cursor(m+o.from,h.forward(l,s)?-1:1,h.level)}function autoDirection(o,e,s){for(let a=e;a<s;a++){let l=charType(o.charCodeAt(a));if(l==1)return LTR;if(l==2||l==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:o=>o.some(e=>e)}),nativeSelectionHidden=Facet.define({combine:o=>o.some(e=>e)}),scrollHandler=Facet.define();class ScrollTarget{constructor(e,s="nearest",a="nearest",l=5,u=5,c=!1){this.range=e,this.y=s,this.x=a,this.yMargin=l,this.xMargin=u,this.isSnapshot=c}map(e){return e.empty?this:new ScrollTarget(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ScrollTarget(EditorSelection.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(o,e)=>o.map(e)}),setEditContextFormatting=StateEffect.define();function logException(o,e,s){let a=o.facet(exceptionSink);a.length?a[0](e):window.onerror&&window.onerror(String(e),s,void 0,void 0,e)||(s?console.error(s+":",e):console.error(e))}const editable=Facet.define({combine:o=>o.length?o[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define({combine(o){return o.filter((e,s)=>{for(let a=0;a<s;a++)if(o[a].plugin==e.plugin)return!1;return!0})}});class ViewPlugin{constructor(e,s,a,l,u){this.id=e,this.create=s,this.domEventHandlers=a,this.domEventObservers=l,this.baseExtensions=u(this),this.extension=this.baseExtensions.concat(viewPlugin.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(viewPlugin.of({plugin:this,arg:e}))}static define(e,s){const{eventHandlers:a,eventObservers:l,provide:u,decorations:c}=s||{};return new ViewPlugin(nextPluginID++,e,a,l,d=>{let h=[];return c&&h.push(decorations.of(p=>{let m=p.plugin(d);return m?c(m):Decoration.none})),u&&h.push(u(d)),h})}static fromClass(e,s){return ViewPlugin.define((a,l)=>new e(a,l),s)}}class PluginInstance{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let s=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(s)}catch(a){if(logException(s.state,a,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(s){logException(e.state,s,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var s;if(!((s=this.value)===null||s===void 0)&&s.destroy)try{this.value.destroy()}catch(a){logException(e.state,a,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),blockWrappers=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(o,e){let s=o.state.facet(bidiIsolatedRanges);if(!s.length)return s;let a=s.map(u=>u instanceof Function?u(o):u),l=[];return RangeSet.spans(a,e.from,e.to,{point(){},span(u,c,d,h){let p=u-e.from,m=c-e.from,g=l;for(let y=d.length-1;y>=0;y--,h--){let A=d[y].spec.bidiIsolate,T;if(A==null&&(A=autoDirection(e.text,p,m)),h>0&&g.length&&(T=g[g.length-1]).to==p&&T.direction==A)T.to=m,g=T.inner;else{let E={from:p,to:m,direction:A,inner:[]};g.push(E),g=E.inner}}}}),l}const scrollMargins=Facet.define();function getScrollMargins(o){let e=0,s=0,a=0,l=0;for(let u of o.state.facet(scrollMargins)){let c=u(o);c&&(c.left!=null&&(e=Math.max(e,c.left)),c.right!=null&&(s=Math.max(s,c.right)),c.top!=null&&(a=Math.max(a,c.top)),c.bottom!=null&&(l=Math.max(l,c.bottom)))}return{left:e,right:s,top:a,bottom:l}}const styleModule=Facet.define();class ChangedRange{constructor(e,s,a,l){this.fromA=e,this.toA=s,this.fromB=a,this.toB=l}join(e){return new ChangedRange(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let s=e.length,a=this;for(;s>0;s--){let l=e[s-1];if(!(l.fromA>a.toA)){if(l.toA<a.fromA)break;a=a.join(l),e.splice(s-1,1)}}return e.splice(s,0,a),e}static extendWithRanges(e,s){if(s.length==0)return e;let a=[];for(let l=0,u=0,c=0;;){let d=l<e.length?e[l].fromB:1e9,h=u<s.length?s[u]:1e9,p=Math.min(d,h);if(p==1e9)break;let m=p+c,g=p,y=m;for(;;)if(u<s.length&&s[u]<=g){let A=s[u+1];u+=2,g=Math.max(g,A);for(let T=l;T<e.length&&e[T].fromB<=g;T++)c=e[T].toA-e[T].toB;y=Math.max(y,A+c)}else if(l<e.length&&e[l].fromB<=g){let A=e[l++];g=Math.max(g,A.toB),y=Math.max(y,A.toA),c=A.toA-A.toB}else break;a.push(new ChangedRange(m,y,p,g))}return a}}class ViewUpdate{constructor(e,s,a){this.view=e,this.state=s,this.transactions=a,this.flags=0,this.startState=e.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let u of a)this.changes=this.changes.compose(u.changes);let l=[];this.changes.iterChangedRanges((u,c,d,h)=>l.push(new ChangedRange(u,c,d,h))),this.changedRanges=l}static create(e,s,a){return new ViewUpdate(e,s,a)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const noChildren=[];class Tile{constructor(e,s,a=0){this.dom=e,this.length=s,this.flags=a,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return noChildren}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let s=this.domAttrs;s&&setAttrs(this.dom,s)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,s=this.posAtStart){let a=s;for(let l of this.children){if(l==e)return a;a+=l.length+l.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,s){return null}domPosFor(e,s){let a=domIndex(this.dom),l=this.length?e>0:s>0;return new DOMPos(this.parent.dom,a+(l?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof DocTile)return e;return null}static get(e){return e.cmTile}}class CompositeTile extends Tile{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let s=this.dom,a=null,l,u=(e==null?void 0:e.node)==s?e:null,c=0;for(let d of this.children){if(d.sync(e),c+=d.length+d.breakAfter,l=a?a.nextSibling:s.firstChild,u&&l!=d.dom&&(u.written=!0),d.dom.parentNode==s)for(;l&&l!=d.dom;)l=rm$1(l);else s.insertBefore(d.dom,l);a=d.dom}for(l=a?a.nextSibling:s.firstChild,u&&l&&(u.written=!0);l;)l=rm$1(l);this.length=c}}function rm$1(o){let e=o.nextSibling;return o.parentNode.removeChild(o),e}class DocTile extends CompositeTile{constructor(e,s){super(s),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let s=Tile.get(e);if(s&&this.owns(s))return s;e=e.parentNode}}blockTiles(e){for(let s=[],a=this,l=0,u=0;;)if(l==a.children.length){if(!s.length)return;a=a.parent,a.breakAfter&&u++,l=s.pop()}else{let c=a.children[l++];if(c instanceof BlockWrapperTile)s.push(l),a=c,l=0;else{let d=u+c.length,h=e(c,u);if(h!==void 0)return h;u=d+c.breakAfter}}}resolveBlock(e,s){let a,l=-1,u,c=-1;if(this.blockTiles((d,h)=>{let p=h+d.length;if(e>=h&&e<=p){if(d.isWidget()&&s>=-1&&s<=1){if(d.flags&32)return!0;d.flags&16&&(a=void 0)}(h<e||e==p&&(s<-1?d.length:d.covers(1)))&&(!a||!d.isWidget()&&a.isWidget())&&(a=d,l=e-h),(p>e||e==h&&(s>1?d.length:d.covers(-1)))&&(!u||!d.isWidget()&&u.isWidget())&&(u=d,c=e-h)}}),!a&&!u)throw new Error("No tile at position "+e);return a&&s<0||!u?{tile:a,offset:l}:{tile:u,offset:c}}}class BlockWrapperTile extends CompositeTile{constructor(e,s){super(e),this.wrapper=s}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,s){let a=new BlockWrapperTile(s||document.createElement(e.tagName),e);return s||(a.flags|=4),a}}class LineTile extends CompositeTile{constructor(e,s){super(e),this.attrs=s}isLine(){return!0}static start(e,s,a){let l=new LineTile(s||document.createElement("div"),e);return(!s||!a)&&(l.flags|=4),l}get domAttrs(){return this.attrs}resolveInline(e,s,a){let l=null,u=-1,c=null,d=-1;function h(m,g){for(let y=0,A=0;y<m.children.length&&A<=g;y++){let T=m.children[y],E=A+T.length;E>=g&&(T.isComposite()?h(T,g-A):(!c||c.isHidden&&(s>0||a&&onSameLine(c,T)))&&(E>g||T.flags&32)?(c=T,d=g-A):(A<g||T.flags&16&&!T.isHidden)&&(l=T,u=g-A)),A=E}}h(this,e);let p=(s<0?l:c)||l||c;return p?{tile:p,offset:p==l?u:d}:null}coordsIn(e,s){let a=this.resolveInline(e,s,!0);return a?a.tile.coordsIn(Math.max(0,a.offset),s):fallbackRect(this)}domIn(e,s){let a=this.resolveInline(e,s);if(a){let{tile:l,offset:u}=a;if(this.dom.contains(l.dom))return l.isText()?new DOMPos(l.dom,Math.min(l.dom.nodeValue.length,u)):l.domPosFor(u,l.flags&16?1:l.flags&32?-1:s);let c=a.tile.parent,d=!1;for(let h of c.children){if(d)return new DOMPos(h.dom,0);h==a.tile&&(d=!0)}}return new DOMPos(this.dom,0)}}function fallbackRect(o){let e=o.dom.lastChild;if(!e)return o.dom.getBoundingClientRect();let s=clientRectsFor(e);return s[s.length-1]||null}function onSameLine(o,e){let s=o.coordsIn(0,1),a=e.coordsIn(0,1);return s&&a&&a.top<s.bottom}class MarkTile extends CompositeTile{constructor(e,s){super(e),this.mark=s}get domAttrs(){return this.mark.attrs}static of(e,s){let a=new MarkTile(s||document.createElement(e.tagName),e);return s||(a.flags|=4),a}}class TextTile extends Tile{constructor(e,s){super(e,s.length),this.text=s}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,s){let a=this.dom.nodeValue.length;e>a&&(e=a);let l=e,u=e,c=0;e==0&&s<0||e==a&&s>=0?browser$1.chrome||browser$1.gecko||(e?(l--,c=1):u<a&&(u++,c=-1)):s<0?l--:u<a&&u++;let d=textRange(this.dom,l,u).getClientRects();if(!d.length)return null;let h=d[(c?c<0:s>=0)?0:d.length-1];return browser$1.safari&&!c&&h.width==0&&(h=Array.prototype.find.call(d,p=>p.width)||h),c?flattenRect(h,c<0):h||null}static of(e,s){let a=new TextTile(s||document.createTextNode(e),e);return s||(a.flags|=2),a}}class WidgetTile extends Tile{constructor(e,s,a,l){super(e,s,l),this.widget=a}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,s){return this.coordsInWidget(e,s,!1)}coordsInWidget(e,s,a){let l=this.widget.coordsAt(this.dom,e,s);if(l)return l;if(a)return flattenRect(this.dom.getBoundingClientRect(),this.length?e==0:s<=0);{let u=this.dom.getClientRects(),c=null;if(!u.length)return null;let d=this.flags&16?!0:this.flags&32?!1:e>0;for(let h=d?u.length-1:0;c=u[h],!(e>0?h==0:h==u.length-1||c.top<c.bottom);h+=d?-1:1);return flattenRect(c,!d)}}get overrideDOMText(){if(!this.length)return Text.empty;let{root:e}=this;if(!e)return Text.empty;let s=this.posAtStart;return e.view.state.doc.slice(s,s+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,s,a,l,u){return u||(u=e.toDOM(s),e.editable||(u.contentEditable="false")),new WidgetTile(u,a,e,l)}}class WidgetBufferTile extends Tile{constructor(e){let s=document.createElement("img");s.className="cm-widgetBuffer",s.setAttribute("aria-hidden","true"),super(s,0,e)}get isHidden(){return!0}get overrideDOMText(){return Text.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class TilePointer{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,s,a){let{tile:l,index:u,beforeBreak:c,parents:d}=this;for(;e||s>0;)if(l.isComposite())if(c){if(!e)break;a&&a.break(),e--,c=!1}else if(u==l.children.length){if(!e&&!d.length)break;a&&a.leave(l),c=!!l.breakAfter,{tile:l,index:u}=d.pop(),u++}else{let h=l.children[u],p=h.breakAfter;(s>0?h.length<=e:h.length<e)&&(!a||a.skip(h,0,h.length)!==!1||!h.isComposite)?(c=!!p,u++,e-=h.length):(d.push({tile:l,index:u}),l=h,u=0,a&&h.isComposite()&&a.enter(h))}else if(u==l.length)c=!!l.breakAfter,{tile:l,index:u}=d.pop(),u++;else if(e){let h=Math.min(e,l.length-u);a&&a.skip(l,u,u+h),e-=h,u+=h}else break;return this.tile=l,this.index=u,this.beforeBreak=c,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class OpenWrapper{constructor(e,s,a,l){this.from=e,this.to=s,this.wrapper=a,this.rank=l}}class TileBuilder{constructor(e,s,a){this.cache=e,this.root=s,this.blockWrappers=a,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,s,a,l){var u;this.flushBuffer();let c=this.ensureMarks(s,a),d=c.lastChild;if(d&&d.isText()&&!(d.flags&8)&&d.length+e.length<512){this.cache.reused.set(d,2);let h=c.children[c.children.length-1]=new TextTile(d.dom,d.text+e);h.parent=c}else c.append(l||TextTile.of(e,(u=this.cache.find(TextTile))===null||u===void 0?void 0:u.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,s){let a=this.curLine;a.dom!=s.line.dom&&(a.setDOM(this.cache.reused.has(s.line)?freeNode(s.line.dom):s.line.dom),this.cache.reused.set(s.line,2));let l=a;for(let d=s.marks.length-1;d>=0;d--){let h=s.marks[d],p=l.lastChild;if(p instanceof MarkTile&&p.mark.eq(h.mark))p.dom!=h.dom&&p.setDOM(freeNode(h.dom)),l=p;else{if(this.cache.reused.get(h)){let g=Tile.get(h.dom);g&&g.setDOM(freeNode(h.dom))}let m=MarkTile.of(h.mark,h.dom);l.append(m),l=m}this.cache.reused.set(h,2)}let u=Tile.get(e.text);u&&this.cache.reused.set(u,2);let c=new TextTile(e.text,e.text.nodeValue);c.flags|=8,l.append(c)}addInlineWidget(e,s,a){let l=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);l||this.flushBuffer();let u=this.ensureMarks(s,a);!l&&!(e.flags&16)&&u.append(this.getBuffer(1)),u.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,s,a){this.flushBuffer(),this.ensureMarks(s,a).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let s=this.afterWidget||this.lastBlock;s.length+=e,this.pos+=e}addLineStart(e,s){var a;e||(e=lineBaseAttrs);let l=LineTile.start(e,s||((a=this.cache.find(LineTile))===null||a===void 0?void 0:a.dom),!!s);this.getBlockPos().append(this.lastBlock=this.curLine=l)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,s){var a;let l=this.curLine;for(let u=e.length-1;u>=0;u--){let c=e[u],d;if(s>0&&(d=l.lastChild)&&d instanceof MarkTile&&d.mark.eq(c))l=d,s--;else{let h=MarkTile.of(c,(a=this.cache.find(MarkTile,p=>p.mark.eq(c)))===null||a===void 0?void 0:a.dom);l.append(h),l=h,s=0}}return l}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!hasContent(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(browser$1.ios&&hasContent(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(BreakWidget,0,32)||new WidgetTile(BreakWidget.toDOM(),0,BreakWidget,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let s=new OpenWrapper(e.from,e.to,e.value,e.rank),a=this.wrappers.length;for(;a>0&&(this.wrappers[a-1].rank-s.rank||this.wrappers[a-1].to-s.to)<0;)a--;this.wrappers.splice(a,0,s)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let s=this.root;for(let a of this.wrappers){let l=s.lastChild;if(a.from<this.pos&&l instanceof BlockWrapperTile&&l.wrapper.eq(a.wrapper))s=l;else{let u=BlockWrapperTile.of(a.wrapper,(e=this.cache.find(BlockWrapperTile,c=>c.wrapper.eq(a.wrapper)))===null||e===void 0?void 0:e.dom);s.append(u),s=u}}return s}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let s=2|(e<0?16:32),a=this.cache.find(WidgetBufferTile,void 0,1);return a&&(a.flags=s),a||new WidgetBufferTile(s)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class TextStream{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:l,lineBreak:u,done:c}=this.cursor.next(this.skipCount);if(this.skipCount=0,c)throw new Error("Ran out of text content when drawing inline views");this.text=l;let d=this.textOff=Math.min(e,l.length);return u?null:l.slice(0,d)}let s=Math.min(this.text.length,this.textOff+e),a=this.text.slice(this.textOff,s);return this.textOff=s,a}}const buckets=[WidgetTile,LineTile,TextTile,MarkTile,WidgetBufferTile,BlockWrapperTile,DocTile];for(let o=0;o<buckets.length;o++)buckets[o].bucket=o;class TileCache{constructor(e){this.view=e,this.buckets=buckets.map(()=>[]),this.index=buckets.map(()=>0),this.reused=new Map}add(e){let s=e.constructor.bucket,a=this.buckets[s];a.length<6?a.push(e):a[this.index[s]=(this.index[s]+1)%6]=e}find(e,s,a=2){let l=e.bucket,u=this.buckets[l],c=this.index[l];for(let d=u.length-1;d>=0;d--){let h=(d+c)%u.length,p=u[h];if((!s||s(p))&&!this.reused.has(p))return u.splice(h,1),h<c&&this.index[l]--,this.reused.set(p,a),p}return null}findWidget(e,s,a){let l=this.buckets[0];if(l.length)for(let u=0,c=0;;u++){if(u==l.length){if(c)return null;c=1,u=0}let d=l[u];if(!this.reused.has(d)&&(c==0?d.widget.compare(e):d.widget.constructor==e.constructor&&e.updateDOM(d.dom,this.view)))return l.splice(u,1),u<this.index[0]&&this.index[0]--,d.widget==e&&d.length==s&&(d.flags&497)==a?(this.reused.set(d,1),d):(this.reused.set(d,2),new WidgetTile(d.dom,s,e,d.flags&-498|a))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,s=2){if(!this.reused.has(e))return this.reused.set(e,s),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class TileUpdate{constructor(e,s,a,l,u){this.view=e,this.decorations=l,this.disallowBlockEffectsFor=u,this.openWidget=!1,this.openMarks=0,this.cache=new TileCache(e),this.text=new TextStream(e.state.doc),this.builder=new TileBuilder(this.cache,new DocTile(e,e.contentDOM),RangeSet.iter(a)),this.cache.reused.set(s,2),this.old=new TilePointer(s),this.reuseWalker={skip:(c,d,h)=>{if(this.cache.add(c),c.isComposite())return!1},enter:c=>this.cache.add(c),leave:()=>{},break:()=>{}}}run(e,s){let a=s&&this.getCompositionContext(s.text);for(let l=0,u=0,c=0;;){let d=c<e.length?e[c++]:null,h=d?d.fromA:this.old.root.length;if(h>l){let p=h-l;this.preserve(p,!c,!d),l=h,u+=p}if(!d)break;s&&d.fromA<=s.range.fromA&&d.toA>=s.range.toA?(this.forward(d.fromA,s.range.fromA,s.range.fromA<s.range.toA?1:-1),this.emit(u,s.range.fromB),this.cache.clear(),this.builder.addComposition(s,a),this.text.skip(s.range.toB-s.range.fromB),this.forward(s.range.fromA,d.toA),this.emit(s.range.toB,d.toB)):(this.forward(d.fromA,d.toA),this.emit(u,d.toB)),u=d.toB,l=d.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,s,a){let l=getMarks(this.old),u=this.openMarks;this.old.advance(e,a?1:-1,{skip:(c,d,h)=>{if(c.isWidget())if(this.openWidget)this.builder.continueWidget(h-d);else{let p=h>0||d<c.length?WidgetTile.of(c.widget,this.view,h-d,c.flags&496,this.cache.maybeReuse(c)):this.cache.reuse(c);p.flags&256?(p.flags&=-2,this.builder.addBlockWidget(p)):(this.builder.ensureLine(null),this.builder.addInlineWidget(p,l,u),u=l.length)}else if(c.isText())this.builder.ensureLine(null),!d&&h==c.length?this.builder.addText(c.text,l,u,this.cache.reuse(c)):(this.cache.add(c),this.builder.addText(c.text.slice(d,h),l,u)),u=l.length;else if(c.isLine())c.flags&=-2,this.cache.reused.set(c,1),this.builder.addLine(c);else if(c instanceof WidgetBufferTile)this.cache.add(c);else if(c instanceof MarkTile)this.builder.ensureLine(null),this.builder.addMark(c,l,u),this.cache.reused.set(c,1),u=l.length;else return!1;this.openWidget=!1},enter:c=>{c.isLine()?this.builder.addLineStart(c.attrs,this.cache.maybeReuse(c)):(this.cache.add(c),c instanceof MarkTile&&l.unshift(c.mark)),this.openWidget=!1},leave:c=>{c.isLine()?l.length&&(l.length=u=0):c instanceof MarkTile&&(l.shift(),u=Math.min(u,l.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,s){let a=null,l=this.builder,u=0,c=RangeSet.spans(this.decorations,e,s,{point:(d,h,p,m,g,y)=>{if(p instanceof PointDecoration){if(this.disallowBlockEffectsFor[y]){if(p.block)throw new RangeError("Block decorations may not be specified via plugins");if(h>this.view.state.doc.lineAt(d).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(u=m.length,g>m.length)l.continueWidget(h-d);else{let A=p.widget||(p.block?NullWidget.block:NullWidget.inline),T=widgetFlags(p),E=this.cache.findWidget(A,h-d,T)||WidgetTile.of(A,this.view,h-d,T);p.block?(p.startSide>0&&l.addLineStartIfNotCovered(a),l.addBlockWidget(E)):(l.ensureLine(a),l.addInlineWidget(E,m,g))}a=null}else a=addLineDeco(a,p);h>d&&this.text.skip(h-d)},span:(d,h,p,m)=>{for(let g=d;g<h;){let y=this.text.next(Math.min(512,h-g));y==null?(l.addLineStartIfNotCovered(a),l.addBreak(),g++):(l.ensureLine(a),l.addText(y,p,g==d?m:p.length),g+=y.length),a=null}}});l.addLineStartIfNotCovered(a),this.openWidget=c>u,this.openMarks=c}forward(e,s,a=1){s-e<=10?this.old.advance(s-e,a,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(s-e-10,-1),this.old.advance(5,a,this.reuseWalker))}getCompositionContext(e){let s=[],a=null;for(let l=e.parentNode;;l=l.parentNode){let u=Tile.get(l);if(l==this.view.contentDOM)break;u instanceof MarkTile?s.push(u):u!=null&&u.isLine()?a=u:u instanceof BlockWrapperTile||(l.nodeName=="DIV"&&!a&&l!=this.view.contentDOM?a=new LineTile(l,lineBaseAttrs):a||s.push(MarkTile.of(new MarkDecoration({tagName:l.nodeName.toLowerCase(),attributes:getAttrs$1(l)}),l)))}return{line:a,marks:s}}}function hasContent(o,e){let s=a=>{for(let l of a.children)if((e?l.isText():l.length)||s(l))return!0;return!1};return s(o)}function widgetFlags(o){let e=o.isReplace?(o.startSide<0?64:0)|(o.endSide>0?128:0):o.startSide>0?32:16;return o.block&&(e|=256),e}const lineBaseAttrs={class:"cm-line"};function addLineDeco(o,e){let s=e.spec.attributes,a=e.spec.class;return!s&&!a||(o||(o={class:"cm-line"}),s&&combineAttrs(s,o),a&&(o.class+=" "+a)),o}function getMarks(o){let e=[];for(let s=o.parents.length;s>1;s--){let a=s==o.parents.length?o.tile:o.parents[s].tile;a instanceof MarkTile&&e.push(a.mark)}return e}function freeNode(o){let e=Tile.get(o);return e&&e.setDOM(o.cloneNode()),o}class NullWidget extends WidgetType{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span"),NullWidget.block=new NullWidget("div");const BreakWidget=new class extends WidgetType{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class DocView{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new DocTile(e,e.contentDOM),this.updateInner([new ChangedRange(0,0,0,e.state.doc.length)],null)}update(e){var s;let a=e.changedRanges;this.minWidth>0&&a.length&&(a.every(({fromA:m,toA:g})=>g<this.minWidthFrom||m>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let l=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((s=this.domChanged)===null||s===void 0)&&s.newSel?l=this.domChanged.newSel.head:!touchesComposition(e.changes,this.hasComposition)&&!e.selectionSet&&(l=e.state.selection.main.head));let u=l>-1?findCompositionRange(this.view,e.changes,l):null;if(this.domChanged=null,this.hasComposition){let{from:m,to:g}=this.hasComposition;a=new ChangedRange(m,g,e.changes.mapPos(m,-1),e.changes.mapPos(g,1)).addToSet(a.slice())}this.hasComposition=u?{from:u.range.fromB,to:u.range.toB}:null,(browser$1.ie||browser$1.chrome)&&!u&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let c=this.decorations,d=this.blockWrappers;this.updateDeco();let h=findChangedDeco(c,this.decorations,e.changes);h.length&&(a=ChangedRange.extendWithRanges(a,h));let p=findChangedWrappers(d,this.blockWrappers,e.changes);return p.length&&(a=ChangedRange.extendWithRanges(a,p)),u&&!a.some(m=>m.fromA<=u.range.fromA&&m.toA>=u.range.toA)&&(a=u.range.addToSet(a.slice())),this.tile.flags&2&&a.length==0?!1:(this.updateInner(a,u),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,s){this.view.viewState.mustMeasureContent=!0;let{observer:a}=this.view;a.ignore(()=>{if(s||e.length){let c=this.tile,d=new TileUpdate(this.view,c,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=d.run(e,s),destroyDropped(c,d.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let u=browser$1.chrome||browser$1.ios?{node:a.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(u),u&&(u.written||a.selectionRange.focusNode!=u.node||!this.tile.dom.contains(u.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let l=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let u of this.tile.children)u.isWidget()&&u.widget instanceof BlockGapWidget&&l.push(u.dom);a.updateGaps(l)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let s of e.transactions)for(let a of s.effects)a.is(setEditContextFormatting)&&(this.editContextFormatting=a.value)}updateSelection(e=!1,s=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:a}=this.tile,l=this.view.root.activeElement,u=l==a,c=!u&&!(this.view.state.facet(editable)||a.tabIndex>-1)&&hasSelection(a,this.view.observer.selectionRange)&&!(l&&a.contains(l));if(!(u||s||c))return;let d=this.forceSelection;this.forceSelection=!1;let h=this.view.state.selection.main,p,m;if(h.empty?m=p=this.inlineDOMNearPos(h.anchor,h.assoc||1):(m=this.inlineDOMNearPos(h.head,h.head==h.from?1:-1),p=this.inlineDOMNearPos(h.anchor,h.anchor==h.from?1:-1)),browser$1.gecko&&h.empty&&!this.hasComposition&&betweenUneditable(p)){let y=document.createTextNode("");this.view.observer.ignore(()=>p.node.insertBefore(y,p.node.childNodes[p.offset]||null)),p=m=new DOMPos(y,0),d=!0}let g=this.view.observer.selectionRange;(d||!g.focusNode||(!isEquivalentPosition(p.node,p.offset,g.anchorNode,g.anchorOffset)||!isEquivalentPosition(m.node,m.offset,g.focusNode,g.focusOffset))&&!this.suppressWidgetCursorChange(g,h))&&(this.view.observer.ignore(()=>{browser$1.android&&browser$1.chrome&&a.contains(g.focusNode)&&inUneditable(g.focusNode,a)&&(a.blur(),a.focus({preventScroll:!0}));let y=getSelection$1(this.view.root);if(y)if(h.empty){if(browser$1.gecko){let A=nextToUneditable(p.node,p.offset);if(A&&A!=3){let T=(A==1?textNodeBefore:textNodeAfter)(p.node,p.offset);T&&(p=new DOMPos(T.node,T.offset))}}y.collapse(p.node,p.offset),h.bidiLevel!=null&&y.caretBidiLevel!==void 0&&(y.caretBidiLevel=h.bidiLevel)}else if(y.extend){y.collapse(p.node,p.offset);try{y.extend(m.node,m.offset)}catch{}}else{let A=document.createRange();h.anchor>h.head&&([p,m]=[m,p]),A.setEnd(m.node,m.offset),A.setStart(p.node,p.offset),y.removeAllRanges(),y.addRange(A)}c&&this.view.root.activeElement==a&&(a.blur(),l&&l.focus())}),this.view.observer.setSelectionRange(p,m)),this.impreciseAnchor=p.precise?null:new DOMPos(g.anchorNode,g.anchorOffset),this.impreciseHead=m.precise?null:new DOMPos(g.focusNode,g.focusOffset)}suppressWidgetCursorChange(e,s){return this.hasComposition&&s.empty&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==s.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,s=e.state.selection.main,a=getSelection$1(e.root),{anchorNode:l,anchorOffset:u}=e.observer.selectionRange;if(!a||!s.empty||!s.assoc||!a.modify)return;let c=this.lineAt(s.head,s.assoc);if(!c)return;let d=c.posAtStart;if(s.head==d||s.head==d+c.length)return;let h=this.coordsAt(s.head,-1),p=this.coordsAt(s.head,1);if(!h||!p||h.bottom>p.top)return;let m=this.domAtPos(s.head+s.assoc,s.assoc);a.collapse(m.node,m.offset),a.modify("move",s.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let g=e.observer.selectionRange;e.docView.posFromDOM(g.anchorNode,g.anchorOffset)!=s.from&&a.collapse(l,u)}posFromDOM(e,s){let a=this.tile.nearest(e);if(!a)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let l=a.posAtStart;if(a.isComposite()){let u;if(e==a.dom)u=a.dom.childNodes[s];else{let c=maxOffset(e)==0?0:s==0?-1:1;for(;;){let d=e.parentNode;if(d==a.dom)break;c==0&&d.firstChild!=d.lastChild&&(e==d.firstChild?c=-1:c=1),e=d}c<0?u=e:u=e.nextSibling}if(u==a.dom.firstChild)return l;for(;u&&!Tile.get(u);)u=u.nextSibling;if(!u)return l+a.length;for(let c=0,d=l;;c++){let h=a.children[c];if(h.dom==u)return d;d+=h.length+h.breakAfter}}else return a.isText()?e==a.dom?l+s:l+(s?a.length:0):l}domAtPos(e,s){let{tile:a,offset:l}=this.tile.resolveBlock(e,s);return a.isWidget()?a.domPosFor(e,s):a.domIn(l,s)}inlineDOMNearPos(e,s){let a,l=-1,u=!1,c,d=-1,h=!1;return this.tile.blockTiles((p,m)=>{if(p.isWidget()){if(p.flags&32&&m>=e)return!0;p.flags&16&&(u=!0)}else{let g=m+p.length;if(m<=e&&(a=p,l=e-m,u=g<e),g>=e&&!c&&(c=p,d=e-m,h=m>e),m>e&&c)return!0}}),!a&&!c?this.domAtPos(e,s):(u&&c?a=null:h&&a&&(c=null),a&&s<0||!c?a.domIn(l,s):c.domIn(d,s))}coordsAt(e,s){let{tile:a,offset:l}=this.tile.resolveBlock(e,s);return a.isWidget()?a.widget instanceof BlockGapWidget?null:a.coordsInWidget(l,s,!0):a.coordsIn(l,s)}lineAt(e,s){let{tile:a}=this.tile.resolveBlock(e,s);return a.isLine()?a:null}coordsForChar(e){let{tile:s,offset:a}=this.tile.resolveBlock(e,1);if(!s.isLine())return null;function l(u,c){if(u.isComposite())for(let d of u.children){if(d.length>=c){let h=l(d,c);if(h)return h}if(c-=d.length,c<0)break}else if(u.isText()&&c<u.length){let d=findClusterBreak(u.text,c);if(d==c)return null;let h=textRange(u.dom,c,d).getClientRects();for(let p=0;p<h.length;p++){let m=h[p];if(p==h.length-1||m.top<m.bottom&&m.left<m.right)return m}}return null}return l(s,a)}measureVisibleLineHeights(e){let s=[],{from:a,to:l}=e,u=this.view.contentDOM.clientWidth,c=u>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,d=-1,h=this.view.textDirection==Direction.LTR,p=0,m=(g,y,A)=>{for(let T=0;T<g.children.length&&!(y>l);T++){let E=g.children[T],v=y+E.length,_=E.dom.getBoundingClientRect(),{height:w}=_;if(A&&!T&&(p+=_.top-A.top),E instanceof BlockWrapperTile)v>a&&m(E,y,_);else if(y>=a&&(p>0&&s.push(-p),s.push(w+p),p=0,c)){let R=E.dom.lastChild,k=R?clientRectsFor(R):[];if(k.length){let I=k[k.length-1],P=h?I.right-_.left:_.right-I.left;P>d&&(d=P,this.minWidth=u,this.minWidthFrom=y,this.minWidthTo=v)}}A&&T==g.children.length-1&&(p+=A.bottom-_.bottom),y=v+E.breakAfter}};return m(this.tile,0,null),s}textDirectionAt(e){let{tile:s}=this.tile.resolveBlock(e,1);return getComputedStyle(s.dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){let e=this.tile.blockTiles(c=>{if(c.isLine()&&c.children.length&&c.length<=20){let d=0,h;for(let p of c.children){if(!p.isText()||/[^ -~]/.test(p.text))return;let m=clientRectsFor(p.dom);if(m.length!=1)return;d+=m[0].width,h=m[0].height}if(d)return{lineHeight:c.dom.getBoundingClientRect().height,charWidth:d/c.length,textHeight:h}}});if(e)return e;let s=document.createElement("div"),a,l,u;return s.className="cm-line",s.style.width="99999px",s.style.position="absolute",s.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(s);let c=clientRectsFor(s.firstChild)[0];a=s.getBoundingClientRect().height,l=c&&c.width?c.width/27:7,u=c&&c.height?c.height:a,s.remove()}),{lineHeight:a,charWidth:l,textHeight:u}}computeBlockGapDeco(){let e=[],s=this.view.viewState;for(let a=0,l=0;;l++){let u=l==s.viewports.length?null:s.viewports[l],c=u?u.from-1:this.view.state.doc.length;if(c>a){let d=(s.lineBlockAt(c).bottom-s.lineBlockAt(a).top)/this.view.scaleY;e.push(Decoration.replace({widget:new BlockGapWidget(d),block:!0,inclusive:!0,isBlockGap:!0}).range(a,c))}if(!u)break;a=u.to+1}return Decoration.set(e)}updateDeco(){let e=1,s=this.view.state.facet(decorations).map(u=>(this.dynamicDecorationMap[e++]=typeof u=="function")?u(this.view):u),a=!1,l=this.view.state.facet(outerDecorations).map((u,c)=>{let d=typeof u=="function";return d&&(a=!0),d?u(this.view):u});for(l.length&&(this.dynamicDecorationMap[e++]=a,s.push(RangeSet.join(l))),this.decorations=[this.editContextFormatting,...s,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(blockWrappers).map(u=>typeof u=="function"?u(this.view):u)}scrollIntoView(e){if(e.isSnapshot){let p=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=p.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let p of this.view.state.facet(scrollHandler))try{if(p(this.view,e.range,e))return!0}catch(m){logException(this.view.state,m,"scroll handler")}let{range:s}=e,a=this.coordsAt(s.head,s.empty?s.assoc:s.head>s.anchor?-1:1),l;if(!a)return;!s.empty&&(l=this.coordsAt(s.anchor,s.anchor>s.head?-1:1))&&(a={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top),right:Math.max(a.right,l.right),bottom:Math.max(a.bottom,l.bottom)});let u=getScrollMargins(this.view),c={left:a.left-u.left,top:a.top-u.top,right:a.right+u.right,bottom:a.bottom+u.bottom},{offsetWidth:d,offsetHeight:h}=this.view.scrollDOM;if(scrollRectIntoView(this.view.scrollDOM,c,s.head<s.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,d),-d),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==Direction.LTR),window.visualViewport&&window.innerHeight-window.visualViewport.height>1&&(a.top>window.pageYOffset+window.visualViewport.offsetTop+window.visualViewport.height||a.bottom<window.pageYOffset+window.visualViewport.offsetTop)){let p=this.view.docView.lineAt(s.head,1);p&&p.dom.scrollIntoView({block:"nearest"})}}lineHasWidget(e){let s=a=>a.isWidget()||a.children.some(s);return s(this.tile.resolveBlock(e,1).tile)}destroy(){destroyDropped(this.tile)}}function destroyDropped(o,e){let s=e==null?void 0:e.get(o);if(s!=1){s==null&&o.destroy();for(let a of o.children)destroyDropped(a,e)}}function betweenUneditable(o){return o.node.nodeType==1&&o.node.firstChild&&(o.offset==0||o.node.childNodes[o.offset-1].contentEditable=="false")&&(o.offset==o.node.childNodes.length||o.node.childNodes[o.offset].contentEditable=="false")}function findCompositionNode(o,e){let s=o.observer.selectionRange;if(!s.focusNode)return null;let a=textNodeBefore(s.focusNode,s.focusOffset),l=textNodeAfter(s.focusNode,s.focusOffset),u=a||l;if(l&&a&&l.node!=a.node){let d=Tile.get(l.node);if(!d||d.isText()&&d.text!=l.node.nodeValue)u=l;else if(o.docView.lastCompositionAfterCursor){let h=Tile.get(a.node);!h||h.isText()&&h.text!=a.node.nodeValue||(u=l)}}if(o.docView.lastCompositionAfterCursor=u!=a,!u)return null;let c=e-u.offset;return{from:c,to:c+u.node.nodeValue.length,node:u.node}}function findCompositionRange(o,e,s){let a=findCompositionNode(o,s);if(!a)return null;let{node:l,from:u,to:c}=a,d=l.nodeValue;if(/[\n\r]/.test(d)||o.state.doc.sliceString(a.from,a.to)!=d)return null;let h=e.invertedDesc;return{range:new ChangedRange(h.mapPos(u),h.mapPos(c),u,c),text:l}}function nextToUneditable(o,e){return o.nodeType!=1?0:(e&&o.childNodes[e-1].contentEditable=="false"?1:0)|(e<o.childNodes.length&&o.childNodes[e].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(e,s){addRange(e,s,this.changes)}comparePoint(e,s){addRange(e,s,this.changes)}boundChange(e){addRange(e,e,this.changes)}};function findChangedDeco(o,e,s){let a=new DecorationComparator$1;return RangeSet.compare(o,e,s,a),a.changes}class WrapperComparator{constructor(){this.changes=[]}compareRange(e,s){addRange(e,s,this.changes)}comparePoint(){}boundChange(e){addRange(e,e,this.changes)}}function findChangedWrappers(o,e,s){let a=new WrapperComparator;return RangeSet.compare(o,e,s,a),a.changes}function inUneditable(o,e){for(let s=o;s&&s!=e;s=s.assignedSlot||s.parentNode)if(s.nodeType==1&&s.contentEditable=="false")return!0;return!1}function touchesComposition(o,e){let s=!1;return e&&o.iterChangedRanges((a,l)=>{a<e.to&&l>e.from&&(s=!0)}),s}class BlockGapWidget extends WidgetType{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function groupAt(o,e,s=1){let a=o.charCategorizer(e),l=o.doc.lineAt(e),u=e-l.from;if(l.length==0)return EditorSelection.cursor(e);u==0?s=1:u==l.length&&(s=-1);let c=u,d=u;s<0?c=findClusterBreak(l.text,u,!1):d=findClusterBreak(l.text,u);let h=a(l.text.slice(c,d));for(;c>0;){let p=findClusterBreak(l.text,c,!1);if(a(l.text.slice(p,c))!=h)break;c=p}for(;d<l.length;){let p=findClusterBreak(l.text,d);if(a(l.text.slice(d,p))!=h)break;d=p}return EditorSelection.range(c+l.from,d+l.from)}function posAtCoordsImprecise(o,e,s,a,l){let u=Math.round((a-e.left)*o.defaultCharacterWidth);if(o.lineWrapping&&s.height>o.defaultLineHeight*1.5){let d=o.viewState.heightOracle.textHeight,h=Math.floor((l-s.top-(o.defaultLineHeight-d)*.5)/d);u+=h*o.viewState.heightOracle.lineLength}let c=o.state.sliceDoc(s.from,s.to);return s.from+findColumn(c,u,o.state.tabSize)}function blockAt(o,e,s){let a=o.lineBlockAt(e);if(Array.isArray(a.type)){let l;for(let u of a.type){if(u.from>e)break;if(!(u.to<e)){if(u.from<e&&u.to>e)return u;(!l||u.type==BlockType.Text&&(l.type!=u.type||(s<0?u.from<e:u.to>e)))&&(l=u)}}return l||a}return a}function moveToLineBoundary(o,e,s,a){let l=blockAt(o,e.head,e.assoc||-1),u=!a||l.type!=BlockType.Text||!(o.lineWrapping||l.widgetLineBreaks)?null:o.coordsAtPos(e.assoc<0&&e.head>l.from?e.head-1:e.head);if(u){let c=o.dom.getBoundingClientRect(),d=o.textDirectionAt(l.from),h=o.posAtCoords({x:s==(d==Direction.LTR)?c.right-1:c.left+1,y:(u.top+u.bottom)/2});if(h!=null)return EditorSelection.cursor(h,s?-1:1)}return EditorSelection.cursor(s?l.to:l.from,s?-1:1)}function moveByChar(o,e,s,a){let l=o.state.doc.lineAt(e.head),u=o.bidiSpans(l),c=o.textDirectionAt(l.from);for(let d=e,h=null;;){let p=moveVisually(l,u,c,d,s),m=movedOver;if(!p){if(l.number==(s?o.state.doc.lines:1))return d;m=`
`,l=o.state.doc.line(l.number+(s?1:-1)),u=o.bidiSpans(l),p=o.visualLineSide(l,!s)}if(h){if(!h(m))return d}else{if(!a)return p;h=a(m)}d=p}}function byGroup(o,e,s){let a=o.state.charCategorizer(e),l=a(s);return u=>{let c=a(u);return l==CharCategory.Space&&(l=c),l==c}}function moveVertically(o,e,s,a){let l=e.head,u=s?1:-1;if(l==(s?o.state.doc.length:0))return EditorSelection.cursor(l,e.assoc);let c=e.goalColumn,d,h=o.contentDOM.getBoundingClientRect(),p=o.coordsAtPos(l,(e.empty?e.assoc:0)||(s?1:-1)),m=o.documentTop;if(p)c==null&&(c=p.left-h.left),d=u<0?p.top:p.bottom;else{let T=o.viewState.lineBlockAt(l);c==null&&(c=Math.min(h.right-h.left,o.defaultCharacterWidth*(l-T.from))),d=(u<0?T.top:T.bottom)+m}let g=h.left+c,y=a??o.viewState.heightOracle.textHeight>>1,A=posAtCoords(o,{x:g,y:d+y*u},!1,u);return EditorSelection.cursor(A.pos,A.assoc,void 0,c)}function skipAtomicRanges(o,e,s){for(;;){let a=0;for(let l of o)l.between(e-1,e+1,(u,c,d)=>{if(e>u&&e<c){let h=a||s||(e-u<c-e?-1:1);e=h<0?u:c,a=h}});if(!a)return e}}function skipAtomsForSelection(o,e){let s=null;for(let a=0;a<e.ranges.length;a++){let l=e.ranges[a],u=null;if(l.empty){let c=skipAtomicRanges(o,l.from,0);c!=l.from&&(u=EditorSelection.cursor(c,-1))}else{let c=skipAtomicRanges(o,l.from,-1),d=skipAtomicRanges(o,l.to,1);(c!=l.from||d!=l.to)&&(u=EditorSelection.range(l.from==l.anchor?c:d,l.from==l.head?c:d))}u&&(s||(s=e.ranges.slice()),s[a]=u)}return s?EditorSelection.create(s,e.mainIndex):e}function skipAtoms(o,e,s){let a=skipAtomicRanges(o.state.facet(atomicRanges).map(l=>l(o)),s.from,e.head>s.from?-1:1);return a==s.from?s:EditorSelection.cursor(a,a<s.from?1:-1)}class PosAssoc{constructor(e,s){this.pos=e,this.assoc=s}}function posAtCoords(o,e,s,a){let l=o.contentDOM.getBoundingClientRect(),u=l.top+o.viewState.paddingTop,{x:c,y:d}=e,h=d-u,p;for(;;){if(h<0)return new PosAssoc(0,1);if(h>o.viewState.docHeight)return new PosAssoc(o.state.doc.length,-1);if(p=o.elementAtHeight(h),a==null)break;if(p.type==BlockType.Text){if(a<0?p.to<o.viewport.from:p.from>o.viewport.to)break;let y=o.docView.coordsAt(a<0?p.from:p.to,a>0?-1:1);if(y&&(a<0?y.top<=h+u:y.bottom>=h+u))break}let g=o.viewState.heightOracle.textHeight/2;h=a>0?p.bottom+g:p.top-g}if(o.viewport.from>=p.to||o.viewport.to<=p.from){if(s)return null;if(p.type==BlockType.Text){let g=posAtCoordsImprecise(o,l,p,c,d);return new PosAssoc(g,g==p.from?1:-1)}}if(p.type!=BlockType.Text)return h<(p.top+p.bottom)/2?new PosAssoc(p.from,1):new PosAssoc(p.to,-1);let m=o.docView.lineAt(p.from,2);return(!m||m.length!=p.length)&&(m=o.docView.lineAt(p.from,-2)),new InlineCoordsScan(o,c,d,o.textDirectionAt(p.from)).scanTile(m,p.from)}class InlineCoordsScan{constructor(e,s,a,l){this.view=e,this.x=s,this.y=a,this.baseDir=l,this.line=null,this.spans=null}bidiSpansAt(e){return(!this.line||this.line.from>e||this.line.to<e)&&(this.line=this.view.state.doc.lineAt(e),this.spans=this.view.bidiSpans(this.line)),this}baseDirAt(e,s){let{line:a,spans:l}=this.bidiSpansAt(e);return l[BidiSpan.find(l,e-a.from,-1,s)].level==this.baseDir}dirAt(e,s){let{line:a,spans:l}=this.bidiSpansAt(e);return l[BidiSpan.find(l,e-a.from,-1,s)].dir}bidiIn(e,s){let{spans:a,line:l}=this.bidiSpansAt(e);return a.length>1||a.length&&(a[0].level!=this.baseDir||a[0].to+l.from<s)}scan(e,s){let a=0,l=e.length-1,u=new Set,c=this.bidiIn(e[0],e[l]),d,h,p=-1,m=1e9,g;e:for(;a<l;){let A=l-a,T=a+l>>1;t:if(u.has(T)){let v=a+Math.floor(Math.random()*A);for(let _=0;_<A;_++){if(!u.has(v)){T=v;break t}v++,v==l&&(v=a)}break e}u.add(T);let E=s(T);if(E)for(let v=0;v<E.length;v++){let _=E[v],w=0;if(_.bottom<this.y)(!d||d.bottom<_.bottom)&&(d=_),w=1;else if(_.top>this.y)(!h||h.top>_.top)&&(h=_),w=-1;else{let R=_.left>this.x?this.x-_.left:_.right<this.x?this.x-_.right:0,k=Math.abs(R);k<m&&(p=T,m=k,g=_),R&&(w=R<0==(this.baseDir==Direction.LTR)?-1:1)}w==-1&&(!c||this.baseDirAt(e[T],1))?l=T:w==1&&(!c||this.baseDirAt(e[T+1],-1))&&(a=T+1)}}if(!g){let A=d&&(!h||this.y-d.bottom<h.top-this.y)?d:h;return this.y=(A.top+A.bottom)/2,this.scan(e,s)}let y=(c?this.dirAt(e[p],1):this.baseDir)==Direction.LTR;return{i:p,after:this.x>(g.left+g.right)/2==y}}scanText(e,s){let a=[];for(let u=0;u<e.length;u=findClusterBreak(e.text,u))a.push(s+u);a.push(s+e.length);let l=this.scan(a,u=>{let c=a[u]-s,d=a[u+1]-s;return textRange(e.dom,c,d).getClientRects()});return l.after?new PosAssoc(a[l.i+1],-1):new PosAssoc(a[l.i],1)}scanTile(e,s){if(!e.length)return new PosAssoc(s,1);if(e.children.length==1){let d=e.children[0];if(d.isText())return this.scanText(d,s);if(d.isComposite())return this.scanTile(d,s)}let a=[s];for(let d=0,h=s;d<e.children.length;d++)a.push(h+=e.children[d].length);let l=this.scan(a,d=>{let h=e.children[d];return h.flags&48?null:(h.dom.nodeType==1?h.dom:textRange(h.dom,0,h.length)).getClientRects()}),u=e.children[l.i],c=a[l.i];return u.isText()?this.scanText(u,c):u.isComposite()?this.scanTile(u,c):l.after?new PosAssoc(a[l.i+1],-1):new PosAssoc(c,1)}}const LineBreakPlaceholder="";class DOMReader{constructor(e,s){this.points=e,this.view=s,this.text="",this.lineSeparator=s.state.facet(EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=LineBreakPlaceholder}readRange(e,s){if(!e)return this;let a=e.parentNode;for(let l=e;;){this.findPointBefore(a,l);let u=this.text.length;this.readNode(l);let c=Tile.get(l),d=l.nextSibling;if(d==s){c!=null&&c.breakAfter&&!d&&a!=this.view.contentDOM&&this.lineBreak();break}let h=Tile.get(d);(c&&h?c.breakAfter:(c?c.breakAfter:isBlockElement(l))||isBlockElement(d)&&(l.nodeName!="BR"||c!=null&&c.isWidget())&&this.text.length>u)&&!isEmptyToEnd(d,s)&&this.lineBreak(),l=d}return this.findPointBefore(a,s),this}readTextNode(e){let s=e.nodeValue;for(let a of this.points)a.node==e&&(a.pos=this.text.length+Math.min(a.offset,s.length));for(let a=0,l=this.lineSeparator?null:/\r\n?|\n/g;;){let u=-1,c=1,d;if(this.lineSeparator?(u=s.indexOf(this.lineSeparator,a),c=this.lineSeparator.length):(d=l.exec(s))&&(u=d.index,c=d[0].length),this.append(s.slice(a,u<0?s.length:u)),u<0)break;if(this.lineBreak(),c>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=c-1);a=u+c}}readNode(e){let s=Tile.get(e),a=s&&s.overrideDOMText;if(a!=null){this.findPointInside(e,a.length);for(let l=a.iter();!l.next().done;)l.lineBreak?this.lineBreak():this.append(l.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,s){for(let a of this.points)a.node==e&&e.childNodes[a.offset]==s&&(a.pos=this.text.length)}findPointInside(e,s){for(let a of this.points)(e.nodeType==3?a.node==e:e.contains(a.node))&&(a.pos=this.text.length+(isAtEnd(e,a.node,a.offset)?s:0))}}function isAtEnd(o,e,s){for(;;){if(!e||s<maxOffset(e))return!1;if(e==o)return!0;s=domIndex(e)+1,e=e.parentNode}}function isEmptyToEnd(o,e){let s;for(;!(o==e||!o);o=o.nextSibling){let a=Tile.get(o);if(!(a!=null&&a.isWidget()))return!1;a&&(s||(s=[])).push(a)}if(s)for(let a of s){let l=a.overrideDOMText;if(l!=null&&l.length)return!1}return!0}class DOMPoint{constructor(e,s){this.node=e,this.offset=s,this.pos=-1}}class DOMChange{constructor(e,s,a,l){this.typeOver=l,this.bounds=null,this.text="",this.domChanged=s>-1;let{impreciseHead:u,impreciseAnchor:c}=e.docView;if(e.state.readOnly&&s>-1)this.newSel=null;else if(s>-1&&(this.bounds=domBoundsAround(e.docView.tile,s,a,0))){let d=u||c?[]:selectionPoints(e),h=new DOMReader(d,e);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=selectionFromPoints(d,this.bounds.from)}else{let d=e.observer.selectionRange,h=u&&u.node==d.focusNode&&u.offset==d.focusOffset||!contains(e.contentDOM,d.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(d.focusNode,d.focusOffset),p=c&&c.node==d.anchorNode&&c.offset==d.anchorOffset||!contains(e.contentDOM,d.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(d.anchorNode,d.anchorOffset),m=e.viewport;if((browser$1.ios||browser$1.chrome)&&e.state.selection.main.empty&&h!=p&&(m.from>0||m.to<e.state.doc.length)){let g=Math.min(h,p),y=Math.max(h,p),A=m.from-g,T=m.to-y;(A==0||A==1||g==0)&&(T==0||T==-1||y==e.state.doc.length)&&(h=0,p=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(EditorSelection.range(p,h)):this.newSel=EditorSelection.single(p,h)}}}function domBoundsAround(o,e,s,a){if(o.isComposite()){let l=-1,u=-1,c=-1,d=-1;for(let h=0,p=a,m=a;h<o.children.length;h++){let g=o.children[h],y=p+g.length;if(p<e&&y>s)return domBoundsAround(g,e,s,p);if(y>=e&&l==-1&&(l=h,u=p),p>s&&g.dom.parentNode==o.dom){c=h,d=m;break}m=y,p=y+g.breakAfter}return{from:u,to:d<0?a+o.length:d,startDOM:(l?o.children[l-1].dom.nextSibling:null)||o.dom.firstChild,endDOM:c<o.children.length&&c>=0?o.children[c].dom:null}}else return o.isText()?{from:a,to:a+o.length,startDOM:o.dom,endDOM:o.dom.nextSibling}:null}function applyDOMChange(o,e){let s,{newSel:a}=e,l=o.state.selection.main,u=o.inputState.lastKeyTime>Date.now()-100?o.inputState.lastKeyCode:-1;if(e.bounds){let{from:c,to:d}=e.bounds,h=l.from,p=null;(u===8||browser$1.android&&e.text.length<d-c)&&(h=l.to,p="end");let m=findDiff(o.state.doc.sliceString(c,d,LineBreakPlaceholder),e.text,h-c,p);m&&(browser$1.chrome&&u==13&&m.toB==m.from+2&&e.text.slice(m.from,m.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&m.toB--,s={from:c+m.from,to:c+m.toA,insert:Text.of(e.text.slice(m.from,m.toB).split(LineBreakPlaceholder))})}else a&&(!o.hasFocus&&o.state.facet(editable)||sameSelPos(a,l))&&(a=null);if(!s&&!a)return!1;if(!s&&e.typeOver&&!l.empty&&a&&a.main.empty?s={from:l.from,to:l.to,insert:o.state.doc.slice(l.from,l.to)}:(browser$1.mac||browser$1.android)&&s&&s.from==s.to&&s.from==l.head-1&&/^\. ?$/.test(s.insert.toString())&&o.contentDOM.getAttribute("autocorrect")=="off"?(a&&s.insert.length==2&&(a=EditorSelection.single(a.main.anchor-1,a.main.head-1)),s={from:s.from,to:s.to,insert:Text.of([s.insert.toString().replace("."," ")])}):s&&s.from>=l.from&&s.to<=l.to&&(s.from!=l.from||s.to!=l.to)&&l.to-l.from-(s.to-s.from)<=4?s={from:l.from,to:l.to,insert:o.state.doc.slice(l.from,s.from).append(s.insert).append(o.state.doc.slice(s.to,l.to))}:o.state.doc.lineAt(l.from).to<l.to&&o.docView.lineHasWidget(l.to)&&o.inputState.insertingTextAt>Date.now()-50?s={from:l.from,to:l.to,insert:o.state.toText(o.inputState.insertingText)}:browser$1.chrome&&s&&s.from==s.to&&s.from==l.head&&s.insert.toString()==`
 `&&o.lineWrapping&&(a&&(a=EditorSelection.single(a.main.anchor-1,a.main.head-1)),s={from:l.from,to:l.to,insert:Text.of([" "])}),s)return applyDOMChangeInner(o,s,a,u);if(a&&!sameSelPos(a,l)){let c=!1,d="select";return o.inputState.lastSelectionTime>Date.now()-50&&(o.inputState.lastSelectionOrigin=="select"&&(c=!0),d=o.inputState.lastSelectionOrigin,d=="select.pointer"&&(a=skipAtomsForSelection(o.state.facet(atomicRanges).map(h=>h(o)),a))),o.dispatch({selection:a,scrollIntoView:c,userEvent:d}),!0}else return!1}function applyDOMChangeInner(o,e,s,a=-1){if(browser$1.ios&&o.inputState.flushIOSKey(e))return!0;let l=o.state.selection.main;if(browser$1.android&&(e.to==l.to&&(e.from==l.from||e.from==l.from-1&&o.state.sliceDoc(e.from,l.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&dispatchKey(o.contentDOM,"Enter",13)||(e.from==l.from-1&&e.to==l.to&&e.insert.length==0||a==8&&e.insert.length<e.to-e.from&&e.to>l.head)&&dispatchKey(o.contentDOM,"Backspace",8)||e.from==l.from&&e.to==l.to+1&&e.insert.length==0&&dispatchKey(o.contentDOM,"Delete",46)))return!0;let u=e.insert.toString();o.inputState.composing>=0&&o.inputState.composing++;let c,d=()=>c||(c=applyDefaultInsert(o,e,s));return o.state.facet(inputHandler).some(h=>h(o,e.from,e.to,u,d))||o.dispatch(d()),!0}function applyDefaultInsert(o,e,s){let a,l=o.state,u=l.selection.main,c=-1;if(e.from==e.to&&e.from<u.from||e.from>u.to){let h=e.from<u.from?-1:1,p=h<0?u.from:u.to,m=skipAtomicRanges(l.facet(atomicRanges).map(g=>g(o)),p,h);e.from==m&&(c=m)}if(c>-1)a={changes:e,selection:EditorSelection.cursor(e.from+e.insert.length,-1)};else if(e.from>=u.from&&e.to<=u.to&&e.to-e.from>=(u.to-u.from)/3&&(!s||s.main.empty&&s.main.from==e.from+e.insert.length)&&o.inputState.composing<0){let h=u.from<e.from?l.sliceDoc(u.from,e.from):"",p=u.to>e.to?l.sliceDoc(e.to,u.to):"";a=l.replaceSelection(o.state.toText(h+e.insert.sliceString(0,void 0,o.state.lineBreak)+p))}else{let h=l.changes(e),p=s&&s.main.to<=h.newLength?s.main:void 0;if(l.selection.ranges.length>1&&(o.inputState.composing>=0||o.inputState.compositionPendingChange)&&e.to<=u.to+10&&e.to>=u.to-10){let m=o.state.sliceDoc(e.from,e.to),g,y=s&&findCompositionNode(o,s.main.head);if(y){let T=e.insert.length-(e.to-e.from);g={from:y.from,to:y.to-T}}else g=o.state.doc.lineAt(u.head);let A=u.to-e.to;a=l.changeByRange(T=>{if(T.from==u.from&&T.to==u.to)return{changes:h,range:p||T.map(h)};let E=T.to-A,v=E-m.length;if(o.state.sliceDoc(v,E)!=m||E>=g.from&&v<=g.to)return{range:T};let _=l.changes({from:v,to:E,insert:e.insert}),w=T.to-u.to;return{changes:_,range:p?EditorSelection.range(Math.max(0,p.anchor+w),Math.max(0,p.head+w)):T.map(_)}})}else a={changes:h,selection:p&&l.selection.replaceRange(p)}}let d="input.type";return(o.composing||o.inputState.compositionPendingChange&&o.inputState.compositionEndedAt>Date.now()-50)&&(o.inputState.compositionPendingChange=!1,d+=".compose",o.inputState.compositionFirstChange&&(d+=".start",o.inputState.compositionFirstChange=!1)),l.update(a,{userEvent:d,scrollIntoView:!0})}function findDiff(o,e,s,a){let l=Math.min(o.length,e.length),u=0;for(;u<l&&o.charCodeAt(u)==e.charCodeAt(u);)u++;if(u==l&&o.length==e.length)return null;let c=o.length,d=e.length;for(;c>0&&d>0&&o.charCodeAt(c-1)==e.charCodeAt(d-1);)c--,d--;if(a=="end"){let h=Math.max(0,u-Math.min(c,d));s-=c+h-u}if(c<u&&o.length<e.length){let h=s<=u&&s>=c?u-s:0;u-=h,d=u+(d-c),c=u}else if(d<u){let h=s<=u&&s>=d?u-s:0;u-=h,c=u+(c-d),d=u}return{from:u,toA:c,toB:d}}function selectionPoints(o){let e=[];if(o.root.activeElement!=o.contentDOM)return e;let{anchorNode:s,anchorOffset:a,focusNode:l,focusOffset:u}=o.observer.selectionRange;return s&&(e.push(new DOMPoint(s,a)),(l!=s||u!=a)&&e.push(new DOMPoint(l,u))),e}function selectionFromPoints(o,e){if(o.length==0)return null;let s=o[0].pos,a=o.length==2?o[1].pos:s;return s>-1&&a>-1?EditorSelection.single(s+e,a+e):null}function sameSelPos(o,e){return e.head==o.main.head&&e.anchor==o.main.anchor}class InputState{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,browser$1.safari&&e.contentDOM.addEventListener("input",()=>null),browser$1.gecko&&firefoxCopyCutHack(e.contentDOM.ownerDocument)}handleEvent(e){!eventBelongsToEditor(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,s){let a=this.handlers[e];if(a){for(let l of a.observers)l(this.view,s);for(let l of a.handlers){if(s.defaultPrevented)break;if(l(this.view,s)){s.preventDefault();break}}}}ensureHandlers(e){let s=computeHandlers(e),a=this.handlers,l=this.view.contentDOM;for(let u in s)if(u!="scroll"){let c=!s[u].handlers.length,d=a[u];d&&c!=!d.handlers.length&&(l.removeEventListener(u,this.handleEvent),d=null),d||l.addEventListener(u,this.handleEvent,{passive:c})}for(let u in a)u!="scroll"&&!s[u]&&l.removeEventListener(u,this.handleEvent);this.handlers=s}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&modifierCodes.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),browser$1.android&&browser$1.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let s;return browser$1.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((s=PendingKeys.find(a=>a.keyCode==e.keyCode))&&!e.ctrlKey||EmacsyPendingKeys.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=s||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let s=this.pendingIOSKey;return!s||s.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,s.key,s.keyCode,s instanceof KeyboardEvent?s:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:browser$1.safari&&!browser$1.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(o,e){return(s,a)=>{try{return e.call(o,a,s)}catch(l){logException(s.state,l)}}}function computeHandlers(o){let e=Object.create(null);function s(a){return e[a]||(e[a]={observers:[],handlers:[]})}for(let a of o){let l=a.spec,u=l&&l.plugin.domEventHandlers,c=l&&l.plugin.domEventObservers;if(u)for(let d in u){let h=u[d];h&&s(d).handlers.push(bindHandler(a.value,h))}if(c)for(let d in c){let h=c[d];h&&s(d).observers.push(bindHandler(a.value,h))}}for(let a in handlers)s(a).handlers.push(handlers[a]);for(let a in observers)s(a).observers.push(observers[a]);return e}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(o){return Math.max(0,o)*.7+8}function dist(o,e){return Math.max(Math.abs(o.clientX-e.clientX),Math.abs(o.clientY-e.clientY))}class MouseSelection{constructor(e,s,a,l){this.view=e,this.startEvent=s,this.style=a,this.mustSelect=l,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=s,this.scrollParents=scrollableParents(e.contentDOM),this.atoms=e.state.facet(atomicRanges).map(c=>c(e));let u=e.contentDOM.ownerDocument;u.addEventListener("mousemove",this.move=this.move.bind(this)),u.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=s.shiftKey,this.multiple=e.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(e,s),this.dragging=isInPrimarySelection(e,s)&&getClickType(s)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let s=0,a=0,l=0,u=0,c=this.view.win.innerWidth,d=this.view.win.innerHeight;this.scrollParents.x&&({left:l,right:c}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:u,bottom:d}=this.scrollParents.y.getBoundingClientRect());let h=getScrollMargins(this.view);e.clientX-h.left<=l+dragScrollMargin?s=-dragScrollSpeed(l-e.clientX):e.clientX+h.right>=c-dragScrollMargin&&(s=dragScrollSpeed(e.clientX-c)),e.clientY-h.top<=u+dragScrollMargin?a=-dragScrollSpeed(u-e.clientY):e.clientY+h.bottom>=d-dragScrollMargin&&(a=dragScrollSpeed(e.clientY-d)),this.setScrollSpeed(s,a)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,s){this.scrollSpeed={x:e,y:s},e||s?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:s}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),s&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=s,s=0),(e||s)&&this.view.win.scrollBy(e,s),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:s}=this,a=skipAtomsForSelection(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!a.eq(s.state.selection,this.dragging===!1))&&this.view.dispatch({selection:a,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(s=>s.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(o,e){let s=o.state.facet(clickAddsSelectionRange);return s.length?s[0](e):browser$1.mac?e.metaKey:e.ctrlKey}function dragMovesSelection(o,e){let s=o.state.facet(dragMovesSelection$1);return s.length?s[0](e):browser$1.mac?!e.altKey:!e.ctrlKey}function isInPrimarySelection(o,e){let{main:s}=o.state.selection;if(s.empty)return!1;let a=getSelection$1(o.root);if(!a||a.rangeCount==0)return!0;let l=a.getRangeAt(0).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.left<=e.clientX&&c.right>=e.clientX&&c.top<=e.clientY&&c.bottom>=e.clientY)return!0}return!1}function eventBelongsToEditor(o,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let s=e.target,a;s!=o.contentDOM;s=s.parentNode)if(!s||s.nodeType==11||(a=Tile.get(s))&&a.isWidget()&&!a.isHidden&&a.widget.ignoreEvent(e))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser$1.ie&&browser$1.ie_version<15||browser$1.ios&&browser$1.webkit_version<604;function capturePaste(o){let e=o.dom.parentNode;if(!e)return;let s=e.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus(),setTimeout(()=>{o.focus(),s.remove(),doPaste(o,s.value)},50)}function textFilter(o,e,s){for(let a of o.facet(e))s=a(s,o);return s}function doPaste(o,e){e=textFilter(o.state,clipboardInputFilter,e);let{state:s}=o,a,l=1,u=s.toText(e),c=u.lines==s.selection.ranges.length;if(lastLinewiseCopy!=null&&s.selection.ranges.every(h=>h.empty)&&lastLinewiseCopy==u.toString()){let h=-1;a=s.changeByRange(p=>{let m=s.doc.lineAt(p.from);if(m.from==h)return{range:p};h=m.from;let g=s.toText((c?u.line(l++).text:e)+s.lineBreak);return{changes:{from:m.from,insert:g},range:EditorSelection.cursor(p.from+g.length)}})}else c?a=s.changeByRange(h=>{let p=u.line(l++);return{changes:{from:h.from,to:h.to,insert:p.text},range:EditorSelection.cursor(h.from+p.length)}}):a=s.replaceSelection(u);o.dispatch(a,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=o=>{o.inputState.lastScrollTop=o.scrollDOM.scrollTop,o.inputState.lastScrollLeft=o.scrollDOM.scrollLeft},handlers.keydown=(o,e)=>(o.inputState.setSelectionOrigin("select"),e.keyCode==27&&o.inputState.tabFocusMode!=0&&(o.inputState.tabFocusMode=Date.now()+2e3),!1),observers.touchstart=(o,e)=>{o.inputState.lastTouchTime=Date.now(),o.inputState.setSelectionOrigin("select.pointer")},observers.touchmove=o=>{o.inputState.setSelectionOrigin("select.pointer")},handlers.mousedown=(o,e)=>{if(o.observer.flush(),o.inputState.lastTouchTime>Date.now()-2e3)return!1;let s=null;for(let a of o.state.facet(mouseSelectionStyle))if(s=a(o,e),s)break;if(!s&&e.button==0&&(s=basicMouseSelection(o,e)),s){let a=!o.hasFocus;o.inputState.startMouseSelection(new MouseSelection(o,e,s,a)),a&&o.observer.ignore(()=>{focusPreventScroll(o.contentDOM);let u=o.root.activeElement;u&&!u.contains(o.contentDOM)&&u.blur()});let l=o.inputState.mouseSelection;if(l)return l.start(e),l.dragging===!1}else o.inputState.setSelectionOrigin("select.pointer");return!1};function rangeForClick(o,e,s,a){if(a==1)return EditorSelection.cursor(e,s);if(a==2)return groupAt(o.state,e,s);{let l=o.docView.lineAt(e,s),u=o.state.doc.lineAt(l?l.posAtEnd:e),c=l?l.posAtStart:u.from,d=l?l.posAtEnd:u.to;return d<o.state.doc.length&&d==u.to&&d++,EditorSelection.range(c,d)}}const BadMouseDetail=browser$1.ie&&browser$1.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(o){if(!BadMouseDetail)return o.detail;let e=lastMouseDown,s=lastMouseDownTime;return lastMouseDown=o,lastMouseDownTime=Date.now(),lastMouseDownCount=!e||s>Date.now()-400&&Math.abs(e.clientX-o.clientX)<2&&Math.abs(e.clientY-o.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(o,e){let s=o.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),a=getClickType(e),l=o.state.selection;return{update(u){u.docChanged&&(s.pos=u.changes.mapPos(s.pos),l=l.map(u.changes))},get(u,c,d){let h=o.posAndSideAtCoords({x:u.clientX,y:u.clientY},!1),p,m=rangeForClick(o,h.pos,h.assoc,a);if(s.pos!=h.pos&&!c){let g=rangeForClick(o,s.pos,s.assoc,a),y=Math.min(g.from,m.from),A=Math.max(g.to,m.to);m=y<m.from?EditorSelection.range(y,A):EditorSelection.range(A,y)}return c?l.replaceRange(l.main.extend(m.from,m.to)):d&&a==1&&l.ranges.length>1&&(p=removeRangeAround(l,h.pos))?p:d?l.addRange(m):EditorSelection.create([m])}}}function removeRangeAround(o,e){for(let s=0;s<o.ranges.length;s++){let{from:a,to:l}=o.ranges[s];if(a<=e&&l>=e)return EditorSelection.create(o.ranges.slice(0,s).concat(o.ranges.slice(s+1)),o.mainIndex==s?0:o.mainIndex-(o.mainIndex>s?1:0))}return null}handlers.dragstart=(o,e)=>{let{selection:{main:s}}=o.state;if(e.target.draggable){let l=o.docView.tile.nearest(e.target);if(l&&l.isWidget()){let u=l.posAtStart,c=u+l.length;(u>=s.to||c<=s.from)&&(s=EditorSelection.range(u,c))}}let{inputState:a}=o;return a.mouseSelection&&(a.mouseSelection.dragging=!0),a.draggedContent=s,e.dataTransfer&&(e.dataTransfer.setData("Text",textFilter(o.state,clipboardOutputFilter,o.state.sliceDoc(s.from,s.to))),e.dataTransfer.effectAllowed="copyMove"),!1},handlers.dragend=o=>(o.inputState.draggedContent=null,!1);function dropText(o,e,s,a){if(s=textFilter(o.state,clipboardInputFilter,s),!s)return;let l=o.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:u}=o.inputState,c=a&&u&&dragMovesSelection(o,e)?{from:u.from,to:u.to}:null,d={from:l,insert:s},h=o.state.changes(c?[c,d]:d);o.focus(),o.dispatch({changes:h,selection:{anchor:h.mapPos(l,-1),head:h.mapPos(l,1)},userEvent:c?"move.drop":"input.drop"}),o.inputState.draggedContent=null}handlers.drop=(o,e)=>{if(!e.dataTransfer)return!1;if(o.state.readOnly)return!0;let s=e.dataTransfer.files;if(s&&s.length){let a=Array(s.length),l=0,u=()=>{++l==s.length&&dropText(o,e,a.filter(c=>c!=null).join(o.state.lineBreak),!1)};for(let c=0;c<s.length;c++){let d=new FileReader;d.onerror=u,d.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(d.result)||(a[c]=d.result),u()},d.readAsText(s[c])}return!0}else{let a=e.dataTransfer.getData("Text");if(a)return dropText(o,e,a,!0),!0}return!1},handlers.paste=(o,e)=>{if(o.state.readOnly)return!0;o.observer.flush();let s=brokenClipboardAPI?null:e.clipboardData;return s?(doPaste(o,s.getData("text/plain")||s.getData("text/uri-list")),!0):(capturePaste(o),!1)};function captureCopy(o,e){let s=o.dom.parentNode;if(!s)return;let a=s.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px",a.value=e,a.focus(),a.selectionEnd=e.length,a.selectionStart=0,setTimeout(()=>{a.remove(),o.focus()},50)}function copiedRange(o){let e=[],s=[],a=!1;for(let l of o.selection.ranges)l.empty||(e.push(o.sliceDoc(l.from,l.to)),s.push(l));if(!e.length){let l=-1;for(let{from:u}of o.selection.ranges){let c=o.doc.lineAt(u);c.number>l&&(e.push(c.text),s.push({from:c.from,to:Math.min(o.doc.length,c.to+1)})),l=c.number}a=!0}return{text:textFilter(o,clipboardOutputFilter,e.join(o.lineBreak)),ranges:s,linewise:a}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(o,e)=>{if(!hasSelection(o.contentDOM,o.observer.selectionRange))return!1;let{text:s,ranges:a,linewise:l}=copiedRange(o.state);if(!s&&!l)return!1;lastLinewiseCopy=l?s:null,e.type=="cut"&&!o.state.readOnly&&o.dispatch({changes:a,scrollIntoView:!0,userEvent:"delete.cut"});let u=brokenClipboardAPI?null:e.clipboardData;return u?(u.clearData(),u.setData("text/plain",s),!0):(captureCopy(o,s),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(o,e){let s=[];for(let a of o.facet(focusChangeEffect)){let l=a(o,e);l&&s.push(l)}return s.length?o.update({effects:s,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(o){setTimeout(()=>{let e=o.hasFocus;if(e!=o.inputState.notifiedFocused){let s=focusChangeTransaction(o.state,e);s?o.dispatch(s):o.update([])}},10)}observers.focus=o=>{o.inputState.lastFocusTime=Date.now(),!o.scrollDOM.scrollTop&&(o.inputState.lastScrollTop||o.inputState.lastScrollLeft)&&(o.scrollDOM.scrollTop=o.inputState.lastScrollTop,o.scrollDOM.scrollLeft=o.inputState.lastScrollLeft),updateForFocusChange(o)},observers.blur=o=>{o.observer.clearSelectionRange(),updateForFocusChange(o)},observers.compositionstart=observers.compositionupdate=o=>{o.observer.editContext||(o.inputState.compositionFirstChange==null&&(o.inputState.compositionFirstChange=!0),o.inputState.composing<0&&(o.inputState.composing=0))},observers.compositionend=o=>{o.observer.editContext||(o.inputState.composing=-1,o.inputState.compositionEndedAt=Date.now(),o.inputState.compositionPendingKey=!0,o.inputState.compositionPendingChange=o.observer.pendingRecords().length>0,o.inputState.compositionFirstChange=null,browser$1.chrome&&browser$1.android?o.observer.flushSoon():o.inputState.compositionPendingChange?Promise.resolve().then(()=>o.observer.flush()):setTimeout(()=>{o.inputState.composing<0&&o.docView.hasComposition&&o.update([])},50))},observers.contextmenu=o=>{o.inputState.lastContextMenu=Date.now()},handlers.beforeinput=(o,e)=>{var s,a;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(o.inputState.insertingText=e.data,o.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&o.observer.editContext){let u=(s=e.dataTransfer)===null||s===void 0?void 0:s.getData("text/plain"),c=e.getTargetRanges();if(u&&c.length){let d=c[0],h=o.posAtDOM(d.startContainer,d.startOffset),p=o.posAtDOM(d.endContainer,d.endOffset);return applyDOMChangeInner(o,{from:h,to:p,insert:o.state.toText(u)},null),!0}}let l;if(browser$1.chrome&&browser$1.android&&(l=PendingKeys.find(u=>u.inputType==e.inputType))&&(o.observer.delayAndroidKey(l.key,l.keyCode),l.key=="Backspace"||l.key=="Delete")){let u=((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0;setTimeout(()=>{var c;(((c=window.visualViewport)===null||c===void 0?void 0:c.height)||0)>u+10&&o.hasFocus&&(o.contentDOM.blur(),o.focus())},100)}return browser$1.ios&&e.inputType=="deleteContentForward"&&o.observer.flushSoon(),browser$1.safari&&e.inputType=="insertText"&&o.inputState.composing>=0&&setTimeout(()=>observers.compositionend(o,e),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(o){appliedFirefoxHack.has(o)||(appliedFirefoxHack.add(o),o.addEventListener("copy",()=>{}),o.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(e){this.lineWrapping=e,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,s){let a=this.doc.lineAt(s).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(a+=Math.max(0,Math.ceil((s-e-a*this.lineLength*.5)/this.lineLength))),this.lineHeight*a}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wrappingWhiteSpace.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let s=!1;for(let a=0;a<e.length;a++){let l=e[a];l<0?a++:this.heightSamples[Math.floor(l*10)]||(s=!0,this.heightSamples[Math.floor(l*10)]=!0)}return s}refresh(e,s,a,l,u,c){let d=wrappingWhiteSpace.indexOf(e)>-1,h=Math.abs(s-this.lineHeight)>.3||this.lineWrapping!=d||Math.abs(a-this.charWidth)>.1;if(this.lineWrapping=d,this.lineHeight=s,this.charWidth=a,this.textHeight=l,this.lineLength=u,h){this.heightSamples={};for(let p=0;p<c.length;p++){let m=c[p];m<0?p++:this.heightSamples[Math.floor(m*10)]=!0}}return h}}class MeasuredHeights{constructor(e,s){this.from=e,this.heights=s,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(e,s,a,l,u){this.from=e,this.length=s,this.top=a,this.height=l,this._content=u}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let s=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new BlockInfo(this.from,this.length+e.length,this.top,this.height+e.height,s)}}var QueryType$1=(function(o){return o[o.ByPos=0]="ByPos",o[o.ByHeight=1]="ByHeight",o[o.ByPosNoHeight=2]="ByPosNoHeight",o})(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(e,s,a=2){this.length=e,this.height=s,this.flags=a}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Epsilon&&(heightChangeFlag=!0),this.height=e)}replace(e,s,a){return HeightMap.of(a)}decomposeLeft(e,s){s.push(this)}decomposeRight(e,s){s.push(this)}applyChanges(e,s,a,l){let u=this,c=a.doc;for(let d=l.length-1;d>=0;d--){let{fromA:h,toA:p,fromB:m,toB:g}=l[d],y=u.lineAt(h,QueryType$1.ByPosNoHeight,a.setDoc(s),0,0),A=y.to>=p?y:u.lineAt(p,QueryType$1.ByPosNoHeight,a,0,0);for(g+=A.to-p,p=A.to;d>0&&y.from<=l[d-1].toA;)h=l[d-1].fromA,m=l[d-1].fromB,d--,h<y.from&&(y=u.lineAt(h,QueryType$1.ByPosNoHeight,a,0,0));m+=y.from-h,h=y.from;let T=NodeBuilder.build(a.setDoc(c),e,m,g);u=replace(u,u.replace(h,p,T))}return u.updateHeight(a,0)}static empty(){return new HeightMapText(0,0,0)}static of(e){if(e.length==1)return e[0];let s=0,a=e.length,l=0,u=0;for(;;)if(s==a)if(l>u*2){let d=e[s-1];d.break?e.splice(--s,1,d.left,null,d.right):e.splice(--s,1,d.left,d.right),a+=1+d.break,l-=d.size}else if(u>l*2){let d=e[a];d.break?e.splice(a,1,d.left,null,d.right):e.splice(a,1,d.left,d.right),a+=2+d.break,u-=d.size}else break;else if(l<u){let d=e[s++];d&&(l+=d.size)}else{let d=e[--a];d&&(u+=d.size)}let c=0;return e[s-1]==null?(c=1,s--):e[s]==null&&(c=1,a++),new HeightMapBranch(HeightMap.of(e.slice(0,s)),c,HeightMap.of(e.slice(a)))}}function replace(o,e){return o==e?o:(o.constructor!=e.constructor&&(heightChangeFlag=!0),e)}HeightMap.prototype.size=1;const SpaceDeco=Decoration.replace({});class HeightMapBlock extends HeightMap{constructor(e,s,a){super(e,s),this.deco=a,this.spaceAbove=0}mainBlock(e,s){return new BlockInfo(s,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,s,a,l){return this.spaceAbove&&e<a+this.spaceAbove?new BlockInfo(l,0,a,this.spaceAbove,SpaceDeco):this.mainBlock(a,l)}lineAt(e,s,a,l,u){let c=this.mainBlock(l,u);return this.spaceAbove?this.blockAt(0,a,l,u).join(c):c}forEachLine(e,s,a,l,u,c){e<=u+this.length&&s>=u&&c(this.lineAt(0,QueryType$1.ByPos,a,l,u))}setMeasuredHeight(e){let s=e.heights[e.index++];s<0?(this.spaceAbove=-s,s=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(s)}updateHeight(e,s=0,a=!1,l){return l&&l.from<=s&&l.more&&this.setMeasuredHeight(l),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(e,s,a){super(e,s,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=a}mainBlock(e,s){return new BlockInfo(s,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,s,a){let l=a[0];return a.length==1&&(l instanceof HeightMapText||l instanceof HeightMapGap&&l.flags&4)&&Math.abs(this.length-l.length)<10?(l instanceof HeightMapGap?l=new HeightMapText(l.length,this.height,this.spaceAbove):l.height=this.height,this.outdated||(l.outdated=!1),l):HeightMap.of(a)}updateHeight(e,s=0,a=!1,l){return l&&l.from<=s&&l.more?this.setMeasuredHeight(l):(a||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(e){super(e,0)}heightMetrics(e,s){let a=e.doc.lineAt(s).number,l=e.doc.lineAt(s+this.length).number,u=l-a+1,c,d=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*u);c=h/u,this.length>u+1&&(d=(this.height-h)/(this.length-u-1))}else c=this.height/u;return{firstLine:a,lastLine:l,perLine:c,perChar:d}}blockAt(e,s,a,l){let{firstLine:u,lastLine:c,perLine:d,perChar:h}=this.heightMetrics(s,l);if(s.lineWrapping){let p=l+(e<s.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-a)/this.height))*this.length)),m=s.doc.lineAt(p),g=d+m.length*h,y=Math.max(a,e-g/2);return new BlockInfo(m.from,m.length,y,g,0)}else{let p=Math.max(0,Math.min(c-u,Math.floor((e-a)/d))),{from:m,length:g}=s.doc.line(u+p);return new BlockInfo(m,g,a+d*p,d,0)}}lineAt(e,s,a,l,u){if(s==QueryType$1.ByHeight)return this.blockAt(e,a,l,u);if(s==QueryType$1.ByPosNoHeight){let{from:A,to:T}=a.doc.lineAt(e);return new BlockInfo(A,T-A,0,0,0)}let{firstLine:c,perLine:d,perChar:h}=this.heightMetrics(a,u),p=a.doc.lineAt(e),m=d+p.length*h,g=p.number-c,y=l+d*g+h*(p.from-u-g);return new BlockInfo(p.from,p.length,Math.max(l,Math.min(y,l+this.height-m)),m,0)}forEachLine(e,s,a,l,u,c){e=Math.max(e,u),s=Math.min(s,u+this.length);let{firstLine:d,perLine:h,perChar:p}=this.heightMetrics(a,u);for(let m=e,g=l;m<=s;){let y=a.doc.lineAt(m);if(m==e){let T=y.number-d;g+=h*T+p*(e-u-T)}let A=h+p*y.length;c(new BlockInfo(y.from,y.length,g,A,0)),g+=A,m=y.to+1}}replace(e,s,a){let l=this.length-s;if(l>0){let u=a[a.length-1];u instanceof HeightMapGap?a[a.length-1]=new HeightMapGap(u.length+l):a.push(null,new HeightMapGap(l-1))}if(e>0){let u=a[0];u instanceof HeightMapGap?a[0]=new HeightMapGap(e+u.length):a.unshift(new HeightMapGap(e-1),null)}return HeightMap.of(a)}decomposeLeft(e,s){s.push(new HeightMapGap(e-1),null)}decomposeRight(e,s){s.push(null,new HeightMapGap(this.length-e-1))}updateHeight(e,s=0,a=!1,l){let u=s+this.length;if(l&&l.from<=s+this.length&&l.more){let c=[],d=Math.max(s,l.from),h=-1;for(l.from>s&&c.push(new HeightMapGap(l.from-s-1).updateHeight(e,s));d<=u&&l.more;){let m=e.doc.lineAt(d).length;c.length&&c.push(null);let g=l.heights[l.index++],y=0;g<0&&(y=-g,g=l.heights[l.index++]),h==-1?h=g:Math.abs(g-h)>=Epsilon&&(h=-2);let A=new HeightMapText(m,g,y);A.outdated=!1,c.push(A),d+=m+1}d<=u&&c.push(null,new HeightMapGap(u-d).updateHeight(e,d));let p=HeightMap.of(c);return(h<0||Math.abs(p.height-this.height)>=Epsilon||Math.abs(h-this.heightMetrics(e,s).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace(this,p)}else(a||this.outdated)&&(this.setHeight(e.heightForGap(s,s+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(e,s,a){super(e.length+s+a.length,e.height+a.height,s|(e.outdated||a.outdated?2:0)),this.left=e,this.right=a,this.size=e.size+a.size}get break(){return this.flags&1}blockAt(e,s,a,l){let u=a+this.left.height;return e<u?this.left.blockAt(e,s,a,l):this.right.blockAt(e,s,u,l+this.left.length+this.break)}lineAt(e,s,a,l,u){let c=l+this.left.height,d=u+this.left.length+this.break,h=s==QueryType$1.ByHeight?e<c:e<d,p=h?this.left.lineAt(e,s,a,l,u):this.right.lineAt(e,s,a,c,d);if(this.break||(h?p.to<d:p.from>d))return p;let m=s==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return h?p.join(this.right.lineAt(d,m,a,c,d)):this.left.lineAt(d,m,a,l,u).join(p)}forEachLine(e,s,a,l,u,c){let d=l+this.left.height,h=u+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,s,a,l,u,c),s>=h&&this.right.forEachLine(e,s,a,d,h,c);else{let p=this.lineAt(h,QueryType$1.ByPos,a,l,u);e<p.from&&this.left.forEachLine(e,p.from-1,a,l,u,c),p.to>=e&&p.from<=s&&c(p),s>p.to&&this.right.forEachLine(p.to+1,s,a,d,h,c)}}replace(e,s,a){let l=this.left.length+this.break;if(s<l)return this.balanced(this.left.replace(e,s,a),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-l,s-l,a));let u=[];e>0&&this.decomposeLeft(e,u);let c=u.length;for(let d of a)u.push(d);if(e>0&&mergeGaps(u,c-1),s<this.length){let d=u.length;this.decomposeRight(s,u),mergeGaps(u,d)}return HeightMap.of(u)}decomposeLeft(e,s){let a=this.left.length;if(e<=a)return this.left.decomposeLeft(e,s);s.push(this.left),this.break&&(a++,e>=a&&s.push(null)),e>a&&this.right.decomposeLeft(e-a,s)}decomposeRight(e,s){let a=this.left.length,l=a+this.break;if(e>=l)return this.right.decomposeRight(e-l,s);e<a&&this.left.decomposeRight(e,s),this.break&&e<l&&s.push(null),s.push(this.right)}balanced(e,s){return e.size>2*s.size||s.size>2*e.size?HeightMap.of(this.break?[e,null,s]:[e,s]):(this.left=replace(this.left,e),this.right=replace(this.right,s),this.setHeight(e.height+s.height),this.outdated=e.outdated||s.outdated,this.size=e.size+s.size,this.length=e.length+this.break+s.length,this)}updateHeight(e,s=0,a=!1,l){let{left:u,right:c}=this,d=s+u.length+this.break,h=null;return l&&l.from<=s+u.length&&l.more?h=u=u.updateHeight(e,s,a,l):u.updateHeight(e,s,a),l&&l.from<=d+c.length&&l.more?h=c=c.updateHeight(e,d,a,l):c.updateHeight(e,d,a),h?this.balanced(u,c):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(o,e){let s,a;o[e]==null&&(s=o[e-1])instanceof HeightMapGap&&(a=o[e+1])instanceof HeightMapGap&&o.splice(e-1,3,new HeightMapGap(s.length+1+a.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(e,s){this.pos=e,this.oracle=s,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,s){if(this.lineStart>-1){let a=Math.min(s,this.lineEnd),l=this.nodes[this.nodes.length-1];l instanceof HeightMapText?l.length+=a-this.pos:(a>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(a-this.pos,-1,0)),this.writtenTo=a,s>a&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=s}point(e,s,a){if(e<s||a.heightRelevant){let l=a.widget?a.widget.estimatedHeight:0,u=a.widget?a.widget.lineBreaks:0;l<0&&(l=this.oracle.lineHeight);let c=s-e;a.block?this.addBlock(new HeightMapBlock(c,l,a)):(c||u||l>=relevantWidgetHeight)&&this.addLineDeco(l,u,c)}else s>e&&this.span(e,s);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:s}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=s,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new HeightMapText(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,s){let a=new HeightMapGap(s-e);return this.oracle.doc.lineAt(e).to==s&&(a.flags|=4),a}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof HeightMapText)return e;let s=new HeightMapText(0,-1,0);return this.nodes.push(s),s}addBlock(e){this.enterLine();let s=e.deco;s&&s.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,s&&s.endSide>0&&(this.covering=e)}addLineDeco(e,s,a){let l=this.ensureLine();l.length+=a,l.collapsed+=a,l.widgetHeight=Math.max(l.widgetHeight,e),l.breaks+=s,this.writtenTo=this.pos=this.pos+a}finish(e){let s=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(s instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1,0)):(this.writtenTo<this.pos||s==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let a=e;for(let l of this.nodes)l instanceof HeightMapText&&l.updateHeight(this.oracle,a),a+=l?l.length:1;return this.nodes}static build(e,s,a,l){let u=new NodeBuilder(a,e);return RangeSet.spans(s,a,l,u,0),u.finish(a)}}function heightRelevantDecoChanges(o,e,s){let a=new DecorationComparator;return RangeSet.compare(o,e,s,a,0),a.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(e,s,a,l){(e<s||a&&a.heightRelevant||l&&l.heightRelevant)&&addRange(e,s,this.changes,5)}}function visiblePixelRange(o,e){let s=o.getBoundingClientRect(),a=o.ownerDocument,l=a.defaultView||window,u=Math.max(0,s.left),c=Math.min(l.innerWidth,s.right),d=Math.max(0,s.top),h=Math.min(l.innerHeight,s.bottom);for(let p=o.parentNode;p&&p!=a.body;)if(p.nodeType==1){let m=p,g=window.getComputedStyle(m);if((m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth)&&g.overflow!="visible"){let y=m.getBoundingClientRect();u=Math.max(u,y.left),c=Math.min(c,y.right),d=Math.max(d,y.top),h=Math.min(p==o.parentNode?l.innerHeight:h,y.bottom)}p=g.position=="absolute"||g.position=="fixed"?m.offsetParent:m.parentNode}else if(p.nodeType==11)p=p.host;else break;return{left:u-s.left,right:Math.max(u,c)-s.left,top:d-(s.top+e),bottom:Math.max(d,h)-(s.top+e)}}function inWindow(o){let e=o.getBoundingClientRect(),s=o.ownerDocument.defaultView||window;return e.left<s.innerWidth&&e.right>0&&e.top<s.innerHeight&&e.bottom>0}function fullPixelRange(o,e){let s=o.getBoundingClientRect();return{left:0,right:s.right-s.left,top:e,bottom:s.bottom-(s.top+e)}}class LineGap{constructor(e,s,a,l){this.from=e,this.to=s,this.size=a,this.displaySize=l}static same(e,s){if(e.length!=s.length)return!1;for(let a=0;a<e.length;a++){let l=e[a],u=s[a];if(l.from!=u.from||l.to!=u.to||l.size!=u.size)return!1}return!0}draw(e,s){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(s?e.scaleY:e.scaleX),s)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(e,s){super(),this.size=e,this.vertical=s}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let s=e.facet(contentAttributes).some(a=>typeof a!="function"&&a.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(s),this.stateDeco=staticDeco(e),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(e.doc),[new ChangedRange(0,0,0,e.doc.length)]);for(let a=0;a<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());a++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(a=>a.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:s}=this.state.selection;for(let a=0;a<=1;a++){let l=a?s.head:s.anchor;if(!e.some(({from:u,to:c})=>l>=u&&l<=c)){let{from:u,to:c}=this.lineBlockAt(l);e.push(new Viewport(u,c))}}return this.viewports=e.sort((a,l)=>a.from-l.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(scaleBlock(e,this.scaler))})}update(e,s=null){this.state=e.state;let a=this.stateDeco;this.stateDeco=staticDeco(this.state);let l=e.changedRanges,u=ChangedRange.extendWithRanges(l,heightRelevantDecoChanges(a,this.stateDeco,e?e.changes:ChangeSet.empty(this.state.doc.length))),c=this.heightMap.height,d=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),u),(this.heightMap.height!=c||heightChangeFlag)&&(e.flags|=2),d?(this.scrollAnchorPos=e.changes.mapPos(d.from,-1),this.scrollAnchorHeight=d.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=c);let h=u.length?this.mapViewport(this.viewport,e.changes):this.viewport;(s&&(s.range.head<h.from||s.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,s));let p=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(p||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),s&&(this.scrollTarget=s),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let s=e.contentDOM,a=window.getComputedStyle(s),l=this.heightOracle,u=a.whiteSpace;this.defaultTextDirection=a.direction=="rtl"?Direction.RTL:Direction.LTR;let c=this.heightOracle.mustRefreshForWrapping(u)||this.mustMeasureContent==="refresh",d=s.getBoundingClientRect(),h=c||this.mustMeasureContent||this.contentDOMHeight!=d.height;this.contentDOMHeight=d.height,this.mustMeasureContent=!1;let p=0,m=0;if(d.width&&d.height){let{scaleX:k,scaleY:I}=getScale(s,d);(k>.005&&Math.abs(this.scaleX-k)>.005||I>.005&&Math.abs(this.scaleY-I)>.005)&&(this.scaleX=k,this.scaleY=I,p|=16,c=h=!0)}let g=(parseInt(a.paddingTop)||0)*this.scaleY,y=(parseInt(a.paddingBottom)||0)*this.scaleY;(this.paddingTop!=g||this.paddingBottom!=y)&&(this.paddingTop=g,this.paddingBottom=y,p|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(l.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,p|=16);let A=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=A&&(this.scrollAnchorHeight=-1,this.scrollTop=A),this.scrolledToBottom=isScrolledToBottom(e.scrollDOM);let T=(this.printing?fullPixelRange:visiblePixelRange)(s,this.paddingTop),E=T.top-this.pixelViewport.top,v=T.bottom-this.pixelViewport.bottom;this.pixelViewport=T;let _=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(_!=this.inView&&(this.inView=_,_&&(h=!0)),!this.inView&&!this.scrollTarget&&!inWindow(e.dom))return 0;let w=d.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=d.width,this.editorHeight=e.scrollDOM.clientHeight,p|=16),h){let k=e.docView.measureVisibleLineHeights(this.viewport);if(l.mustRefreshForHeights(k)&&(c=!0),c||l.lineWrapping&&Math.abs(w-this.contentDOMWidth)>l.charWidth){let{lineHeight:I,charWidth:P,textHeight:N}=e.docView.measureTextSize();c=I>0&&l.refresh(u,I,P,N,Math.max(5,w/P),k),c&&(e.docView.minWidth=0,p|=16)}E>0&&v>0?m=Math.max(E,v):E<0&&v<0&&(m=Math.min(E,v)),clearHeightChangeFlag();for(let I of this.viewports){let P=I.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(I);this.heightMap=(c?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(l,0,c,new MeasuredHeights(I.from,P))}heightChangeFlag&&(p|=2)}let R=!this.viewportIsAppropriate(this.viewport,m)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return R&&(p&2&&(p|=this.updateScaler()),this.viewport=this.getViewport(m,this.scrollTarget),p|=this.updateForViewport()),(p&2||R)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps,e)),p|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),p}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,s){let a=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),l=this.heightMap,u=this.heightOracle,{visibleTop:c,visibleBottom:d}=this,h=new Viewport(l.lineAt(c-a*1e3,QueryType$1.ByHeight,u,0,0).from,l.lineAt(d+(1-a)*1e3,QueryType$1.ByHeight,u,0,0).to);if(s){let{head:p}=s.range;if(p<h.from||p>h.to){let m=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),g=l.lineAt(p,QueryType$1.ByPos,u,0,0),y;s.y=="center"?y=(g.top+g.bottom)/2-m/2:s.y=="start"||s.y=="nearest"&&p<h.from?y=g.top:y=g.bottom-m,h=new Viewport(l.lineAt(y-1e3/2,QueryType$1.ByHeight,u,0,0).from,l.lineAt(y+m+1e3/2,QueryType$1.ByHeight,u,0,0).to)}}return h}mapViewport(e,s){let a=s.mapPos(e.from,-1),l=s.mapPos(e.to,1);return new Viewport(this.heightMap.lineAt(a,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(l,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:s},a=0){if(!this.inView)return!0;let{top:l}=this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:u}=this.heightMap.lineAt(s,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:c,visibleBottom:d}=this;return(e==0||l<=c-Math.max(10,Math.min(-a,250)))&&(s==this.state.doc.length||u>=d+Math.max(10,Math.min(a,250)))&&l>c-2*1e3&&u<d+2*1e3}mapLineGaps(e,s){if(!e.length||s.empty)return e;let a=[];for(let l of e)s.touchesRange(l.from,l.to)||a.push(new LineGap(s.mapPos(l.from),s.mapPos(l.to),l.size,l.displaySize));return a}ensureLineGaps(e,s){let a=this.heightOracle.lineWrapping,l=a?1e4:2e3,u=l>>1,c=l<<1;if(this.defaultTextDirection!=Direction.LTR&&!a)return[];let d=[],h=(m,g,y,A)=>{if(g-m<u)return;let T=this.state.selection.main,E=[T.from];T.empty||E.push(T.to);for(let _ of E)if(_>m&&_<g){h(m,_-10,y,A),h(_+10,g,y,A);return}let v=find(e,_=>_.from>=y.from&&_.to<=y.to&&Math.abs(_.from-m)<u&&Math.abs(_.to-g)<u&&!E.some(w=>_.from<w&&_.to>w));if(!v){if(g<y.to&&s&&a&&s.visibleRanges.some(R=>R.from<=g&&R.to>=g)){let R=s.moveToLineBoundary(EditorSelection.cursor(g),!1,!0).head;R>m&&(g=R)}let _=this.gapSize(y,m,g,A),w=a||_<2e6?_:2e6;v=new LineGap(m,g,_,w)}d.push(v)},p=m=>{if(m.length<c||m.type!=BlockType.Text)return;let g=lineStructure(m.from,m.to,this.stateDeco);if(g.total<c)return;let y=this.scrollTarget?this.scrollTarget.range.head:null,A,T;if(a){let E=l/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,_;if(y!=null){let w=findFraction(g,y),R=((this.visibleBottom-this.visibleTop)/2+E)/m.height;v=w-R,_=w+R}else v=(this.visibleTop-m.top-E)/m.height,_=(this.visibleBottom-m.top+E)/m.height;A=findPosition(g,v),T=findPosition(g,_)}else{let E=g.total*this.heightOracle.charWidth,v=l*this.heightOracle.charWidth,_=0;if(E>2e6)for(let P of e)P.from>=m.from&&P.from<m.to&&P.size!=P.displaySize&&P.from*this.heightOracle.charWidth+_<this.pixelViewport.left&&(_=P.size-P.displaySize);let w=this.pixelViewport.left+_,R=this.pixelViewport.right+_,k,I;if(y!=null){let P=findFraction(g,y),N=((R-w)/2+v)/E;k=P-N,I=P+N}else k=(w-v)/E,I=(R+v)/E;A=findPosition(g,k),T=findPosition(g,I)}A>m.from&&h(m.from,A,m,g),T<m.to&&h(T,m.to,m,g)};for(let m of this.viewportLines)Array.isArray(m.type)?m.type.forEach(p):p(m);return d}gapSize(e,s,a,l){let u=findFraction(l,a)-findFraction(l,s);return this.heightOracle.lineWrapping?e.height*u:l.total*this.heightOracle.charWidth*u}updateLineGaps(e){LineGap.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Decoration.set(e.map(s=>s.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let s=this.stateDeco;this.lineGaps.length&&(s=s.concat(this.lineGapDeco));let a=[];RangeSet.spans(s,this.viewport.from,this.viewport.to,{span(u,c){a.push({from:u,to:c})},point(){}},20);let l=0;if(a.length!=this.visibleRanges.length)l=12;else for(let u=0;u<a.length&&!(l&8);u++){let c=this.visibleRanges[u],d=a[u];(c.from!=d.from||c.to!=d.to)&&(l|=4,e&&e.mapPos(c.from,-1)==d.from&&e.mapPos(c.to,1)==d.to||(l|=8))}return this.visibleRanges=a,l}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(s=>s.from<=e&&s.to>=e)||scaleBlock(this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(s=>s.top<=e&&s.bottom>=e)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(e),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let s=this.lineBlockAtHeight(e+8);return s.from>=this.viewport.from||this.viewportLines[0].top-e>200?s:this.viewportLines[0]}elementAtHeight(e){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(e,s){this.from=e,this.to=s}}function lineStructure(o,e,s){let a=[],l=o,u=0;return RangeSet.spans(s,o,e,{span(){},point(c,d){c>l&&(a.push({from:l,to:c}),u+=c-l),l=d}},20),l<e&&(a.push({from:l,to:e}),u+=e-l),{total:u,ranges:a}}function findPosition({total:o,ranges:e},s){if(s<=0)return e[0].from;if(s>=1)return e[e.length-1].to;let a=Math.floor(o*s);for(let l=0;;l++){let{from:u,to:c}=e[l],d=c-u;if(a<=d)return u+a;a-=d}}function findFraction(o,e){let s=0;for(let{from:a,to:l}of o.ranges){if(e<=l){s+=e-a;break}s+=l-a}return s/o.total}function find(o,e){for(let s of o)if(e(s))return s}const IdScaler={toDOM(o){return o},fromDOM(o){return o},scale:1,eq(o){return o==this}};function staticDeco(o){let e=o.facet(decorations).filter(a=>typeof a!="function"),s=o.facet(outerDecorations).filter(a=>typeof a!="function");return s.length&&e.push(RangeSet.join(s)),e}class BigScaler{constructor(e,s,a){let l=0,u=0,c=0;this.viewports=a.map(({from:d,to:h})=>{let p=s.lineAt(d,QueryType$1.ByPos,e,0,0).top,m=s.lineAt(h,QueryType$1.ByPos,e,0,0).bottom;return l+=m-p,{from:d,to:h,top:p,bottom:m,domTop:0,domBottom:0}}),this.scale=(7e6-l)/(s.height-l);for(let d of this.viewports)d.domTop=c+(d.top-u)*this.scale,c=d.domBottom=d.domTop+(d.bottom-d.top),u=d.bottom}toDOM(e){for(let s=0,a=0,l=0;;s++){let u=s<this.viewports.length?this.viewports[s]:null;if(!u||e<u.top)return l+(e-a)*this.scale;if(e<=u.bottom)return u.domTop+(e-u.top);a=u.bottom,l=u.domBottom}}fromDOM(e){for(let s=0,a=0,l=0;;s++){let u=s<this.viewports.length?this.viewports[s]:null;if(!u||e<u.domTop)return a+(e-l)/this.scale;if(e<=u.domBottom)return u.top+(e-u.domTop);a=u.bottom,l=u.domBottom}}eq(e){return e instanceof BigScaler?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((s,a)=>s.from==e.viewports[a].from&&s.to==e.viewports[a].to):!1}}function scaleBlock(o,e){if(e.scale==1)return o;let s=e.toDOM(o.top),a=e.toDOM(o.bottom);return new BlockInfo(o.from,o.length,s,a-s,Array.isArray(o._content)?o._content.map(l=>scaleBlock(l,e)):o._content)}const theme=Facet.define({combine:o=>o.join(" ")}),darkTheme=Facet.define({combine:o=>o.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(o,e,s){return new StyleModule(e,{finish(a){return/&/.test(a)?a.replace(/&\w*/,l=>{if(l=="&")return o;if(!s||!s[l])throw new RangeError(`Unsupported selector: ${l}`);return s[l]}):o+" "+a}})}const baseTheme$1$1=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser$1.ie&&browser$1.ie_version<=11;class DOMObserver{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(s=>{for(let a of s)this.queue.push(a);(browser$1.ie&&browser$1.ie_version<=11||browser$1.ios&&e.composing)&&s.some(a=>a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&browser$1.android&&e.constructor.EDIT_CONTEXT!==!1&&!(browser$1.chrome&&browser$1.chrome_version<126)&&(this.editContext=new EditContextManager(e),e.state.facet(editable)&&(e.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var s;((s=this.view.docView)===null||s===void 0?void 0:s.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(s=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),s.length>0&&s[s.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(s=>{s.length>0&&s[s.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((s,a)=>s!=e[a]))){this.gapIntersection.disconnect();for(let s of e)this.gapIntersection.observe(s);this.gaps=e}}onSelectionChange(e){let s=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:a}=this,l=this.selectionRange;if(a.state.facet(editable)?a.root.activeElement!=this.dom:!hasSelection(this.dom,l))return;let u=l.anchorNode&&a.docView.tile.nearest(l.anchorNode);if(u&&u.isWidget()&&u.widget.ignoreEvent(e)){s||(this.selectionChanged=!1);return}(browser$1.ie&&browser$1.ie_version<=11||browser$1.android&&browser$1.chrome)&&!a.state.selection.main.empty&&l.focusNode&&isEquivalentPosition(l.focusNode,l.focusOffset,l.anchorNode,l.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,s=getSelection$1(e.root);if(!s)return!1;let a=browser$1.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,s)||s;if(!a||this.selectionRange.eq(a))return!1;let l=hasSelection(this.dom,a);return l&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,a)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(a),l&&(this.selectionChanged=!0),!0)}setSelectionRange(e,s){this.selectionRange.set(e.node,e.offset,s.node,s.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,s=null;for(let a=this.dom;a;)if(a.nodeType==1)!s&&e<this.scrollTargets.length&&this.scrollTargets[e]==a?e++:s||(s=this.scrollTargets.slice(0,e)),s&&s.push(a),a=a.assignedSlot||a.parentNode;else if(a.nodeType==11)a=a.host;else break;if(e<this.scrollTargets.length&&!s&&(s=this.scrollTargets.slice(0,e)),s){for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);for(let a of this.scrollTargets=s)a.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,s){var a;if(!this.delayedAndroidKey){let l=()=>{let u=this.delayedAndroidKey;u&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=u.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&u.force&&dispatchKey(this.dom,u.key,u.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(l)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:s,force:this.lastChange<Date.now()-50||!!(!((a=this.delayedAndroidKey)===null||a===void 0)&&a.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let s=-1,a=-1,l=!1;for(let u of e){let c=this.readMutation(u);c&&(c.typeOver&&(l=!0),s==-1?{from:s,to:a}=c:(s=Math.min(c.from,s),a=Math.max(c.to,a)))}return{from:s,to:a,typeOver:l}}readChange(){let{from:e,to:s,typeOver:a}=this.processRecords(),l=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(e<0&&!l)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let u=new DOMChange(this.view,e,s,a);return this.view.docView.domChanged={newSel:u.newSel?u.newSel.main:null},u}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let s=this.readChange();if(!s)return this.view.requestMeasure(),!1;let a=this.view.state,l=applyDOMChange(this.view,s);return this.view.state==a&&(s.domChanged||s.newSel&&!sameSelPos(this.view.state.selection,s.newSel.main))&&this.view.update([]),l}readMutation(e){let s=this.view.docView.tile.nearest(e.target);if(!s||s.isWidget())return null;if(s.markDirty(e.type=="attributes"),e.type=="childList"){let a=findChild(s,e.previousSibling||e.target.previousSibling,-1),l=findChild(s,e.nextSibling||e.target.nextSibling,1);return{from:a?s.posAfter(a):s.posAtStart,to:l?s.posBefore(l):s.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(editable)!=e.state.facet(editable)&&(e.view.contentDOM.editContext=e.state.facet(editable)?this.editContext.editContext:null))}destroy(){var e,s,a;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(s=this.gapIntersection)===null||s===void 0||s.disconnect(),(a=this.resizeScroll)===null||a===void 0||a.disconnect();for(let l of this.scrollTargets)l.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(o,e,s){for(;e;){let a=Tile.get(e);if(a&&a.parent==o)return a;let l=e.parentNode;e=l!=o.dom?l:s>0?e.nextSibling:e.previousSibling}return null}function buildSelectionRangeFromRange(o,e){let s=e.startContainer,a=e.startOffset,l=e.endContainer,u=e.endOffset,c=o.docView.domAtPos(o.state.selection.main.anchor,1);return isEquivalentPosition(c.node,c.offset,l,u)&&([s,a,l,u]=[l,u,s,a]),{anchorNode:s,anchorOffset:a,focusNode:l,focusOffset:u}}function safariSelectionRangeHack(o,e){if(e.getComposedRanges){let l=e.getComposedRanges(o.root)[0];if(l)return buildSelectionRangeFromRange(o,l)}let s=null;function a(l){l.preventDefault(),l.stopImmediatePropagation(),s=l.getTargetRanges()[0]}return o.contentDOM.addEventListener("beforeinput",a,!0),o.dom.ownerDocument.execCommand("indent"),o.contentDOM.removeEventListener("beforeinput",a,!0),s?buildSelectionRangeFromRange(o,s):null}class EditContextManager{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let s=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=a=>{let l=e.state.selection.main,{anchor:u,head:c}=l,d=this.toEditorPos(a.updateRangeStart),h=this.toEditorPos(a.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:a.updateRangeStart,editorBase:d,drifted:!1});let p=h-d>a.text.length;d==this.from&&u<this.from?d=u:h==this.to&&u>this.to&&(h=u);let m=findDiff(e.state.sliceDoc(d,h),a.text,(p?l.from:l.to)-d,p?"end":null);if(!m){let y=EditorSelection.single(this.toEditorPos(a.selectionStart),this.toEditorPos(a.selectionEnd));sameSelPos(y,l)||e.dispatch({selection:y,userEvent:"select"});return}let g={from:m.from+d,to:m.toA+d,insert:Text.of(a.text.slice(m.from,m.toB).split(`
`))};if((browser$1.mac||browser$1.android)&&g.from==c-1&&/^\. ?$/.test(a.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(g={from:d,to:h,insert:Text.of([a.text.replace("."," ")])}),this.pendingContextChange=g,!e.state.readOnly){let y=this.to-this.from+(g.to-g.from+g.insert.length);applyDOMChangeInner(e,g,EditorSelection.single(this.toEditorPos(a.selectionStart,y),this.toEditorPos(a.selectionEnd,y)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),g.from<g.to&&!g.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(s.text.slice(Math.max(0,a.updateRangeStart-1),Math.min(s.text.length,a.updateRangeStart+1)))&&this.handlers.compositionend(a)},this.handlers.characterboundsupdate=a=>{let l=[],u=null;for(let c=this.toEditorPos(a.rangeStart),d=this.toEditorPos(a.rangeEnd);c<d;c++){let h=e.coordsForChar(c);u=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||u||new DOMRect,l.push(u)}s.updateCharacterBounds(a.rangeStart,l)},this.handlers.textformatupdate=a=>{let l=[];for(let u of a.getTextFormats()){let c=u.underlineStyle,d=u.underlineThickness;if(!/none/i.test(c)&&!/none/i.test(d)){let h=this.toEditorPos(u.rangeStart),p=this.toEditorPos(u.rangeEnd);if(h<p){let m=`text-decoration: underline ${/^[a-z]/.test(c)?c+" ":c=="Dashed"?"dashed ":c=="Squiggle"?"wavy ":""}${/thin/i.test(d)?1:2}px`;l.push(Decoration.mark({attributes:{style:m}}).range(h,p))}}}e.dispatch({effects:setEditContextFormatting.of(Decoration.set(l))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:a}=this.composing;this.composing=null,a&&this.reset(e.state)}};for(let a in this.handlers)s.addEventListener(a,this.handlers[a]);this.measureReq={read:a=>{this.editContext.updateControlBounds(a.contentDOM.getBoundingClientRect());let l=getSelection$1(a.root);l&&l.rangeCount&&this.editContext.updateSelectionBounds(l.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let s=0,a=!1,l=this.pendingContextChange;return e.changes.iterChanges((u,c,d,h,p)=>{if(a)return;let m=p.length-(c-u);if(l&&c>=l.to)if(l.from==u&&l.to==c&&l.insert.eq(p)){l=this.pendingContextChange=null,s+=m,this.to+=m;return}else l=null,this.revertPending(e.state);if(u+=s,c+=s,c<=this.from)this.from+=m,this.to+=m;else if(u<this.to){if(u<this.from||c>this.to||this.to-this.from+p.length>3e4){a=!0;return}this.editContext.updateText(this.toContextPos(u),this.toContextPos(c),p.toString()),this.to+=m}s+=m}),l&&!a&&this.revertPending(e.state),!a}update(e){let s=this.pendingContextChange,a=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(a.from,a.to)&&e.transactions.some(l=>!l.isUserEvent("input.type")&&l.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||s)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:s}=e.selection.main;this.from=Math.max(0,s-1e4),this.to=Math.min(e.doc.length,s+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let s=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(s.from),this.toContextPos(s.from+s.insert.length),e.doc.sliceString(s.from,s.to))}setSelection(e){let{main:s}=e.selection,a=this.toContextPos(Math.max(this.from,Math.min(this.to,s.anchor))),l=this.toContextPos(s.head);(this.editContext.selectionStart!=a||this.editContext.selectionEnd!=l)&&this.editContext.updateSelection(a,l)}rangeIsValid(e){let{head:s}=e.selection.main;return!(this.from>0&&s-this.from<500||this.to<e.doc.length&&this.to-s<500||this.to-this.from>1e4*3)}toEditorPos(e,s=this.to-this.from){e=Math.min(e,s);let a=this.composing;return a&&a.drifted?a.editorBase+(e-a.contextBase):e+this.from}toContextPos(e){let s=this.composing;return s&&s.drifted?s.contextBase+(e-s.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var s;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:a}=e;this.dispatchTransactions=e.dispatchTransactions||a&&(l=>l.forEach(u=>a(u,this)))||(l=>this.update(l)),this.dispatch=this.dispatch.bind(this),this._root=e.root||getRoot(e.parent)||document,this.viewState=new ViewState(e.state||EditorState.create(e)),e.scrollTo&&e.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(l=>new PluginInstance(l));for(let l of this.plugins)l.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((s=document.fonts)===null||s===void 0)&&s.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent="refresh",this.requestMeasure()})}dispatch(...e){let s=e.length==1&&e[0]instanceof Transaction?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(s,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let s=!1,a=!1,l,u=this.state;for(let y of e){if(y.startState!=u)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");u=y.state}if(this.destroyed){this.viewState.state=u;return}let c=this.hasFocus,d=0,h=null;e.some(y=>y.annotation(isFocusChange))?(this.inputState.notifiedFocused=c,d=1):c!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=c,h=focusChangeTransaction(u,c),h||(d=1));let p=this.observer.delayedAndroidKey,m=null;if(p?(this.observer.clearDelayedAndroidKey(),m=this.observer.readChange(),(m&&!this.state.doc.eq(u.doc)||!this.state.selection.eq(u.selection))&&(m=null)):this.observer.clear(),u.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(u);l=ViewUpdate.create(this,u,e),l.flags|=d;let g=this.viewState.scrollTarget;try{this.updateState=2;for(let y of e){if(g&&(g=g.map(y.changes)),y.scrollIntoView){let{main:A}=y.state.selection;g=new ScrollTarget(A.empty?A:EditorSelection.cursor(A.head,A.head>A.anchor?-1:1))}for(let A of y.effects)A.is(scrollIntoView$1)&&(g=A.value.clip(this.state))}this.viewState.update(l,g),this.bidiCache=CachedOrder.update(this.bidiCache,l.changes),l.empty||(this.updatePlugins(l),this.inputState.update(l)),s=this.docView.update(l),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),a=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(s,e.some(y=>y.isUserEvent("select.pointer")))}finally{this.updateState=0}if(l.startState.facet(theme)!=l.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(s||a||g||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),s&&this.docViewUpdate(),!l.empty)for(let y of this.state.facet(updateListener))try{y(l)}catch(A){logException(this.state,A,"update listener")}(h||m)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),m&&!applyDOMChange(this,m)&&p.force&&dispatchKey(this.contentDOM,p.key,p.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let s=this.hasFocus;try{for(let a of this.plugins)a.destroy(this);this.viewState=new ViewState(e),this.plugins=e.facet(viewPlugin).map(a=>new PluginInstance(a)),this.pluginMap.clear();for(let a of this.plugins)a.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}s&&this.focus(),this.requestMeasure()}updatePlugins(e){let s=e.startState.facet(viewPlugin),a=e.state.facet(viewPlugin);if(s!=a){let l=[];for(let u of a){let c=s.indexOf(u);if(c<0)l.push(new PluginInstance(u));else{let d=this.plugins[c];d.mustUpdate=e,l.push(d)}}for(let u of this.plugins)u.mustUpdate!=e&&u.destroy(this);this.plugins=l,this.pluginMap.clear()}else for(let l of this.plugins)l.mustUpdate=e;for(let l=0;l<this.plugins.length;l++)this.plugins[l].update(this);s!=a&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let s=e.value;if(s&&s.docViewUpdate)try{s.docViewUpdate(this)}catch(a){logException(this.state,a,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let s=null,a=this.scrollDOM,l=a.scrollTop*this.scaleY,{scrollAnchorPos:u,scrollAnchorHeight:c}=this.viewState;Math.abs(l-this.viewState.scrollTop)>1&&(c=-1),this.viewState.scrollAnchorHeight=-1;try{for(let d=0;;d++){if(c<0)if(isScrolledToBottom(a))u=-1,c=this.viewState.heightMap.height;else{let A=this.viewState.scrollAnchorAt(l);u=A.from,c=A.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(d>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let p=[];h&4||([this.measureRequests,p]=[p,this.measureRequests]);let m=p.map(A=>{try{return A.read(this)}catch(T){return logException(this.state,T),BadMeasure}}),g=ViewUpdate.create(this,this.state,[]),y=!1;g.flags|=h,s?s.flags|=h:s=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),y=this.docView.update(g),y&&this.docViewUpdate());for(let A=0;A<p.length;A++)if(m[A]!=BadMeasure)try{let T=p[A];T.write&&T.write(m[A],this)}catch(T){logException(this.state,T)}if(y&&this.docView.updateSelection(!0),!g.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,c=-1;continue}else{let T=(u<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(u).top)-c;if(T>1||T<-1){l=l+T,a.scrollTop=l/this.scaleY,c=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(s&&!s.empty)for(let d of this.state.facet(updateListener))d(s)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let e=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),s={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser$1.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(s["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,s);let a=this.observer.ignore(()=>{let l=updateAttrs(this.contentDOM,this.contentAttrs,s),u=updateAttrs(this.dom,this.editorAttrs,e);return l||u});return this.editorAttrs=e,this.contentAttrs=s,a}showAnnouncements(e){let s=!0;for(let a of e)for(let l of a.effects)if(l.is(EditorView.announce)){s&&(this.announceDOM.textContent=""),s=!1;let u=this.announceDOM.appendChild(document.createElement("div"));u.textContent=l.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let e=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$1).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let s=0;s<this.measureRequests.length;s++)if(this.measureRequests[s].key===e.key){this.measureRequests[s]=e;return}}this.measureRequests.push(e)}}plugin(e){let s=this.pluginMap.get(e);return(s===void 0||s&&s.plugin!=e)&&this.pluginMap.set(e,s=this.plugins.find(a=>a.plugin==e)||null),s&&s.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,s,a){return skipAtoms(this,e,moveByChar(this,e,s,a))}moveByGroup(e,s){return skipAtoms(this,e,moveByChar(this,e,s,a=>byGroup(this,e.head,a)))}visualLineSide(e,s){let a=this.bidiSpans(e),l=this.textDirectionAt(e.from),u=a[s?a.length-1:0];return EditorSelection.cursor(u.side(s,l)+e.from,u.forward(!s,l)?1:-1)}moveToLineBoundary(e,s,a=!0){return moveToLineBoundary(this,e,s,a)}moveVertically(e,s,a){return skipAtoms(this,e,moveVertically(this,e,s,a))}domAtPos(e,s=1){return this.docView.domAtPos(e,s)}posAtDOM(e,s=0){return this.docView.posFromDOM(e,s)}posAtCoords(e,s=!0){this.readMeasured();let a=posAtCoords(this,e,s);return a&&a.pos}posAndSideAtCoords(e,s=!0){return this.readMeasured(),posAtCoords(this,e,s)}coordsAtPos(e,s=1){this.readMeasured();let a=this.docView.coordsAt(e,s);if(!a||a.left==a.right)return a;let l=this.state.doc.lineAt(e),u=this.bidiSpans(l),c=u[BidiSpan.find(u,e-l.from,-1,s)];return flattenRect(a,c.dir==Direction.LTR==s>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(perLineTextDirection)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>MaxBidiLine)return trivialOrder(e.length);let s=this.textDirectionAt(e.from),a;for(let u of this.bidiCache)if(u.from==e.from&&u.dir==s&&(u.fresh||isolatesEq(u.isolates,a=getIsolatedRanges(this,e))))return u.order;a||(a=getIsolatedRanges(this,e));let l=computeOrder(e.text,s,a);return this.bidiCache.push(new CachedOrder(e.from,e.to,s,a,!0,l)),l}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||browser$1.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,s={}){return scrollIntoView$1.of(new ScrollTarget(typeof e=="number"?EditorSelection.cursor(e):e,s.y,s.x,s.yMargin,s.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:s}=this.scrollDOM,a=this.viewState.scrollAnchorAt(e);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(a.from),"start","start",a.top-e,s,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ViewPlugin.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ViewPlugin.define(()=>({}),{eventObservers:e})}static theme(e,s){let a=StyleModule.newName(),l=[theme.of(a),styleModule.of(buildTheme(`.${a}`,e))];return s&&s.dark&&l.push(darkTheme.of(!0)),l}static baseTheme(e){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,e,lightDarkIDs)))}static findFromDOM(e){var s;let a=e.querySelector(".cm-content"),l=a&&Tile.get(a)||Tile.get(e);return((s=l==null?void 0:l.root)===null||s===void 0?void 0:s.view)||null}}EditorView.styleModule=styleModule,EditorView.inputHandler=inputHandler,EditorView.clipboardInputFilter=clipboardInputFilter,EditorView.clipboardOutputFilter=clipboardOutputFilter,EditorView.scrollHandler=scrollHandler,EditorView.focusChangeEffect=focusChangeEffect,EditorView.perLineTextDirection=perLineTextDirection,EditorView.exceptionSink=exceptionSink,EditorView.updateListener=updateListener,EditorView.editable=editable,EditorView.mouseSelectionStyle=mouseSelectionStyle,EditorView.dragMovesSelection=dragMovesSelection$1,EditorView.clickAddsSelectionRange=clickAddsSelectionRange,EditorView.decorations=decorations,EditorView.blockWrappers=blockWrappers,EditorView.outerDecorations=outerDecorations,EditorView.atomicRanges=atomicRanges,EditorView.bidiIsolatedRanges=bidiIsolatedRanges,EditorView.scrollMargins=scrollMargins,EditorView.darkTheme=darkTheme,EditorView.cspNonce=Facet.define({combine:o=>o.length?o[0]:""}),EditorView.contentAttributes=contentAttributes,EditorView.editorAttributes=editorAttributes,EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"}),EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(e,s,a,l,u,c){this.from=e,this.to=s,this.dir=a,this.isolates=l,this.fresh=u,this.order=c}static update(e,s){if(s.empty&&!e.some(u=>u.fresh))return e;let a=[],l=e.length?e[e.length-1].dir:Direction.LTR;for(let u=Math.max(0,e.length-10);u<e.length;u++){let c=e[u];c.dir==l&&!s.touchesRange(c.from,c.to)&&a.push(new CachedOrder(s.mapPos(c.from,1),s.mapPos(c.to,-1),c.dir,c.isolates,!1,c.order))}return a}}function attrsFromFacet(o,e,s){for(let a=o.state.facet(e),l=a.length-1;l>=0;l--){let u=a[l],c=typeof u=="function"?u(o):u;c&&combineAttrs(c,s)}return s}const currentPlatform=browser$1.mac?"mac":browser$1.windows?"win":browser$1.linux?"linux":"key";function normalizeKeyName(o,e){const s=o.split(/-(?!$)/);let a=s[s.length-1];a=="Space"&&(a=" ");let l,u,c,d;for(let h=0;h<s.length-1;++h){const p=s[h];if(/^(cmd|meta|m)$/i.test(p))d=!0;else if(/^a(lt)?$/i.test(p))l=!0;else if(/^(c|ctrl|control)$/i.test(p))u=!0;else if(/^s(hift)?$/i.test(p))c=!0;else if(/^mod$/i.test(p))e=="mac"?d=!0:u=!0;else throw new Error("Unrecognized modifier name: "+p)}return l&&(a="Alt-"+a),u&&(a="Ctrl-"+a),d&&(a="Meta-"+a),c&&(a="Shift-"+a),a}function modifiers(o,e,s){return e.altKey&&(o="Alt-"+o),e.ctrlKey&&(o="Ctrl-"+o),e.metaKey&&(o="Meta-"+o),s!==!1&&e.shiftKey&&(o="Shift-"+o),o}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(o,e){return runHandlers(getKeymap(e.state),o,e,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(o){let e=o.facet(keymap),s=Keymaps.get(e);return s||Keymaps.set(e,s=buildKeymap(e.reduce((a,l)=>a.concat(l),[]))),s}function runScopeHandlers(o,e,s){return runHandlers(getKeymap(o.state),e,o,s)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(o,e=currentPlatform){let s=Object.create(null),a=Object.create(null),l=(c,d)=>{let h=a[c];if(h==null)a[c]=d;else if(h!=d)throw new Error("Key binding "+c+" is used both as a regular binding and as a multi-stroke prefix")},u=(c,d,h,p,m)=>{var g,y;let A=s[c]||(s[c]=Object.create(null)),T=d.split(/ (?!$)/).map(_=>normalizeKeyName(_,e));for(let _=1;_<T.length;_++){let w=T.slice(0,_).join(" ");l(w,!0),A[w]||(A[w]={preventDefault:!0,stopPropagation:!1,run:[R=>{let k=storedPrefix={view:R,prefix:w,scope:c};return setTimeout(()=>{storedPrefix==k&&(storedPrefix=null)},PrefixTimeout),!0}]})}let E=T.join(" ");l(E,!1);let v=A[E]||(A[E]={preventDefault:!1,stopPropagation:!1,run:((y=(g=A._any)===null||g===void 0?void 0:g.run)===null||y===void 0?void 0:y.slice())||[]});h&&v.run.push(h),p&&(v.preventDefault=!0),m&&(v.stopPropagation=!0)};for(let c of o){let d=c.scope?c.scope.split(" "):["editor"];if(c.any)for(let p of d){let m=s[p]||(s[p]=Object.create(null));m._any||(m._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:g}=c;for(let y in m)m[y].run.push(A=>g(A,currentKeyEvent))}let h=c[e]||c.key;if(h)for(let p of d)u(p,h,c.run,c.preventDefault,c.stopPropagation),c.shift&&u(p,"Shift-"+h,c.shift,c.preventDefault,c.stopPropagation)}return s}let currentKeyEvent=null;function runHandlers(o,e,s,a){currentKeyEvent=e;let l=keyName(e),u=codePointAt(l,0),c=codePointSize(u)==l.length&&l!=" ",d="",h=!1,p=!1,m=!1;storedPrefix&&storedPrefix.view==s&&storedPrefix.scope==a&&(d=storedPrefix.prefix+" ",modifierCodes.indexOf(e.keyCode)<0&&(p=!0,storedPrefix=null));let g=new Set,y=v=>{if(v){for(let _ of v.run)if(!g.has(_)&&(g.add(_),_(s)))return v.stopPropagation&&(m=!0),!0;v.preventDefault&&(v.stopPropagation&&(m=!0),p=!0)}return!1},A=o[a],T,E;return A&&(y(A[d+modifiers(l,e,!c)])?h=!0:c&&(e.altKey||e.metaKey||e.ctrlKey)&&!(browser$1.windows&&e.ctrlKey&&e.altKey)&&!(browser$1.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(T=base$1[e.keyCode])&&T!=l?(y(A[d+modifiers(T,e,!0)])||e.shiftKey&&(E=shift[e.keyCode])!=l&&E!=T&&y(A[d+modifiers(E,e,!1)]))&&(h=!0):c&&e.shiftKey&&y(A[d+modifiers(l,e,!0)])&&(h=!0),!h&&y(A._any)&&(h=!0)),p&&(h=!0),h&&m&&e.stopPropagation(),currentKeyEvent=null,h}let Placeholder$1=class extends WidgetType{constructor(e){super(),this.content=e}toDOM(e){let s=document.createElement("span");return s.className="cm-placeholder",s.style.pointerEvents="none",s.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),s.setAttribute("aria-hidden","true"),s}coordsAt(e){let s=e.firstChild?clientRectsFor(e.firstChild):[];if(!s.length)return null;let a=window.getComputedStyle(e.parentNode),l=flattenRect(s[0],a.direction!="rtl"),u=parseInt(a.lineHeight);return l.bottom-l.top>u*1.5?{left:l.left,right:l.right,top:l.top,bottom:l.top+u}:l}ignoreEvent(){return!1}};function placeholder(o){let e=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.placeholder=o?Decoration.set([Decoration.widget({widget:new Placeholder$1(o),side:1}).range(0)]):Decoration.none}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:s=>s.decorations});return typeof o=="string"?[e,EditorView.contentAttributes.of({"aria-placeholder":o})]:e}const Outside="-10000px";class TooltipViewManager{constructor(e,s,a,l){this.facet=s,this.createTooltipView=a,this.removeTooltipView=l,this.input=e.state.facet(s),this.tooltips=this.input.filter(c=>c);let u=null;this.tooltipViews=this.tooltips.map(c=>u=a(c,u))}update(e,s){var a;let l=e.state.facet(this.facet),u=l.filter(h=>h);if(l===this.input){for(let h of this.tooltipViews)h.update&&h.update(e);return!1}let c=[],d=s?[]:null;for(let h=0;h<u.length;h++){let p=u[h],m=-1;if(p){for(let g=0;g<this.tooltips.length;g++){let y=this.tooltips[g];y&&y.create==p.create&&(m=g)}if(m<0)c[h]=this.createTooltipView(p,h?c[h-1]:null),d&&(d[h]=!!p.above);else{let g=c[h]=this.tooltipViews[m];d&&(d[h]=s[m]),g.update&&g.update(e)}}}for(let h of this.tooltipViews)c.indexOf(h)<0&&(this.removeTooltipView(h),(a=h.destroy)===null||a===void 0||a.call(h));return s&&(d.forEach((h,p)=>s[p]=h),s.length=d.length),this.input=l,this.tooltips=u,this.tooltipViews=c,!0}}function tooltips(o={}){return tooltipConfig.of(o)}function windowSpace(o){let e=o.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const tooltipConfig=Facet.define({combine:o=>{var e,s,a;return{position:browser$1.ios?"absolute":((e=o.find(l=>l.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((s=o.find(l=>l.parent))===null||s===void 0?void 0:s.parent)||null,tooltipSpace:((a=o.find(l=>l.tooltipSpace))===null||a===void 0?void 0:a.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(o){this.view=o,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=o.state.facet(tooltipConfig);this.position=e.position,this.parent=e.parent,this.classes=o.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new TooltipViewManager(o,showTooltip,(s,a)=>this.createTooltip(s,a),s=>{this.resizeObserver&&this.resizeObserver.unobserve(s.dom),s.dom.remove()}),this.above=this.manager.tooltips.map(s=>!!s.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(s=>{Date.now()>this.lastTransaction-50&&s.length>0&&s[s.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),o.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let o of this.manager.tooltipViews)this.intersectionObserver.observe(o.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(o){o.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(o,this.above);e&&this.observeIntersection();let s=e||o.geometryChanged,a=o.state.facet(tooltipConfig);if(a.position!=this.position&&!this.madeAbsolute){this.position=a.position;for(let l of this.manager.tooltipViews)l.dom.style.position=this.position;s=!0}if(a.parent!=this.parent){this.parent&&this.container.remove(),this.parent=a.parent,this.createContainer();for(let l of this.manager.tooltipViews)this.container.appendChild(l.dom);s=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);s&&this.maybeMeasure()}createTooltip(o,e){let s=o.create(this.view),a=e?e.dom:null;if(s.dom.classList.add("cm-tooltip"),o.arrow&&!s.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let l=document.createElement("div");l.className="cm-tooltip-arrow",s.dom.appendChild(l)}return s.dom.style.position=this.position,s.dom.style.top=Outside,s.dom.style.left="0px",this.container.insertBefore(s.dom,a),s.mount&&s.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(s.dom),s}destroy(){var o,e,s;this.view.win.removeEventListener("resize",this.measureSoon);for(let a of this.manager.tooltipViews)a.dom.remove(),(o=a.destroy)===null||o===void 0||o.call(a);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(s=this.intersectionObserver)===null||s===void 0||s.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let o=1,e=1,s=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:u}=this.manager.tooltipViews[0];if(browser$1.safari){let c=u.getBoundingClientRect();s=Math.abs(c.top+1e4)>1||Math.abs(c.left)>1}else s=!!u.offsetParent&&u.offsetParent!=this.container.ownerDocument.body}if(s||this.position=="absolute")if(this.parent){let u=this.parent.getBoundingClientRect();u.width&&u.height&&(o=u.width/this.parent.offsetWidth,e=u.height/this.parent.offsetHeight)}else({scaleX:o,scaleY:e}=this.view.viewState);let a=this.view.scrollDOM.getBoundingClientRect(),l=getScrollMargins(this.view);return{visible:{left:a.left+l.left,top:a.top+l.top,right:a.right-l.right,bottom:a.bottom-l.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((u,c)=>{let d=this.manager.tooltipViews[c];return d.getCoords?d.getCoords(u.pos):this.view.coordsAtPos(u.pos)}),size:this.manager.tooltipViews.map(({dom:u})=>u.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:o,scaleY:e,makeAbsolute:s}}writeMeasure(o){var e;if(o.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let d of this.manager.tooltipViews)d.dom.style.position="absolute"}let{visible:s,space:a,scaleX:l,scaleY:u}=o,c=[];for(let d=0;d<this.manager.tooltips.length;d++){let h=this.manager.tooltips[d],p=this.manager.tooltipViews[d],{dom:m}=p,g=o.pos[d],y=o.size[d];if(!g||h.clip!==!1&&(g.bottom<=Math.max(s.top,a.top)||g.top>=Math.min(s.bottom,a.bottom)||g.right<Math.max(s.left,a.left)-.1||g.left>Math.min(s.right,a.right)+.1)){m.style.top=Outside;continue}let A=h.arrow?p.dom.querySelector(".cm-tooltip-arrow"):null,T=A?7:0,E=y.right-y.left,v=(e=knownHeight.get(p))!==null&&e!==void 0?e:y.bottom-y.top,_=p.offset||noOffset,w=this.view.textDirection==Direction.LTR,R=y.width>a.right-a.left?w?a.left:a.right-y.width:w?Math.max(a.left,Math.min(g.left-(A?14:0)+_.x,a.right-E)):Math.min(Math.max(a.left,g.left-E+(A?14:0)-_.x),a.right-E),k=this.above[d];!h.strictSide&&(k?g.top-v-T-_.y<a.top:g.bottom+v+T+_.y>a.bottom)&&k==a.bottom-g.bottom>g.top-a.top&&(k=this.above[d]=!k);let I=(k?g.top-a.top:a.bottom-g.bottom)-T;if(I<v&&p.resize!==!1){if(I<this.view.defaultLineHeight){m.style.top=Outside;continue}knownHeight.set(p,v),m.style.height=(v=I)/u+"px"}else m.style.height&&(m.style.height="");let P=k?g.top-v-T-_.y:g.bottom+T+_.y,N=R+E;if(p.overlap!==!0)for(let L of c)L.left<N&&L.right>R&&L.top<P+v&&L.bottom>P&&(P=k?L.top-v-2-T:L.bottom+T+2);if(this.position=="absolute"?(m.style.top=(P-o.parent.top)/u+"px",setLeftStyle(m,(R-o.parent.left)/l)):(m.style.top=P/u+"px",setLeftStyle(m,R/l)),A){let L=g.left+(w?_.x:-_.x)-(R+14-7);A.style.left=L/l+"px"}p.overlap!==!0&&c.push({left:R,top:P,right:N,bottom:P+v}),m.classList.toggle("cm-tooltip-above",k),m.classList.toggle("cm-tooltip-below",!k),p.positioned&&p.positioned(o.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let o of this.manager.tooltipViews)o.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}});function setLeftStyle(o,e){let s=parseInt(o.style.left,10);(isNaN(s)||Math.abs(e-s)>1)&&(o.style.left=e+"px")}const baseTheme$2=EditorView.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$2]});function getTooltip(o,e){let s=o.plugin(tooltipPlugin);if(!s)return null;let a=s.manager.tooltips.indexOf(e);return a<0?null:s.manager.tooltipViews[a]}const panelConfig=Facet.define({combine(o){let e,s;for(let a of o)e=e||a.topContainer,s=s||a.bottomContainer;return{topContainer:e,bottomContainer:s}}});function getPanel(o,e){let s=o.plugin(panelPlugin),a=s?s.specs.indexOf(e):-1;return a>-1?s.panels[a]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(o){this.input=o.state.facet(showPanel),this.specs=this.input.filter(s=>s),this.panels=this.specs.map(s=>s(o));let e=o.state.facet(panelConfig);this.top=new PanelGroup(o,!0,e.topContainer),this.bottom=new PanelGroup(o,!1,e.bottomContainer),this.top.sync(this.panels.filter(s=>s.top)),this.bottom.sync(this.panels.filter(s=>!s.top));for(let s of this.panels)s.dom.classList.add("cm-panel"),s.mount&&s.mount()}update(o){let e=o.state.facet(panelConfig);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new PanelGroup(o.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(o.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let s=o.state.facet(showPanel);if(s!=this.input){let a=s.filter(h=>h),l=[],u=[],c=[],d=[];for(let h of a){let p=this.specs.indexOf(h),m;p<0?(m=h(o.view),d.push(m)):(m=this.panels[p],m.update&&m.update(o)),l.push(m),(m.top?u:c).push(m)}this.specs=a,this.panels=l,this.top.sync(u),this.bottom.sync(c);for(let h of d)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let a of this.panels)a.update&&a.update(o)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:o=>EditorView.scrollMargins.of(e=>{let s=e.plugin(o);return s&&{top:s.top.scrollMargin(),bottom:s.bottom.scrollMargin()}})});class PanelGroup{constructor(e,s,a){this.view=e,this.top=s,this.container=a,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let s of this.panels)s.destroy&&e.indexOf(s)<0&&s.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let s=this.container||this.view.dom;s.insertBefore(this.dom,this.top?s.firstChild:null)}let e=this.dom.firstChild;for(let s of this.panels)if(s.dom.parentNode==this.dom){for(;e!=s.dom;)e=rm(e);e=e.nextSibling}else this.dom.insertBefore(s.dom,e);for(;e;)e=rm(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function rm(o){let e=o.nextSibling;return o.remove(),e}const showPanel=Facet.define({enables:panelPlugin});function showDialog(o,e){let s,a=new Promise(c=>s=c),l=c=>createDialog(c,e,s);o.state.field(dialogField,!1)?o.dispatch({effects:openDialogEffect.of(l)}):o.dispatch({effects:StateEffect.appendConfig.of(dialogField.init(()=>[l]))});let u=closeDialogEffect.of(l);return{close:u,result:a.then(c=>((o.win.queueMicrotask||(h=>o.win.setTimeout(h,10)))(()=>{o.state.field(dialogField).indexOf(l)>-1&&o.dispatch({effects:u})}),c))}}const dialogField=StateField.define({create(){return[]},update(o,e){for(let s of e.effects)s.is(openDialogEffect)?o=[s.value].concat(o):s.is(closeDialogEffect)&&(o=o.filter(a=>a!=s.value));return o},provide:o=>showPanel.computeN([o],e=>e.field(o))}),openDialogEffect=StateEffect.define(),closeDialogEffect=StateEffect.define();function createDialog(o,e,s){let a=e.content?e.content(o,()=>c(null)):null;if(!a){if(a=crelt("form"),e.input){let d=crelt("input",e.input);/^(text|password|number|email|tel|url)$/.test(d.type)&&d.classList.add("cm-textfield"),d.name||(d.name="input"),a.appendChild(crelt("label",(e.label||"")+": ",d))}else a.appendChild(document.createTextNode(e.label||""));a.appendChild(document.createTextNode(" ")),a.appendChild(crelt("button",{class:"cm-button",type:"submit"},e.submitLabel||"OK"))}let l=a.nodeName=="FORM"?[a]:a.querySelectorAll("form");for(let d=0;d<l.length;d++){let h=l[d];h.addEventListener("keydown",p=>{p.keyCode==27?(p.preventDefault(),c(null)):p.keyCode==13&&(p.preventDefault(),c(h))}),h.addEventListener("submit",p=>{p.preventDefault(),c(h)})}let u=crelt("div",a,crelt("button",{onclick:()=>c(null),"aria-label":o.state.phrase("close"),class:"cm-dialog-close",type:"button"},[""]));e.class&&(u.className=e.class),u.classList.add("cm-dialog");function c(d){u.contains(u.ownerDocument.activeElement)&&o.focus(),s(d)}return{dom:u,top:e.top,mount:()=>{if(e.focus){let d;typeof e.focus=="string"?d=a.querySelector(e.focus):d=a.querySelector("input")||a.querySelector("button"),d&&"select"in d?d.select():d&&"focus"in d&&d.focus()}}}}class GutterMarker extends RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}GutterMarker.prototype.elementClass="",GutterMarker.prototype.toDOM=void 0,GutterMarker.prototype.mapMode=MapMode.TrackBefore,GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1,GutterMarker.prototype.point=!0,StateEffect.define(),StateEffect.define();const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(e,s){this.from=e,this.to=s}}class NodeProp{constructor(e={}){this.id=nextPropID++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=NodeType.match(e)),s=>{let a=e(s);return a===void 0?null:[this,a]}}}NodeProp.closedBy=new NodeProp({deserialize:o=>o.split(" ")}),NodeProp.openedBy=new NodeProp({deserialize:o=>o.split(" ")}),NodeProp.group=new NodeProp({deserialize:o=>o.split(" ")}),NodeProp.isolate=new NodeProp({deserialize:o=>{if(o&&o!="rtl"&&o!="ltr"&&o!="auto")throw new RangeError("Invalid value for isolate: "+o);return o||"auto"}}),NodeProp.contextHash=new NodeProp({perNode:!0}),NodeProp.lookAhead=new NodeProp({perNode:!0}),NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(e,s,a,l=!1){this.tree=e,this.overlay=s,this.parser=a,this.bracketed=l}static get(e){return e&&e.props&&e.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(e,s,a,l=0){this.name=e,this.props=s,this.id=a,this.flags=l}static define(e){let s=e.props&&e.props.length?Object.create(null):noProps,a=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),l=new NodeType(e.name||"",s,e.id,a);if(e.props){for(let u of e.props)if(Array.isArray(u)||(u=u(l)),u){if(u[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");s[u[0].id]=u[1]}}return l}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let s=this.prop(NodeProp.group);return s?s.indexOf(e)>-1:!1}return this.id==e}static match(e){let s=Object.create(null);for(let a in e)for(let l of a.split(" "))s[l]=e[a];return a=>{for(let l=a.prop(NodeProp.group),u=-1;u<(l?l.length:0);u++){let c=s[u<0?a.name:l[u]];if(c)return c}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(e){this.types=e;for(let s=0;s<e.length;s++)if(e[s].id!=s)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let s=[];for(let a of this.types){let l=null;for(let u of e){let c=u(a);if(c){l||(l=Object.assign({},a.props));let d=c[1],h=c[0];h.combine&&h.id in l&&(d=h.combine(l[h.id],d)),l[h.id]=d}}s.push(l?new NodeType(a.name,l,a.id,a.flags):a)}return new NodeSet(s)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(o){o[o.ExcludeBuffers=1]="ExcludeBuffers",o[o.IncludeAnonymous=2]="IncludeAnonymous",o[o.IgnoreMounts=4]="IgnoreMounts",o[o.IgnoreOverlays=8]="IgnoreOverlays",o[o.EnterBracketed=16]="EnterBracketed"})(IterMode||(IterMode={}));class Tree{constructor(e,s,a,l,u){if(this.type=e,this.children=s,this.positions=a,this.length=l,this.props=null,u&&u.length){this.props=Object.create(null);for(let[c,d]of u)this.props[typeof c=="number"?c:c.id]=d}}toString(){let e=MountedTree.get(this);if(e&&!e.overlay)return e.tree.toString();let s="";for(let a of this.children){let l=a.toString();l&&(s&&(s+=","),s+=l)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(s.length?"("+s+")":""):s}cursor(e=0){return new TreeCursor(this.topNode,e)}cursorAt(e,s=0,a=0){let l=CachedNode.get(this)||this.topNode,u=new TreeCursor(l);return u.moveTo(e,s),CachedNode.set(this,u._tree),u}get topNode(){return new TreeNode(this,0,0,null)}resolve(e,s=0){let a=resolveNode(CachedNode.get(this)||this.topNode,e,s,!1);return CachedNode.set(this,a),a}resolveInner(e,s=0){let a=resolveNode(CachedInnerNode.get(this)||this.topNode,e,s,!0);return CachedInnerNode.set(this,a),a}resolveStack(e,s=0){return stackIterator(this,e,s)}iterate(e){let{enter:s,leave:a,from:l=0,to:u=this.length}=e,c=e.mode||0,d=(c&IterMode.IncludeAnonymous)>0;for(let h=this.cursor(c|IterMode.IncludeAnonymous);;){let p=!1;if(h.from<=u&&h.to>=l&&(!d&&h.type.isAnonymous||s(h)!==!1)){if(h.firstChild())continue;p=!0}for(;p&&a&&(d||!h.type.isAnonymous)&&a(h),!h.nextSibling();){if(!h.parent())return;p=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let s in this.props)e.push([+s,this.props[s]]);return e}balance(e={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(s,a,l)=>new Tree(this.type,s,a,l,this.propValues),e.makeTree||((s,a,l)=>new Tree(NodeType.none,s,a,l)))}static build(e){return buildTree(e)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(e,s){this.buffer=e,this.index=s}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(e,s,a){this.buffer=e,this.length=s,this.set=a}get type(){return NodeType.none}toString(){let e=[];for(let s=0;s<this.buffer.length;)e.push(this.childString(s)),s=this.buffer[s+3];return e.join(",")}childString(e){let s=this.buffer[e],a=this.buffer[e+3],l=this.set.types[s],u=l.name;if(/\W/.test(u)&&!l.isError&&(u=JSON.stringify(u)),e+=4,a==e)return u;let c=[];for(;e<a;)c.push(this.childString(e)),e=this.buffer[e+3];return u+"("+c.join(",")+")"}findChild(e,s,a,l,u){let{buffer:c}=this,d=-1;for(let h=e;h!=s&&!(checkSide(u,l,c[h+1],c[h+2])&&(d=h,a>0));h=c[h+3]);return d}slice(e,s,a){let l=this.buffer,u=new Uint16Array(s-e),c=0;for(let d=e,h=0;d<s;){u[h++]=l[d++],u[h++]=l[d++]-a;let p=u[h++]=l[d++]-a;u[h++]=l[d++]-e,c=Math.max(c,p)}return new TreeBuffer(u,c,this.set)}}function checkSide(o,e,s,a){switch(o){case-2:return s<e;case-1:return a>=e&&s<e;case 0:return s<e&&a>e;case 1:return s<=e&&a>e;case 2:return a>e;case 4:return!0}}function resolveNode(o,e,s,a){for(var l;o.from==o.to||(s<1?o.from>=e:o.from>e)||(s>-1?o.to<=e:o.to<e);){let c=!a&&o instanceof TreeNode&&o.index<0?null:o.parent;if(!c)return o;o=c}let u=a?0:IterMode.IgnoreOverlays;if(a)for(let c=o,d=c.parent;d;c=d,d=c.parent)c instanceof TreeNode&&c.index<0&&((l=d.enter(e,s,u))===null||l===void 0?void 0:l.from)!=c.from&&(o=d);for(;;){let c=o.enter(e,s,u);if(!c)return o;o=c}}class BaseNode{cursor(e=0){return new TreeCursor(this,e)}getChild(e,s=null,a=null){let l=getChildren(this,e,s,a);return l.length?l[0]:null}getChildren(e,s=null,a=null){return getChildren(this,e,s,a)}resolve(e,s=0){return resolveNode(this,e,s,!1)}resolveInner(e,s=0){return resolveNode(this,e,s,!0)}matchContext(e){return matchNodeContext(this.parent,e)}enterUnfinishedNodesBefore(e){let s=this.childBefore(e),a=this;for(;s;){let l=s.lastChild;if(!l||l.to!=s.to)break;l.type.isError&&l.from==l.to?(a=s,s=l.prevSibling):s=l}return a}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(e,s,a,l){super(),this._tree=e,this.from=s,this.index=a,this._parent=l}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,s,a,l,u=0){for(let c=this;;){for(let{children:d,positions:h}=c._tree,p=s>0?d.length:-1;e!=p;e+=s){let m=d[e],g=h[e]+c.from,y;if(!(!(u&IterMode.EnterBracketed&&m instanceof Tree&&(y=MountedTree.get(m))&&!y.overlay&&y.bracketed&&a>=g&&a<=g+m.length)&&!checkSide(l,a,g,g+m.length))){if(m instanceof TreeBuffer){if(u&IterMode.ExcludeBuffers)continue;let A=m.findChild(0,m.buffer.length,s,a-g,l);if(A>-1)return new BufferNode(new BufferContext(c,m,e,g),null,A)}else if(u&IterMode.IncludeAnonymous||!m.type.isAnonymous||hasChild(m)){let A;if(!(u&IterMode.IgnoreMounts)&&(A=MountedTree.get(m))&&!A.overlay)return new TreeNode(A.tree,g,e,c);let T=new TreeNode(m,g,e,c);return u&IterMode.IncludeAnonymous||!T.type.isAnonymous?T:T.nextChild(s<0?m.children.length-1:0,s,a,l,u)}}}if(u&IterMode.IncludeAnonymous||!c.type.isAnonymous||(c.index>=0?e=c.index+s:e=s<0?-1:c._parent._tree.children.length,c=c._parent,!c))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,s,a=0){let l;if(!(a&IterMode.IgnoreOverlays)&&(l=MountedTree.get(this._tree))&&l.overlay){let u=e-this.from,c=a&IterMode.EnterBracketed&&l.bracketed;for(let{from:d,to:h}of l.overlay)if((s>0||c?d<=u:d<u)&&(s<0||c?h>=u:h>u))return new TreeNode(l.tree,l.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,s,a)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(o,e,s,a){let l=o.cursor(),u=[];if(!l.firstChild())return u;if(s!=null){for(let c=!1;!c;)if(c=l.type.is(s),!l.nextSibling())return u}for(;;){if(a!=null&&l.type.is(a))return u;if(l.type.is(e)&&u.push(l.node),!l.nextSibling())return a==null?u:[]}}function matchNodeContext(o,e,s=e.length-1){for(let a=o;s>=0;a=a.parent){if(!a)return!1;if(!a.type.isAnonymous){if(e[s]&&e[s]!=a.name)return!1;s--}}return!0}class BufferContext{constructor(e,s,a,l){this.parent=e,this.buffer=s,this.index=a,this.start=l}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,s,a){super(),this.context=e,this._parent=s,this.index=a,this.type=e.buffer.set.types[e.buffer.buffer[a]]}child(e,s,a){let{buffer:l}=this.context,u=l.findChild(this.index+4,l.buffer[this.index+3],e,s-this.context.start,a);return u<0?null:new BufferNode(this.context,this,u)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,s,a=0){if(a&IterMode.ExcludeBuffers)return null;let{buffer:l}=this.context,u=l.findChild(this.index+4,l.buffer[this.index+3],s>0?1:-1,e-this.context.start,s);return u<0?null:new BufferNode(this.context,this,u)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,s=e.buffer[this.index+3];return s<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new BufferNode(this.context,this._parent,s):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,s=this._parent?this._parent.index+4:0;return this.index==s?this.externalSibling(-1):new BufferNode(this.context,this._parent,e.findChild(s,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],s=[],{buffer:a}=this.context,l=this.index+4,u=a.buffer[this.index+3];if(u>l){let c=a.buffer[this.index+1];e.push(a.slice(l,u,c)),s.push(0)}return new Tree(this.type,e,s,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(o){if(!o.length)return null;let e=0,s=o[0];for(let u=1;u<o.length;u++){let c=o[u];(c.from>s.from||c.to<s.to)&&(s=c,e=u)}let a=s instanceof TreeNode&&s.index<0?null:s.parent,l=o.slice();return a?l[e]=a:l.splice(e,1),new StackIterator(l,s)}class StackIterator{constructor(e,s){this.heads=e,this.node=s}get next(){return iterStack(this.heads)}}function stackIterator(o,e,s){let a=o.resolveInner(e,s),l=null;for(let u=a instanceof TreeNode?a:a.context.parent;u;u=u.parent)if(u.index<0){let c=u.parent;(l||(l=[a])).push(c.resolve(e,s)),u=c}else{let c=MountedTree.get(u.tree);if(c&&c.overlay&&c.overlay[0].from<=e&&c.overlay[c.overlay.length-1].to>=e){let d=new TreeNode(c.tree,c.overlay[0].from+u.from,-1,u);(l||(l=[a])).push(resolveNode(d,e,s,!1))}}return l?iterStack(l):a}class TreeCursor{get name(){return this.type.name}constructor(e,s=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=s&~IterMode.EnterBracketed,e instanceof TreeNode)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let a=e._parent;a;a=a._parent)this.stack.unshift(a.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,s){this.index=e;let{start:a,buffer:l}=this.buffer;return this.type=s||l.set.types[l.buffer[e]],this.from=a+l.buffer[e+1],this.to=a+l.buffer[e+2],!0}yield(e){return e?e instanceof TreeNode?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,s,a){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,s,a,this.mode));let{buffer:l}=this.buffer,u=l.findChild(this.index+4,l.buffer[this.index+3],e,s-this.buffer.start,a);return u<0?!1:(this.stack.push(this.index),this.yieldBuf(u))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,s,a=this.mode){return this.buffer?a&IterMode.ExcludeBuffers?!1:this.enterChild(1,e,s):this.yield(this._tree.enter(e,s,a))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:s}=this.buffer,a=this.stack.length-1;if(e<0){let l=a<0?0:this.stack[a]+4;if(this.index!=l)return this.yieldBuf(s.findChild(l,this.index,-1,0,4))}else{let l=s.buffer[this.index+3];if(l<(a<0?s.buffer.length:s.buffer[this.stack[a]+3]))return this.yieldBuf(l)}return a<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let s,a,{buffer:l}=this;if(l){if(e>0){if(this.index<l.buffer.buffer.length)return!1}else for(let u=0;u<this.index;u++)if(l.buffer.buffer[u+3]<this.index)return!1;({index:s,parent:a}=l)}else({index:s,_parent:a}=this._tree);for(;a;{index:s,_parent:a}=a)if(s>-1)for(let u=s+e,c=e<0?-1:a._tree.children.length;u!=c;u+=e){let d=a._tree.children[u];if(this.mode&IterMode.IncludeAnonymous||d instanceof TreeBuffer||!d.type.isAnonymous||hasChild(d))return!1}return!0}move(e,s){if(s&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,s=0){for(;(this.from==this.to||(s<1?this.from>=e:this.from>e)||(s>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,s););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,s=null,a=0;if(e&&e.context==this.buffer)e:for(let l=this.index,u=this.stack.length;u>=0;){for(let c=e;c;c=c._parent)if(c.index==l){if(l==this.index)return c;s=c,a=u+1;break e}l=this.stack[--u]}for(let l=a;l<this.stack.length;l++)s=new BufferNode(this.buffer,s,this.stack[l]);return this.bufferNode=new BufferNode(this.buffer,s,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,s){for(let a=0;;){let l=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){a++;continue}this.type.isAnonymous||(l=!0)}for(;;){if(l&&s&&s(this),l=this.type.isAnonymous,!a)return;if(this.nextSibling())break;this.parent(),a--,l=!0}}}matchContext(e){if(!this.buffer)return matchNodeContext(this.node.parent,e);let{buffer:s}=this.buffer,{types:a}=s.set;for(let l=e.length-1,u=this.stack.length-1;l>=0;u--){if(u<0)return matchNodeContext(this._tree,e,l);let c=a[s.buffer[this.stack[u]]];if(!c.isAnonymous){if(e[l]&&e[l]!=c.name)return!1;l--}}return!0}}function hasChild(o){return o.children.some(e=>e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e))}function buildTree(o){var e;let{buffer:s,nodeSet:a,maxBufferLength:l=DefaultBufferLength,reused:u=[],minRepeatType:c=a.types.length}=o,d=Array.isArray(s)?new FlatBufferCursor(s,s.length):s,h=a.types,p=0,m=0;function g(I,P,N,L,Q,j){let{id:F,start:V,end:J,size:z}=d,Y=m,fe=p;if(z<0)if(d.next(),z==-1){let G=u[F];N.push(G),L.push(V-I);return}else if(z==-3){p=F;return}else if(z==-4){m=F;return}else throw new RangeError(`Unrecognized record size: ${z}`);let de=h[F],X,he,ue=V-I;if(J-V<=l&&(he=v(d.pos-P,Q))){let G=new Uint16Array(he.size-he.skip),K=d.pos-he.size,q=G.length;for(;d.pos>K;)q=_(he.start,G,q);X=new TreeBuffer(G,J-he.start,a),ue=he.start-I}else{let G=d.pos-z;d.next();let K=[],q=[],te=F>=c?F:-1,Z=0,ce=J;for(;d.pos>G;)te>=0&&d.id==te&&d.size>=0?(d.end<=ce-l&&(T(K,q,V,Z,d.end,ce,te,Y,fe),Z=K.length,ce=d.end),d.next()):j>2500?y(V,G,K,q):g(V,G,K,q,te,j+1);if(te>=0&&Z>0&&Z<K.length&&T(K,q,V,Z,V,ce,te,Y,fe),K.reverse(),q.reverse(),te>-1&&Z>0){let be=A(de,fe);X=balanceRange(de,K,q,0,K.length,0,J-V,be,be)}else X=E(de,K,q,J-V,Y-J,fe)}N.push(X),L.push(ue)}function y(I,P,N,L){let Q=[],j=0,F=-1;for(;d.pos>P;){let{id:V,start:J,end:z,size:Y}=d;if(Y>4)d.next();else{if(F>-1&&J<F)break;F<0&&(F=z-l),Q.push(V,J,z),j++,d.next()}}if(j){let V=new Uint16Array(j*4),J=Q[Q.length-2];for(let z=Q.length-3,Y=0;z>=0;z-=3)V[Y++]=Q[z],V[Y++]=Q[z+1]-J,V[Y++]=Q[z+2]-J,V[Y++]=Y;N.push(new TreeBuffer(V,Q[2]-J,a)),L.push(J-I)}}function A(I,P){return(N,L,Q)=>{let j=0,F=N.length-1,V,J;if(F>=0&&(V=N[F])instanceof Tree){if(!F&&V.type==I&&V.length==Q)return V;(J=V.prop(NodeProp.lookAhead))&&(j=L[F]+V.length+J)}return E(I,N,L,Q,j,P)}}function T(I,P,N,L,Q,j,F,V,J){let z=[],Y=[];for(;I.length>L;)z.push(I.pop()),Y.push(P.pop()+N-Q);I.push(E(a.types[F],z,Y,j-Q,V-j,J)),P.push(Q-N)}function E(I,P,N,L,Q,j,F){if(j){let V=[NodeProp.contextHash,j];F=F?[V].concat(F):[V]}if(Q>25){let V=[NodeProp.lookAhead,Q];F=F?[V].concat(F):[V]}return new Tree(I,P,N,L,F)}function v(I,P){let N=d.fork(),L=0,Q=0,j=0,F=N.end-l,V={size:0,start:0,skip:0};e:for(let J=N.pos-I;N.pos>J;){let z=N.size;if(N.id==P&&z>=0){V.size=L,V.start=Q,V.skip=j,j+=4,L+=4,N.next();continue}let Y=N.pos-z;if(z<0||Y<J||N.start<F)break;let fe=N.id>=c?4:0,de=N.start;for(N.next();N.pos>Y;){if(N.size<0)if(N.size==-3||N.size==-4)fe+=4;else break e;else N.id>=c&&(fe+=4);N.next()}Q=de,L+=z,j+=fe}return(P<0||L==I)&&(V.size=L,V.start=Q,V.skip=j),V.size>4?V:void 0}function _(I,P,N){let{id:L,start:Q,end:j,size:F}=d;if(d.next(),F>=0&&L<c){let V=N;if(F>4){let J=d.pos-(F-4);for(;d.pos>J;)N=_(I,P,N)}P[--N]=V,P[--N]=j-I,P[--N]=Q-I,P[--N]=L}else F==-3?p=L:F==-4&&(m=L);return N}let w=[],R=[];for(;d.pos>0;)g(o.start||0,o.bufferStart||0,w,R,-1,0);let k=(e=o.length)!==null&&e!==void 0?e:w.length?R[0]+w[0].length:0;return new Tree(h[o.topID],w.reverse(),R.reverse(),k)}const nodeSizeCache=new WeakMap;function nodeSize(o,e){if(!o.isAnonymous||e instanceof TreeBuffer||e.type!=o)return 1;let s=nodeSizeCache.get(e);if(s==null){s=1;for(let a of e.children){if(a.type!=o||!(a instanceof Tree)){s=1;break}s+=nodeSize(o,a)}nodeSizeCache.set(e,s)}return s}function balanceRange(o,e,s,a,l,u,c,d,h){let p=0;for(let T=a;T<l;T++)p+=nodeSize(o,e[T]);let m=Math.ceil(p*1.5/8),g=[],y=[];function A(T,E,v,_,w){for(let R=v;R<_;){let k=R,I=E[R],P=nodeSize(o,T[R]);for(R++;R<_;R++){let N=nodeSize(o,T[R]);if(P+N>=m)break;P+=N}if(R==k+1){if(P>m){let N=T[k];A(N.children,N.positions,0,N.children.length,E[k]+w);continue}g.push(T[k])}else{let N=E[R-1]+T[R-1].length-I;g.push(balanceRange(o,T,E,k,R,I,N,null,h))}y.push(I+w-u)}}return A(e,s,a,l,0),(d||h)(g,y,c)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(e,s,a){let l=this.map.get(e);l||this.map.set(e,l=new Map),l.set(s,a)}getBuffer(e,s){let a=this.map.get(e);return a&&a.get(s)}set(e,s){e instanceof BufferNode?this.setBuffer(e.context.buffer,e.index,s):e instanceof TreeNode&&this.map.set(e.tree,s)}get(e){return e instanceof BufferNode?this.getBuffer(e.context.buffer,e.index):e instanceof TreeNode?this.map.get(e.tree):void 0}cursorSet(e,s){e.buffer?this.setBuffer(e.buffer.buffer,e.index,s):this.map.set(e.tree,s)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class TreeFragment{constructor(e,s,a,l,u=!1,c=!1){this.from=e,this.to=s,this.tree=a,this.offset=l,this.open=(u?1:0)|(c?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,s=[],a=!1){let l=[new TreeFragment(0,e.length,e,0,!1,a)];for(let u of s)u.to>e.length&&l.push(u);return l}static applyChanges(e,s,a=128){if(!s.length)return e;let l=[],u=1,c=e.length?e[0]:null;for(let d=0,h=0,p=0;;d++){let m=d<s.length?s[d]:null,g=m?m.fromA:1e9;if(g-h>=a)for(;c&&c.from<g;){let y=c;if(h>=y.from||g<=y.to||p){let A=Math.max(y.from,h)-p,T=Math.min(y.to,g)-p;y=A>=T?null:new TreeFragment(A,T,y.tree,y.offset+p,d>0,!!m)}if(y&&l.push(y),c.to>g)break;c=u<e.length?e[u++]:null}if(!m)break;h=m.toA,p=m.toA-m.toB}return l}}class Parser{startParse(e,s,a){return typeof e=="string"&&(e=new StringInput(e)),a=a?a.length?a.map(l=>new Range(l.from,l.to)):[new Range(0,0)]:[new Range(0,e.length)],this.createParse(e,s||[],a)}parse(e,s,a){let l=this.startParse(e,s,a);for(;;){let u=l.advance();if(u)return u}}}class StringInput{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,s){return this.string.slice(e,s)}}function parseMixed(o){return(e,s,a,l)=>new MixedParse(e,o,s,a,l)}class InnerParse{constructor(e,s,a,l,u,c){this.parser=e,this.parse=s,this.overlay=a,this.bracketed=l,this.target=u,this.from=c}}function checkRanges(o){if(!o.length||o.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(o))}class ActiveOverlay{constructor(e,s,a,l,u,c,d,h){this.parser=e,this.predicate=s,this.mounts=a,this.index=l,this.start=u,this.bracketed=c,this.target=d,this.prev=h,this.depth=0,this.ranges=[]}}const stoppedInner=new NodeProp({perNode:!0});class MixedParse{constructor(e,s,a,l,u){this.nest=s,this.input=a,this.fragments=l,this.ranges=u,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let a=this.baseParse.advance();if(!a)return null;if(this.baseParse=null,this.baseTree=a,this.startInner(),this.stoppedAt!=null)for(let l of this.inner)l.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let a=this.baseTree;return this.stoppedAt!=null&&(a=new Tree(a.type,a.children,a.positions,a.length,a.propValues.concat([[stoppedInner,this.stoppedAt]]))),a}let e=this.inner[this.innerDone],s=e.parse.advance();if(s){this.innerDone++;let a=Object.assign(Object.create(null),e.target.props);a[NodeProp.mounted.id]=new MountedTree(s,e.overlay,e.parser,e.bracketed),e.target.props=a}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let s=this.innerDone;s<this.inner.length;s++)this.inner[s].from<e&&(e=Math.min(e,this.inner[s].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let s=this.innerDone;s<this.inner.length;s++)this.inner[s].parse.stopAt(e)}startInner(){let e=new FragmentCursor$2(this.fragments),s=null,a=null,l=new TreeCursor(new TreeNode(this.baseTree,this.ranges[0].from,0,null),IterMode.IncludeAnonymous|IterMode.IgnoreMounts);e:for(let u,c;;){let d=!0,h;if(this.stoppedAt!=null&&l.from>=this.stoppedAt)d=!1;else if(e.hasNode(l)){if(s){let p=s.mounts.find(m=>m.frag.from<=l.from&&m.frag.to>=l.to&&m.mount.overlay);if(p)for(let m of p.mount.overlay){let g=m.from+p.pos,y=m.to+p.pos;g>=l.from&&y<=l.to&&!s.ranges.some(A=>A.from<y&&A.to>g)&&s.ranges.push({from:g,to:y})}}d=!1}else if(a&&(c=checkCover(a.ranges,l.from,l.to)))d=c!=2;else if(!l.type.isAnonymous&&(u=this.nest(l,this.input))&&(l.from<l.to||!u.overlay)){l.tree||(materialize(l),s&&s.depth++,a&&a.depth++);let p=e.findMounts(l.from,u.parser);if(typeof u.overlay=="function")s=new ActiveOverlay(u.parser,u.overlay,p,this.inner.length,l.from,!!u.bracketed,l.tree,s);else{let m=punchRanges(this.ranges,u.overlay||(l.from<l.to?[new Range(l.from,l.to)]:[]));m.length&&checkRanges(m),(m.length||!u.overlay)&&this.inner.push(new InnerParse(u.parser,m.length?u.parser.startParse(this.input,enterFragments(p,m),m):u.parser.startParse(""),u.overlay?u.overlay.map(g=>new Range(g.from-l.from,g.to-l.from)):null,!!u.bracketed,l.tree,m.length?m[0].from:l.from)),u.overlay?m.length&&(a={ranges:m,depth:0,prev:a}):d=!1}}else if(s&&(h=s.predicate(l))&&(h===!0&&(h=new Range(l.from,l.to)),h.from<h.to)){let p=s.ranges.length-1;p>=0&&s.ranges[p].to==h.from?s.ranges[p]={from:s.ranges[p].from,to:h.to}:s.ranges.push(h)}if(d&&l.firstChild())s&&s.depth++,a&&a.depth++;else for(;!l.nextSibling();){if(!l.parent())break e;if(s&&!--s.depth){let p=punchRanges(this.ranges,s.ranges);p.length&&(checkRanges(p),this.inner.splice(s.index,0,new InnerParse(s.parser,s.parser.startParse(this.input,enterFragments(s.mounts,p),p),s.ranges.map(m=>new Range(m.from-s.start,m.to-s.start)),s.bracketed,s.target,p[0].from))),s=s.prev}a&&!--a.depth&&(a=a.prev)}}}}function checkCover(o,e,s){for(let a of o){if(a.from>=s)break;if(a.to>e)return a.from<=e&&a.to>=s?2:1}return 0}function sliceBuf(o,e,s,a,l,u){if(e<s){let c=o.buffer[e+1];a.push(o.slice(e,s,c)),l.push(c-u)}}function materialize(o){let{node:e}=o,s=[],a=e.context.buffer;do s.push(o.index),o.parent();while(!o.tree);let l=o.tree,u=l.children.indexOf(a),c=l.children[u],d=c.buffer,h=[u];function p(m,g,y,A,T,E){let v=s[E],_=[],w=[];sliceBuf(c,m,v,_,w,A);let R=d[v+1],k=d[v+2];h.push(_.length);let I=E?p(v+4,d[v+3],c.set.types[d[v]],R,k-R,E-1):e.toTree();return _.push(I),w.push(R-A),sliceBuf(c,d[v+3],g,_,w,A),new Tree(y,_,w,T)}l.children[u]=p(0,d.length,NodeType.none,0,c.length,s.length-1);for(let m of h){let g=o.tree.children[m],y=o.tree.positions[m];o.yield(new TreeNode(g,y+o.from,m,o._tree))}}class StructureCursor{constructor(e,s){this.offset=s,this.done=!1,this.cursor=e.cursor(IterMode.IncludeAnonymous|IterMode.IgnoreMounts)}moveTo(e){let{cursor:s}=this,a=e-this.offset;for(;!this.done&&s.from<a;)s.to>=e&&s.enter(a,1,IterMode.IgnoreOverlays|IterMode.ExcludeBuffers)||s.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let s=this.cursor.tree;;){if(s==e.tree)return!0;if(s.children.length&&s.positions[0]==0&&s.children[0]instanceof Tree)s=s.children[0];else break}return!1}}let FragmentCursor$2=class{constructor(e){var s;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let a=this.curFrag=e[0];this.curTo=(s=a.tree.prop(stoppedInner))!==null&&s!==void 0?s:a.to,this.inner=new StructureCursor(a.tree,-a.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let s=this.curFrag=this.fragments[this.fragI];this.curTo=(e=s.tree.prop(stoppedInner))!==null&&e!==void 0?e:s.to,this.inner=new StructureCursor(s.tree,-s.offset)}}findMounts(e,s){var a;let l=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let u=this.inner.cursor.node;u;u=u.parent){let c=(a=u.tree)===null||a===void 0?void 0:a.prop(NodeProp.mounted);if(c&&c.parser==s)for(let d=this.fragI;d<this.fragments.length;d++){let h=this.fragments[d];if(h.from>=u.to)break;h.tree==this.curFrag.tree&&l.push({frag:h,pos:u.from-h.offset,mount:c})}}}return l}};function punchRanges(o,e){let s=null,a=e;for(let l=1,u=0;l<o.length;l++){let c=o[l-1].to,d=o[l].from;for(;u<a.length;u++){let h=a[u];if(h.from>=d)break;h.to<=c||(s||(a=s=e.slice()),h.from<c?(s[u]=new Range(h.from,c),h.to>d&&s.splice(u+1,0,new Range(d,h.to))):h.to>d?s[u--]=new Range(d,h.to):s.splice(u--,1))}}return a}function findCoverChanges(o,e,s,a){let l=0,u=0,c=!1,d=!1,h=-1e9,p=[];for(;;){let m=l==o.length?1e9:c?o[l].to:o[l].from,g=u==e.length?1e9:d?e[u].to:e[u].from;if(c!=d){let y=Math.max(h,s),A=Math.min(m,g,a);y<A&&p.push(new Range(y,A))}if(h=Math.min(m,g),h==1e9)break;m==h&&(c?(c=!1,l++):c=!0),g==h&&(d?(d=!1,u++):d=!0)}return p}function enterFragments(o,e){let s=[];for(let{pos:a,mount:l,frag:u}of o){let c=a+(l.overlay?l.overlay[0].from:0),d=c+l.tree.length,h=Math.max(u.from,c),p=Math.min(u.to,d);if(l.overlay){let m=l.overlay.map(y=>new Range(y.from+a,y.to+a)),g=findCoverChanges(e,m,h,p);for(let y=0,A=h;;y++){let T=y==g.length,E=T?p:g[y].from;if(E>A&&s.push(new TreeFragment(A,E,l.tree,-c,u.from>=A||u.openStart,u.to<=E||u.openEnd)),T)break;A=g[y].to}}else s.push(new TreeFragment(h,p,l.tree,-c,u.from>=c||u.openStart,u.to<=d||u.openEnd))}return s}let nextTagID=0;class Tag{constructor(e,s,a,l){this.name=e,this.set=s,this.base=a,this.modified=l,this.id=nextTagID++}toString(){let{name:e}=this;for(let s of this.modified)s.name&&(e=`${s.name}(${e})`);return e}static define(e,s){let a=typeof e=="string"?e:"?";if(e instanceof Tag&&(s=e),s!=null&&s.base)throw new Error("Can not derive from a modified tag");let l=new Tag(a,[],null,[]);if(l.set.push(l),s)for(let u of s.set)l.set.push(u);return l}static defineModifier(e){let s=new Modifier(e);return a=>a.modified.indexOf(s)>-1?a:Modifier.get(a.base||a,a.modified.concat(s).sort((l,u)=>l.id-u.id))}}let nextModifierID=0;class Modifier{constructor(e){this.name=e,this.instances=[],this.id=nextModifierID++}static get(e,s){if(!s.length)return e;let a=s[0].instances.find(d=>d.base==e&&sameArray(s,d.modified));if(a)return a;let l=[],u=new Tag(e.name,l,e,s);for(let d of s)d.instances.push(u);let c=powerSet(s);for(let d of e.set)if(!d.modified.length)for(let h of c)l.push(Modifier.get(d,h));return u}}function sameArray(o,e){return o.length==e.length&&o.every((s,a)=>s==e[a])}function powerSet(o){let e=[[]];for(let s=0;s<o.length;s++)for(let a=0,l=e.length;a<l;a++)e.push(e[a].concat(o[s]));return e.sort((s,a)=>a.length-s.length)}function styleTags(o){let e=Object.create(null);for(let s in o){let a=o[s];Array.isArray(a)||(a=[a]);for(let l of s.split(" "))if(l){let u=[],c=2,d=l;for(let g=0;;){if(d=="..."&&g>0&&g+3==l.length){c=1;break}let y=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(d);if(!y)throw new RangeError("Invalid path: "+l);if(u.push(y[0]=="*"?"":y[0][0]=='"'?JSON.parse(y[0]):y[0]),g+=y[0].length,g==l.length)break;let A=l[g++];if(g==l.length&&A=="!"){c=0;break}if(A!="/")throw new RangeError("Invalid path: "+l);d=l.slice(g)}let h=u.length-1,p=u[h];if(!p)throw new RangeError("Invalid path: "+l);let m=new Rule(a,c,h>0?u.slice(0,h):null);e[p]=m.sort(e[p])}}return ruleNodeProp.add(e)}const ruleNodeProp=new NodeProp({combine(o,e){let s,a,l;for(;o||e;){if(!o||e&&o.depth>=e.depth?(l=e,e=e.next):(l=o,o=o.next),s&&s.mode==l.mode&&!l.context&&!s.context)continue;let u=new Rule(l.tags,l.mode,l.context);s?s.next=u:a=u,s=u}return a}});class Rule{constructor(e,s,a,l){this.tags=e,this.mode=s,this.context=a,this.next=l}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(o,e){let s=Object.create(null);for(let u of o)if(!Array.isArray(u.tag))s[u.tag.id]=u.class;else for(let c of u.tag)s[c.id]=u.class;let{scope:a,all:l=null}=e||{};return{style:u=>{let c=l;for(let d of u)for(let h of d.set){let p=s[h.id];if(p){c=c?c+" "+p:p;break}}return c},scope:a}}function highlightTags(o,e){let s=null;for(let a of o){let l=a.style(e);l&&(s=s?s+" "+l:l)}return s}function highlightTree(o,e,s,a=0,l=o.length){let u=new HighlightBuilder(a,Array.isArray(e)?e:[e],s);u.highlightRange(o.cursor(),a,l,"",u.highlighters),u.flush(l)}class HighlightBuilder{constructor(e,s,a){this.at=e,this.highlighters=s,this.span=a,this.class=""}startSpan(e,s){s!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=s)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,s,a,l,u){let{type:c,from:d,to:h}=e;if(d>=a||h<=s)return;c.isTop&&(u=this.highlighters.filter(A=>!A.scope||A.scope(c)));let p=l,m=getStyleTags(e)||Rule.empty,g=highlightTags(u,m.tags);if(g&&(p&&(p+=" "),p+=g,m.mode==1&&(l+=(l?" ":"")+g)),this.startSpan(Math.max(s,d),p),m.opaque)return;let y=e.tree&&e.tree.prop(NodeProp.mounted);if(y&&y.overlay){let A=e.node.enter(y.overlay[0].from+d,1),T=this.highlighters.filter(v=>!v.scope||v.scope(y.tree.type)),E=e.firstChild();for(let v=0,_=d;;v++){let w=v<y.overlay.length?y.overlay[v]:null,R=w?w.from+d:h,k=Math.max(s,_),I=Math.min(a,R);if(k<I&&E)for(;e.from<I&&(this.highlightRange(e,k,I,l,u),this.startSpan(Math.min(I,e.to),p),!(e.to>=R||!e.nextSibling())););if(!w||R>a)break;_=w.to+d,_>s&&(this.highlightRange(A.cursor(),Math.max(s,w.from+d),Math.min(a,_),"",T),this.startSpan(Math.min(a,_),p))}E&&e.parent()}else if(e.firstChild()){y&&(l="");do if(!(e.to<=s)){if(e.from>=a)break;this.highlightRange(e,s,a,l,u),this.startSpan(Math.min(a,e.to),p)}while(e.nextSibling());e.parent()}}}function getStyleTags(o){let e=o.type.prop(ruleNodeProp);for(;e&&e.context&&!o.matchContext(e.context);)e=e.next;return e||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading$4=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags$1={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading:heading$4,heading1:t(heading$4),heading2:t(heading$4),heading3:t(heading$4),heading4:t(heading$4),heading5:t(heading$4),heading6:t(heading$4),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier("definition"),constant:Tag.defineModifier("constant"),function:Tag.defineModifier("function"),standard:Tag.defineModifier("standard"),local:Tag.defineModifier("local"),special:Tag.defineModifier("special")};for(let o in tags$1){let e=tags$1[o];e instanceof Tag&&(e.name=o)}tagHighlighter([{tag:tags$1.link,class:"tok-link"},{tag:tags$1.heading,class:"tok-heading"},{tag:tags$1.emphasis,class:"tok-emphasis"},{tag:tags$1.strong,class:"tok-strong"},{tag:tags$1.keyword,class:"tok-keyword"},{tag:tags$1.atom,class:"tok-atom"},{tag:tags$1.bool,class:"tok-bool"},{tag:tags$1.url,class:"tok-url"},{tag:tags$1.labelName,class:"tok-labelName"},{tag:tags$1.inserted,class:"tok-inserted"},{tag:tags$1.deleted,class:"tok-deleted"},{tag:tags$1.literal,class:"tok-literal"},{tag:tags$1.string,class:"tok-string"},{tag:tags$1.number,class:"tok-number"},{tag:[tags$1.regexp,tags$1.escape,tags$1.special(tags$1.string)],class:"tok-string2"},{tag:tags$1.variableName,class:"tok-variableName"},{tag:tags$1.local(tags$1.variableName),class:"tok-variableName tok-local"},{tag:tags$1.definition(tags$1.variableName),class:"tok-variableName tok-definition"},{tag:tags$1.special(tags$1.variableName),class:"tok-variableName2"},{tag:tags$1.definition(tags$1.propertyName),class:"tok-propertyName tok-definition"},{tag:tags$1.typeName,class:"tok-typeName"},{tag:tags$1.namespace,class:"tok-namespace"},{tag:tags$1.className,class:"tok-className"},{tag:tags$1.macroName,class:"tok-macroName"},{tag:tags$1.propertyName,class:"tok-propertyName"},{tag:tags$1.operator,class:"tok-operator"},{tag:tags$1.comment,class:"tok-comment"},{tag:tags$1.meta,class:"tok-meta"},{tag:tags$1.invalid,class:"tok-invalid"},{tag:tags$1.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(o){return Facet.define({combine:o?e=>e.concat(o):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(e,s,a=[],l=""){this.data=e,this.name=l,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=s,this.extension=[language.of(this),EditorState.languageData.of((u,c,d)=>{let h=topNodeAt(u,c,d),p=h.type.prop(languageDataProp);if(!p)return[];let m=u.facet(p),g=h.type.prop(sublanguageProp);if(g){let y=h.resolve(c-h.from,d);for(let A of g)if(A.test(y,u)){let T=u.facet(A.facet);return A.type=="replace"?T:T.concat(m)}}return m})].concat(a)}isActiveAt(e,s,a=-1){return topNodeAt(e,s,a).type.prop(languageDataProp)==this.data}findRegions(e){let s=e.facet(language);if((s==null?void 0:s.data)==this.data)return[{from:0,to:e.doc.length}];if(!s||!s.allowsNesting)return[];let a=[],l=(u,c)=>{if(u.prop(languageDataProp)==this.data){a.push({from:c,to:c+u.length});return}let d=u.prop(NodeProp.mounted);if(d){if(d.tree.prop(languageDataProp)==this.data){if(d.overlay)for(let h of d.overlay)a.push({from:h.from+c,to:h.to+c});else a.push({from:c,to:c+u.length});return}else if(d.overlay){let h=a.length;if(l(d.tree,d.overlay[0].from+c),a.length>h)return}}for(let h=0;h<u.children.length;h++){let p=u.children[h];p instanceof Tree&&l(p,u.positions[h]+c)}};return l(syntaxTree(e),0),a}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(o,e,s){let a=o.facet(language),l=syntaxTree(o).topNode;if(!a||a.allowsNesting)for(let u=l;u;u=u.enter(e,s,IterMode.ExcludeBuffers|IterMode.EnterBracketed))u.type.isTop&&(l=u);return l}class LRLanguage extends Language{constructor(e,s,a){super(e,s,[],a),this.parser=s}static define(e){let s=defineLanguageFacet(e.languageData);return new LRLanguage(s,e.parser.configure({props:[languageDataProp.add(a=>a.isTop?s:void 0)]}),e.name)}configure(e,s){return new LRLanguage(this.data,this.parser.configure(e),s||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(o){let e=o.field(Language.state,!1);return e?e.tree:Tree.empty}class DocInput{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,s){let a=this.cursorPos-this.string.length;return e<a||s>=this.cursorPos?this.doc.sliceString(e,s):this.string.slice(e-a,s-a)}}let currentContext=null;class ParseContext{constructor(e,s,a=[],l,u,c,d,h){this.parser=e,this.state=s,this.fragments=a,this.tree=l,this.treeLen=u,this.viewport=c,this.skipped=d,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,s,a){return new ParseContext(e,s,[],Tree.empty,0,a,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(e,s){return s!=null&&s>=this.state.doc.length&&(s=void 0),this.tree!=Tree.empty&&this.isDone(s??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var a;if(typeof e=="number"){let l=Date.now()+e;e=()=>Date.now()>l}for(this.parse||(this.parse=this.startParse()),s!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>s)&&s<this.state.doc.length&&this.parse.stopAt(s);;){let l=this.parse.advance();if(l)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(l,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(a=this.parse.stoppedAt)!==null&&a!==void 0?a:this.state.doc.length,this.tree=l,this.parse=null,this.treeLen<(s??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,s;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(s=this.parse.advance()););}),this.treeLen=e,this.tree=s,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let s=currentContext;currentContext=this;try{return e()}finally{currentContext=s}}withoutTempSkipped(e){for(let s;s=this.tempSkipped.pop();)e=cutFragments(e,s.from,s.to);return e}changes(e,s){let{fragments:a,tree:l,treeLen:u,viewport:c,skipped:d}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((p,m,g,y)=>h.push({fromA:p,toA:m,fromB:g,toB:y})),a=TreeFragment.applyChanges(a,h),l=Tree.empty,u=0,c={from:e.mapPos(c.from,-1),to:e.mapPos(c.to,1)},this.skipped.length){d=[];for(let p of this.skipped){let m=e.mapPos(p.from,1),g=e.mapPos(p.to,-1);m<g&&d.push({from:m,to:g})}}}return new ParseContext(this.parser,s,a,l,u,c,d,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let s=this.skipped.length;for(let a=0;a<this.skipped.length;a++){let{from:l,to:u}=this.skipped[a];l<e.to&&u>e.from&&(this.fragments=cutFragments(this.fragments,l,u),this.skipped.splice(a--,1))}return this.skipped.length>=s?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,s){this.skipped.push({from:e,to:s})}static getSkippingParser(e){return new class extends Parser{createParse(s,a,l){let u=l[0].from,c=l[l.length-1].to;return{parsedPos:u,advance(){let h=currentContext;if(h){for(let p of l)h.tempSkipped.push(p);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=c,new Tree(NodeType.none,[],[],c-u)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let s=this.fragments;return this.treeLen>=e&&s.length&&s[0].from==0&&s[0].to>=e}static get(){return currentContext}}function cutFragments(o,e,s){return TreeFragment.applyChanges(o,[{fromA:e,toA:s,fromB:e,toB:s}])}class LanguageState{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let s=this.context.changes(e.changes,e.state),a=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),s.viewport.to);return s.work(20,a)||s.takeTree(),new LanguageState(s)}static init(e){let s=Math.min(3e3,e.doc.length),a=ParseContext.create(e.facet(language).parser,e,{from:0,to:s});return a.work(20,s)||a.takeTree(),new LanguageState(a)}}Language.state=StateField.define({create:LanguageState.init,update(o,e){for(let s of e.effects)if(s.is(Language.setState))return s.value;return e.startState.facet(language)!=e.state.facet(language)?LanguageState.init(e.state):o.apply(e)}});let requestIdle=o=>{let e=setTimeout(()=>o(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(requestIdle=o=>{let e=-1,s=setTimeout(()=>{e=requestIdleCallback(o,{timeout:400})},100);return()=>e<0?clearTimeout(s):cancelIdleCallback(e)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let s=this.view.state.field(Language.state).context;(s.updateViewport(e.view.viewport)||this.view.viewport.to>s.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(s)}scheduleWork(){if(this.working)return;let{state:e}=this.view,s=e.field(Language.state);(s.tree!=s.context.tree||!s.context.isDone(e.doc.length))&&(this.working=requestIdle(this.work))}work(e){this.working=null;let s=Date.now();if(this.chunkEnd<s&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=s+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:a,viewport:{to:l}}=this.view,u=a.field(Language.state);if(u.tree==u.context.tree&&u.context.isDone(l+1e5))return;let c=Date.now()+Math.min(this.chunkBudget,100,e&&!isInputPending?Math.max(25,e.timeRemaining()-5):1e9),d=u.context.treeLen<l&&a.doc.length>l+1e3,h=u.context.work(()=>isInputPending&&isInputPending()||Date.now()>c,l+(d?0:1e5));this.chunkBudget-=Date.now()-s,(h||this.chunkBudget<=0)&&(u.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(u.context))})),this.chunkBudget>0&&!(h&&!d)&&this.scheduleWork(),this.checkAsyncSchedule(u.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(s=>logException(this.view.state,s)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(o){return o.length?o[0]:null},enables:o=>[Language.state,parseWorker,EditorView.contentAttributes.compute([o],e=>{let s=e.facet(o);return s&&s.name?{"data-language":s.name}:{}})]});class LanguageSupport{constructor(e,s=[]){this.language=e,this.support=s,this.extension=[e,s]}}class LanguageDescription{constructor(e,s,a,l,u,c=void 0){this.name=e,this.alias=s,this.extensions=a,this.filename=l,this.loadFunc=u,this.support=c,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:s,support:a}=e;if(!s){if(!a)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");s=()=>Promise.resolve(a)}return new LanguageDescription(e.name,(e.alias||[]).concat(e.name).map(l=>l.toLowerCase()),e.extensions||[],e.filename,s,a)}static matchFilename(e,s){for(let l of e)if(l.filename&&l.filename.test(s))return l;let a=/\.([^.]+)$/.exec(s);if(a){for(let l of e)if(l.extensions.indexOf(a[1])>-1)return l}return null}static matchLanguageName(e,s,a=!0){s=s.toLowerCase();for(let l of e)if(l.alias.some(u=>u==s))return l;if(a)for(let l of e)for(let u of l.alias){let c=s.indexOf(u);if(c>-1&&(u.length>2||!/\w/.test(s[c-1])&&!/\w/.test(s[c+u.length])))return l}return null}}const indentService=Facet.define(),indentUnit=Facet.define({combine:o=>{if(!o.length)return"  ";let e=o[0];if(!e||/\S/.test(e)||Array.from(e).some(s=>s!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(o[0]));return e}});function getIndentUnit(o){let e=o.facet(indentUnit);return e.charCodeAt(0)==9?o.tabSize*e.length:e.length}function indentString(o,e){let s="",a=o.tabSize,l=o.facet(indentUnit)[0];if(l=="	"){for(;e>=a;)s+="	",e-=a;l=" "}for(let u=0;u<e;u++)s+=l;return s}function getIndentation(o,e){o instanceof EditorState&&(o=new IndentContext(o));for(let a of o.state.facet(indentService)){let l=a(o,e);if(l!==void 0)return l}let s=syntaxTree(o.state);return s.length>=e?syntaxIndentation(o,s,e):null}class IndentContext{constructor(e,s={}){this.state=e,this.options=s,this.unit=getIndentUnit(e)}lineAt(e,s=1){let a=this.state.doc.lineAt(e),{simulateBreak:l,simulateDoubleBreak:u}=this.options;return l!=null&&l>=a.from&&l<=a.to?u&&l==e?{text:"",from:e}:(s<0?l<e:l<=e)?{text:a.text.slice(l-a.from),from:l}:{text:a.text.slice(0,l-a.from),from:a.from}:a}textAfterPos(e,s=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:a,from:l}=this.lineAt(e,s);return a.slice(e-l,Math.min(a.length,e+100-l))}column(e,s=1){let{text:a,from:l}=this.lineAt(e,s),u=this.countColumn(a,e-l),c=this.options.overrideIndentation?this.options.overrideIndentation(l):-1;return c>-1&&(u+=c-this.countColumn(a,a.search(/\S|$/))),u}countColumn(e,s=e.length){return countColumn(e,this.state.tabSize,s)}lineIndent(e,s=1){let{text:a,from:l}=this.lineAt(e,s),u=this.options.overrideIndentation;if(u){let c=u(l);if(c>-1)return c}return this.countColumn(a,a.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(o,e,s){let a=e.resolveStack(s),l=e.resolveInner(s,-1).resolve(s,0).enterUnfinishedNodesBefore(s);if(l!=a.node){let u=[];for(let c=l;c&&!(c.from<a.node.from||c.to>a.node.to||c.from==a.node.from&&c.type==a.node.type);c=c.parent)u.push(c);for(let c=u.length-1;c>=0;c--)a={node:u[c],next:a}}return indentFor(a,o,s)}function indentFor(o,e,s){for(let a=o;a;a=a.next){let l=indentStrategy(a.node);if(l)return l(TreeIndentContext.create(e,s,a))}return 0}function ignoreClosed(o){return o.pos==o.options.simulateBreak&&o.options.simulateDoubleBreak}function indentStrategy(o){let e=o.type.prop(indentNodeProp);if(e)return e;let s=o.firstChild,a;if(s&&(a=s.type.prop(NodeProp.closedBy))){let l=o.lastChild,u=l&&a.indexOf(l.name)>-1;return c=>delimitedStrategy(c,!0,1,void 0,u&&!ignoreClosed(c)?l.from:void 0)}return o.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(e,s,a){super(e.state,e.options),this.base=e,this.pos=s,this.context=a}get node(){return this.context.node}static create(e,s,a){return new TreeIndentContext(e,s,a)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let s=this.state.doc.lineAt(e.from);for(;;){let a=e.resolve(s.from);for(;a.parent&&a.parent.from==a.from;)a=a.parent;if(isParent(a,e))break;s=this.state.doc.lineAt(a.from)}return this.lineIndent(s.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(o,e){for(let s=e;s;s=s.parent)if(o==s)return!0;return!1}function bracketedAligned(o){let e=o.node,s=e.childAfter(e.from),a=e.lastChild;if(!s)return null;let l=o.options.simulateBreak,u=o.state.doc.lineAt(s.from),c=l==null||l<=u.from?u.to:Math.min(u.to,l);for(let d=s.to;;){let h=e.childAfter(d);if(!h||h==a)return null;if(!h.type.isSkipped){if(h.from>=c)return null;let p=/^ */.exec(u.text.slice(s.to-u.from))[0].length;return{from:s.from,to:s.to+p}}d=h.to}}function delimitedIndent({closing:o,align:e=!0,units:s=1}){return a=>delimitedStrategy(a,e,s,o)}function delimitedStrategy(o,e,s,a,l){let u=o.textAfter,c=u.match(/^\s*/)[0].length,d=a&&u.slice(c,c+a.length)==a||l==o.pos+c,h=e?bracketedAligned(o):null;return h?d?o.column(h.from):o.column(h.to):o.baseIndent+(d?0:o.unit*s)}const flatIndent=o=>o.baseIndent;function continuedIndent({except:o,units:e=1}={}){return s=>{let a=o&&o.test(s.textAfter);return s.baseIndent+(a?0:e*s.unit)}}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(o){let e=o.firstChild,s=o.lastChild;return e&&e.to<s.from?{from:e.to,to:s.type.isError?o.to:s.from}:null}class HighlightStyle{constructor(e,s){this.specs=e;let a;function l(d){let h=StyleModule.newName();return(a||(a=Object.create(null)))["."+h]=d,h}const u=typeof s.all=="string"?s.all:s.all?l(s.all):void 0,c=s.scope;this.scope=c instanceof Language?d=>d.prop(languageDataProp)==c.data:c?d=>d==c:void 0,this.style=tagHighlighter(e.map(d=>({tag:d.tag,class:d.class||l(Object.assign({},d,{tag:null}))})),{all:u}).style,this.module=a?new StyleModule(a):null,this.themeType=s.themeType}static define(e,s){return new HighlightStyle(e,s||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(o){return o.length?[o[0]]:null}});function getHighlighters(o){let e=o.facet(highlighterFacet);return e.length?e:o.facet(fallbackHighlighter)}function syntaxHighlighting(o,e){let s=[treeHighlighter],a;return o instanceof HighlightStyle&&(o.module&&s.push(EditorView.styleModule.of(o.module)),a=o.themeType),a?s.push(highlighterFacet.computeN([EditorView.darkTheme],l=>l.facet(EditorView.darkTheme)==(a=="dark")?[o]:[])):s.push(highlighterFacet.of(o)),s}class TreeHighlighter{constructor(e){this.markCache=Object.create(null),this.tree=syntaxTree(e.state),this.decorations=this.buildDeco(e,getHighlighters(e.state)),this.decoratedTo=e.viewport.to}update(e){let s=syntaxTree(e.state),a=getHighlighters(e.state),l=a!=getHighlighters(e.startState),{viewport:u}=e.view,c=e.changes.mapPos(this.decoratedTo,1);s.length<u.to&&!l&&s.type==this.tree.type&&c>=u.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=c):(s!=this.tree||e.viewportChanged||l)&&(this.tree=s,this.decorations=this.buildDeco(e.view,a),this.decoratedTo=u.to)}buildDeco(e,s){if(!s||!this.tree.length)return Decoration.none;let a=new RangeSetBuilder;for(let{from:l,to:u}of e.visibleRanges)highlightTree(this.tree,s,(c,d,h)=>{a.add(c,d,this.markCache[h]||(this.markCache[h]=Decoration.mark({class:h})))},l,u);return a.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:o=>o.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags$1.meta,color:"#404740"},{tag:tags$1.link,textDecoration:"underline"},{tag:tags$1.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags$1.emphasis,fontStyle:"italic"},{tag:tags$1.strong,fontWeight:"bold"},{tag:tags$1.strikethrough,textDecoration:"line-through"},{tag:tags$1.keyword,color:"#708"},{tag:[tags$1.atom,tags$1.bool,tags$1.url,tags$1.contentSeparator,tags$1.labelName],color:"#219"},{tag:[tags$1.literal,tags$1.inserted],color:"#164"},{tag:[tags$1.string,tags$1.deleted],color:"#a11"},{tag:[tags$1.regexp,tags$1.escape,tags$1.special(tags$1.string)],color:"#e40"},{tag:tags$1.definition(tags$1.variableName),color:"#00f"},{tag:tags$1.local(tags$1.variableName),color:"#30a"},{tag:[tags$1.typeName,tags$1.namespace],color:"#085"},{tag:tags$1.className,color:"#167"},{tag:[tags$1.special(tags$1.variableName),tags$1.macroName],color:"#256"},{tag:tags$1.definition(tags$1.propertyName),color:"#00c"},{tag:tags$1.comment,color:"#940"},{tag:tags$1.invalid,color:"#f00"}]),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingHandle=new NodeProp;function matchingNodes(o,e,s){let a=o.prop(e<0?NodeProp.openedBy:NodeProp.closedBy);if(a)return a;if(o.name.length==1){let l=s.indexOf(o.name);if(l>-1&&l%2==(e<0?1:0))return[s[l+e]]}return null}function findHandle(o){let e=o.type.prop(bracketMatchingHandle);return e?e(o.node):o}function matchBrackets(o,e,s,a={}){let l=a.maxScanDistance||DefaultScanDist,u=a.brackets||DefaultBrackets,c=syntaxTree(o),d=c.resolveInner(e,s);for(let h=d;h;h=h.parent){let p=matchingNodes(h.type,s,u);if(p&&h.from<h.to){let m=findHandle(h);if(m&&(s>0?e>=m.from&&e<m.to:e>m.from&&e<=m.to))return matchMarkedBrackets(o,e,s,h,m,p,u)}}return matchPlainBrackets(o,e,s,c,d.type,l,u)}function matchMarkedBrackets(o,e,s,a,l,u,c){let d=a.parent,h={from:l.from,to:l.to},p=0,m=d==null?void 0:d.cursor();if(m&&(s<0?m.childBefore(a.from):m.childAfter(a.to)))do if(s<0?m.to<=a.from:m.from>=a.to){if(p==0&&u.indexOf(m.type.name)>-1&&m.from<m.to){let g=findHandle(m);return{start:h,end:g?{from:g.from,to:g.to}:void 0,matched:!0}}else if(matchingNodes(m.type,s,c))p++;else if(matchingNodes(m.type,-s,c)){if(p==0){let g=findHandle(m);return{start:h,end:g&&g.from<g.to?{from:g.from,to:g.to}:void 0,matched:!1}}p--}}while(s<0?m.prevSibling():m.nextSibling());return{start:h,matched:!1}}function matchPlainBrackets(o,e,s,a,l,u,c){let d=s<0?o.sliceDoc(e-1,e):o.sliceDoc(e,e+1),h=c.indexOf(d);if(h<0||h%2==0!=s>0)return null;let p={from:s<0?e-1:e,to:s>0?e+1:e},m=o.doc.iterRange(e,s>0?o.doc.length:0),g=0;for(let y=0;!m.next().done&&y<=u;){let A=m.value;s<0&&(y+=A.length);let T=e+y*s;for(let E=s>0?0:A.length-1,v=s>0?A.length:-1;E!=v;E+=s){let _=c.indexOf(A[E]);if(!(_<0||a.resolveInner(T+E,1).type!=l))if(_%2==0==s>0)g++;else{if(g==1)return{start:p,end:{from:T+E,to:T+E+1},matched:_>>1==h>>1};g--}}s>0&&(y+=A.length)}return m.done?{start:p,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[o,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[o]=createTokenType(noTokens,e);function warnForPart(o,e){warned.indexOf(o)>-1||(warned.push(o),console.warn(e))}function createTokenType(o,e){let s=[];for(let d of e.split(" ")){let h=[];for(let p of d.split(".")){let m=o[p]||tags$1[p];m?typeof m=="function"?h.length?h=h.map(m):warnForPart(p,`Modifier ${p} used at start of tag`):h.length?warnForPart(p,`Tag ${p} used as modifier`):h=Array.isArray(m)?m:[m]:warnForPart(p,`Unknown highlighting tag ${p}`)}for(let p of h)s.push(p)}if(!s.length)return 0;let a=e.replace(/ /g,"_"),l=a+" "+s.map(d=>d.id),u=byTag[l];if(u)return u.id;let c=byTag[l]=NodeType.define({id:typeArray.length,name:a,props:[styleTags({[a]:s})]});return typeArray.push(c),c.id}Direction.RTL,Direction.LTR;class CompletionContext{constructor(e,s,a,l){this.state=e,this.pos=s,this.explicit=a,this.view=l,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let s=syntaxTree(this.state).resolveInner(this.pos,-1);for(;s&&e.indexOf(s.name)<0;)s=s.parent;return s?{from:s.from,to:this.pos,text:this.state.sliceDoc(s.from,this.pos),type:s.type}:null}matchBefore(e){let s=this.state.doc.lineAt(this.pos),a=Math.max(s.from,this.pos-250),l=s.text.slice(a-s.from,this.pos-s.from),u=l.search(ensureAnchor(e,!1));return u<0?null:{from:a+u,to:this.pos,text:l.slice(u)}}get aborted(){return this.abortListeners==null}addEventListener(e,s,a){e=="abort"&&this.abortListeners&&(this.abortListeners.push(s),a&&a.onDocChange&&(this.abortOnDocChange=!0))}}function toSet(o){let e=Object.keys(o).join(""),s=/\w/.test(e);return s&&(e=e.replace(/\w/g,"")),`[${s?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(o){let e=Object.create(null),s=Object.create(null);for(let{label:l}of o){e[l[0]]=!0;for(let u=1;u<l.length;u++)s[l[u]]=!0}let a=toSet(e)+toSet(s)+"*$";return[new RegExp("^"+a),new RegExp(a)]}function completeFromList(o){let e=o.map(l=>typeof l=="string"?{label:l}:l),[s,a]=e.every(l=>/^\w+$/.test(l.label))?[/\w*$/,/\w+$/]:prefixMatch(e);return l=>{let u=l.matchBefore(a);return u||l.explicit?{from:u?u.from:l.pos,options:e,validFor:s}:null}}function ifNotIn(o,e){return s=>{for(let a=syntaxTree(s.state).resolveInner(s.pos,-1);a;a=a.parent){if(o.indexOf(a.name)>-1)return null;if(a.type.isTop)break}return e(s)}}class Option{constructor(e,s,a,l){this.completion=e,this.source=s,this.match=a,this.score=l}}function cur(o){return o.selection.main.from}function ensureAnchor(o,e){var s;let{source:a}=o,l=e&&a[0]!="^",u=a[a.length-1]!="$";return!l&&!u?o:new RegExp(`${l?"^":""}(?:${a})${u?"$":""}`,(s=o.flags)!==null&&s!==void 0?s:o.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(o,e,s,a){let{main:l}=o.selection,u=s-l.from,c=a-l.from;return{...o.changeByRange(d=>{if(d!=l&&s!=a&&o.sliceDoc(d.from+u,d.from+c)!=o.sliceDoc(s,a))return{range:d};let h=o.toText(e);return{changes:{from:d.from+u,to:a==l.from?d.to:d.from+c,insert:h},range:EditorSelection.cursor(d.from+u+h.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const SourceCache=new WeakMap;function asSource(o){if(!Array.isArray(o))return o;let e=SourceCache.get(o);return e||SourceCache.set(o,e=completeFromList(o)),e}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let s=0;s<e.length;){let a=codePointAt(e,s),l=codePointSize(a);this.chars.push(a);let u=e.slice(s,s+l),c=u.toUpperCase();this.folded.push(codePointAt(c==u?u.toLowerCase():c,0)),s+=l}this.astral=e.length!=this.chars.length}ret(e,s){return this.score=e,this.matched=s,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:s,folded:a,any:l,precise:u,byWord:c}=this;if(s.length==1){let w=codePointAt(e,0),R=codePointSize(w),k=R==e.length?0:-100;if(w!=s[0])if(w==a[0])k+=-200;else return null;return this.ret(k,[0,R])}let d=e.indexOf(this.pattern);if(d==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=s.length,p=0;if(d<0){for(let w=0,R=Math.min(e.length,200);w<R&&p<h;){let k=codePointAt(e,w);(k==s[p]||k==a[p])&&(l[p++]=w),w+=codePointSize(k)}if(p<h)return null}let m=0,g=0,y=!1,A=0,T=-1,E=-1,v=/[a-z]/.test(e),_=!0;for(let w=0,R=Math.min(e.length,200),k=0;w<R&&g<h;){let I=codePointAt(e,w);d<0&&(m<h&&I==s[m]&&(u[m++]=w),A<h&&(I==s[A]||I==a[A]?(A==0&&(T=w),E=w+1,A++):A=0));let P,N=I<255?I>=48&&I<=57||I>=97&&I<=122?2:I>=65&&I<=90?1:0:(P=fromCodePoint(I))!=P.toLowerCase()?1:P!=P.toUpperCase()?2:0;(!w||N==1&&v||k==0&&N!=0)&&(s[g]==I||a[g]==I&&(y=!0)?c[g++]=w:c.length&&(_=!1)),k=N,w+=codePointSize(I)}return g==h&&c[0]==0&&_?this.result(-100+(y?-200:0),c,e):A==h&&T==0?this.ret(-200-e.length+(E==e.length?0:-100),[0,E]):d>-1?this.ret(-700-e.length,[d,d+this.pattern.length]):A==h?this.ret(-900-e.length,[T,E]):g==h?this.result(-100+(y?-200:0)+-700+(_?0:-1100),c,e):s.length==2?null:this.result((l[0]?-700:0)+-200+-1100,l,e)}result(e,s,a){let l=[],u=0;for(let c of s){let d=c+(this.astral?codePointSize(codePointAt(a,c)):1);u&&l[u-1]==c?l[u-1]=d:(l[u++]=c,l[u++]=d)}return this.ret(e-a.length,l)}}class StrictMatcher{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let s=e.slice(0,this.pattern.length),a=s==this.pattern?0:s.toLowerCase()==this.folded?-200:null;return a==null?null:(this.matched=[0,s.length],this.score=a+(e.length==this.pattern.length?0:-100),this)}}const completionConfig=Facet.define({combine(o){return combineConfig(o,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:!1,compareCompletions:(e,s)=>(e.sortText||e.label).localeCompare(s.sortText||s.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,s)=>e&&s,closeOnBlur:(e,s)=>e&&s,icons:(e,s)=>e&&s,tooltipClass:(e,s)=>a=>joinClass(e(a),s(a)),optionClass:(e,s)=>a=>joinClass(e(a),s(a)),addToOptions:(e,s)=>e.concat(s),filterStrict:(e,s)=>e||s})}});function joinClass(o,e){return o?e?o+" "+e:o:e}function defaultPositionInfo(o,e,s,a,l,u){let c=o.textDirection==Direction.RTL,d=c,h=!1,p="top",m,g,y=e.left-l.left,A=l.right-e.right,T=a.right-a.left,E=a.bottom-a.top;if(d&&y<Math.min(T,A)?d=!1:!d&&A<Math.min(T,y)&&(d=!0),T<=(d?y:A))m=Math.max(l.top,Math.min(s.top,l.bottom-E))-e.top,g=Math.min(400,d?y:A);else{h=!0,g=Math.min(400,(c?e.right:l.right-e.left)-30);let w=l.bottom-e.bottom;w>=E||w>e.top?m=s.bottom-e.top:(p="bottom",m=e.bottom-s.top)}let v=(e.bottom-e.top)/u.offsetHeight,_=(e.right-e.left)/u.offsetWidth;return{style:`${p}: ${m/v}px; max-width: ${g/_}px`,class:"cm-completionInfo-"+(h?c?"left-narrow":"right-narrow":d?"left":"right")}}function optionContent(o){let e=o.addToOptions.slice();return o.icons&&e.push({render(s){let a=document.createElement("div");return a.classList.add("cm-completionIcon"),s.type&&a.classList.add(...s.type.split(/\s+/g).map(l=>"cm-completionIcon-"+l)),a.setAttribute("aria-hidden","true"),a},position:20}),e.push({render(s,a,l,u){let c=document.createElement("span");c.className="cm-completionLabel";let d=s.displayLabel||s.label,h=0;for(let p=0;p<u.length;){let m=u[p++],g=u[p++];m>h&&c.appendChild(document.createTextNode(d.slice(h,m)));let y=c.appendChild(document.createElement("span"));y.appendChild(document.createTextNode(d.slice(m,g))),y.className="cm-completionMatchedText",h=g}return h<d.length&&c.appendChild(document.createTextNode(d.slice(h))),c},position:50},{render(s){if(!s.detail)return null;let a=document.createElement("span");return a.className="cm-completionDetail",a.textContent=s.detail,a},position:80}),e.sort((s,a)=>s.position-a.position).map(s=>s.render)}function rangeAroundSelected(o,e,s){if(o<=s)return{from:0,to:o};if(e<0&&(e=0),e<=o>>1){let l=Math.floor(e/s);return{from:l*s,to:(l+1)*s}}let a=Math.floor((o-e)/s);return{from:o-(a+1)*s,to:o-a*s}}class CompletionTooltip{constructor(e,s,a){this.view=e,this.stateField=s,this.applyCompletion=a,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let l=e.state.field(s),{options:u,selected:c}=l.open,d=e.state.facet(completionConfig);this.optionContent=optionContent(d),this.optionClass=d.optionClass,this.tooltipClass=d.tooltipClass,this.range=rangeAroundSelected(u.length,c,d.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",h=>{let{options:p}=e.state.field(s).open;for(let m=h.target,g;m&&m!=this.dom;m=m.parentNode)if(m.nodeName=="LI"&&(g=/-(\d+)$/.exec(m.id))&&+g[1]<p.length){this.applyCompletion(e,p[+g[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let p=e.state.field(this.stateField,!1);p&&p.tooltip&&e.state.facet(completionConfig).closeOnBlur&&h.relatedTarget!=e.contentDOM&&e.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(u,l.id)}mount(){this.updateSel()}showOptions(e,s){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,s,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var s;let a=e.state.field(this.stateField),l=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),a!=l){let{options:u,selected:c,disabled:d}=a.open;(!l.open||l.open.options!=u)&&(this.range=rangeAroundSelected(u.length,c,e.state.facet(completionConfig).maxRenderedOptions),this.showOptions(u,a.id)),this.updateSel(),d!=((s=l.open)===null||s===void 0?void 0:s.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!d)}}updateTooltipClass(e){let s=this.tooltipClass(e);if(s!=this.currentClass){for(let a of this.currentClass.split(" "))a&&this.dom.classList.remove(a);for(let a of s.split(" "))a&&this.dom.classList.add(a);this.currentClass=s}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),s=e.open;(s.selected>-1&&s.selected<this.range.from||s.selected>=this.range.to)&&(this.range=rangeAroundSelected(s.options.length,s.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(s.options,e.id));let a=this.updateSelectedOption(s.selected);if(a){this.destroyInfo();let{completion:l}=s.options[s.selected],{info:u}=l;if(!u)return;let c=typeof u=="string"?document.createTextNode(u):u(l);if(!c)return;"then"in c?c.then(d=>{d&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(d,l)}).catch(d=>logException(this.view.state,d,"completion info")):(this.addInfoPane(c,l),a.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,s){this.destroyInfo();let a=this.info=document.createElement("div");if(a.className="cm-tooltip cm-completionInfo",a.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)a.appendChild(e),this.infoDestroy=null;else{let{dom:l,destroy:u}=e;a.appendChild(l),this.infoDestroy=u||null}this.dom.appendChild(a),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let s=null;for(let a=this.list.firstChild,l=this.range.from;a;a=a.nextSibling,l++)a.nodeName!="LI"||!a.id?l--:l==e?a.hasAttribute("aria-selected")||(a.setAttribute("aria-selected","true"),s=a):a.hasAttribute("aria-selected")&&(a.removeAttribute("aria-selected"),a.removeAttribute("aria-describedby"));return s&&scrollIntoView(this.list,s),s}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let s=this.dom.getBoundingClientRect(),a=this.info.getBoundingClientRect(),l=e.getBoundingClientRect(),u=this.space;if(!u){let c=this.dom.ownerDocument.documentElement;u={left:0,top:0,right:c.clientWidth,bottom:c.clientHeight}}return l.top>Math.min(u.bottom,s.bottom)-10||l.bottom<Math.max(u.top,s.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,s,l,a,u,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,s,a){const l=document.createElement("ul");l.id=s,l.setAttribute("role","listbox"),l.setAttribute("aria-expanded","true"),l.setAttribute("aria-label",this.view.state.phrase("Completions")),l.addEventListener("mousedown",c=>{c.target==l&&c.preventDefault()});let u=null;for(let c=a.from;c<a.to;c++){let{completion:d,match:h}=e[c],{section:p}=d;if(p){let y=typeof p=="string"?p:p.name;if(y!=u&&(c>a.from||a.from==0))if(u=y,typeof p!="string"&&p.header)l.appendChild(p.header(p));else{let A=l.appendChild(document.createElement("completion-section"));A.textContent=y}}const m=l.appendChild(document.createElement("li"));m.id=s+"-"+c,m.setAttribute("role","option");let g=this.optionClass(d);g&&(m.className=g);for(let y of this.optionContent){let A=y(d,this.view.state,this.view,h);A&&m.appendChild(A)}}return a.from&&l.classList.add("cm-completionListIncompleteTop"),a.to<e.length&&l.classList.add("cm-completionListIncompleteBottom"),l}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(o,e){return s=>new CompletionTooltip(s,o,e)}function scrollIntoView(o,e){let s=o.getBoundingClientRect(),a=e.getBoundingClientRect(),l=s.height/o.offsetHeight;a.top<s.top?o.scrollTop-=(s.top-a.top)/l:a.bottom>s.bottom&&(o.scrollTop+=(a.bottom-s.bottom)/l)}function score(o){return(o.boost||0)*100+(o.apply?10:0)+(o.info?5:0)+(o.type?1:0)}function sortOptions(o,e){let s=[],a=null,l=null,u=m=>{s.push(m);let{section:g}=m.completion;if(g){a||(a=[]);let y=typeof g=="string"?g:g.name;a.some(A=>A.name==y)||a.push(typeof g=="string"?{name:y}:g)}},c=e.facet(completionConfig);for(let m of o)if(m.hasResult()){let g=m.result.getMatch;if(m.result.filter===!1)for(let y of m.result.options)u(new Option(y,m.source,g?g(y):[],1e9-s.length));else{let y=e.sliceDoc(m.from,m.to),A,T=c.filterStrict?new StrictMatcher(y):new FuzzyMatcher(y);for(let E of m.result.options)if(A=T.match(E.label)){let v=E.displayLabel?g?g(E,A.matched):[]:A.matched,_=A.score+(E.boost||0);if(u(new Option(E,m.source,v,_)),typeof E.section=="object"&&E.section.rank==="dynamic"){let{name:w}=E.section;l||(l=Object.create(null)),l[w]=Math.max(_,l[w]||-1e9)}}}}if(a){let m=Object.create(null),g=0,y=(A,T)=>(A.rank==="dynamic"&&T.rank==="dynamic"?l[T.name]-l[A.name]:0)||(typeof A.rank=="number"?A.rank:1e9)-(typeof T.rank=="number"?T.rank:1e9)||(A.name<T.name?-1:1);for(let A of a.sort(y))g-=1e5,m[A.name]=g;for(let A of s){let{section:T}=A.completion;T&&(A.score+=m[typeof T=="string"?T:T.name])}}let d=[],h=null,p=c.compareCompletions;for(let m of s.sort((g,y)=>y.score-g.score||p(g.completion,y.completion))){let g=m.completion;!h||h.label!=g.label||h.detail!=g.detail||h.type!=null&&g.type!=null&&h.type!=g.type||h.apply!=g.apply||h.boost!=g.boost?d.push(m):score(m.completion)>score(h)&&(d[d.length-1]=m),h=m.completion}return d}class CompletionDialog{constructor(e,s,a,l,u,c){this.options=e,this.attrs=s,this.tooltip=a,this.timestamp=l,this.selected=u,this.disabled=c}setSelected(e,s){return e==this.selected||e>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(s,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,s,a,l,u,c){if(l&&!c&&e.some(p=>p.isPending))return l.setDisabled();let d=sortOptions(e,s);if(!d.length)return l&&e.some(p=>p.isPending)?l.setDisabled():null;let h=s.facet(completionConfig).selectOnOpen?0:-1;if(l&&l.selected!=h&&l.selected!=-1){let p=l.options[l.selected].completion;for(let m=0;m<d.length;m++)if(d[m].completion==p){h=m;break}}return new CompletionDialog(d,makeAttrs(a,h),{pos:e.reduce((p,m)=>m.hasResult()?Math.min(p,m.from):p,1e8),create:createTooltip,above:u.aboveCursor},l?l.timestamp:Date.now(),h,!1)}map(e){return new CompletionDialog(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new CompletionDialog(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class CompletionState{constructor(e,s,a){this.active=e,this.id=s,this.open=a}static start(){return new CompletionState(none$2,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:s}=e,a=s.facet(completionConfig),u=(a.override||s.languageDataAt("autocomplete",cur(s)).map(asSource)).map(h=>(this.active.find(m=>m.source==h)||new ActiveSource(h,this.active.some(m=>m.state!=0)?1:0)).update(e,a));u.length==this.active.length&&u.every((h,p)=>h==this.active[p])&&(u=this.active);let c=this.open,d=e.effects.some(h=>h.is(setActiveEffect));c&&e.docChanged&&(c=c.map(e.changes)),e.selection||u.some(h=>h.hasResult()&&e.changes.touchesRange(h.from,h.to))||!sameResults(u,this.active)||d?c=CompletionDialog.build(u,s,this.id,c,a,d):c&&c.disabled&&!u.some(h=>h.isPending)&&(c=null),!c&&u.every(h=>!h.isPending)&&u.some(h=>h.hasResult())&&(u=u.map(h=>h.hasResult()?new ActiveSource(h.source,0):h));for(let h of e.effects)h.is(setSelectedEffect)&&(c=c&&c.setSelected(h.value,this.id));return u==this.active&&c==this.open?this:new CompletionState(u,this.id,c)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?baseAttrs:noAttrs}}function sameResults(o,e){if(o==e)return!0;for(let s=0,a=0;;){for(;s<o.length&&!o[s].hasResult();)s++;for(;a<e.length&&!e[a].hasResult();)a++;let l=s==o.length,u=a==e.length;if(l||u)return l==u;if(o[s++].result!=e[a++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"},noAttrs={};function makeAttrs(o,e){let s={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":o};return e>-1&&(s["aria-activedescendant"]=o+"-"+e),s}const none$2=[];function getUpdateType(o,e){if(o.isUserEvent("input.complete")){let a=o.annotation(pickedCompletion);if(a&&e.activateOnCompletion(a))return 12}let s=o.isUserEvent("input.type");return s&&e.activateOnTyping?5:s?1:o.isUserEvent("delete.backward")?2:o.selection?8:o.docChanged?16:0}class ActiveSource{constructor(e,s,a=!1){this.source=e,this.state=s,this.explicit=a}hasResult(){return!1}get isPending(){return this.state==1}update(e,s){let a=getUpdateType(e,s),l=this;(a&8||a&16&&this.touches(e))&&(l=new ActiveSource(l.source,0)),a&4&&l.state==0&&(l=new ActiveSource(this.source,1)),l=l.updateFor(e,a);for(let u of e.effects)if(u.is(startCompletionEffect))l=new ActiveSource(l.source,1,u.value);else if(u.is(closeCompletionEffect))l=new ActiveSource(l.source,0);else if(u.is(setActiveEffect))for(let c of u.value)c.source==l.source&&(l=c);return l}updateFor(e,s){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(cur(e.state))}}class ActiveResult extends ActiveSource{constructor(e,s,a,l,u,c){super(e,3,s),this.limit=a,this.result=l,this.from=u,this.to=c}hasResult(){return!0}updateFor(e,s){var a;if(!(s&3))return this.map(e.changes);let l=this.result;l.map&&!e.changes.empty&&(l=l.map(l,e.changes));let u=e.changes.mapPos(this.from),c=e.changes.mapPos(this.to,1),d=cur(e.state);if(d>c||!l||s&2&&(cur(e.startState)==this.from||d<this.limit))return new ActiveSource(this.source,s&4?1:0);let h=e.changes.mapPos(this.limit);return checkValid(l.validFor,e.state,u,c)?new ActiveResult(this.source,this.explicit,h,l,u,c):l.update&&(l=l.update(l,u,c,new CompletionContext(e.state,d,!1)))?new ActiveResult(this.source,this.explicit,h,l,l.from,(a=l.to)!==null&&a!==void 0?a:cur(e.state)):new ActiveSource(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new ActiveResult(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ActiveSource(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function checkValid(o,e,s,a){if(!o)return!1;let l=e.sliceDoc(s,a);return typeof o=="function"?o(l,s,a,e):ensureAnchor(o,!0).test(l)}const setActiveEffect=StateEffect.define({map(o,e){return o.map(s=>s.map(e))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(o,e){return o.update(e)},provide:o=>[showTooltip.from(o,e=>e.tooltip),EditorView.contentAttributes.from(o,e=>e.attrs)]});function applyCompletion(o,e){const s=e.completion.apply||e.completion.label;let a=o.state.field(completionState).active.find(l=>l.source==e.source);return a instanceof ActiveResult?(typeof s=="string"?o.dispatch({...insertCompletionText(o.state,s,a.from,a.to),annotations:pickedCompletion.of(e.completion)}):s(o,e.completion,a.from,a.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(o,e="option"){return s=>{let a=s.state.field(completionState,!1);if(!a||!a.open||a.open.disabled||Date.now()-a.open.timestamp<s.state.facet(completionConfig).interactionDelay)return!1;let l=1,u;e=="page"&&(u=getTooltip(s,a.open.tooltip))&&(l=Math.max(2,Math.floor(u.dom.offsetHeight/u.dom.querySelector("li").offsetHeight)-1));let{length:c}=a.open.options,d=a.open.selected>-1?a.open.selected+l*(o?1:-1):o?0:c-1;return d<0?d=e=="page"?0:c-1:d>=c&&(d=e=="page"?c-1:0),s.dispatch({effects:setSelectedEffect.of(d)}),!0}}const acceptCompletion=o=>{let e=o.state.field(completionState,!1);return o.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<o.state.facet(completionConfig).interactionDelay?!1:applyCompletion(o,e.open.options[e.open.selected])},startCompletion=o=>o.state.field(completionState,!1)?(o.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=o=>{let e=o.state.field(completionState,!1);return!e||!e.active.some(s=>s.state!=0)?!1:(o.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(e,s){this.active=e,this.context=s,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(o){this.view=o,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of o.state.field(completionState).active)e.isPending&&this.startQuery(e)}update(o){let e=o.state.field(completionState),s=o.state.facet(completionConfig);if(!o.selectionSet&&!o.docChanged&&o.startState.field(completionState)==e)return;let a=o.transactions.some(u=>{let c=getUpdateType(u,s);return c&8||(u.selection||u.docChanged)&&!(c&3)});for(let u=0;u<this.running.length;u++){let c=this.running[u];if(a||c.context.abortOnDocChange&&o.docChanged||c.updates.length+o.transactions.length>MaxUpdateCount&&Date.now()-c.time>MinAbortTime){for(let d of c.context.abortListeners)try{d()}catch(h){logException(this.view.state,h)}c.context.abortListeners=null,this.running.splice(u--,1)}else c.updates.push(...o.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),o.transactions.some(u=>u.effects.some(c=>c.is(startCompletionEffect)))&&(this.pendingStart=!0);let l=this.pendingStart?50:s.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(u=>u.isPending&&!this.running.some(c=>c.active.source==u.source))?setTimeout(()=>this.startUpdate(),l):-1,this.composing!=0)for(let u of o.transactions)u.isUserEvent("input.type")?this.composing=2:this.composing==2&&u.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:o}=this.view,e=o.field(completionState);for(let s of e.active)s.isPending&&!this.running.some(a=>a.active.source==s.source)&&this.startQuery(s);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}startQuery(o){let{state:e}=this.view,s=cur(e),a=new CompletionContext(e,s,o.explicit,this.view),l=new RunningQuery(o,a);this.running.push(l),Promise.resolve(o.source(a)).then(u=>{l.context.aborted||(l.done=u||null,this.scheduleAccept())},u=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,u)})}scheduleAccept(){this.running.every(o=>o.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var o;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],s=this.view.state.facet(completionConfig),a=this.view.state.field(completionState);for(let l=0;l<this.running.length;l++){let u=this.running[l];if(u.done===void 0)continue;if(this.running.splice(l--,1),u.done){let d=cur(u.updates.length?u.updates[0].startState:this.view.state),h=Math.min(d,u.done.from+(u.active.explicit?0:1)),p=new ActiveResult(u.active.source,u.active.explicit,h,u.done,u.done.from,(o=u.done.to)!==null&&o!==void 0?o:d);for(let m of u.updates)p=p.update(m,s);if(p.hasResult()){e.push(p);continue}}let c=a.active.find(d=>d.source==u.active.source);if(c&&c.isPending)if(u.done==null){let d=new ActiveSource(u.active.source,0);for(let h of u.updates)d=d.update(h,s);d.isPending||e.push(d)}else this.startQuery(c)}(e.length||a.open&&a.open.disabled)&&this.view.dispatch({effects:setActiveEffect.of(e)})}},{eventHandlers:{blur(o){let e=this.view.state.field(completionState,!1);if(e&&e.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let s=e.open&&getTooltip(this.view,e.open.tooltip);(!s||!s.dom.contains(o.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:closeCompletionEffect.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),windows=typeof navigator=="object"&&/Win/.test(navigator.platform),commitCharacters=Prec.highest(EditorView.domEventHandlers({keydown(o,e){let s=e.state.field(completionState,!1);if(!s||!s.open||s.open.disabled||s.open.selected<0||o.key.length>1||o.ctrlKey&&!(windows&&o.altKey)||o.metaKey)return!1;let a=s.open.options[s.open.selected],l=s.active.find(c=>c.source==a.source),u=a.completion.commitCharacters||l.result.commitCharacters;return u&&u.indexOf(o.key)>-1&&applyCompletion(e,a),!1}})),baseTheme$1=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(e,s,a,l){this.field=e,this.line=s,this.from=a,this.to=l}}class FieldRange{constructor(e,s,a){this.field=e,this.from=s,this.to=a}map(e){let s=e.mapPos(this.from,-1,MapMode.TrackDel),a=e.mapPos(this.to,1,MapMode.TrackDel);return s==null||a==null?null:new FieldRange(this.field,s,a)}}class Snippet{constructor(e,s){this.lines=e,this.fieldPositions=s}instantiate(e,s){let a=[],l=[s],u=e.doc.lineAt(s),c=/^\s*/.exec(u.text)[0];for(let h of this.lines){if(a.length){let p=c,m=/^\t*/.exec(h)[0].length;for(let g=0;g<m;g++)p+=e.facet(indentUnit);l.push(s+p.length-m),h=p+h.slice(m)}a.push(h),s+=h.length+1}let d=this.fieldPositions.map(h=>new FieldRange(h.field,l[h.line]+h.from,l[h.line]+h.to));return{text:a,ranges:d}}static parse(e){let s=[],a=[],l=[],u;for(let c of e.split(/\r\n?|\n/)){for(;u=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(c);){let d=u[1]?+u[1]:null,h=u[2]||u[3]||"",p=-1,m=h.replace(/\\[{}]/g,g=>g[1]);for(let g=0;g<s.length;g++)(d!=null?s[g].seq==d:m&&s[g].name==m)&&(p=g);if(p<0){let g=0;for(;g<s.length&&(d==null||s[g].seq!=null&&s[g].seq<d);)g++;s.splice(g,0,{seq:d,name:m}),p=g;for(let y of l)y.field>=p&&y.field++}for(let g of l)if(g.line==a.length&&g.from>u.index){let y=u[2]?3+(u[1]||"").length:2;g.from-=y,g.to-=y}l.push(new FieldPos(p,a.length,u.index,u.index+m.length)),c=c.slice(0,u.index)+h+c.slice(u.index+u[0].length)}c=c.replace(/\\([{}])/g,(d,h,p)=>{for(let m of l)m.line==a.length&&m.from>p&&(m.from--,m.to--);return h}),a.push(c)}return new Snippet(a,l)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let o=document.createElement("span");return o.className="cm-snippetFieldPosition",o}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(e,s){this.ranges=e,this.active=s,this.deco=Decoration.set(e.map(a=>(a.from==a.to?fieldMarker:fieldRange).range(a.from,a.to)),!0)}map(e){let s=[];for(let a of this.ranges){let l=a.map(e);if(!l)return null;s.push(l)}return new ActiveSnippet(s,this.active)}selectionInsideField(e){return e.ranges.every(s=>this.ranges.some(a=>a.field==this.active&&a.from<=s.from&&a.to>=s.to))}}const setActive=StateEffect.define({map(o,e){return o&&o.map(e)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(o,e){for(let s of e.effects){if(s.is(setActive))return s.value;if(s.is(moveToField)&&o)return new ActiveSnippet(o.ranges,s.value)}return o&&e.docChanged&&(o=o.map(e.changes)),o&&e.selection&&!o.selectionInsideField(e.selection)&&(o=null),o},provide:o=>EditorView.decorations.from(o,e=>e?e.deco:Decoration.none)});function fieldSelection(o,e){return EditorSelection.create(o.filter(s=>s.field==e).map(s=>EditorSelection.range(s.from,s.to)))}function snippet(o){let e=Snippet.parse(o);return(s,a,l,u)=>{let{text:c,ranges:d}=e.instantiate(s.state,l),{main:h}=s.state.selection,p={changes:{from:l,to:u==h.from?h.to:u,insert:Text.of(c)},scrollIntoView:!0,annotations:a?[pickedCompletion.of(a),Transaction.userEvent.of("input.complete")]:void 0};if(d.length&&(p.selection=fieldSelection(d,0)),d.some(m=>m.field>0)){let m=new ActiveSnippet(d,0),g=p.effects=[setActive.of(m)];s.state.field(snippetState,!1)===void 0&&g.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$1]))}s.dispatch(s.state.update(p))}}function moveField(o){return({state:e,dispatch:s})=>{let a=e.field(snippetState,!1);if(!a||o<0&&a.active==0)return!1;let l=a.active+o,u=o>0&&!a.ranges.some(c=>c.field==l+o);return s(e.update({selection:fieldSelection(a.ranges,l),effects:setActive.of(u?null:new ActiveSnippet(a.ranges,l)),scrollIntoView:!0})),!0}}const clearSnippet=({state:o,dispatch:e})=>o.field(snippetState,!1)?(e(o.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(o){return o.length?o[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],o=>o.facet(snippetKeymap)));function snippetCompletion(o,e){return{...e,apply:snippet(o)}}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(o,e){let s=e.state.field(snippetState,!1),a;if(!s||(a=e.posAtCoords({x:o.clientX,y:o.clientY}))==null)return!1;let l=s.ranges.find(u=>u.from<=a&&u.to>=a);return!l||l.field==s.active?!1:(e.dispatch({selection:fieldSelection(s.ranges,l.field),effects:setActive.of(s.ranges.some(u=>u.field>l.field)?new ActiveSnippet(s.ranges,l.field):null),scrollIntoView:!0}),!0)}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1,closedBracket.endSide=-1;function autocompletion(o={}){return[commitCharacters,completionState,completionConfig.of(o),completionPlugin,completionKeymapExt,baseTheme$1]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{mac:"Alt-`",run:startCompletion},{mac:"Alt-i",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],o=>o.facet(completionConfig).defaultKeymap?[completionKeymap]:[])),toggleComment=o=>{let{state:e}=o,s=e.doc.lineAt(e.selection.main.from),a=getConfig(o.state,s.from);return a.line?toggleLineComment(o):a.block?toggleBlockCommentByLine(o):!1};function command(o,e){return({state:s,dispatch:a})=>{if(s.readOnly)return!1;let l=o(e,s);return l?(a(s.update(l)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((o,e)=>changeBlockComment(o,e,selectedLineRanges(e)),0);function getConfig(o,e){let s=o.languageDataAt("commentTokens",e,1);return s.length?s[0]:{}}const SearchMargin=50;function findBlockComment(o,{open:e,close:s},a,l){let u=o.sliceDoc(a-SearchMargin,a),c=o.sliceDoc(l,l+SearchMargin),d=/\s*$/.exec(u)[0].length,h=/^\s*/.exec(c)[0].length,p=u.length-d;if(u.slice(p-e.length,p)==e&&c.slice(h,h+s.length)==s)return{open:{pos:a-d,margin:d&&1},close:{pos:l+h,margin:h&&1}};let m,g;l-a<=2*SearchMargin?m=g=o.sliceDoc(a,l):(m=o.sliceDoc(a,a+SearchMargin),g=o.sliceDoc(l-SearchMargin,l));let y=/^\s*/.exec(m)[0].length,A=/\s*$/.exec(g)[0].length,T=g.length-A-s.length;return m.slice(y,y+e.length)==e&&g.slice(T,T+s.length)==s?{open:{pos:a+y+e.length,margin:/\s/.test(m.charAt(y+e.length))?1:0},close:{pos:l-A-s.length,margin:/\s/.test(g.charAt(T-1))?1:0}}:null}function selectedLineRanges(o){let e=[];for(let s of o.selection.ranges){let a=o.doc.lineAt(s.from),l=s.to<=a.to?a:o.doc.lineAt(s.to);l.from>a.from&&l.from==s.to&&(l=s.to==a.to+1?a:o.doc.lineAt(s.to-1));let u=e.length-1;u>=0&&e[u].to>a.from?e[u].to=l.to:e.push({from:a.from+/^\s*/.exec(a.text)[0].length,to:l.to})}return e}function changeBlockComment(o,e,s=e.selection.ranges){let a=s.map(u=>getConfig(e,u.from).block);if(!a.every(u=>u))return null;let l=s.map((u,c)=>findBlockComment(e,a[c],u.from,u.to));if(o!=2&&!l.every(u=>u))return{changes:e.changes(s.map((u,c)=>l[c]?[]:[{from:u.from,insert:a[c].open+" "},{from:u.to,insert:" "+a[c].close}]))};if(o!=1&&l.some(u=>u)){let u=[];for(let c=0,d;c<l.length;c++)if(d=l[c]){let h=a[c],{open:p,close:m}=d;u.push({from:p.pos-h.open.length,to:p.pos+p.margin},{from:m.pos-m.margin,to:m.pos+h.close.length})}return{changes:u}}return null}function changeLineComment(o,e,s=e.selection.ranges){let a=[],l=-1;e:for(let{from:u,to:c}of s){let d=a.length,h=1e9,p;for(let m=u;m<=c;){let g=e.doc.lineAt(m);if(p==null&&(p=getConfig(e,g.from).line,!p))continue e;if(g.from>l&&(u==c||c>g.from)){l=g.from;let y=/^\s*/.exec(g.text)[0].length,A=y==g.length,T=g.text.slice(y,y+p.length)==p?y:-1;y<g.text.length&&y<h&&(h=y),a.push({line:g,comment:T,token:p,indent:y,empty:A,single:!1})}m=g.to+1}if(h<1e9)for(let m=d;m<a.length;m++)a[m].indent<a[m].line.text.length&&(a[m].indent=h);a.length==d+1&&(a[d].single=!0)}if(o!=2&&a.some(u=>u.comment<0&&(!u.empty||u.single))){let u=[];for(let{line:d,token:h,indent:p,empty:m,single:g}of a)(g||!m)&&u.push({from:d.from+p,insert:h+" "});let c=e.changes(u);return{changes:c,selection:e.selection.map(c,1)}}else if(o!=1&&a.some(u=>u.comment>=0)){let u=[];for(let{line:c,comment:d,token:h}of a)if(d>=0){let p=c.from+d,m=p+h.length;c.text[m-c.from]==" "&&m++,u.push({from:p,to:m})}return{changes:u}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(o){return combineConfig(o,{minDepth:100,newGroupDelay:500,joinToEvent:(e,s)=>s},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,s)=>(a,l)=>e(a,l)||s(a,l)})}}),historyField_=StateField.define({create(){return HistoryState$1.empty},update(o,e){let s=e.state.facet(historyConfig),a=e.annotation(fromHistory);if(a){let h=HistEvent.fromTransaction(e,a.selection),p=a.side,m=p==0?o.undone:o.done;return h?m=updateBranch(m,m.length,s.minDepth,h):m=addSelection(m,e.startState.selection),new HistoryState$1(p==0?a.rest:m,p==0?m:a.rest)}let l=e.annotation(isolateHistory);if((l=="full"||l=="before")&&(o=o.isolate()),e.annotation(Transaction.addToHistory)===!1)return e.changes.empty?o:o.addMapping(e.changes.desc);let u=HistEvent.fromTransaction(e),c=e.annotation(Transaction.time),d=e.annotation(Transaction.userEvent);return u?o=o.addChanges(u,c,d,s,e):e.selection&&(o=o.addSelection(e.startState.selection,c,d,s.newGroupDelay)),(l=="full"||l=="after")&&(o=o.isolate()),o},toJSON(o){return{done:o.done.map(e=>e.toJSON()),undone:o.undone.map(e=>e.toJSON())}},fromJSON(o){return new HistoryState$1(o.done.map(HistEvent.fromJSON),o.undone.map(HistEvent.fromJSON))}});function history$2(o={}){return[historyField_,historyConfig.of(o),EditorView.domEventHandlers({beforeinput(e,s){let a=e.inputType=="historyUndo"?undo$3:e.inputType=="historyRedo"?redo$3:null;return a?(e.preventDefault(),a(s)):!1}})]}function cmd(o,e){return function({state:s,dispatch:a}){if(!e&&s.readOnly)return!1;let l=s.field(historyField_,!1);if(!l)return!1;let u=l.pop(o,s,e);return u?(a(u),!0):!1}}const undo$3=cmd(0,!1),redo$3=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);function depth(o){return function(e){let s=e.field(historyField_,!1);if(!s)return 0;let a=o==0?s.done:s.undone;return a.length-(a.length&&!a[0].changes?1:0)}}const undoDepth=depth(0),redoDepth=depth(1);class HistEvent{constructor(e,s,a,l,u){this.changes=e,this.effects=s,this.mapped=a,this.startSelection=l,this.selectionsAfter=u}setSelAfter(e){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,s,a;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(s=this.mapped)===null||s===void 0?void 0:s.toJSON(),startSelection:(a=this.startSelection)===null||a===void 0?void 0:a.toJSON(),selectionsAfter:this.selectionsAfter.map(l=>l.toJSON())}}static fromJSON(e){return new HistEvent(e.changes&&ChangeSet.fromJSON(e.changes),[],e.mapped&&ChangeDesc.fromJSON(e.mapped),e.startSelection&&EditorSelection.fromJSON(e.startSelection),e.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(e,s){let a=none$1;for(let l of e.startState.facet(invertedEffects)){let u=l(e);u.length&&(a=a.concat(u))}return!a.length&&e.changes.empty?null:new HistEvent(e.changes.invert(e.startState.doc),a,void 0,s||e.startState.selection,none$1)}static selection(e){return new HistEvent(void 0,none$1,void 0,void 0,e)}}function updateBranch(o,e,s,a){let l=e+1>s+20?e-s-1:0,u=o.slice(l,e);return u.push(a),u}function isAdjacent(o,e){let s=[],a=!1;return o.iterChangedRanges((l,u)=>s.push(l,u)),e.iterChangedRanges((l,u,c,d)=>{for(let h=0;h<s.length;){let p=s[h++],m=s[h++];d>=p&&c<=m&&(a=!0)}}),a}function eqSelectionShape(o,e){return o.ranges.length==e.ranges.length&&o.ranges.filter((s,a)=>s.empty!=e.ranges[a].empty).length===0}function conc(o,e){return o.length?e.length?o.concat(e):o:e}const none$1=[],MaxSelectionsPerEvent=200;function addSelection(o,e){if(o.length){let s=o[o.length-1],a=s.selectionsAfter.slice(Math.max(0,s.selectionsAfter.length-MaxSelectionsPerEvent));return a.length&&a[a.length-1].eq(e)?o:(a.push(e),updateBranch(o,o.length-1,1e9,s.setSelAfter(a)))}else return[HistEvent.selection([e])]}function popSelection(o){let e=o[o.length-1],s=o.slice();return s[o.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),s}function addMappingToBranch(o,e){if(!o.length)return o;let s=o.length,a=none$1;for(;s;){let l=mapEvent(o[s-1],e,a);if(l.changes&&!l.changes.empty||l.effects.length){let u=o.slice(0,s);return u[s-1]=l,u}else e=l.mapped,s--,a=l.selectionsAfter}return a.length?[HistEvent.selection(a)]:none$1}function mapEvent(o,e,s){let a=conc(o.selectionsAfter.length?o.selectionsAfter.map(d=>d.map(e)):none$1,s);if(!o.changes)return HistEvent.selection(a);let l=o.changes.map(e),u=e.mapDesc(o.changes,!0),c=o.mapped?o.mapped.composeDesc(u):u;return new HistEvent(l,StateEffect.mapEffects(o.effects,e),c,o.startSelection.map(u),a)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;let HistoryState$1=class Ks{constructor(e,s,a=0,l=void 0){this.done=e,this.undone=s,this.prevTime=a,this.prevUserEvent=l}isolate(){return this.prevTime?new Ks(this.done,this.undone):this}addChanges(e,s,a,l,u){let c=this.done,d=c[c.length-1];return d&&d.changes&&!d.changes.empty&&e.changes&&(!a||joinableUserEvent.test(a))&&(!d.selectionsAfter.length&&s-this.prevTime<l.newGroupDelay&&l.joinToEvent(u,isAdjacent(d.changes,e.changes))||a=="input.type.compose")?c=updateBranch(c,c.length-1,l.minDepth,new HistEvent(e.changes.compose(d.changes),conc(StateEffect.mapEffects(e.effects,d.changes),d.effects),d.mapped,d.startSelection,none$1)):c=updateBranch(c,c.length,l.minDepth,e),new Ks(c,none$1,s,a)}addSelection(e,s,a,l){let u=this.done.length?this.done[this.done.length-1].selectionsAfter:none$1;return u.length>0&&s-this.prevTime<l&&a==this.prevUserEvent&&a&&/^select($|\.)/.test(a)&&eqSelectionShape(u[u.length-1],e)?this:new Ks(addSelection(this.done,e),this.undone,s,a)}addMapping(e){return new Ks(addMappingToBranch(this.done,e),addMappingToBranch(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,s,a){let l=e==0?this.done:this.undone;if(l.length==0)return null;let u=l[l.length-1],c=u.selectionsAfter[0]||(u.startSelection?u.startSelection.map(u.changes.invertedDesc,1):s.selection);if(a&&u.selectionsAfter.length)return s.update({selection:u.selectionsAfter[u.selectionsAfter.length-1],annotations:fromHistory.of({side:e,rest:popSelection(l),selection:c}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(u.changes){let d=l.length==1?none$1:l.slice(0,l.length-1);return u.mapped&&(d=addMappingToBranch(d,u.mapped)),s.update({changes:u.changes,selection:u.startSelection,effects:u.effects,annotations:fromHistory.of({side:e,rest:d,selection:c}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};HistoryState$1.empty=new HistoryState$1(none$1,none$1);const historyKeymap=[{key:"Mod-z",run:undo$3,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo$3,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo$3,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(o,e){return EditorSelection.create(o.ranges.map(e),o.mainIndex)}function setSel(o,e){return o.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:o,dispatch:e},s){let a=updateSel(o.selection,s);return a.eq(o.selection,!0)?!1:(e(setSel(o,a)),!0)}function rangeEnd(o,e){return EditorSelection.cursor(e?o.to:o.from)}function cursorByChar(o,e){return moveSel(o,s=>s.empty?o.moveByChar(s,e):rangeEnd(s,e))}function ltrAtCursor(o){return o.textDirectionAt(o.state.selection.main.head)==Direction.LTR}const cursorCharLeft=o=>cursorByChar(o,!ltrAtCursor(o)),cursorCharRight=o=>cursorByChar(o,ltrAtCursor(o));function cursorByGroup(o,e){return moveSel(o,s=>s.empty?o.moveByGroup(s,e):rangeEnd(s,e))}const cursorGroupLeft=o=>cursorByGroup(o,!ltrAtCursor(o)),cursorGroupRight=o=>cursorByGroup(o,ltrAtCursor(o));function interestingNode(o,e,s){if(e.type.prop(s))return!0;let a=e.to-e.from;return a&&(a>2||/[^\s,.;:]/.test(o.sliceDoc(e.from,e.to)))||e.firstChild}function moveBySyntax(o,e,s){let a=syntaxTree(o).resolveInner(e.head),l=s?NodeProp.closedBy:NodeProp.openedBy;for(let h=e.head;;){let p=s?a.childAfter(h):a.childBefore(h);if(!p)break;interestingNode(o,p,l)?a=p:h=s?p.to:p.from}let u=a.type.prop(l),c,d;return u&&(c=s?matchBrackets(o,a.from,1):matchBrackets(o,a.to,-1))&&c.matched?d=s?c.end.to:c.end.from:d=s?a.to:a.from,EditorSelection.cursor(d,s?-1:1)}const cursorSyntaxLeft=o=>moveSel(o,e=>moveBySyntax(o.state,e,!ltrAtCursor(o))),cursorSyntaxRight=o=>moveSel(o,e=>moveBySyntax(o.state,e,ltrAtCursor(o)));function cursorByLine(o,e){return moveSel(o,s=>{if(!s.empty)return rangeEnd(s,e);let a=o.moveVertically(s,e);return a.head!=s.head?a:o.moveToLineBoundary(s,e)})}const cursorLineUp=o=>cursorByLine(o,!1),cursorLineDown=o=>cursorByLine(o,!0);function pageInfo(o){let e=o.scrollDOM.clientHeight<o.scrollDOM.scrollHeight-2,s=0,a=0,l;if(e){for(let u of o.state.facet(EditorView.scrollMargins)){let c=u(o);c!=null&&c.top&&(s=Math.max(c==null?void 0:c.top,s)),c!=null&&c.bottom&&(a=Math.max(c==null?void 0:c.bottom,a))}l=o.scrollDOM.clientHeight-s-a}else l=(o.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:s,marginBottom:a,selfScroll:e,height:Math.max(o.defaultLineHeight,l-5)}}function cursorByPage(o,e){let s=pageInfo(o),{state:a}=o,l=updateSel(a.selection,c=>c.empty?o.moveVertically(c,e,s.height):rangeEnd(c,e));if(l.eq(a.selection))return!1;let u;if(s.selfScroll){let c=o.coordsAtPos(a.selection.main.head),d=o.scrollDOM.getBoundingClientRect(),h=d.top+s.marginTop,p=d.bottom-s.marginBottom;c&&c.top>h&&c.bottom<p&&(u=EditorView.scrollIntoView(l.main.head,{y:"start",yMargin:c.top-h}))}return o.dispatch(setSel(a,l),{effects:u}),!0}const cursorPageUp=o=>cursorByPage(o,!1),cursorPageDown=o=>cursorByPage(o,!0);function moveByLineBoundary(o,e,s){let a=o.lineBlockAt(e.head),l=o.moveToLineBoundary(e,s);if(l.head==e.head&&l.head!=(s?a.to:a.from)&&(l=o.moveToLineBoundary(e,s,!1)),!s&&l.head==a.from&&a.length){let u=/^\s*/.exec(o.state.sliceDoc(a.from,Math.min(a.from+100,a.to)))[0].length;u&&e.head!=a.from+u&&(l=EditorSelection.cursor(a.from+u))}return l}const cursorLineBoundaryForward=o=>moveSel(o,e=>moveByLineBoundary(o,e,!0)),cursorLineBoundaryBackward=o=>moveSel(o,e=>moveByLineBoundary(o,e,!1)),cursorLineBoundaryLeft=o=>moveSel(o,e=>moveByLineBoundary(o,e,!ltrAtCursor(o))),cursorLineBoundaryRight=o=>moveSel(o,e=>moveByLineBoundary(o,e,ltrAtCursor(o))),cursorLineStart=o=>moveSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).from,1)),cursorLineEnd=o=>moveSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).to,-1));function toMatchingBracket(o,e,s){let a=!1,l=updateSel(o.selection,u=>{let c=matchBrackets(o,u.head,-1)||matchBrackets(o,u.head,1)||u.head>0&&matchBrackets(o,u.head-1,1)||u.head<o.doc.length&&matchBrackets(o,u.head+1,-1);if(!c||!c.end)return u;a=!0;let d=c.start.from==u.head?c.end.to:c.end.from;return EditorSelection.cursor(d)});return a?(e(setSel(o,l)),!0):!1}const cursorMatchingBracket=({state:o,dispatch:e})=>toMatchingBracket(o,e);function extendSel(o,e){let s=updateSel(o.state.selection,a=>{let l=e(a);return EditorSelection.range(a.anchor,l.head,l.goalColumn,l.bidiLevel||void 0)});return s.eq(o.state.selection)?!1:(o.dispatch(setSel(o.state,s)),!0)}function selectByChar(o,e){return extendSel(o,s=>o.moveByChar(s,e))}const selectCharLeft=o=>selectByChar(o,!ltrAtCursor(o)),selectCharRight=o=>selectByChar(o,ltrAtCursor(o));function selectByGroup(o,e){return extendSel(o,s=>o.moveByGroup(s,e))}const selectGroupLeft=o=>selectByGroup(o,!ltrAtCursor(o)),selectGroupRight=o=>selectByGroup(o,ltrAtCursor(o)),selectSyntaxLeft=o=>extendSel(o,e=>moveBySyntax(o.state,e,!ltrAtCursor(o))),selectSyntaxRight=o=>extendSel(o,e=>moveBySyntax(o.state,e,ltrAtCursor(o)));function selectByLine(o,e){return extendSel(o,s=>o.moveVertically(s,e))}const selectLineUp=o=>selectByLine(o,!1),selectLineDown=o=>selectByLine(o,!0);function selectByPage(o,e){return extendSel(o,s=>o.moveVertically(s,e,pageInfo(o).height))}const selectPageUp=o=>selectByPage(o,!1),selectPageDown=o=>selectByPage(o,!0),selectLineBoundaryForward=o=>extendSel(o,e=>moveByLineBoundary(o,e,!0)),selectLineBoundaryBackward=o=>extendSel(o,e=>moveByLineBoundary(o,e,!1)),selectLineBoundaryLeft=o=>extendSel(o,e=>moveByLineBoundary(o,e,!ltrAtCursor(o))),selectLineBoundaryRight=o=>extendSel(o,e=>moveByLineBoundary(o,e,ltrAtCursor(o))),selectLineStart=o=>extendSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).from)),selectLineEnd=o=>extendSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).to)),cursorDocStart=({state:o,dispatch:e})=>(e(setSel(o,{anchor:0})),!0),cursorDocEnd=({state:o,dispatch:e})=>(e(setSel(o,{anchor:o.doc.length})),!0),selectDocStart=({state:o,dispatch:e})=>(e(setSel(o,{anchor:o.selection.main.anchor,head:0})),!0),selectDocEnd=({state:o,dispatch:e})=>(e(setSel(o,{anchor:o.selection.main.anchor,head:o.doc.length})),!0),selectAll=({state:o,dispatch:e})=>(e(o.update({selection:{anchor:0,head:o.doc.length},userEvent:"select"})),!0),selectLine=({state:o,dispatch:e})=>{let s=selectedLineBlocks(o).map(({from:a,to:l})=>EditorSelection.range(a,Math.min(l+1,o.doc.length)));return e(o.update({selection:EditorSelection.create(s),userEvent:"select"})),!0},selectParentSyntax=({state:o,dispatch:e})=>{let s=updateSel(o.selection,a=>{let l=syntaxTree(o),u=l.resolveStack(a.from,1);if(a.empty){let c=l.resolveStack(a.from,-1);c.node.from>=u.node.from&&c.node.to<=u.node.to&&(u=c)}for(let c=u;c;c=c.next){let{node:d}=c;if((d.from<a.from&&d.to>=a.to||d.to>a.to&&d.from<=a.from)&&c.next)return EditorSelection.range(d.to,d.from)}return a});return s.eq(o.selection)?!1:(e(setSel(o,s)),!0)};function addCursorVertically(o,e){let{state:s}=o,a=s.selection,l=s.selection.ranges.slice();for(let u of s.selection.ranges){let c=s.doc.lineAt(u.head);if(e?c.to<o.state.doc.length:c.from>0)for(let d=u;;){let h=o.moveVertically(d,e);if(h.head<c.from||h.head>c.to){l.some(p=>p.head==h.head)||l.push(h);break}else{if(h.head==d.head)break;d=h}}}return l.length==a.ranges.length?!1:(o.dispatch(setSel(s,EditorSelection.create(l,l.length-1))),!0)}const addCursorAbove=o=>addCursorVertically(o,!1),addCursorBelow=o=>addCursorVertically(o,!0),simplifySelection=({state:o,dispatch:e})=>{let s=o.selection,a=null;return s.ranges.length>1?a=EditorSelection.create([s.main]):s.main.empty||(a=EditorSelection.create([EditorSelection.cursor(s.main.head)])),a?(e(setSel(o,a)),!0):!1};function deleteBy(o,e){if(o.state.readOnly)return!1;let s="delete.selection",{state:a}=o,l=a.changeByRange(u=>{let{from:c,to:d}=u;if(c==d){let h=e(u);h<c?(s="delete.backward",h=skipAtomic(o,h,!1)):h>c&&(s="delete.forward",h=skipAtomic(o,h,!0)),c=Math.min(c,h),d=Math.max(d,h)}else c=skipAtomic(o,c,!1),d=skipAtomic(o,d,!0);return c==d?{range:u}:{changes:{from:c,to:d},range:EditorSelection.cursor(c,c<u.head?-1:1)}});return l.changes.empty?!1:(o.dispatch(a.update(l,{scrollIntoView:!0,userEvent:s,effects:s=="delete.selection"?EditorView.announce.of(a.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(o,e,s){if(o instanceof EditorView)for(let a of o.state.facet(EditorView.atomicRanges).map(l=>l(o)))a.between(e,e,(l,u)=>{l<e&&u>e&&(e=s?u:l)});return e}const deleteByChar=(o,e,s)=>deleteBy(o,a=>{let l=a.from,{state:u}=o,c=u.doc.lineAt(l),d,h;if(s&&!e&&l>c.from&&l<c.from+200&&!/[^ \t]/.test(d=c.text.slice(0,l-c.from))){if(d[d.length-1]=="	")return l-1;let p=countColumn(d,u.tabSize),m=p%getIndentUnit(u)||getIndentUnit(u);for(let g=0;g<m&&d[d.length-1-g]==" ";g++)l--;h=l}else h=findClusterBreak(c.text,l-c.from,e,e)+c.from,h==l&&c.number!=(e?u.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(c.text.slice(h-c.from,l-c.from))&&(h=findClusterBreak(c.text,h-c.from,!1,!1)+c.from);return h}),deleteCharBackward=o=>deleteByChar(o,!1,!0),deleteCharForward=o=>deleteByChar(o,!0,!1),deleteByGroup=(o,e)=>deleteBy(o,s=>{let a=s.head,{state:l}=o,u=l.doc.lineAt(a),c=l.charCategorizer(a);for(let d=null;;){if(a==(e?u.to:u.from)){a==s.head&&u.number!=(e?l.doc.lines:1)&&(a+=e?1:-1);break}let h=findClusterBreak(u.text,a-u.from,e)+u.from,p=u.text.slice(Math.min(a,h)-u.from,Math.max(a,h)-u.from),m=c(p);if(d!=null&&m!=d)break;(p!=" "||a!=s.head)&&(d=m),a=h}return a}),deleteGroupBackward=o=>deleteByGroup(o,!1),deleteGroupForward=o=>deleteByGroup(o,!0),deleteToLineEnd=o=>deleteBy(o,e=>{let s=o.lineBlockAt(e.head).to;return e.head<s?s:Math.min(o.state.doc.length,e.head+1)}),deleteLineBoundaryBackward=o=>deleteBy(o,e=>{let s=o.moveToLineBoundary(e,!1).head;return e.head>s?s:Math.max(0,e.head-1)}),deleteLineBoundaryForward=o=>deleteBy(o,e=>{let s=o.moveToLineBoundary(e,!0).head;return e.head<s?s:Math.min(o.state.doc.length,e.head+1)}),splitLine=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let s=o.changeByRange(a=>({changes:{from:a.from,to:a.to,insert:Text.of(["",""])},range:EditorSelection.cursor(a.from)}));return e(o.update(s,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let s=o.changeByRange(a=>{if(!a.empty||a.from==0||a.from==o.doc.length)return{range:a};let l=a.from,u=o.doc.lineAt(l),c=l==u.from?l-1:findClusterBreak(u.text,l-u.from,!1)+u.from,d=l==u.to?l+1:findClusterBreak(u.text,l-u.from,!0)+u.from;return{changes:{from:c,to:d,insert:o.doc.slice(l,d).append(o.doc.slice(c,l))},range:EditorSelection.cursor(d)}});return s.changes.empty?!1:(e(o.update(s,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(o){let e=[],s=-1;for(let a of o.selection.ranges){let l=o.doc.lineAt(a.from),u=o.doc.lineAt(a.to);if(!a.empty&&a.to==u.from&&(u=o.doc.lineAt(a.to-1)),s>=l.number){let c=e[e.length-1];c.to=u.to,c.ranges.push(a)}else e.push({from:l.from,to:u.to,ranges:[a]});s=u.number+1}return e}function moveLine(o,e,s){if(o.readOnly)return!1;let a=[],l=[];for(let u of selectedLineBlocks(o)){if(s?u.to==o.doc.length:u.from==0)continue;let c=o.doc.lineAt(s?u.to+1:u.from-1),d=c.length+1;if(s){a.push({from:u.to,to:c.to},{from:u.from,insert:c.text+o.lineBreak});for(let h of u.ranges)l.push(EditorSelection.range(Math.min(o.doc.length,h.anchor+d),Math.min(o.doc.length,h.head+d)))}else{a.push({from:c.from,to:u.from},{from:u.to,insert:o.lineBreak+c.text});for(let h of u.ranges)l.push(EditorSelection.range(h.anchor-d,h.head-d))}}return a.length?(e(o.update({changes:a,scrollIntoView:!0,selection:EditorSelection.create(l,o.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:o,dispatch:e})=>moveLine(o,e,!1),moveLineDown=({state:o,dispatch:e})=>moveLine(o,e,!0);function copyLine(o,e,s){if(o.readOnly)return!1;let a=[];for(let u of selectedLineBlocks(o))s?a.push({from:u.from,insert:o.doc.slice(u.from,u.to)+o.lineBreak}):a.push({from:u.to,insert:o.lineBreak+o.doc.slice(u.from,u.to)});let l=o.changes(a);return e(o.update({changes:l,selection:o.selection.map(l,s?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:o,dispatch:e})=>copyLine(o,e,!1),copyLineDown=({state:o,dispatch:e})=>copyLine(o,e,!0),deleteLine=o=>{if(o.state.readOnly)return!1;let{state:e}=o,s=e.changes(selectedLineBlocks(e).map(({from:l,to:u})=>(l>0?l--:u<e.doc.length&&u++,{from:l,to:u}))),a=updateSel(e.selection,l=>{let u;if(o.lineWrapping){let c=o.lineBlockAt(l.head),d=o.coordsAtPos(l.head,l.assoc||1);d&&(u=c.bottom+o.documentTop-d.bottom+o.defaultLineHeight/2)}return o.moveVertically(l,!0,u)}).map(s);return o.dispatch({changes:s,selection:a,scrollIntoView:!0,userEvent:"delete.line"}),!0},insertNewlineKeepIndent=({state:o,dispatch:e})=>(e(o.update(o.changeByRange(s=>{let a=/^\s*/.exec(o.doc.lineAt(s.from).text)[0];return{changes:{from:s.from,to:s.to,insert:o.lineBreak+a},range:EditorSelection.cursor(s.from+a.length+1)}}),{scrollIntoView:!0,userEvent:"input"})),!0);function isBetweenBrackets(o,e){if(/\(\)|\[\]|\{\}/.test(o.sliceDoc(e-1,e+1)))return{from:e,to:e};let s=syntaxTree(o).resolveInner(e),a=s.childBefore(e),l=s.childAfter(e),u;return a&&l&&a.to<=e&&l.from>=e&&(u=a.type.prop(NodeProp.closedBy))&&u.indexOf(l.name)>-1&&o.doc.lineAt(a.to).from==o.doc.lineAt(l.from).from&&!/\S/.test(o.sliceDoc(a.to,l.from))?{from:a.to,to:l.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(o){return({state:e,dispatch:s})=>{if(e.readOnly)return!1;let a=e.changeByRange(l=>{let{from:u,to:c}=l,d=e.doc.lineAt(u),h=!o&&u==c&&isBetweenBrackets(e,u);o&&(u=c=(c<=d.to?d:e.doc.lineAt(c)).to);let p=new IndentContext(e,{simulateBreak:u,simulateDoubleBreak:!!h}),m=getIndentation(p,u);for(m==null&&(m=countColumn(/^\s*/.exec(e.doc.lineAt(u).text)[0],e.tabSize));c<d.to&&/\s/.test(d.text[c-d.from]);)c++;h?{from:u,to:c}=h:u>d.from&&u<d.from+100&&!/\S/.test(d.text.slice(0,u))&&(u=d.from);let g=["",indentString(e,m)];return h&&g.push(indentString(e,p.lineIndent(d.from,-1))),{changes:{from:u,to:c,insert:Text.of(g)},range:EditorSelection.cursor(u+1+g[1].length)}});return s(e.update(a,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(o,e){let s=-1;return o.changeByRange(a=>{let l=[];for(let c=a.from;c<=a.to;){let d=o.doc.lineAt(c);d.number>s&&(a.empty||a.to>d.from)&&(e(d,l,a),s=d.number),c=d.to+1}let u=o.changes(l);return{changes:l,range:EditorSelection.range(u.mapPos(a.anchor,1),u.mapPos(a.head,1))}})}const indentSelection=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let s=Object.create(null),a=new IndentContext(o,{overrideIndentation:u=>{let c=s[u];return c??-1}}),l=changeBySelectedLine(o,(u,c,d)=>{let h=getIndentation(a,u.from);if(h==null)return;/\S/.test(u.text)||(h=0);let p=/^\s*/.exec(u.text)[0],m=indentString(o,h);(p!=m||d.from<u.from+p.length)&&(s[u.from]=h,c.push({from:u.from,to:u.from+p.length,insert:m}))});return l.changes.empty||e(o.update(l,{userEvent:"indent"})),!0},indentMore=({state:o,dispatch:e})=>o.readOnly?!1:(e(o.update(changeBySelectedLine(o,(s,a)=>{a.push({from:s.from,insert:o.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:o,dispatch:e})=>o.readOnly?!1:(e(o.update(changeBySelectedLine(o,(s,a)=>{let l=/^\s*/.exec(s.text)[0];if(!l)return;let u=countColumn(l,o.tabSize),c=0,d=indentString(o,Math.max(0,u-getIndentUnit(o)));for(;c<l.length&&c<d.length&&l.charCodeAt(c)==d.charCodeAt(c);)c++;a.push({from:s.from+c,to:s.from+l.length,insert:d.slice(c)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=o=>(o.setTabFocusMode(),!0),insertTab=({state:o,dispatch:e})=>o.selection.ranges.some(s=>!s.empty)?indentMore({state:o,dispatch:e}):(e(o.update(o.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward,preventDefault:!0},{key:"Delete",run:deleteCharForward,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward,preventDefault:!0},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward,preventDefault:!0},{mac:"Mod-Delete",run:deleteLineBoundaryForward,preventDefault:!0}].concat(emacsStyleKeymap.map(o=>({mac:o.key,run:o.run,shift:o.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Mod-Alt-ArrowUp",run:addCursorAbove},{key:"Mod-Alt-ArrowDown",run:addCursorBelow},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess},names=["anchor","bold","bulletList","checkbox","code_block","codeBlock","code_inline","codeInline","colorify","emoji","file","filePopup","gpt","heading1","heading2","heading3","heading4","heading5","heading6","emptyRow","horizontalrule","horizontalRule","image","imagePopup","italic","liftListItem","link","mark","math_block","mathBlock","math_inline","mathInline","mermaid","mono","orderedList","paragraph","quote","quoteLink","redo","sinkListItem","strike","table","tabs","underline","undo","yfm_block","block","yfm_cut","cut","yfm_html_block","htmlBlock","yfm_layout","layout","yfm_note","note"],namesObj=names.reduce((o,e)=>(o[e]=e,o),{}),ActionName=namesObj;function getBlockExtraLineBreaks$1(o,{from:e,to:s}){let a=0;e.number===1||o.doc.line(e.number-1).length===0?a=0:a=1;let l=0;return s.number===o.doc.lines||o.doc.line(e.number+1).length===0?l=0:l=1,{before:a,after:l}}function replaceOrInsertAfter(o,e){const s=o.selection.main;if(isFullLinesSelection(o.doc,s)){const a=getBlockExtraLineBreaks$1(o,{from:o.doc.lineAt(s.from),to:o.doc.lineAt(s.to)});return o.replaceSelection(o.lineBreak.repeat(a.before)+e+o.lineBreak.repeat(a.after))}else{const a=o.lineBreak.repeat(2)+e+o.lineBreak.repeat(2),l=o.doc.lineAt(s.to).to,u=l+a.length-2;return{changes:{from:l,insert:a},selection:{anchor:u}}}}function isFullLinesSelection(o,e){const s=o.lineAt(e.from),a=o.lineAt(e.to);return e.from<=s.from&&e.to>=a.to}const wrapToBlock=(o,e,s)=>({state:a,dispatch:l})=>{const u=typeof o=="function"?o(a):o,c=typeof e=="function"?e(a):e,d=a.selection.main,h=a.doc.lineAt(d.from),p=a.doc.lineAt(d.to),m=getBlockExtraLineBreaks$1(a,{from:h,to:p}),g=a.lineBreak.repeat(m.before)+u,y=c+a.lineBreak.repeat(m.after),A=[{from:h.from,insert:g}],T=h.number===p.number&&h.length===0;let E=d.head+g.length;if(s){const _=typeof s.before=="function"?s.before(a):s.before,w=typeof s.after=="function"?s.after(a):s.after;iterateOverRangeLines(a.doc,d,R=>{s.skipEmptyLine&&R.length===0||(_&&(A.push({from:R.from,insert:_}),T&&(E+=_.length)),w&&A.push({from:R.to,insert:w}))})}A.push({from:p.to,insert:y});const v=a.changes(A);return l(a.update({changes:v,selection:T?EditorSelection.single(E):a.selection.map(v)})),!0};function inlineWrapTo(o,e=o){return({state:s,dispatch:a})=>{const l=s.changeByRange(u=>{const c=s.changes([{from:u.from,insert:o},{from:u.to,insert:e}]);return{changes:c,range:u.empty?EditorSelection.range(u.anchor+o.length,u.head+o.length,u.goalColumn,u.bidiLevel??void 0):u.map(c)}});return a(s.update(l)),!0}}function toggleInlineMarkupFactory(o){const[e,s]=typeof o=="string"?[o,o]:[o.before,o.after??o.before],a=e.length,l=s.length;return({state:u,dispatch:c})=>{const d=u.changeByRange(h=>{const p=u.sliceDoc(h.from-a,h.from)===e,m=u.sliceDoc(h.to,h.to+l)===s,g=[];p&&m?g.push({from:h.from-a,to:h.from,insert:""},{from:h.to,to:h.to+l,insert:""}):(p||g.push({from:h.from,insert:e}),m||g.push({from:h.to,insert:s}));const y=u.changes(g);return{changes:y,range:h.empty&&!p?EditorSelection.range(h.anchor+a,h.head+a,h.goalColumn,h.bidiLevel??void 0):h.map(y)}});return d.scrollIntoView=!0,c(u.update(d)),!0}}const wrapPerLine=({beforeText:o,skipEmptyLine:e=!0})=>({state:s,dispatch:a})=>{const l=s.changeByRange(u=>{const c=[];u.anchor===u.head&&s.doc.lineAt(u.head).length===0?c.push({from:u.head,insert:o}):iterateOverRangeLines(s.doc,u,p=>{e&&p.length===0||c.push({from:p.from,insert:o})});const h=s.changes(c);return{changes:h,range:u.map(h,1)}});return a(s.update(l)),!0};function iterateOverRangeLines(o,e,s){const a=o.lineAt(e.from).number,l=o.lineAt(e.to).number;for(let u=a;u<=l;u++)s(o.line(u))}const wrapToBlockquote=wrapPerLine({beforeText:"> ",skipEmptyLine:!1}),wrapToCheckbox=wrapPerLine({beforeText:"[ ] "}),insertHRule=({state:o,dispatch:e})=>{const a=replaceOrInsertAfter(o,"---");return e(o.update(a)),!0},wrapToCodeBlock=wrapToBlock(({lineBreak:o})=>"```"+o,({lineBreak:o})=>o+"```"),wrapToInlineCode=({state:o,dispatch:e})=>{const s=o.changeByRange(a=>{const l=o.sliceDoc(a.from,a.to),c=l.includes("`")?"``":"`",d=`${c}${l.startsWith("`")?" ":""}`,h=`${l.endsWith("`")?" ":""}${c}`,p=[{from:a.from,insert:d},{from:a.to,insert:h}],m=o.changes(p);return{changes:m,range:a.empty?EditorSelection.range(a.anchor+1,a.head+1,a.goalColumn,a.bidiLevel??void 0):a.map(m)}});return e(o.update(s)),!0},toH1=toHeading(1),toH2=toHeading(2),toH3=toHeading(3),toH4=toHeading(4),toH5=toHeading(5),toH6=toHeading(6);function toHeading(o){const e=/^\s*#*\s*/,s=Array(o).fill("#").join("")+" ";return({state:a,dispatch:l})=>{const u=a.changeByRange(c=>{var g;const d=a.doc.lineAt(c.from),h=a.doc.lineAt(c.to);if(d.number===h.number&&d.length===0)return{changes:[{from:d.from,insert:s}],range:EditorSelection.range(c.anchor+s.length,c.head+s.length,c.goalColumn,c.bidiLevel??void 0)};const p=[];for(let y=d.number;y<=h.number;y++){const A=a.doc.line(y);if(A.length===0&&!c.empty)continue;const T=((g=e.exec(A.text))==null?void 0:g[0].length)??0;p.push({from:A.from,to:A.from+T,insert:s})}const m=a.changes(p);return{changes:m,range:c.map(m)}});return l(a.update(u)),!0}}const defaultLinkSnippet=snippet('[#{2:link}](#{1:url} "#{3:title}")'),insertLink=({state:o,dispatch:e})=>{const{from:s,to:a,empty:l}=o.selection.main;return(l?defaultLinkSnippet:snippet(`[#{2:${o.sliceDoc(s,a)}}](#{1:url} "#{3:title}")`))({state:o,dispatch:e},null,s,a),!0};function insertImages(o){return({state:e,dispatch:s})=>{const a=o.map(({title:u,url:c,alt:d,width:h,height:p})=>{let m=`![${d??""}](${c??""}`;return u&&(m+=` "${u}"`),(h!==void 0&&h.length>0||p!==void 0&&p.length>0)&&(m+=` =${h??""}x${p??""}`),m+=")",m}).join(" "),l=e.changeByRange(u=>{const c=e.changes({from:u.from,to:u.to,insert:a});return{changes:c,range:u.map(c)}});return s(e.update(l)),!0}}const fileToCurlySyntax=o=>`{% file ${Object.entries(o).map(([s,a])=>`${s}="${a.replace('"',"")}"`).join(" ")} %}`,fileToDirectiveSyntax=o=>{const{src:e,name:s,type:a}=o;let l=`:file[${s}](${e})`;return a&&(l+=`{type="${a}"}`),l},insertFiles=o=>({state:e,dispatch:s})=>{const a=e.facet(DirectiveSyntaxFacet).shouldInsertDirectiveMarkup("yfmFile")?fileToDirectiveSyntax:fileToCurlySyntax,l=o.map(a).join(" "),u=e.changeByRange(c=>{const d=e.changes({from:c.from,to:c.to,insert:l});return{changes:d,range:c.map(d)}});return s(e.update(u)),!0},toBulletList=wrapPerLine({beforeText:"- "}),toOrderedList=wrapPerLine({beforeText:"1. "}),sinkListItem=wrapPerLine({beforeText:"  ",skipEmptyLine:!1}),liftListItem=({state:o,dispatch:e})=>{const s=o.changeByRange(a=>{const l=[];iterateOverRangeLines(o.doc,a,c=>{c.text.startsWith("  ")?l.push({from:c.from,to:c.from+2,insert:""}):c.text.startsWith(" ")&&l.push({from:c.from,to:c.from+1,insert:""})});const u=o.changes(l);return{changes:u,range:a.map(u)}});return e(o.update(s)),!0},colorify$2=o=>inlineWrapTo(`{${o}}(`,")"),toggleBold=toggleInlineMarkupFactory("**"),toggleItalic=toggleInlineMarkupFactory("_"),toggleStrikethrough=toggleInlineMarkupFactory("~~"),toggleUnderline=toggleInlineMarkupFactory("++"),toggleMonospace=toggleInlineMarkupFactory("##"),toggleMarked=toggleInlineMarkupFactory("=="),DirectiveSyntaxFacet=Facet.define({combine:([o])=>o,static:!0}),wrapToYfmCutCurly=wrapToBlock(({lineBreak:o})=>'{% cut "title" %}'+o.repeat(2),({lineBreak:o})=>o.repeat(2)+"{% endcut %}"),wrapToYfmCutDirective=wrapToBlock(({lineBreak:o})=>":::cut [title]"+o,({lineBreak:o})=>o+":::"),wrapToYfmCut=o=>(o.state.facet(DirectiveSyntaxFacet).shouldInsertDirectiveMarkup("yfmCut")?wrapToYfmCutDirective:wrapToYfmCutCurly)(o),wrapToYfmNote=wrapToBlock(({lineBreak:o})=>"{% note info %}"+o.repeat(2),({lineBreak:o})=>o.repeat(2)+"{% endnote %}"),insertYfmTabs=wrapToBlock(({lineBreak:o})=>"{% list tabs %}"+o.repeat(2)+"- Tab name"+o.repeat(2),({lineBreak:o})=>o.repeat(2)+"{% endlist %}",{before:"  ",after:""}),insertYfmTable=wrapToBlock(({lineBreak:o})=>["#|","||"].join(o)+o,({lineBreak:o})=>o+["|","","||","||","","|","","||","|#",""].join(o)),insertEmptyRow=({state:o,dispatch:e})=>{const s="&nbsp;",a=()=>{const l=o.selection.main,{before:u,after:c,selection:d}=getBlockExtraLineBreaks(o,o.doc.lineAt(l.from)),h=o.lineBreak.repeat(u)+s+o.lineBreak.repeat(c),p=o.doc.lineAt(l.to).to,m=p+h.length+d;return{changes:{from:p,insert:h},selection:{anchor:m}}};return e(o.update(a())),!0};function getBlockExtraLineBreaks(o,e){let s=0,a=0,l=2;return e.text?s=2:e.number>1&&o.doc.line(e.number-1).text&&(s=1),e.number+1<=o.doc.lines&&o.doc.line(e.number+1).text||e.number+1<=o.doc.lines&&!o.doc.line(e.number+1).text&&e.number+2>o.doc.lines?(a=1,l=1):e.number===o.doc.lines&&(a=2,l=0),{before:s,after:a,selection:l}}const LoggerFacet=Facet.define({combine:o=>o[0],static:!0}),ReactRendererFacet=Facet.define({combine:o=>o[0],static:!0}),IMG_MAX_HEIGHT=600,SUCCESS_UPLOAD_REMOVE_TIMEOUT=1e3,AddUploadWidgetEffect=StateEffect.define(),RemoveUploadWidgetEffect=StateEffect.define();async function getImageDimensions(o){const e=await loadImage(o);return{width:e.naturalWidth,height:e.naturalHeight}}async function loadImage(o){return new Promise((e,s)=>{const a=document.createElement("img");a.src=URL.createObjectURL(o),a.onload=()=>{URL.revokeObjectURL(a.src),e(a)},a.onerror=(l,u,c,d,h)=>s(h)})}function getTransferFiles(o){return!o||!isFilesOnly$3(o)&&!isFilesFromHtml$3(o)?null:Array.from(o.files)}const icons={undo:{data:ArrowUturnCcwLeft},redo:{data:ArrowUturnCwRight},bold:{data:Bold$1},italic:{data:Italic$1},underline:{data:Underline$1},strikethrough:{data:Strikethrough$1},mono:{data:LetterM},mark:{data:FontCursor},textColor:{data:Font},text:{data:Text$4},headline:{data:Heading$1},h1:{data:Heading1},h2:{data:Heading2},h3:{data:Heading3},h4:{data:Heading4},h5:{data:Heading5},h6:{data:Heading6},bulletList:{data:ListUl},orderedList:{data:ListOl},sink:{data:TextIndent},lift:{data:TextOutdent},cut:{data:Scissors},note:{data:Sticker},code:{data:Code$1},codeBlock:{data:FileCode},link:{data:Link$2},image:{data:Picture},table:{data:LayoutList},quote:{data:QuoteClose},checklist:{data:SquareCheck},horizontalRule:{data:Minus},file:{data:Paperclip},emoji:{data:FaceSmile},tabs:{data:LayoutTabs},foldingHeading:{data:ArrowChevronRight}};function renderWidget(o,e){return jsxRuntimeExports.jsx(Portal,{container:o,children:jsxRuntimeExports.jsx(UploadLabel,{...e})})}const cnLabel=cn("upload-label");function UploadLabel({fileName:o,fileType:e,status:s,errorText:a,onReUploadClick:l}){const u=e==="image"?icons.image:icons.file;return s==="uploading"?jsxRuntimeExports.jsx(Label,{size:"xs",theme:"info",icon:jsxRuntimeExports.jsx(Icon,{...u}),className:cnLabel({status:s}),children:jsxRuntimeExports.jsxs("div",{className:cnLabel("content"),children:[jsxRuntimeExports.jsx("span",{title:o,className:cnLabel("filename"),children:o}),jsxRuntimeExports.jsx(Spin,{size:"xs"})]})}):s==="success"?jsxRuntimeExports.jsx(Label,{size:"xs",theme:"success",icon:jsxRuntimeExports.jsx(Icon,{...u}),className:cnLabel({status:s}),children:jsxRuntimeExports.jsx("div",{className:cnLabel("content"),children:jsxRuntimeExports.jsx("span",{title:o,className:cnLabel("filename"),children:o})})}):s==="error"?jsxRuntimeExports.jsx(Tooltip,{content:a,children:jsxRuntimeExports.jsx(Label,{size:"xs",interactive:!0,theme:"danger",icon:jsxRuntimeExports.jsx(Icon,{...u}),onClick:l,className:cnLabel({status:s}),children:jsxRuntimeExports.jsxs("div",{className:cnLabel("content"),children:[jsxRuntimeExports.jsx("span",{className:cnLabel("filename"),children:o}),jsxRuntimeExports.jsx(Icon,{data:ArrowsRotateRight,size:16})]})})}):null}class FileUploadWidget extends WidgetType{constructor(s){super();oe(this,"selfId");oe(this,"presenter");oe(this,"renderer",null);oe(this,"props",{});this.selfId=s}toDOM(s){var l;const a=document.createElement("div");return a.className="cm-file-upload-widget",a.style.display="inline-block",(l=this.renderer)==null||l.remove(),this.createRenderItem(a,s),a}updateDOM(s,a){var l;return(l=this.renderer)==null||l.remove(),this.createRenderItem(s,a),!0}destroy(s){var a,l;super.destroy(s),(a=this.renderer)==null||a.remove(),(l=this.presenter)==null||l.cancel(),this.presenter=void 0}setPresenter(s){this.presenter=s}render(s){var a;Object.assign(this.props,s),(a=this.renderer)==null||a.rerender()}createRenderItem(s,a){this.renderer=a.state.facet(ReactRendererFacet).createItem("cm-file-upload-widget",()=>renderWidget(s,{...this.props}))}}class FileUploadPresenter{constructor(e){oe(this,"widget");oe(this,"file");oe(this,"view");oe(this,"uploader");oe(this,"needDimensionsForImages");oe(this,"enableNewImageSizeCalculation");oe(this,"state","initial");oe(this,"onUploadSuccess",e=>{this.state!=="canceled"&&(this.state="success",this.widget.render({status:"success",fileName:this.file.name,fileType:isImageFile$3(this.file)?"image":"file"}),setTimeout(async()=>{const s=await this.formatFileMarkup(e);this.state!=="canceled"&&this.view.dispatch({effects:RemoveUploadWidgetEffect.of({id:this.widget.selfId,markup:s})})},SUCCESS_UPLOAD_REMOVE_TIMEOUT))});oe(this,"onUploadError",e=>{this.state!=="canceled"&&(this.state="error",this.widget.render({status:"error",fileName:this.file.name,fileType:isImageFile$3(this.file)?"image":"file",errorText:String(e),onReUploadClick:()=>{this.state==="error"&&this.run()}}))});this.file=e.file,this.view=e.view,this.widget=e.widget,this.uploader=e.uploader,this.needDimensionsForImages=e.needDimensionsForImages,this.enableNewImageSizeCalculation=e.enableNewImageSizeCalculation,this.widget.setPresenter(this),this.run()}cancel(){this.state="canceled"}run(){this.state="uploading",this.widget.render({status:"uploading",fileName:this.file.name,fileType:isImageFile$3(this.file)?"image":"file"}),this.uploader(this.file).then(this.onUploadSuccess,this.onUploadError)}async formatFileMarkup(e){const s=e.name??this.file.name??"";let a=`![${s}](${e.url}`;if(isImageFile$3(this.file)){if(this.needDimensionsForImages)try{const l=await getImageDimensions(this.file);if(this.enableNewImageSizeCalculation){const{width:u,height:c}=getProportionalSize({width:l.width,height:l.height,imgMaxHeight:IMG_MAX_HEIGHT});a+=` =${u}x${c}`}else{const u=Math.min(l.height,IMG_MAX_HEIGHT);a+=` =x${u}`}}catch(l){console.error(l)}a+=")"}else a=`{% file src="${e.url}" name="${s.replace('"',"")}" %}`;return a}}const FilesUploadPlugin=ViewPlugin.fromClass(class{constructor(o){oe(this,"decos",Decoration.none);oe(this,"view");this.view=o}update(o){this.decos=this.decos.map(o.changes);const e=this.view.state.facet(FileUploadHandlerFacet),s=[];for(const a of o.transactions)for(const l of a.effects)l.is(AddUploadWidgetEffect)&&(this.decos=this.decos.update({add:Array.from(l.value.files).map((u,c)=>{const{widget:d}=new FileUploadPresenter({file:u,view:this.view,uploader:e.fn,needDimensionsForImages:!!e.imageWithDimensions,enableNewImageSizeCalculation:!!e.enableNewImageSizeCalculation,widget:new FileUploadWidget(uniqueId("__file_widget_id"))});return Decoration.widget({widget:d,side:1,__file_widget_id:d.selfId}).range(l.value.pos+c)})})),l.is(RemoveUploadWidgetEffect)&&(this.decos=this.decos.update({filter:(u,c,d)=>d.spec.__file_widget_id!==l.value.id?!0:(l.value.markup&&s.push({from:u,to:c,insert:l.value.markup}),!1)}));s.length&&setTimeout(()=>{this.view.dispatch({changes:s})})}},{decorations:o=>o.decos,eventHandlers:{paste(o,e){if(!o.clipboardData)return!1;const s=getTransferFiles(o.clipboardData);if(!s)return!1;const{from:a,to:l}=e.state.selection.main;return e.state.facet(LoggerFacet).event({domEvent:"paste",event:"paste-files",plugin:"files-upload",dataTypes:o.clipboardData.types}),e.dispatch({selection:{anchor:a},effects:AddUploadWidgetEffect.of({files:s,pos:a}),changes:{from:a,to:l,insert:" ".repeat(s.length)}}),o.preventDefault(),!0},drop(o,e){if(!o.dataTransfer)return!1;const s=getTransferFiles(o.dataTransfer);if(!s)return!1;e.state.facet(LoggerFacet).event({domEvent:"drop",event:"drop-files",plugin:"files-upload",dataTypes:o.dataTransfer.types});const a=this.view.posAtCoords(o,!1);return e.dispatch({selection:{anchor:a},effects:AddUploadWidgetEffect.of({files:s,pos:a}),changes:{from:a,insert:" ".repeat(s.length)}}),o.preventDefault(),!0}}}),FileUploadHandlerFacet=Facet.define({enables:FilesUploadPlugin.extension,combine:o=>o[0],static:!0});class CompositeBlock{static create(e,s,a,l,u){let c=l+(l<<8)+e+(s<<4)|0;return new CompositeBlock(e,s,a,c,u,[],[])}constructor(e,s,a,l,u,c,d){this.type=e,this.value=s,this.from=a,this.hash=l,this.end=u,this.children=c,this.positions=d,this.hashProp=[[NodeProp.contextHash,l]]}addChild(e,s){e.prop(NodeProp.contextHash)!=this.hash&&(e=new Tree(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(s)}toTree(e,s=this.end){let a=this.children.length-1;return a>=0&&(s=Math.max(s,this.positions[a]+this.children[a].length+this.from)),new Tree(e.types[this.type],this.children,this.positions,s-this.from).balance({makeTree:(l,u,c)=>new Tree(NodeType.none,l,u,c,this.hashProp)})}}var Type;(function(o){o[o.Document=1]="Document",o[o.CodeBlock=2]="CodeBlock",o[o.FencedCode=3]="FencedCode",o[o.Blockquote=4]="Blockquote",o[o.HorizontalRule=5]="HorizontalRule",o[o.BulletList=6]="BulletList",o[o.OrderedList=7]="OrderedList",o[o.ListItem=8]="ListItem",o[o.ATXHeading1=9]="ATXHeading1",o[o.ATXHeading2=10]="ATXHeading2",o[o.ATXHeading3=11]="ATXHeading3",o[o.ATXHeading4=12]="ATXHeading4",o[o.ATXHeading5=13]="ATXHeading5",o[o.ATXHeading6=14]="ATXHeading6",o[o.SetextHeading1=15]="SetextHeading1",o[o.SetextHeading2=16]="SetextHeading2",o[o.HTMLBlock=17]="HTMLBlock",o[o.LinkReference=18]="LinkReference",o[o.Paragraph=19]="Paragraph",o[o.CommentBlock=20]="CommentBlock",o[o.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",o[o.Escape=22]="Escape",o[o.Entity=23]="Entity",o[o.HardBreak=24]="HardBreak",o[o.Emphasis=25]="Emphasis",o[o.StrongEmphasis=26]="StrongEmphasis",o[o.Link=27]="Link",o[o.Image=28]="Image",o[o.InlineCode=29]="InlineCode",o[o.HTMLTag=30]="HTMLTag",o[o.Comment=31]="Comment",o[o.ProcessingInstruction=32]="ProcessingInstruction",o[o.Autolink=33]="Autolink",o[o.HeaderMark=34]="HeaderMark",o[o.QuoteMark=35]="QuoteMark",o[o.ListMark=36]="ListMark",o[o.LinkMark=37]="LinkMark",o[o.EmphasisMark=38]="EmphasisMark",o[o.CodeMark=39]="CodeMark",o[o.CodeText=40]="CodeText",o[o.CodeInfo=41]="CodeInfo",o[o.LinkTitle=42]="LinkTitle",o[o.LinkLabel=43]="LinkLabel",o[o.URL=44]="URL"})(Type||(Type={}));class LeafBlock{constructor(e,s){this.start=e,this.content=s,this.marks=[],this.parsers=[]}}class Line{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return skipSpace(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,s=0,a=0){for(let l=s;l<e;l++)a+=this.text.charCodeAt(l)==9?4-a%4:1;return a}findColumn(e){let s=0;for(let a=0;s<this.text.length&&a<e;s++)a+=this.text.charCodeAt(s)==9?4-a%4:1;return s}scrub(){if(!this.baseIndent)return this.text;let e="";for(let s=0;s<this.basePos;s++)e+=" ";return e+this.text.slice(this.basePos)}}function skipForList(o,e,s){if(s.pos==s.text.length||o!=e.block&&s.indent>=e.stack[s.depth+1].value+s.baseIndent)return!0;if(s.indent>=s.baseIndent+4)return!1;let a=(o.type==Type.OrderedList?isOrderedList:isBulletList)(s,e,!1);return a>0&&(o.type!=Type.BulletList||isHorizontalRule(s,e,!1)<0)&&s.text.charCodeAt(s.pos+a-1)==o.value}const DefaultSkipMarkup={[Type.Blockquote](o,e,s){return s.next!=62?!1:(s.markers.push(elt(Type.QuoteMark,e.lineStart+s.pos,e.lineStart+s.pos+1)),s.moveBase(s.pos+(space$2(s.text.charCodeAt(s.pos+1))?2:1)),o.end=e.lineStart+s.text.length,!0)},[Type.ListItem](o,e,s){return s.indent<s.baseIndent+o.value&&s.next>-1?!1:(s.moveBaseColumn(s.baseIndent+o.value),!0)},[Type.OrderedList]:skipForList,[Type.BulletList]:skipForList,[Type.Document](){return!0}};function space$2(o){return o==32||o==9||o==10||o==13}function skipSpace(o,e=0){for(;e<o.length&&space$2(o.charCodeAt(e));)e++;return e}function skipSpaceBack(o,e,s){for(;e>s&&space$2(o.charCodeAt(e-1));)e--;return e}function isFencedCode(o){if(o.next!=96&&o.next!=126)return-1;let e=o.pos+1;for(;e<o.text.length&&o.text.charCodeAt(e)==o.next;)e++;if(e<o.pos+3)return-1;if(o.next==96){for(let s=e;s<o.text.length;s++)if(o.text.charCodeAt(s)==96)return-1}return e}function isBlockquote(o){return o.next!=62?-1:o.text.charCodeAt(o.pos+1)==32?2:1}function isHorizontalRule(o,e,s){if(o.next!=42&&o.next!=45&&o.next!=95)return-1;let a=1;for(let l=o.pos+1;l<o.text.length;l++){let u=o.text.charCodeAt(l);if(u==o.next)a++;else if(!space$2(u))return-1}return s&&o.next==45&&isSetextUnderline(o)>-1&&o.depth==e.stack.length&&e.parser.leafBlockParsers.indexOf(DefaultLeafBlocks.SetextHeading)>-1||a<3?-1:1}function inList(o,e){for(let s=o.stack.length-1;s>=0;s--)if(o.stack[s].type==e)return!0;return!1}function isBulletList(o,e,s){return(o.next==45||o.next==43||o.next==42)&&(o.pos==o.text.length-1||space$2(o.text.charCodeAt(o.pos+1)))&&(!s||inList(e,Type.BulletList)||o.skipSpace(o.pos+2)<o.text.length)?1:-1}function isOrderedList(o,e,s){let a=o.pos,l=o.next;for(;l>=48&&l<=57;){a++;if(a==o.text.length)return-1;l=o.text.charCodeAt(a)}return a==o.pos||a>o.pos+9||l!=46&&l!=41||a<o.text.length-1&&!space$2(o.text.charCodeAt(a+1))||s&&!inList(e,Type.OrderedList)&&(o.skipSpace(a+1)==o.text.length||a>o.pos+1||o.next!=49)?-1:a+1-o.pos}function isAtxHeading(o){if(o.next!=35)return-1;let e=o.pos+1;for(;e<o.text.length&&o.text.charCodeAt(e)==35;)e++;if(e<o.text.length&&o.text.charCodeAt(e)!=32)return-1;let s=e-o.pos;return s>6?-1:s}function isSetextUnderline(o){if(o.next!=45&&o.next!=61||o.indent>=o.baseIndent+4)return-1;let e=o.pos+1;for(;e<o.text.length&&o.text.charCodeAt(e)==o.next;)e++;let s=e;for(;e<o.text.length&&space$2(o.text.charCodeAt(e));)e++;return e==o.text.length?s:-1}const EmptyLine=/^[ \t]*$/,CommentEnd=/-->/,ProcessingEnd=/\?>/,HTMLBlockStyle=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,CommentEnd],[/^\s*<\?/,ProcessingEnd],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,EmptyLine],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,EmptyLine]];function isHTMLBlock(o,e,s){if(o.next!=60)return-1;let a=o.text.slice(o.pos);for(let l=0,u=HTMLBlockStyle.length-(s?1:0);l<u;l++)if(HTMLBlockStyle[l][0].test(a))return l;return-1}function getListIndent(o,e){let s=o.countIndent(e,o.pos,o.indent),a=o.countIndent(o.skipSpace(e),e,s);return a>=s+5?s+1:a}function addCodeText(o,e,s){let a=o.length-1;a>=0&&o[a].to==e&&o[a].type==Type.CodeText?o[a].to=s:o.push(elt(Type.CodeText,e,s))}const DefaultBlockParsers={LinkReference:void 0,IndentedCode(o,e){let s=e.baseIndent+4;if(e.indent<s)return!1;let a=e.findColumn(s),l=o.lineStart+a,u=o.lineStart+e.text.length,c=[],d=[];for(addCodeText(c,l,u);o.nextLine()&&e.depth>=o.stack.length;)if(e.pos==e.text.length){addCodeText(d,o.lineStart-1,o.lineStart);for(let h of e.markers)d.push(h)}else{if(e.indent<s)break;{if(d.length){for(let p of d)p.type==Type.CodeText?addCodeText(c,p.from,p.to):c.push(p);d=[]}addCodeText(c,o.lineStart-1,o.lineStart);for(let p of e.markers)c.push(p);u=o.lineStart+e.text.length;let h=o.lineStart+e.findColumn(e.baseIndent+4);h<u&&addCodeText(c,h,u)}}return d.length&&(d=d.filter(h=>h.type!=Type.CodeText),d.length&&(e.markers=d.concat(e.markers))),o.addNode(o.buffer.writeElements(c,-l).finish(Type.CodeBlock,u-l),l),!0},FencedCode(o,e){let s=isFencedCode(e);if(s<0)return!1;let a=o.lineStart+e.pos,l=e.next,u=s-e.pos,c=e.skipSpace(s),d=skipSpaceBack(e.text,e.text.length,c),h=[elt(Type.CodeMark,a,a+u)];c<d&&h.push(elt(Type.CodeInfo,o.lineStart+c,o.lineStart+d));for(let p=!0,m=!0,g=!1;o.nextLine()&&e.depth>=o.stack.length;p=!1){let y=e.pos;if(e.indent-e.baseIndent<4)for(;y<e.text.length&&e.text.charCodeAt(y)==l;)y++;if(y-e.pos>=u&&e.skipSpace(y)==e.text.length){for(let A of e.markers)h.push(A);m&&g&&addCodeText(h,o.lineStart-1,o.lineStart),h.push(elt(Type.CodeMark,o.lineStart+e.pos,o.lineStart+y)),o.nextLine();break}else{g=!0,p||(addCodeText(h,o.lineStart-1,o.lineStart),m=!1);for(let E of e.markers)h.push(E);let A=o.lineStart+e.basePos,T=o.lineStart+e.text.length;A<T&&(addCodeText(h,A,T),m=!1)}}return o.addNode(o.buffer.writeElements(h,-a).finish(Type.FencedCode,o.prevLineEnd()-a),a),!0},Blockquote(o,e){let s=isBlockquote(e);return s<0?!1:(o.startContext(Type.Blockquote,e.pos),o.addNode(Type.QuoteMark,o.lineStart+e.pos,o.lineStart+e.pos+1),e.moveBase(e.pos+s),null)},HorizontalRule(o,e){if(isHorizontalRule(e,o,!1)<0)return!1;let s=o.lineStart+e.pos;return o.nextLine(),o.addNode(Type.HorizontalRule,s),!0},BulletList(o,e){let s=isBulletList(e,o,!1);if(s<0)return!1;o.block.type!=Type.BulletList&&o.startContext(Type.BulletList,e.basePos,e.next);let a=getListIndent(e,e.pos+1);return o.startContext(Type.ListItem,e.basePos,a-e.baseIndent),o.addNode(Type.ListMark,o.lineStart+e.pos,o.lineStart+e.pos+s),e.moveBaseColumn(a),null},OrderedList(o,e){let s=isOrderedList(e,o,!1);if(s<0)return!1;o.block.type!=Type.OrderedList&&o.startContext(Type.OrderedList,e.basePos,e.text.charCodeAt(e.pos+s-1));let a=getListIndent(e,e.pos+s);return o.startContext(Type.ListItem,e.basePos,a-e.baseIndent),o.addNode(Type.ListMark,o.lineStart+e.pos,o.lineStart+e.pos+s),e.moveBaseColumn(a),null},ATXHeading(o,e){let s=isAtxHeading(e);if(s<0)return!1;let a=e.pos,l=o.lineStart+a,u=skipSpaceBack(e.text,e.text.length,a),c=u;for(;c>a&&e.text.charCodeAt(c-1)==e.next;)c--;(c==u||c==a||!space$2(e.text.charCodeAt(c-1)))&&(c=e.text.length);let d=o.buffer.write(Type.HeaderMark,0,s).writeElements(o.parser.parseInline(e.text.slice(a+s+1,c),l+s+1),-l);c<e.text.length&&d.write(Type.HeaderMark,c-a,u-a);let h=d.finish(Type.ATXHeading1-1+s,e.text.length-a);return o.nextLine(),o.addNode(h,l),!0},HTMLBlock(o,e){let s=isHTMLBlock(e,o,!1);if(s<0)return!1;let a=o.lineStart+e.pos,l=HTMLBlockStyle[s][1],u=[],c=l!=EmptyLine;for(;!l.test(e.text)&&o.nextLine();){if(e.depth<o.stack.length){c=!1;break}for(let p of e.markers)u.push(p)}c&&o.nextLine();let d=l==CommentEnd?Type.CommentBlock:l==ProcessingEnd?Type.ProcessingInstructionBlock:Type.HTMLBlock,h=o.prevLineEnd();return o.addNode(o.buffer.writeElements(u,-a).finish(d,h-a),a),!0},SetextHeading:void 0};class LinkReferenceParser{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,s,a){if(this.stage==-1)return!1;let l=a.content+`
`+s.scrub(),u=this.advance(l);return u>-1&&u<l.length?this.complete(e,a,u):!1}finish(e,s){return(this.stage==2||this.stage==3)&&skipSpace(s.content,this.pos)==s.content.length?this.complete(e,s,s.content.length):!1}complete(e,s,a){return e.addLeafElement(s,elt(Type.LinkReference,this.start,this.start+a,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(e===!1&&(this.stage=-1),!1)}advance(e){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(parseLinkLabel(e,this.pos,this.start,!0)))return-1;if(e.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(elt(Type.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(parseURL(e,skipSpace(e,this.pos),this.start)))return-1}else if(this.stage==2){let s=skipSpace(e,this.pos),a=0;if(s>this.pos){let l=parseLinkTitle(e,s,this.start);if(l){let u=lineEnd(e,l.to-this.start);u>0&&(this.nextStage(l),a=u)}}return a||(a=lineEnd(e,this.pos)),a>0&&a<e.length?a:-1}else return lineEnd(e,this.pos)}}}function lineEnd(o,e){for(;e<o.length;e++){let s=o.charCodeAt(e);if(s==10)break;if(!space$2(s))return-1}return e}class SetextHeadingParser{nextLine(e,s,a){let l=s.depth<e.stack.length?-1:isSetextUnderline(s),u=s.next;if(l<0)return!1;let c=elt(Type.HeaderMark,e.lineStart+s.pos,e.lineStart+l);return e.nextLine(),e.addLeafElement(a,elt(u==61?Type.SetextHeading1:Type.SetextHeading2,a.start,e.prevLineEnd(),[...e.parser.parseInline(a.content,a.start),c])),!0}finish(){return!1}}const DefaultLeafBlocks={LinkReference(o,e){return e.content.charCodeAt(0)==91?new LinkReferenceParser(e):null},SetextHeading(){return new SetextHeadingParser}},DefaultEndLeaf=[(o,e)=>isAtxHeading(e)>=0,(o,e)=>isFencedCode(e)>=0,(o,e)=>isBlockquote(e)>=0,(o,e)=>isBulletList(e,o,!0)>=0,(o,e)=>isOrderedList(e,o,!0)>=0,(o,e)=>isHorizontalRule(e,o,!0)>=0,(o,e)=>isHTMLBlock(e,o,!0)>=0],scanLineResult={text:"",end:0};class BlockContext{constructor(e,s,a,l){this.parser=e,this.input=s,this.ranges=l,this.line=new Line,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=l[l.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=l[0].from,this.block=CompositeBlock.create(Type.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=a.length?new FragmentCursor$1(a,s):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(let a=0;;){let l=e.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;a<e.markers.length&&(!l||e.markers[a].from<l.end);){let u=e.markers[a++];this.addNode(u.type,u.from,u.to)}if(!l)break;this.finishContext()}if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let a of this.parser.blockParsers)if(a){let l=a(this,e);if(l!=!1){if(l==!0)return null;e.forward();continue e}}break}let s=new LeafBlock(this.lineStart+e.pos,e.text.slice(e.pos));for(let a of this.parser.leafBlockParsers)if(a){let l=a(this,s);l&&s.parsers.push(l)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let a of this.parser.endLeafBlock)if(a(this,e,s))break e}for(let a of s.parsers)if(a.nextLine(this,e,s))return null;s.content+=`
`+e.scrub();for(let a of e.markers)s.marks.push(a)}return this.finishLeaf(s),null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let s=this.fragments.takeNodes(this);return s?(this.absoluteLineStart+=s,this.lineStart=toRelative(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0):!1}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let s=scanLineResult;if(s.end=e,e>=this.to)s.text="";else if(s.text=this.lineChunkAt(e),s.end+=s.text.length,this.ranges.length>1){let a=this.absoluteLineStart,l=this.rangeI;for(;this.ranges[l].to<s.end;){l++;let u=this.ranges[l].from,c=this.lineChunkAt(u);s.end=u+c.length,s.text=s.text.slice(0,this.ranges[l-1].to-a)+c,a=s.end-s.text.length}}return s}readLine(){let{line:e}=this,{text:s,end:a}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=a,e.reset(s);e.depth<this.stack.length;e.depth++){let l=this.stack[e.depth],u=this.parser.skipContextMarkup[l.type];if(!u)throw new Error("Unhandled block context "+Type[l.type]);let c=this.line.markers.length;if(!u(l,this,e)){this.line.markers.length>c&&(l.end=this.line.markers[this.line.markers.length-1].to),e.forward();break}e.forward()}}lineChunkAt(e){let s=this.input.chunk(e),a;if(this.input.lineChunks)a=s==`
`?"":s;else{let l=s.indexOf(`
`);a=l<0?s:s.slice(0,l)}return e+a.length>this.to?a.slice(0,this.to-e):a}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,s,a=0){this.block=CompositeBlock.create(e,a,this.lineStart+s,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,s,a=0){this.startContext(this.parser.getNodeType(e),s,a)}addNode(e,s,a){typeof e=="number"&&(e=new Tree(this.parser.nodeSet.types[e],none,none,(a??this.prevLineEnd())-s)),this.block.addChild(e,s-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,s){this.addNode(this.buffer.writeElements(injectMarks(s.children,e.marks),-s.from).finish(s.type,s.to-s.from),s.from)}finishContext(){let e=this.stack.pop(),s=this.stack[this.stack.length-1];s.addChild(e.toTree(this.parser.nodeSet),e.from-s.from),this.block=s}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?injectGaps(this.ranges,0,e.topNode,this.ranges[0].from,this.reusePlaceholders):e}finishLeaf(e){for(let a of e.parsers)if(a.finish(this,e))return;let s=injectMarks(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(s,-e.start).finish(Type.Paragraph,e.content.length),e.start)}elt(e,s,a,l){return typeof e=="string"?elt(this.parser.getNodeType(e),s,a,l):new TreeElement(e,s)}get buffer(){return new Buffer(this.parser.nodeSet)}}function injectGaps(o,e,s,a,l){let u=o[e].to,c=[],d=[],h=s.from+a;function p(m,g){for(;g?m>=u:m>u;){let y=o[e+1].from-u;a+=y,m+=y,e++,u=o[e].to}}for(let m=s.firstChild;m;m=m.nextSibling){p(m.from+a,!0);let g=m.from+a,y,A=l.get(m.tree);A?y=A:m.to+a>u?(y=injectGaps(o,e,m,a,l),p(m.to+a,!1)):y=m.toTree(),c.push(y),d.push(g-h)}return p(s.to+a,!1),new Tree(s.type,c,d,s.to+a-h,s.tree?s.tree.propValues:void 0)}class MarkdownParser extends Parser{constructor(e,s,a,l,u,c,d,h,p){super(),this.nodeSet=e,this.blockParsers=s,this.leafBlockParsers=a,this.blockNames=l,this.endLeafBlock=u,this.skipContextMarkup=c,this.inlineParsers=d,this.inlineNames=h,this.wrappers=p,this.nodeTypes=Object.create(null);for(let m of e.types)this.nodeTypes[m.name]=m.id}createParse(e,s,a){let l=new BlockContext(this,e,s,a);for(let u of this.wrappers)l=u(l,e,s,a);return l}configure(e){let s=resolveConfig(e);if(!s)return this;let{nodeSet:a,skipContextMarkup:l}=this,u=this.blockParsers.slice(),c=this.leafBlockParsers.slice(),d=this.blockNames.slice(),h=this.inlineParsers.slice(),p=this.inlineNames.slice(),m=this.endLeafBlock.slice(),g=this.wrappers;if(nonEmpty(s.defineNodes)){l=Object.assign({},l);let y=a.types.slice(),A;for(let T of s.defineNodes){let{name:E,block:v,composite:_,style:w}=typeof T=="string"?{name:T}:T;if(y.some(I=>I.name==E))continue;_&&(l[y.length]=(I,P,N)=>_(P,N,I.value));let R=y.length,k=_?["Block","BlockContext"]:v?R>=Type.ATXHeading1&&R<=Type.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;y.push(NodeType.define({id:R,name:E,props:k&&[[NodeProp.group,k]]})),w&&(A||(A={}),Array.isArray(w)||w instanceof Tag?A[E]=w:Object.assign(A,w))}a=new NodeSet(y),A&&(a=a.extend(styleTags(A)))}if(nonEmpty(s.props)&&(a=a.extend(...s.props)),nonEmpty(s.remove))for(let y of s.remove){let A=this.blockNames.indexOf(y),T=this.inlineNames.indexOf(y);A>-1&&(u[A]=c[A]=void 0),T>-1&&(h[T]=void 0)}if(nonEmpty(s.parseBlock))for(let y of s.parseBlock){let A=d.indexOf(y.name);if(A>-1)u[A]=y.parse,c[A]=y.leaf;else{let T=y.before?findName(d,y.before):y.after?findName(d,y.after)+1:d.length-1;u.splice(T,0,y.parse),c.splice(T,0,y.leaf),d.splice(T,0,y.name)}y.endLeaf&&m.push(y.endLeaf)}if(nonEmpty(s.parseInline))for(let y of s.parseInline){let A=p.indexOf(y.name);if(A>-1)h[A]=y.parse;else{let T=y.before?findName(p,y.before):y.after?findName(p,y.after)+1:p.length-1;h.splice(T,0,y.parse),p.splice(T,0,y.name)}}return s.wrap&&(g=g.concat(s.wrap)),new MarkdownParser(a,u,c,d,m,l,h,p,g)}getNodeType(e){let s=this.nodeTypes[e];if(s==null)throw new RangeError(`Unknown node type '${e}'`);return s}parseInline(e,s){let a=new InlineContext(this,e,s);e:for(let l=s;l<a.end;){let u=a.char(l);for(let c of this.inlineParsers)if(c){let d=c(a,u,l);if(d>=0){l=d;continue e}}l++}return a.resolveMarkers(0)}}function nonEmpty(o){return o!=null&&o.length>0}function resolveConfig(o){if(!Array.isArray(o))return o;if(o.length==0)return null;let e=resolveConfig(o[0]);if(o.length==1)return e;let s=resolveConfig(o.slice(1));if(!s||!e)return e||s;let a=(c,d)=>(c||none).concat(d||none),l=e.wrap,u=s.wrap;return{props:a(e.props,s.props),defineNodes:a(e.defineNodes,s.defineNodes),parseBlock:a(e.parseBlock,s.parseBlock),parseInline:a(e.parseInline,s.parseInline),remove:a(e.remove,s.remove),wrap:l?u?(c,d,h,p)=>l(u(c,d,h,p),d,h,p):l:u}}function findName(o,e){let s=o.indexOf(e);if(s<0)throw new RangeError(`Position specified relative to unknown parser ${e}`);return s}let nodeTypes=[NodeType.none];for(let o=1,e;e=Type[o];o++)nodeTypes[o]=NodeType.define({id:o,name:e,props:o>=Type.Escape?[]:[[NodeProp.group,o in DefaultSkipMarkup?["Block","BlockContext"]:["Block","LeafBlock"]]],top:e=="Document"});const none=[];class Buffer{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,s,a,l=0){return this.content.push(e,s,a,4+l*4),this}writeElements(e,s=0){for(let a of e)a.writeTo(this,s);return this}finish(e,s){return Tree.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:s})}}let Element$2=class{constructor(e,s,a,l=none){this.type=e,this.from=s,this.to=a,this.children=l}writeTo(e,s){let a=e.content.length;e.writeElements(this.children,s),e.content.push(this.type,this.from+s,this.to+s,e.content.length+4-a)}toTree(e){return new Buffer(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}};class TreeElement{constructor(e,s){this.tree=e,this.from=s}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return none}writeTo(e,s){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+s,this.to+s,-1)}toTree(){return this.tree}}function elt(o,e,s,a){return new Element$2(o,e,s,a)}const EmphasisUnderscore={resolve:"Emphasis",mark:"EmphasisMark"},EmphasisAsterisk={resolve:"Emphasis",mark:"EmphasisMark"},LinkStart={},ImageStart={};class InlineDelimiter{constructor(e,s,a,l){this.type=e,this.from=s,this.to=a,this.side=l}}const Escapable="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let Punctuation=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{Punctuation=new RegExp("[\\p{S}|\\p{P}]","u")}catch(o){}const DefaultInline={Escape(o,e,s){if(e!=92||s==o.end-1)return-1;let a=o.char(s+1);for(let l=0;l<Escapable.length;l++)if(Escapable.charCodeAt(l)==a)return o.append(elt(Type.Escape,s,s+2));return-1},Entity(o,e,s){if(e!=38)return-1;let a=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(o.slice(s+1,s+31));return a?o.append(elt(Type.Entity,s,s+1+a[0].length)):-1},InlineCode(o,e,s){if(e!=96||s&&o.char(s-1)==96)return-1;let a=s+1;for(;a<o.end&&o.char(a)==96;)a++;let l=a-s,u=0;for(;a<o.end;a++)if(o.char(a)==96){if(u++,u==l&&o.char(a+1)!=96)return o.append(elt(Type.InlineCode,s,a+1,[elt(Type.CodeMark,s,s+l),elt(Type.CodeMark,a+1-l,a+1)]))}else u=0;return-1},HTMLTag(o,e,s){if(e!=60||s==o.end-1)return-1;let a=o.slice(s+1,o.end),l=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(a);if(l)return o.append(elt(Type.Autolink,s,s+1+l[0].length,[elt(Type.LinkMark,s,s+1),elt(Type.URL,s+1,s+l[0].length),elt(Type.LinkMark,s+l[0].length,s+1+l[0].length)]));let u=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(a);if(u)return o.append(elt(Type.Comment,s,s+1+u[0].length));let c=/^\?[^]*?\?>/.exec(a);if(c)return o.append(elt(Type.ProcessingInstruction,s,s+1+c[0].length));let d=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(a);return d?o.append(elt(Type.HTMLTag,s,s+1+d[0].length)):-1},Emphasis(o,e,s){if(e!=95&&e!=42)return-1;let a=s+1;for(;o.char(a)==e;)a++;let l=o.slice(s-1,s),u=o.slice(a,a+1),c=Punctuation.test(l),d=Punctuation.test(u),h=/\s|^$/.test(l),p=/\s|^$/.test(u),m=!p&&(!d||h||c),g=!h&&(!c||p||d),y=m&&(e==42||!g||c),A=g&&(e==42||!m||d);return o.append(new InlineDelimiter(e==95?EmphasisUnderscore:EmphasisAsterisk,s,a,(y?1:0)|(A?2:0)))},HardBreak(o,e,s){if(e==92&&o.char(s+1)==10)return o.append(elt(Type.HardBreak,s,s+2));if(e==32){let a=s+1;for(;o.char(a)==32;)a++;if(o.char(a)==10&&a>=s+2)return o.append(elt(Type.HardBreak,s,a+1))}return-1},Link(o,e,s){return e==91?o.append(new InlineDelimiter(LinkStart,s,s+1,1)):-1},Image(o,e,s){return e==33&&o.char(s+1)==91?o.append(new InlineDelimiter(ImageStart,s,s+2,1)):-1},LinkEnd(o,e,s){if(e!=93)return-1;for(let a=o.parts.length-1;a>=0;a--){let l=o.parts[a];if(l instanceof InlineDelimiter&&(l.type==LinkStart||l.type==ImageStart)){if(!l.side||o.skipSpace(l.to)==s&&!/[(\[]/.test(o.slice(s+1,s+2)))return o.parts[a]=null,-1;let u=o.takeContent(a),c=o.parts[a]=finishLink(o,u,l.type==LinkStart?Type.Link:Type.Image,l.from,s+1);if(l.type==LinkStart)for(let d=0;d<a;d++){let h=o.parts[d];h instanceof InlineDelimiter&&h.type==LinkStart&&(h.side=0)}return c.to}}return-1}};function finishLink(o,e,s,a,l){let{text:u}=o,c=o.char(l),d=l;if(e.unshift(elt(Type.LinkMark,a,a+(s==Type.Image?2:1))),e.push(elt(Type.LinkMark,l-1,l)),c==40){let h=o.skipSpace(l+1),p=parseURL(u,h-o.offset,o.offset),m;p&&(h=o.skipSpace(p.to),h!=p.to&&(m=parseLinkTitle(u,h-o.offset,o.offset),m&&(h=o.skipSpace(m.to)))),o.char(h)==41&&(e.push(elt(Type.LinkMark,l,l+1)),d=h+1,p&&e.push(p),m&&e.push(m),e.push(elt(Type.LinkMark,h,d)))}else if(c==91){let h=parseLinkLabel(u,l-o.offset,o.offset,!1);h&&(e.push(h),d=h.to)}return elt(s,a,d,e)}function parseURL(o,e,s){if(o.charCodeAt(e)==60){for(let l=e+1;l<o.length;l++){let u=o.charCodeAt(l);if(u==62)return elt(Type.URL,e+s,l+1+s);if(u==60||u==10)return!1}return null}else{let l=0,u=e;for(let c=!1;u<o.length;u++){let d=o.charCodeAt(u);if(space$2(d))break;if(c)c=!1;else if(d==40)l++;else if(d==41){if(!l)break;l--}else d==92&&(c=!0)}return u>e?elt(Type.URL,e+s,u+s):u==o.length?null:!1}}function parseLinkTitle(o,e,s){let a=o.charCodeAt(e);if(a!=39&&a!=34&&a!=40)return!1;let l=a==40?41:a;for(let u=e+1,c=!1;u<o.length;u++){let d=o.charCodeAt(u);if(c)c=!1;else{if(d==l)return elt(Type.LinkTitle,e+s,u+1+s);d==92&&(c=!0)}}return null}function parseLinkLabel(o,e,s,a){for(let l=!1,u=e+1,c=Math.min(o.length,u+999);u<c;u++){let d=o.charCodeAt(u);if(l)l=!1;else{if(d==93)return a?!1:elt(Type.LinkLabel,e+s,u+1+s);if(a&&!space$2(d)&&(a=!1),d==91)return!1;d==92&&(l=!0)}}return null}class InlineContext{constructor(e,s,a){this.parser=e,this.text=s,this.offset=a,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,s){return this.text.slice(e-this.offset,s-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,s,a,l,u){return this.append(new InlineDelimiter(e,s,a,(l?1:0)|(u?2:0)))}get hasOpenLink(){for(let e=this.parts.length-1;e>=0;e--){let s=this.parts[e];if(s instanceof InlineDelimiter&&(s.type==LinkStart||s.type==ImageStart))return!0}return!1}addElement(e){return this.append(e)}resolveMarkers(e){for(let a=e;a<this.parts.length;a++){let l=this.parts[a];if(!(l instanceof InlineDelimiter&&l.type.resolve&&l.side&2))continue;let u=l.type==EmphasisUnderscore||l.type==EmphasisAsterisk,c=l.to-l.from,d,h=a-1;for(;h>=e;h--){let E=this.parts[h];if(E instanceof InlineDelimiter&&E.side&1&&E.type==l.type&&!(u&&(l.side&1||E.side&2)&&(E.to-E.from+c)%3==0&&((E.to-E.from)%3||c%3))){d=E;break}}if(!d)continue;let p=l.type.resolve,m=[],g=d.from,y=l.to;if(u){let E=Math.min(2,d.to-d.from,c);g=d.to-E,y=l.from+E,p=E==1?"Emphasis":"StrongEmphasis"}d.type.mark&&m.push(this.elt(d.type.mark,g,d.to));for(let E=h+1;E<a;E++)this.parts[E]instanceof Element$2&&m.push(this.parts[E]),this.parts[E]=null;l.type.mark&&m.push(this.elt(l.type.mark,l.from,y));let A=this.elt(p,g,y,m);this.parts[h]=u&&d.from!=g?new InlineDelimiter(d.type,d.from,g,d.side):null,(this.parts[a]=u&&l.to!=y?new InlineDelimiter(l.type,y,l.to,l.side):null)?this.parts.splice(a,0,A):this.parts[a]=A}let s=[];for(let a=e;a<this.parts.length;a++){let l=this.parts[a];l instanceof Element$2&&s.push(l)}return s}findOpeningDelimiter(e){for(let s=this.parts.length-1;s>=0;s--){let a=this.parts[s];if(a instanceof InlineDelimiter&&a.type==e&&a.side&1)return s}return null}takeContent(e){let s=this.resolveMarkers(e);return this.parts.length=e,s}getDelimiterAt(e){let s=this.parts[e];return s instanceof InlineDelimiter?s:null}skipSpace(e){return skipSpace(this.text,e-this.offset)+this.offset}elt(e,s,a,l){return typeof e=="string"?elt(this.parser.getNodeType(e),s,a,l):new TreeElement(e,s)}}InlineContext.linkStart=LinkStart,InlineContext.imageStart=ImageStart;function injectMarks(o,e){if(!e.length)return o;if(!o.length)return e;let s=o.slice(),a=0;for(let l of e){for(;a<s.length&&s[a].to<l.to;)a++;if(a<s.length&&s[a].from<l.from){let u=s[a];u instanceof Element$2&&(s[a]=new Element$2(u.type,u.from,u.to,injectMarks(u.children,[l])))}else s.splice(a++,0,l)}return s}const NotLast=[Type.CodeBlock,Type.ListItem,Type.OrderedList,Type.BulletList];let FragmentCursor$1=class{constructor(e,s){this.fragments=e,this.input=s,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,s){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let u=this.fragment.to;for(;u>0&&this.input.read(u-1,u)!=`
`;)u--;this.fragmentEnd=u?u-1:0}let a=this.cursor;a||(a=this.cursor=this.fragment.tree.cursor(),a.firstChild());let l=e+this.fragment.offset;for(;a.to<=l;)if(!a.parent())return!1;for(;;){if(a.from>=l)return this.fragment.from<=s;if(!a.childAfter(l))return!1}}matches(e){let s=this.cursor.tree;return s&&s.prop(NodeProp.contextHash)==e}takeNodes(e){let s=this.cursor,a=this.fragment.offset,l=this.fragmentEnd-(this.fragment.openEnd?1:0),u=e.absoluteLineStart,c=u,d=e.block.children.length,h=c,p=d;for(;;){if(s.to-a>l){if(s.type.isAnonymous&&s.firstChild())continue;break}let m=toRelative(s.from-a,e.ranges);if(s.to-a<=e.ranges[e.rangeI].to)e.addNode(s.tree,m);else{let g=new Tree(e.parser.nodeSet.types[Type.Paragraph],[],[],0,e.block.hashProp);e.reusePlaceholders.set(g,s.tree),e.addNode(g,m)}if(s.type.is("Block")&&(NotLast.indexOf(s.type.id)<0?(c=s.to-a,d=e.block.children.length):(c=h,d=p),h=s.to-a,p=e.block.children.length),!s.nextSibling())break}for(;e.block.children.length>d;)e.block.children.pop(),e.block.positions.pop();return c-u}};function toRelative(o,e){let s=o;for(let a=1;a<e.length;a++){let l=e[a-1].to,u=e[a].from;l<o&&(s-=u-l)}return s}const markdownHighlighting=styleTags({"Blockquote/...":tags$1.quote,HorizontalRule:tags$1.contentSeparator,"ATXHeading1/... SetextHeading1/...":tags$1.heading1,"ATXHeading2/... SetextHeading2/...":tags$1.heading2,"ATXHeading3/...":tags$1.heading3,"ATXHeading4/...":tags$1.heading4,"ATXHeading5/...":tags$1.heading5,"ATXHeading6/...":tags$1.heading6,"Comment CommentBlock":tags$1.comment,Escape:tags$1.escape,Entity:tags$1.character,"Emphasis/...":tags$1.emphasis,"StrongEmphasis/...":tags$1.strong,"Link/... Image/...":tags$1.link,"OrderedList/... BulletList/...":tags$1.list,"BlockQuote/...":tags$1.quote,"InlineCode CodeText":tags$1.monospace,"URL Autolink":tags$1.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":tags$1.processingInstruction,"CodeInfo LinkLabel":tags$1.labelName,LinkTitle:tags$1.string,Paragraph:tags$1.content}),parser$3=new MarkdownParser(new NodeSet(nodeTypes).extend(markdownHighlighting),Object.keys(DefaultBlockParsers).map(o=>DefaultBlockParsers[o]),Object.keys(DefaultBlockParsers).map(o=>DefaultLeafBlocks[o]),Object.keys(DefaultBlockParsers),DefaultEndLeaf,DefaultSkipMarkup,Object.keys(DefaultInline).map(o=>DefaultInline[o]),Object.keys(DefaultInline),[]);function leftOverSpace(o,e,s){let a=[];for(let l=o.firstChild,u=e;;l=l.nextSibling){let c=l?l.from:s;if(c>u&&a.push({from:u,to:c}),!l)break;u=l.to}return a}function parseCode(o){let{codeParser:e,htmlParser:s}=o;return{wrap:parseMixed((l,u)=>{let c=l.type.id;if(e&&(c==Type.CodeBlock||c==Type.FencedCode)){let d="";if(c==Type.FencedCode){let p=l.node.getChild(Type.CodeInfo);p&&(d=u.read(p.from,p.to))}let h=e(d);if(h)return{parser:h,overlay:p=>p.type.id==Type.CodeText,bracketed:c==Type.FencedCode}}else if(s&&(c==Type.HTMLBlock||c==Type.HTMLTag||c==Type.CommentBlock))return{parser:s,overlay:leftOverSpace(l.node,l.from,l.to)};return null})}}const StrikethroughDelim={resolve:"Strikethrough",mark:"StrikethroughMark"},Strikethrough={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":tags$1.strikethrough}},{name:"StrikethroughMark",style:tags$1.processingInstruction}],parseInline:[{name:"Strikethrough",parse(o,e,s){if(e!=126||o.char(s+1)!=126||o.char(s+2)==126)return-1;let a=o.slice(s-1,s),l=o.slice(s+2,s+3),u=/\s|^$/.test(a),c=/\s|^$/.test(l),d=Punctuation.test(a),h=Punctuation.test(l);return o.addDelimiter(StrikethroughDelim,s,s+2,!c&&(!h||u||d),!u&&(!d||c||h))},after:"Emphasis"}]};function parseRow(o,e,s=0,a,l=0){let u=0,c=!0,d=-1,h=-1,p=!1,m=()=>{a.push(o.elt("TableCell",l+d,l+h,o.parser.parseInline(e.slice(d,h),l+d)))};for(let g=s;g<e.length;g++){let y=e.charCodeAt(g);y==124&&!p?((!c||d>-1)&&u++,c=!1,a&&(d>-1&&m(),a.push(o.elt("TableDelimiter",g+l,g+l+1))),d=h=-1):(p||y!=32&&y!=9)&&(d<0&&(d=g),h=g+1),p=!p&&y==92}return d>-1&&(u++,a&&m()),u}function hasPipe(o,e){for(let s=e;s<o.length;s++){let a=o.charCodeAt(s);if(a==124)return!0;a==92&&s++}return!1}const delimiterLine=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class TableParser{constructor(){this.rows=null}nextLine(e,s,a){if(this.rows==null){this.rows=!1;let l;if((s.next==45||s.next==58||s.next==124)&&delimiterLine.test(l=s.text.slice(s.pos))){let u=[];parseRow(e,a.content,0,u,a.start)==parseRow(e,l,s.pos)&&(this.rows=[e.elt("TableHeader",a.start,a.start+a.content.length,u),e.elt("TableDelimiter",e.lineStart+s.pos,e.lineStart+s.text.length)])}}else if(this.rows){let l=[];parseRow(e,s.text,s.pos,l,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+s.pos,e.lineStart+s.text.length,l))}return!1}finish(e,s){return this.rows?(e.addLeafElement(s,e.elt("Table",s.start,s.start+s.content.length,this.rows)),!0):!1}}const Table={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":tags$1.heading}},"TableRow",{name:"TableCell",style:tags$1.content},{name:"TableDelimiter",style:tags$1.processingInstruction}],parseBlock:[{name:"Table",leaf(o,e){return hasPipe(e.content,0)?new TableParser:null},endLeaf(o,e,s){if(s.parsers.some(l=>l instanceof TableParser)||!hasPipe(e.text,e.basePos))return!1;let a=o.peekLine();return delimiterLine.test(a)&&parseRow(o,e.text,e.basePos)==parseRow(o,a,e.basePos)},before:"SetextHeading"}]};class TaskParser{nextLine(){return!1}finish(e,s){return e.addLeafElement(s,e.elt("Task",s.start,s.start+s.content.length,[e.elt("TaskMarker",s.start,s.start+3),...e.parser.parseInline(s.content.slice(3),s.start+3)])),!0}}const TaskList={defineNodes:[{name:"Task",block:!0,style:tags$1.list},{name:"TaskMarker",style:tags$1.atom}],parseBlock:[{name:"TaskList",leaf(o,e){return/^\[[ xX]\][ \t]/.test(e.content)&&o.parentType().name=="ListItem"?new TaskParser:null},after:"SetextHeading"}]},autolinkRE=/(www\.)|(https?:\/\/)|([\w.+-]{1,100}@)|(mailto:|xmpp:)/gy,urlRE=/[\w-]+(\.[\w-]+)+(\/[^\s<]*)?/gy,lastTwoDomainWords=/[\w-]+\.[\w-]+($|\/)/,emailRE=/[\w.+-]+@[\w-]+(\.[\w.-]+)+/gy,xmppResourceRE=/\/[a-zA-Z\d@.]+/gy;function count(o,e,s,a){let l=0;for(let u=e;u<s;u++)o[u]==a&&l++;return l}function autolinkURLEnd(o,e){urlRE.lastIndex=e;let s=urlRE.exec(o);if(!s||lastTwoDomainWords.exec(s[0])[0].indexOf("_")>-1)return-1;let a=e+s[0].length;for(;;){let l=o[a-1],u;if(/[?!.,:*_~]/.test(l)||l==")"&&count(o,e,a,")")>count(o,e,a,"("))a--;else if(l==";"&&(u=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(o.slice(e,a))))a=e+u.index;else break}return a}function autolinkEmailEnd(o,e){emailRE.lastIndex=e;let s=emailRE.exec(o);if(!s)return-1;let a=s[0][s[0].length-1];return a=="_"||a=="-"?-1:e+s[0].length-(a=="."?1:0)}const Autolink={parseInline:[{name:"Autolink",parse(o,e,s){let a=s-o.offset;if(a&&/\w/.test(o.text[a-1]))return-1;autolinkRE.lastIndex=a;let l=autolinkRE.exec(o.text),u=-1;if(!l)return-1;if(l[1]||l[2]){if(u=autolinkURLEnd(o.text,a+l[0].length),u>-1&&o.hasOpenLink){let c=/([^\[\]]|\[[^\]]*\])*/.exec(o.text.slice(a,u));u=a+c[0].length}}else l[3]?u=autolinkEmailEnd(o.text,a):(u=autolinkEmailEnd(o.text,a+l[0].length),u>-1&&l[0]=="xmpp:"&&(xmppResourceRE.lastIndex=u,l=xmppResourceRE.exec(o.text),l&&(u=l.index+l[0].length)));return u<0?-1:(o.addElement(o.elt("URL",s,u+o.offset)),u+o.offset)}}]},GFM=[Table,TaskList,Strikethrough,Autolink];function parseSubSuper(o,e,s){return(a,l,u)=>{if(l!=o||a.char(u+1)==o)return-1;let c=[a.elt(s,u,u+1)];for(let d=u+1;d<a.end;d++){let h=a.char(d);if(h==o)return a.addElement(a.elt(e,u,d+1,c.concat(a.elt(s,d,d+1))));if(h==92&&c.push(a.elt("Escape",d,d+++2)),space$2(h))break}return-1}}const Superscript={defineNodes:[{name:"Superscript",style:tags$1.special(tags$1.content)},{name:"SuperscriptMark",style:tags$1.processingInstruction}],parseInline:[{name:"Superscript",parse:parseSubSuper(94,"Superscript","SuperscriptMark")}]},Subscript={defineNodes:[{name:"Subscript",style:tags$1.special(tags$1.content)},{name:"SubscriptMark",style:tags$1.processingInstruction}],parseInline:[{name:"Subscript",parse:parseSubSuper(126,"Subscript","SubscriptMark")}]},Emoji={defineNodes:[{name:"Emoji",style:tags$1.character}],parseInline:[{name:"Emoji",parse(o,e,s){let a;return e!=58||!(a=/^[a-zA-Z_0-9]+:/.exec(o.slice(s+1,o.end)))?-1:o.addElement(o.elt("Emoji",s,s+1+a[0].length))}}]};function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var browser={exports:{}},process=browser.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(o){if(cachedSetTimeout===setTimeout)return setTimeout(o,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(o,0);try{return cachedSetTimeout(o,0)}catch{try{return cachedSetTimeout.call(null,o,0)}catch{return cachedSetTimeout.call(this,o,0)}}}function runClearTimeout(o){if(cachedClearTimeout===clearTimeout)return clearTimeout(o);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(o);try{return cachedClearTimeout(o)}catch{try{return cachedClearTimeout.call(null,o)}catch{return cachedClearTimeout.call(this,o)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var o=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(o)}}process.nextTick=function(o){var e=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)e[s-1]=arguments[s];queue.push(new Item$1(o,e)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item$1(o,e){this.fun=o,this.array=e}Item$1.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={};function noop$3(){}process.on=noop$3,process.addListener=noop$3,process.once=noop$3,process.off=noop$3,process.removeListener=noop$3,process.removeAllListeners=noop$3,process.emit=noop$3,process.prependListener=noop$3,process.prependOnceListener=noop$3,process.listeners=function(o){return[]},process.binding=function(o){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(o){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};var browserExports=browser.exports;const process$1=getDefaultExportFromCjs(browserExports);var define_process_env_default={};class Stack{constructor(e,s,a,l,u,c,d,h,p,m=0,g){this.p=e,this.stack=s,this.state=a,this.reducePos=l,this.pos=u,this.score=c,this.buffer=d,this.bufferBase=h,this.curContext=p,this.lookAhead=m,this.parent=g}toString(){return`[${this.stack.filter((e,s)=>s%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,s,a=0){let l=e.parser.context;return new Stack(e,[],s,a,a,0,[],0,l?new StackContext(l,l.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,s){this.stack.push(this.state,s,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var s;let a=e>>19,l=e&65535,{parser:u}=this.p,c=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),d=u.dynamicPrecedence(l);if(d&&(this.score+=d),a==0){this.pushState(u.getGoto(this.state,l,!0),this.reducePos),l<u.minRepeatTerm&&this.storeNode(l,this.reducePos,this.reducePos,c?8:4,!0),this.reduceContext(l,this.reducePos);return}let h=this.stack.length-(a-1)*3-(e&262144?6:0),p=h?this.stack[h-2]:this.p.ranges[0].from,m=this.reducePos-p;m>=2e3&&!(!((s=this.p.parser.nodeSet.types[l])===null||s===void 0)&&s.isAnonymous)&&(p==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=m):this.p.lastBigReductionSize<m&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=p,this.p.lastBigReductionSize=m));let g=h?this.stack[h-1]:0,y=this.bufferBase+this.buffer.length-g;if(l<u.minRepeatTerm||e&131072){let A=u.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(l,p,A,y+4,!0)}if(e&262144)this.state=this.stack[h];else{let A=this.stack[h-3];this.state=u.getGoto(A,l,!0)}for(;this.stack.length>h;)this.stack.pop();this.reduceContext(l,p)}storeNode(e,s,a,l=4,u=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let c=this,d=this.buffer.length;if(d==0&&c.parent&&(d=c.bufferBase-c.parent.bufferBase,c=c.parent),d>0&&c.buffer[d-4]==0&&c.buffer[d-1]>-1){if(s==a)return;if(c.buffer[d-2]>=s){c.buffer[d-2]=a;return}}}if(!u||this.pos==a)this.buffer.push(e,s,a,l);else{let c=this.buffer.length;if(c>0&&(this.buffer[c-4]!=0||this.buffer[c-1]<0)){let d=!1;for(let h=c;h>0&&this.buffer[h-2]>a;h-=4)if(this.buffer[h-1]>=0){d=!0;break}if(d)for(;c>0&&this.buffer[c-2]>a;)this.buffer[c]=this.buffer[c-4],this.buffer[c+1]=this.buffer[c-3],this.buffer[c+2]=this.buffer[c-2],this.buffer[c+3]=this.buffer[c-1],c-=4,l>4&&(l-=4)}this.buffer[c]=e,this.buffer[c+1]=s,this.buffer[c+2]=a,this.buffer[c+3]=l}}shift(e,s,a,l){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let u=e,{parser:c}=this.p;this.pos=l;let d=c.stateFlag(u,1);!d&&(l>a||s<=c.maxNode)&&(this.reducePos=l),this.pushState(u,d?a:Math.min(a,this.reducePos)),this.shiftContext(s,a),s<=c.maxNode&&this.buffer.push(s,a,l,4)}else this.pos=l,this.shiftContext(s,a),s<=this.p.parser.maxNode&&this.buffer.push(s,a,l,4)}apply(e,s,a,l){e&65536?this.reduce(e):this.shift(e,s,a,l)}useNode(e,s){let a=this.p.reused.length-1;(a<0||this.p.reused[a]!=e)&&(this.p.reused.push(e),a++);let l=this.pos;this.reducePos=this.pos=l+e.length,this.pushState(s,l),this.buffer.push(a,l,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,s=e.buffer.length;for(;s>0&&e.buffer[s-2]>e.reducePos;)s-=4;let a=e.buffer.slice(s),l=e.bufferBase+s;for(;e&&l==e.bufferBase;)e=e.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,a,l,this.curContext,this.lookAhead,e)}recoverByDelete(e,s){let a=e<=this.p.parser.maxNode;a&&this.storeNode(e,this.pos,s,4),this.storeNode(0,this.pos,s,a?8:4),this.pos=this.reducePos=s,this.score-=190}canShift(e){for(let s=new SimulatedStack(this);;){let a=this.p.parser.stateSlot(s.state,4)||this.p.parser.hasAction(s.state,e);if(a==0)return!1;if((a&65536)==0)return!0;s.reduce(a)}}recoverByInsert(e){if(this.stack.length>=300)return[];let s=this.p.parser.nextStates(this.state);if(s.length>8||this.stack.length>=120){let l=[];for(let u=0,c;u<s.length;u+=2)(c=s[u+1])!=this.state&&this.p.parser.hasAction(c,e)&&l.push(s[u],c);if(this.stack.length<120)for(let u=0;l.length<8&&u<s.length;u+=2){let c=s[u+1];l.some((d,h)=>h&1&&d==c)||l.push(s[u],c)}s=l}let a=[];for(let l=0;l<s.length&&a.length<4;l+=2){let u=s[l+1];if(u==this.state)continue;let c=this.split();c.pushState(u,this.pos),c.storeNode(0,c.pos,c.pos,4,!0),c.shiftContext(s[l],this.pos),c.reducePos=this.pos,c.score-=200,a.push(c)}return a}forceReduce(){let{parser:e}=this.p,s=e.stateSlot(this.state,5);if((s&65536)==0)return!1;if(!e.validAction(this.state,s)){let a=s>>19,l=s&65535,u=this.stack.length-a*3;if(u<0||e.getGoto(this.stack[u],l,!1)<0){let c=this.findForcedReduction();if(c==null)return!1;s=c}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(s),!0}findForcedReduction(){let{parser:e}=this.p,s=[],a=(l,u)=>{if(!s.includes(l))return s.push(l),e.allActions(l,c=>{if(!(c&393216))if(c&65536){let d=(c>>19)-u;if(d>1){let h=c&65535,p=this.stack.length-d*3;if(p>=0&&e.getGoto(this.stack[p],h,!1)>=0)return d<<19|65536|h}}else{let d=a(c,u+1);if(d!=null)return d}})};return a(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let s=0;s<this.stack.length;s+=3)if(this.stack[s]!=e.stack[s])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,s){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(s)))}reduceContext(e,s){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(s)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let s=new StackContext(this.curContext.tracker,e);s.hash!=this.curContext.hash&&this.emitContext(),this.curContext=s}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(e,s){this.tracker=e,this.context=s,this.hash=e.strict?e.hash(s):0}}class SimulatedStack{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let s=e&65535,a=e>>19;a==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(a-1)*3;let l=this.start.p.parser.getGoto(this.stack[this.base-3],s,!0);this.state=l}}class StackBufferCursor{constructor(e,s,a){this.stack=e,this.pos=s,this.index=a,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,s=e.bufferBase+e.buffer.length){return new StackBufferCursor(e,s,s-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(o,e=Uint16Array){if(typeof o!="string")return o;let s=null;for(let a=0,l=0;a<o.length;){let u=0;for(;;){let c=o.charCodeAt(a++),d=!1;if(c==126){u=65535;break}c>=92&&c--,c>=34&&c--;let h=c-32;if(h>=46&&(h-=46,d=!0),u+=h,d)break;u*=46}s?s[l++]=u:s=new e(u)}return s}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(e,s){this.input=e,this.ranges=s,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=s[0].from,this.range=s[0],this.end=s[s.length-1].to,this.readNext()}resolveOffset(e,s){let a=this.range,l=this.rangeIndex,u=this.pos+e;for(;u<a.from;){if(!l)return null;let c=this.ranges[--l];u-=a.from-c.to,a=c}for(;s<0?u>a.to:u>=a.to;){if(l==this.ranges.length-1)return null;let c=this.ranges[++l];u+=c.from-a.to,a=c}return u}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let s of this.ranges)if(s.to>e)return Math.max(e,s.from);return this.end}peek(e){let s=this.chunkOff+e,a,l;if(s>=0&&s<this.chunk.length)a=this.pos+e,l=this.chunk.charCodeAt(s);else{let u=this.resolveOffset(e,1);if(u==null)return-1;if(a=u,a>=this.chunk2Pos&&a<this.chunk2Pos+this.chunk2.length)l=this.chunk2.charCodeAt(a-this.chunk2Pos);else{let c=this.rangeIndex,d=this.range;for(;d.to<=a;)d=this.ranges[++c];this.chunk2=this.input.chunk(this.chunk2Pos=a),a+this.chunk2.length>d.to&&(this.chunk2=this.chunk2.slice(0,d.to-a)),l=this.chunk2.charCodeAt(0)}}return a>=this.token.lookAhead&&(this.token.lookAhead=a+1),l}acceptToken(e,s=0){let a=s?this.resolveOffset(s,-1):this.pos;if(a==null||a<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=a}acceptTokenTo(e,s){this.token.value=e,this.token.end=s}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:s}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=s,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),s=this.pos+e.length;this.chunk=s>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,s){if(s?(this.token=s,s.start=e,s.lookAhead=e+1,s.value=s.extended=-1):this.token=nullToken,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,s){if(e>=this.chunkPos&&s<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,s-this.chunkPos);if(e>=this.chunk2Pos&&s<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,s-this.chunk2Pos);if(e>=this.range.from&&s<=this.range.to)return this.input.read(e,s);let a="";for(let l of this.ranges){if(l.from>=s)break;l.to>e&&(a+=this.input.read(Math.max(l.from,e),Math.min(l.to,s)))}return a}}class TokenGroup{constructor(e,s){this.data=e,this.id=s}token(e,s){let{parser:a}=s.p;readToken(this.data,e,s,this.id,a.data,a.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(e,s,a){this.precTable=s,this.elseToken=a,this.data=typeof e=="string"?decodeArray(e):e}token(e,s){let a=e.pos,l=0;for(;;){let u=e.next<0,c=e.resolveOffset(1,1);if(readToken(this.data,e,s,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(u||l++,c==null)break;e.reset(c,e.token)}l&&(e.reset(a,e.token),e.acceptToken(this.elseToken,l))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(e,s={}){this.token=e,this.contextual=!!s.contextual,this.fallback=!!s.fallback,this.extend=!!s.extend}}function readToken(o,e,s,a,l,u){let c=0,d=1<<a,{dialect:h}=s.p.parser;e:for(;(d&o[c])!=0;){let p=o[c+1];for(let A=c+3;A<p;A+=2)if((o[A+1]&d)>0){let T=o[A];if(h.allows(T)&&(e.token.value==-1||e.token.value==T||overrides(T,e.token.value,l,u))){e.acceptToken(T);break}}let m=e.next,g=0,y=o[c+2];if(e.next<0&&y>g&&o[p+y*3-3]==65535){c=o[p+y*3-1];continue e}for(;g<y;){let A=g+y>>1,T=p+A+(A<<1),E=o[T],v=o[T+1]||65536;if(m<E)y=A;else if(m>=v)g=A+1;else{c=o[T+2],e.advance();continue e}}break}}function findOffset(o,e,s){for(let a=e,l;(l=o[a])!=65535;a++)if(l==s)return a-e;return-1}function overrides(o,e,s,a){let l=findOffset(s,a,e);return l<0||findOffset(s,a,o)<l}const verbose=typeof process$1<"u"&&define_process_env_default&&/\bparse\b/.test(define_process_env_default.LOG);let stackIDs=null;function cutAt(o,e,s){let a=o.cursor(IterMode.IncludeAnonymous);for(a.moveTo(e);;)if(!(s<0?a.childBefore(e):a.childAfter(e)))for(;;){if((s<0?a.to<e:a.from>e)&&!a.type.isError)return s<0?Math.max(0,Math.min(a.to-1,e-25)):Math.min(o.length,Math.max(a.from+1,e+25));if(s<0?a.prevSibling():a.nextSibling())break;if(!a.parent())return s<0?0:o.length}}class FragmentCursor{constructor(e,s){this.fragments=e,this.nodeSet=s,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?cutAt(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?cutAt(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let s=this.trees.length-1;if(s<0)return this.nextFragment(),null;let a=this.trees[s],l=this.index[s];if(l==a.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let u=a.children[l],c=this.start[s]+a.positions[l];if(c>e)return this.nextStart=c,null;if(u instanceof Tree){if(c==e){if(c<this.safeFrom)return null;let d=c+u.length;if(d<=this.safeTo){let h=u.prop(NodeProp.lookAhead);if(!h||d+h<this.fragment.to)return u}}this.index[s]++,c+u.length>=Math.max(this.safeFrom,e)&&(this.trees.push(u),this.start.push(c),this.index.push(0))}else this.index[s]++,this.nextStart=c+u.length}}}class TokenCache{constructor(e,s){this.stream=s,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(a=>new CachedToken)}getActions(e){let s=0,a=null,{parser:l}=e.p,{tokenizers:u}=l,c=l.stateSlot(e.state,3),d=e.curContext?e.curContext.hash:0,h=0;for(let p=0;p<u.length;p++){if((1<<p&c)==0)continue;let m=u[p],g=this.tokens[p];if(!(a&&!m.fallback)&&((m.contextual||g.start!=e.pos||g.mask!=c||g.context!=d)&&(this.updateCachedToken(g,m,e),g.mask=c,g.context=d),g.lookAhead>g.end+25&&(h=Math.max(g.lookAhead,h)),g.value!=0)){let y=s;if(g.extended>-1&&(s=this.addActions(e,g.extended,g.end,s)),s=this.addActions(e,g.value,g.end,s),!m.extend&&(a=g,s>y))break}}for(;this.actions.length>s;)this.actions.pop();return h&&e.setLookAhead(h),!a&&e.pos==this.stream.end&&(a=new CachedToken,a.value=e.p.parser.eofTerm,a.start=a.end=e.pos,s=this.addActions(e,a.value,a.end,s)),this.mainToken=a,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let s=new CachedToken,{pos:a,p:l}=e;return s.start=a,s.end=Math.min(a+1,l.stream.end),s.value=a==l.stream.end?l.parser.eofTerm:0,s}updateCachedToken(e,s,a){let l=this.stream.clipPos(a.pos);if(s.token(this.stream.reset(l,e),a),e.value>-1){let{parser:u}=a.p;for(let c=0;c<u.specialized.length;c++)if(u.specialized[c]==e.value){let d=u.specializers[c](this.stream.read(e.start,e.end),a);if(d>=0&&a.p.parser.dialect.allows(d>>1)){(d&1)==0?e.value=d>>1:e.extended=d>>1;break}}}else e.value=0,e.end=this.stream.clipPos(l+1)}putAction(e,s,a,l){for(let u=0;u<l;u+=3)if(this.actions[u]==e)return l;return this.actions[l++]=e,this.actions[l++]=s,this.actions[l++]=a,l}addActions(e,s,a,l){let{state:u}=e,{parser:c}=e.p,{data:d}=c;for(let h=0;h<2;h++)for(let p=c.stateSlot(u,h?2:1);;p+=3){if(d[p]==65535)if(d[p+1]==1)p=pair(d,p+2);else{l==0&&d[p+1]==2&&(l=this.putAction(pair(d,p+2),s,a,l));break}d[p]==s&&(l=this.putAction(pair(d,p+1),s,a,l))}return l}}class Parse{constructor(e,s,a,l){this.parser=e,this.input=s,this.ranges=l,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(s,l),this.tokens=new TokenCache(e,this.stream),this.topTerm=e.top[1];let{from:u}=l[0];this.stacks=[Stack.start(this,e.top[0],u)],this.fragments=a.length&&this.stream.end-u>e.bufferLength*4?new FragmentCursor(a,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,s=this.minStackPos,a=this.stacks=[],l,u;if(this.bigReductionCount>300&&e.length==1){let[c]=e;for(;c.forceReduce()&&c.stack.length&&c.stack[c.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let c=0;c<e.length;c++){let d=e[c];for(;;){if(this.tokens.mainToken=null,d.pos>s)a.push(d);else{if(this.advanceStack(d,a,e))continue;{l||(l=[],u=[]),l.push(d);let h=this.tokens.getMainToken(d);u.push(h.value,h.end)}}break}}if(!a.length){let c=l&&findFinished(l);if(c)return verbose&&console.log("Finish with "+this.stackID(c)),this.stackToTree(c);if(this.parser.strict)throw verbose&&l&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+s);this.recovering||(this.recovering=5)}if(this.recovering&&l){let c=this.stoppedAt!=null&&l[0].pos>this.stoppedAt?l[0]:this.runRecovery(l,u,a);if(c)return verbose&&console.log("Force-finish "+this.stackID(c)),this.stackToTree(c.forceAll())}if(this.recovering){let c=this.recovering==1?1:this.recovering*3;if(a.length>c)for(a.sort((d,h)=>h.score-d.score);a.length>c;)a.pop();a.some(d=>d.reducePos>s)&&this.recovering--}else if(a.length>1){e:for(let c=0;c<a.length-1;c++){let d=a[c];for(let h=c+1;h<a.length;h++){let p=a[h];if(d.sameState(p)||d.buffer.length>500&&p.buffer.length>500)if((d.score-p.score||d.buffer.length-p.buffer.length)>0)a.splice(h--,1);else{a.splice(c--,1);continue e}}}a.length>12&&(a.sort((c,d)=>d.score-c.score),a.splice(12,a.length-12))}this.minStackPos=a[0].pos;for(let c=1;c<a.length;c++)a[c].pos<this.minStackPos&&(this.minStackPos=a[c].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,s,a){let l=e.pos,{parser:u}=this,c=verbose?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&l>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let p=e.curContext&&e.curContext.tracker.strict,m=p?e.curContext.hash:0;for(let g=this.fragments.nodeAt(l);g;){let y=this.parser.nodeSet.types[g.type.id]==g.type?u.getGoto(e.state,g.type.id):-1;if(y>-1&&g.length&&(!p||(g.prop(NodeProp.contextHash)||0)==m))return e.useNode(g,y),verbose&&console.log(c+this.stackID(e)+` (via reuse of ${u.getName(g.type.id)})`),!0;if(!(g instanceof Tree)||g.children.length==0||g.positions[0]>0)break;let A=g.children[0];if(A instanceof Tree&&g.positions[0]==0)g=A;else break}}let d=u.stateSlot(e.state,4);if(d>0)return e.reduce(d),verbose&&console.log(c+this.stackID(e)+` (via always-reduce ${u.getName(d&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let p=0;p<h.length;){let m=h[p++],g=h[p++],y=h[p++],A=p==h.length||!a,T=A?e:e.split(),E=this.tokens.mainToken;if(T.apply(m,g,E?E.start:T.pos,y),verbose&&console.log(c+this.stackID(T)+` (via ${(m&65536)==0?"shift":`reduce of ${u.getName(m&65535)}`} for ${u.getName(g)} @ ${l}${T==e?"":", split"})`),A)return!0;T.pos>l?s.push(T):a.push(T)}return!1}advanceFully(e,s){let a=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>a)return pushStackDedup(e,s),!0}}runRecovery(e,s,a){let l=null,u=!1;for(let c=0;c<e.length;c++){let d=e[c],h=s[c<<1],p=s[(c<<1)+1],m=verbose?this.stackID(d)+" -> ":"";if(d.deadEnd&&(u||(u=!0,d.restart(),verbose&&console.log(m+this.stackID(d)+" (restarted)"),this.advanceFully(d,a))))continue;let g=d.split(),y=m;for(let A=0;A<10&&g.forceReduce()&&(verbose&&console.log(y+this.stackID(g)+" (via force-reduce)"),!this.advanceFully(g,a));A++)verbose&&(y=this.stackID(g)+" -> ");for(let A of d.recoverByInsert(h))verbose&&console.log(m+this.stackID(A)+" (via recover-insert)"),this.advanceFully(A,a);this.stream.end>d.pos?(p==d.pos&&(p++,h=0),d.recoverByDelete(h,p),verbose&&console.log(m+this.stackID(d)+` (via recover-delete ${this.parser.getName(h)})`),pushStackDedup(d,a)):(!l||l.score<g.score)&&(l=g)}return l}stackToTree(e){return e.close(),Tree.build({buffer:StackBufferCursor.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let s=(stackIDs||(stackIDs=new WeakMap)).get(e);return s||stackIDs.set(e,s=String.fromCodePoint(this.nextStackID++)),s+e}}function pushStackDedup(o,e){for(let s=0;s<e.length;s++){let a=e[s];if(a.pos==o.pos&&a.sameState(o)){e[s].score<o.score&&(e[s]=o);return}}e.push(o)}class Dialect{constructor(e,s,a){this.source=e,this.flags=s,this.disabled=a}allows(e){return!this.disabled||this.disabled[e]==0}}const id=o=>o;class ContextTracker{constructor(e){this.start=e.start,this.shift=e.shift||id,this.reduce=e.reduce||id,this.reuse=e.reuse||id,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class LRParser extends Parser{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let s=e.nodeNames.split(" ");this.minRepeatTerm=s.length;for(let d=0;d<e.repeatNodeCount;d++)s.push("");let a=Object.keys(e.topRules).map(d=>e.topRules[d][1]),l=[];for(let d=0;d<s.length;d++)l.push([]);function u(d,h,p){l[d].push([h,h.deserialize(String(p))])}if(e.nodeProps)for(let d of e.nodeProps){let h=d[0];typeof h=="string"&&(h=NodeProp[h]);for(let p=1;p<d.length;){let m=d[p++];if(m>=0)u(m,h,d[p++]);else{let g=d[p+-m];for(let y=-m;y>0;y--)u(d[p++],h,g);p++}}}this.nodeSet=new NodeSet(s.map((d,h)=>NodeType.define({name:h>=this.minRepeatTerm?void 0:d,id:h,props:l[h],top:a.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let c=decodeArray(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let d=0;d<this.specializerSpecs.length;d++)this.specialized[d]=this.specializerSpecs[d].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(e.states,Uint32Array),this.data=decodeArray(e.stateData),this.goto=decodeArray(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(d=>typeof d=="number"?new TokenGroup(c,d):d),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,s,a){let l=new Parse(this,e,s,a);for(let u of this.wrappers)l=u(l,e,s,a);return l}getGoto(e,s,a=!1){let l=this.goto;if(s>=l[0])return-1;for(let u=l[s+1];;){let c=l[u++],d=c&1,h=l[u++];if(d&&a)return h;for(let p=u+(c>>1);u<p;u++)if(l[u]==e)return h;if(d)return-1}}hasAction(e,s){let a=this.data;for(let l=0;l<2;l++)for(let u=this.stateSlot(e,l?2:1),c;;u+=3){if((c=a[u])==65535)if(a[u+1]==1)c=a[u=pair(a,u+2)];else{if(a[u+1]==2)return pair(a,u+2);break}if(c==s||c==0)return pair(a,u+1)}return 0}stateSlot(e,s){return this.states[e*6+s]}stateFlag(e,s){return(this.stateSlot(e,0)&s)>0}validAction(e,s){return!!this.allActions(e,a=>a==s?!0:null)}allActions(e,s){let a=this.stateSlot(e,4),l=a?s(a):void 0;for(let u=this.stateSlot(e,1);l==null;u+=3){if(this.data[u]==65535)if(this.data[u+1]==1)u=pair(this.data,u+2);else break;l=s(pair(this.data,u+1))}return l}nextStates(e){let s=[];for(let a=this.stateSlot(e,1);;a+=3){if(this.data[a]==65535)if(this.data[a+1]==1)a=pair(this.data,a+2);else break;if((this.data[a+2]&1)==0){let l=this.data[a+1];s.some((u,c)=>c&1&&u==l)||s.push(this.data[a],l)}}return s}configure(e){let s=Object.assign(Object.create(LRParser.prototype),this);if(e.props&&(s.nodeSet=this.nodeSet.extend(...e.props)),e.top){let a=this.topRules[e.top];if(!a)throw new RangeError(`Invalid top rule name ${e.top}`);s.top=a}return e.tokenizers&&(s.tokenizers=this.tokenizers.map(a=>{let l=e.tokenizers.find(u=>u.from==a);return l?l.to:a})),e.specializers&&(s.specializers=this.specializers.slice(),s.specializerSpecs=this.specializerSpecs.map((a,l)=>{let u=e.specializers.find(d=>d.from==a.external);if(!u)return a;let c=Object.assign(Object.assign({},a),{external:u.to});return s.specializers[l]=getSpecializer(c),c})),e.contextTracker&&(s.context=e.contextTracker),e.dialect&&(s.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(s.strict=e.strict),e.wrap&&(s.wrappers=s.wrappers.concat(e.wrap)),e.bufferLength!=null&&(s.bufferLength=e.bufferLength),s}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let s=this.dynamicPrecedences;return s==null?0:s[e]||0}parseDialect(e){let s=Object.keys(this.dialects),a=s.map(()=>!1);if(e)for(let u of e.split(" ")){let c=s.indexOf(u);c>=0&&(a[c]=!0)}let l=null;for(let u=0;u<s.length;u++)if(!a[u])for(let c=this.dialects[s[u]],d;(d=this.data[c++])!=65535;)(l||(l=new Uint8Array(this.maxTerm+1)))[d]=1;return new Dialect(e,a,l)}static deserialize(e){return new LRParser(e)}}function pair(o,e){return o[e]|o[e+1]<<16}function findFinished(o){let e=null;for(let s of o){let a=s.p.stoppedAt;(s.pos==s.p.stream.end||a!=null&&s.pos>a)&&s.p.parser.stateFlag(s.state,2)&&(!e||e.score<s.score)&&(e=s)}return e}function getSpecializer(o){if(o.external){let e=o.extend?1:0;return(s,a)=>o.external(s,a)<<1|e}return o.get}const scriptText=55,StartCloseScriptTag=1,styleText=56,StartCloseStyleTag=2,textareaText=57,StartCloseTextareaTag=3,EndTag=4,SelfClosingEndTag=5,StartTag=6,StartScriptTag=7,StartStyleTag=8,StartTextareaTag=9,StartSelfClosingTag=10,StartCloseTag=11,NoMatchStartCloseTag=12,MismatchedStartCloseTag=13,missingCloseTag=58,IncompleteTag=14,IncompleteCloseTag=15,commentContent$1=59,Element$1=21,TagName=23,Attribute=24,AttributeName=25,AttributeValue=27,UnquotedAttributeValue=28,ScriptText=29,StyleText=32,TextareaText=35,OpenTag=37,CloseTag=38,Dialect_noMatch=0,Dialect_selfClosing=1,selfClosers$1={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},closeOnOpen={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function nameChar(o){return o==45||o==46||o==58||o>=65&&o<=90||o==95||o>=97&&o<=122||o>=161}let cachedName=null,cachedInput=null,cachedPos=0;function tagNameAfter(o,e){let s=o.pos+e;if(cachedPos==s&&cachedInput==o)return cachedName;let a=o.peek(e),l="";for(;nameChar(a);)l+=String.fromCharCode(a),a=o.peek(++e);return cachedInput=o,cachedPos=s,cachedName=l?l.toLowerCase():a==question$1||a==bang?void 0:null}const lessThan=60,greaterThan=62,slash$1=47,question$1=63,bang=33,dash$1=45;function ElementContext(o,e){this.name=o,this.parent=e}const startTagTerms=[StartTag,StartSelfClosingTag,StartScriptTag,StartStyleTag,StartTextareaTag],elementContext=new ContextTracker({start:null,shift(o,e,s,a){return startTagTerms.indexOf(e)>-1?new ElementContext(tagNameAfter(a,1)||"",o):o},reduce(o,e){return e==Element$1&&o?o.parent:o},reuse(o,e,s,a){let l=e.type.id;return l==StartTag||l==OpenTag?new ElementContext(tagNameAfter(a,1)||"",o):o},strict:!1}),tagStart=new ExternalTokenizer((o,e)=>{if(o.next!=lessThan){o.next<0&&e.context&&o.acceptToken(missingCloseTag);return}o.advance();let s=o.next==slash$1;s&&o.advance();let a=tagNameAfter(o,0);if(a===void 0)return;if(!a)return o.acceptToken(s?IncompleteCloseTag:IncompleteTag);let l=e.context?e.context.name:null;if(s){if(a==l)return o.acceptToken(StartCloseTag);if(l&&implicitlyClosed[l])return o.acceptToken(missingCloseTag,-2);if(e.dialectEnabled(Dialect_noMatch))return o.acceptToken(NoMatchStartCloseTag);for(let u=e.context;u;u=u.parent)if(u.name==a)return;o.acceptToken(MismatchedStartCloseTag)}else{if(a=="script")return o.acceptToken(StartScriptTag);if(a=="style")return o.acceptToken(StartStyleTag);if(a=="textarea")return o.acceptToken(StartTextareaTag);if(selfClosers$1.hasOwnProperty(a))return o.acceptToken(StartSelfClosingTag);l&&closeOnOpen[l]&&closeOnOpen[l][a]?o.acceptToken(missingCloseTag,-1):o.acceptToken(StartTag)}},{contextual:!0}),commentContent=new ExternalTokenizer(o=>{for(let e=0,s=0;;s++){if(o.next<0){s&&o.acceptToken(commentContent$1);break}if(o.next==dash$1)e++;else if(o.next==greaterThan&&e>=2){s>=3&&o.acceptToken(commentContent$1,-2);break}else e=0;o.advance()}});function inForeignElement(o){for(;o;o=o.parent)if(o.name=="svg"||o.name=="math")return!0;return!1}const endTag=new ExternalTokenizer((o,e)=>{if(o.next==slash$1&&o.peek(1)==greaterThan){let s=e.dialectEnabled(Dialect_selfClosing)||inForeignElement(e.context);o.acceptToken(s?SelfClosingEndTag:EndTag,2)}else o.next==greaterThan&&o.acceptToken(EndTag,1)});function contentTokenizer(o,e,s){let a=2+o.length;return new ExternalTokenizer(l=>{for(let u=0,c=0,d=0;;d++){if(l.next<0){d&&l.acceptToken(e);break}if(u==0&&l.next==lessThan||u==1&&l.next==slash$1||u>=2&&u<a&&l.next==o.charCodeAt(u-2))u++,c++;else if(u==a&&l.next==greaterThan){d>c?l.acceptToken(e,-c):l.acceptToken(s,-(c-2));break}else if((l.next==10||l.next==13)&&d){l.acceptToken(e,1);break}else u=c=0;l.advance()}})}const scriptTokens=contentTokenizer("script",scriptText,StartCloseScriptTag),styleTokens=contentTokenizer("style",styleText,StartCloseStyleTag),textareaTokens=contentTokenizer("textarea",textareaText,StartCloseTextareaTag),htmlHighlighting=styleTags({"Text RawText IncompleteTag IncompleteCloseTag":tags$1.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":tags$1.angleBracket,TagName:tags$1.tagName,"MismatchedCloseTag/TagName":[tags$1.tagName,tags$1.invalid],AttributeName:tags$1.attributeName,"AttributeValue UnquotedAttributeValue":tags$1.attributeValue,Is:tags$1.definitionOperator,"EntityReference CharacterReference":tags$1.character,Comment:tags$1.blockComment,ProcessingInst:tags$1.processingInstruction,DoctypeDecl:tags$1.documentMeta}),parser$2=LRParser.deserialize({version:14,states:",xOVO!rOOO!ZQ#tO'#CrO!`Q#tO'#C{O!eQ#tO'#DOO!jQ#tO'#DRO!oQ#tO'#DTO!tOaO'#CqO#PObO'#CqO#[OdO'#CqO$kO!rO'#CqOOO`'#Cq'#CqO$rO$fO'#DUO$zQ#tO'#DWO%PQ#tO'#DXOOO`'#Dl'#DlOOO`'#DZ'#DZQVO!rOOO%UQ&rO,59^O%aQ&rO,59gO%lQ&rO,59jO%wQ&rO,59mO&SQ&rO,59oOOOa'#D_'#D_O&_OaO'#CyO&jOaO,59]OOOb'#D`'#D`O&rObO'#C|O&}ObO,59]OOOd'#Da'#DaO'VOdO'#DPO'bOdO,59]OOO`'#Db'#DbO'jO!rO,59]O'qQ#tO'#DSOOO`,59],59]OOOp'#Dc'#DcO'vO$fO,59pOOO`,59p,59pO(OQ#|O,59rO(TQ#|O,59sOOO`-E7X-E7XO(YQ&rO'#CtOOQW'#D['#D[O(hQ&rO1G.xOOOa1G.x1G.xOOO`1G/Z1G/ZO(sQ&rO1G/ROOOb1G/R1G/RO)OQ&rO1G/UOOOd1G/U1G/UO)ZQ&rO1G/XOOO`1G/X1G/XO)fQ&rO1G/ZOOOa-E7]-E7]O)qQ#tO'#CzOOO`1G.w1G.wOOOb-E7^-E7^O)vQ#tO'#C}OOOd-E7_-E7_O){Q#tO'#DQOOO`-E7`-E7`O*QQ#|O,59nOOOp-E7a-E7aOOO`1G/[1G/[OOO`1G/^1G/^OOO`1G/_1G/_O*VQ,UO,59`OOQW-E7Y-E7YOOOa7+$d7+$dOOO`7+$u7+$uOOOb7+$m7+$mOOOd7+$p7+$pOOO`7+$s7+$sO*bQ#|O,59fO*gQ#|O,59iO*lQ#|O,59lOOO`1G/Y1G/YO*qO7[O'#CwO+SOMhO'#CwOOQW1G.z1G.zOOO`1G/Q1G/QOOO`1G/T1G/TOOO`1G/W1G/WOOOO'#D]'#D]O+eO7[O,59cOOQW,59c,59cOOOO'#D^'#D^O+vOMhO,59cOOOO-E7Z-E7ZOOQW1G.}1G.}OOOO-E7[-E7[",stateData:",c~O!_OS~OUSOVPOWQOXROYTO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O|_O!eZO~OgaO~OgbO~OgcO~OgdO~OgeO~O!XfOPmP![mP~O!YiOQpP![pP~O!ZlORsP![sP~OUSOVPOWQOXROYTOZqO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O!eZO~O![rO~P#gO!]sO!fuO~OgvO~OgwO~OS|OT}OiyO~OS!POT}OiyO~OS!ROT}OiyO~OS!TOT}OiyO~OS}OT}OiyO~O!XfOPmX![mX~OP!WO![!XO~O!YiOQpX![pX~OQ!ZO![!XO~O!ZlORsX![sX~OR!]O![!XO~O![!XO~P#gOg!_O~O!]sO!f!aO~OS!bO~OS!cO~Oj!dOShXThXihX~OS!fOT!gOiyO~OS!hOT!gOiyO~OS!iOT!gOiyO~OS!jOT!gOiyO~OS!gOT!gOiyO~Og!kO~Og!lO~Og!mO~OS!nO~Ol!qO!a!oO!c!pO~OS!rO~OS!sO~OS!tO~Ob!uOc!uOd!uO!a!wO!b!uO~Ob!xOc!xOd!xO!c!wO!d!xO~Ob!uOc!uOd!uO!a!{O!b!uO~Ob!xOc!xOd!xO!c!{O!d!xO~OT~cbd!ey|!e~",goto:"%q!aPPPPPPPPPPPPPPPPPPPPP!b!hP!nPP!zP!}#Q#T#Z#^#a#g#j#m#s#y!bP!b!bP$P$V$m$s$y%P%V%]%cPPPPPPPP%iX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:" StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:68,context:elementContext,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,22,31,34,37,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,30,33,36,38,"OpenTag"],["group",-10,14,15,18,19,20,21,40,41,42,43,"Entity",17,"Entity TextContent",-3,29,32,35,"TextContent Entity"],["isolate",-11,22,30,31,33,34,36,37,38,39,42,43,"ltr",-3,27,28,40,""]],propSources:[htmlHighlighting],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|caPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bXaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UVaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pTaPOv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!dpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({WaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!b`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!b`!dpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYlWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]`aP!b`!dp!_^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebiSlWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXiSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vciSaP!b`!dpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!ahaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WiiSlWd!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zblWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOb!R!R7tP;=`<%l7S!Z8OYlWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{iiSlWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbiSlWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QciSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXiSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TalWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOc!R!RAwP;=`<%lAY!ZBRYlWc!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbiSlWc!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbiSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXiSc!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!cxaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYliSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_kiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_XaP!b`!dp!fQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZiSgQaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!b`!dpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!b`!dp!ePOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!b`!dpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!b`!dpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!b`!dpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!b`!dpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!b`!dpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!b`!dpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!b`!dpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!dpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO|PP!-nP;=`<%l!-Sq!-xS!dp|POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!b`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!b`|POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!b`!dp|POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!b`!dpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!b`!dpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!b`!dpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!b`!dpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!b`!dpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!b`!dpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!dpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOyPP!7TP;=`<%l!6Vq!7]V!dpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!dpyPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!b`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!b`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!b`yPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!b`!dpyPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXjSaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[scriptTokens,styleTokens,textareaTokens,endTag,tagStart,commentContent,0,1,2,3,4,5],topRules:{Document:[0,16]},dialects:{noMatch:0,selfClosing:515},tokenPrec:517});function getAttrs(o,e){let s=Object.create(null);for(let a of o.getChildren(Attribute)){let l=a.getChild(AttributeName),u=a.getChild(AttributeValue)||a.getChild(UnquotedAttributeValue);l&&(s[e.read(l.from,l.to)]=u?u.type.id==AttributeValue?e.read(u.from+1,u.to-1):e.read(u.from,u.to):"")}return s}function findTagName(o,e){let s=o.getChild(TagName);return s?e.read(s.from,s.to):" "}function maybeNest(o,e,s){let a;for(let l of s)if(!l.attrs||l.attrs(a||(a=getAttrs(o.node.parent.firstChild,e))))return{parser:l.parser,bracketed:!0};return null}function configureNesting(o=[],e=[]){let s=[],a=[],l=[],u=[];for(let d of o)(d.tag=="script"?s:d.tag=="style"?a:d.tag=="textarea"?l:u).push(d);let c=e.length?Object.create(null):null;for(let d of e)(c[d.name]||(c[d.name]=[])).push(d);return parseMixed((d,h)=>{let p=d.type.id;if(p==ScriptText)return maybeNest(d,h,s);if(p==StyleText)return maybeNest(d,h,a);if(p==TextareaText)return maybeNest(d,h,l);if(p==Element$1&&u.length){let m=d.node,g=m.firstChild,y=g&&findTagName(g,h),A;if(y){for(let T of u)if(T.tag==y&&(!T.attrs||T.attrs(A||(A=getAttrs(g,h))))){let E=m.lastChild,v=E.type.id==CloseTag?E.from:m.to;if(v>g.to)return{parser:T.parser,overlay:[{from:g.to,to:v}]}}}}if(c&&p==Attribute){let m=d.node,g;if(g=m.firstChild){let y=c[h.read(g.from,g.to)];if(y)for(let A of y){if(A.tagName&&A.tagName!=findTagName(m.parent,h))continue;let T=m.lastChild;if(T.type.id==AttributeValue){let E=T.from+1,v=T.lastChild,_=T.to-(v&&v.isError?0:1);if(_>E)return{parser:A.parser,overlay:[{from:E,to:_}],bracketed:!0}}else if(T.type.id==UnquotedAttributeValue)return{parser:A.parser,overlay:[{from:T.from,to:T.to}]}}}}return null})}const descendantOp=122,Unit=1,identifier$2=123,callee=124,VariableName=2,queryIdentifier=125,queryVariableName=3,QueryCallee=4,space$1=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],colon=58,parenL=40,underscore=95,bracketL$1=91,dash=45,period=46,hash=35,percent=37,ampersand=38,backslash=92,newline$1=10,asterisk=42;function isAlpha(o){return o>=65&&o<=90||o>=97&&o<=122||o>=161}function isDigit(o){return o>=48&&o<=57}function isHex(o){return isDigit(o)||o>=97&&o<=102||o>=65&&o<=70}const identifierTokens=(o,e,s)=>(a,l)=>{for(let u=!1,c=0,d=0;;d++){let{next:h}=a;if(isAlpha(h)||h==dash||h==underscore||u&&isDigit(h))!u&&(h!=dash||d>0)&&(u=!0),c===d&&h==dash&&c++,a.advance();else if(h==backslash&&a.peek(1)!=newline$1){if(a.advance(),isHex(a.next)){do a.advance();while(isHex(a.next));a.next==32&&a.advance()}else a.next>-1&&a.advance();u=!0}else{u&&a.acceptToken(c==2&&l.canShift(VariableName)?e:h==parenL?s:o);break}}},identifiers=new ExternalTokenizer(identifierTokens(identifier$2,VariableName,callee)),queryIdentifiers=new ExternalTokenizer(identifierTokens(queryIdentifier,queryVariableName,QueryCallee)),descendant=new ExternalTokenizer(o=>{if(space$1.includes(o.peek(-1))){let{next:e}=o;(isAlpha(e)||e==underscore||e==hash||e==period||e==asterisk||e==bracketL$1||e==colon&&isAlpha(o.peek(1))||e==dash||e==ampersand)&&o.acceptToken(descendantOp)}}),unitToken=new ExternalTokenizer(o=>{if(!space$1.includes(o.peek(-1))){let{next:e}=o;if(e==percent&&(o.advance(),o.acceptToken(Unit)),isAlpha(e)){do o.advance();while(isAlpha(o.next)||isDigit(o.next));o.acceptToken(Unit)}}}),cssHighlighting=styleTags({"AtKeyword import charset namespace keyframes media supports":tags$1.definitionKeyword,"from to selector":tags$1.keyword,NamespaceName:tags$1.namespace,KeyframeName:tags$1.labelName,KeyframeRangeName:tags$1.operatorKeyword,TagName:tags$1.tagName,ClassName:tags$1.className,PseudoClassName:tags$1.constant(tags$1.className),IdName:tags$1.labelName,"FeatureName PropertyName":tags$1.propertyName,AttributeName:tags$1.attributeName,NumberLiteral:tags$1.number,KeywordQuery:tags$1.keyword,UnaryQueryOp:tags$1.operatorKeyword,"CallTag ValueName":tags$1.atom,VariableName:tags$1.variableName,Callee:tags$1.operatorKeyword,Unit:tags$1.unit,"UniversalSelector NestingSelector":tags$1.definitionOperator,"MatchOp CompareOp":tags$1.compareOperator,"ChildOp SiblingOp, LogicOp":tags$1.logicOperator,BinOp:tags$1.arithmeticOperator,Important:tags$1.modifier,Comment:tags$1.blockComment,ColorLiteral:tags$1.color,"ParenthesizedContent StringLiteral":tags$1.string,":":tags$1.punctuation,"PseudoOp #":tags$1.derefOperator,"; ,":tags$1.separator,"( )":tags$1.paren,"[ ]":tags$1.squareBracket,"{ }":tags$1.brace}),spec_callee={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},spec_queryIdentifier={__proto__:null,or:98,and:98,not:106,only:106,layer:170},spec_QueryCallee={__proto__:null,selector:112,layer:166},spec_AtKeyword={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},spec_identifier$1={__proto__:null,to:207},parser$1=LRParser.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:" Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[cssHighlighting],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[descendant,unitToken,identifiers,queryIdentifiers,1,2,3,4,new LocalTokenGroup("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},dynamicPrecedences:{76:1},specialized:[{term:124,get:o=>spec_callee[o]||-1},{term:125,get:o=>spec_queryIdentifier[o]||-1},{term:4,get:o=>spec_QueryCallee[o]||-1},{term:25,get:o=>spec_AtKeyword[o]||-1},{term:123,get:o=>spec_identifier$1[o]||-1}],tokenPrec:1963});let _properties=null;function properties(){if(!_properties&&typeof document=="object"&&document.body){let{style:o}=document.body,e=[],s=new Set;for(let a in o)a!="cssText"&&a!="cssFloat"&&typeof o[a]=="string"&&(/[A-Z]/.test(a)&&(a=a.replace(/[A-Z]/g,l=>"-"+l.toLowerCase())),s.has(a)||(e.push(a),s.add(a)));_properties=e.sort().map(a=>({type:"property",label:a,apply:a+": "}))}return _properties||[]}const pseudoClasses=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(o=>({type:"class",label:o})),values=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(o=>({type:"keyword",label:o})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(o=>({type:"constant",label:o}))),tags=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(o=>({type:"type",label:o})),atRules=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(o=>({type:"keyword",label:o})),identifier$1=/^(\w[\w-]*|-\w[\w-]*|)$/,variable=/^-(-[\w-]*)?$/;function isVarArg(o,e){var s;if((o.name=="("||o.type.isError)&&(o=o.parent||o),o.name!="ArgList")return!1;let a=(s=o.parent)===null||s===void 0?void 0:s.firstChild;return(a==null?void 0:a.name)!="Callee"?!1:e.sliceString(a.from,a.to)=="var"}const VariablesByNode=new NodeWeakMap,declSelector=["Declaration"];function astTop(o){for(let e=o;;){if(e.type.isTop)return e;if(!(e=e.parent))return o}}function variableNames(o,e,s){if(e.to-e.from>4096){let a=VariablesByNode.get(e);if(a)return a;let l=[],u=new Set,c=e.cursor(IterMode.IncludeAnonymous);if(c.firstChild())do for(let d of variableNames(o,c.node,s))u.has(d.label)||(u.add(d.label),l.push(d));while(c.nextSibling());return VariablesByNode.set(e,l),l}else{let a=[],l=new Set;return e.cursor().iterate(u=>{var c;if(s(u)&&u.matchContext(declSelector)&&((c=u.node.nextSibling)===null||c===void 0?void 0:c.name)==":"){let d=o.sliceString(u.from,u.to);l.has(d)||(l.add(d),a.push({label:d,type:"variable"}))}}),a}}const defineCSSCompletionSource=o=>e=>{let{state:s,pos:a}=e,l=syntaxTree(s).resolveInner(a,-1),u=l.type.isError&&l.from==l.to-1&&s.doc.sliceString(l.from,l.to)=="-";if(l.name=="PropertyName"||(u||l.name=="TagName")&&/^(Block|Styles)$/.test(l.resolve(l.to).name))return{from:l.from,options:properties(),validFor:identifier$1};if(l.name=="ValueName")return{from:l.from,options:values,validFor:identifier$1};if(l.name=="PseudoClassName")return{from:l.from,options:pseudoClasses,validFor:identifier$1};if(o(l)||(e.explicit||u)&&isVarArg(l,s.doc))return{from:o(l)||u?l.from:a,options:variableNames(s.doc,astTop(l),o),validFor:variable};if(l.name=="TagName"){for(let{parent:h}=l;h;h=h.parent)if(h.name=="Block")return{from:l.from,options:properties(),validFor:identifier$1};return{from:l.from,options:tags,validFor:identifier$1}}if(l.name=="AtKeyword")return{from:l.from,options:atRules,validFor:identifier$1};if(!e.explicit)return null;let c=l.resolve(a),d=c.childBefore(a);return d&&d.name==":"&&c.name=="PseudoClassSelector"?{from:a,options:pseudoClasses,validFor:identifier$1}:d&&d.name==":"&&c.name=="Declaration"||c.name=="ArgList"?{from:a,options:values,validFor:identifier$1}:c.name=="Block"||c.name=="Styles"?{from:a,options:properties(),validFor:identifier$1}:null},cssCompletionSource=defineCSSCompletionSource(o=>o.name=="VariableName"),cssLanguage=LRLanguage.define({name:"css",parser:parser$1.configure({props:[indentNodeProp.add({Declaration:continuedIndent()}),foldNodeProp.add({"Block KeyframeList":foldInside})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function css(){return new LanguageSupport(cssLanguage,cssLanguage.data.of({autocomplete:cssCompletionSource}))}const noSemi=316,noSemiType=317,incdec=1,incdecPrefix=2,questionDot=3,JSXStartTag=4,insertSemi=318,spaces=320,newline=321,LineComment=5,BlockComment=6,Dialect_jsx=0,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,semicolon=59,slash=47,star=42,plus=43,minus=45,lt=60,comma=44,question=63,dot=46,bracketL=91,trackNewline=new ContextTracker({start:!1,shift(o,e){return e==LineComment||e==BlockComment||e==spaces?o:e==newline},strict:!1}),insertSemicolon=new ExternalTokenizer((o,e)=>{let{next:s}=o;(s==braceR||s==-1||e.context)&&o.acceptToken(insertSemi)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((o,e)=>{let{next:s}=o,a;space.indexOf(s)>-1||s==slash&&((a=o.peek(1))==slash||a==star)||s!=braceR&&s!=semicolon&&s!=-1&&!e.context&&o.acceptToken(noSemi)},{contextual:!0}),noSemicolonType=new ExternalTokenizer((o,e)=>{o.next==bracketL&&!e.context&&o.acceptToken(noSemiType)},{contextual:!0}),operatorToken=new ExternalTokenizer((o,e)=>{let{next:s}=o;if(s==plus||s==minus){if(o.advance(),s==o.next){o.advance();let a=!e.context&&e.canShift(incdec);o.acceptToken(a?incdec:incdecPrefix)}}else s==question&&o.peek(1)==dot&&(o.advance(),o.advance(),(o.next<48||o.next>57)&&o.acceptToken(questionDot))},{contextual:!0});function identifierChar(o,e){return o>=65&&o<=90||o>=97&&o<=122||o==95||o>=192||!e&&o>=48&&o<=57}const jsx=new ExternalTokenizer((o,e)=>{if(o.next!=lt||!e.dialectEnabled(Dialect_jsx)||(o.advance(),o.next==slash))return;let s=0;for(;space.indexOf(o.next)>-1;)o.advance(),s++;if(identifierChar(o.next,!0)){for(o.advance(),s++;identifierChar(o.next,!1);)o.advance(),s++;for(;space.indexOf(o.next)>-1;)o.advance(),s++;if(o.next==comma)return;for(let a=0;;a++){if(a==7){if(!identifierChar(o.next,!0))return;break}if(o.next!="extends".charCodeAt(a))break;o.advance(),s++}}o.acceptToken(JSXStartTag,-s)}),jsHighlight=styleTags({"get set async static":tags$1.modifier,"for while do if else switch try catch finally return throw break continue default case defer":tags$1.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":tags$1.operatorKeyword,"let var const using function class extends":tags$1.definitionKeyword,"import export from":tags$1.moduleKeyword,"with debugger new":tags$1.keyword,TemplateString:tags$1.special(tags$1.string),super:tags$1.atom,BooleanLiteral:tags$1.bool,this:tags$1.self,null:tags$1.null,Star:tags$1.modifier,VariableName:tags$1.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags$1.function(tags$1.variableName),VariableDefinition:tags$1.definition(tags$1.variableName),Label:tags$1.labelName,PropertyName:tags$1.propertyName,PrivatePropertyName:tags$1.special(tags$1.propertyName),"CallExpression/MemberExpression/PropertyName":tags$1.function(tags$1.propertyName),"FunctionDeclaration/VariableDefinition":tags$1.function(tags$1.definition(tags$1.variableName)),"ClassDeclaration/VariableDefinition":tags$1.definition(tags$1.className),"NewExpression/VariableName":tags$1.className,PropertyDefinition:tags$1.definition(tags$1.propertyName),PrivatePropertyDefinition:tags$1.definition(tags$1.special(tags$1.propertyName)),UpdateOp:tags$1.updateOperator,"LineComment Hashbang":tags$1.lineComment,BlockComment:tags$1.blockComment,Number:tags$1.number,String:tags$1.string,Escape:tags$1.escape,ArithOp:tags$1.arithmeticOperator,LogicOp:tags$1.logicOperator,BitOp:tags$1.bitwiseOperator,CompareOp:tags$1.compareOperator,RegExp:tags$1.regexp,Equals:tags$1.definitionOperator,Arrow:tags$1.function(tags$1.punctuation),": Spread":tags$1.punctuation,"( )":tags$1.paren,"[ ]":tags$1.squareBracket,"{ }":tags$1.brace,"InterpolationStart InterpolationEnd":tags$1.special(tags$1.brace),".":tags$1.derefOperator,", ;":tags$1.separator,"@":tags$1.meta,TypeName:tags$1.typeName,TypeDefinition:tags$1.definition(tags$1.typeName),"type enum interface implements namespace module declare":tags$1.definitionKeyword,"abstract global Privacy readonly override":tags$1.modifier,"is keyof unique infer asserts":tags$1.operatorKeyword,JSXAttributeValue:tags$1.attributeValue,JSXText:tags$1.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags$1.angleBracket,"JSXIdentifier JSXNameSpacedName":tags$1.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags$1.attributeName,"JSXBuiltin/JSXIdentifier":tags$1.standard(tags$1.tagName)}),spec_identifier={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},spec_word={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},spec_LessThan={__proto__:null,"<":193},parser=LRParser.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:" ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:trackNewline,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[noSemicolon,noSemicolonType,operatorToken,jsx,2,3,4,5,6,7,8,9,10,11,12,13,14,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new LocalTokenGroup("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:o=>spec_identifier[o]||-1},{term:343,get:o=>spec_word[o]||-1},{term:95,get:o=>spec_LessThan[o]||-1}],tokenPrec:15201}),snippets=[snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],typescriptSnippets=snippets.concat([snippetCompletion("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),snippetCompletion("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),snippetCompletion("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(o){return(e,s)=>{let a=e.node.getChild("VariableDefinition");return a&&s(a,o),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(o,e){o.matchContext(functionContext)||e(o,"variable")},TypeDefinition(o,e){e(o,"type")},__proto__:null};function getScope(o,e){let s=cache.get(e);if(s)return s;let a=[],l=!0;function u(c,d){let h=o.sliceString(c.from,c.to);a.push({label:h,type:d})}return e.cursor(IterMode.IncludeAnonymous).iterate(c=>{if(l)l=!1;else if(c.name){let d=gatherCompletions[c.name];if(d&&d(c,u)||ScopeNodes.has(c.name))return!1}else if(c.to-c.from>8192){for(let d of getScope(o,c.node))a.push(d);return!1}}),cache.set(e,a),a}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function localCompletionSource(o){let e=syntaxTree(o.state).resolveInner(o.pos,-1);if(dontComplete.indexOf(e.name)>-1)return null;let s=e.name=="VariableName"||e.to-e.from<20&&Identifier.test(o.state.sliceDoc(e.from,e.to));if(!s&&!o.explicit)return null;let a=[];for(let l=e;l;l=l.parent)ScopeNodes.has(l.name)&&(a=a.concat(getScope(o.state.doc,l)));return{options:a,from:s?e.from:o.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:o=>{let e=o.textAfter,s=/^\s*\}/.test(e),a=/^\s*(case|default)\b/.test(e);return o.baseIndent+(s?0:a?1:2)*o.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:o=>o.baseIndent+o.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^\s*{/}),JSXElement(o){let e=/^\s*<\//.test(o.textAfter);return o.lineIndent(o.node.from)+(e?0:o.unit)},JSXEscape(o){let e=/\s*\}/.test(o.textAfter);return o.lineIndent(o.node.from)+(e?0:o.unit)},"JSXOpenTag JSXSelfClosingTag"(o){return o.column(o.node.from)+o.unit}}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment(o){return{from:o.from+2,to:o.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:o=>/^JSX/.test(o.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add(o=>o.isTop?[jsxSublanguage]:void 0)]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add(o=>o.isTop?[jsxSublanguage]:void 0)]},"typescript");let kwCompletion=o=>({label:o,type:"keyword"});const keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(kwCompletion),typescriptKeywords=keywords.concat(["declare","implements","private","protected","public"].map(kwCompletion));function javascript(o={}){let e=o.jsx?o.typescript?tsxLanguage:jsxLanguage:o.typescript?typescriptLanguage:javascriptLanguage,s=o.typescript?typescriptSnippets.concat(typescriptKeywords):snippets.concat(keywords);return new LanguageSupport(e,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(s))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),o.jsx?autoCloseTags$1:[]])}function findOpenTag(o){for(;;){if(o.name=="JSXOpenTag"||o.name=="JSXSelfClosingTag"||o.name=="JSXFragmentTag")return o;if(o.name=="JSXEscape"||!o.parent)return null;o=o.parent}}function elementName$1(o,e,s=o.length){for(let a=e==null?void 0:e.firstChild;a;a=a.nextSibling)if(a.name=="JSXIdentifier"||a.name=="JSXBuiltin"||a.name=="JSXNamespacedName"||a.name=="JSXMemberExpression")return o.sliceString(a.from,Math.min(a.to,s));return""}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),autoCloseTags$1=EditorView.inputHandler.of((o,e,s,a,l)=>{if((android?o.composing:o.compositionStarted)||o.state.readOnly||e!=s||a!=">"&&a!="/"||!javascriptLanguage.isActiveAt(o.state,e,-1))return!1;let u=l(),{state:c}=u,d=c.changeByRange(h=>{var p;let{head:m}=h,g=syntaxTree(c).resolveInner(m-1,-1),y;if(g.name=="JSXStartTag"&&(g=g.parent),!(c.doc.sliceString(m-1,m)!=a||g.name=="JSXAttributeValue"&&g.to>m)){if(a==">"&&g.name=="JSXFragmentTag")return{range:h,changes:{from:m,insert:"</>"}};if(a=="/"&&g.name=="JSXStartCloseTag"){let A=g.parent,T=A.parent;if(T&&A.from==m-2&&((y=elementName$1(c.doc,T.firstChild,m))||((p=T.firstChild)===null||p===void 0?void 0:p.name)=="JSXFragmentTag")){let E=`${y}>`;return{range:EditorSelection.cursor(m+E.length,-1),changes:{from:m,insert:E}}}}else if(a==">"){let A=findOpenTag(g);if(A&&A.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(c.doc.sliceString(m,m+2))&&(y=elementName$1(c.doc,A,m)))return{range:h,changes:{from:m,insert:`</${y}>`}}}}return{range:h}});return d.changes.empty?!1:(o.dispatch([u,c.update(d,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),Targets=["_blank","_self","_top","_parent"],Charsets=["ascii","utf-8","utf-16","latin1","latin1"],Methods=["get","post","put","delete"],Encs=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Bool=["true","false"],S={},Tags={a:{attrs:{href:null,ping:null,type:null,media:null,target:Targets,hreflang:null}},abbr:S,address:S,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:S,aside:S,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:S,base:{attrs:{href:null,target:Targets}},bdi:S,bdo:S,blockquote:{attrs:{cite:null}},body:S,br:S,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Encs,formmethod:Methods,formnovalidate:["novalidate"],formtarget:Targets,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:S,center:S,cite:S,code:S,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:S,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:S,div:S,dl:S,dt:S,em:S,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:S,figure:S,footer:S,form:{attrs:{action:null,name:null,"accept-charset":Charsets,autocomplete:["on","off"],enctype:Encs,method:Methods,novalidate:["novalidate"],target:Targets}},h1:S,h2:S,h3:S,h4:S,h5:S,h6:S,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:S,hgroup:S,hr:S,html:{attrs:{manifest:null}},i:S,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Encs,formmethod:Methods,formnovalidate:["novalidate"],formtarget:Targets,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:S,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:S,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:S,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Charsets,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:S,noscript:S,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:S,param:{attrs:{name:null,value:null}},pre:S,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:S,rt:S,ruby:S,samp:S,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Charsets}},section:S,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:S,source:{attrs:{src:null,type:null,media:null}},span:S,strong:S,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:S,summary:S,sup:S,table:S,tbody:S,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:S,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:S,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:S,time:{attrs:{datetime:null}},title:S,tr:S,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:S,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:S},GlobalAttrs={accesskey:null,class:null,contenteditable:Bool,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Bool,autocorrect:Bool,autocapitalize:Bool,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Bool,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Bool,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Bool,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Bool,"aria-hidden":Bool,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Bool,"aria-multiselectable":Bool,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Bool,"aria-relevant":null,"aria-required":Bool,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},eventAttributes="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(o=>"on"+o);for(let o of eventAttributes)GlobalAttrs[o]=null;class Schema{constructor(e,s){this.tags={...Tags,...e},this.globalAttrs={...GlobalAttrs,...s},this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}Schema.default=new Schema;function elementName(o,e,s=o.length){if(!e)return"";let a=e.firstChild,l=a&&a.getChild("TagName");return l?o.sliceString(l.from,Math.min(l.to,s)):""}function findParentElement(o,e=!1){for(;o;o=o.parent)if(o.name=="Element")if(e)e=!1;else return o;return null}function allowedChildren(o,e,s){let a=s.tags[elementName(o,findParentElement(e))];return(a==null?void 0:a.children)||s.allTags}function openTags(o,e){let s=[];for(let a=findParentElement(e);a&&!a.type.isTop;a=findParentElement(a.parent)){let l=elementName(o,a);if(l&&a.lastChild.name=="CloseTag")break;l&&s.indexOf(l)<0&&(e.name=="EndTag"||e.from>=a.firstChild.to)&&s.push(l)}return s}const identifier=/^[:\-\.\w\u00b7-\uffff]*$/;function completeTag(o,e,s,a,l){let u=/\s*>/.test(o.sliceDoc(l,l+5))?"":">",c=findParentElement(s,s.name=="StartTag"||s.name=="TagName");return{from:a,to:l,options:allowedChildren(o.doc,c,e).map(d=>({label:d,type:"type"})).concat(openTags(o.doc,s).map((d,h)=>({label:"/"+d,apply:"/"+d+u,type:"type",boost:99-h}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function completeCloseTag(o,e,s,a){let l=/\s*>/.test(o.sliceDoc(a,a+5))?"":">";return{from:s,to:a,options:openTags(o.doc,e).map((u,c)=>({label:u,apply:u+l,type:"type",boost:99-c})),validFor:identifier}}function completeStartTag(o,e,s,a){let l=[],u=0;for(let c of allowedChildren(o.doc,s,e))l.push({label:"<"+c,type:"type"});for(let c of openTags(o.doc,s))l.push({label:"</"+c+">",type:"type",boost:99-u++});return{from:a,to:a,options:l,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function completeAttrName(o,e,s,a,l){let u=findParentElement(s),c=u?e.tags[elementName(o.doc,u)]:null,d=c&&c.attrs?Object.keys(c.attrs):[],h=c&&c.globalAttrs===!1?d:d.length?d.concat(e.globalAttrNames):e.globalAttrNames;return{from:a,to:l,options:h.map(p=>({label:p,type:"property"})),validFor:identifier}}function completeAttrValue(o,e,s,a,l){var u;let c=(u=s.parent)===null||u===void 0?void 0:u.getChild("AttributeName"),d=[],h;if(c){let p=o.sliceDoc(c.from,c.to),m=e.globalAttrs[p];if(!m){let g=findParentElement(s),y=g?e.tags[elementName(o.doc,g)]:null;m=(y==null?void 0:y.attrs)&&y.attrs[p]}if(m){let g=o.sliceDoc(a,l).toLowerCase(),y='"',A='"';/^['"]/.test(g)?(h=g[0]=='"'?/^[^"]*$/:/^[^']*$/,y="",A=o.sliceDoc(l,l+1)==g[0]?"":g[0],g=g.slice(1),a++):h=/^[^\s<>='"]*$/;for(let T of m)d.push({label:T,apply:y+T+A,type:"constant"})}}return{from:a,to:l,options:d,validFor:h}}function htmlCompletionFor(o,e){let{state:s,pos:a}=e,l=syntaxTree(s).resolveInner(a,-1),u=l.resolve(a);for(let c=a,d;u==l&&(d=l.childBefore(c));){let h=d.lastChild;if(!h||!h.type.isError||h.from<h.to)break;u=l=d,c=h.from}return l.name=="TagName"?l.parent&&/CloseTag$/.test(l.parent.name)?completeCloseTag(s,l,l.from,a):completeTag(s,o,l,l.from,a):l.name=="StartTag"||l.name=="IncompleteTag"?completeTag(s,o,l,a,a):l.name=="StartCloseTag"||l.name=="IncompleteCloseTag"?completeCloseTag(s,l,a,a):l.name=="OpenTag"||l.name=="SelfClosingTag"||l.name=="AttributeName"?completeAttrName(s,o,l,l.name=="AttributeName"?l.from:a,a):l.name=="Is"||l.name=="AttributeValue"||l.name=="UnquotedAttributeValue"?completeAttrValue(s,o,l,l.name=="Is"?a:l.from,a):e.explicit&&(u.name=="Element"||u.name=="Text"||u.name=="Document")?completeStartTag(s,o,l,a):null}function htmlCompletionSource(o){return htmlCompletionFor(Schema.default,o)}function htmlCompletionSourceWith(o){let{extraTags:e,extraGlobalAttributes:s}=o,a=s||e?new Schema(e,s):Schema.default;return l=>htmlCompletionFor(a,l)}const jsonParser=javascriptLanguage.parser.configure({top:"SingleExpression"}),defaultNesting=[{tag:"script",attrs:o=>o.type=="text/typescript"||o.lang=="ts",parser:typescriptLanguage.parser},{tag:"script",attrs:o=>o.type=="text/babel"||o.type=="text/jsx",parser:jsxLanguage.parser},{tag:"script",attrs:o=>o.type=="text/typescript-jsx",parser:tsxLanguage.parser},{tag:"script",attrs(o){return/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(o.type)},parser:jsonParser},{tag:"script",attrs(o){return!o.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(o.type)},parser:javascriptLanguage.parser},{tag:"style",attrs(o){return(!o.lang||o.lang=="css")&&(!o.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(o.type))},parser:cssLanguage.parser}],defaultAttrs=[{name:"style",parser:cssLanguage.parser.configure({top:"Styles"})}].concat(eventAttributes.map(o=>({name:o,parser:javascriptLanguage.parser}))),htmlPlain=LRLanguage.define({name:"html",parser:parser$2.configure({props:[indentNodeProp.add({Element(o){let e=/^(\s*)(<\/)?/.exec(o.textAfter);return o.node.to<=o.pos+e[0].length?o.continue():o.lineIndent(o.node.from)+(e[2]?0:o.unit)},"OpenTag CloseTag SelfClosingTag"(o){return o.column(o.node.from)+o.unit},Document(o){if(o.pos+/\s*/.exec(o.textAfter)[0].length<o.node.to)return o.continue();let e=null,s;for(let a=o.node;;){let l=a.lastChild;if(!l||l.name!="Element"||l.to!=a.to)break;e=a=l}return e&&!((s=e.lastChild)&&(s.name=="CloseTag"||s.name=="SelfClosingTag"))?o.lineIndent(e.from)+o.unit:null}}),foldNodeProp.add({Element(o){let e=o.firstChild,s=o.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:s.name=="CloseTag"?s.from:o.to}}}),bracketMatchingHandle.add({"OpenTag CloseTag":o=>o.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-_"}}),htmlLanguage=htmlPlain.configure({wrap:configureNesting(defaultNesting,defaultAttrs)});function html$2(o={}){let e="",s;o.matchClosingTags===!1&&(e="noMatch"),o.selfClosingTags===!0&&(e=(e?e+" ":"")+"selfClosing"),(o.nestedLanguages&&o.nestedLanguages.length||o.nestedAttributes&&o.nestedAttributes.length)&&(s=configureNesting((o.nestedLanguages||[]).concat(defaultNesting),(o.nestedAttributes||[]).concat(defaultAttrs)));let a=s?htmlPlain.configure({wrap:s,dialect:e}):e?htmlLanguage.configure({dialect:e}):htmlLanguage;return new LanguageSupport(a,[htmlLanguage.data.of({autocomplete:htmlCompletionSourceWith(o)}),o.autoCloseTags!==!1?autoCloseTags:[],javascript().support,css().support])}const selfClosers=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),autoCloseTags=EditorView.inputHandler.of((o,e,s,a,l)=>{if(o.composing||o.state.readOnly||e!=s||a!=">"&&a!="/"||!htmlLanguage.isActiveAt(o.state,e,-1))return!1;let u=l(),{state:c}=u,d=c.changeByRange(h=>{var p,m,g;let y=c.doc.sliceString(h.from-1,h.to)==a,{head:A}=h,T=syntaxTree(c).resolveInner(A,-1),E;if(y&&a==">"&&T.name=="EndTag"){let v=T.parent;if(((m=(p=v.parent)===null||p===void 0?void 0:p.lastChild)===null||m===void 0?void 0:m.name)!="CloseTag"&&(E=elementName(c.doc,v.parent,A))&&!selfClosers.has(E)){let _=A+(c.doc.sliceString(A,A+1)===">"?1:0),w=`</${E}>`;return{range:h,changes:{from:A,to:_,insert:w}}}}else if(y&&a=="/"&&T.name=="IncompleteCloseTag"){let v=T.parent;if(T.from==A-2&&((g=v.lastChild)===null||g===void 0?void 0:g.name)!="CloseTag"&&(E=elementName(c.doc,v,A))&&!selfClosers.has(E)){let _=A+(c.doc.sliceString(A,A+1)===">"?1:0),w=`${E}>`;return{range:EditorSelection.cursor(A+w.length,-1),changes:{from:A,to:_,insert:w}}}}return{range:h}});return d.changes.empty?!1:(o.dispatch([u,c.update(d,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),data=defineLanguageFacet({commentTokens:{block:{open:"<!--",close:"-->"}}}),headingProp=new NodeProp,commonmark$1=parser$3.configure({props:[foldNodeProp.add(o=>!o.is("Block")||o.is("Document")||isHeading(o)!=null||isList(o)?void 0:(e,s)=>({from:s.doc.lineAt(e.from).to,to:e.to})),headingProp.add(isHeading),indentNodeProp.add({Document:()=>null}),languageDataProp.add({Document:data})]});function isHeading(o){let e=/^(?:ATX|Setext)Heading(\d)$/.exec(o.name);return e?+e[1]:void 0}function isList(o){return o.name=="OrderedList"||o.name=="BulletList"}function findSectionEnd(o,e){let s=o;for(;;){let a=s.nextSibling,l;if(!a||(l=isHeading(a.type))!=null&&l<=e)break;s=a}return s.to}const headerIndent=foldService.of((o,e,s)=>{for(let a=syntaxTree(o).resolveInner(s,-1);a&&!(a.from<e);a=a.parent){let l=a.type.prop(headingProp);if(l==null)continue;let u=findSectionEnd(a,l);if(u>s)return{from:s,to:u}}return null});function mkLang(o){return new Language(data,o,[],"markdown")}const commonmarkLanguage=mkLang(commonmark$1),extended=commonmark$1.configure([GFM,Subscript,Superscript,Emoji,{props:[foldNodeProp.add({Table:(o,e)=>({from:e.doc.lineAt(o.from).to,to:o.to})})]}]),markdownLanguage=mkLang(extended);function getCodeParser(o,e){return s=>{if(s&&o){let a=null;if(s=/\S*/.exec(s)[0],typeof o=="function"?a=o(s):a=LanguageDescription.matchLanguageName(o,s,!0),a instanceof LanguageDescription)return a.support?a.support.language.parser:ParseContext.getSkippingParser(a.load());if(a)return a.parser}return e?e.parser:null}}class Context{constructor(e,s,a,l,u,c,d){this.node=e,this.from=s,this.to=a,this.spaceBefore=l,this.spaceAfter=u,this.type=c,this.item=d}blank(e,s=!0){let a=this.spaceBefore+(this.node.name=="Blockquote"?">":"");if(e!=null){for(;a.length<e;)a+=" ";return a}else{for(let l=this.to-this.from-a.length-this.spaceAfter.length;l>0;l--)a+=" ";return a+(s?this.spaceAfter:"")}}marker(e,s){let a=this.node.name=="OrderedList"?String(+itemNumber(this.item,e)[2]+s):"";return this.spaceBefore+a+this.type+this.spaceAfter}}function getContext(o,e){let s=[],a=[];for(let l=o;l;l=l.parent){if(l.name=="FencedCode")return a;(l.name=="ListItem"||l.name=="Blockquote")&&s.push(l)}for(let l=s.length-1;l>=0;l--){let u=s[l],c,d=e.lineAt(u.from),h=u.from-d.from;if(u.name=="Blockquote"&&(c=/^ *>( ?)/.exec(d.text.slice(h))))a.push(new Context(u,h,h+c[0].length,"",c[1],">",null));else if(u.name=="ListItem"&&u.parent.name=="OrderedList"&&(c=/^( *)\d+([.)])( *)/.exec(d.text.slice(h)))){let p=c[3],m=c[0].length;p.length>=4&&(p=p.slice(0,p.length-4),m-=4),a.push(new Context(u.parent,h,h+m,c[1],p,c[2],u))}else if(u.name=="ListItem"&&u.parent.name=="BulletList"&&(c=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(d.text.slice(h)))){let p=c[4],m=c[0].length;p.length>4&&(p=p.slice(0,p.length-4),m-=4);let g=c[2];c[3]&&(g+=c[3].replace(/[xX]/," ")),a.push(new Context(u.parent,h,h+m,c[1],p,g,u))}}return a}function itemNumber(o,e){return/^(\s*)(\d+)(?=[.)])/.exec(e.sliceString(o.from,o.from+10))}function renumberList(o,e,s,a=0){for(let l=-1,u=o;;){if(u.name=="ListItem"){let d=itemNumber(u,e),h=+d[2];if(l>=0){if(h!=l+1)return;s.push({from:u.from+d[1].length,to:u.from+d[0].length,insert:String(l+2+a)})}l=h}let c=u.nextSibling;if(!c)break;u=c}}function normalizeIndent(o,e){let s=/^[ \t]*/.exec(o)[0].length;if(!s||e.facet(indentUnit)!="	")return o;let a=countColumn(o,4,s),l="";for(let u=a;u>0;)u>=4?(l+="	",u-=4):(l+=" ",u--);return l+o.slice(s)}const insertNewlineContinueMarkupCommand=(o={})=>({state:e,dispatch:s})=>{let a=syntaxTree(e),{doc:l}=e,u=null,c=e.changeByRange(d=>{if(!d.empty||!markdownLanguage.isActiveAt(e,d.from,-1)&&!markdownLanguage.isActiveAt(e,d.from,1))return u={range:d};let h=d.from,p=l.lineAt(h),m=getContext(a.resolveInner(h,-1),l);for(;m.length&&m[m.length-1].from>h-p.from;)m.pop();if(!m.length)return u={range:d};let g=m[m.length-1];if(g.to-g.spaceAfter.length>h-p.from)return u={range:d};let y=h>=g.to-g.spaceAfter.length&&!/\S/.test(p.text.slice(g.to));if(g.item&&y){let _=g.node.firstChild,w=g.node.getChild("ListItem","ListItem");if(_.to>=h||w&&w.to<h||p.from>0&&!/[^\s>]/.test(l.lineAt(p.from-1).text)||o.nonTightLists===!1){let R=m.length>1?m[m.length-2]:null,k,I="";R&&R.item?(k=p.from+R.from,I=R.marker(l,1)):k=p.from+(R?R.to:0);let P=[{from:k,to:h,insert:I}];return g.node.name=="OrderedList"&&renumberList(g.item,l,P,-2),R&&R.node.name=="OrderedList"&&renumberList(R.item,l,P),{range:EditorSelection.cursor(k+I.length),changes:P}}else{let R=blankLine(m,e,p);return{range:EditorSelection.cursor(h+R.length+1),changes:{from:p.from,insert:R+e.lineBreak}}}}if(g.node.name=="Blockquote"&&y&&p.from){let _=l.lineAt(p.from-1),w=/>\s*$/.exec(_.text);if(w&&w.index==g.from){let R=e.changes([{from:_.from+w.index,to:_.to},{from:p.from+g.from,to:p.to}]);return{range:d.map(R),changes:R}}}let A=[];g.node.name=="OrderedList"&&renumberList(g.item,l,A);let T=g.item&&g.item.from<p.from,E="";if(!T||/^[\s\d.)\-+*>]*/.exec(p.text)[0].length>=g.to)for(let _=0,w=m.length-1;_<=w;_++)E+=_==w&&!T?m[_].marker(l,1):m[_].blank(_<w?countColumn(p.text,4,m[_+1].from)-E.length:null);let v=h;for(;v>p.from&&/\s/.test(p.text.charAt(v-p.from-1));)v--;return E=normalizeIndent(E,e),nonTightList(g.node,e.doc)&&(E=blankLine(m,e,p)+e.lineBreak+E),A.push({from:v,to:h,insert:e.lineBreak+E}),{range:EditorSelection.cursor(v+E.length+1),changes:A}});return u?!1:(s(e.update(c,{scrollIntoView:!0,userEvent:"input"})),!0)},insertNewlineContinueMarkup=insertNewlineContinueMarkupCommand();function isMark(o){return o.name=="QuoteMark"||o.name=="ListMark"}function nonTightList(o,e){if(o.name!="OrderedList"&&o.name!="BulletList")return!1;let s=o.firstChild,a=o.getChild("ListItem","ListItem");if(!a)return!1;let l=e.lineAt(s.to),u=e.lineAt(a.from),c=/^[\s>]*$/.test(l.text);return l.number+(c?0:1)<u.number}function blankLine(o,e,s){let a="";for(let l=0,u=o.length-2;l<=u;l++)a+=o[l].blank(l<u?countColumn(s.text,4,o[l+1].from)-a.length:null,l<u);return normalizeIndent(a,e)}function contextNodeForDelete(o,e){let s=o.resolveInner(e,-1),a=e;isMark(s)&&(a=s.from,s=s.parent);for(let l;l=s.childBefore(a);)if(isMark(l))a=l.from;else if(l.name=="OrderedList"||l.name=="BulletList")s=l.lastChild,a=s.to;else break;return s}const deleteMarkupBackward=({state:o,dispatch:e})=>{let s=syntaxTree(o),a=null,l=o.changeByRange(u=>{let c=u.from,{doc:d}=o;if(u.empty&&markdownLanguage.isActiveAt(o,u.from)){let h=d.lineAt(c),p=getContext(contextNodeForDelete(s,c),d);if(p.length){let m=p[p.length-1],g=m.to-m.spaceAfter.length+(m.spaceAfter?1:0);if(c-h.from>g&&!/\S/.test(h.text.slice(g,c-h.from)))return{range:EditorSelection.cursor(h.from+g),changes:{from:h.from+g,to:c}};if(c-h.from==g&&(!m.item||h.from<=m.item.from||!/\S/.test(h.text.slice(0,m.to)))){let y=h.from+m.from;if(m.item&&m.node.from<m.item.from&&/\S/.test(h.text.slice(m.from,m.to))){let A=m.blank(countColumn(h.text,4,m.to)-countColumn(h.text,4,m.from));return y==h.from&&(A=normalizeIndent(A,o)),{range:EditorSelection.cursor(y+A.length),changes:{from:y,to:h.from+m.to,insert:A}}}if(y<c)return{range:EditorSelection.cursor(y),changes:{from:y,to:c}}}}}return a={range:u}});return a?!1:(e(o.update(l,{scrollIntoView:!0,userEvent:"delete"})),!0)},markdownKeymap=[{key:"Enter",run:insertNewlineContinueMarkup},{key:"Backspace",run:deleteMarkupBackward}],htmlNoMatch=html$2({matchClosingTags:!1});function markdown(o={}){let{codeLanguages:e,defaultCodeLanguage:s,addKeymap:a=!0,base:{parser:l}=commonmarkLanguage,completeHTMLTags:u=!0,pasteURLAsLink:c=!0,htmlTagLanguage:d=htmlNoMatch}=o;if(!(l instanceof MarkdownParser))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let h=o.extensions?[o.extensions]:[],p=[d.support,headerIndent],m;c&&p.push(pasteURLAsLink),s instanceof LanguageSupport?(p.push(s.support),m=s.language):s&&(m=s);let g=e||m?getCodeParser(e,m):void 0;h.push(parseCode({codeParser:g,htmlParser:d.language.parser})),a&&p.push(Prec.high(keymap.of(markdownKeymap)));let y=mkLang(l.configure(h));return u&&p.push(y.data.of({autocomplete:htmlTagCompletion})),new LanguageSupport(y,p)}function htmlTagCompletion(o){let{state:e,pos:s}=o,a=/<[:\-\.\w\u00b7-\uffff]*$/.exec(e.sliceDoc(s-25,s));if(!a)return null;let l=syntaxTree(e).resolveInner(s,-1);for(;l&&!l.type.isTop;){if(l.name=="CodeBlock"||l.name=="FencedCode"||l.name=="ProcessingInstructionBlock"||l.name=="CommentBlock"||l.name=="Link"||l.name=="Image")return null;l=l.parent}return{from:s-a[0].length,to:s,options:htmlTagCompletions(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}let _tagCompletions=null;function htmlTagCompletions(){if(_tagCompletions)return _tagCompletions;let o=htmlCompletionSource(new CompletionContext(EditorState.create({extensions:htmlNoMatch}),0,!0));return _tagCompletions=o?o.options:[]}const nonPlainText=/code|horizontalrule|html|link|comment|processing|escape|entity|image|mark|url/i,pasteURLAsLink=EditorView.domEventHandlers({paste:(o,e)=>{var s;let{main:a}=e.state.selection;if(a.empty)return!1;let l=(s=o.clipboardData)===null||s===void 0?void 0:s.getData("text/plain");if(!l||!/^(https?:\/\/|mailto:|xmpp:|www\.)/.test(l)||(/^www\./.test(l)&&(l="https://"+l),!markdownLanguage.isActiveAt(e.state,a.from,1)))return!1;let u=syntaxTree(e.state),c=!1;return u.iterate({from:a.from,to:a.to,enter:d=>{(d.from>a.from||nonPlainText.test(d.name))&&(c=!0)},leave:d=>{d.to<a.to&&(c=!0)}}),c?!1:(e.dispatch({changes:[{from:a.from,insert:"["},{from:a.to,insert:`](${l})`}],userEvent:"input.paste",scrollIntoView:!0}),!0)}}),customTags={underline:Tag.define(),monospace:Tag.define(),marked:Tag.define()};function mdInlineFactory({name:o,char:e,tag:s}){const a=o,l=`${o}Mark`,u={resolve:a,mark:l};return{defineNodes:[{name:a,style:{[`${a}/...`]:s}},{name:l,style:tags$1.processingInstruction}],parseInline:[{name:o,parse(c,d,h){return d!==e||c.char(h+1)!==e||c.char(h+2)===e?-1:c.addDelimiter(u,h,h+2,!0,!0)},after:"Emphasis"}]}}const UnderlineExtension=mdInlineFactory({name:"Underline",char:43,tag:customTags.underline}),MonospaceExtension=mdInlineFactory({name:"Monospace",char:35,tag:customTags.monospace}),MarkedExtension=mdInlineFactory({name:"Marked",char:61,tag:customTags.marked}),yfmNoteTypes=["info","tip","warning","alert"],yfmNoteSnippetTemplate=o=>`{% note ${o} %}

#{}

{% endnote %}

`,yfmNoteSnippets={info:snippet(yfmNoteSnippetTemplate("info")),tip:snippet(yfmNoteSnippetTemplate("tip")),warning:snippet(yfmNoteSnippetTemplate("warning")),alert:snippet(yfmNoteSnippetTemplate("alert"))},yfmCutSnippetTemplate=`{% cut "#{title}" %}

#{}

{% endcut %}

`,yfmCutSnippet=snippet(yfmCutSnippetTemplate),yfmCutDirectiveSnippetTemplate=`:::cut [#{title}]
#{}
:::

`,yfmCutDirectiveSnippet=snippet(yfmCutDirectiveSnippetTemplate),mdAutocomplete={autocomplete:o=>{const e=o.state.facet(DirectiveSyntaxFacet),s=o.matchBefore(/^.*/);if(e.option!=="only"&&(s!=null&&s.text.startsWith("{%")))return{from:s.from,options:[...yfmNoteTypes.map((a,l)=>({label:`{% note ${a}`,displayLabel:capitalize(a),type:"text",section:"YFM Note",apply:yfmNoteSnippets[a],boost:-l})),{label:"{% cut",displayLabel:"YFM Cut",type:"text",apply:e.shouldInsertDirectiveMarkup("yfmCut")?yfmCutDirectiveSnippet:yfmCutSnippet}]};if(e.option!=="disabled"&&(s!=null&&s.text.startsWith(":"))){const a=[];if(e.valueFor("yfmCut")!=="disabled"&&a.push({label:":::cut",displayLabel:"YFM Cut",type:"text",apply:yfmCutDirectiveSnippet}),a.length)return{from:s.from,options:a}}return null}};function yfmLang({languageData:o=[]}={}){const e=markdown({base:markdownLanguage,addKeymap:!0,completeHTMLTags:!1,extensions:[UnderlineExtension,MonospaceExtension,MarkedExtension]});return[e,e.language.data.of(mdAutocomplete),o.map(s=>e.language.data.of(s))]}const gravityHighlightStyle=HighlightStyle.define(defaultHighlightStyle.specs.concat({tag:tags$1.meta,color:"var(--g-color-text-hint)"},{tag:tags$1.link,color:"var(--g-color-text-link)"},{tag:tags$1.url,color:"var(--g-color-text-link-hover)"},{tag:tags$1.contentSeparator,color:"var(--g-color-text-secondary)"},{tag:[tags$1.string,tags$1.deleted],color:"var(--g-color-text-danger)"},{tag:tags$1.escape,color:"var(--g-color-text-danger-heavy)"},{tag:tags$1.typeName,color:"var(--g-color-text-positive-heavy)"},{tag:tags$1.atom,color:"var(--g-color-text-info-heavy)"},{tag:tags$1.labelName,color:"var(--g-color-text-complementary)"},{tag:tags$1.heading,fontWeight:"bold"},{tag:customTags.underline,textDecoration:"underline"},{tag:customTags.monospace,fontFamily:"monospace"},{tag:customTags.marked,color:"marktext",backgroundColor:"mark"})),gravityTheme=EditorView.baseTheme({"&":{height:"100%"},"&.cm-focused":{outline:"none"},".cm-placeholder":{color:"var(--g-color-text-secondary)"},".cm-content":{color:"var(--g-color-text-primary)",caretColor:"currentColor",fontSize:"var(--g-text-code-2-font-size)",fontWeight:"var(--g-text-code-font-weight)",fontFamily:"var(--g-font-family-monospace)",lineHeight:"var(--g-text-code-2-line-height)"},"&.cm-focused .cm-cursor":{borderLeftColor:"currentColor"},"&.cm-focused .cm-selectionBackground, &.cm-focused ::selection":{background:"var(--g-color-base-misc-medium)"},".cm-tooltip.cm-tooltip-autocomplete":{padding:"4px 0",lineHeight:"24px",color:"var(--g-color-text-primary)",fontFamily:"var(--g-font-family-monospace)",fontSize:"var(--g-text-body-1-font-size)",backgroundColor:"var(--g-color-base-float)",border:"1px solid var(--g-color-line-generic-solid)",borderRadius:"4px","& > ul":{"& > completion-section":{color:"var(--g-color-text-hint)",fontWeight:"var(--g-text-accent-font-weight)",borderBottom:"1px solid var(--g-color-line-generic)"},"& > li:hover":{backgroundColor:"var(--g-color-base-simple-hover)"},"& > li[aria-selected]":{backgroundColor:"var(--g-color-base-selection)",color:"revert"}}}});class NodeHandler{constructor(){oe(this,"next",null)}setNext(e){return this.next=e,e}handleNext(e,s){return this.next?this.next.handle(e,s):""}}class TextNodeHandler extends NodeHandler{handle(e,s){return e.nodeType===Node.TEXT_NODE?s.visitText(e):this.handleNext(e,s)}}class LinkHandler extends NodeHandler{handle(e,s){return e.nodeType===Node.ELEMENT_NODE&&e.tagName.toLowerCase()==="a"?s.visitLink(e):this.handleNext(e,s)}}class HeaderHandler extends NodeHandler{handle(e,s){if(e.nodeType!==Node.ELEMENT_NODE)return this.handleNext(e,s);const l=e.tagName.toLowerCase().match(/^h([1-6])$/);if(l){const u=parseInt(l[1],10);return s.visitHeader(e,u)}return this.handleNext(e,s)}}class ParagraphHandler extends NodeHandler{handle(e,s){return e.nodeType!==Node.ELEMENT_NODE?this.handleNext(e,s):e.tagName.toLowerCase()==="p"?s.visitParagraph(e):this.handleNext(e,s)}}class FormattingHandler extends NodeHandler{handle(e,s){var c;if(e.nodeType!==Node.ELEMENT_NODE)return this.handleNext(e,s);const a=e,l=a.tagName.toLowerCase();return["b","strong","i","em","span"].includes(l)&&!["a","code","pre"].includes(((c=a.parentElement)==null?void 0:c.tagName.toLowerCase())||"")?s.visitFormatting(a):this.handleNext(e,s)}}class CodeHandler extends NodeHandler{handle(e,s){return e.nodeType!==Node.ELEMENT_NODE?this.handleNext(e,s):e.tagName.toLowerCase()==="code"||e.tagName.toLowerCase()==="pre"?s.visitCode(e):this.handleNext(e,s)}}class GenericHandler extends NodeHandler{handle(e,s){return s.visitGeneric(e)}}class OrderedListHandler extends NodeHandler{handle(e,s){return e.nodeType===Node.ELEMENT_NODE&&e.tagName.toLowerCase()==="ol"?Array.from(e.childNodes).filter(l=>l.nodeType===Node.ELEMENT_NODE&&l.tagName.toLowerCase()==="li").map((l,u)=>`${u+1}. ${s.visitGeneric(l)}`).join(`
`)+`
`:this.handleNext(e,s)}}class UnorderedListHandler extends NodeHandler{handle(e,s){return e.nodeType===Node.ELEMENT_NODE&&e.tagName.toLowerCase()==="ul"?Array.from(e.childNodes).filter(l=>l.nodeType===Node.ELEMENT_NODE&&l.tagName.toLowerCase()==="li").map(l=>`- ${s.visitGeneric(l)}`).join(`
`)+`
`:this.handleNext(e,s)}}class DivHandler extends NodeHandler{handle(e,s){return e.nodeType===Node.ELEMENT_NODE&&e.tagName.toLowerCase()==="div"?s.visitDiv(e):this.handleNext(e,s)}}class BrHandler extends NodeHandler{handle(e,s){return e.nodeType===Node.ELEMENT_NODE&&e.tagName.toLowerCase()==="br"?s.visitBr():this.handleNext(e,s)}}class TableRowHandler extends NodeHandler{handle(e,s){return e.nodeType===Node.ELEMENT_NODE&&e.tagName.toLowerCase()==="tr"?s.visitTableRow(e):this.handleNext(e,s)}}class TableHandler extends NodeHandler{handle(e,s){return e.nodeType===Node.ELEMENT_NODE&&e.tagName.toLowerCase()==="table"?s.visitTable(e):this.handleNext(e,s)}}class ImageHandler extends NodeHandler{handle(e,s){return e.nodeType===Node.ELEMENT_NODE&&e.tagName.toLowerCase()==="img"?s.visitImage(e):this.handleNext(e,s)}}function applyFormatting(o,e){const s=e.tagName.toLowerCase()==="i"||e.tagName.toLowerCase()==="em"||e.style.fontStyle==="italic",a=e.tagName.toLowerCase()==="b"||e.tagName.toLowerCase()==="strong"||parseInt(e.style.fontWeight,10)>=600;let l=o;return s&&(l=`*${l}*`),a&&(l=`**${l}**`),l}class MarkdownConverter{constructor(){oe(this,"handler");this.handler=this.setupHandlerChain()}visitText(e){return(e.textContent||"").replace(/\n+/g,"").replace(/([<>])/g,"\\$1")}visitLink(e){var u;const s=this.collectTextContent(e),a=e.href||"";return`[${e.childNodes.length===1&&((u=e.firstChild)==null?void 0:u.nodeType)===Node.TEXT_NODE?applyFormatting(s,e):Array.from(e.childNodes).map(c=>c.nodeType===Node.ELEMENT_NODE?applyFormatting(c.textContent||"",c):c.textContent||"").join("")}](${a} "${s.replace(/"/g,'\\"')}")`}visitHeader(e,s){const a=this.collectTextContent(e);return"#".repeat(s)+" "+a+`
`}visitParagraph(e){return this.processChildren(e).trim()+`

`}visitFormatting(e){var s;if(e.childNodes.length===1&&((s=e.firstChild)==null?void 0:s.nodeType)===Node.TEXT_NODE){const a=this.collectTextContent(e);return applyFormatting(a,e)}return applyFormatting(this.visitGeneric(e),e)}visitCode(e){const s=this.collectCodeContent(e);return s.includes(`
`)?"```\n"+s+"\n```\n":s.includes("`")?"`` "+s+" ``":`\`${s}\``}visitGeneric(e){return this.processChildren(e)}visitDiv(e){return this.processChildren(e)+`
`}visitBr(){return`
`}visitTableRow(e){return`||
`+Array.from(e.children).map(a=>this.visitGeneric(a).trim()||"").join(`
|
`)+`
||`}visitTable(e){const s=[];return Array.from(e.querySelectorAll("tr")).forEach(l=>{s.push(this.visitTableRow(l))}),`

#|
`+s.join(`
`)+`
|#

`}visitImage(e){const s=e,a=s.alt||"",l=s.src||"";return`![${a}](${l})`}processNode(e){return this.getHandler().handle(e,this)}setupHandlerChain(){const e=new TextNodeHandler,s=new LinkHandler,a=new HeaderHandler,l=new ParagraphHandler,u=new FormattingHandler,c=new CodeHandler,d=new GenericHandler,h=new OrderedListHandler,p=new UnorderedListHandler,m=new DivHandler,g=new BrHandler,y=new TableRowHandler,A=new TableHandler,T=new ImageHandler;return e.setNext(s).setNext(a).setNext(l).setNext(m).setNext(g).setNext(h).setNext(p).setNext(u).setNext(c).setNext(T).setNext(A).setNext(y).setNext(d),e}collectTextContent(e){return e.className==="visually-hidden"?"":e.nodeType===Node.TEXT_NODE?this.visitText(e):Array.from(e.childNodes).map(s=>this.collectTextContent(s)).join("")}collectCodeContent(e){return e.nodeType===Node.TEXT_NODE?e.textContent||"":Array.from(e.childNodes).map(s=>this.collectCodeContent(s)).join("")}processChildren(e){return Array.from(e.childNodes).map(s=>this.processNode(s)).join("")}getHandler(){return this.handler}}const PAIRING_CHARS=new Map([["(",")"],["{","}"],["[","]"],["<",">"],["*","*"],["~","~"],['"','"'],["'","'"],["`","`"]]),PairingCharactersExtension=EditorView.inputHandler.of((o,e,s,a)=>{if(!PAIRING_CHARS.has(a))return!1;const l=o.state.changeByRange(u=>{const c=[{from:u.from,insert:a}];u.empty||c.push({from:u.to,insert:PAIRING_CHARS.get(a)});const d=ChangeSet.of(c,o.state.doc.length);return{changes:d,range:u.map(d,u.empty?1:0)}});return o.dispatch(l,{scrollIntoView:!0}),!0}),basicNormalize=typeof String.prototype.normalize=="function"?o=>o.normalize("NFKD"):o=>o;class SearchCursor{constructor(e,s,a=0,l=e.length,u,c){this.test=c,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(a,l),this.bufferStart=a,this.normalize=u?d=>u(basicNormalize(d)):basicNormalize,this.query=this.normalize(s)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let s=fromCodePoint(e),a=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(e);let l=this.normalize(s);if(l.length)for(let u=0,c=a;;u++){let d=l.charCodeAt(u),h=this.match(d,c,this.bufferPos+this.bufferStart);if(u==l.length-1){if(h)return this.value=h,this;break}c==a&&u<s.length&&s.charCodeAt(u)==d&&c++}}}match(e,s,a){let l=null;for(let u=0;u<this.matches.length;u+=2){let c=this.matches[u],d=!1;this.query.charCodeAt(c)==e&&(c==this.query.length-1?l={from:this.matches[u+1],to:a}:(this.matches[u]++,d=!0)),d||(this.matches.splice(u,2),u-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?l={from:s,to:a}:this.matches.push(1,s)),l&&this.test&&!this.test(l.from,l.to,this.buffer,this.bufferStart)&&(l=null),l}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags$1="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(e,s,a,l=0,u=e.length){if(this.text=e,this.to=u,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(s))return new MultilineRegExpCursor(e,s,a,l,u);this.re=new RegExp(s,baseFlags$1+(a!=null&&a.ignoreCase?"i":"")),this.test=a==null?void 0:a.test,this.iter=e.iter();let c=e.lineAt(l);this.curLineStart=c.from,this.matchPos=toCharEnd(e,l),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let s=this.matchPos<=this.to&&this.re.exec(this.curLine);if(s){let a=this.curLineStart+s.index,l=a+s[0].length;if(this.matchPos=toCharEnd(this.text,l+(a==l?1:0)),a==this.curLineStart+this.curLine.length&&this.nextLine(),(a<l||a>this.value.to)&&(!this.test||this.test(a,l,s)))return this.value={from:a,to:l,match:s},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(e,s){this.from=e,this.text=s}get to(){return this.from+this.text.length}static get(e,s,a){let l=flattened.get(e);if(!l||l.from>=a||l.to<=s){let d=new FlattenedDoc(s,e.sliceString(s,a));return flattened.set(e,d),d}if(l.from==s&&l.to==a)return l;let{text:u,from:c}=l;return c>s&&(u=e.sliceString(s,c)+u,c=s),l.to<a&&(u+=e.sliceString(l.to,a)),flattened.set(e,new FlattenedDoc(c,u)),new FlattenedDoc(s,u.slice(s-c,a-c))}}class MultilineRegExpCursor{constructor(e,s,a,l,u){this.text=e,this.to=u,this.done=!1,this.value=empty,this.matchPos=toCharEnd(e,l),this.re=new RegExp(s,baseFlags$1+(a!=null&&a.ignoreCase?"i":"")),this.test=a==null?void 0:a.test,this.flat=FlattenedDoc.get(e,l,this.chunkEnd(l+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,s=this.re.exec(this.flat.text);if(s&&!s[0]&&s.index==e&&(this.re.lastIndex=e+1,s=this.re.exec(this.flat.text)),s){let a=this.flat.from+s.index,l=a+s[0].length;if((this.flat.to>=this.to||s.index+s[0].length<=this.flat.text.length-10)&&(!this.test||this.test(a,l,s)))return this.value={from:a,to:l,match:s},this.matchPos=toCharEnd(this.text,l+(a==l?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp$1(o){try{return new RegExp(o,baseFlags$1),!0}catch{return!1}}function toCharEnd(o,e){if(e>=o.length)return e;let s=o.lineAt(e),a;for(;e<s.to&&(a=s.text.charCodeAt(e-s.from))>=56320&&a<57344;)e++;return e}const gotoLine=o=>{let{state:e}=o,s=String(e.doc.lineAt(o.state.selection.main.head).number),{close:a,result:l}=showDialog(o,{label:e.phrase("Go to line"),input:{type:"text",name:"line",value:s},focus:!0,submitLabel:e.phrase("go")});return l.then(u=>{let c=u&&/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(u.elements.line.value);if(!c){o.dispatch({effects:a});return}let d=e.doc.lineAt(e.selection.main.head),[,h,p,m,g]=c,y=m?+m.slice(1):0,A=p?+p:d.number;if(p&&g){let v=A/100;h&&(v=v*(h=="-"?-1:1)+d.number/e.doc.lines),A=Math.round(e.doc.lines*v)}else p&&h&&(A=A*(h=="-"?-1:1)+d.number);let T=e.doc.line(Math.max(1,Math.min(e.doc.lines,A))),E=EditorSelection.cursor(T.from+Math.max(0,Math.min(y,T.length)));o.dispatch({effects:[a,EditorView.scrollIntoView(E.from,{y:"center"})],selection:E})}),!0},selectWord=({state:o,dispatch:e})=>{let{selection:s}=o,a=EditorSelection.create(s.ranges.map(l=>o.wordAt(l.head)||EditorSelection.cursor(l.head)),s.mainIndex);return a.eq(s)?!1:(e(o.update({selection:a})),!0)};function findNextOccurrence(o,e){let{main:s,ranges:a}=o.selection,l=o.wordAt(s.head),u=l&&l.from==s.from&&l.to==s.to;for(let c=!1,d=new SearchCursor(o.doc,e,a[a.length-1].to);;)if(d.next(),d.done){if(c)return null;d=new SearchCursor(o.doc,e,0,Math.max(0,a[a.length-1].from-1)),c=!0}else{if(c&&a.some(h=>h.from==d.value.from))continue;if(u){let h=o.wordAt(d.value.from);if(!h||h.from!=d.value.from||h.to!=d.value.to)continue}return d.value}}const selectNextOccurrence=({state:o,dispatch:e})=>{let{ranges:s}=o.selection;if(s.some(u=>u.from===u.to))return selectWord({state:o,dispatch:e});let a=o.sliceDoc(s[0].from,s[0].to);if(o.selection.ranges.some(u=>o.sliceDoc(u.from,u.to)!=a))return!1;let l=findNextOccurrence(o,a);return l?(e(o.update({selection:o.selection.addRange(EditorSelection.range(l.from,l.to),!1),effects:EditorView.scrollIntoView(l.to)})),!0):!1},searchConfigFacet=Facet.define({combine(o){return combineConfig(o,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new SearchPanel(e),scrollToMatch:e=>EditorView.scrollIntoView(e)})}});function search$1(o){return o?[searchConfigFacet.of(o),searchExtensions]:searchExtensions}let SearchQuery$1=class{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp$1(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord,this.test=e.test}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(s,a)=>a=="n"?`
`:a=="r"?"\r":a=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord&&this.test==e.test}create(){return this.regexp?new RegExpQuery$1(this):new StringQuery$1(this)}getCursor(e,s=0,a){let l=e.doc?e:EditorState.create({doc:e});return a==null&&(a=l.doc.length),this.regexp?regexpCursor(this,l,s,a):stringCursor(this,l,s,a)}};class QueryType{constructor(e){this.spec=e}}function wrapStringTest(o,e,s){return(a,l,u,c)=>{if(s&&!s(a,l,u,c))return!1;let d=a>=c&&l<=c+u.length?u.slice(a-c,l-c):e.doc.sliceString(a,l);return o(d,e,a,l)}}function stringCursor(o,e,s,a){let l;return o.wholeWord&&(l=stringWordTest(e.doc,e.charCategorizer(e.selection.main.head))),o.test&&(l=wrapStringTest(o.test,e,l)),new SearchCursor(e.doc,o.unquoted,s,a,o.caseSensitive?void 0:u=>u.toLowerCase(),l)}function stringWordTest(o,e){return(s,a,l,u)=>((u>s||u+l.length<a)&&(u=Math.max(0,s-2),l=o.sliceString(u,Math.min(o.length,a+2))),(e(charBefore(l,s-u))!=CharCategory.Word||e(charAfter(l,s-u))!=CharCategory.Word)&&(e(charAfter(l,a-u))!=CharCategory.Word||e(charBefore(l,a-u))!=CharCategory.Word))}let StringQuery$1=class extends QueryType{constructor(e){super(e)}nextMatch(e,s,a){let l=stringCursor(this.spec,e,a,e.doc.length).nextOverlapping();if(l.done){let u=Math.min(e.doc.length,s+this.spec.unquoted.length);l=stringCursor(this.spec,e,0,u).nextOverlapping()}return l.done||l.value.from==s&&l.value.to==a?null:l.value}prevMatchInRange(e,s,a){for(let l=a;;){let u=Math.max(s,l-1e4-this.spec.unquoted.length),c=stringCursor(this.spec,e,u,l),d=null;for(;!c.nextOverlapping().done;)d=c.value;if(d)return d;if(u==s)return null;l-=1e4}}prevMatch(e,s,a){let l=this.prevMatchInRange(e,0,s);return l||(l=this.prevMatchInRange(e,Math.max(0,a-this.spec.unquoted.length),e.doc.length)),l&&(l.from!=s||l.to!=a)?l:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,s){let a=stringCursor(this.spec,e,0,e.doc.length),l=[];for(;!a.next().done;){if(l.length>=s)return null;l.push(a.value)}return l}highlight(e,s,a,l){let u=stringCursor(this.spec,e,Math.max(0,s-this.spec.unquoted.length),Math.min(a+this.spec.unquoted.length,e.doc.length));for(;!u.next().done;)l(u.value.from,u.value.to)}};function wrapRegexpTest(o,e,s){return(a,l,u)=>(!s||s(a,l,u))&&o(u[0],e,a,l)}function regexpCursor(o,e,s,a){let l;return o.wholeWord&&(l=regexpWordTest(e.charCategorizer(e.selection.main.head))),o.test&&(l=wrapRegexpTest(o.test,e,l)),new RegExpCursor(e.doc,o.search,{ignoreCase:!o.caseSensitive,test:l},s,a)}function charBefore(o,e){return o.slice(findClusterBreak(o,e,!1),e)}function charAfter(o,e){return o.slice(e,findClusterBreak(o,e))}function regexpWordTest(o){return(e,s,a)=>!a[0].length||(o(charBefore(a.input,a.index))!=CharCategory.Word||o(charAfter(a.input,a.index))!=CharCategory.Word)&&(o(charAfter(a.input,a.index+a[0].length))!=CharCategory.Word||o(charBefore(a.input,a.index+a[0].length))!=CharCategory.Word)}let RegExpQuery$1=class extends QueryType{nextMatch(e,s,a){let l=regexpCursor(this.spec,e,a,e.doc.length).next();return l.done&&(l=regexpCursor(this.spec,e,0,s).next()),l.done?null:l.value}prevMatchInRange(e,s,a){for(let l=1;;l++){let u=Math.max(s,a-l*1e4),c=regexpCursor(this.spec,e,u,a),d=null;for(;!c.next().done;)d=c.value;if(d&&(u==s||d.from>u+10))return d;if(u==s)return null}}prevMatch(e,s,a){return this.prevMatchInRange(e,0,s)||this.prevMatchInRange(e,a,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(s,a)=>{if(a=="&")return e.match[0];if(a=="$")return"$";for(let l=a.length;l>0;l--){let u=+a.slice(0,l);if(u>0&&u<e.match.length)return e.match[u]+a.slice(l)}return s})}matchAll(e,s){let a=regexpCursor(this.spec,e,0,e.doc.length),l=[];for(;!a.next().done;){if(l.length>=s)return null;l.push(a.value)}return l}highlight(e,s,a,l){let u=regexpCursor(this.spec,e,Math.max(0,s-250),Math.min(a+250,e.doc.length));for(;!u.next().done;)l(u.value.from,u.value.to)}};const setSearchQuery=StateEffect.define(),togglePanel=StateEffect.define(),searchState=StateField.define({create(o){return new SearchState$1(defaultQuery(o).create(),null)},update(o,e){for(let s of e.effects)s.is(setSearchQuery)?o=new SearchState$1(s.value.create(),o.panel):s.is(togglePanel)&&(o=new SearchState$1(o.query,s.value?createSearchPanel:null));return o},provide:o=>showPanel.from(o,e=>e.panel)});function getSearchQuery(o){let e=o.field(searchState,!1);return e?e.query.spec:defaultQuery(o)}function searchPanelOpen(o){var e;return((e=o.field(searchState,!1))===null||e===void 0?void 0:e.panel)!=null}let SearchState$1=class{constructor(e,s){this.query=e,this.panel=s}};const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(o){this.view=o,this.decorations=this.highlight(o.state.field(searchState))}update(o){let e=o.state.field(searchState);(e!=o.startState.field(searchState)||o.docChanged||o.selectionSet||o.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:o,panel:e}){if(!e||!o.spec.valid)return Decoration.none;let{view:s}=this,a=new RangeSetBuilder;for(let l=0,u=s.visibleRanges,c=u.length;l<c;l++){let{from:d,to:h}=u[l];for(;l<c-1&&h>u[l+1].from-500;)h=u[++l].to;o.highlight(s.state,d,h,(p,m)=>{let g=s.state.selection.ranges.some(y=>y.from==p&&y.to==m);a.add(p,m,g?selectedMatchMark:matchMark)})}return a.finish()}},{decorations:o=>o.decorations});function searchCommand(o){return e=>{let s=e.state.field(searchState,!1);return s&&s.query.spec.valid?o(e,s):openSearchPanel(e)}}const findNext$2=searchCommand((o,{query:e})=>{let{to:s}=o.state.selection.main,a=e.nextMatch(o.state,s,s);if(!a)return!1;let l=EditorSelection.single(a.from,a.to),u=o.state.facet(searchConfigFacet);return o.dispatch({selection:l,effects:[announceMatch(o,a),u.scrollToMatch(l.main,o)],userEvent:"select.search"}),selectSearchInput(o),!0}),findPrevious=searchCommand((o,{query:e})=>{let{state:s}=o,{from:a}=s.selection.main,l=e.prevMatch(s,a,a);if(!l)return!1;let u=EditorSelection.single(l.from,l.to),c=o.state.facet(searchConfigFacet);return o.dispatch({selection:u,effects:[announceMatch(o,l),c.scrollToMatch(u.main,o)],userEvent:"select.search"}),selectSearchInput(o),!0}),selectMatches=searchCommand((o,{query:e})=>{let s=e.matchAll(o.state,1e3);return!s||!s.length?!1:(o.dispatch({selection:EditorSelection.create(s.map(a=>EditorSelection.range(a.from,a.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:o,dispatch:e})=>{let s=o.selection;if(s.ranges.length>1||s.main.empty)return!1;let{from:a,to:l}=s.main,u=[],c=0;for(let d=new SearchCursor(o.doc,o.sliceDoc(a,l));!d.next().done;){if(u.length>1e3)return!1;d.value.from==a&&(c=u.length),u.push(EditorSelection.range(d.value.from,d.value.to))}return e(o.update({selection:EditorSelection.create(u,c),userEvent:"select.search.matches"})),!0},replaceNext$2=searchCommand((o,{query:e})=>{let{state:s}=o,{from:a,to:l}=s.selection.main;if(s.readOnly)return!1;let u=e.nextMatch(s,a,a);if(!u)return!1;let c=u,d=[],h,p,m=[];c.from==a&&c.to==l&&(p=s.toText(e.getReplacement(c)),d.push({from:c.from,to:c.to,insert:p}),c=e.nextMatch(s,c.from,c.to),m.push(EditorView.announce.of(s.phrase("replaced match on line $",s.doc.lineAt(a).number)+".")));let g=o.state.changes(d);return c&&(h=EditorSelection.single(c.from,c.to).map(g),m.push(announceMatch(o,c)),m.push(s.facet(searchConfigFacet).scrollToMatch(h.main,o))),o.dispatch({changes:g,selection:h,effects:m,userEvent:"input.replace"}),!0}),replaceAll$2=searchCommand((o,{query:e})=>{if(o.state.readOnly)return!1;let s=e.matchAll(o.state,1e9).map(l=>{let{from:u,to:c}=l;return{from:u,to:c,insert:e.getReplacement(l)}});if(!s.length)return!1;let a=o.state.phrase("replaced $ matches",s.length)+".";return o.dispatch({changes:s,effects:EditorView.announce.of(a),userEvent:"input.replace.all"}),!0});function createSearchPanel(o){return o.state.facet(searchConfigFacet).createPanel(o)}function defaultQuery(o,e){var s,a,l,u,c;let d=o.selection.main,h=d.empty||d.to>d.from+100?"":o.sliceDoc(d.from,d.to);if(e&&!h)return e;let p=o.facet(searchConfigFacet);return new SearchQuery$1({search:((s=e==null?void 0:e.literal)!==null&&s!==void 0?s:p.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(a=e==null?void 0:e.caseSensitive)!==null&&a!==void 0?a:p.caseSensitive,literal:(l=e==null?void 0:e.literal)!==null&&l!==void 0?l:p.literal,regexp:(u=e==null?void 0:e.regexp)!==null&&u!==void 0?u:p.regexp,wholeWord:(c=e==null?void 0:e.wholeWord)!==null&&c!==void 0?c:p.wholeWord})}function getSearchInput(o){let e=getPanel(o,createSearchPanel);return e&&e.dom.querySelector("[main-field]")}function selectSearchInput(o){let e=getSearchInput(o);e&&e==o.root.activeElement&&e.select()}const openSearchPanel=o=>{let e=o.state.field(searchState,!1);if(e&&e.panel){let s=getSearchInput(o);if(s&&s!=o.root.activeElement){let a=defaultQuery(o.state,e.query.spec);a.valid&&o.dispatch({effects:setSearchQuery.of(a)}),s.focus(),s.select()}}else o.dispatch({effects:[togglePanel.of(!0),e?setSearchQuery.of(defaultQuery(o.state,e.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=o=>{let e=o.state.field(searchState,!1);if(!e||!e.panel)return!1;let s=getPanel(o,createSearchPanel);return s&&s.dom.contains(o.root.activeElement)&&o.focus(),o.dispatch({effects:togglePanel.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext$2,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext$2,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(e){this.view=e;let s=this.query=e.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:s.search,placeholder:phrase(e,"Find"),"aria-label":phrase(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:s.replace,placeholder:phrase(e,"Replace"),"aria-label":phrase(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:s.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:s.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:s.wholeWord,onchange:this.commit});function a(l,u,c){return crelt("button",{class:"cm-button",name:l,onclick:u,type:"button"},c)}this.dom=crelt("div",{onkeydown:l=>this.keydown(l),class:"cm-search"},[this.searchField,a("next",()=>findNext$2(e),[phrase(e,"next")]),a("prev",()=>findPrevious(e),[phrase(e,"previous")]),a("select",()=>selectMatches(e),[phrase(e,"all")]),crelt("label",null,[this.caseField,phrase(e,"match case")]),crelt("label",null,[this.reField,phrase(e,"regexp")]),crelt("label",null,[this.wordField,phrase(e,"by word")]),...e.state.readOnly?[]:[crelt("br"),this.replaceField,a("replace",()=>replaceNext$2(e),[phrase(e,"replace")]),a("replaceAll",()=>replaceAll$2(e),[phrase(e,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(e),"aria-label":phrase(e,"close"),type:"button"},[""])])}commit(){let e=new SearchQuery$1({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:setSearchQuery.of(e)}))}keydown(e){runScopeHandlers(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?findPrevious:findNext$2)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),replaceNext$2(this.view))}update(e){for(let s of e.transactions)for(let a of s.effects)a.is(setSearchQuery)&&!a.value.eq(this.query)&&this.setQuery(a.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(o,e){return o.state.phrase(e)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(o,{from:e,to:s}){let a=o.state.doc.lineAt(e),l=o.state.doc.lineAt(s).to,u=Math.max(a.from,e-AnnounceMargin),c=Math.min(l,s+AnnounceMargin),d=o.state.sliceDoc(u,c);if(u!=a.from){for(let h=0;h<AnnounceMargin;h++)if(!Break.test(d[h+1])&&Break.test(d[h])){d=d.slice(h);break}}if(c!=l){for(let h=d.length-1;h>d.length-AnnounceMargin;h--)if(!Break.test(d[h-1])&&Break.test(d[h])){d=d.slice(0,h);break}}return EditorView.announce.of(`${o.state.phrase("current match")}. ${d} ${o.state.phrase("on line")} ${a.number}.`)}const baseTheme=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme];function useSearch({state:o,onChange:e,onSearchPrev:s,onSearchNext:a,onReplaceNext:l,onReplaceAll:u}){const[c,,d]=useBooleanState(!0);return{isCompact:c,searchState:o,handlers:{onExpand:d,onSearchChange:v=>{e({...o,search:v})},onReplaceChange:v=>{e({...o,replace:v})},onWholeWordChange:v=>{e({...o,wholeWord:v})},onCaseSensitiveChange:v=>{e({...o,caseSensitive:v})},onFindPrevious:()=>{s(o)},onFindNext:()=>{a(o)},onReplace:()=>{l(o)},onReplaceAll:()=>{u(o)}}}}const SearchQA={Panel:"g-md-search-panel",Counter:"g-md-search-counter",NextBtn:"g-md-search-next-btn",PrevBtn:"g-md-search-prev-btn",FindInput:"g-md-search-find-input",ReplaceInput:"g-md-search-replace-input",ReplaceBtn:"g-md-search-replace-btn",ReplaceAllBtn:"g-md-search-replace-all-btn",ExpandBtn:"g-md-search-expand-btn",CaseSensitiveCheck:"g-md-search-case-sensitive-check",WholeWordCheck:"g-md-search-whole-word-check",CloseBtn:"g-md-search-close-btn"},NAMESPACE="gc-";r({e:"__",m:"_",v:"_"});const block=r({n:NAMESPACE,e:"__",m:"_",v:"_"});function useDelayedValue(o,e,s=200){const[a,l]=reactExports.useState(o),u=reactExports.useRef(),c=reactExports.useCallback(d=>{l(d),window.clearTimeout(u.current),u.current=window.setTimeout(()=>{e(d)},s)},[s,e]);return reactExports.useEffect(()=>{l(d=>d===o?d:o)},[o]),{currentValue:a,delayedOnChange:c}}function DelayedTextInputComponent(o,e){const{value:s,onUpdate:a,delay:l,...u}=o,{currentValue:c,delayedOnChange:d}=useDelayedValue(s,a,l),h=p=>{var m;o.hasClear&&p.type==="click"&&p.target.value===""&&((m=u.onChange)==null||m.call(u,p),a(""))};return jsxRuntimeExports.jsx(TextInput,{...u,ref:e,onChange:h,value:c,onUpdate:d})}const DelayedTextInput=reactExports.forwardRef(DelayedTextInputComponent),b$i=block("form-row"),FormRowFieldDescription=({children:o,className:e,...s})=>jsxRuntimeExports.jsx("p",{...s,className:b$i("field-description",e),children:o});FormRowFieldDescription.displayName="FormRow.FieldDescription";const en$8={"label_required-field":"(this field is mandatory)"},ru$8={"label_required-field":"(    )"},i18n$7=addComponentKeysets({en:en$8,ru:ru$8},`${NAMESPACE}form-row`),b$h=block("form-row"),FormRowComponent=({className:o,label:e,labelHelpPopover:s,fieldId:a,required:l=!1,children:u,direction:c="row"})=>{const{t:d}=i18n$7.useTranslation(),h=a?"label":"span";return jsxRuntimeExports.jsxs("div",{className:b$h({direction:c},o),children:[jsxRuntimeExports.jsx("div",{className:b$h("left"),children:jsxRuntimeExports.jsxs(h,{className:b$h("field-name"),htmlFor:a||void 0,children:[jsxRuntimeExports.jsx("span",{className:b$h("field-name-text"),children:e}),l?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:["",jsxRuntimeExports.jsx("sup",{className:b$h("required-mark"),"aria-label":d("label_required-field"),children:"*"})]}):null,s?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:["",jsxRuntimeExports.jsx("span",{className:b$h("help-popover"),children:s})]}):null]})}),jsxRuntimeExports.jsx("div",{className:b$h("right"),children:u})]})};FormRowComponent.displayName="FormRow";const FormRow=Object.assign(FormRowComponent,{FieldDescription:FormRowFieldDescription}),title$1="Search and replace",action_close$1="Close",action_replace$1="Replace",action_replace_all$1="Replace all",action_next$1="Find next",action_prev$1="Find previous",action_expand$1="Expand the replacement form",title_search$1="Find",title_replace$1="Replace with",search_counter$1="{{current}} of {{total}}",search_placeholder$1="Text search",en$7={"label_case-sensitive":"Case sensitive","label_whole-word":"Whole word",title:title$1,action_close:action_close$1,action_replace:action_replace$1,action_replace_all:action_replace_all$1,action_next:action_next$1,action_prev:action_prev$1,action_expand:action_expand$1,title_search:title_search$1,title_replace:title_replace$1,search_counter:search_counter$1,search_placeholder:search_placeholder$1},title="  ",action_close="",action_replace="",action_replace_all=" ",action_next="",action_prev="",action_expand="  ",title_search="",title_replace=" ",search_counter="{{current}}  {{total}}",search_placeholder="  ",ru$7={"label_case-sensitive":"  ","label_whole-word":" ",title,action_close,action_replace,action_replace_all,action_next,action_prev,action_expand,title_search,title_replace,search_counter,search_placeholder},KEYSET$7="search",i18n$6=registerKeyset(KEYSET$7,{en:en$7,ru:ru$7}),SearchCounterText=({counter:o,style:e,className:s})=>jsxRuntimeExports.jsx(Text$3,{whiteSpace:"nowrap",style:e,className:s,qa:SearchQA.Counter,children:i18n$6("search_counter",{current:String(o.current),total:String(o.total)})}),SearchTextInput=function o({counter:e,onFindNext:s,onFindPrevious:a,...l}){const u=reactExports.useCallback(c=>{c.key==="Enter"&&(c.shiftKey?a():s())},[s,a]);return jsxRuntimeExports.jsx(DelayedTextInput,{size:"l",qa:SearchQA.FindInput,onKeyDown:u,endContent:!!l.value&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e&&jsxRuntimeExports.jsx(SearchCounterText,{counter:e,className:sp({px:1})}),jsxRuntimeExports.jsx(Button,{size:"m",view:"flat-secondary",onClick:a,"aria-label":i18n$6("action_prev"),qa:SearchQA.PrevBtn,children:jsxRuntimeExports.jsx(ButtonIcon,{children:jsxRuntimeExports.jsx(Icon,{data:ChevronUp})})}),jsxRuntimeExports.jsx(Button,{size:"m",view:"flat-secondary",onClick:s,className:sp({ml:1}),"aria-label":i18n$6("action_next"),qa:SearchQA.NextBtn,children:jsxRuntimeExports.jsx(ButtonIcon,{children:jsxRuntimeExports.jsx(Icon,{data:ChevronDown})})})]}),...l})},b$g=cn("search-card"),SearchCardView=({style:o,className:e,counter:s,searchState:a,onClose:l,onSearchChange:u,onReplacementChange:c,onFindPrevious:d,onFindNext:h,onReplace:p,onReplaceAll:m,onWholeWordChange:g,onCaseSensitiveChange:y})=>{const A=reactExports.useRef(null);return useAutoFocus(A,[],200),jsxRuntimeExports.jsxs(Card,{size:"l",spacing:{pt:4,pb:5,pl:5,pr:5},style:o,className:b$g(null,e),children:[jsxRuntimeExports.jsxs(Flex,{spacing:{mb:5},alignItems:"center",justifyContent:"space-between",className:b$g("header"),children:[jsxRuntimeExports.jsx(Text$3,{variant:"subheader-2",className:b$g("title"),children:i18n$6("title")}),jsxRuntimeExports.jsx(Button,{size:"m",view:"flat",onClick:l,"aria-label":i18n$6("action_close"),qa:SearchQA.CloseBtn,children:jsxRuntimeExports.jsx(Icon,{data:Xmark})})]}),jsxRuntimeExports.jsxs(FormRow,{direction:"row",label:i18n$6("title_search"),className:b$g("row",sp({mb:4})),children:[jsxRuntimeExports.jsx(SearchTextInput,{counter:s,onFindNext:h,onFindPrevious:d,controlRef:A,className:sp({mb:2}),onUpdate:u,value:a.search,delay:300}),jsxRuntimeExports.jsx(Checkbox$1,{size:"m",onUpdate:y,checked:a.caseSensitive,qa:SearchQA.CaseSensitiveCheck,className:sp({mr:4}),children:i18n$6("label_case-sensitive")}),jsxRuntimeExports.jsx(Checkbox$1,{size:"m",checked:a.wholeWord,onUpdate:g,qa:SearchQA.WholeWordCheck,children:i18n$6("label_whole-word")})]}),jsxRuntimeExports.jsx(FormRow,{direction:"row",label:i18n$6("title_replace"),className:b$g("row",sp({mb:5})),children:jsxRuntimeExports.jsx(DelayedTextInput,{size:"l",delay:300,value:a.replace,onUpdate:c,qa:SearchQA.ReplaceInput})}),jsxRuntimeExports.jsxs(Flex,{justifyContent:"flex-end",gap:2,className:b$g("footer"),children:[jsxRuntimeExports.jsx(Button,{size:"l",view:"normal",onClick:m,disabled:!a.search,qa:SearchQA.ReplaceAllBtn,children:i18n$6("action_replace_all")}),jsxRuntimeExports.jsx(Button,{view:"action",size:"l",disabled:!a.search,onClick:p,qa:SearchQA.ReplaceBtn,children:i18n$6("action_replace")})]})]})},b$f=cn("search-compact"),SeachCompactView=function o({value:e,counter:s,onChange:a,onFindNext:l,onFindPrevious:u,onExpand:c,onClose:d,qa:h,style:p,className:m}){const g=reactExports.useRef(null);return useAutoFocus(g,[],200),jsxRuntimeExports.jsxs(Card,{spacing:{pr:1},"data-qa":h,style:p,className:b$f(null,m),children:[jsxRuntimeExports.jsx(SearchTextInput,{counter:s,onFindNext:l,onFindPrevious:u,value:e,view:"clear",delay:300,onUpdate:a,controlRef:g,placeholder:i18n$6("search_placeholder"),className:sp({pl:3})}),jsxRuntimeExports.jsx("div",{className:sp({mr:1}),style:{flexShrink:0,background:"var(--g-color-line-generic-solid)",height:"36px",width:"1px"}}),jsxRuntimeExports.jsx(Tooltip,{content:i18n$6("action_expand"),role:"label",children:(y,A)=>jsxRuntimeExports.jsx(Button,{...y,size:"m",view:"flat-secondary",onClick:c,qa:SearchQA.ExpandBtn,ref:A,"aria-label":i18n$6("action_expand"),children:jsxRuntimeExports.jsx(ButtonIcon,{children:jsxRuntimeExports.jsx(Icon,{data:ChevronsExpandUpRight})})})}),jsxRuntimeExports.jsx(Button,{size:"m",view:"flat-secondary",onClick:d,className:sp({ml:1}),"aria-label":i18n$6("action_close"),qa:SearchQA.CloseBtn,children:jsxRuntimeExports.jsx(ButtonIcon,{children:jsxRuntimeExports.jsx(Icon,{data:Xmark})})})]})};function useRAF(o){const e=reactExports.useRef(null);return reactExports.useEffect(()=>()=>{e.current!==null&&(cancelAnimationFrame(e.current),e.current=null)},[o]),reactExports.useCallback(()=>{e.current===null&&(e.current=requestAnimationFrame(()=>{e.current=null,o()}))},[o])}function useObserveIntersection({floatingRef:o,container:e,selector:s,observerOptions:a}){const[l,u]=reactExports.useState(!1),c=useLatest(l),d=reactExports.useCallback(()=>{const p=o.current,m=e.querySelector(s);if(!m||!p){c.current&&u(!1);return}const g=areElementsIntersecting(m,p);g!==c.current&&u(g)},[e,o,c,s]),h=useRAF(d);return reactExports.useEffect(()=>{h();const p=new MutationObserver(h);p.observe(e,a??{childList:!0,subtree:!0,attributes:!0});for(const m of REFLOW_EVENTS)window.addEventListener(m,h);return()=>{p.disconnect();for(const m of REFLOW_EVENTS)window.removeEventListener(m,h)}},[e,h,a]),{intersection:l}}const b$e=cn("search-popup"),SearchPopup=({open:o,anchor:e,counter:s,onClose:a,intersectionTracking:l,...u})=>{const{isCompact:c,searchState:d,handlers:h}=useSearch(u),p=reactExports.useRef(null),{intersection:m}=useObserveIntersection({floatingRef:p,container:l.container,selector:l.selector,observerOptions:l.observerOptions});return jsxRuntimeExports.jsx(Popup,{open:o,qa:SearchQA.Panel,anchorElement:e,placement:"bottom-end",floatingRef:p,floatingStyles:{opacity:m?.8:1},className:b$e({compact:c}),onOpenChange:(g,y,A)=>{A==="escape-key"&&a()},children:c?jsxRuntimeExports.jsx(SeachCompactView,{counter:s,onClose:a,value:d.search,onExpand:h.onExpand,onChange:h.onSearchChange,onFindNext:h.onFindNext,onFindPrevious:h.onFindPrevious}):jsxRuntimeExports.jsx(SearchCardView,{counter:s,onClose:a,searchState:d,onSearchChange:h.onSearchChange,onReplacementChange:h.onReplaceChange,onFindNext:h.onFindNext,onFindPrevious:h.onFindPrevious,onReplace:h.onReplace,onReplaceAll:h.onReplaceAll,onWholeWordChange:h.onWholeWordChange,onCaseSensitiveChange:h.onCaseSensitiveChange})})};SearchPopup.displayName="SearchPopup";function renderSearchPopup({anchor:o,...e}){return o?jsxRuntimeExports.jsx(SearchPopup,{anchor:o,...e}):null}const searchTheme=EditorView.baseTheme({"&light, &dark":{"& .cm-searchMatch":{backgroundColor:"var(--g-color-base-info-light)"},"& .cm-searchMatch-selected":{backgroundColor:"var(--g-color-base-info-heavy)"}}}),SearchPanelPlugin=o=>ViewPlugin.fromClass(class{constructor(e){oe(this,"view");oe(this,"params");oe(this,"renderer");oe(this,"receiver");oe(this,"panelOpened");oe(this,"searchState");var s;this.view=e,this.params=o,this.receiver=o.receiver,this.panelOpened=searchPanelOpen(e.state),this.searchState=getSearchQuery(e.state),this.renderer=this.createRenderer(),this.handleClose=this.handleClose.bind(this),this.handleChange=this.handleChange.bind(this),this.handleSearchNext=this.handleSearchNext.bind(this),this.handleSearchPrev=this.handleSearchPrev.bind(this),this.handleReplaceNext=this.handleReplaceNext.bind(this),this.handleReplaceAll=this.handleReplaceAll.bind(this),this.handleEditorModeChange=this.handleEditorModeChange.bind(this),(s=this.receiver)==null||s.on("change-editor-mode",this.handleEditorModeChange)}update(e){const s=searchPanelOpen(e.state),a=getSearchQuery(e.state);(s!==this.panelOpened||a!==this.searchState)&&(this.panelOpened=s,this.searchState=a,this.renderer.rerender())}destroy(){var e;this.renderer.remove(),(e=this.receiver)==null||e.off("change-editor-mode",this.handleEditorModeChange)}createRenderer(){return this.view.state.facet(ReactRendererFacet).createItem("cm-search",()=>{if(!this.panelOpened||!this.searchState)return null;const{dom:e}=this.view,a=(o.editorSelector&&e.closest(o.editorSelector)||e.ownerDocument).querySelector(o.anchorSelector);return a?renderSearchPopup({open:!0,anchor:a,state:this.searchState,onClose:this.handleClose,onChange:this.handleChange,onSearchNext:this.handleSearchNext,onSearchPrev:this.handleSearchPrev,onReplaceNext:this.handleReplaceNext,onReplaceAll:this.handleReplaceAll,intersectionTracking:{container:this.view.contentDOM,selector:".cm-searchMatch-selected",observerOptions:{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}}}):null})}handleEditorModeChange({mode:e}){e==="wysiwyg"&&closeSearchPanel(this.view)}handleChange(e){this.view.dispatch({effects:setSearchQuery.of(new SearchQuery$1({search:e.search,replace:e.replace,caseSensitive:e.caseSensitive,wholeWord:e.wholeWord}))})}handleClose(){this.handleChange({search:""}),closeSearchPanel(this.view),this.view.focus()}handleSearchNext(){findNext$2(this.view)}handleSearchPrev(){findPrevious(this.view)}handleReplaceNext(){replaceNext$2(this.view)}handleReplaceAll(){replaceAll$2(this.view)}},{provide:()=>[keymap.of(searchKeymap),searchTheme,search$1({createPanel:()=>({dom:document.createElement("div")})})]});function parseMarkers(o){const e=[];let s=0;for(;s<o.length;){if(s+3<o.length&&o[s]===" "&&o[s+1]===" "&&o[s+2]===" "&&o[s+3]===" "){e.push("    "),s+=4;continue}if(/^\d{1,6}\. /.test(o.slice(s))){const a=o.slice(s).match(/^(\d{1,6}\. )/);if(a){e.push(a[1]),s+=a[1].length;continue}}if((o[s]===">"||o[s]==="-"||o[s]==="*"||o[s]==="+")&&s+1<o.length&&o[s+1]===" "){e.push(o[s]+" "),s+=2;continue}if(o[s]===" "){e.push(" "),s+=1;continue}break}return e}function smartReindent(o,e){if(e.length===0)return o;const s=parseMarkers(e);if(s.length===0)return o;const a=s.map(c=>c.match(/^\d{1,6}\. |-|\*|\+/)?" ".repeat(c.length):c).join("");return o.split(`
`).map((c,d)=>d===0?c:a+c).join(`
`)}const linkRegex=/\[[\s\S]*?]\([\s\S]*?\)/g;function createCodemirror(o){const{logger:e,doc:s,reactRenderer:a,onCancel:l,onScroll:u,onSubmit:c,onChange:d,onDocChange:h,disabledExtensions:p={},keymaps:m=[],receiver:g,yfmLangOptions:y,extensions:A,placeholder:T,autocompletion:E,tooltips:v,parseHtmlOnPaste:_,parseInsertedUrlAsImage:w,directiveSyntax:R,preserveEmptyRows:k,searchPanel:I=!0}=o,P=[gravityTheme,placeholder(T)];p.history||P.push(history$2());const N=new InputState$1;return P.push(syntaxHighlighting(gravityHighlightStyle),LoggerFacet.of(e),keymap.of([{key:formatter.toCM(Action.Bold),run:withLogger(ActionName.bold,toggleBold)},{key:formatter.toCM(Action.Italic),run:withLogger(ActionName.italic,toggleItalic)},{key:formatter.toCM(Action.Strike),run:withLogger(ActionName.strike,toggleStrikethrough)},{key:formatter.toCM(Action.Underline),run:withLogger(ActionName.underline,toggleUnderline)},{key:formatter.toCM(Action.Link),run:withLogger(ActionName.link,insertLink)},{key:formatter.toCM(Action.Heading1),run:withLogger(ActionName.heading1,toH1)},{key:formatter.toCM(Action.Heading2),run:withLogger(ActionName.heading2,toH2)},{key:formatter.toCM(Action.Heading3),run:withLogger(ActionName.heading3,toH3)},{key:formatter.toCM(Action.Heading4),run:withLogger(ActionName.heading4,toH4)},{key:formatter.toCM(Action.Heading5),run:withLogger(ActionName.heading5,toH5)},{key:formatter.toCM(Action.Heading6),run:withLogger(ActionName.heading6,toH6)},{key:formatter.toCM(Action.Code),run:withLogger(ActionName.code_inline,wrapToInlineCode)},{key:formatter.toCM(Action.CodeBlock),run:withLogger(ActionName.code_block,wrapToCodeBlock)},{key:formatter.toCM(Action.Cut),run:withLogger(ActionName.yfm_cut,wrapToYfmCut)},{key:formatter.toCM(Action.Note),run:withLogger(ActionName.yfm_note,wrapToYfmNote)},{key:formatter.toCM(Action.Cancel),preventDefault:!0,run:()=>(l(),!0)},{key:formatter.toCM(Action.Submit),preventDefault:!0,run:()=>(c(),!0)},{key:"Tab",preventDefault:!0,run:insertTab},{key:"Enter",shift:insertNewlineKeepIndent},indentWithTab,...defaultKeymap,...p.history?[]:historyKeymap,...m]),autocompletion(E),yfmLang(y),ReactRendererFacet.of(a),DirectiveSyntaxFacet.of(R),PairingCharactersExtension,EditorView.lineWrapping,EditorView.contentAttributes.of({spellcheck:"true"}),EditorView.domEventHandlers({scroll(L){u(L)},keydown(L){N.keydown(L)},keyup(L){N.keyup(L)},paste(L,Q){if(!L.clipboardData)return!1;const j=e.nested({domEvent:"paste",dataTypes:L.clipboardData.types}),{from:F}=Q.state.selection.main,V=Q.state.doc.lineAt(F),J=V.text,z=L.clipboardData.getData(DataTransferType$1.Yfm);if(z){L.preventDefault(),e.event({event:"paste-markup"});const he=smartReindent(z,J);return Q.dispatch(Q.state.replaceSelection(he)),!0}const Y=shouldSkipHtmlConversion(L.clipboardData),fe=L.clipboardData.getData(DataTransferType$1.Html);if(fe&&_&&!Y){let he;try{const G=new DOMParser().parseFromString(fe,"text/html");he=new MarkdownConverter().processNode(G.body).trim()}catch(ue){j.error(ue,{event:"parse-html-to-md"}),globalLogger.error(ue)}if(he!==void 0){L.preventDefault(),e.event({event:"paste-parsed-html"});const ue=smartReindent(he,J);return Q.dispatch(Q.state.replaceSelection(ue)),!0}}if(!N.shiftKey&&w){const he=J.matchAll(linkRegex),ue=F-V.from;if(!he.some(K=>{var q;return ue>=K.index&&ue<=K.index+(((q=K[0])==null?void 0:q.length)??0)})){const{imageUrl:K,title:q}=w(L.clipboardData.getData(DataTransferType$1.Text)??"")||{};if(K)return L.preventDefault(),e.event({event:"paste-url-as-image"}),insertImages([{url:K,alt:q,title:q}])(Q),!0}}const de=L.clipboardData.getData(DataTransferType$1.Text),X=smartReindent(de,J);return de!==X?(Q.dispatch(Q.state.replaceSelection(X)),L.preventDefault(),!0):!1}})),I&&P.push(SearchPanelPlugin({anchorSelector:".g-md-search-markup-anchor",editorSelector:".g-md-editor-component",receiver:g})),k&&P.push(keymap.of([{key:formatter.toCM(Action.EmptyRow),run:withLogger(ActionName.emptyRow,insertEmptyRow)}])),o.uploadHandler&&P.push(FileUploadHandlerFacet.of({fn:o.uploadHandler,imageWithDimensions:o.needImageDimensions,enableNewImageSizeCalculation:o.enableNewImageSizeCalculation})),v&&P.push(tooltips(v)),A&&P.push(...A),new EditorView({doc:s,extensions:P,dispatchTransactions:(L,Q)=>{Q.update(L),d(),L.some(j=>j.docChanged)&&h()}})}function withLogger(o,e){return(...s)=>{const{state:a}=s[0];return a.facet(LoggerFacet).action({source:"keymap",action:o}),globalLogger.action({mode:"markup",source:"keymap",action:o}),e(...s)}}class Editor{constructor(e){qe(this,Rt);$e(this,Rt,e)}get cm(){return pe(this,Rt)}get codemirror(){return pe(this,Rt)}focus(){return pe(this,Rt).focus()}hasFocus(){return pe(this,Rt).hasFocus}getValue(){return pe(this,Rt).state.doc.toString()}isEmpty(){return pe(this,Rt).state.doc.lines===1&&pe(this,Rt).state.doc.line(1).text.trim().length===0}clear(){this.replace("")}replace(e){pe(this,Rt).dispatch({changes:{from:0,to:pe(this,Rt).state.doc.length,insert:e}})}prepend(e){const s=pe(this,Rt).state.changes({from:0,insert:this._fixMarkupBeforeInsert(e)});pe(this,Rt).dispatch({changes:s,selection:pe(this,Rt).state.selection.map(s,1)})}append(e){if(this.isEmpty()){pe(this,Rt).dispatch({changes:{from:0,insert:this._fixMarkupBeforeInsert(e)}}),this.moveCursor("end");return}const{lineBreak:s}=pe(this,Rt).state;let a;const{doc:l,doc:{lines:u}}=pe(this,Rt).state;u>=2&&l.lineAt(u).length===0?l.lineAt(u-1).length===0?a=e:a=s+e:a=s+s+e,pe(this,Rt).dispatch({changes:{from:l.length,insert:a}})}moveCursor(e){let s;switch(e){case"start":s=0;break;case"end":s=pe(this,Rt).state.doc.length;break;default:throw new Error('The "position" argument must be "start" or "end"')}pe(this,Rt).dispatch({selection:{anchor:s}})}_fixMarkupBeforeInsert(e){return e.endsWith(`

`)?e:e.endsWith(`
`)?e+`
`:e+`

`}}Rt=new WeakMap,ToolbarDataType.SingleButton;const DecoClassName="pm-command-input",en$6={"error-title":"Error","error-desc":"Error loading","empty-msg":"Not found"},ru$6={"error-title":"","error-desc":"  ","empty-msg":" "},KEYSET$6="suggest",i18n$5=registerKeyset(KEYSET$6,{en:en$6,ru:ru$6}),b$d=cn("command-menu"),placement$3=["bottom-start","top-start","bottom-end","top-end"],ITEM_HEIGHT=28,VISIBLE_ITEMS_COUNT=10,MAX_LIST_HEIGHT=ITEM_HEIGHT*VISIBLE_ITEMS_COUNT;function calcListHeight(o){if(!(o<=0))return Math.min(MAX_LIST_HEIGHT,o*ITEM_HEIGHT)}const CommandMenuComponent=({anchorElement:o,currentIndex:e,items:s,onItemClick:a,onOpenChange:l})=>o?jsxRuntimeExports.jsx(Popup,{open:!0,anchorElement:o,placement:placement$3,onOpenChange:l,qa:"g-md-toolbar-command-menu",children:jsxRuntimeExports.jsx("div",{className:b$d(),children:jsxRuntimeExports.jsx(List,{virtualized:!0,items:s,sortable:!1,filterable:!1,emptyPlaceholder:i18n$5("empty-msg"),itemHeight:ITEM_HEIGHT,itemsHeight:calcListHeight(s.length),renderItem,deactivateOnLeave:!1,activeItemIndex:e,onItemClick:(u,c)=>a(c),className:b$d("list"),itemClassName:b$d("list-item")})})}):null;function renderItem({id:o,title:e,icon:s,hotkey:a,hint:l,preview:u}){const c=isFunction(e)?e():e,d=isFunction(l)?l():l;return jsxRuntimeExports.jsx(PreviewTooltip,{preview:u,children:jsxRuntimeExports.jsxs("div",{className:b$d("item",{id:o}),children:[jsxRuntimeExports.jsx(Icon,{data:s.data,size:20,className:b$d("item-icon")}),jsxRuntimeExports.jsxs("div",{className:b$d("item-body"),children:[jsxRuntimeExports.jsx("span",{className:b$d("item-title"),children:c}),jsxRuntimeExports.jsxs("div",{className:b$d("item-extra"),children:[a&&jsxRuntimeExports.jsx(Hotkey,{value:a,className:b$d("item-hotkey")}),d&&jsxRuntimeExports.jsx(HelpMark,{className:b$d("item-hint"),children:d})]})]})]},o)})}function render(o){return jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:jsxRuntimeExports.jsx(CommandMenuComponent,{...o})})}function findDecoElem(o){const e=o??document;return e.getElementsByClassName(DecoClassName).item(0)??e.getElementsByClassName(AutocompleteDecoClassName).item(0)}class CommandHandler{constructor({logger:e,actions:s,storage:a,nodesIgnoreList:l=[]}){qe(this,Vo);qe(this,Wo);qe(this,Qi);qe(this,Yo);qe(this,Kt);qe(this,Ln);qe(this,si,null);qe(this,ji);qe(this,ai);qe(this,li);qe(this,Er);oe(this,"onItemClick",e=>{var s;pe(this,Kt)&&(pe(this,Kt).currentIndex=e,this.select()),(s=pe(this,Ln))==null||s.focus()});$e(this,Vo,e),$e(this,Wo,s),$e(this,Qi,a),$e(this,Yo,l)}onOpen(e){return this.findAnchor(),!pe(this,si)||this.shouldIgnore(e)?(this.closeAutocomplete(e.view),!0):($e(this,ai,new AutocompletePopupCloser(e.view)),this.updateState(e),this.filterActions(),this.render(),!0)}onFilter(e){var a,l;if(this.shouldIgnore(e)||(a=e.filter)!=null&&a.endsWith("  "))return this.closeAutocomplete(e.view),!0;this.updateState(e),$e(this,ji,(l=e.filter)==null?void 0:l.trim().toLowerCase());const s=this.filterActions();return this.render(),s&&this.closeAutocomplete(e.view),!0}onArrow(e){if(this.shouldIgnore(e))return closeAutocomplete(e.view),!0;if(this.updateState(e),!pe(this,Kt))return!1;switch(e.kind){case ActionKind.up:{pe(this,Kt).prev();break}case ActionKind.down:{pe(this,Kt).next();break}default:return!1}return this.render(),!0}onEnter(e){return this.shouldIgnore(e)?(closeAutocomplete(e.view),!0):(this.updateState(e),this.select(),!0)}onClose(e){return this.updateState(e),this.clear(),!0}onDestroy(){this.clear()}closeAutocomplete(e){setTimeout(()=>{closeAutocomplete(e)})}shouldIgnore(e){const s=e.view.state.doc.resolve(e.range.from).parent.type;return s.spec.commandMenu===!1||pe(this,Yo).includes(s.name)}select(){var u;if(!pe(this,Ln))return;const e=(u=pe(this,Kt))==null?void 0:u.currentItem;if(!e)return;const s=getAutocompleteState(pe(this,Ln).state);if(!s||!s.active)return;const a=pe(this,Ln),{range:l}=s;a.dispatch(a.state.tr.deleteRange(l.from,l.to).scrollIntoView()),e.exec(pe(this,Qi)),a.focus(),globalLogger.action({mode:"wysiwyg",source:"command-menu",action:e.id}),pe(this,Vo).action({source:"command-menu",action:e.id})}filterActions(){var c;const e=(c=pe(this,Kt))==null?void 0:c.currentItem,s=pe(this,ji),a=pe(this,Wo).filter(d=>d.isEnable(pe(this,Qi)));let l=a,u=!1;if(s&&(l=filterActions(a,s),u=!l.length&&needToHide(a,s)),$e(this,Kt,new ArrayCarousel(l)),e){const d=pe(this,Kt).array.findIndex(h=>h===e);d!==-1&&(pe(this,Kt).currentIndex=d)}return u}render(){var s,a,l;this.findAnchor();const e=((s=pe(this,Kt))==null?void 0:s.array)??[];$e(this,li,{anchorElement:pe(this,si),currentIndex:(a=pe(this,Kt))==null?void 0:a.currentIndex,items:e,onItemClick:this.onItemClick,onOpenChange:(l=pe(this,ai))==null?void 0:l.popupOpenChangeHandler}),$e(this,Er,pe(this,Er)??this.createMenuRenderItem()),pe(this,Er).rerender()}updateState({view:e}){$e(this,Ln,e)}clear(){var e,s;$e(this,Ln,void 0),$e(this,si,null),$e(this,ji,void 0),$e(this,Kt,void 0),(e=pe(this,ai))==null||e.cancelTimer(),$e(this,ai,void 0),$e(this,li,void 0),(s=pe(this,Er))==null||s.remove(),$e(this,Er,void 0)}createMenuRenderItem(){return getReactRendererFromState(pe(this,Ln).state).createItem("command_menu",()=>pe(this,li)?render(pe(this,li)):null)}findAnchor(){var e;$e(this,si,findDecoElem((e=pe(this,Ln))==null?void 0:e.dom))}}Vo=new WeakMap,Wo=new WeakMap,Qi=new WeakMap,Yo=new WeakMap,Kt=new WeakMap,Ln=new WeakMap,si=new WeakMap,ji=new WeakMap,ai=new WeakMap,li=new WeakMap,Er=new WeakMap;function filterActions(o,e){return o.filter(s=>{var d;const a=e.toLowerCase(),l=s.id.toLowerCase().includes(a),u=(isFunction(s.title)?s.title():s.title).toLowerCase().includes(a),c=((d=s.aliases)==null?void 0:d.some(h=>h.toLowerCase().includes(a)))??!1;return l||u||c})}const CHARS_TO_HIDE=4;function needToHide(o,e){let s=1;do{const a=e.slice(0,e.length-s);if(filterActions(o,a).length)break;s++}while(s<e.length&&s<CHARS_TO_HIDE);return s>=CHARS_TO_HIDE}const getCommandMenuAutocompleteItem=(o,e)=>({actions:s})=>({trigger:{name:"command",trigger:/(?:^|\s)(\/)$/,allArrowKeys:!1,cancelOnFirstSpace:!0,decorationAttrs:{class:DecoClassName}},handler:new CommandHandler({logger:e,storage:s,actions:o.actions,nodesIgnoreList:(o.nodesIgnoreList??[]).concat([DeflistNode.Term,TableNode.HeaderCell,TableNode.DataCell,CheckboxNode.Label,NoteNode.NoteTitle,CutNode.CutTitle,TabsNode.Tab])})}),CommandMenu=(o,e)=>{if(!Array.isArray(e.actions)||e.actions.length===0){globalLogger.log("[CommandMenu extension]: Skip because 'actions' is not an array or is empty"),o.logger.log("[CommandMenu extension]: Skip because 'actions' is not an array or is empty");return}o.context.has("autocomplete")||o.use(Autocomplete),o.context.get("autocomplete").add(getCommandMenuAutocompleteItem(e,o.logger))};function dropCursor(o={}){return new Plugin({view(e){return new DropCursorView(e,o)}})}class DropCursorView{constructor(e,s){var a;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(a=s.width)!==null&&a!==void 0?a:1,this.color=s.color===!1?void 0:s.color||"black",this.class=s.class,this.handlers=["dragover","dragend","drop","dragleave"].map(l=>{let u=c=>{this[l](c)};return e.dom.addEventListener(l,u),{name:l,handler:u}})}destroy(){this.handlers.forEach(({name:e,handler:s})=>this.editorView.dom.removeEventListener(e,s))}update(e,s){this.cursorPos!=null&&s.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),s=!e.parent.inlineContent,a,l=this.editorView.dom,u=l.getBoundingClientRect(),c=u.width/l.offsetWidth,d=u.height/l.offsetHeight;if(s){let g=e.nodeBefore,y=e.nodeAfter;if(g||y){let A=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(A){let T=A.getBoundingClientRect(),E=g?T.bottom:T.top;g&&y&&(E=(E+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*d;a={left:T.left,right:T.right,top:E-v,bottom:E+v}}}}if(!a){let g=this.editorView.coordsAtPos(this.cursorPos),y=this.width/2*c;a={left:g.left-y,right:g.left+y,top:g.top,bottom:g.bottom}}let h=this.editorView.dom.offsetParent;this.element||(this.element=h.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",s),this.element.classList.toggle("prosemirror-dropcursor-inline",!s);let p,m;if(!h||h==document.body&&getComputedStyle(h).position=="static")p=-pageXOffset,m=-pageYOffset;else{let g=h.getBoundingClientRect(),y=g.width/h.offsetWidth,A=g.height/h.offsetHeight;p=g.left-h.scrollLeft*y,m=g.top-h.scrollTop*A}this.element.style.left=(a.left-p)/c+"px",this.element.style.top=(a.top-m)/d+"px",this.element.style.width=(a.right-a.left)/c+"px",this.element.style.height=(a.bottom-a.top)/d+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let s=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),a=s&&s.inside>=0&&this.editorView.state.doc.nodeAt(s.inside),l=a&&a.type.spec.disableDropCursor,u=typeof l=="function"?l(this.editorView,s,e):l;if(s&&!u){let c=s.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let d=dropPoint(this.editorView.state.doc,c,this.editorView.dragging.slice);d!=null&&(c=d)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const getPlaceholderPluginKeys=o=>{var s;const e=[];for(const a in o.nodes)if(o.nodes[a]){const l=o.nodes[a].spec;(s=l.placeholder)!=null&&s.customPlugin&&e.push(l.placeholder.customPlugin)}return e},b$c=cn("placeholder"),createPlaceholder=(o,e,s)=>{const a=getPlaceholderContent(o,e);if(!a)return null;const l=document.createElement("div");l.className=b$c({focus:s});const u=document.createElement("span");u.className=b$c("cursor");const c=document.createElement("span");return c.className=b$c("text"),c.textContent=a,l.append(u,c),l},placeholderNeeded=o=>{const e=findChildren(o,s=>{var a;return!!((a=s.type.spec.placeholder)!=null&&a.alwaysVisible)});return isNodeEmpty(o)&&!e.length},addDecoration=(o,e,s,a,l,u)=>{const c=e.type.spec.placeholder,d=s+e.childCount+1;if(!c||o[d])return;if(c.customPlugin){o[d]=c.customPlugin;return}const h=d===l,p=createPlaceholder(e,a,h);p&&(h&&(u.hasFocus=!0),o[d]={pos:d,toDOM:p,spec:{focus:h}})},pluginKey$3=new PluginKey("placeholder_plugin"),Placeholder=(o,e)=>{o.context.set("placeholder",e),o.addPlugin(()=>new Plugin({key:pluginKey$3,props:{attributes(s){const a={};return pluginKey$3.getState(s).hasFocus&&(a.class="g-md-editor-hidecursor"),a},decorations(s){var a;return(a=pluginKey$3.getState(s))==null?void 0:a.decorationSet}},state:{init:(s,a)=>initState(a),apply:applyState}}),o.Priority.VeryHigh)};function getPlaceholderWidgetSpecs(o){var p;const e={hasFocus:!1},s={},{selection:a}=o,l=isTextSelection(a)?(p=a.$cursor)==null?void 0:p.pos:null;getPlaceholderPluginKeys(o.schema).forEach(m=>{var g;(g=m.getState(o))==null||g.find(void 0,void 0,y=>(s[y.pos]=m,!1))});const u=(m,g,y)=>{const A=m.type.spec.placeholder;A&&A.alwaysVisible&&placeholderNeeded(m)&&addDecoration(s,m,g,y,l,e)};o.doc.descendants(u);const c=findParentNodeClosestToPos(o.selection.$from,m=>!!m.type.spec.placeholder),d=c==null?void 0:c.node.type.spec.placeholder;if(c&&placeholderNeeded(c.node)&&d&&!d.alwaysVisible){const{node:m,pos:g,depth:y}=c,A=y>0?o.selection.$from.node(y-1):null;addDecoration(s,m,g,A,l,e)}return{widgetSpecs:Object.values(s).filter(m=>!(m instanceof PluginKey)),hasFocus:e.hasFocus}}function initState(o){const{widgetSpecs:e,hasFocus:s}=getPlaceholderWidgetSpecs(o);return{decorationSet:DecorationSet.create(o.doc,e.map(l=>Decoration$1.widget(l.pos,l.toDOM,l.spec))),hasFocus:s}}function applyState(o,e,s,a){const{widgetSpecs:l,hasFocus:u}=getPlaceholderWidgetSpecs(a),{decorationSet:c}=e,d=c.map(o.mapping,o.doc),h=l.reduce((y,{pos:A,spec:T})=>{const E=d.find(A,A);return E.length&&isEqual$1(E[0].spec,T)&&y.push(...E),y},[]),p=l.filter(({pos:y})=>!h.map(({from:A})=>A).includes(y)),m=d.remove(h);let g=d;return m.find().length&&(g=g.remove(m.find())),p.length&&(g=g.add(o.doc,p.map(y=>Decoration$1.widget(y.pos,y.toDOM,y.spec)))),{decorationSet:g,hasFocus:u}}const key=new PluginKey("gapCursorPlugin"),gapCursor=()=>new Plugin({key,state:{init:()=>!1,apply:(o,e,s,a)=>{const l=a.selection;return isGapCursorSelection(l)||isNodeSelection(l)}},view(){return{update(o){const e=key.getState(o.state);o.dom.classList.toggle("Prosemirror-hide-cursor",e)}}},props:{handleKeyPress(o){const{state:e,state:{selection:s}}=o;if(isGapCursorSelection(s)){const a=e.tr.replaceSelectionWith(pType(e.schema).create());a.setSelection(TextSelection.create(a.doc,s.pos+1)),o.dispatch(a.scrollIntoView())}return!1},decorations:({doc:o,selection:e})=>{if(isGapCursorSelection(e)){const s=e.head;return DecorationSet.create(o,[Decoration$1.widget(s,toDOM,{key:"gapcursor",side:-1})])}return null}}}),toDOM=(o,e)=>{const s=pType(o.state.schema).create(),a=DOMSerializer.fromSchema(o.state.schema).serializeNode(s),l=createPlaceholder(s,null,!0);return l&&a.appendChild(l),a.classList.add("g-md-gapcursor"),a.addEventListener("mousedown",()=>{e()!==void 0&&o.dispatch(o.state.tr.replaceSelectionWith(s))}),a},Cursor=(o,e)=>{o.addPlugin(()=>gapCursor(),o.Priority.Highest),o.addPlugin(()=>dropCursor(e.dropOptions))},FilePaste=o=>{o.addPlugin(()=>new Plugin({props:{handlePaste(e,s){const a=getFiles(s.clipboardData);return a?(getLoggerFromState(e.state).event({event:"paste-files",plugin:"file-paste",prop:"handlePaste"}),e.dispatch(e.state.tr.replaceSelection(createFilesSlice(e.state.schema,a)).scrollIntoView()),!0):!1},handleDrop(e,s){var d;if(e.dragging)return!1;const a=getFiles(s.dataTransfer);if(!a)return!1;const l=createFilesSlice(e.state.schema,a),u=((d=e.posAtCoords({left:s.clientX,top:s.clientY}))==null?void 0:d.pos)??-1;if(u===-1)return!1;const c=dropPoint(e.state.doc,u,l);return getLoggerFromState(e.state).event({event:"drop-files",plugin:"file-paste",prop:"handleDrop",dispatch:c!==null}),c===null?!1:(e.dispatch(e.state.tr.insert(c,l.content)),!0)}}}),o.Priority.Lowest)};function getFiles(o){return!o||!isFilesOnly$2(o)?null:Array.from(o.files)}function createFilesSlice(o,e){const s=[];for(const a of e)s.push(pType(o).create(null,o.text(a.name)));return new Slice(Fragment.from(s),0,0)}var GOOD_LEAF_SIZE=200,RopeSequence=function o(){};RopeSequence.prototype.append=function o(e){return e.length?(e=RopeSequence.from(e),!this.length&&e||e.length<GOOD_LEAF_SIZE&&this.leafAppend(e)||this.length<GOOD_LEAF_SIZE&&e.leafPrepend(this)||this.appendInner(e)):this},RopeSequence.prototype.prepend=function o(e){return e.length?RopeSequence.from(e).append(this):this},RopeSequence.prototype.appendInner=function o(e){return new Append(this,e)},RopeSequence.prototype.slice=function o(e,s){return e===void 0&&(e=0),s===void 0&&(s=this.length),e>=s?RopeSequence.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,s))},RopeSequence.prototype.get=function o(e){if(!(e<0||e>=this.length))return this.getInner(e)},RopeSequence.prototype.forEach=function o(e,s,a){s===void 0&&(s=0),a===void 0&&(a=this.length),s<=a?this.forEachInner(e,s,a,0):this.forEachInvertedInner(e,s,a,0)},RopeSequence.prototype.map=function o(e,s,a){s===void 0&&(s=0),a===void 0&&(a=this.length);var l=[];return this.forEach(function(u,c){return l.push(e(u,c))},s,a),l},RopeSequence.from=function o(e){return e instanceof RopeSequence?e:e&&e.length?new Leaf(e):RopeSequence.empty};var Leaf=(function(o){function e(a){o.call(this),this.values=a}o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e;var s={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(l,u){return l==0&&u==this.length?this:new e(this.values.slice(l,u))},e.prototype.getInner=function(l){return this.values[l]},e.prototype.forEachInner=function(l,u,c,d){for(var h=u;h<c;h++)if(l(this.values[h],d+h)===!1)return!1},e.prototype.forEachInvertedInner=function(l,u,c,d){for(var h=u-1;h>=c;h--)if(l(this.values[h],d+h)===!1)return!1},e.prototype.leafAppend=function(l){if(this.length+l.length<=GOOD_LEAF_SIZE)return new e(this.values.concat(l.flatten()))},e.prototype.leafPrepend=function(l){if(this.length+l.length<=GOOD_LEAF_SIZE)return new e(l.flatten().concat(this.values))},s.length.get=function(){return this.values.length},s.depth.get=function(){return 0},Object.defineProperties(e.prototype,s),e})(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=(function(o){function e(s,a){o.call(this),this.left=s,this.right=a,this.length=s.length+a.length,this.depth=Math.max(s.depth,a.depth)+1}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(a){return a<this.left.length?this.left.get(a):this.right.get(a-this.left.length)},e.prototype.forEachInner=function(a,l,u,c){var d=this.left.length;if(l<d&&this.left.forEachInner(a,l,Math.min(u,d),c)===!1||u>d&&this.right.forEachInner(a,Math.max(l-d,0),Math.min(this.length,u)-d,c+d)===!1)return!1},e.prototype.forEachInvertedInner=function(a,l,u,c){var d=this.left.length;if(l>d&&this.right.forEachInvertedInner(a,l-d,Math.max(u,d)-d,c+d)===!1||u<d&&this.left.forEachInvertedInner(a,Math.min(l,d),u,c)===!1)return!1},e.prototype.sliceInner=function(a,l){if(a==0&&l==this.length)return this;var u=this.left.length;return l<=u?this.left.slice(a,l):a>=u?this.right.slice(a-u,l-u):this.left.slice(a,u).append(this.right.slice(0,l-u))},e.prototype.leafAppend=function(a){var l=this.right.leafAppend(a);if(l)return new e(this.left,l)},e.prototype.leafPrepend=function(a){var l=this.left.leafPrepend(a);if(l)return new e(l,this.right)},e.prototype.appendInner=function(a){return this.left.depth>=Math.max(this.right.depth,a.depth)+1?new e(this.left,new e(this.right,a)):new e(this,a)},e})(RopeSequence);const max_empty_items=500;class Branch{constructor(e,s){this.items=e,this.eventCount=s}popEvent(e,s){if(this.eventCount==0)return null;let a=this.items.length;for(;;a--)if(this.items.get(a-1).selection){--a;break}let l,u;s&&(l=this.remapping(a,this.items.length),u=l.maps.length);let c=e.tr,d,h,p=[],m=[];return this.items.forEach((g,y)=>{if(!g.step){l||(l=this.remapping(a,y+1),u=l.maps.length),u--,m.push(g);return}if(l){m.push(new Item(g.map));let A=g.step.map(l.slice(u)),T;A&&c.maybeStep(A).doc&&(T=c.mapping.maps[c.mapping.maps.length-1],p.push(new Item(T,void 0,void 0,p.length+m.length))),u--,T&&l.appendMap(T,u)}else c.maybeStep(g.step);if(g.selection)return d=l?g.selection.map(l.slice(u)):g.selection,h=new Branch(this.items.slice(0,a).append(m.reverse().concat(p)),this.eventCount-1),!1},this.items.length,0),{remaining:h,transform:c,selection:d}}addTransform(e,s,a,l){let u=[],c=this.eventCount,d=this.items,h=!l&&d.length?d.get(d.length-1):null;for(let m=0;m<e.steps.length;m++){let g=e.steps[m].invert(e.docs[m]),y=new Item(e.mapping.maps[m],g,s),A;(A=h&&h.merge(y))&&(y=A,m?u.pop():d=d.slice(0,d.length-1)),u.push(y),s&&(c++,s=void 0),l||(h=y)}let p=c-a.depth;return p>DEPTH_OVERFLOW&&(d=cutOffEvents(d,p),c-=p),new Branch(d.append(u),c)}remapping(e,s){let a=new Mapping;return this.items.forEach((l,u)=>{let c=l.mirrorOffset!=null&&u-l.mirrorOffset>=e?a.maps.length-l.mirrorOffset:void 0;a.appendMap(l.map,c)},e,s),a}addMaps(e){return this.eventCount==0?this:new Branch(this.items.append(e.map(s=>new Item(s))),this.eventCount)}rebased(e,s){if(!this.eventCount)return this;let a=[],l=Math.max(0,this.items.length-s),u=e.mapping,c=e.steps.length,d=this.eventCount;this.items.forEach(y=>{y.selection&&d--},l);let h=s;this.items.forEach(y=>{let A=u.getMirror(--h);if(A==null)return;c=Math.min(c,A);let T=u.maps[A];if(y.step){let E=e.steps[A].invert(e.docs[A]),v=y.selection&&y.selection.map(u.slice(h+1,A));v&&d++,a.push(new Item(T,E,v))}else a.push(new Item(T))},l);let p=[];for(let y=s;y<c;y++)p.push(new Item(u.maps[y]));let m=this.items.slice(0,l).append(p).append(a),g=new Branch(m,d);return g.emptyItemCount()>max_empty_items&&(g=g.compress(this.items.length-a.length)),g}emptyItemCount(){let e=0;return this.items.forEach(s=>{s.step||e++}),e}compress(e=this.items.length){let s=this.remapping(0,e),a=s.maps.length,l=[],u=0;return this.items.forEach((c,d)=>{if(d>=e)l.push(c),c.selection&&u++;else if(c.step){let h=c.step.map(s.slice(a)),p=h&&h.getMap();if(a--,p&&s.appendMap(p,a),h){let m=c.selection&&c.selection.map(s.slice(a));m&&u++;let g=new Item(p.invert(),h,m),y,A=l.length-1;(y=l.length&&l[A].merge(g))?l[A]=y:l.push(g)}}else c.map&&a--},this.items.length,0),new Branch(RopeSequence.from(l.reverse()),u)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(o,e){let s;return o.forEach((a,l)=>{if(a.selection&&e--==0)return s=l,!1}),o.slice(s)}class Item{constructor(e,s,a,l){this.map=e,this.step=s,this.selection=a,this.mirrorOffset=l}merge(e){if(this.step&&e.step&&!e.selection){let s=e.step.merge(this.step);if(s)return new Item(s.getMap().invert(),s,this.selection)}}}class HistoryState{constructor(e,s,a,l,u){this.done=e,this.undone=s,this.prevRanges=a,this.prevTime=l,this.prevComposition=u}}const DEPTH_OVERFLOW=20;function applyTransaction(o,e,s,a){let l=s.getMeta(historyKey),u;if(l)return l.historyState;s.getMeta(closeHistoryKey)&&(o=new HistoryState(o.done,o.undone,null,0,-1));let c=s.getMeta("appendedTransaction");if(s.steps.length==0)return o;if(c&&c.getMeta(historyKey))return c.getMeta(historyKey).redo?new HistoryState(o.done.addTransform(s,void 0,a,mustPreserveItems(e)),o.undone,rangesFor(s.mapping.maps),o.prevTime,o.prevComposition):new HistoryState(o.done,o.undone.addTransform(s,void 0,a,mustPreserveItems(e)),null,o.prevTime,o.prevComposition);if(s.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let d=s.getMeta("composition"),h=o.prevTime==0||!c&&o.prevComposition!=d&&(o.prevTime<(s.time||0)-a.newGroupDelay||!isAdjacentTo(s,o.prevRanges)),p=c?mapRanges(o.prevRanges,s.mapping):rangesFor(s.mapping.maps);return new HistoryState(o.done.addTransform(s,h?e.selection.getBookmark():void 0,a,mustPreserveItems(e)),Branch.empty,p,s.time,d??o.prevComposition)}else return(u=s.getMeta("rebased"))?new HistoryState(o.done.rebased(s,u),o.undone.rebased(s,u),mapRanges(o.prevRanges,s.mapping),o.prevTime,o.prevComposition):new HistoryState(o.done.addMaps(s.mapping.maps),o.undone.addMaps(s.mapping.maps),mapRanges(o.prevRanges,s.mapping),o.prevTime,o.prevComposition)}function isAdjacentTo(o,e){if(!e)return!1;if(!o.docChanged)return!0;let s=!1;return o.mapping.maps[0].forEach((a,l)=>{for(let u=0;u<e.length;u+=2)a<=e[u+1]&&l>=e[u]&&(s=!0)}),s}function rangesFor(o){let e=[];for(let s=o.length-1;s>=0&&e.length==0;s--)o[s].forEach((a,l,u,c)=>e.push(u,c));return e}function mapRanges(o,e){if(!o)return null;let s=[];for(let a=0;a<o.length;a+=2){let l=e.map(o[a],1),u=e.map(o[a+1],-1);l<=u&&s.push(l,u)}return s}function histTransaction(o,e,s){let a=mustPreserveItems(e),l=historyKey.get(e).spec.config,u=(s?o.undone:o.done).popEvent(e,a);if(!u)return null;let c=u.selection.resolve(u.transform.doc),d=(s?o.done:o.undone).addTransform(u.transform,e.selection.getBookmark(),l,a),h=new HistoryState(s?d:u.remaining,s?u.remaining:d,null,0,-1);return u.transform.setSelection(c).setMeta(historyKey,{redo:s,historyState:h})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(o){let e=o.plugins;if(cachedPreserveItemsPlugins!=e){cachedPreserveItems=!1,cachedPreserveItemsPlugins=e;for(let s=0;s<e.length;s++)if(e[s].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history$1(o={}){return o={depth:o.depth||100,newGroupDelay:o.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(e,s,a){return applyTransaction(s,a,e,o)}},config:o,props:{handleDOMEvents:{beforeinput(e,s){let a=s.inputType,l=a=="historyUndo"?undo$2:a=="historyRedo"?redo$2:null;return!l||!e.editable?!1:(s.preventDefault(),l(e.state,e.dispatch))}}}})}function buildCommand(o,e){return(s,a)=>{let l=historyKey.getState(s);if(!l||(o?l.undone:l.done).eventCount==0)return!1;if(a){let u=histTransaction(l,s,o);u&&a(e?u.scrollIntoView():u)}return!0}}const undo$2=buildCommand(!1,!0),redo$2=buildCommand(!0,!0);var HistoryAction;(function(o){o.Undo="undo",o.Redo="redo"})(HistoryAction||(HistoryAction={}));const History=(o,e)=>{o.addPlugin(()=>history$1(e==null?void 0:e.config)),o.addKeymap(()=>{const{undoKey:s,redoKey:a}=e??{},l={};return s&&(l[s]=withLogAction("undo",undo$2)),a&&(l[a]=withLogAction("redo",redo$2)),l}),o.addAction(HistoryAction.Undo,createHistoryAction(undo$2)).addAction(HistoryAction.Redo,createHistoryAction(redo$2))};function createHistoryAction(o){return()=>({isEnable:o,run:o})}class SearchQuery{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&!(this.regexp&&!validRegExp(this.search)),this.wholeWord=!!e.wholeWord,this.filter=e.filter||null,this.impl=this.valid?this.regexp?new RegExpQuery(this):new StringQuery(this):nullQuery}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}findNext(e,s=0,a=e.doc.content.size){for(;;){if(s>=a)return null;let l=this.impl.findNext(e,s,a);if(!l||this.checkResult(e,l))return l;s=l.from+1}}findPrev(e,s=e.doc.content.size,a=0){for(;;){if(s<=a)return null;let l=this.impl.findPrev(e,s,a);if(!l||this.checkResult(e,l))return l;s=l.to-1}}checkResult(e,s){return(!this.wholeWord||checkWordBoundary(e,s.from)&&checkWordBoundary(e,s.to))&&(!this.filter||this.filter(e,s))}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(s,a)=>a=="n"?`
`:a=="r"?"\r":a=="t"?"	":"\\")}getReplacements(e,s){let l=e.doc.resolve(s.from).marksAcross(e.doc.resolve(s.to)),u=[],c=Fragment.empty,d=s.from,{match:h}=s,p=h?getGroupIndices(h):[[0,s.to-s.from]],m=parseReplacement(this.unquote(this.replace)),g;for(let y of m)if(typeof y=="string")c=c.addToEnd(e.schema.text(y,l));else if(g=p[y.group]){let A=s.matchStart+g[0],T=s.matchStart+g[1];y.copy?c=c.append(e.doc.slice(A,T).content):((c!=Fragment.empty||A>d)&&(u.push({from:d,to:A,insert:new Slice(c,0,0)}),c=Fragment.empty),d=T)}return(c!=Fragment.empty||d<s.to)&&u.push({from:d,to:s.to,insert:new Slice(c,0,0)}),u}}const nullQuery=new class{findNext(){return null}findPrev(){return null}};class StringQuery{constructor(e){this.query=e;let s=e.unquote(e.search);e.caseSensitive||(s=s.toLowerCase()),this.string=s}findNext(e,s,a){return scanTextblocks(e.doc,s,a,(l,u)=>{let c=Math.max(s,u),d=textContent(l).slice(c-u,Math.min(l.content.size,a-u)),h=(this.query.caseSensitive?d:d.toLowerCase()).indexOf(this.string);return h<0?null:{from:c+h,to:c+h+this.string.length,match:null,matchStart:u}})}findPrev(e,s,a){return scanTextblocks(e.doc,s,a,(l,u)=>{let c=Math.max(u,a),d=textContent(l).slice(c-u,Math.min(l.content.size,s-u));this.query.caseSensitive||(d=d.toLowerCase());let h=d.lastIndexOf(this.string);return h<0?null:{from:c+h,to:c+h+this.string.length,match:null,matchStart:u}})}}const baseFlags="g"+(/x/.unicode==null?"":"u")+(/x/.hasIndices==null?"":"d");class RegExpQuery{constructor(e){this.query=e,this.regexp=new RegExp(e.search,baseFlags+(e.caseSensitive?"":"i"))}findNext(e,s,a){return scanTextblocks(e.doc,s,a,(l,u)=>{let c=textContent(l).slice(0,Math.min(l.content.size,a-u));this.regexp.lastIndex=s-u;let d=this.regexp.exec(c);return d?{from:u+d.index,to:u+d.index+d[0].length,match:d,matchStart:u}:null})}findPrev(e,s,a){return scanTextblocks(e.doc,s,a,(l,u)=>{let c=textContent(l).slice(0,Math.min(l.content.size,s-u)),d;for(let h=0;;){this.regexp.lastIndex=h;let p=this.regexp.exec(c);if(!p)break;d=p,h=p.index+1}return d?{from:u+d.index,to:u+d.index+d[0].length,match:d,matchStart:u}:null})}}function getGroupIndices(o){if(o.indices)return o.indices;let e=[[0,o[0].length]];for(let s=1,a=0;s<o.length;s++){let l=o[s]?o[0].indexOf(o[s],a):-1;e.push(l<0?void 0:[l,a=l+o[s].length])}return e}function parseReplacement(o){let e=[],s=-1;function a(l){let u=e.length-1;u>-1&&typeof e[u]=="string"?e[u]+=l:e.push(l)}for(;o.length;){let l=/\$([$&\d+])/.exec(o);if(!l)return a(o),e;if(l.index>0&&a(o.slice(0,l.index+(l[1]=="$"?1:0))),l[1]!="$"){let u=l[1]=="&"?0:+l[1];s>=u?e.push({group:u,copy:!0}):(s=u||1e3,e.push({group:u,copy:!1}))}o=o.slice(l.index+l[0].length)}return e}function validRegExp(o){try{return new RegExp(o,baseFlags),!0}catch{return!1}}const TextContentCache=new WeakMap;function textContent(o){let e=TextContentCache.get(o);if(e)return e;let s="";for(let a=0;a<o.childCount;a++){let l=o.child(a);l.isText?s+=l.text:l.isLeaf?s+="":s+=" "+textContent(l)+" "}return TextContentCache.set(o,s),s}function scanTextblocks(o,e,s,a,l=0){if(o.inlineContent)return a(o,l);if(!o.isLeaf)if(e>s)for(let u=o.childCount-1,c=l+o.content.size;u>=0&&c>s;u--){let d=o.child(u);if(c-=d.nodeSize,c<e){let h=scanTextblocks(d,e,s,a,c+1);if(h!=null)return h}}else for(let u=0,c=l;u<o.childCount&&c<s;u++){let d=o.child(u),h=c;if(c+=d.nodeSize,c>e){let p=scanTextblocks(d,e,s,a,h+1);if(p!=null)return p}}return null}function checkWordBoundary(o,e){let s=o.doc.resolve(e),a=s.nodeBefore,l=s.nodeAfter;return!a||!l||!a.isText||!l.isText?!0:!new RegExp("\\p{L}$","u").test(a.text)||!new RegExp("^\\p{L}","u").test(l.text)}class SearchState{constructor(e,s,a){this.query=e,this.range=s,this.deco=a}}function buildMatchDeco(o,e,s){if(!e.valid)return DecorationSet.empty;let a=[],l=o.selection;for(let u=s?s.from:0,c=s?s.to:o.doc.content.size;;){let d=e.findNext(o,u,c);if(!d)break;let h=d.from==l.from&&d.to==l.to?"ProseMirror-active-search-match":"ProseMirror-search-match";a.push(Decoration$1.inline(d.from,d.to,{class:h})),u=d.to}return DecorationSet.create(o.doc,a)}const searchKey=new PluginKey("search");function search(o={}){return new Plugin({key:searchKey,state:{init(e,s){let a=o.initialQuery||new SearchQuery({search:""}),l=o.initialRange||null;return new SearchState(a,l,buildMatchDeco(s,a,l))},apply(e,s,a,l){let u=e.getMeta(searchKey);if(u)return new SearchState(u.query,u.range,buildMatchDeco(l,u.query,u.range));if(e.docChanged||e.selectionSet){let c=s.range;if(c){let d=e.mapping.map(c.from,1),h=e.mapping.map(c.to,-1);c=d<h?{from:d,to:h}:null}s=new SearchState(s.query,c,buildMatchDeco(l,s.query,c))}return s}},props:{decorations:e=>searchKey.getState(e).deco}})}function getSearchState(o){return searchKey.getState(o)}function getMatchHighlights(o){let e=searchKey.getState(o);return e?e.deco:DecorationSet.empty}function setSearchState(o,e,s=null){return o.setMeta(searchKey,{query:e,range:s})}function nextMatch(o,e,s,a,l){let u=o.range||{from:0,to:e.doc.content.size},c=o.query.findNext(e,Math.max(l,u.from),u.to);return!c&&s&&(c=o.query.findNext(e,u.from,Math.min(a,u.to))),c}function prevMatch(o,e,s,a,l){let u=o.range||{from:0,to:e.doc.content.size},c=o.query.findPrev(e,Math.min(a,u.to),u.from);return!c&&s&&(c=o.query.findPrev(e,u.to,Math.max(l,u.from))),c}function findCommand(o,e){return(s,a)=>{let l=searchKey.getState(s);if(!l||!l.query.valid)return!1;let{from:u,to:c}=s.selection,d=e>0?nextMatch(l,s,o,u,c):prevMatch(l,s,o,u,c);if(!d)return!1;let h=TextSelection.create(s.doc,d.from,d.to);return a&&a(s.tr.setSelection(h).scrollIntoView()),!0}}const findNext$1=findCommand(!0,1),findPrev$1=findCommand(!0,-1);function replaceCommand(o,e){return(s,a)=>{let l=searchKey.getState(s);if(!l||!l.query.valid)return!1;let{from:u}=s.selection,c=nextMatch(l,s,o,u,u);if(!c)return!1;if(!a)return!0;if(s.selection.from==c.from&&s.selection.to==c.to){let d=s.tr,h=l.query.getReplacements(s,c);for(let m=h.length-1;m>=0;m--){let{from:g,to:y,insert:A}=h[m];d.replace(g,y,A)}let p=e&&nextMatch(l,s,o,c.from,c.to);p?d.setSelection(TextSelection.create(d.doc,d.mapping.map(p.from,1),d.mapping.map(p.to,-1))):d.setSelection(TextSelection.create(d.doc,c.from,d.mapping.map(c.to,1))),a(d.scrollIntoView())}else if(e)a(s.tr.setSelection(TextSelection.create(s.doc,c.from,c.to)).scrollIntoView());else return!1;return!0}}const replaceNext$1=replaceCommand(!0,!0),replaceAll$1=(o,e)=>{let s=searchKey.getState(o);if(!s)return!1;let a=[],l=s.range||{from:0,to:o.doc.content.size};for(let u=l.from;;){let c=s.query.findNext(o,u,l.to);if(!c)break;a.push(c),u=c.to}if(e){let u=o.tr;for(let c=a.length-1;c>=0;c--){let d=a[c],h=s.query.getReplacements(o,d);for(let p=h.length-1;p>=0;p--){let{from:m,to:g,insert:y}=h[p];u.replace(m,g,y)}}e(u)}return!0},SelectionTooltip$1=({show:o,poppupProps:e,...s})=>o?jsxRuntimeExports.jsx(Popup,{open:!0,...e,style:{padding:"4px 8px"},children:jsxRuntimeExports.jsx(Toolbar,{...s})}):null;class TooltipView{constructor(e,s,a,l){qe(this,Hi,!1);oe(this,"logger");oe(this,"actions");oe(this,"menuConfig");oe(this,"placement");oe(this,"view");oe(this,"baseProps",{show:!1,poppupProps:{}});oe(this,"_tooltipRenderItem",null);this.logger=a,this.actions=e,this.menuConfig=s;const{flip:u,placement:c="bottom"}=l;this.placement=u?c:[c]}get isTooltipOpen(){return pe(this,Hi)}show(e,s){this.view=e,$e(this,Hi,!0),this.baseProps={show:!0,poppupProps:{...s,...this.calcPosition(e)}},this.renderPopup()}hide(e){this.view=e,$e(this,Hi,!1),this.baseProps={show:!1,poppupProps:{}},this.renderPopup()}destroy(){var e;(e=this._tooltipRenderItem)==null||e.remove(),this._tooltipRenderItem=null}getSelectionTooltipProps(){return{...this.baseProps,qa:"g-md-toolbar-selection",focus:()=>this.view.focus(),data:this.getFilteredConfig(),editor:this.actions,onClick:e=>{globalLogger.action({mode:"wysiwyg",source:"context-menu",action:e}),this.logger.action({source:"context-menu",action:e})}}}getFilteredConfig(){return this.baseProps.show?this.menuConfig.map(e=>e.filter(s=>{const{condition:a}=s;return a==="enabled"?s.isEnable(this.actions):isFunction(a)?a(this.view.state):!0})).filter(e=>!!e.length):[]}renderPopup(){this.tooltipRenderItem.rerender()}get tooltipRenderItem(){if(!this._tooltipRenderItem){const e=getReactRendererFromState(this.view.state);this._tooltipRenderItem=e.createItem("selection_context",()=>jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:jsxRuntimeExports.jsx(SelectionTooltip$1,{...this.getSelectionTooltipProps()})}))}return this._tooltipRenderItem}calcPosition(e){const s={getBoundingClientRect(){const a=e.coordsAtPos(e.state.selection.from),l=e.coordsAtPos(e.state.selection.to),u=Math.max((a.left+l.left)/2,a.left+3),c=a.top,d=u-1,h=2,p=l.bottom-a.top;return{top:c,left:d,right:d+h,bottom:c+p,y:c,x:d,height:p,width:h}}};return{placement:this.placement,anchorElement:s}}}Hi=new WeakMap;const SelectionContext=(o,e)=>{const{config:s}=e;Array.isArray(s)&&s.length>0&&o.addPlugin(({actions:a})=>new Plugin(new SelectionTooltip(a,s,o.logger,e)))},HideMetaKey="hide-selection-menu",hideSelectionMenu=o=>o.setMeta(HideMetaKey,!0),pluginKey$2=new PluginKey("selection-context");class SelectionTooltip{constructor(e,s,a,l){oe(this,"destroyed",!1);oe(this,"tooltip");oe(this,"hideTimeoutRef",null);oe(this,"_isMousePressed",!1);this.tooltip=new TooltipView(e,s,a,l)}get key(){return pluginKey$2}get props(){return{handleKeyDown:keydownHandler({Escape:(e,s,a)=>this.tooltip.isTooltipOpen?(this.tooltip.hide(a),!0):!1}),handleDOMEvents:{mousedown:e=>{const s={doc:e.state.doc,selection:e.state.selection};this._isMousePressed=!0,this.cancelTooltipHiding(),this.tooltip.hide(e);const a=()=>{this.destroyed||(this._isMousePressed=!1,this.update(e,s))};document.addEventListener("mouseup",a,{once:!0})}}}}get state(){return{init:()=>({disabled:!1}),apply(e){return{disabled:!!e.getMeta(HideMetaKey)}}}}view(e){return this.update(e),{update:this.update.bind(this),destroy:()=>{this.destroyed=!0,this.cancelTooltipHiding(),this.tooltip.destroy()}}}update(e,s){var c;if(this._isMousePressed)return;if(this.cancelTooltipHiding(),((c=pluginKey$2.getState(e.state))==null?void 0:c.disabled)||!e.dom.parentNode){this.tooltip.hide(e);return}const{state:l}=e;if(s&&s.doc.eq(l.doc)&&s.selection.eq(l.selection))return;if(!e.hasFocus()){this.tooltip.hide(e);return}const{selection:u}=l;if(u.empty||!(u instanceof TextSelection||u instanceof AllSelection)){this.tooltip.hide(e);return}if(isCodeBlock(u.$from.parent)||isCodeBlock(u.$to.parent)||hasParentNode(d=>d.type.spec.selectionContext===!1)(u)){this.tooltip.hide(e);return}this.tooltip.show(e,{onOpenChange:(d,h,p)=>{p!=="escape-key"&&this.scheduleTooltipHiding(e)}})}scheduleTooltipHiding(e){this.hideTimeoutRef=setTimeout(()=>{e.hasFocus()||this.tooltip.hide(e)},30)}cancelTooltipHiding(){this.hideTimeoutRef!==null&&(clearTimeout(this.hideTimeoutRef),this.hideTimeoutRef=null)}}const SearchClassName={ActiveMatch:"ProseMirror-active-search-match"},pluginKey$1=new PluginKey("search-view");function wrapCommand(o,...e){return(s,a,l)=>o(s,a?function(c){for(const d of e)d(c);return a(c)}:void 0,l)}const findNext=wrapCommand(findNext$1,hideSelectionMenu),findPrev=wrapCommand(findPrev$1,hideSelectionMenu),replaceNext=wrapCommand(replaceNext$1,hideSelectionMenu),replaceAll=wrapCommand(replaceAll$1,hideSelectionMenu),openSearch=(o,e)=>{if(e){const s=getSearchState(o),a=o.doc.textBetween(o.selection.from,o.selection.to," "),l={open:!0};e(setSearchState(hideSelectionMenu(o.tr.setMeta(pluginKey$1,l)),new SearchQuery({...s?{regexp:s.query.regexp,replace:s.query.replace,literal:s.query.literal,wholeWord:s.query.wholeWord,caseSensitive:s.query.caseSensitive,filter:s.query.filter||void 0}:void 0,search:a})))}return!0},closeSearch=(o,e)=>{if(e){const s={open:!1};e(setSearchState(o.tr.setMeta(pluginKey$1,s),new SearchQuery({search:""})))}return!0},searchKeyHandler=keydownHandler({"Mod-f":openSearch,Escape:closeSearch,F3:findNext,"Shift-F3":findPrev,"Mod-g":findNext,"Shift-Mod-g":findPrev});function startTracking(o,e){const s=o.ownerDocument;let a=s.contains(o);const l=new MutationObserver(()=>{var u,c;a?s.contains(o)||(a=!1,(u=e.onDisconnect)==null||u.call(e)):s.contains(o)&&(a=!0,(c=e.onConnect)==null||c.call(e))});return l.observe(s.body,{childList:!0,subtree:!0}),()=>{l.disconnect()}}class FocusManager{constructor(e=document){qe(this,Ko);qe(this,Zo,null);$e(this,Ko,e)}storeFocus(){$e(this,Zo,pe(this,Ko).activeElement)}restoreFocus(e){var s,a;(a=(s=pe(this,Zo))==null?void 0:s.focus)==null||a.call(s,e)}}Ko=new WeakMap,Zo=new WeakMap;function getCounter(o){const s=getMatchHighlights(o).find(void 0,void 0,()=>!0),a=s.findIndex(l=>{var c,d;return((d=(c=l.type)==null?void 0:c.attrs)==null?void 0:d.class)===SearchClassName.ActiveMatch});return{total:s.length,current:a+1}}const searchViewPlugin=o=>new Plugin({key:pluginKey$1,props:{handleKeyDown:searchKeyHandler},state:{init:()=>({open:!1}),apply(e,s,a,l){const u=e.getMeta(pluginKey$1);return typeof u=="object"?u:s}},view(e){return new SeachPluginView(e,o)}});class SeachPluginView{constructor(e,s){oe(this,"_view");oe(this,"_renderer");oe(this,"_focusManager");oe(this,"_viewDomTrackerDispose");oe(this,"_counter");oe(this,"_isDomConnected");oe(this,"_viewState");oe(this,"_searchState");oe(this,"_onEditorViewDomConnected",()=>{this._isDomConnected=!0,this._renderer.rerender()});oe(this,"_onEditorViewDomDisconnected",()=>{this._isDomConnected=!1,this._onClose()});oe(this,"_onChange",e=>{const{state:s,dispatch:a}=this._view,l=new SearchQuery({search:e.search,replace:e.replace,caseSensitive:e.caseSensitive,wholeWord:e.wholeWord}),u=setSearchState(s.tr,l),{$from:c,$to:d}=u.selection,h=findParentNodeClosestToPos(c,m=>m.type.isTextblock);let p=null;h&&(p=l.findNext(s,c.pos,h.pos+h.node.nodeSize)),p||(p=l.findNext(s,(h==null?void 0:h.pos)||c.pos)),p||(p=l.findPrev(s,(h==null?void 0:h.pos)||d.pos)),p&&u.setSelection(TextSelection.create(u.doc,p.from,p.to)),a(u)});oe(this,"_onClose",()=>{closeSearch(this._view.state,this._view.dispatch),this._view.focus()});oe(this,"_onSearchPrev",()=>{this._preserveFocus(findPrev),requestAnimationFrame(()=>this._scrollToActiveIfNeeded())});oe(this,"_onSearchNext",()=>{this._preserveFocus(findNext),requestAnimationFrame(()=>this._scrollToActiveIfNeeded())});oe(this,"_onReplaceNext",()=>{this._preserveFocus(replaceNext)});oe(this,"_onReplaceAll",()=>{this._preserveFocus(replaceAll)});oe(this,"_scrollToActiveIfNeeded",()=>{const e=this._view.dom.getElementsByClassName(SearchClassName.ActiveMatch).item(0);e&&!isElementInViewport(e)&&e.scrollIntoView({block:"nearest",inline:"nearest"})});var a;this._view=e,this._viewState=pluginKey$1.getState(e.state),this._searchState=(a=getSearchState(e.state))==null?void 0:a.query,this._counter=getCounter(e.state),this._isDomConnected=e.dom.ownerDocument.contains(e.dom),this._renderer=this._createRenderer(s),this._focusManager=new FocusManager(e.dom.ownerDocument),this._viewDomTrackerDispose=startTracking(e.dom,{onConnect:this._onEditorViewDomConnected,onDisconnect:this._onEditorViewDomDisconnected})}update(){var l;const e=getCounter(this._view.state),s=pluginKey$1.getState(this._view.state),a=(l=getSearchState(this._view.state))==null?void 0:l.query;(s!==this._viewState||a!==this._searchState||e.total!==this._counter.total||e.current!==this._counter.current)&&(this._counter=e,this._viewState=s,this._searchState=a,this._renderer.rerender())}destroy(){this._renderer.remove(),this._viewDomTrackerDispose()}_createRenderer(e){return getReactRendererFromState(this._view.state).createItem("search-view",()=>{const{_viewState:s,_searchState:a,_isDomConnected:l}=this;if(!l||!(s!=null&&s.open)||!a)return null;const{dom:u}=this._view,d=(e.editorSelector&&u.closest(e.editorSelector)||u.ownerDocument).querySelector(e.anchorSelector);return renderSearchPopup({anchor:d,open:s.open,counter:this._counter,state:a,onClose:this._onClose,onChange:this._onChange,onSearchPrev:this._onSearchPrev,onSearchNext:this._onSearchNext,onReplaceNext:this._onReplaceNext,onReplaceAll:this._onReplaceAll,intersectionTracking:{container:this._view.dom,selector:`.${SearchClassName.ActiveMatch}`,observerOptions:{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}}})})}_preserveFocus(e){this._focusManager.storeFocus(),this._view.focus(),e(this._view.state,this._view.dispatch,this._view),this._focusManager.restoreFocus({preventScroll:!0})}}const Search=(o,e)=>{o.addPlugin(()=>[search(),searchViewPlugin(e)])},pluginKey=new PluginKey("shared-state"),pluginSpec={key:pluginKey,state:{init(){return{map:new Map,changedKeys:null,notifyBus:new EventEmitter}},apply(o,{map:e,notifyBus:s}){const a=o.getMeta(pluginKey);if(!a||!a.actions.length)return{changedKeys:null,map:e,notifyBus:s};const l=new Set;for(const u of a.actions){switch(u.type){case"delete":{e.delete(u.key);break}case"update":{let c=e.get(u.key);c={...c,...u.data},e.set(u.key,c);break}case"set":{e.set(u.key,u.data);break}default:continue}l.add(u.key)}return{changedKeys:l,map:e,notifyBus:s}}},view:()=>({update(o){const e=pluginKey.getState(o.state);if(!(!e||!e.changedKeys||!e.changedKeys.size))for(const s of e.changedKeys){const a=e.map.get(s);e.notifyBus.emit(s,a)}}})},SharedState=o=>{o.addPlugin(()=>new Plugin(pluginSpec))},BehaviorPreset=(o,e)=>{o.use(Selection).use(SharedState).use(Placeholder,e.placeholder??{}).use(Cursor,e.cursor??{}).use(History,e.history??{}).use(Clipboard,e.clipboard??{}).use(ReactRendererExtension,e.reactRenderer).use(WidgetDecoration),e.mobile||(o.use(SelectionContext,e.selectionContext??{}),e.commandMenu&&o.use(CommandMenu,e.commandMenu),e.search&&o.use(Search,e.search)),o.use(FilePaste),o.use(ClicksOnEdges)},EditorContext=reactExports.createContext(null);EditorContext.Provider;function useMarkdownEditorContext(){return reactExports.useContext(EditorContext)}const transformEmptyParagraph=o=>{var e,s;o.type==="paragraph"&&((e=o.content)==null?void 0:e.length)===1&&((s=o.content[0])==null?void 0:s.type)==="text"&&o.content[0].text===""&&delete o.content},getPMTransformers=({emptyRowTransformer:o})=>{const e=[];return o&&e.push(transformEmptyParagraph),e},DIRECTIVE_SYNTAX_DEFAULT="disabled";class DirectiveSyntaxContext{constructor(e){qe(this,Ui);this.option=e,$e(this,Ui,this.option)}set option(e){$e(this,Ui,e??DIRECTIVE_SYNTAX_DEFAULT)}get option(){return pe(this,Ui)}valueFor(e){let s;return typeof this.option=="object"&&(s=this.option[e]),typeof this.option=="string"&&(s=this.option),s??DIRECTIVE_SYNTAX_DEFAULT}mdPluginValueFor(e){const s=this.valueFor(e);return s==="preserve"||s==="overwrite"?"enabled":s}shouldSerializeToDirective(e,s){const a=this.valueFor(e);if(a==="overwrite"||a==="only")return!0;if(typeof s=="string"){if(s.startsWith(":"))return!0;if(s.startsWith("{"))return!1}return a==="preserve"}shouldInsertDirectiveMarkup(e){const s=this.valueFor(e);return!(s==="disabled"||s==="enabled")}}Ui=new WeakMap;const settings_wysiwyg$1="Visual Editor (wysiwyg)",settings_markup$1="Markdown markup",settings_menubar$1="Toolbar",settings_hint$1="You can disable the top menu and invoke all commands with / or the + button.",markup_placeholder$1="Add your markup here",preview_label$1="Preview",settings_label$1="Settings",en$5={"error-title":"Error in YFM editor",settings_wysiwyg:settings_wysiwyg$1,settings_markup:settings_markup$1,settings_menubar:settings_menubar$1,settings_hint:settings_hint$1,"settings_split-mode":"Split mode","split-mode-text":"Preview","settings_split-mode-hint":"Splitting the editor into two windows: preview and editing",markup_placeholder:markup_placeholder$1,preview_label:preview_label$1,settings_label:settings_label$1},settings_wysiwyg="  (wysiwyg)",settings_markup=" Markdown",settings_menubar=" ",settings_hint="        /   +",markup_placeholder="  ",preview_label="",settings_label="",ru$5={"error-title":"   YFM",settings_wysiwyg,settings_markup,settings_menubar,settings_hint,"settings_split-mode":"-","settings_split-mode-hint":"    :   ","split-mode-text":"",markup_placeholder,preview_label,settings_label},KEYSET$5="bundle",i18n$4=registerKeyset(KEYSET$5,{en:en$5,ru:ru$5}),en$4={"snippet.text":"Empty row"},ru$4={"snippet.text":" "},KEYSET$4="empty-row",i18n$3=registerKeyset(KEYSET$4,{en:en$4,ru:ru$4}),emptyRowSnippetTemplate=`&nbsp;

`,emptyRowSnippet=snippet(emptyRowSnippetTemplate),emptyRowAutocomplete={autocomplete:o=>{const e=o.matchBefore(/^.*/);return e!=null&&e.text.startsWith("&")?{from:e.from,options:[{label:"&nbsp;",displayLabel:i18n$3("snippet.text"),type:"text",apply:emptyRowSnippet}]}:null}},getAutocompleteConfig=({preserveEmptyRows:o})=>{const e=[];return o&&e.push(emptyRowAutocomplete),e.push(mdAutocomplete),e};class MarkupManager extends SafeEventEmitter{constructor(s){super();oe(this,"_markups",new Map);oe(this,"_nodes",new Map);oe(this,"_namespace");oe(this,"logger");this.logger=s,this._namespace=v4()}setMarkup(s,a){if(typeof a!="string"){this.logger.warn("[MarkupManager] rawMarkup must be a string");return}this._markups.set(s,a),this.emit("markupChanged",{id:s,rawMarkup:a}),this.logger.log(`[MarkupManager] Raw markup for ID ${s} set successfully`)}setNode(s,a){if(!a){this.logger.warn("[MarkupManager] Node must be a valid ProseMirror Node");return}this._nodes.set(s,a),this.emit("nodeChanged",{id:s,node:a}),this.logger.log(`[MarkupManager] Node for ID ${s} set successfully`)}getMarkup(s){return this._markups.get(s)??null}getNode(s){return this._nodes.get(s)??null}getNamespace(){return this._namespace}reset(){this._markups.clear(),this._nodes.clear(),this.emit("reset",{}),this.logger.log("[MarkupManager] MarkupManager has been reset")}}const YFM_TABLE_TOKEN_ATTR="data-token-id",YFM_TABLE_NODE_ATTR="data-node-id";function createDynamicModifiers(o){return[{type:"parserToken",tokenName:"yfm_table",process:(e,s,a)=>{const{map:l}=e;if(l&&a!==null){const u=a.split(`
`).slice(l[0],l[1]).join(`
`).trim(),c=v5(u,o.getNamespace());/^\s*#\|/.test(u)&&(e.attrSet(YFM_TABLE_TOKEN_ATTR,c),o.setMarkup(c,dedent(u)))}return e}},{type:"parserNodeAttrs",tokenName:"yfm_table",process:(e,s)=>({...s,[YFM_TABLE_NODE_ATTR]:e.attrGet(YFM_TABLE_TOKEN_ATTR)})},{type:"parserNode",nodeName:"yfm_table",process:e=>{const s=e.attrs[YFM_TABLE_NODE_ATTR];return s&&o.setNode(s,e),e}},{type:"serializerNode",nodeName:"yfm_table",process:(e,s,a,l,u)=>{const c=s.attrs[YFM_TABLE_NODE_ATTR],d=o.getNode(c);if(d!=null&&d.eq(s)){const h=o.getMarkup(c)||"";e.ensureNewLine(),e.text(h,!1),e.ensureNewLine(),e.closeBlock(),e.write(`
`);return}u==null||u(e,s,a,l)}},{type:"schemaNodeSpec",nodeName:"yfm_table",allowedAttrs:[YFM_TABLE_NODE_ATTR]}]}class EditorImpl extends SafeEventEmitter{constructor(s){const{logger:a}=s;super({onError:g=>{a.error(g),globalLogger.error(g)}});qe(this,Xo);qe(this,bn);qe(this,rr);qe(this,Gi);qe(this,ui);qe(this,zi);qe(this,Jo);qe(this,nn);qe(this,an);qe(this,yn);qe(this,Vi);qe(this,vr);qe(this,es,[]);qe(this,Wi);qe(this,ts);qe(this,_r);qe(this,ns);qe(this,Yi);qe(this,rs);qe(this,ss);qe(this,as);qe(this,ls);qe(this,us);qe(this,ci);qe(this,cs);qe(this,ds);oe(this,"getValue",()=>this.currentEditor.getValue());const{md:l={},initial:u={},handlers:c={},experimental:d={},markupConfig:h={},wysiwygConfig:p={},mobile:m=!1}=s;$e(this,Xo,a),$e(this,ts,d.preserveMarkupFormatting?createDynamicModifiers(new MarkupManager(this.logger.nested({module:"markup-manager"}))):void 0),$e(this,rr,u.mode??"wysiwyg"),$e(this,Gi,u.toolbarVisible??!0),$e(this,zi,(h.renderPreview&&h.splitMode)??!1),$e(this,ui,(pe(this,zi)&&u.splitModeEnabled)??!1),$e(this,Jo,h.renderPreview),$e(this,bn,u.markup??""),$e(this,_r,s.preset??"full"),$e(this,es,s.pmTransformers),$e(this,vr,l),$e(this,ns,p.extensions),$e(this,yn,{...s.markupConfig}),$e(this,Yi,s.renderStorage),$e(this,rs,c.uploadFile),$e(this,ss,h.parseInsertedUrlAsImage),$e(this,as,!!d.needToSetDimensionsForUploadedImages),$e(this,us,s.directiveSyntax),$e(this,ls,!!d.enableNewImageSizeCalculation),$e(this,Wi,d.preserveEmptyRows||!1),$e(this,ci,d.prepareRawMarkup),$e(this,Vi,p.escapeConfig),$e(this,cs,d.beforeEditorModeChange),$e(this,ds,m)}get _wysiwygView(){var s;return(s=pe(this,nn))==null?void 0:s.view}get logger(){return pe(this,Xo)}get currentMode(){return pe(this,rr)}set currentMode(s){var a,l;switch(s){case"markup":{if($e(this,rr,s),pe(this,nn)){const u=(a=pe(this,an))==null?void 0:a.getValue(),c=pe(this,nn).getValue();!u||this.shouldReplaceMarkupEditorValue(u,c)?$e(this,bn,c):$e(this,bn,u)}pe(this,an)&&pe(this,an).replace(pe(this,bn));break}case"wysiwyg":{if($e(this,rr,s),pe(this,an)){const u=pe(this,an).getValue();$e(this,bn,((l=pe(this,ci))==null?void 0:l.call(this,u))??u)}else pe(this,ci)&&$e(this,bn,pe(this,ci).call(this,pe(this,bn)));pe(this,nn)&&pe(this,nn).replace(pe(this,bn));break}default:throw new Error("Unknown editor mode: "+s)}setTimeout(()=>{this.currentEditor.focus()},30)}get toolbarVisible(){return pe(this,Gi)}get splitModeEnabled(){return pe(this,ui)}get splitMode(){return pe(this,zi)}get preset(){return pe(this,_r)}get mdOptions(){return pe(this,vr)}get directiveSyntax(){return pe(this,us)}get renderPreview(){return pe(this,Jo)}get currentEditor(){const s=this.currentMode;switch(s){case"markup":return this.markupEditor;case"wysiwyg":return this.wysiwygEditor;default:throw new Error("Unknown editor mode: "+s)}}get wysiwygEditor(){if(!pe(this,nn)){const s=pe(this,_r)==="zero"||pe(this,_r)==="commonmark"?pe(this,_r):"default";$e(this,nn,new WysiwygEditor({mdPreset:s,logger:this.logger.nested({mode:"wysiwyg"}),initialContent:pe(this,bn),extensions:pe(this,ns),pmTransformers:pe(this,es),modifiers:pe(this,ts),allowHTML:pe(this,vr).html,linkify:pe(this,vr).linkify,linkifyTlds:pe(this,vr).linkifyTlds,escapeConfig:pe(this,Vi),onChange:()=>this.emit("rerender-toolbar",null),onDocChange:()=>this.emit("change",null)}))}return pe(this,nn)}get markupEditor(){var s;return pe(this,an)||$e(this,an,new Editor(createCodemirror({doc:pe(this,bn),logger:this.logger.nested({mode:"markup"}),placeholder:pe(this,yn).placeholder??i18n$4("markup_placeholder"),onCancel:()=>this.emit("cancel",null),onSubmit:()=>this.emit("submit",null),onChange:()=>this.emit("rerender-toolbar",null),onDocChange:()=>this.emit("change",null),onScroll:a=>this.emit("cm-scroll",{event:a}),reactRenderer:pe(this,Yi),uploadHandler:this.fileUploadHandler,parseInsertedUrlAsImage:this.parseInsertedUrlAsImage,needImageDimensions:this.needToSetDimensionsForUploadedImages,parseHtmlOnPaste:pe(this,yn).parseHtmlOnPaste,enableNewImageSizeCalculation:this.enableNewImageSizeCalculation,extensions:pe(this,yn).extensions,disabledExtensions:pe(this,yn).disabledExtensions,keymaps:pe(this,yn).keymaps,preserveEmptyRows:pe(this,Wi),yfmLangOptions:{languageData:getAutocompleteConfig({preserveEmptyRows:pe(this,Wi)}).concat(((s=pe(this,yn))==null?void 0:s.languageData)||[])},autocompletion:pe(this,yn).autocompletion,tooltips:pe(this,yn).tooltips,directiveSyntax:this.directiveSyntax,receiver:this,searchPanel:pe(this,yn).searchPanel}))),pe(this,an)}get renderStorage(){return pe(this,Yi)}get fileUploadHandler(){return pe(this,rs)}get parseInsertedUrlAsImage(){return pe(this,ss)}get needToSetDimensionsForUploadedImages(){return pe(this,as)}get enableNewImageSizeCalculation(){return pe(this,ls)}get mobile(){return pe(this,ds)}get cm(){return this.markupEditor.cm}get actions(){return this.wysiwygEditor.actions}action(s){return this.wysiwygEditor.action(s)}destroy(){var s,a;(s=pe(this,nn))==null||s.destroy(),(a=pe(this,an))==null||a.codemirror.destroy(),$e(this,an,void 0),$e(this,an,void 0),$e(this,nn,void 0)}setEditorMode(s,a){this.changeEditorMode({mode:s,reason:"manually",emit:a==null?void 0:a.emit})}changeEditorMode({emit:s=!0,...a}){var l;pe(this,rr)!==a.mode&&((l=pe(this,cs))==null?void 0:l.call(this,{mode:a.mode,reason:a.reason}))!==!1&&(this.logger.event({event:"mode-change",prevMode:pe(this,rr),nextMode:a.mode,reason:a.reason}),this.currentMode=a.mode,this.emit("rerender",null),s&&this.emit("change-editor-mode",a))}changeToolbarVisibility(s){$e(this,Gi,s.visible),this.emit("rerender",null),this.emit("change-toolbar-visibility",s)}changeSplitModeEnabled(s){pe(this,ui)!==s.splitModeEnabled&&($e(this,ui,s.splitModeEnabled),this.emit("rerender",null),this.emit("change-split-mode-enabled",s))}focus(){return this.currentEditor.focus()}hasFocus(){return this.currentEditor.hasFocus()}isEmpty(){return this.currentEditor.isEmpty()}clear(){return this.currentEditor.clear()}replace(s){return this.currentEditor.replace(s)}prepend(s){return this.currentEditor.prepend(s)}append(s){return this.currentEditor.append(s)}moveCursor(s){return typeof s=="object"?this.moveCursorToLine(s.line):this.currentEditor.moveCursor(s)}moveCursorToLine(s){const a=this.currentMode;switch(a){case"markup":{this.markupMoveToLine(s);break}case"wysiwyg":{this.wysiwygMoveToLine(s);break}default:throw new Error("Unknown editor mode: "+a)}}markupMoveToLine(s){const a=this.markupEditor.cm,l=!!a.dom.parentElement;let u=s+1;u=Math.max(u,1),u=Math.min(u,a.state.doc.lines);const c=a.state.doc.line(u).from;a.dispatch({scrollIntoView:!0,selection:{anchor:c},effects:l?[EditorView.scrollIntoView(c,{y:"start",x:"start",yMargin:getTopOffset(a.dom)})]:void 0})}wysiwygMoveToLine(s){const a="data-line",l=`[${a}="${s}"]`,u=this._wysiwygView,c=!!u.dom.parentElement,d=g=>{const{tr:y}=u.state;u.dispatch(y.setSelection(TextSelection.near(y.doc.resolve(g),1)))},h=g=>{const y=getTopOffset(this.wysiwygEditor.dom);window.scrollTo({top:g+window.scrollY-y})},p=this.wysiwygEditor.dom.querySelector(l);if(p){const g=this._wysiwygView.posAtDOM(p,0);if(d(g),c){const y=p.getBoundingClientRect().top;h(y)}return}const m=getDescedantByAttribute(u.state.doc,a,[s,String(s)]);if(m&&(d(m.pos),c)){const g=u.coordsAtPos(m.pos).top;h(g)}}shouldReplaceMarkupEditorValue(s,a){var u;const l=(u=pe(this,nn))==null?void 0:u.serializer.serialize(pe(this,nn).parser.parse(s),pe(this,Vi));return(l==null?void 0:l.trim())!==a.trim()}}Xo=new WeakMap,bn=new WeakMap,rr=new WeakMap,Gi=new WeakMap,ui=new WeakMap,zi=new WeakMap,Jo=new WeakMap,nn=new WeakMap,an=new WeakMap,yn=new WeakMap,Vi=new WeakMap,vr=new WeakMap,es=new WeakMap,Wi=new WeakMap,ts=new WeakMap,_r=new WeakMap,ns=new WeakMap,Yi=new WeakMap,rs=new WeakMap,ss=new WeakMap,as=new WeakMap,ls=new WeakMap,us=new WeakMap,ci=new WeakMap,cs=new WeakMap,ds=new WeakMap;function getTopOffset(o){const u=window.getComputedStyle(o).getPropertyValue("--g-md-toolbar-sticky-offset");return calculateCSSNumberValue(u)+8+36+8}function calculateCSSNumberValue(o){const e=document.createElement("div");e.style.position="absolute",e.style.top="-99999px",e.style.left="-99999px",e.style.width=`calc(${o})`,document.body.appendChild(e);const s=e.getBoundingClientRect().width;return e.remove(),s}const VERSION="15.34.4",EditorModeKeymap=(o,e)=>{var s;if(o.addKeymap(()=>{const a={},{onCancel:l,onSubmit:u}=e,c=o.logger.nested({source:"keymap"});return l&&(a[formatter.toPM(Action.Cancel)]=()=>{const d=l();return c.event({event:"cancel",result:d}),d}),u&&(a[formatter.toPM(Action.Submit)]=()=>{const d=u();return c.event({event:"submit",result:d}),d}),a[formatter.toPM(Action.__debug)]=()=>(debug(),!0),a}),(s=e.ignoreKeysList)!=null&&s.length){const a=()=>!0,l={};for(const u of e.ignoreKeysList)l[u]=a;o.addKeymap(()=>l,o.Priority.Lowest)}};function debug(){const o=["YFM-Editor Debug info",`Version: ${VERSION}`].join(`
`);console.info(o)}const ZeroPreset=(o,e)=>{o.use(BaseSchema,e.baseSchema??{}).use(BaseKeymap).use(BaseInputRules).use(BaseStyles,e.baseStyles??{})},CommonMarkPreset=(o,e)=>{o.use(ZeroPreset,e),o.use(Html).use(HorizontalRule).use(Code,e.code??{}).use(Bold,e.bold??{}).use(Link,e.link??{}).use(Lists,e.lists??{}).use(Italic,e.italic??{}).use(Breaks,e.breaks??{}).use(CodeBlock,e.codeBlock??{}).use(Blockquote,e.blockquote??{}),e.image!==!1&&(isFunction(e.image)?o.use(e.image):o.use(Image$1,e.image??{})),e.heading!==!1&&(isFunction(e.heading)?o.use(e.heading):o.use(Heading,e.heading??{}))},DefaultPreset=(o,e)=>{o.use(CommonMarkPreset,e),o.use(Strike,e.strike??{}),o.use(Table$1)},YfmPreset=(o,e)=>{o.use(DefaultPreset,{...e,image:!1,heading:!1}),o.use(Deflist,e.deflist??{}).use(Subscript$1).use(Superscript$1).use(Underline,e.underline??{}).use(Checkbox,e.checkbox??{}).use(ImgSize,e.imgSize??{}).use(Monospace).use(Video,e.video??{}).use(YfmConfigs,e.yfmConfigs??{}).use(YfmCut,e.yfmCut??{}).use(YfmNote,e.yfmNote??{}).use(YfmFile,e.yfmFile??{}).use(YfmHeading,e.yfmHeading??{}).use(YfmTable,e.yfmTable??{}).use(YfmTabs)},FullPreset=(o,e)=>{o.use(YfmPreset,e),o.use(Mark).use(Color),e.emoji&&o.use(Emoji$1,e.emoji)},math_hint$1="Math uses",math_hint_katex$1="Katex syntax",en$3={math_hint:math_hint$1,math_hint_katex:math_hint_katex$1},math_hint="   ",math_hint_katex=" Katex",ru$3={math_hint,math_hint_katex},KEYSET$3="hints";registerKeyset(KEYSET$3,{en:en$3,ru:ru$3});const bold$1="Bold",checkbox$1="Checkbox",code$1="Code",code_inline$1="Inline code",codeblock$1="Code block",colorify$1="Text color",colorify__color_blue$1="Blue",colorify__color_default$1="Default",colorify__color_gray$1="Gray",colorify__color_green$1="Green",colorify__color_orange$1="Orange",colorify__color_red$1="Red",colorify__color_violet$1="Violet",colorify__color_yellow$1="Yellow",colorify__group_text$1="Text",cut$1="Cut",emoji$1="Emoji",emoji__hint$1="Emojis can be added in WYSIWYG or manually with markup",file$1="File",gpt$1="GPT widget",heading$3="Heading",heading1$1="Heading 1",heading2$1="Heading 2",heading3$1="Heading 3",heading4$1="Heading 4",heading5$1="Heading 5",heading6$1="Heading 6",hrule$1="Separator",html$1="HTML",image$1="Image",italic$1="Italic",link$1="Link",list$1="List",list__action_lift$1="Lift item",list__action_sink$1="Sink item",list_action_disabled$1="Contradicts the logic of the list",mark$1="Marked",math$1="Math",math_block$1="Math block",math_inline$1="Inline math",mermaid$1="Mermaid",mono$1="Monospace",more_action$1="More action",move_list$1="Move list item",note$1="Note",olist$1="Ordered list",quote$1="Quote",quotelink$1="Quote link",redo$1="Redo",strike$1="Strikethrough",table$1="Table",tabs$1="Tabs",text$3="Text",ulist$1="Bullet list",underline$1="Underline",undo$1="Undo",en$2={bold:bold$1,checkbox:checkbox$1,code:code$1,code_inline:code_inline$1,codeblock:codeblock$1,colorify:colorify$1,colorify__color_blue:colorify__color_blue$1,colorify__color_default:colorify__color_default$1,colorify__color_gray:colorify__color_gray$1,colorify__color_green:colorify__color_green$1,colorify__color_orange:colorify__color_orange$1,colorify__color_red:colorify__color_red$1,colorify__color_violet:colorify__color_violet$1,colorify__color_yellow:colorify__color_yellow$1,colorify__group_text:colorify__group_text$1,cut:cut$1,emoji:emoji$1,emoji__hint:emoji__hint$1,file:file$1,"folding-heading":"Collapsed section","folding-heading__hint":"The text under the heading can be collapsed or expanded",gpt:gpt$1,heading:heading$3,heading1:heading1$1,heading2:heading2$1,heading3:heading3$1,heading4:heading4$1,heading5:heading5$1,heading6:heading6$1,hrule:hrule$1,html:html$1,image:image$1,italic:italic$1,link:link$1,list:list$1,list__action_lift:list__action_lift$1,list__action_sink:list__action_sink$1,list_action_disabled:list_action_disabled$1,mark:mark$1,math:math$1,math_block:math_block$1,math_inline:math_inline$1,mermaid:mermaid$1,mono:mono$1,more_action:more_action$1,move_list:move_list$1,note:note$1,olist:olist$1,quote:quote$1,quotelink:quotelink$1,redo:redo$1,strike:strike$1,table:table$1,tabs:tabs$1,text:text$3,ulist:ulist$1,underline:underline$1,undo:undo$1},bold="",checkbox=" ",code="",code_inline="  ",codeblock=" ",colorify=" ",colorify__color_blue="",colorify__color_default="",colorify__color_gray="",colorify__color_green="",colorify__color_orange="",colorify__color_red="",colorify__color_violet="",colorify__color_yellow="",colorify__group_text="",cut="",emoji="",emoji__hint="    WYSIWYG      ",file="",gpt="GPT-",heading$2="",heading1=" 1",heading2=" 2",heading3=" 3",heading4=" 4",heading5=" 5",heading6=" 6",hrule="",html="HTML",image="",italic="",link="",list="",list__action_lift=" ",list__action_sink=" ",list_action_disabled="  ",mark="",math="",math_block="  ",math_inline="  ",mermaid="Mermaid",mono="",more_action=" ",move_list="  ",note="",olist=" ",quote="",quotelink="-",redo="",strike="",table="",tabs="",text$2="",ulist=" ",underline="",undo="",ru$2={bold,checkbox,code,code_inline,codeblock,colorify,colorify__color_blue,colorify__color_default,colorify__color_gray,colorify__color_green,colorify__color_orange,colorify__color_red,colorify__color_violet,colorify__color_yellow,colorify__group_text,cut,emoji,emoji__hint,file,"folding-heading":" ","folding-heading__hint":"      ",gpt,heading:heading$2,heading1,heading2,heading3,heading4,heading5,heading6,hrule,html,image,italic,link,list,list__action_lift,list__action_sink,list_action_disabled,mark,math,math_block,math_inline,mermaid,mono,more_action,move_list,note,olist,quote,quotelink,redo,strike,table,tabs,text:text$2,ulist,underline,undo},KEYSET$2="menubar",i18n$2=registerKeyset(KEYSET$2,{en:en$2,ru:ru$2}),b$b=cn("toolbar-button-with-popup-menu"),ToolbarButtonWithPopupMenu=({disablePortal:o,className:e,focus:s,onClick:a,icon:l,iconClassName:u,chevronIconClassName:c,title:d,menuItems:h,_selectionType:p,qa:m,qaMenu:g,...y})=>{const[A,T]=useElementState(),[E,,v,_]=useBooleanState(!1),w=useTargetZIndex(LAYOUT.STICKY_TOOLBAR),R=reactExports.useMemo(()=>groupBy(h.map(F=>({...F,group:F.group||""})),"group"),[h]),k=h.some(F=>!F.ignoreActive&&F.action.isActive()===!0),I=h.every(F=>F.action.isEnable()===!1),P=I?!1:E,N=E&&!P;reactExports.useEffect(()=>{N&&v()},[v,N]);const[L,Q]=p==="light"?[P?"normal":k?"flat-action":"flat",P&&k]:[k||P?"normal":"flat",k],j=isFunction(d)?d():d;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ActionTooltip,{disabled:P,openDelay:ToolbarTooltipDelay.Open,closeDelay:ToolbarTooltipDelay.Close,title:j,children:jsxRuntimeExports.jsxs(Button,{size:"m",ref:T,view:L,selected:Q,disabled:I,className:b$b(null,[e]),onClick:_,"aria-label":j,qa:m,...y,children:[jsxRuntimeExports.jsx(Icon,{data:l.data,size:l.size,className:u}),"",jsxRuntimeExports.jsx(Icon,{data:ChevronDown,className:c})]})}),jsxRuntimeExports.jsx(Popup,{open:P,disablePortal:o,anchorElement:A,onOpenChange:F=>{F||v()},zIndex:typeof w=="number"?w:void 0,children:jsxRuntimeExports.jsx(Menu,{size:"l",qa:g,"data-toolbar-menu-for":j,children:Object.entries(R).map(([F,V],J)=>jsxRuntimeExports.jsx(Menu.Group,{label:F,className:b$b("menu-group"),children:V.map(({id:z,icon:Y,iconSize:fe=16,action:de,text:X,iconClassname:he})=>jsxRuntimeExports.jsx(Menu.Item,{iconStart:jsxRuntimeExports.jsx(Icon,{data:Y,size:fe,className:he}),active:de.isActive(),disabled:!de.isEnable(),onClick:()=>{v(),s(),de.run(),a==null||a(z)},extraProps:{"aria-label":X},children:X},z))},J))})})]})},b$a=cn("toolbar-colors"),textColorIcon=icons.textColor,ToolbarColors=o=>{const{exec:e,onClick:s,enable:a,currentColor:l,withDefault:u}=o,c=l===void 0,d=p=>()=>{c&&p===""||e(p),s==null||s("colorify",{color:p===""?"default":p})},h=[Colors.Gray,Colors.Yellow,Colors.Orange,Colors.Red,Colors.Green,Colors.Blue,Colors.Violet].map(p=>({id:p,icon:textColorIcon.data,iconSize:textColorIcon.size??16,text:i18n$2(`colorify__color_${p}`),iconClassname:b$a("item-icon",{color:p}),action:{run:d(p),isEnable:()=>!!a,isActive:()=>p===l,meta(){}},group:i18n$2("colorify__group_text")}));return u&&h.unshift({id:"default",icon:textColorIcon.data,iconSize:textColorIcon.size??16,text:i18n$2("colorify__color_default"),iconClassname:b$a("item-icon",{color:"default"}),group:i18n$2("colorify__group_text"),ignoreActive:!0,action:{run:d(""),isEnable:()=>!!a,isActive:()=>c,meta(){}}}),jsxRuntimeExports.jsx(ToolbarButtonWithPopupMenu,{qa:o.qa,focus:o.focus,onClick:o.onClick,className:o.className,qaMenu:"g-md-toolbar-menu",title:i18n$2("colorify"),menuItems:h,icon:textColorIcon,_selectionType:"light",iconClassName:b$a("menu-icon",{color:l}),chevronIconClassName:b$a("chevron-icon",{color:l}),"data-selected-color":l??"default"})},WToolbarColors=({disablePortal:o,className:e,editor:s,focus:a,onClick:l})=>{const u=s.actions.colorify,c=u.meta();return jsxRuntimeExports.jsx(ToolbarColors,{active:u.isActive(),enable:u.isEnable(),currentColor:c,exec:d=>{u.run({color:d===c?"":d})},disablePortal:o,className:e,focus:a,onClick:l,withDefault:!0})},text$1=`This is a text without a title. 
Both the title and the text 
below it can be highlighted in bold, italics, color, 
strikethrough, and underline. You can also add lists, 
tables, links, formulas, anchors, 
and code blocks.`,heading$1="Text",en$1={text:text$1,"text-with-head":`This is the text with the title. 
Both the title and the text 
below it can be highlighted in bold, italics, color, 
strikethrough, and underline. You can also add lists, 
tables, links, formulas, anchors, 
and code blocks.`,heading:heading$1},text=`   .  ,  
     
, , , 
  .    
 , , , 
,    `,heading=" ",ru$1={text,"text-with-head":`   .  ,  
     
, , , 
  .    
 , , , 
,    .`,heading},KEYSET$1="action-previews",i18n$1=registerKeyset(KEYSET$1,{en:en$1,ru:ru$1}),b$9=cn("action-preview"),ActionPreview=({children:o})=>jsxRuntimeExports.jsx("div",{className:b$9(null,["yfm"]),children:o}),b$8=cn("action-preview"),HeadingPreview=({level:o})=>{const e=`h${o}`;return jsxRuntimeExports.jsxs(ActionPreview,{children:[jsxRuntimeExports.jsx(e,{children:i18n$1("heading")}),jsxRuntimeExports.jsx("p",{className:b$8("text-with-head"),children:i18n$1("text-with-head")})]})},b$7=cn("action-preview"),TextPreview=()=>jsxRuntimeExports.jsx(ActionPreview,{children:jsxRuntimeExports.jsx("p",{className:b$7("text"),children:i18n$1("text")})}),wTextItemData={id:ActionName.paragraph,title:i18n$2.bind(null,"text"),icon:icons.text,hotkey:formatter.toView(Action.Text),exec:o=>o.actions.toParagraph.run(),isActive:o=>o.actions.toParagraph.isActive(),isEnable:o=>o.actions.toParagraph.isEnable(),doNotActivateList:!0,preview:jsxRuntimeExports.jsx(TextPreview,{})},wHeading1ItemData={id:ActionName.heading1,title:i18n$2.bind(null,"heading1"),icon:icons.h1,hotkey:formatter.toView(Action.Heading1),exec:o=>o.actions.toH1.run(),isActive:o=>o.actions.toH1.isActive(),isEnable:o=>o.actions.toH1.isEnable(),aliases:["h1"],preview:jsxRuntimeExports.jsx(HeadingPreview,{level:1})},wHeading2ItemData={id:ActionName.heading2,title:i18n$2.bind(null,"heading2"),icon:icons.h2,hotkey:formatter.toView(Action.Heading2),exec:o=>o.actions.toH2.run(),isActive:o=>o.actions.toH2.isActive(),isEnable:o=>o.actions.toH2.isEnable(),aliases:["h2"],preview:jsxRuntimeExports.jsx(HeadingPreview,{level:2})},wHeading3ItemData={id:ActionName.heading3,title:i18n$2.bind(null,"heading3"),icon:icons.h3,hotkey:formatter.toView(Action.Heading3),exec:o=>o.actions.toH3.run(),isActive:o=>o.actions.toH3.isActive(),isEnable:o=>o.actions.toH3.isEnable(),aliases:["h3"],preview:jsxRuntimeExports.jsx(HeadingPreview,{level:3})},wHeading4ItemData={id:ActionName.heading4,title:i18n$2.bind(null,"heading4"),icon:icons.h4,hotkey:formatter.toView(Action.Heading4),exec:o=>o.actions.toH4.run(),isActive:o=>o.actions.toH4.isActive(),isEnable:o=>o.actions.toH4.isEnable(),aliases:["h4"],preview:jsxRuntimeExports.jsx(HeadingPreview,{level:4})},wHeading5ItemData={id:ActionName.heading5,title:i18n$2.bind(null,"heading5"),icon:icons.h5,hotkey:formatter.toView(Action.Heading5),exec:o=>o.actions.toH5.run(),isActive:o=>o.actions.toH5.isActive(),isEnable:o=>o.actions.toH5.isEnable(),aliases:["h5"],preview:jsxRuntimeExports.jsx(HeadingPreview,{level:5})},wHeading6ItemData={id:ActionName.heading6,title:i18n$2.bind(null,"heading6"),icon:icons.h6,hotkey:formatter.toView(Action.Heading6),exec:o=>o.actions.toH6.run(),isActive:o=>o.actions.toH6.isActive(),isEnable:o=>o.actions.toH6.isEnable(),aliases:["h6"],preview:jsxRuntimeExports.jsx(HeadingPreview,{level:6})},wHeadingListConfig={title:i18n$2.bind(null,"heading"),data:[wTextItemData,wHeading1ItemData,wHeading2ItemData,wHeading3ItemData,wHeading4ItemData,wHeading5ItemData,wHeading6ItemData]},b$6=cn("toolbar-select"),ToolbarSelect=({disablePortal:o,className:e,editor:s,focus:a,onClick:l,items:u,qa:c})=>{const d=u.find(h=>h.isActive(s));return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Select,{qa:c,size:"m",view:"clear",className:e,disablePortal:o,onOpenChange:a,value:d?[d.id]:void 0,options:u.map(h=>({data:h,value:h.id,text:isFunction(h.title)?h.title():h.title})),renderOption:({text:h,data:p})=>{const{icon:m,hotkey:g,hint:y,preview:A}=p,T=isFunction(y)?y():y;return jsxRuntimeExports.jsx(PreviewTooltip,{preview:A,children:jsxRuntimeExports.jsxs("div",{"aria-label":h,className:b$6("item"),children:[jsxRuntimeExports.jsx("div",{className:b$6("item-icon"),children:jsxRuntimeExports.jsx(Icon,{data:m.data,size:Number(m.size??16)+2})}),jsxRuntimeExports.jsxs("div",{className:b$6("item-content"),children:[h,jsxRuntimeExports.jsxs("div",{className:b$6("item-extra"),children:[g&&jsxRuntimeExports.jsx(Hotkey,{value:g}),T&&jsxRuntimeExports.jsx(HelpMark,{popoverProps:{modal:!1},className:b$6("item-hint"),children:T})]})]})]})})},onUpdate:([h])=>{var p;(p=u.find(m=>m.id===h))==null||p.exec(s),l==null||l(h),a()}})})},WToolbarTextSelect=({focus:o,onClick:e,editor:s,className:a,disablePortal:l})=>jsxRuntimeExports.jsx(ToolbarSelect,{qa:"g-md-toolbar-text-select",items:wHeadingListConfig.data,focus:o,editor:s,onClick:e,className:a,disablePortal:l}),wUndoItemData={id:ActionName.undo,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"undo"),icon:icons.undo,hotkey:formatter.toView(Action.Undo),hintWhenDisabled:!1,exec:o=>o.actions.undo.run(),isActive:o=>o.actions.undo.isActive(),isEnable:o=>o.actions.undo.isEnable()},wRedoItemData={id:ActionName.redo,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"redo"),icon:icons.redo,hotkey:formatter.toView(Action.Redo),hintWhenDisabled:!1,exec:o=>o.actions.redo.run(),isActive:o=>o.actions.redo.isActive(),isEnable:o=>o.actions.redo.isEnable()},wBoldItemData={id:ActionName.bold,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"bold"),icon:icons.bold,hotkey:formatter.toView(Action.Bold),exec:o=>o.actions.bold.run(),isActive:o=>o.actions.bold.isActive(),isEnable:o=>o.actions.bold.isEnable()},wItalicItemData={id:ActionName.italic,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"italic"),icon:icons.italic,hotkey:formatter.toView(Action.Italic),exec:o=>o.actions.italic.run(),isActive:o=>o.actions.italic.isActive(),isEnable:o=>o.actions.italic.isEnable()},wUnderlineItemData={id:ActionName.underline,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"underline"),icon:icons.underline,hotkey:formatter.toView(Action.Underline),exec:o=>o.actions.underline.run(),isActive:o=>o.actions.underline.isActive(),isEnable:o=>o.actions.underline.isEnable()},wStrikethroughItemData={id:ActionName.strike,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"strike"),icon:icons.strikethrough,hotkey:formatter.toView(Action.Strike),exec:o=>o.actions.strike.run(),isActive:o=>o.actions.strike.isActive(),isEnable:o=>o.actions.strike.isEnable()},wMonospaceItemData={id:ActionName.mono,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"mono"),icon:icons.mono,exec:o=>o.actions.mono.run(),isActive:o=>o.actions.mono.isActive(),isEnable:o=>o.actions.mono.isEnable()},wMarkedItemData={id:ActionName.mark,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"mark"),icon:icons.mark,exec:o=>o.actions.mark.run(),isActive:o=>o.actions.mark.isActive(),isEnable:o=>o.actions.mark.isEnable()},wCheckboxItemData={id:ActionName.checkbox,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"checkbox"),icon:icons.checklist,exec:o=>o.actions.addCheckbox.run(),isActive:o=>o.actions.addCheckbox.isActive(),isEnable:o=>o.actions.addCheckbox.isEnable()},wLinkItemData={id:ActionName.link,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"link"),icon:icons.link,hotkey:formatter.toView(Action.Link),exec:o=>o.actions.addLink.run(),isActive:o=>o.actions.addLink.isActive(),isEnable:o=>o.actions.addLink.isEnable()},wQuoteItemData={id:ActionName.quote,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"quote"),icon:icons.quote,hotkey:formatter.toView(Action.Quote),exec:o=>o.actions.quote.run(),isActive:o=>o.actions.quote.isActive(),isEnable:o=>o.actions.quote.isEnable()},wCutItemData={id:ActionName.yfm_cut,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"cut"),icon:icons.cut,hotkey:formatter.toView(Action.Cut),exec:o=>o.actions.toYfmCut.run(),isActive:o=>o.actions.toYfmCut.isActive(),isEnable:o=>o.actions.toYfmCut.isEnable()},wNoteItemData={id:ActionName.yfm_note,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"note"),icon:icons.note,hotkey:formatter.toView(Action.Note),exec:o=>o.actions.toYfmNote.run(),isActive:o=>o.actions.toYfmNote.isActive(),isEnable:o=>o.actions.toYfmNote.isEnable()},wTableItemData={id:ActionName.table,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"table"),icon:icons.table,exec:o=>o.actions.createYfmTable.run(),isActive:o=>o.actions.createYfmTable.isActive(),isEnable:o=>o.actions.createYfmTable.isEnable()},wCodeItemData={id:ActionName.code_inline,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"code_inline"),icon:icons.code,hotkey:formatter.toView(Action.Code),exec:o=>o.actions.code.run(),isActive:o=>o.actions.code.isActive(),isEnable:o=>o.actions.code.isEnable()},wImageItemData={id:ActionName.image,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"image"),icon:icons.image,exec:o=>o.actions.addImageWidget.run(),isActive:o=>o.actions.addImageWidget.isActive(),isEnable:o=>o.actions.addImageWidget.isEnable()},wFileItemData={id:ActionName.file,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"file"),icon:icons.file,exec:o=>o.actions.addFile.run(),isActive:o=>o.actions.addFile.isActive(),isEnable:o=>o.actions.addFile.isEnable()},wTabsItemData={id:ActionName.tabs,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"tabs"),icon:icons.tabs,exec:o=>o.actions.toYfmTabs.run(),isActive:o=>o.actions.toYfmTabs.isActive(),isEnable:o=>o.actions.toYfmTabs.isEnable()};ActionName.math_inline,ToolbarDataType.SingleButton,i18n$2.bind(null,"math_inline"),ActionName.math_block,ToolbarDataType.SingleButton,i18n$2.bind(null,"math_block"),ActionName.yfm_html_block,ToolbarDataType.SingleButton,i18n$2.bind(null,"html"),ActionName.mermaid,ToolbarDataType.SingleButton,i18n$2.bind(null,"mermaid");const wCodeBlockItemData={id:ActionName.code_block,title:i18n$2.bind(null,"codeblock"),icon:icons.codeBlock,hotkey:formatter.toView(Action.CodeBlock),exec:o=>o.actions.toCodeBlock.run(),isActive:o=>o.actions.toCodeBlock.isActive(),isEnable:o=>o.actions.toCodeBlock.isEnable()},wHruleItemData={id:ActionName.horizontalrule,title:i18n$2.bind(null,"hrule"),icon:icons.horizontalRule,exec:o=>o.actions.hRule.run(),isActive:o=>o.actions.hRule.isActive(),isEnable:o=>o.actions.hRule.isEnable()},wEmojiItemData={id:ActionName.emoji,title:i18n$2.bind(null,"emoji"),icon:icons.emoji,exec:o=>o.actions.openEmojiSuggest.run({}),isActive:o=>o.actions.openEmojiSuggest.isActive(),isEnable:o=>o.actions.openEmojiSuggest.isEnable()},wToggleHeadingFoldingItemData={id:"folding-heading",type:ToolbarDataType.SingleButton,icon:icons.foldingHeading,title:()=>i18n$2("folding-heading"),hint:()=>i18n$2("folding-heading__hint"),isActive:o=>{var e;return((e=o.actions.toggleHeadingFolding)==null?void 0:e.isActive())??!1},isEnable:o=>{var e;return((e=o.actions.toggleHeadingFolding)==null?void 0:e.isEnable())??!1},exec:o=>o.actions.toggleHeadingFolding.run(),condition:"enabled"},textContextItemData={id:"text",type:ToolbarDataType.ReactComponent,component:WToolbarTextSelect,props:{disablePortal:!0},width:0,condition:({selection:{$from:o,$to:e},schema:s})=>{if(!o.sameParent(e))return!1;const{parent:a}=o;return a.type===pType(s)||a.type===headingType(s)}};ToolbarDataType.ListButton,i18n$2.bind(null,"math");const wBulletListItemData={id:ActionName.bulletList,title:i18n$2.bind(null,"ulist"),icon:icons.bulletList,hotkey:formatter.toView(Action.BulletList),exec:o=>o.actions.toBulletList.run(),isActive:o=>o.actions.toBulletList.isActive(),isEnable:o=>o.actions.toBulletList.isEnable()},wOrderedListItemData={id:ActionName.orderedList,title:i18n$2.bind(null,"olist"),icon:icons.orderedList,hotkey:formatter.toView(Action.OrderedList),exec:o=>o.actions.toOrderedList.run(),isActive:o=>o.actions.toOrderedList.isActive(),isEnable:o=>o.actions.toOrderedList.isEnable()},wSinkListItemData={id:ActionName.sinkListItem,title:i18n$2.bind(null,"list__action_sink"),hintWhenDisabled:()=>i18n$2("list_action_disabled"),icon:icons.sink,hotkey:formatter.toView(Action.SinkListItem),exec:o=>o.actions.sinkListItem.run(),isActive:o=>o.actions.sinkListItem.isActive(),isEnable:o=>o.actions.sinkListItem.isEnable()},wLiftListItemData={id:ActionName.liftListItem,title:i18n$2.bind(null,"list__action_lift"),hintWhenDisabled:()=>i18n$2("list_action_disabled"),icon:icons.lift,hotkey:formatter.toView(Action.LiftListItem),exec:o=>o.actions.liftListItem.run(),isActive:o=>o.actions.liftListItem.isActive(),isEnable:o=>o.actions.liftListItem.isEnable()};i18n$2.bind(null,"list"),ActionName.sinkListItem,icons.sink,ActionName.liftListItem,icons.lift,i18n$2.bind(null,"code"),i18n$2.bind(null,"math"),ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ReactComponent,ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code");const wSelectionMenuConfig=[[wToggleHeadingFoldingItemData,textContextItemData],[wBoldItemData,wItalicItemData,wUnderlineItemData,wStrikethroughItemData,wMonospaceItemData,wMarkedItemData,wCodeItemData],[{id:"colorify",type:ToolbarDataType.ReactComponent,component:WToolbarColors,props:{disablePortal:!0},width:42},wLinkItemData]];ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code"),ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code"),ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code");const wCommandMenuConfigByPreset={zero:[],commonmark:[wTextItemData,wHeading1ItemData,wHeading2ItemData,wHeading3ItemData,wHeading4ItemData,wHeading5ItemData,wHeading6ItemData,wBulletListItemData,wOrderedListItemData,wSinkListItemData,wLiftListItemData,wLinkItemData,wQuoteItemData,wCodeBlockItemData,wHruleItemData],default:[wTextItemData,wHeading1ItemData,wHeading2ItemData,wHeading3ItemData,wHeading4ItemData,wHeading5ItemData,wHeading6ItemData,wBulletListItemData,wOrderedListItemData,wSinkListItemData,wLiftListItemData,wLinkItemData,wQuoteItemData,wCodeBlockItemData,wHruleItemData],yfm:[wTextItemData,wHeading1ItemData,wHeading2ItemData,wHeading3ItemData,wHeading4ItemData,wHeading5ItemData,wHeading6ItemData,wBulletListItemData,wOrderedListItemData,wSinkListItemData,wLiftListItemData,wLinkItemData,wQuoteItemData,wNoteItemData,wCutItemData,wCodeBlockItemData,wCheckboxItemData,wTableItemData,wImageItemData,wHruleItemData,wFileItemData,wTabsItemData],full:[wTextItemData,wHeading1ItemData,wHeading2ItemData,wHeading3ItemData,wHeading4ItemData,wHeading5ItemData,wHeading6ItemData,wBulletListItemData,wOrderedListItemData,wSinkListItemData,wLiftListItemData,wLinkItemData,wQuoteItemData,wNoteItemData,wCutItemData,wCodeBlockItemData,wCheckboxItemData,wTableItemData,wImageItemData,wHruleItemData,wEmojiItemData,wFileItemData,wTabsItemData]};wCommandMenuConfigByPreset.zero.slice(),wCommandMenuConfigByPreset.commonmark.slice(),wCommandMenuConfigByPreset.default.slice(),wCommandMenuConfigByPreset.yfm.slice(),wCommandMenuConfigByPreset.full.slice();const wSelectionMenuConfigByPreset={zero:[],commonmark:[[textContextItemData],[wBoldItemData,wItalicItemData,wCodeItemData],[wLinkItemData]],default:[[textContextItemData],[wBoldItemData,wItalicItemData,wStrikethroughItemData,wCodeItemData],[wLinkItemData]],yfm:[[textContextItemData],[wBoldItemData,wItalicItemData,wStrikethroughItemData,wMonospaceItemData,wCodeItemData],[wLinkItemData]],full:wSelectionMenuConfig.slice()},emojiDefs={grinning:"",smiley:"",smile:"",grin:"",laughing:"",satisfied:"",sweat_smile:"",rofl:"",joy:"",slightly_smiling_face:"",upside_down_face:"",wink:"",blush:"",innocent:"",smiling_face_with_three_hearts:"",heart_eyes:"",star_struck:"",kissing_heart:"",kissing:"",kissing_closed_eyes:"",kissing_smiling_eyes:"",smiling_face_with_tear:"",yum:"",stuck_out_tongue:"",stuck_out_tongue_winking_eye:"",zany_face:"",stuck_out_tongue_closed_eyes:"",money_mouth_face:"",hugs:"",hand_over_mouth:"",shushing_face:"",thinking:"",zipper_mouth_face:"",raised_eyebrow:"",neutral_face:"",expressionless:"",no_mouth:"",smirk:"",unamused:"",roll_eyes:"",grimacing:"",lying_face:"",relieved:"",pensive:"",sleepy:"",drooling_face:"",sleeping:"",mask:"",face_with_thermometer:"",face_with_head_bandage:"",nauseated_face:"",vomiting_face:"",sneezing_face:"",hot_face:"",cold_face:"",woozy_face:"",dizzy_face:"",exploding_head:"",cowboy_hat_face:"",partying_face:"",disguised_face:"",sunglasses:"",nerd_face:"",monocle_face:"",confused:"",worried:"",slightly_frowning_face:"",open_mouth:"",hushed:"",astonished:"",flushed:"",pleading_face:"",frowning:"",anguished:"",fearful:"",cold_sweat:"",disappointed_relieved:"",cry:"",sob:"",scream:"",confounded:"",persevere:"",disappointed:"",sweat:"",weary:"",tired_face:"",yawning_face:"",triumph:"",rage:"",pout:"",angry:"",cursing_face:"",smiling_imp:"",imp:"",skull:"",skull_and_crossbones:"",shit:"",clown_face:"",japanese_ogre:"",japanese_goblin:"",ghost:"",alien:"",space_invader:"",robot:"",smiley_cat:"",smile_cat:"",joy_cat:"",heart_eyes_cat:"",smirk_cat:"",kissing_cat:"",scream_cat:"",crying_cat_face:"",pouting_cat:"",see_no_evil:"",hear_no_evil:"",speak_no_evil:"",kiss:"",broken_heart:"",heart:"",zzz:"",wave:"",raised_back_of_hand:"",raised_hand_with_fingers_splayed:"",hand:"",raised_hand:"",vulcan_salute:"",ok_hand:"",pinched_fingers:"",pinching_hand:"",v:"",crossed_fingers:"",love_you_gesture:"",metal:"",call_me_hand:"",point_left:"",point_right:"",point_up_2:"",middle_finger:"",fu:"",point_down:"",point_up:"","+1":"",thumbsup:"","-1":"",thumbsdown:"",fist:"",punch:"",fist_left:"",fist_right:"",clap:"",raised_hands:"",open_hands:"",palms_up_together:"",handshake:"",pray:"",writing_hand:"",nail_care:"",selfie:"",muscle:"",mechanical_arm:"",eyes:"",eye:"",footprints:"",monkey_face:"",monkey:"",dog:"",wolf:"",fox_face:"",cat:"",horse:"",unicorn:"",cow:"",pig:"",mouse:"",chicken:"",rooster:"",bird:"",four_leaf_clover:"",egg:"",cake:"",coffee:"",wine_glass:"",beer:"",beers:"",clinking_glasses:"",house:"",bank:"",sunrise:"",taxi:"",car:"",stop_sign:"",construction:"",anchor:"",rocket:"",hourglass:"",alarm_clock:"",moon:"",zap:"",fire:"",tada:"",gift:"",trophy:"","8ball":"",video_game:"",spades:"",hearts:"",diamonds:"",clubs:"",chess_pawn:"",art:"",crown:"",mega:"",bell:"",no_bell:"",mag:"",lock:"",unlock:"",key:"",gun:"",link:"",drop_of_blood:"",pill:"",bed:"",moyai:"",warning:"",children_crossing:"",no_entry:"",no_entry_sign:"",no_bicycles:"",no_smoking:"",do_not_litter:"","non-potable_water":"",no_pedestrians:"",no_mobile_phones:"",underage:"",radioactive:"",biohazard:"",back:"",end:"",on:"",soon:"",top:"",cinema:"",infinity:"",bangbang:"",interrobang:"",question:"",exclamation:"",o:"",x:"",copyright:"",registered:"",tm:"",new:"",ok:"",sos:"",up:"",vs:"",radio_button:"",checkered_flag:""},DEFAULT_IGNORED_KEYS=["Tab","Shift-Tab"],BundlePreset=(o,e)=>{var E,v,_,w;o.context.set("directiveSyntax",e.directiveSyntax);const s={color:"var(--g-color-line-brand)",width:2},a={...e,baseStyles:{attributes:{"aria-live":"",...(E=e.baseStyles)==null?void 0:E.attributes}},cursor:{dropOptions:s},search:e.searchPanel?{editorSelector:".g-md-editor-component",anchorSelector:".g-md-search-wysiwyg-anchor"}:void 0,clipboard:{pasteFileHandler:e.fileUploadHandler,...e.clipboard},selectionContext:{config:wSelectionMenuConfigByPreset.zero,...e.selectionContext},commandMenu:{actions:wCommandMenuConfigByPreset.zero,...e.commandMenu},history:{undoKey:formatter.toPM(Action.Undo),redoKey:formatter.toPM(Action.Redo),...e.history},baseSchema:{paragraphKey:formatter.toPM(Action.Text),paragraphPlaceholder:(R,k)=>{const{value:I,behavior:P}=e.placeholderOptions||{};return{"empty-row":!R.text,"empty-row-top-level":!R.text&&(k==null?void 0:k.type.name)===BaseNode$1.Doc,"empty-doc":!R.text&&(k==null?void 0:k.type.name)===BaseNode$1.Doc&&k.childCount===1}[P||"empty-doc"]?typeof I=="function"?I():I??i18n$a(e.mobile?"doc_empty_mobile":"doc_empty"):null},preserveEmptyRows:e.preserveEmptyRows,...e.baseSchema}},l={...a,selectionContext:{config:wSelectionMenuConfigByPreset.commonmark,...e.selectionContext},commandMenu:{actions:wCommandMenuConfigByPreset.commonmark,...e.commandMenu},breaks:{preferredBreak:e.mdBreaks?"soft":"hard",...e.breaks},bold:{boldKey:formatter.toPM(Action.Bold),...e.bold},italic:{italicKey:formatter.toPM(Action.Italic),...e.italic},code:{codeKey:formatter.toPM(Action.Code),...e.code},codeBlock:{codeBlockKey:formatter.toPM(Action.CodeBlock),...e.codeBlock},blockquote:{qouteKey:formatter.toPM(Action.Quote),...e.blockquote},link:{linkKey:formatter.toPM(Action.Link),...e.link},lists:{ulKey:formatter.toPM(Action.BulletList),olKey:formatter.toPM(Action.OrderedList),ulInputRules:{plus:!1},...e.lists},image:{parseInsertedUrlAsImage:(v=e.imgSize)==null?void 0:v.parseInsertedUrlAsImage}},u={...l,selectionContext:{config:wSelectionMenuConfigByPreset.default,...e.selectionContext},commandMenu:{actions:wCommandMenuConfigByPreset.default,...e.commandMenu},strike:{strikeKey:formatter.toPM(Action.Strike),...e.strike}},c={...u,yfmConfigs:{disableAttrs:e.disableMdAttrs,...e.yfmConfigs},selectionContext:{config:wSelectionMenuConfigByPreset.yfm,...e.selectionContext},commandMenu:{actions:wCommandMenuConfigByPreset.yfm,...e.commandMenu},underline:{underlineKey:formatter.toPM(Action.Underline),...e.underline},imgSize:{imageUploadHandler:e.fileUploadHandler,needToSetDimensionsForUploadedImages:e.needToSetDimensionsForUploadedImages,enableNewImageSizeCalculation:e.enableNewImageSizeCalculation,...e.imgSize},checkbox:{checkboxLabelPlaceholder:()=>i18n$a("checkbox"),...e.checkbox},deflist:{deflistTermPlaceholder:()=>i18n$a("deflist_term"),deflistDescPlaceholder:()=>i18n$a("deflist_desc")},yfmCut:{yfmCutKey:formatter.toPM(Action.Cut),yfmCutTitlePlaceholder:()=>i18n$a("cut_title"),yfmCutContentPlaceholder:()=>i18n$a("cut_content"),...e.yfmCut},yfmNote:{yfmNoteKey:formatter.toPM(Action.Note),yfmNoteTitlePlaceholder:()=>i18n$a("note_title"),...e.yfmNote},yfmTable:{yfmTableCellPlaceholder:()=>i18n$a("table_cell"),...e.yfmTable,controls:e.mobile?!1:(_=e.yfmTable)==null?void 0:_.controls},yfmFile:{fileUploadHandler:e.fileUploadHandler,needToSetDimensionsForUploadedImages:e.needToSetDimensionsForUploadedImages,...e.yfmFile},yfmHeading:{h1Key:formatter.toPM(Action.Heading1),h2Key:formatter.toPM(Action.Heading2),h3Key:formatter.toPM(Action.Heading3),h4Key:formatter.toPM(Action.Heading4),h5Key:formatter.toPM(Action.Heading5),h6Key:formatter.toPM(Action.Heading6),headingPlaceholder:R=>`${i18n$a("heading")} ${R.attrs[YfmHeadingAttr.Level]}`,...e.yfmHeading},placeholder:{[NoteNode.NoteContent]:()=>i18n$a("note_content")}},d={...c,selectionContext:{config:wSelectionMenuConfigByPreset.full,...e.selectionContext},commandMenu:{actions:wCommandMenuConfigByPreset.full,...e.commandMenu},emoji:{defs:emojiDefs,...e.emoji}},h=[Action.Undo,Action.Redo],p=h.concat(Action.Bold,Action.Italic,Action.Code,Action.Link,Action.Text,Action.Heading1,Action.Heading2,Action.Heading3,Action.Heading4,Action.Heading5,Action.Heading6,Action.BulletList,Action.OrderedList,Action.Quote,Action.CodeBlock),m=p.concat(Action.Strike),g=m.concat(Action.Underline,Action.Note,Action.Cut),y=g.concat();let A;switch(e.preset){case"zero":{A=h,o.use(BehaviorPreset,a).use(ZeroPreset,a);break}case"commonmark":{A=p,o.use(BehaviorPreset,l).use(CommonMarkPreset,l);break}case"default":{A=m,o.use(BehaviorPreset,u).use(DefaultPreset,u);break}case"yfm":{A=g,o.use(BehaviorPreset,c).use(YfmPreset,c);break}default:{A=y,o.use(BehaviorPreset,d).use(FullPreset,d);break}}const T=((w=e.ignoreKeysList)==null?void 0:w.slice())??[];T.push(...DEFAULT_IGNORED_KEYS);for(const R of A){const k=formatter.toPM(R);k&&T.push(k)}o.use(EditorModeKeymap,{onSubmit:e.onSubmit,onCancel:e.onCancel,ignoreKeysList:T})};function useMarkdownEditor(o,e=[]){const s=reactExports.useMemo(()=>{const{md:a={},initial:l={},handlers:u={},experimental:c={},markupConfig:d={},wysiwygConfig:h={},logger:p=new Logger2,mobile:m}=o,g=o.preset??"full",y=new ReactRenderStorage,A=getPMTransformers({emptyRowTransformer:c.preserveEmptyRows}),T=new DirectiveSyntaxContext(c.directiveSyntax),E=v=>{var w;const _=h.extensionOptions;v.use(BundlePreset,{..._,directiveSyntax:T,preset:g,reactRenderer:y,onCancel:()=>(s.emit("cancel",null),!0),onSubmit:()=>(s.emit("submit",null),!0),disableMdAttrs:h.disableMarkdownAttrs,preserveEmptyRows:c.preserveEmptyRows,placeholderOptions:h.placeholderOptions,mdBreaks:a.breaks,fileUploadHandler:u.uploadFile,needToSetDimensionsForUploadedImages:c.needToSetDimensionsForUploadedImages,enableNewImageSizeCalculation:c.enableNewImageSizeCalculation,mobile:m,searchPanel:h.searchPanel??!0});{const R=h.extensions;R&&v.use(R,(w=o.wysiwygConfig)==null?void 0:w.extensionOptions)}};return new EditorImpl({...o,logger:p,preset:g,renderStorage:y,directiveSyntax:T,pmTransformers:A,md:a,initial:l,handlers:u,experimental:c,markupConfig:d,wysiwygConfig:{...h,extensions:E}})},e);return reactExports.useLayoutEffect(()=>{function a({editorMode:l,id:u}){globalLogger.action({mode:l,source:"toolbar",action:u}),s.logger.action({mode:l,source:"toolbar",action:u})}return s.on("toolbar-action",a),()=>{s.off("toolbar-action",a),s.destroy()}},[s]),s}const IN_RESIZE_CLASSNAME="in-resize",useColResize=({onStart:o,onMove:e,onEnd:s})=>{const a=reactExports.useRef(0),l=reactExports.useRef(0),u=reactExports.useCallback(h=>{var g;const p="touches"in h?((g=h.touches[0])==null?void 0:g.clientX)??0:h.clientX;if(l.current===p)return;l.current=p;const m=a.current-p;e(m)},[e]),c=reactExports.useCallback(h=>{var g;window.removeEventListener("mousemove",u),window.removeEventListener("touchmove",u),document.body.style.removeProperty("user-select");const p="touches"in h?((g=h.touches[0])==null?void 0:g.clientX)??0:h.clientX,m=a.current-p;s(m)},[u,s]),d=reactExports.useCallback(h=>{var m;const p="touches"in h?((m=h.touches[0])==null?void 0:m.clientX)??0:h.clientX;a.current=p,l.current=p,window.addEventListener("mouseup",c,{once:!0}),window.addEventListener("touchend",c,{once:!0}),window.addEventListener("touchcancel",c,{once:!0}),window.addEventListener("mousemove",u),window.addEventListener("touchmove",u),document.body.style.setProperty("user-select","none"),o()},[c,u,o]);return{listeners:{onMouseDown:d,onTouchStart:d}}},HorizontalDrag=({leftElRef:o,rightElRef:e,wrapperRef:s,editor:a,onEndMove:l})=>{var v,_;const u=a.cm,[c,d]=reactExports.useState((((v=s.current)==null?void 0:v.clientWidth)??0)/2),[h,p]=reactExports.useState((((_=s.current)==null?void 0:_.clientWidth)??0)/2),m=reactExports.useCallback((w,R)=>{var k,I,P,N;(I=(k=o.current)==null?void 0:k.style)==null||I.setProperty("width",`${w}px`),(N=(P=e.current)==null?void 0:P.style)==null||N.setProperty("width",`${R}px`)},[o,e]),g=reactExports.useCallback(w=>{var R,k,I,P;return[clamp(c-w,(((R=s.current)==null?void 0:R.clientWidth)??0)/8,(((k=s.current)==null?void 0:k.clientWidth)??0)*3/4),clamp(h+w,(((I=s.current)==null?void 0:I.clientWidth)??0)/8,(((P=s.current)==null?void 0:P.clientWidth)??0)*3/4)]},[c,h,s]);reactExports.useEffect(()=>{m(c,h),u.requestMeasure()},[]),reactExports.useEffect(()=>{const[w,R]=[o.current,e.current];return()=>{var k,I;w==null||w.classList.remove(IN_RESIZE_CLASSNAME),R==null||R.classList.remove(IN_RESIZE_CLASSNAME),(k=w==null?void 0:w.style)==null||k.removeProperty("width"),(I=R==null?void 0:R.style)==null||I.removeProperty("width")}},[o,e]);const y=reactExports.useCallback(()=>{var w,R,k;(w=s.current)==null||w.style.setProperty("user-select","none"),(R=o.current)==null||R.classList.add(IN_RESIZE_CLASSNAME),(k=e.current)==null||k.classList.add(IN_RESIZE_CLASSNAME)},[o,e,s]),A=reactExports.useCallback(w=>{const[R,k]=g(w);m(R,k)},[g,c,h,m]),T=reactExports.useCallback(w=>{var I,P,N;const[R,k]=g(w);d(R),p(k),m(R,k),(I=s.current)==null||I.style.removeProperty("user-select"),u.requestMeasure(),(P=e.current)==null||P.classList.remove(IN_RESIZE_CLASSNAME),(N=o.current)==null||N.classList.remove(IN_RESIZE_CLASSNAME),l==null||l(e.current,o.current)},[g,u,o,e,m,s]),{listeners:E}=useColResize({onStart:y,onMove:A,onEnd:T});return jsxRuntimeExports.jsx("div",{className:cnEditorComponent("resizer",{horizontal:!0}),...E,children:jsxRuntimeExports.jsx("div",{className:cnEditorComponent("gutter")})})},HorizontalDragWrapper=o=>o.isMounted?jsxRuntimeExports.jsx(HorizontalDrag,{...o}):jsxRuntimeExports.jsx("div",{className:cnEditorComponent("resizer",{horizontal:!0}),children:jsxRuntimeExports.jsx("div",{className:cnEditorComponent("gutter")})}),MarkupEditorComponent=function o({editor:e,autofocus:s,className:a,children:l,qa:u}){const c=reactExports.useRef(null);return reactExports.useLayoutEffect(()=>{const d=e.markupEditor.cm.dom;return c.current&&c.current.appendChild(d),()=>{d.remove()}},[e.markupEditor]),reactExports.useEffect(()=>{e.markupEditor.cm.requestMeasure(),s&&e.markupEditor.focus()},[e.markupEditor]),jsxRuntimeExports.jsx("div",{"data-qa":u,ref:c,className:a,onClick:d=>{const h=d.target;h instanceof Element&&h.classList.contains("cm-editor")&&e.markupEditor.focus()},children:l})},b$5=cn("editor-sticky"),stickyCn={toolbar:({withSettings:o,stickyActive:e,isSticky:s},a)=>b$5({part:o?"left":!1,"sticky-active":e,sticky:s},a),settings:({withToolbar:o,stickyActive:e},s)=>b$5({part:o?"right":!1,"sticky-active":e,clear:!o,sticky:!0},s)};function ToolbarView({editor:o,editorMode:e,toolbarEditor:s,toolbarFocus:a,toolbarConfig:l,toolbarDisplay:u,hiddenActionsConfig:c,settingsVisible:d,className:h,children:p,stickyToolbar:m,qa:g}){const y=useUpdate();reactExports.useLayoutEffect(()=>(o.on("rerender-toolbar",y),()=>{o.off("rerender-toolbar",y)}),[o,y]);const A=reactExports.useRef(null),T=useSticky(A)&&m,E=o.mobile;return jsxRuntimeExports.jsxs("div",{"data-qa":g,ref:A,className:stickyCn.toolbar({withSettings:d,stickyActive:T,isSticky:m},[h]),"data-layout":LAYOUT.STICKY_TOOLBAR,children:[jsxRuntimeExports.jsx(FlexToolbar,{data:l,hiddenActions:c,editor:s,focus:a,dotsTitle:i18n$2("more_action"),onClick:(v,_)=>o.emit("toolbar-action",{id:v,attrs:_,editorMode:e}),display:u,disableTooltip:E,disableHotkey:E,disablePreview:E}),p]})}const defaultValue={},MarkupToolbarContext=reactExports.createContext(defaultValue),MarkupToolbarContextProvider=MarkupToolbarContext.Provider;function useMarkupToolbarContext(){return reactExports.useContext(MarkupToolbarContext)}const b$4=cn("markup-editor"),MarkupEditorView=reactExports.memo(o=>{const{editor:e,autofocus:s,settingsVisible:a,toolbarVisible:l,toolbarConfig:u,hiddenActionsConfig:c,qa:d,className:h,toolbarClassName:p,children:m,stickyToolbar:g=!0,toolbarDisplay:y}=o;return useRenderTime(A=>{globalLogger.metrics({component:"markup-editor",event:"render",duration:A}),e.logger.metrics({component:"markup-editor",event:"render",duration:A})}),jsxRuntimeExports.jsxs("div",{className:b$4({toolbar:l},[h]),"data-qa":d,children:[l?jsxRuntimeExports.jsx(MarkupToolbarContextProvider,{value:{uploadHandler:e.fileUploadHandler,needToSetDimensionsForUploadedImages:e.needToSetDimensionsForUploadedImages},children:jsxRuntimeExports.jsx(ToolbarView,{qa:"g-md-toolbar-main",editor:e,editorMode:"markup",toolbarEditor:e,hiddenActionsConfig:c,stickyToolbar:g,toolbarConfig:u,toolbarFocus:()=>e.focus(),settingsVisible:a,className:b$4("toolbar",[p]),toolbarDisplay:y,children:m})}):null,jsxRuntimeExports.jsx(MarkupEditorComponent,{autofocus:s,editor:e,className:b$4("editor",{"toolbar-visible":l}),children:jsxRuntimeExports.jsx(Renderer,{storage:e.renderStorage})})]})});MarkupEditorView.displayName="MarkdownMarkupEditorView";const b$3=cn("markup-preview"),SplitModeView=reactExports.forwardRef(({editor:o},e)=>{var p;const s=o.cm,[,a]=reactExports.useReducer(m=>m+1,0),l=reactExports.useRef(null),u=reactExports.useRef([]),c=()=>{if(!l.current)return;const m=Array.from(l.current.querySelectorAll(".line"));u.current=m.filter(g=>{var y;return g instanceof HTMLElement&&((y=g.parentElement)==null?void 0:y.offsetHeight)!==0}).map(g=>({el:g,line:Number(g.getAttribute("data-line"))}))},d=reactExports.useMemo(()=>throttle(()=>{if(!l.current||!s.dom.matches(":hover"))return;const{range:m}=s.scrollSnapshot().value,g=s.state.doc.lineAt(m.from).number-1;c(),scrollToRevealSourceLine(g,u.current,l)},30),[s]),h=reactExports.useMemo(()=>throttle(()=>{if(!l.current||!l.current.matches(":hover"))return;c();let m=getEditorLineNumberForOffset(l.current.scrollTop,u.current,l);if(m===null||isNaN(m))return;m=Math.max(Math.floor(m),0)+1;const g=s.state.doc.line(m),{top:y}=s.lineBlockAt(g.from);s.scrollDOM.scrollTo({top:y})},30),[s]);return reactExports.useEffect(()=>{const m=l.current;return o.on("change",a),o.on("cm-scroll",d),m==null||m.addEventListener("scroll",h),o.cm.requestMeasure(),()=>{o.off("change",a),o.off("cm-scroll",d),m==null||m.removeEventListener("scroll",h)}},[o,d,h]),reactExports.useImperativeHandle(e,()=>l.current),jsxRuntimeExports.jsxs("div",{className:b$3("outer",{vertical:o.splitMode==="vertical"}),ref:l,children:[jsxRuntimeExports.jsx(Label,{icon:jsxRuntimeExports.jsx(Eye,{}),className:b$3("preview-sign"),size:"m",children:i18n$4("split-mode-text")}),(p=o.renderPreview)==null?void 0:p.call(o,{getValue:o.getValue,mode:"split",md:o.mdOptions,directiveSyntax:o.directiveSyntax})]})});SplitModeView.displayName="SplitModeView";const WysiwygEditorComponent=function o({className:e,autofocus:s,editor:a,children:l,qa:u}){const c=reactExports.useRef(null);return reactExports.useEffect(()=>{const{current:d}=c;d&&(d.appendChild(a.wysiwygEditor.dom),s&&a.focus())},[a]),jsxRuntimeExports.jsx("div",{"data-qa":u,ref:c,className:e,children:l})},b$2=cn("wysiwyg-editor"),WysiwygEditorView=reactExports.memo(o=>{const{editor:e,autofocus:s,settingsVisible:a,toolbarVisible:l,toolbarConfig:u,hiddenActionsConfig:c,qa:d,className:h,toolbarClassName:p,children:m,stickyToolbar:g=!0,toolbarDisplay:y}=o;return useRenderTime(A=>{globalLogger.metrics({component:"wysiwyg-editor",event:"render",duration:A}),e.logger.metrics({component:"wysiwyg-editor",event:"render",duration:A})}),jsxRuntimeExports.jsxs("div",{className:b$2({toolbar:l},[h]),"data-qa":d,children:[l?jsxRuntimeExports.jsx(ToolbarView,{qa:"g-md-toolbar-main",editor:e,editorMode:"wysiwyg",toolbarEditor:e,stickyToolbar:g,toolbarConfig:u,toolbarFocus:()=>e.focus(),hiddenActionsConfig:c,settingsVisible:a,className:b$2("toolbar",[p]),toolbarDisplay:y,children:m}):null,jsxRuntimeExports.jsx(WysiwygEditorComponent,{autofocus:s,editor:e,className:b$2("editor"),children:jsxRuntimeExports.jsx(Renderer,{storage:e.renderStorage})})]})});WysiwygEditorView.displayName="MarkdownWysiwgEditorView";const WysiwygMode=o=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...o,children:[jsxRuntimeExports.jsx("path",{d:"M5.25002 4.75L5.25002 11.25M5.25002 4.75L8.5 4.75M5.25002 4.75L2.00004 4.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M12.5 3C12.5 3 12.5 9.57107 12.5 12.5M12.5 3L14 2M12.5 3L11 2M12.5 12.5L14 13.5M12.5 12.5L11 13.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"currentColor"})]}),header_title$1="Header",header_hint$1="# Your text",italic_title$1="Italic",italic_hint$1="_Your text_",bold_title$1="Bold",bold_hint$1="**Your text**",strikethrough_title$1="Strikethrough",strikethrough_hint$1="~~Your text~~",blockquote_title$1="Blockquote",blockquote_hint$1="> Your text",code_title$1="Code",code_hint$1="```Your text```",link_title$1="Link",link_hint$1="[Your text](url)",image_title$1="Image",image_hint$1="![Your text](url)",list_title$1="List item",list_hint$1="- Your text",documentation$1="Documentation",documentation_link$1=" https://diplodoc.com/docs/en/syntax/",en={header_title:header_title$1,header_hint:header_hint$1,italic_title:italic_title$1,italic_hint:italic_hint$1,bold_title:bold_title$1,bold_hint:bold_hint$1,strikethrough_title:strikethrough_title$1,strikethrough_hint:strikethrough_hint$1,blockquote_title:blockquote_title$1,blockquote_hint:blockquote_hint$1,code_title:code_title$1,code_hint:code_hint$1,link_title:link_title$1,link_hint:link_hint$1,image_title:image_title$1,image_hint:image_hint$1,list_title:list_title$1,list_hint:list_hint$1,"numbered-list_title":"Numbered list","numbered-list_hint":"1. Your text",documentation:documentation$1,documentation_link:documentation_link$1},header_title="",header_hint="#  ",italic_title="",italic_hint="_ _",bold_title="",bold_hint="** **",strikethrough_title="",strikethrough_hint="~~ ~~",blockquote_title="",blockquote_hint=">  ",code_title="",code_hint="``` ```",link_title="",link_hint="[ ](-)",image_title="",image_hint="![ ](-)",list_title="",list_hint="-  ",documentation="",documentation_link=" https://diplodoc.com/docs/ru/syntax/",ru={header_title,header_hint,italic_title,italic_hint,bold_title,bold_hint,strikethrough_title,strikethrough_hint,blockquote_title,blockquote_hint,code_title,code_hint,link_title,link_hint,image_title,image_hint,list_title,list_hint,"numbered-list_title":" ","numbered-list_hint":"1.  ",documentation,documentation_link},KEYSET="md-hints",i18n=registerKeyset(KEYSET,{en,ru}),b$1=cn("markdown-hints"),MarkdownHints=reactExports.memo(function o(){const e=[{title:i18n("header_title"),hint:i18n("header_hint")},{title:i18n("italic_title"),hint:i18n("italic_hint")},{title:i18n("bold_title"),hint:i18n("bold_hint")},{title:i18n("strikethrough_title"),hint:i18n("strikethrough_hint")},{title:i18n("blockquote_title"),hint:i18n("blockquote_hint")},{title:i18n("code_title"),hint:i18n("code_hint")},{title:i18n("link_title"),hint:i18n("link_hint")},{title:i18n("image_title"),hint:i18n("image_hint")},{title:i18n("list_title"),hint:i18n("list_hint")},{title:i18n("numbered-list_title"),hint:i18n("numbered-list_hint")}];return jsxRuntimeExports.jsxs("div",{className:b$1(),children:[jsxRuntimeExports.jsx("div",{className:b$1("grid"),children:e.map((s,a)=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:b$1("title"),children:s.title}),jsxRuntimeExports.jsx("span",{className:b$1("hint"),children:s.hint})]},`md-hint-${a}`))}),jsxRuntimeExports.jsx(Link$1,{href:i18n("documentation_link"),target:"_blank",className:b$1("docs-link"),children:i18n("documentation")})]})});MarkdownHints.displayName="MarkdownHints";const placement$2=["bottom-end","top-end"],bSettings=cn("editor-settings"),bContent=cn("settings-content"),EditorSettings=reactExports.memo(function o(e){const{className:s,onShowPreviewChange:a,showPreview:l,renderPreviewButton:u,settingsVisible:c}=e,[d,h]=reactExports.useState(null),[p,,m,g]=useBooleanState(!1),y=useTargetZIndex(LAYOUT.STICKY_TOOLBAR),A=c===!0||Array.isArray(c)&&c.length>0;return jsxRuntimeExports.jsxs("div",{className:bSettings(null,s),children:[u&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ActionTooltip,{openDelay:ToolbarTooltipDelay.Open,closeDelay:ToolbarTooltipDelay.Close,title:i18n$4("preview_label"),hotkey:"mod+shift+p",children:jsxRuntimeExports.jsx(Button,{qa:"g-md-markup-preview-button",size:"m",view:"flat",pin:"round-round",className:bSettings("preview-button"),onClick:()=>a==null?void 0:a(!l),selected:l,"aria-label":i18n$4("preview_label"),children:jsxRuntimeExports.jsx(Icon,{data:Eye})})}),c&&jsxRuntimeExports.jsx("div",{className:bSettings("separator")})]}),A&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{size:"m",view:"flat",pin:"round-round",onClick:g,ref:h,qa:"g-md-settings-button",className:bSettings("dropdown-button"),"aria-label":i18n$4("settings_label"),children:jsxRuntimeExports.jsx(Icon,{data:Gear})}),jsxRuntimeExports.jsx(Popup,{open:p,anchorElement:d,placement:placement$2,onOpenChange:m,zIndex:y,children:jsxRuntimeExports.jsx(SettingsContent,{...e,qa:"g-md-settings-content",onClose:m,className:bSettings("content"),zIndex:y})})]})]})}),mdHelpPlacement=["bottom","bottom-end","right-start","right","left"],SettingsContent=function o({mode:e,onClose:s,onModeChange:a,toolbarVisibility:l,onToolbarVisibilityChange:u,onSplitModeChange:c,splitMode:d=!1,splitModeEnabled:h,className:p,showPreview:m,settingsVisible:g,qa:y,disableMark:A,zIndex:T}){const E=Array.isArray(g),v=E?g==null?void 0:g.includes("mode"):!0,_=E?g==null?void 0:g.includes("toolbar"):!0,w=E?g==null?void 0:g.includes("split"):!0;return jsxRuntimeExports.jsxs("div",{className:bContent(null,[p]),"data-qa":y,children:[v&&jsxRuntimeExports.jsxs(Menu,{size:"l",className:bContent("mode"),children:[jsxRuntimeExports.jsx(Menu.Item,{qa:"g-md-settings-mode-wysiwyg",active:e==="wysiwyg",onClick:()=>{a("wysiwyg"),s()},iconStart:jsxRuntimeExports.jsx(Icon,{data:WysiwygMode}),children:i18n$4("settings_wysiwyg")}),jsxRuntimeExports.jsxs(Menu.Item,{qa:"g-md-settings-mode-markup",active:e==="markup",onClick:()=>{a("markup"),s()},iconStart:jsxRuntimeExports.jsx(Icon,{data:LogoMarkdown}),children:[i18n$4("settings_markup"),!A&&jsxRuntimeExports.jsx(HelpMark,{popoverProps:{placement:mdHelpPlacement,modal:!1,zIndex:T},className:bContent("mode-help"),children:jsxRuntimeExports.jsx("div",{onClick:R=>{R.stopPropagation()},children:jsxRuntimeExports.jsx(MarkdownHints,{})})})]})]}),v&&(w||_)&&jsxRuntimeExports.jsx("div",{className:bContent("separator")}),_&&!m&&jsxRuntimeExports.jsx(CheckboxWithHint,{checked:l,className:bContent("toolbar"),onUpdate:u,title:i18n$4("settings_menubar"),hint:i18n$4("settings_hint")}),w&&d&&jsxRuntimeExports.jsx(CheckboxWithHint,{checked:h,disabled:e!=="markup",className:bContent("split-mode"),onUpdate:c??noop$5,title:i18n$4("settings_split-mode"),hint:i18n$4("settings_split-mode-hint")}),jsxRuntimeExports.jsx(Text$3,{variant:"code-inline-1",className:bContent("version"),children:VERSION})]})};function CheckboxWithHint({checked:o,disabled:e,onUpdate:s,title:a,hint:l,className:u}){return jsxRuntimeExports.jsxs(Box,{spacing:{px:4,pt:2,pb:3},className:bContent("check-box",u),children:[jsxRuntimeExports.jsx(Checkbox$1,{size:"m",disabled:e,checked:o,onUpdate:s,children:a}),jsxRuntimeExports.jsx(Text$3,{as:"div",color:"secondary",className:bContent("check-hint",sp({mt:1,pl:6})),children:l})]})}var ListName;(function(o){o.code="code",o.heading="heading",o.lists="lists",o.math="math"})(ListName||(ListName={}));var ToolbarName;(function(o){o.markupHidden="markupHidden",o.markupMain="markupMain",o.wysiwygHidden="wysiwygHidden",o.wysiwygMain="wysiwygMain",o.wysiwygSelection="wysiwygSelection",o.wysiwygSlash="wysiwygSlash"})(ToolbarName||(ToolbarName={}));const MToolbarColors=({className:o,editor:e,focus:s,onClick:a})=>jsxRuntimeExports.jsx(ToolbarColors,{enable:!0,exec:l=>{colorify$2(l)(e.cm)},className:o,focus:s,onClick:a}),placement$1=["bottom-start","top-start","bottom-end","top-end"],ToolbarFilePopup=({className:o,hide:e,anchorElement:s,onSubmit:a,focus:l,onClick:u,uploadHandler:c,onSuccessUpload:d,uploadHint:h})=>{const p=useToaster(),[m,g,y]=useBooleanState(!1),A=reactExports.useCallback(()=>{e(),l()},[l,e]);return jsxRuntimeExports.jsx(Popup,{open:!0,modal:!0,onOpenChange:A,anchorElement:s,placement:placement$1,className:o,children:jsxRuntimeExports.jsx(FileForm,{autoFocus:!0,onAttach:c&&(T=>{g(),batchUploadFiles(T,c).then(E=>{y(),e(),d==null||d(E)},E=>{y(),p.add({theme:"danger",name:"toolbar_file_upload",title:i18n$d("file_upload_failed"),content:String(E)})})}),onCancel:A,onSubmit:T=>{e(),l(),a(T),u==null||u("addFile")},loading:m,uploadHint:h})})},MToolbarFilePopup=({focus:o,onClick:e,hide:s,anchorElement:a,editor:l,className:u})=>{const{uploadHandler:c}=useMarkupToolbarContext();return jsxRuntimeExports.jsx(ToolbarFilePopup,{hide:s,focus:o,onClick:e,anchorElement:a,className:u,onSubmit:d=>insertFiles([d])(l.cm),uploadHandler:c,onSuccessUpload:d=>{insertFiles(d.success.map(({result:h,file:p})=>({src:h.url,name:h.name??p.name,type:h.type??p.type})))(l.cm)}})},placement=["bottom-start","top-start","bottom-end","top-end"],ToolbarImagePopup=({className:o,anchorElement:e,hide:s,onSubmit:a,focus:l,onClick:u,uploadImages:c,onSuccessUpload:d,imageTitle:h,uploadHint:p})=>{const m=useToaster(),[g,y,A]=useBooleanState(!1),T=reactExports.useCallback(()=>{s(),l()},[l,s]);return jsxRuntimeExports.jsx(Popup,{open:!0,anchorElement:e,onOpenChange:T,placement,className:o,children:jsxRuntimeExports.jsx(ImageForm$1,{autoFocus:!0,onAttach:c&&(E=>{y(),batchUploadFiles(E,c).then(v=>{A(),s(),d==null||d(v)},v=>{A(),m.add({theme:"danger",name:"toolbar_image_upload",title:i18n$d("image_upload_failed"),content:String(v)})})}),onCancel:T,onSubmit:E=>{s(),l(),a(E),u==null||u("addImage")},loading:g,imageTitle:h,uploadHint:p})})},noop$2=o=>{console.error(o)},MToolbarImagePopup=({focus:o,onClick:e,hide:s,anchorElement:a,editor:l,className:u})=>{const{uploadHandler:c,needToSetDimensionsForUploadedImages:d}=useMarkupToolbarContext(),h=reactExports.useMemo(()=>{const{from:p,to:m}=l.cm.state.selection.main;return l.cm.state.doc.sliceString(p,m)},[]);return jsxRuntimeExports.jsx(ToolbarImagePopup,{imageTitle:h,hide:s,anchorElement:a,focus:o,onClick:e,className:u,onSubmit:({url:p,name:m,alt:g,width:y,height:A})=>{insertImages([{url:p,alt:g,title:m,width:isNumber(y)?String(y):"",height:isNumber(A)?String(A):""}])(l.cm)},uploadImages:c,onSuccessUpload:async p=>{const m=await toImageItems(p.success,!!d);insertImages(m)(l.cm)}})};async function toImageItems(o,e){const s=[];return await Promise.all(o.map(({result:a,file:l})=>{const u={url:a.url,alt:a.name??l.name};return s.push(u),e?getImageDimensions(l).then(({height:c})=>{u.height=String(Math.min(c,IMG_MAX_HEIGHT))},noop$2):Promise.resolve()})),s}const noop$1=()=>{},inactive$1=()=>!1,enable$1=()=>!0,disable=()=>!1,undoItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"undo"),icon:icons.undo,hotkey:formatter.toView(Action.Undo)},undoItemWysiwyg={hintWhenDisabled:!1,exec:o=>o.actions.undo.run(),isActive:o=>o.actions.undo.isActive(),isEnable:o=>o.actions.undo.isEnable()},undoItemMarkup={hintWhenDisabled:!1,exec:o=>undo$3(o.cm),isActive:inactive$1,isEnable:o=>undoDepth(o.cm.state)>0},redoItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"redo"),icon:icons.redo,hotkey:formatter.toView(Action.Redo)},redoItemWysiwyg={hintWhenDisabled:!1,exec:o=>o.actions.redo.run(),isActive:o=>o.actions.redo.isActive(),isEnable:o=>o.actions.redo.isEnable()},redoItemMarkup={hintWhenDisabled:!1,exec:o=>redo$3(o.cm),isActive:inactive$1,isEnable:o=>redoDepth(o.cm.state)>0},boldItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"bold"),icon:icons.bold,hotkey:formatter.toView(Action.Bold)},boldItemWysiwyg={exec:o=>o.actions.bold.run(),isActive:o=>o.actions.bold.isActive(),isEnable:o=>o.actions.bold.isEnable()},boldItemMarkup={exec:o=>toggleBold(o.cm),isActive:inactive$1,isEnable:enable$1},italicItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"italic"),icon:icons.italic,hotkey:formatter.toView(Action.Italic)},italicItemWysiwyg={exec:o=>o.actions.italic.run(),isActive:o=>o.actions.italic.isActive(),isEnable:o=>o.actions.italic.isEnable()},italicItemMarkup={exec:o=>toggleItalic(o.cm),isActive:inactive$1,isEnable:enable$1},underlineItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"underline"),icon:icons.underline,hotkey:formatter.toView(Action.Underline)},underlineItemWysiwyg={exec:o=>o.actions.underline.run(),isActive:o=>o.actions.underline.isActive(),isEnable:o=>o.actions.underline.isEnable()},underlineItemMarkup={exec:o=>toggleUnderline(o.cm),isActive:inactive$1,isEnable:enable$1},strikethroughItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"strike"),icon:icons.strikethrough,hotkey:formatter.toView(Action.Strike)},strikethroughItemWysiwyg={exec:o=>o.actions.strike.run(),isActive:o=>o.actions.strike.isActive(),isEnable:o=>o.actions.strike.isEnable()},strikethroughItemMarkup={exec:o=>toggleStrikethrough(o.cm),isActive:inactive$1,isEnable:enable$1},monospaceItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"mono"),icon:icons.mono},monospaceItemWysiwyg={exec:o=>o.actions.mono.run(),isActive:o=>o.actions.mono.isActive(),isEnable:o=>o.actions.mono.isEnable()},monospaceItemMarkup={exec:o=>toggleMonospace(o.cm),isActive:inactive$1,isEnable:enable$1},markedItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"mark"),icon:icons.mark},markedItemWysiwyg={exec:o=>o.actions.mark.run(),isActive:o=>o.actions.mark.isActive(),isEnable:o=>o.actions.mark.isEnable()},markedItemMarkup={exec:o=>toggleMarked(o.cm),isActive:inactive$1,isEnable:enable$1},checkboxItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"checkbox"),icon:icons.checklist},checkboxItemWysiwyg={exec:o=>o.actions.addCheckbox.run(),isActive:o=>o.actions.addCheckbox.isActive(),isEnable:o=>o.actions.addCheckbox.isEnable()},checkboxItemMarkup={exec:o=>wrapToCheckbox(o.cm),isActive:inactive$1,isEnable:enable$1},linkItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"link"),icon:icons.link,hotkey:formatter.toView(Action.Link)},linkItemWysiwyg={exec:o=>o.actions.addLink.run(),isActive:o=>o.actions.addLink.isActive(),isEnable:o=>o.actions.addLink.isEnable()},linkItemMarkup={exec:o=>insertLink(o.cm),isActive:inactive$1,isEnable:enable$1},quoteItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"quote"),icon:icons.quote,hotkey:formatter.toView(Action.Quote)},quoteItemWysiwyg={exec:o=>o.actions.quote.run(),isActive:o=>o.actions.quote.isActive(),isEnable:o=>o.actions.quote.isEnable()},quoteItemMarkup={exec:o=>wrapToBlockquote(o.cm),isActive:inactive$1,isEnable:enable$1};ToolbarDataType.SingleButton,i18n$2.bind(null,"quotelink");const cutItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"cut"),icon:icons.cut,hotkey:formatter.toView(Action.Cut)},cutItemWysiwyg={exec:o=>o.actions.toYfmCut.run(),isActive:o=>o.actions.toYfmCut.isActive(),isEnable:o=>o.actions.toYfmCut.isEnable()},cutItemMarkup={exec:o=>wrapToYfmCut(o.cm),isActive:inactive$1,isEnable:enable$1},noteItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"note"),icon:icons.note,hotkey:formatter.toView(Action.Note)},noteItemWysiwyg={exec:o=>o.actions.toYfmNote.run(),isActive:o=>o.actions.toYfmNote.isActive(),isEnable:o=>o.actions.toYfmNote.isEnable()},noteItemMarkup={exec:o=>wrapToYfmNote(o.cm),isActive:inactive$1,isEnable:enable$1},tableItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"table"),icon:icons.table},tableItemWysiwyg={exec:o=>o.actions.createYfmTable.run(),isActive:o=>o.actions.createYfmTable.isActive(),isEnable:o=>o.actions.createYfmTable.isEnable()},tableItemMarkup={exec:o=>insertYfmTable(o.cm),isActive:inactive$1,isEnable:enable$1},codeItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"code_inline"),icon:icons.code,hotkey:formatter.toView(Action.Code)},codeItemWysiwyg={exec:o=>o.actions.code.run(),isActive:o=>o.actions.code.isActive(),isEnable:o=>o.actions.code.isEnable()},codeItemMarkup={exec:o=>wrapToInlineCode(o.cm),isActive:inactive$1,isEnable:enable$1},imageItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"image"),icon:icons.image},imagePopupItemView={type:ToolbarDataType.ButtonPopup,title:i18n$2.bind(null,"image"),icon:icons.image},imageItemWysiwyg={exec:o=>o.actions.addImageWidget.run(),isActive:o=>o.actions.addImageWidget.isActive(),isEnable:o=>o.actions.addImageWidget.isEnable()},imageItemMarkup={exec:noop$1,isActive:inactive$1,isEnable:enable$1,renderPopup:o=>jsxRuntimeExports.jsx(MToolbarImagePopup,{...o})},fileItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"file"),icon:icons.file},filePopupItemView={type:ToolbarDataType.ButtonPopup,title:i18n$2.bind(null,"file"),icon:icons.file},fileItemWysiwyg={exec:o=>o.actions.addFile.run(),isActive:o=>o.actions.addFile.isActive(),isEnable:o=>o.actions.addFile.isEnable()},fileItemMarkup={exec:noop$1,isActive:inactive$1,isEnable:enable$1,renderPopup:o=>jsxRuntimeExports.jsx(MToolbarFilePopup,{...o})},tabsItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"tabs"),icon:icons.tabs},tabsItemWysiwyg={exec:o=>o.actions.toYfmTabs.run(),isActive:o=>o.actions.toYfmTabs.isActive(),isEnable:o=>o.actions.toYfmTabs.isEnable()},tabsItemMarkup={exec:o=>insertYfmTabs(o.cm),isActive:inactive$1,isEnable:enable$1};ToolbarDataType.SingleButton,i18n$2.bind(null,"math_inline"),ToolbarDataType.SingleButton,i18n$2.bind(null,"math_block"),ToolbarDataType.SingleButton,i18n$2.bind(null,"html"),ToolbarDataType.SingleButton,i18n$2.bind(null,"mermaid");const codeBlockItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"codeblock"),icon:icons.codeBlock,hotkey:formatter.toView(Action.CodeBlock)},codeBlockItemWysiwyg={exec:o=>o.actions.toCodeBlock.run(),isActive:o=>o.actions.toCodeBlock.isActive(),isEnable:o=>o.actions.toCodeBlock.isEnable()},codeBlockItemMarkup={exec:o=>wrapToCodeBlock(o.cm),isActive:inactive$1,isEnable:enable$1},hruleItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"hrule"),icon:icons.horizontalRule},hruleItemWysiwyg={exec:o=>o.actions.hRule.run(),isActive:o=>o.actions.hRule.isActive(),isEnable:o=>o.actions.hRule.isEnable()},hruleItemMarkup={exec:o=>insertHRule(o.cm),isActive:inactive$1,isEnable:enable$1},emojiItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"emoji"),icon:icons.emoji},emojiItemWysiwyg={exec:o=>o.actions.openEmojiSuggest.run({}),isActive:o=>o.actions.openEmojiSuggest.isActive(),isEnable:o=>o.actions.openEmojiSuggest.isEnable()},emojiItemMarkup={exec:noop$1,hintWhenDisabled:i18n$2.bind(null,"emoji__hint"),isActive:inactive$1,isEnable:disable},heading1ItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"heading1"),icon:icons.h1,hotkey:formatter.toView(Action.Heading1),preview:jsxRuntimeExports.jsx(HeadingPreview,{level:1})},heading1ItemWysiwyg={exec:o=>o.actions.toH1.run(),isActive:o=>o.actions.toH1.isActive(),isEnable:o=>o.actions.toH1.isEnable()},heading1ItemMarkup={exec:o=>toH1(o.cm),isActive:inactive$1,isEnable:enable$1},heading2ItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"heading2"),icon:icons.h2,hotkey:formatter.toView(Action.Heading2),preview:jsxRuntimeExports.jsx(HeadingPreview,{level:2})},heading2ItemWysiwyg={exec:o=>o.actions.toH2.run(),isActive:o=>o.actions.toH2.isActive(),isEnable:o=>o.actions.toH2.isEnable()},heading2ItemMarkup={exec:o=>toH2(o.cm),isActive:inactive$1,isEnable:enable$1},heading3ItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"heading3"),icon:icons.h3,hotkey:formatter.toView(Action.Heading3),preview:jsxRuntimeExports.jsx(HeadingPreview,{level:3})},heading3ItemWysiwyg={exec:o=>o.actions.toH3.run(),isActive:o=>o.actions.toH3.isActive(),isEnable:o=>o.actions.toH3.isEnable()},heading3ItemMarkup={exec:o=>toH3(o.cm),isActive:inactive$1,isEnable:enable$1},heading4ItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"heading4"),icon:icons.h4,hotkey:formatter.toView(Action.Heading4),preview:jsxRuntimeExports.jsx(HeadingPreview,{level:4})},heading4ItemWysiwyg={exec:o=>o.actions.toH4.run(),isActive:o=>o.actions.toH4.isActive(),isEnable:o=>o.actions.toH4.isEnable()},heading4ItemMarkup={exec:o=>toH4(o.cm),isActive:inactive$1,isEnable:enable$1},heading5ItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"heading5"),icon:icons.h5,hotkey:formatter.toView(Action.Heading5),preview:jsxRuntimeExports.jsx(HeadingPreview,{level:5})},heading5ItemWysiwyg={exec:o=>o.actions.toH5.run(),isActive:o=>o.actions.toH5.isActive(),isEnable:o=>o.actions.toH5.isEnable()},heading5ItemMarkup={exec:o=>toH5(o.cm),isActive:inactive$1,isEnable:enable$1},heading6ItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"heading6"),icon:icons.h6,hotkey:formatter.toView(Action.Heading6),preview:jsxRuntimeExports.jsx(HeadingPreview,{level:6})},heading6ItemWysiwyg={exec:o=>o.actions.toH6.run(),isActive:o=>o.actions.toH6.isActive(),isEnable:o=>o.actions.toH6.isEnable()},heading6ItemMarkup={exec:o=>toH6(o.cm),isActive:inactive$1,isEnable:enable$1},bulletListItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"ulist"),icon:icons.bulletList,hotkey:formatter.toView(Action.BulletList)},bulletListItemWysiwyg={exec:o=>o.actions.toBulletList.run(),isActive:o=>o.actions.toBulletList.isActive(),isEnable:o=>o.actions.toBulletList.isEnable()},bulletListItemMarkup={exec:o=>toBulletList(o.cm),isActive:inactive$1,isEnable:enable$1},orderedListItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"olist"),icon:icons.orderedList,hotkey:formatter.toView(Action.OrderedList)},orderedListItemWysiwyg={exec:o=>o.actions.toOrderedList.run(),isActive:o=>o.actions.toOrderedList.isActive(),isEnable:o=>o.actions.toOrderedList.isEnable()},orderedListItemMarkup={exec:o=>toOrderedList(o.cm),isActive:inactive$1,isEnable:enable$1},sinkListItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"list__action_sink"),icon:icons.sink,hotkey:formatter.toView(Action.SinkListItem)},sinkListItemWysiwyg={exec:o=>o.actions.sinkListItem.run(),hintWhenDisabled:()=>i18n$2("list_action_disabled"),isActive:o=>o.actions.sinkListItem.isActive(),isEnable:o=>o.actions.sinkListItem.isEnable()},sinkListItemMarkup={exec:o=>sinkListItem(o.cm),isActive:inactive$1,isEnable:enable$1},liftListItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"list__action_lift"),icon:icons.lift,hotkey:formatter.toView(Action.LiftListItem)},liftListItemWysiwyg={exec:o=>o.actions.liftListItem.run(),hintWhenDisabled:()=>i18n$2("list_action_disabled"),isActive:o=>o.actions.liftListItem.isActive(),isEnable:o=>o.actions.liftListItem.isEnable()},liftListItemMarkup={exec:o=>liftListItem(o.cm),isActive:inactive$1,isEnable:enable$1};ToolbarDataType.SingleButton,ToolbarDataType.ReactComponent;const paragraphItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"text"),icon:icons.text,hotkey:formatter.toView(Action.Text),doNotActivateList:!0,preview:jsxRuntimeExports.jsx(TextPreview,{})},paragraphItemWisywig={exec:o=>o.actions.toParagraph.run(),isActive:o=>o.actions.toParagraph.isActive(),isEnable:o=>o.actions.toParagraph.isEnable()},paragraphItemMarkup={exec:noop$1,isActive:inactive$1,isEnable:enable$1},colorifyItemView={type:ToolbarDataType.ReactComponent},colorifyItemWysiwyg={component:WToolbarColors,width:42},colorifyItemMarkup={component:MToolbarColors,width:42};ToolbarDataType.SingleButton,i18n$2.bind(null,"gpt");const headingListItemView={type:ToolbarDataType.ListButton,icon:icons.headline,title:i18n$2.bind(null,"heading"),withArrow:!0,replaceActiveIcon:!0},listsListItemView={type:ToolbarDataType.ListButton,icon:icons.bulletList,withArrow:!0,title:i18n$2.bind(null,"list")};ToolbarDataType.ListButton,i18n$2.bind(null,"move_list");const codeBlocksListItemView={type:ToolbarDataType.ListButton,icon:icons.code,title:i18n$2.bind(null,"code"),withArrow:!0};ToolbarDataType.ListButton,i18n$2.bind(null,"math");const zero={items:{[ActionName.undo]:{view:undoItemView,wysiwyg:undoItemWysiwyg,markup:undoItemMarkup},[ActionName.redo]:{view:redoItemView,wysiwyg:redoItemWysiwyg,markup:redoItemMarkup}},orders:{[ToolbarName.wysiwygMain]:[[ActionName.undo,ActionName.redo]],[ToolbarName.markupMain]:[[ActionName.undo,ActionName.redo]]}},commonmark={items:{...zero.items,[ActionName.bold]:{view:boldItemView,wysiwyg:boldItemWysiwyg,markup:boldItemMarkup},[ActionName.italic]:{view:italicItemView,wysiwyg:italicItemWysiwyg,markup:italicItemMarkup},[ListName.heading]:{view:headingListItemView},[ActionName.paragraph]:{view:paragraphItemView,wysiwyg:paragraphItemWisywig,markup:paragraphItemMarkup},[ActionName.heading1]:{view:heading1ItemView,wysiwyg:heading1ItemWysiwyg,markup:heading1ItemMarkup},[ActionName.heading2]:{view:heading2ItemView,wysiwyg:heading2ItemWysiwyg,markup:heading2ItemMarkup},[ActionName.heading3]:{view:heading3ItemView,wysiwyg:heading3ItemWysiwyg,markup:heading3ItemMarkup},[ActionName.heading4]:{view:heading4ItemView,wysiwyg:heading4ItemWysiwyg,markup:heading4ItemMarkup},[ActionName.heading5]:{view:heading5ItemView,wysiwyg:heading5ItemWysiwyg,markup:heading5ItemMarkup},[ActionName.heading6]:{view:heading6ItemView,wysiwyg:heading6ItemWysiwyg,markup:heading6ItemMarkup},[ListName.lists]:{view:listsListItemView},[ActionName.bulletList]:{view:bulletListItemView,wysiwyg:bulletListItemWysiwyg,markup:bulletListItemMarkup},[ActionName.orderedList]:{view:orderedListItemView,wysiwyg:orderedListItemWysiwyg,markup:orderedListItemMarkup},[ActionName.sinkListItem]:{view:sinkListItemView,wysiwyg:sinkListItemWysiwyg,markup:sinkListItemMarkup},[ActionName.liftListItem]:{view:liftListItemView,wysiwyg:liftListItemWysiwyg,markup:liftListItemMarkup},[ActionName.link]:{view:linkItemView,wysiwyg:linkItemWysiwyg,markup:linkItemMarkup},[ActionName.quote]:{view:quoteItemView,wysiwyg:quoteItemWysiwyg,markup:quoteItemMarkup},[ListName.code]:{view:codeBlocksListItemView},[ActionName.codeInline]:{view:codeItemView,wysiwyg:codeItemWysiwyg,markup:codeItemMarkup},[ActionName.codeBlock]:{view:codeBlockItemView,wysiwyg:codeBlockItemWysiwyg,markup:codeBlockItemMarkup},[ActionName.horizontalRule]:{view:hruleItemView,wysiwyg:hruleItemWysiwyg,markup:hruleItemMarkup}},orders:{[ToolbarName.wysiwygMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.link,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}]],[ToolbarName.markupMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.link,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}]],[ToolbarName.wysiwygHidden]:[[ActionName.horizontalRule]],[ToolbarName.markupHidden]:[[ActionName.horizontalRule]]}},defaultPreset={items:{...commonmark.items,[ActionName.strike]:{view:strikethroughItemView,wysiwyg:strikethroughItemWysiwyg,markup:strikethroughItemMarkup}},orders:{[ToolbarName.wysiwygMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic,ActionName.strike],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.link,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}]],[ToolbarName.markupMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic,ActionName.strike],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.link,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}]],[ToolbarName.wysiwygHidden]:[[ActionName.horizontalRule]],[ToolbarName.markupHidden]:[[ActionName.horizontalRule]]}},yfm={items:{...defaultPreset.items,[ActionName.underline]:{view:underlineItemView,wysiwyg:underlineItemWysiwyg,markup:underlineItemMarkup},[ActionName.mono]:{view:monospaceItemView,wysiwyg:monospaceItemWysiwyg,markup:monospaceItemMarkup},[ActionName.note]:{view:noteItemView,wysiwyg:noteItemWysiwyg,markup:noteItemMarkup},[ActionName.cut]:{view:cutItemView,wysiwyg:cutItemWysiwyg,markup:cutItemMarkup},[ActionName.image]:{view:imageItemView,wysiwyg:imageItemWysiwyg},[ActionName.imagePopup]:{view:imagePopupItemView,markup:imageItemMarkup},[ActionName.file]:{view:fileItemView,wysiwyg:fileItemWysiwyg},[ActionName.filePopup]:{view:filePopupItemView,markup:fileItemMarkup},[ActionName.table]:{view:tableItemView,wysiwyg:tableItemWysiwyg,markup:tableItemMarkup},[ActionName.checkbox]:{view:checkboxItemView,wysiwyg:checkboxItemWysiwyg,markup:checkboxItemMarkup},[ActionName.tabs]:{view:tabsItemView,wysiwyg:tabsItemWysiwyg,markup:tabsItemMarkup}},orders:{[ToolbarName.wysiwygMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic,ActionName.underline,ActionName.strike,ActionName.mono],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.link,ActionName.note,ActionName.cut,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}],[ActionName.image,ActionName.file,ActionName.table,ActionName.checkbox]],[ToolbarName.markupMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic,ActionName.underline,ActionName.strike,ActionName.mono],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.link,ActionName.note,ActionName.cut,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}],[ActionName.imagePopup,ActionName.filePopup,ActionName.table,ActionName.checkbox]],[ToolbarName.wysiwygHidden]:[[ActionName.horizontalRule,ActionName.tabs]],[ToolbarName.markupHidden]:[[ActionName.horizontalRule,ActionName.tabs]]}},full={items:{...yfm.items,[ActionName.mark]:{view:markedItemView,wysiwyg:markedItemWysiwyg,markup:markedItemMarkup},[ActionName.colorify]:{view:colorifyItemView,wysiwyg:colorifyItemWysiwyg,markup:colorifyItemMarkup},[ActionName.emoji]:{view:emojiItemView,wysiwyg:emojiItemWysiwyg,markup:emojiItemMarkup}},orders:{[ToolbarName.wysiwygMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic,ActionName.underline,ActionName.strike,ActionName.mono,ActionName.mark],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.colorify,ActionName.link,ActionName.note,ActionName.cut,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}],[ActionName.image,ActionName.file,ActionName.table,ActionName.checkbox]],[ToolbarName.markupMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic,ActionName.underline,ActionName.strike,ActionName.mono,ActionName.mark],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.colorify,ActionName.link,ActionName.note,ActionName.cut,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}],[ActionName.imagePopup,ActionName.filePopup,ActionName.table,ActionName.checkbox]],[ToolbarName.wysiwygHidden]:[[ActionName.horizontalRule,ActionName.emoji,ActionName.tabs]],[ToolbarName.markupHidden]:[[ActionName.horizontalRule,ActionName.emoji,ActionName.tabs]]}},flattenPreset=o=>o.flat().reduce((e,s)=>s.type===ToolbarDataType.ListButton&&Array.isArray(s.data)?e.concat(s.data):(e.push(s),e),[]),defaultPresets={zero,commonmark,default:defaultPreset,yfm,full},transformItem=(o,e,s="unknown")=>{if(!e)return console.warn(`Toolbar item "${s}" not found, it might not have been added to the items dictionary.`),{};const a=e.view.type===ToolbarDataType.ListButton,l=e.view.type===ToolbarDataType.SingleButton;return{type:e.view.type??ToolbarDataType.SingleButton,id:s,title:e.view.title,hint:e.view.hint,icon:e.view.icon,hotkey:e.view.hotkey,doNotActivateList:e.view.doNotActivateList,...l&&{preview:e.view.preview},...a&&{withArrow:e.view.withArrow,replaceActiveIcon:e.view.replaceActiveIcon},...o==="wysiwyg"&&e.wysiwyg&&{...e.wysiwyg},...o==="markup"&&e.markup&&{...e.markup}}},createToolbarConfig=(o,e,s)=>{const a=typeof e=="string"?defaultPresets[e]||defaultPresets.default:e,l=a.orders[s]??[[]],{items:u}=a;return l.map(d=>d.map(h=>typeof h=="string"?transformItem(o,u[h],h):{...transformItem(o,u[h.id],h.id),data:h.items.map(p=>transformItem(o,u[p],p))}))},getToolbarsConfigs=({toolbarsPreset:o,props:e,preset:s})=>{const a=o?createToolbarConfig("wysiwyg",o,ToolbarName.wysiwygMain):e.wysiwygToolbarConfig??createToolbarConfig("wysiwyg",s,ToolbarName.wysiwygMain),l=o?createToolbarConfig("markup",o,ToolbarName.markupMain):e.markupToolbarConfig??createToolbarConfig("markup",s,ToolbarName.markupMain),u=o?flattenPreset(createToolbarConfig("wysiwyg",o,ToolbarName.wysiwygHidden)):e.wysiwygHiddenActionsConfig??flattenPreset(createToolbarConfig("wysiwyg",s,ToolbarName.wysiwygHidden)),c=o?flattenPreset(createToolbarConfig("markup",o,ToolbarName.markupHidden)):e.markupHiddenActionsConfig??flattenPreset(createToolbarConfig("markup",s,ToolbarName.markupHidden));return{wysiwygToolbarConfig:a,markupToolbarConfig:l,wysiwygHiddenActionsConfig:u,markupHiddenActionsConfig:c}},cnEditorComponent=cn("editor-component"),b=cnEditorComponent,EditorWrapper$1=reactExports.forwardRef(({autofocus:o,editor:e,editorMode:s,enableSubmitInPreview:a,hidePreviewAfterSubmit:l,isFocused:u,markupHiddenActionsConfig:c,markupToolbarConfig:d,qa:h,settingsVisible:p,showPreview:m,stickyToolbar:g,toggleShowPreview:y,toolbarsPreset:A,unsetShowPreview:T,wysiwygHiddenActionsConfig:E,wysiwygToolbarConfig:v},_)=>{var z;const{wysiwygToolbarConfig:w,markupToolbarConfig:R,wysiwygHiddenActionsConfig:k,markupHiddenActionsConfig:I}=reactExports.useMemo(()=>getToolbarsConfigs({toolbarsPreset:A,props:{wysiwygToolbarConfig:v,markupToolbarConfig:d,wysiwygHiddenActionsConfig:E,markupHiddenActionsConfig:c},preset:e.preset}),[A,v,d,E,c,e.preset]),P=reactExports.useCallback(Y=>{e.changeEditorMode({mode:Y,reason:"settings"}),T()},[e,T]),N=reactExports.useCallback(Y=>{e.changeToolbarVisibility({visible:Y})},[e]),L=reactExports.useCallback(Y=>{T(),e.changeSplitModeEnabled({splitModeEnabled:Y})},[e,T]),Q=reactExports.useCallback(Y=>{e.changeSplitModeEnabled({splitModeEnabled:!1}),Y!==m&&y()},[e,m,y]),j=!!(e.renderPreview&&s==="markup"&&!e.splitModeEnabled);useKey(Y=>j&&isPreviewKeyDown(Y),Y=>{Y.preventDefault(),Q(!m)},{event:"keydown"},[m,s,Q,j]),useKey(Y=>!!(a&&m&&u&&isSubmitKeyDown(Y)),()=>{e.emit("submit",null),l&&Q(!1)},{event:"keydown"},[l,a,m,m]);const F={mode:s,onModeChange:P,onShowPreviewChange:Q,onSplitModeChange:L,onToolbarVisibilityChange:N,renderPreviewButton:j,showPreview:m,splitMode:e.splitMode,splitModeEnabled:e.splitModeEnabled,stickyToolbar:g,toolbarVisibility:e.toolbarVisible&&!m,disableMark:e.mobile},V=p===!0||Array.isArray(p)&&p.length>0,J=e.mobile?"scroll":"shrink";return jsxRuntimeExports.jsx("div",{className:b("editor-wrapper"),ref:_,"data-qa":h,"data-mode":e.currentMode,children:m?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:b("preview-wrapper"),children:(z=e.renderPreview)==null?void 0:z.call(e,{getValue:e.getValue,mode:"preview",md:e.mdOptions,directiveSyntax:e.directiveSyntax})}),jsxRuntimeExports.jsx(Settings,{...F,settingsVisible:p})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[s==="wysiwyg"&&jsxRuntimeExports.jsx(WysiwygEditorView,{editor:e,autofocus:o,settingsVisible:V,toolbarConfig:w,toolbarVisible:e.toolbarVisible,hiddenActionsConfig:k,className:b("editor",{mode:s}),toolbarClassName:b("toolbar"),stickyToolbar:g,toolbarDisplay:J,children:jsxRuntimeExports.jsx(Settings,{...F,settingsVisible:e.toolbarVisible&&p})}),s==="markup"&&jsxRuntimeExports.jsx(MarkupEditorView,{editor:e,autofocus:o,settingsVisible:V,toolbarConfig:R,toolbarVisible:e.toolbarVisible,splitMode:e.splitMode,splitModeEnabled:e.splitModeEnabled,hiddenActionsConfig:I,className:b("editor",{mode:s}),toolbarClassName:b("toolbar"),stickyToolbar:g,toolbarDisplay:J,children:jsxRuntimeExports.jsx(Settings,{...F,settingsVisible:e.toolbarVisible&&p})}),jsxRuntimeExports.jsx(Settings,{...F,settingsVisible:!e.toolbarVisible&&p,renderPreviewButton:!e.toolbarVisible&&j})]})})});EditorWrapper$1.displayName="EditorWrapper";const MarkdownEditorView=reactExports.forwardRef((o,e)=>{const s=useEnsuredForwardedRef(e),a=reactExports.useRef(null),[l,,u,c]=useBooleanState(!1),[d,h]=reactExports.useState(!1);reactExports.useEffect(()=>{h(!0)},[]);const p=useMarkdownEditorContext(),m=o.editor??p;if(!m)throw new Error("[MarkdownEditorView]: an instance of the editor must be passed through the props or context");const{autofocus:g,className:y,enableSubmitInPreview:A=!0,hidePreviewAfterSubmit:T=!1,markupHiddenActionsConfig:E,markupToolbarConfig:v,qa:_,settingsVisible:w=!0,stickyToolbar:R,toolbarsPreset:k,wysiwygHiddenActionsConfig:I,wysiwygToolbarConfig:P}=o,N=useUpdate();reactExports.useLayoutEffect(()=>(m.on("rerender",N),()=>{m.off("rerender",N)}),[m,N]);const L=m.currentMode,Q=m.splitModeEnabled&&m.splitMode&&L==="markup",j=reactExports.useRef(null),F=useToaster();reactExports.useEffect(()=>{l&&s.current.focus()},[s,l]);const V=w===!0||Array.isArray(w)&&w.length>0;return jsxRuntimeExports.jsx(ErrorBoundary,{onError:J=>{globalLogger.error(J),m.logger.error(J)},fallbackRender:({error:J,resetErrorBoundary:z})=>(F.add({theme:"danger",name:"g-md-editor-error",title:i18n$4("error-title"),content:J.message}),setTimeout(()=>{z(),m.changeEditorMode({mode:"markup",reason:"error-boundary",emit:!1})}),null),children:jsxRuntimeExports.jsxs("div",{ref:s,"data-qa":_,className:b({settings:V,split:Q&&m.splitMode},[y]),role:"button",tabIndex:0,children:[jsxRuntimeExports.jsx(EditorWrapper$1,{autofocus:g,editor:m,editorMode:L,enableSubmitInPreview:A,hidePreviewAfterSubmit:T,isFocused:isWrapperFocused(s),markupHiddenActionsConfig:E,markupToolbarConfig:v,qa:"g-md-editor-mode",ref:a,settingsVisible:w,showPreview:l,stickyToolbar:R,toggleShowPreview:c,toolbarsPreset:k,unsetShowPreview:u,wysiwygHiddenActionsConfig:I,wysiwygToolbarConfig:P}),Q&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[m.splitMode==="horizontal"?jsxRuntimeExports.jsx(HorizontalDragWrapper,{editor:m,isMounted:d,leftElRef:a,rightElRef:j,wrapperRef:s}):jsxRuntimeExports.jsx("div",{className:b("resizer")}),jsxRuntimeExports.jsx(SplitModeView,{editor:m,ref:j})]})]})})});MarkdownEditorView.displayName="MarkdownEditorView";const MarkupSearchAnchor=({mode:o})=>jsxRuntimeExports.jsx("div",{className:`g-md-search-${o}-anchor`});function Settings(o){const e=reactExports.useRef(null),s=useSticky(e)&&o.toolbarVisibility&&o.stickyToolbar;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:(o.renderPreviewButton||o.settingsVisible)&&jsxRuntimeExports.jsx("div",{className:b("settings-wrapper"),children:jsxRuntimeExports.jsxs("div",{ref:e,className:stickyCn.settings({withToolbar:o.toolbarVisibility,stickyActive:s}),children:[jsxRuntimeExports.jsx(EditorSettings,{...o}),jsxRuntimeExports.jsx(MarkupSearchAnchor,{...o})]})})})}function isPreviewKeyDown(o){return(isMac()?o.metaKey:o.ctrlKey)&&o.shiftKey&&o.code==="KeyP"}function isWrapperFocused(o){return document.activeElement===o.current}function isSubmitKeyDown(o){return(isMac()?o.metaKey:o.ctrlKey)&&o.code==="Enter"}const noop=()=>{},inactive=()=>!1,enable=()=>!0,mUndoItemData={id:ActionName.undo,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"undo"),icon:icons.undo,hotkey:formatter.toView(Action.Undo),exec:o=>undo$3(o.cm),isActive:inactive,isEnable:o=>undoDepth(o.cm.state)>0},mRedoItemData={id:ActionName.redo,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"redo"),icon:icons.redo,hotkey:formatter.toView(Action.Redo),exec:o=>redo$3(o.cm),isActive:inactive,isEnable:o=>redoDepth(o.cm.state)>0},mBoldItemData={id:ActionName.bold,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"bold"),icon:icons.bold,hotkey:formatter.toView(Action.Bold),exec:o=>toggleBold(o.cm),isActive:inactive,isEnable:enable},mItalicItemData={id:ActionName.italic,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"italic"),icon:icons.italic,hotkey:formatter.toView(Action.Italic),exec:o=>toggleItalic(o.cm),isActive:inactive,isEnable:enable},mUnderlineItemData={id:ActionName.underline,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"underline"),icon:icons.underline,hotkey:formatter.toView(Action.Underline),exec:o=>toggleUnderline(o.cm),isActive:inactive,isEnable:enable},mStrikethroughItemData={id:ActionName.strike,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"strike"),icon:icons.strikethrough,hotkey:formatter.toView(Action.Strike),exec:o=>toggleStrikethrough(o.cm),isActive:inactive,isEnable:enable},mMonospaceItemData={id:ActionName.mono,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"mono"),icon:icons.mono,exec:o=>toggleMonospace(o.cm),isActive:inactive,isEnable:enable},mMarkedItemData={id:ActionName.mark,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"mark"),icon:icons.mark,exec:o=>toggleMarked(o.cm),isActive:inactive,isEnable:enable},mCheckboxButton={id:ActionName.checkbox,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"checkbox"),icon:icons.checklist,exec:o=>wrapToCheckbox(o.cm),isActive:inactive,isEnable:enable},mLinkButton={id:ActionName.link,type:ToolbarDataType.SingleButton,icon:icons.link,title:i18n$2("link"),exec:o=>insertLink(o.cm),isActive:inactive,isEnable:enable},mQuoteButton={id:ActionName.quote,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"quote"),icon:icons.quote,exec:o=>wrapToBlockquote(o.cm),isActive:inactive,isEnable:enable},mCutButton={id:ActionName.yfm_cut,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"cut"),icon:icons.cut,hotkey:formatter.toView(Action.Cut),exec:o=>wrapToYfmCut(o.cm),isActive:inactive,isEnable:enable},mNoteButton={id:ActionName.yfm_note,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"note"),icon:icons.note,hotkey:formatter.toView(Action.Note),exec:o=>wrapToYfmNote(o.cm),isActive:inactive,isEnable:enable},mTableButton={id:ActionName.table,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"table"),icon:icons.table,exec:o=>insertYfmTable(o.cm),isActive:inactive,isEnable:enable},mCodeItemData={id:ActionName.code_inline,title:i18n$2.bind(null,"code_inline"),icon:icons.code,hotkey:formatter.toView(Action.Code),exec:o=>wrapToInlineCode(o.cm),isActive:inactive,isEnable:enable},mImagePopupData={id:"image",type:ToolbarDataType.ButtonPopup,icon:icons.image,title:i18n$2("image"),exec:noop,isActive:inactive,isEnable:enable,renderPopup:o=>jsxRuntimeExports.jsx(MToolbarImagePopup,{...o})},mFilePopupData={id:"file",type:ToolbarDataType.ButtonPopup,icon:icons.file,title:i18n$2("file"),exec:noop,isActive:inactive,isEnable:enable,renderPopup:o=>jsxRuntimeExports.jsx(MToolbarFilePopup,{...o})};i18n$2.bind(null,"tabs"),ToolbarDataType.SingleButton,ActionName.math_inline,i18n$2.bind(null,"math_inline"),ActionName.math_block,i18n$2.bind(null,"math_block"),ActionName.yfm_html_block,ToolbarDataType.SingleButton,i18n$2.bind(null,"html"),ActionName.mermaid,ToolbarDataType.SingleButton,i18n$2.bind(null,"mermaid");const mCodeblockItemData={id:ActionName.code_block,title:i18n$2.bind(null,"codeblock"),icon:icons.codeBlock,hotkey:formatter.toView(Action.CodeBlock),exec:o=>wrapToCodeBlock(o.cm),isActive:inactive,isEnable:enable};i18n$2.bind(null,"hrule"),ToolbarDataType.SingleButton,i18n$2.bind(null,"emoji"),ToolbarDataType.SingleButton,i18n$2.bind(null,"emoji__hint"),ToolbarDataType.ListButton,i18n$2.bind(null,"math");const mHeading1ItemData={id:ActionName.heading1,title:i18n$2.bind(null,"heading1"),icon:icons.h1,hotkey:formatter.toView(Action.Heading1),exec:o=>toH1(o.cm),isActive:inactive,isEnable:enable,preview:jsxRuntimeExports.jsx(HeadingPreview,{level:1})},mHeading2ItemData={id:ActionName.heading2,title:i18n$2.bind(null,"heading2"),icon:icons.h2,hotkey:formatter.toView(Action.Heading2),exec:o=>toH2(o.cm),isActive:inactive,isEnable:enable,preview:jsxRuntimeExports.jsx(HeadingPreview,{level:2})},mHeading3ItemData={id:ActionName.heading3,title:i18n$2.bind(null,"heading3"),icon:icons.h3,hotkey:formatter.toView(Action.Heading3),exec:o=>toH3(o.cm),isActive:inactive,isEnable:enable,preview:jsxRuntimeExports.jsx(HeadingPreview,{level:3})},mHeading4ItemData={id:ActionName.heading4,title:i18n$2.bind(null,"heading4"),icon:icons.h4,hotkey:formatter.toView(Action.Heading4),exec:o=>toH4(o.cm),isActive:inactive,isEnable:enable,preview:jsxRuntimeExports.jsx(HeadingPreview,{level:4})},mHeading5ItemData={id:ActionName.heading5,title:i18n$2.bind(null,"heading5"),icon:icons.h5,hotkey:formatter.toView(Action.Heading5),exec:o=>toH5(o.cm),isActive:inactive,isEnable:enable,preview:jsxRuntimeExports.jsx(HeadingPreview,{level:5})},mHeading6ItemData={id:ActionName.heading6,title:i18n$2.bind(null,"heading6"),icon:icons.h6,hotkey:formatter.toView(Action.Heading6),exec:o=>toH6(o.cm),isActive:inactive,isEnable:enable,preview:jsxRuntimeExports.jsx(HeadingPreview,{level:6})},mBulletListItemData={id:ActionName.bulletList,title:i18n$2.bind(null,"ulist"),icon:icons.bulletList,exec:o=>toBulletList(o.cm),isActive:inactive,isEnable:enable},mOrderedListItemData={id:ActionName.orderedList,title:i18n$2.bind(null,"olist"),icon:icons.orderedList,exec:o=>toOrderedList(o.cm),isActive:inactive,isEnable:enable};ActionName.sinkListItem,i18n$2.bind(null,"list__action_sink"),ActionName.liftListItem,i18n$2.bind(null,"list__action_lift"),i18n$2.bind(null,"heading"),i18n$2.bind(null,"list"),i18n$2.bind(null,"code"),i18n$2.bind(null,"math");const mBiusGroupConfig=[mBoldItemData,mItalicItemData,mUnderlineItemData,mStrikethroughItemData,mMonospaceItemData,mMarkedItemData];ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ReactComponent,ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code"),ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code"),ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code"),ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code");function EditorWrapper({textareaId:o,editorOpts:e,viewOpts:s}){const a=useMarkdownEditor(e,[]);return reactExports.useEffect(()=>(window.__GMD_EDITOR__=a,()=>{window.__GMD_EDITOR__=null}),[a]),reactExports.useEffect(()=>{var c;if(!o||!a)return;const l=((c=window.parent)==null?void 0:c.document)||document,u=()=>{if(typeof a.getValue!="function")return;const d=l.getElementById(o);d&&(d.value=a.getValue())};return u(),a.on("change",u),()=>a.off("change",u)},[a,o]),React.createElement(MarkdownEditorView,{editor:a,stickyToolbar:!0,...s})}function App({textareaId:o,editorOpts:e,viewOpts:s}){return React.createElement(ThemeProvider,{theme:"light"},React.createElement(ToasterProvider,{toaster},React.createElement(EditorWrapper,{textareaId:o,editorOpts:e,viewOpts:s}),React.createElement(ToasterComponent,{toaster})))}window.GravityUIMarkdownEditorInit=function(o,e,s,a){var p,m;const l=((p=a==null?void 0:a.initial)==null?void 0:p.markup)??"",u=(a==null?void 0:a.editor)??{},c={...u,md:{...u.md??{},html:u.allow_html??((m=u.md)==null?void 0:m.html)??!1},initial:{...u.initial??{},markup:l}};delete c.allow_html;const d=(a==null?void 0:a.view)??{},h=(a==null?void 0:a.lang)??"en";configure$1({lang:h}),configure({lang:h});try{clientExports.createRoot(e).render(React.createElement(App,{textareaId:o,editorOpts:c,viewOpts:d}))}catch(g){console.error("[Gravity Markdown Editor] Init failed:",g)}};const markdownEditor$2={},markdownEditor$3=Object.freeze(Object.defineProperty({__proto__:null,default:markdownEditor$2},Symbol.toStringTag,{value:"Module"})),markdownEditor={},markdownEditor$1=Object.freeze(Object.defineProperty({__proto__:null,default:markdownEditor},Symbol.toStringTag,{value:"Module"}))})();
